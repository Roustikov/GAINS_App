/*! For license information please see 2.26bd1b33.chunk.js.LICENSE.txt */
(this.webpackJsonpgains=this.webpackJsonpgains||[]).push([[2],[function(e,t,i){"use strict";i.d(t,"a",(function(){return Q})),i.d(t,"b",(function(){return Jt})),i.d(t,"S",(function(){return Qt})),i.d(t,"L",(function(){return ii})),i.d(t,"c",(function(){return se})),i.d(t,"i",(function(){return hi})),i.d(t,"d",(function(){return oi})),i.d(t,"j",(function(){return vi})),i.d(t,"k",(function(){return wi})),i.d(t,"m",(function(){return le})),i.d(t,"n",(function(){return Ci})),i.d(t,"o",(function(){return Pi})),i.d(t,"q",(function(){return _t})),i.d(t,"g",(function(){return Ht})),i.d(t,"h",(function(){return Wt})),i.d(t,"e",(function(){return Ft})),i.d(t,"f",(function(){return qt})),i.d(t,"l",(function(){return Ut})),i.d(t,"p",(function(){return Vt})),i.d(t,"s",(function(){return Ai})),i.d(t,"w",(function(){return Le})),i.d(t,"z",(function(){return ze})),i.d(t,"Y",(function(){return Ne})),i.d(t,"R",(function(){return Be})),i.d(t,"W",(function(){return _e})),i.d(t,"F",(function(){return He})),i.d(t,"H",(function(){return s})),i.d(t,"X",(function(){return l})),i.d(t,"K",(function(){return c})),i.d(t,"N",(function(){return d})),i.d(t,"C",(function(){return h})),i.d(t,"J",(function(){return p})),i.d(t,"G",(function(){return f})),i.d(t,"D",(function(){return v})),i.d(t,"I",(function(){return y})),i.d(t,"E",(function(){return b})),i.d(t,"A",(function(){return ot})),i.d(t,"t",(function(){return at})),i.d(t,"Q",(function(){return st})),i.d(t,"M",(function(){return ct})),i.d(t,"O",(function(){return dt})),i.d(t,"u",(function(){return ht})),i.d(t,"B",(function(){return ut})),i.d(t,"P",(function(){return ft})),i.d(t,"v",(function(){return gt})),i.d(t,"T",(function(){return mt})),i.d(t,"U",(function(){return vt})),i.d(t,"y",(function(){return bt})),i.d(t,"V",(function(){return wt})),i.d(t,"x",(function(){return xt})),i.d(t,"r",(function(){return Li}));var n="ej2_instances",r=0,o=!1;function a(e,t){var i=t;return i.unshift(void 0),new(Function.prototype.bind.apply(e,i))}function s(e,t){for(var i=t,n=e.replace(/\[/g,".").replace(/\]/g,"").split("."),r=0;r<n.length&&!u(i);r++)i=i[n[r]];return i}function l(e,t,i){var n,r,o=e.replace(/\[/g,".").replace(/\]/g,"").split("."),a=i||{},s=a,l=o.length;for(n=0;n<l;n++)r=o[n],n+1===l?s[r]=void 0===t?{}:t:p(s[r])&&(s[r]={}),s=s[r];return a}function c(e){return!p(e)&&e.constructor==={}.constructor}function d(e,t){if(!p(t))for(var i=e,n=t,r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];p(i.deepMerge)||-1===i.deepMerge.indexOf(a)||!c(n[a])&&!Array.isArray(n[a])?i[a]=n[a]:h(i[a],i[a],n[a],!0)}}function h(e,t,i,n){var r=e&&"object"===typeof e?e:{},o=arguments.length;n&&(o-=1);for(var a=function(e){if(!s[e])return"continue";var t=s[e];Object.keys(t).forEach((function(e){var i,o=r[e],a=t[e],s=Array.isArray(a)&&Array.isArray(o)&&a.length!==o.length,l=!y()||!(o instanceof Event)&&!s;n&&l&&(c(a)||Array.isArray(a))?c(a)?(i=o||{},Array.isArray(i)&&i.hasOwnProperty("isComplexArray")?h(i,{},a,n):r[e]=h(i,{},a,n)):(i=y()?o&&Object.keys(a).length:o||[],r[e]=h([],i,a,n)):r[e]=a}))},s=arguments,l=1;l<o;l++)a(l);return r}function p(e){return void 0===e||null===e}function u(e){return"undefined"===typeof e}function f(e){return e+"_"+r++}function g(e,t){return e===t||!(e===document||!e)&&g(e.parentNode,t)}function m(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}}function v(e){var t=e+"";return t.match(/auto|%|px|vh|vm|vmax|vmin|em/)?t:t+"px"}function y(){return o}function b(e,t){var i="string"===typeof e?document.querySelector(e):e;if(i[n])for(var r=0,o=i[n];r<o.length;r++){var a=o[r];if(a instanceof t)return a}return null}var w,x={latn:{_digits:"0123456789",_type:"numeric"}},O={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},S=[0,1,2,3,4,5,6,7,8,9],C=function(){function e(){}return e.getMainObject=function(e,t){return s(y()?t:"main."+t,e)},e.getNumberingSystem=function(e){return s("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var i={},n=0,r=t||Object.keys(e);n<r.length;n++){var o=r[n];i.hasOwnProperty(e[o])||(i[e[o]]=o)}return i},e.getSymbolRegex=function(e){var t=e.map((function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")})).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},i=0,n=Object.keys(O);i<n.length;i++){var r=n[i];t[e[r]]=O[r]}return t},e.constructRegex=function(e){for(var t=e.length,i="",n=0;n<t;n++)i+=n!==t-1?e[n]+"|":e[n];return i},e.convertValueParts=function(e,t,i){return e.replace(t,(function(e){return i[e]}))},e.getDefaultNumberingSystem=function(e){var t={};return t.obj=s("numbers",e),t.nSystem=s("defaultNumberingSystem",t.obj),t},e.getCurrentNumericOptions=function(e,t,i,n){var r={},o=this.getDefaultNumberingSystem(e);if(!u(o.nSystem)||n){var a=n?s("obj.mapperDigits",o):s(o.nSystem+"._digits",t);u(a)||(r.numericPair=this.reverseObject(a,S),r.numberParseRegex=new RegExp(this.constructRegex(a),"g"),r.numericRegex="["+a[0]+"-"+a[9]+"]",i&&(r.numericRegex=a[0]+"-"+a[9],r.symbolNumberSystem=s(n?"numberSymbols":"symbols-numberSystem-"+o.nSystem,o.obj),r.symbolMatch=this.getSymbolMatch(r.symbolNumberSystem),r.numberSystem=o.nSystem))}return r},e.getNumberMapper=function(e,t,i){var n={mapper:{}},r=this.getDefaultNumberingSystem(e);if(!u(r.nSystem)){n.numberSystem=r.nSystem,n.numberSymbols=s("symbols-numberSystem-"+r.nSystem,r.obj),n.timeSeparator=s("timeSeparator",n.numberSymbols);var o=s(r.nSystem+"._digits",t);if(!u(o))for(var a=0,l=S;a<l.length;a++){var c=l[a];n.mapper[c]=o[c]}}return n},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=x,e}(),P={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.\u200f",BHD:"\u062f.\u0628.\u200f",DZD:"\u062f.\u062c.\u200f",EGP:"\u062c.\u0645.\u200f",ILS:"\u20aa",IQD:"\u062f.\u0639.\u200f",JOD:"\u062f.\u0627.\u200f",KMF:"CF",KWD:"\u062f.\u0643.\u200f",LBP:"\u0644.\u0644.\u200f",LYD:"\u062f.\u0644.\u200f",MAD:"\u062f.\u0645.\u200f",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.\u200f",QAR:"\u0631.\u0642.\u200f",SAR:"\u0631.\u0633.\u200f",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.\u200f",TND:"\u062f.\u062a.\u200f",YER:"\u0631.\u064a.\u200f",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};!function(e){var t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];e.getHijriDate=function(e){var i=e.getDate(),n=e.getMonth(),r=e.getFullYear(),o=n+1,a=r;o<3&&(a-=1,o+=12);var s=Math.floor(a/100),l=s-Math.floor(s/4)-2,c=Math.floor(365.25*(a+4716))+Math.floor(30.6001*(o+1))+i-l-1524,d=c+(l=(s=Math.floor((c-1867216.25)/36524.25))-Math.floor(s/4)+1)+1524,h=Math.floor((d-122.1)/365.25),p=Math.floor(365.25*h),u=Math.floor((d-p)/30.6001);i=d-p-Math.floor(30.6001*u),(n=Math.floor((d-p)/20.6001))>13&&(h+=1,n-=12),n-=1,r=h-4716;var f=c-24e5,g=10631/30,m=c-1948084,v=Math.floor(m/10631);m-=10631*v;var y=Math.floor((m-.1335)/g),b=30*v+y;m-=Math.floor(y*g+.1335);var w=Math.floor((m+28.5001)/29.5);13===w&&(w=12);for(var x=m-Math.floor(29.5001*w-29),O=0;O<t.length&&!(t[O]>f);O++);var S=O+16260,C=Math.floor((S-1)/12),P=C+1,j=S-12*C,I=f-t[O-1]+1;return(I+"").length>2&&(I=x,j=w,P=b),{year:P,month:j,date:I}},e.toGregorian=function(e,i,n){var r=n+t[12*(e-1)+1+(i-1)-16260-1]-1+24e5,o=Math.floor(r+.5),a=Math.floor((o-1867216.25)/36524.25),s=(a=o+1+a-Math.floor(a/4))+1524,l=Math.floor((s-122.1)/365.25),c=Math.floor(365.25*l),d=Math.floor((s-c)/30.6001),h=s-c-Math.floor(30.6001*d),p=d-(d>13.5?13:1),u=l-(p>2.5?4716:4715);return u<=0&&p--,new Date(u+"/"+p+"/"+h)}}(w||(w={}));var j=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,I="stand-alone",E=["sun","mon","tue","wed","thu","fri","sat"],T={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},A={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},D=function(){function e(){}return e.dateFormat=function(e,t,i){var n=this,r=G.getDependables(i,e,t.calendar),o=s("parserObject.numbers",r),a=r.dateObject,l={isIslamic:G.islamicRegex.test(t.calendar)};y()&&t.isServerRendered&&(t=G.compareBlazorDateFormats(t,e));var c=t.format||G.getResultantPattern(t.skeleton,r.dateObject,t.type,!1,y()?e:"");if(l.dateSeperator=y()?s("dateSeperator",a):G.getDateSeparator(r.dateObject),u(c))m("Format options or type given must be invalid");else{c=G.ConvertDateToWeekFormat(c),y()&&(c=c.replace(/tt/,"a")),l.pattern=c,l.numMapper=y()?h({},o):C.getNumberMapper(r.parserObject,C.getNumberingSystem(i));for(var d=0,p=c.match(j)||[];d<p.length;d++){var f=p[d],g=f.length,v=f[0];"K"===v&&(v="h");switch(v){case"E":case"c":y()?l.weekday=s("days."+G.monthIndex[g],a):l.weekday=r.dateObject[G.days][I][G.monthIndex[g]];break;case"M":case"L":y()?l.month=s("months."+G.monthIndex[g],a):l.month=r.dateObject[G.month][I][G.monthIndex[g]];break;case"a":l.designator=y()?s("dayPeriods",a):s("dayPeriods.format.wide",a);break;case"G":var b=g<=3?"eraAbbr":4===g?"eraNames":"eraNarrow";l.era=y()?s("eras",a):s("eras."+b,r.dateObject);break;case"z":l.timeZone=s("dates.timeZoneNames",r.parserObject)}}}return function(e){return isNaN(e.getDate())?null:n.intDateFormatter(e,l)}},e.intDateFormatter=function(e,t){for(var i="",n=t.pattern.match(G.dateParseRegex),r=this.getCurrentDateValue(e,t.isIslamic),o=0,a=n;o<a.length;o++){var s=a[o],l=s.length,c=s[0];"K"===c&&(c="h");var d=void 0,h="",u=void 0,f=void 0,g="";switch(c){case"M":case"L":d=r.month,l>2?i+=t.month[d]:u=!0;break;case"E":case"c":i+=t.weekday[E[e.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(u=!0,"d"===c)d=r.date;else if("f"===c){u=!1,f=!0;var m=(h=(h=e[T[c]]().toString()).substring(0,l)).length;if(l!==m){if(l>3)continue;for(var v=0;v<l-m;v++)h="0"+h.toString()}g+=h}else d=e[T[c]]();"h"===c&&(d=d%12||12);break;case"y":f=!0,g+=r.year,2===l&&(g=g.substr(g.length-2));break;case"a":var y=e.getHours()<12?"am":"pm";i+=t.designator[y];break;case"G":var b=e.getFullYear()<0?0:1,w=t.era[b];p(w)&&(w=t.era[b?0:1]),i+=w||"";break;case"'":i+="''"===s?"'":s.replace(/\'/g,"");break;case"z":var x=e.getTimezoneOffset(),O=l<4?"+H;-H":t.timeZone.hourFormat;O=O.replace(/:/g,t.numMapper.timeSeparator),0===x?i+=t.timeZone.gmtZeroFormat:(f=!0,g=this.getTimeZoneValue(x,O)),g=t.timeZone.gmtFormat.replace(/\{0\}/,g);break;case":":i+=t.numMapper.numberSymbols.timeSeparator;break;case"/":i+=t.dateSeperator;break;case"W":u=!0,d=G.getWeekOfYear(e);break;default:i+=s}u&&(f=!0,g=this.checkTwodigitNumber(d,l)),f&&(i+=C.convertValueParts(g,G.latnParseRegex,t.numMapper.mapper))}return i},e.getCurrentDateValue=function(e,t){return t?w.getHijriDate(e):{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}},e.checkTwodigitNumber=function(e,t){var i=e+"";return 2===t&&2!==i.length?"0"+i:i},e.getTimeZoneValue=function(e,t){var i=this,n=t.split(";")[e>0?1:0],r=Math.abs(e);return n.replace(/HH?|mm/g,(function(e){var t=e.length,n=-1!==e.indexOf("H");return i.checkTwodigitNumber(Math.floor(n?r/60:r%60),t)}))},e}(),k={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},M=["infinity","nan","group","decimal","exponential"],L=function(){function e(){}return e.numberFormatter=function(e,t,i){var n,r=this,o=h({},t),a={},l={},c=G.getDependables(i,e,"",!0),d=c.numericObject;l.numberMapper=y()?h({},d):C.getNumberMapper(c.parserObject,C.getNumberingSystem(i),!0),l.currencySymbol=y()?s("currencySymbol",d):G.getCurrencySymbol(c.numericObject,o.currency||X,t.altSymbol),l.percentSymbol=y()?s("numberSymbols.percentSign",d):l.numberMapper.numberSymbols.percentSign,l.minusSymbol=y()?s("numberSymbols.minusSign",d):l.numberMapper.numberSymbols.minusSign;var p=l.numberMapper.numberSymbols;if(t.format&&!G.formatRegex.test(t.format))a=G.customFormat(t.format,l,c.numericObject);else{if(h(o,G.getProperNumericSkeleton(t.format||"N")),o.isCurrency="currency"===o.type,o.isPercent="percent"===o.type,y()||(n=G.getSymbolPattern(o.type,l.numberMapper.numberSystem,c.numericObject,o.isAccount)),o.groupOne=this.checkValueRange(o.maximumSignificantDigits,o.minimumSignificantDigits,!0),this.checkValueRange(o.maximumFractionDigits,o.minimumFractionDigits,!1,!0),u(o.fractionDigits)||(o.minimumFractionDigits=o.maximumFractionDigits=o.fractionDigits),u(o.useGrouping)&&(o.useGrouping=!0),o.isCurrency&&!y()&&(n=n.replace(/\u00A4/g,G.defaultCurrency)),y())a.nData=h({},{},s(o.type+"nData",d)),a.pData=h({},{},s(o.type+"pData",d)),"currency"===o.type&&t.currency&&G.replaceBlazorCurrency([a.pData,a.nData],l.currencySymbol,t.currency);else{var f=n.split(";");a.nData=G.getFormatData(f[1]||"-"+f[0],!0,l.currencySymbol),a.pData=G.getFormatData(f[0],!1,l.currencySymbol),o.useGrouping&&(o.groupSeparator=p[M[2]],o.groupData=this.getGroupingDetails(f[0]))}if(u(o.minimumFractionDigits)&&(o.minimumFractionDigits=a.nData.minimumFraction),u(o.maximumFractionDigits)){var g=a.nData.maximumFraction;o.maximumFractionDigits=u(g)&&o.isPercent?0:g}var m=o.minimumFractionDigits,v=o.maximumFractionDigits;u(m)||u(v)||m>v&&(o.maximumFractionDigits=m)}return h(a.nData,o),h(a.pData,o),function(e){return isNaN(e)?p[M[1]]:isFinite(e)?r.intNumberFormatter(e,a,l):p[M[0]]}},e.getGroupingDetails=function(e){var t={},i=e.match(G.negativeDataRegex);if(i&&i[4]){var n=i[4],r=n.lastIndexOf(",");if(-1!==r){var o=n.split(".")[0];t.primary=o.length-r-1;var a=n.lastIndexOf(",",r-1);-1!==a&&(t.secondary=r-1-a)}}return t},e.checkValueRange=function(e,t,i,n){var r=n?"f":"s",o=0,a=k["l"+r],s=k["m"+r];if(u(e)||(this.checkRange(e,a,n),o++),u(t)||(this.checkRange(t,s,n),o++),2===o){if(!(e<t))return!0;m(s+"specified must be less than the"+a)}else i&&1===o&&m("Both"+s+"and"+s+"must be present");return!1},e.checkRange=function(e,t,i){var n=i?[0,20]:[1,21];(e<n[0]||e>n[1])&&m(t+"value must be within the range"+n[0]+"to"+n[1])},e.intNumberFormatter=function(e,t,i){var n;if(!u(t.nData.type)){e<0?(e*=-1,n=t.nData):n=0===e&&t.zeroData||t.pData;var r="";return n.isPercent&&(e*=100),n.groupOne?r=this.processSignificantDigits(e,n.minimumSignificantDigits,n.maximumSignificantDigits):(r=this.processFraction(e,n.minimumFractionDigits,n.maximumFractionDigits),n.minimumIntegerDigits&&(r=this.processMinimumIntegers(r,n.minimumIntegerDigits))),"scientific"===n.type&&(r=(r=e.toExponential(n.maximumFractionDigits)).replace("e",i.numberMapper.numberSymbols[M[4]])),r=r.replace(".",i.numberMapper.numberSymbols[M[3]]),n.useGrouping&&(r=this.groupNumbers(r,n.groupData.primary,n.groupSeparator||",",i.numberMapper.numberSymbols[M[3]]||".",n.groupData.secondary)),r=C.convertValueParts(r,G.latnParseRegex,i.numberMapper.mapper),"N/A"===n.nlead?n.nlead:n.nlead+r+n.nend}},e.processSignificantDigits=function(e,t,i){var n=e+"";return n.length<t?e.toPrecision(t):+(n=e.toPrecision(i))+""},e.groupNumbers=function(e,t,i,n,r){for(var o=!p(r)&&0!==r,a=e.split(n),s=a[0],l=s.length,c="";l>t;)c=s.slice(l-t,l)+(c.length?i+c:""),l-=t,o&&(t=r,o=!1);return a[0]=s.slice(0,l)+(c.length?i:"")+c,a.join(n)},e.processFraction=function(e,t,i){var n=(e+"").split(".")[1],r=n?n.length:0;if(t&&r<t){var o="";if(0!==r){o+=e;for(var a=0;a<t-r;a++)o+="0";return o}return o=e.toFixed(t),e.toFixed(t)}return!p(i)&&(r>i||0===i)?e.toFixed(i):e+""},e.processMinimumIntegers=function(e,t){var i=e.split("."),n=i[0],r=n.length;if(r<t){for(var o=0;o<t-r;o++)n="0"+n;i[0]=n}return i.join(".")},e}(),R=/^[0-9]*$/,z={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},N=function(){function e(){}return e.dateParser=function(e,t,i){var n=this,r=G.getDependables(i,e,t.calendar),o=C.getCurrentNumericOptions(r.parserObject,C.getNumberingSystem(i),!1,y()),a={};y()&&t.isServerRendered&&(t=G.compareBlazorDateFormats(t,e));var l,c=t.format||G.getResultantPattern(t.skeleton,r.dateObject,t.type,!1,y()?e:""),d="";if(u(c))m("Format options or type given must be invalid");else{c=G.ConvertDateToWeekFormat(c),a={isIslamic:G.islamicRegex.test(t.calendar),pattern:c,evalposition:{},culture:e};for(var h=c.match(G.dateParseRegex)||[],f=h.length,g=0,v=0,b=!1,x=o.numericRegex,O=y()?r.parserObject.numbers:C.getNumberMapper(r.parserObject,C.getNumberingSystem(i)),S=0;S<f;S++){var P=h[S],j=P.length,I="K"===P[0]?"h":P[0],E=void 0,T=void 0,D=A[I],k=2===j?"":"?";switch(b&&(g=v,b=!1),I){case"E":case"c":var M=void 0;M=y()?s("days."+G.monthIndex[j],r.dateObject):r.dateObject[G.days]["stand-alone"][G.monthIndex[j]];var L=C.reverseObject(M);d+="("+Object.keys(L).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(T=!0,("M"===I||"L"===I)&&j>2){var R=void 0;R=y()?s("months."+G.monthIndex[j],r.dateObject):r.dateObject.months["stand-alone"][G.monthIndex[j]],a[D]=C.reverseObject(R),d+="("+Object.keys(a[D]).join("|")+")"}else if("f"===I){if(j>3)continue;E=!0,d+="("+x+x+"?"+x+"?)"}else E=!0,d+="("+x+x+k+")";"h"===I&&(a.hour12=!0);break;case"W":d+="("+x+(1===j?"?":"")+x+")";break;case"y":T=E=!0,d+=2===j?"("+x+x+")":"("+x+"{"+j+",})";break;case"a":T=!0;var z=y()?s("dayPeriods",r.dateObject):s("dayPeriods.format.wide",r.dateObject);a[D]=C.reverseObject(z),d+="("+Object.keys(a[D]).join("|")+")";break;case"G":T=!0;var N=j<=3?"eraAbbr":4===j?"eraNames":"eraNarrow";a[D]=C.reverseObject(y()?s("eras",r.dateObject):s("eras."+N,r.dateObject)),d+="("+Object.keys(a[D]).join("|")+"?)";break;case"z":T=0!==(new Date).getTimezoneOffset(),a[D]=s("dates.timeZoneNames",r.parserObject);var B=a[D],_=(l=j<4)?"+H;-H":B.hourFormat;_=_.replace(/:/g,O.timeSeparator),d+="("+this.parseTimeZoneRegx(_,B,x)+")?",b=!0,v=l?6:12;break;case"'":d+="("+P.replace(/\'/g,"")+")?";break;default:d+="([\\D])"}T&&(a.evalposition[D]={isNumber:E,pos:S+1+g,hourOnly:l}),S!==f-1||p(d)||(a.parserRegex=new RegExp("^"+d+"$","i"))}}return function(e){var t=n.internalDateParse(e,a,o);if(p(t)||!Object.keys(t).length)return null;if(a.isIslamic){var i={},r=t.year,s=t.day,l=t.month,c=r?r+"":"",d=2===c.length;r&&l&&s&&!d||(i=w.getHijriDate(new Date)),d&&(r=parseInt((i.year+"").slice(0,2)+c,10));var h=w.toGregorian(r||i.year,l||i.month,s||i.date);t.year=h.getFullYear(),t.month=h.getMonth()+1,t.day=h.getDate()}return n.getDateObject(t)}},e.getDateObject=function(e,t){var i=t||new Date;i.setMilliseconds(0);var n=e.year,r=e.designator,o=e.timeZone;if(!u(n)){if((n+"").length<=2)n+=100*Math.floor(i.getFullYear()/100);i.setFullYear(n)}for(var a=0,s=["hour","minute","second","milliseconds","month","day"];a<s.length;a++){var l=s[a],c=e[l];if(u(c)&&"day"===l&&i.setDate(1),!u(c))if("month"===l){if((c-=1)<0||c>11)return new Date("invalid");var d=i.getDate();i.setDate(1),i[z[l]](c);var h=new Date(i.getFullYear(),c+1,0).getDate();i.setDate(d<h?d:h)}else{if("day"===l){var p=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(c<1||c>p)return null}i[z[l]](c)}}if(!u(r)){var f=i.getHours();"pm"===r?i.setHours(f+(12===f?0:12)):12===f&&i.setHours(0)}if(!u(o)){var g=o-i.getTimezoneOffset();0!==g&&i.setMinutes(i.getMinutes()+g)}return i},e.internalDateParse=function(e,t,i){var n=e.match(t.parserRegex),r={hour:0,minute:0,second:0};i.numericRegex;if(p(n))return null;for(var o=0,a=Object.keys(t.evalposition);o<a.length;o++){var s=a[o],l=t.evalposition[s],c=n[l.pos];if(l.isNumber)r[s]=this.internalNumberParser(c,i);else if("timeZone"!==s||u(c))c="month"!==s||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?c:c[0].toUpperCase()+c.substring(1).toLowerCase(),r[s]=t[s][c];else{var d=l.pos,h=void 0,f=n[d+1],g=!u(f);l.hourOnly?h=60*this.getZoneValue(g,f,n[d+4],i):(h=60*this.getZoneValue(g,f,n[d+7],i),h+=this.getZoneValue(g,n[d+4],n[d+10],i)),p(h)||(r[s]=h)}}return t.hour12&&(r.hour12=!0),r},e.internalNumberParser=function(e,t){return e=C.convertValueParts(e,t.numberParseRegex,t.numericPair),R.test(e)?+e:null},e.parseTimeZoneRegx=function(e,t,i){var n,r,o=t.gmtFormat,a="("+i+")("+i+")";return n=e.replace("+","\\+"),r=(n=-1!==e.indexOf("HH")?n.replace(/HH|mm/g,"("+a+")"):n.replace(/H|m/g,"("+a+"?)")).split(";").map((function(e){return o.replace("{0}",e)})),n=r.join("|")+"|"+t.gmtZeroFormat},e.getZoneValue=function(e,t,i,n){var r=e?t:i;if(!r)return 0;var o=this.internalNumberParser(r,n);return e?-o:o},e}(),B=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,_=/,/g,H=["minusSign","infinity"],W=function(){function e(){}return e.numberParser=function(e,t,i){var n,r=this,o=G.getDependables(i,e,"",!0),a={custom:!0};G.formatRegex.test(t.format)||!t.format?(h(a,G.getProperNumericSkeleton(t.format||"N")),a.custom=!1):h(a,G.customFormat(t.format,null,null));var l,c=s("numbers",o.parserObject);if(n=C.getCurrentNumericOptions(o.parserObject,C.getNumberingSystem(i),!0,y()),a.symbolRegex=C.getSymbolRegex(Object.keys(n.symbolMatch)),a.infinity=n.symbolNumberSystem[H[1]],y())a.nData=h({},{},s(a.type+"nData",c)),a.pData=h({},{},s(a.type+"pData",c)),"currency"===a.type&&t.currency&&G.replaceBlazorCurrency([a.pData,a.nData],s("currencySymbol",c),t.currency);else if(l=G.getSymbolPattern(a.type,n.numberSystem,o.numericObject,a.isAccount)){var d=(l=l.replace(/\u00A4/g,G.defaultCurrency)).split(";");a.nData=G.getFormatData(d[1]||"-"+d[0],!0,""),a.pData=G.getFormatData(d[0],!0,"")}return function(e){return r.getParsedNumber(e,a,n)}},e.getParsedNumber=function(e,t,i){var n,r,o,a,s,l;if(-1!==e.indexOf(t.infinity))return 1/0;e=C.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=C.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf(".")&&(e="0"+e);var c=e.match(B);if(p(c))return NaN;a=c[1],o=c[2];var d=c[5];return s=c[6],r=(n=t.custom?a===t.nData.nlead&&s===t.nData.nend:-1!==a.indexOf(t.nData.nlead)&&-1!==s.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,o=o.replace(_,""),d&&(o+=d),l=+o,("percent"===t.type||r)&&(l/=100),(t.custom||t.fractionDigits)&&(l=parseFloat(l.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),n&&(l*=-1),l},e}(),F=function(){function e(e){this.ranArray=[],this.boundedEvents={},p(e)||(this.context=e)}return e.prototype.on=function(e,t,i,n){if(!p(t)){var r=i||this.context;this.notExist(e)?this.boundedEvents[e]=[{handler:t,context:r}]:p(n)?this.isHandlerPresent(this.boundedEvents[e],t)||this.boundedEvents[e].push({handler:t,context:r}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[e].push({handler:t,context:r,id:n}))}},e.prototype.off=function(e,t,i){if(!this.notExist(e)){var n=s(e,this.boundedEvents);if(t){for(var r=0;r<n.length;r++)if(i){if(n[r].id===i){n.splice(r,1);var o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(t===n[r].handler){n.splice(r,1);break}}else delete this.boundedEvents[e]}},e.prototype.notify=function(e,t,i,n){if(this.notExist(e))i&&i.call(this,t);else{t&&(t.name=e);var r=s(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(r,t,i,n,0);for(var o=0,a=r;o<a.length;o++){var l=a[o];l.handler.call(l.context,t)}i&&i.call(this,t)}},e.prototype.blazorCallback=function(e,t,i,n,r){var o=this,a=r===e.length-1;if(r<e.length){var s=e[r],l=s.handler.call(s.context,t);if(l&&"function"===typeof l.then){if(!i)return l;l.then((function(l){if(l="string"===typeof l&&o.isJson(l)?JSON.parse(l,o.dateReviver):l,h(t,t,l,!0),!i||!a)return o.blazorCallback(e,t,i,n,r+1);i.call(s.context,t)})).catch((function(e){n&&n.call(s.context,"string"===typeof e&&o.isJson(e)?JSON.parse(e,o.dateReviver):e)}))}else{if(!i||!a)return this.blazorCallback(e,t,i,n,r+1);i.call(s.context,t)}}},e.prototype.dateReviver=function(e,t){return y&&"string"===typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t},e.prototype.isJson=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},e.prototype.destroy=function(){this.boundedEvents=this.context=void 0},e.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0},e.prototype.isHandlerPresent=function(e,t){for(var i=0,n=e;i<n.length;i++){if(n[i].handler===t)return!0}return!1},e}(),q=new F,U=!1,V={},Y="en-US",X="USD";!function(){function e(e){e&&(this.culture=e)}e.prototype.getDateFormat=function(e){return D.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},V)},e.prototype.getNumberFormat=function(e){return e&&!e.currency&&(e.currency=X),y()&&e&&!e.format&&(e.minimumFractionDigits=0),L.numberFormatter(this.getCulture(),e||{},V)},e.prototype.getDateParser=function(e){return N.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},V)},e.prototype.getNumberParser=function(e){return y()&&e&&!e.format&&(e.minimumFractionDigits=0),W.numberParser(this.getCulture(),e||{format:"N"},V)},e.prototype.formatNumber=function(e,t){return this.getNumberFormat(t)(e)},e.prototype.formatDate=function(e,t){return this.getDateFormat(t)(e)},e.prototype.parseDate=function(e,t){return this.getDateParser(t)(e)},e.prototype.parseNumber=function(e,t){return this.getNumberParser(t)(e)},e.prototype.getDatePattern=function(e,t){return G.getActualDateTimeFormat(this.getCulture(),e,V,t)},e.prototype.getNumberPattern=function(e,t){return G.getActualNumberFormat(this.getCulture(),e,V,t)},e.prototype.getFirstDayOfWeek=function(){return G.getWeekData(this.getCulture(),V)},e.prototype.getCulture=function(){return this.culture||Y}}();var G,Z={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(e){e.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,e.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;e.defaultCurrency="$";var i=["infinity","nan","group","decimal"],n=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,r={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};e.dateConverterMapper=/dddd|ddd/gi;e.islamicRegex=/^islamic/;var o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};e.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,e.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,e.curWithoutNumberRegex=/(c|a)$/gi;var a={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function l(t,i,n,r,o){var a,l=n||"date";if(o)a=g({skeleton:t},o).format||g({skeleton:"d"},"en-US").format;else{if(-1!==e.basicPatterns.indexOf(t)){if(a=s(l+"Formats."+t,i),"dateTime"===l){var c=s("dateFormats."+t,i),d=s("timeFormats."+t,i);a=a.replace("{1}",c).replace("{0}",d)}}else a=s("dateTimeFormats.availableFormats."+t,i);u(a)&&"yMd"===t&&(a="M/d/y")}return a}function c(t,i,n,r){var o={},a=n||"gregorian";if(o.parserObject=C.getMainObject(t,i)||(y()?e.blazorDefaultObject:e.defaultObject),r)o.numericObject=s("numbers",o.parserObject);else{var l=y()?"dates":"dates.calendars."+a;o.dateObject=s(l,o.parserObject)}return o}function d(e,t,i,n){return s(e+"Formats-numberSystem-"+t+(n?".accounting":".standard"),i)||(n?s(e+"Formats-numberSystem-"+t+".standard",i):"")}function f(t){var i=t.match(e.dateConverterMapper);if(i&&y()){var n=3===i[0].length?"EEE":"EEEE";return t.replace(e.dateConverterMapper,n)}return t}function g(e,t){var i=e.format||e.skeleton,n=s((t||"en-US")+"."+i,Z);return n||(n=s("en-US."+i,Z)),n&&(n=f(n),e.format=n.replace(/tt/,"a")),e}function m(t){var i=t.match(e.formatRegex),n={},r=i[1].toUpperCase();return n.isAccount="A"===r,n.type=e.patternMatcher[r],t.length>1&&(n.fractionDigits=parseInt(i[2],10)),n}function v(i,n,r,o){var a=o?{}:{nlead:"",nend:""},s=i.match(e.customRegex);if(s){o||(a.nlead=b(s[1],r),a.nend=b(s[10],r),a.groupPattern=s[4]);var l=s[7];if(l&&n){var c=l.match(t);p(c)?a.minimumFraction=0:a.minimumFraction=c.length,a.maximumFraction=l.length-1}}return a}function b(t,i){return t?t.replace(e.defaultCurrency,i):""}function w(e,t,i){return s("currencies."+t+(i?"."+i:".symbol"),e)||s("currencies."+t+".symbol-alt-narrow",e)||"$"}function x(t,n,r){var o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},a=t.match(e.customRegex);if(p(a)||""===a[5]&&"N/A"!==t)return o.type=void 0,o;o.nlead=a[1],o.nend=a[10];var s=a[6];o.useGrouping=-1!==s.indexOf(","),s=s.replace(/,/g,"");var l=a[7];if(-1!==s.indexOf("0")&&(o.minimumIntegerDigits=s.length-s.indexOf("0")),p(l)||(o.minimumFractionDigits=l.lastIndexOf("0"),o.maximumFractionDigits=l.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),p(n)?h(o,O([o.nlead,o.nend],"%","%")):(h(o,O([o.nlead,o.nend],"$",n.currencySymbol)),o.isCurrency||h(o,O([o.nlead,o.nend],"%",n.percentSymbol))),!p(r)){var c=d(o.type,n.numberMapper.numberSystem,r,!1);o.useGrouping&&(o.groupSeparator=n.numberMapper.numberSymbols[i[2]],o.groupData=L.getGroupingDetails(c.split(";")[0])),o.nlead=o.nlead.replace(/\'/g,""),o.nend=o.nend.replace(/\'/g,"")}return o}function O(e,t,i){for(var n={nlead:e[0],nend:e[1]},r=0;r<2;r++){var o=e[r],s=o.indexOf(t);if(-1!==s&&(s<o.indexOf("'")||s>o.lastIndexOf("'"))){n[a[r]]=o.substr(0,s)+i+o.substr(s+1),n[a[t]]=!0,n.type=n.isCurrency?"currency":"percent";break}}return n}e.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,e.basicPatterns=["short","medium","long","full"],e.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},e.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},e.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},e.month="months",e.days="days",e.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},e.getResultantPattern=l,e.getDependables=c,e.getSymbolPattern=d,e.ConvertDateToWeekFormat=f,e.compareBlazorDateFormats=g,e.getProperNumericSkeleton=m,e.getFormatData=v,e.getCurrencySymbol=w,e.customFormat=function(e,t,i){for(var n={},r=e.split(";"),o=["pData","nData","zeroData"],a=0;a<r.length;a++)n[o[a]]=x(r[a],t,i);return p(n.nData)&&(n.nData=h({},n.pData),n.nData.nlead=p(t)?"-"+n.nData.nlead:t.minusSymbol+n.nData.nlead),n},e.isCurrencyPercent=O,e.getDateSeparator=function(e){var t=(s("dateFormats.short",e)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return t?t[1]:"/"},e.getActualDateTimeFormat=function(e,t,i,o){var a=c(i,e,t.calendar);y()&&(t=g(t,e));var d=t.format||l(t.skeleton,a.dateObject,t.type);if(o){if(-1!==(d=d.replace(n,(function(e){return r[e]}))).indexOf("z")){var h=d.match(/z/g).length,p=void 0,u={timeZone:{}};u.numMapper=C.getNumberMapper(a.parserObject,C.getNumberingSystem(i)),u.timeZone=s("dates.timeZoneNames",a.parserObject);var f=(new Date).getTimezoneOffset(),m=h<4?"+H;-H":u.timeZone.hourFormat;m=m.replace(/:/g,u.numMapper.timeSeparator),0===f?p=u.timeZone.gmtZeroFormat:(p=D.getTimeZoneValue(f,m),p=u.timeZone.gmtFormat.replace(/\{0\}/,p)),d=d.replace(/[z]+/,'"'+p+'"')}d=d.replace(/ $/,"")}return d},e.getActualNumberFormat=function(t,i,n,r){var o,a,l=c(n,t,"",!0),p={custom:!0},u=l.numericObject,f={},g=(i.format||"").match(e.currencyFormatRegex),b=e.formatRegex.test(i.format)?m(i.format||"N"):{},x={};if(g){x.numberMapper=y()?h({},l.numericObject):C.getNumberMapper(l.parserObject,C.getNumberingSystem(n),!0);var O=y()?s("currencySymbol",l.numericObject):w(l.numericObject,i.currency||X,i.altSymbol),S=d("currency",x.numberMapper.numberSystem,l.numericObject,/a/i.test(i.format)),P=(S=S.replace(/\u00A4/g,O)).split(";");f.hasNegativePattern=!!y()||P.length>1,f.nData=y()?s(b.type+"nData",u):v(P[1]||"-"+P[0],!0,O),f.pData=y()?s(b.type+"pData",u):v(P[0],!1,O),g[2]||i.minimumFractionDigits||i.maximumFractionDigits||(o=v(S.split(";")[0],!0,"",!0).minimumFraction)}if(e.formatRegex.test(i.format)||!i.format){if(h(p,m(i.format||"N")),p.custom=!1,a="###0",p.fractionDigits||i.minimumFractionDigits||i.maximumFractionDigits||o){p.fractionDigits&&(i.minimumFractionDigits=i.maximumFractionDigits=p.fractionDigits),a=function(e,t,i){e+=".";for(var n=0;n<t;n++)e+="0";if(t<i)for(var r=i-t,o=0;o<r;o++)e+="#";return e}(a,o||p.fractionDigits||i.minimumFractionDigits||0,i.maximumFractionDigits||0)}if(i.minimumIntegerDigits&&(a=function(e,t){for(var i=e.split("."),n="",r=0;r<t;r++)n+="0";return i[1]?n+"."+i[1]:n}(a,i.minimumIntegerDigits)),i.useGrouping&&(a=function(e){var t=e.split("."),i=t[0],n=3-i.length%3;e="";for(var r=(i=(n&&1===n?"#":2===n?"##":"")+i).length-1;r>0;r-=3)e=","+i[r-2]+i[r-1]+i[r]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}(a)),"currency"===p.type||p.type&&y()){y()&&"currency"!==p.type&&(f.pData=s(p.type+"pData",u),f.nData=s(p.type+"nData",u));var j=a;a=f.pData.nlead+j+f.pData.nend,(f.hasNegativePattern||y())&&(a+=";"+f.nData.nlead+j+f.nData.nend)}"percent"!==p.type||y()||(a+=" %")}else a=i.format.replace(/\'/g,'"');return Object.keys(x).length>0&&(a=r?a:function(e,t){if(-1!==e.indexOf(",")){var i=e.split(",");e=i[0]+s("numberMapper.numberSymbols.group",t)+i[1].replace(".",s("numberMapper.numberSymbols.decimal",t))}else e=e.replace(".",s("numberMapper.numberSymbols.decimal",t));return e}(a,x)),a},e.getWeekData=function(e,t){var i="sun",n=s("supplemental.weekData.firstDay",t),r=e;return/en-/.test(r)&&(r=r.slice(3)),r=r.slice(0,2).toUpperCase()+r.substr(2),n&&(i=n[r]||"sun"),o[i]},e.replaceBlazorCurrency=function(e,t,i){var n=s(i||"",P);if(t!==n)for(var r=0,o=e;r<o.length;r++){var a=o[r];a.nend=a.nend.replace(t,n),a.nlead=a.nlead.replace(t,n)}},e.getWeekOfYear=function(e){var t,i=new Date(e.getFullYear(),0,1),n=i.getDay();n=n>=0?n:n+7;var r=Math.floor((e.getTime()-i.getTime()-6e4*(e.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)+1;if(n<4){if((t=Math.floor((r+n-1)/7)+1)>52){var o=new Date(this.getFullYear()+1,0,1).getDay();t=(o=o>=0?o:o+7)<4?1:53}}else t=Math.floor((r+n-1)/7);return t}}(G||(G={}));var J=/^(.*?):[ \t]*([^\r\n]*)$/gm,Q=function(){function e(e,t,i,n){this.mode=!0,this.emitError=!0,this.options={},"string"===typeof e?(this.url=e,this.type=t?t.toUpperCase():"GET",this.mode=!!p(i)||i):"object"===typeof e&&(this.options=e,d(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:n}return e.prototype.send=function(e){var t=this;this.data=p(e)?this.data:e;var i={cancel:!1,httpRequest:null};return new Promise((function(e,n){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(e,n)},p(t.onLoad)||(t.httpRequest.onload=t.onLoad),p(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),p(t.onAbort)||(t.httpRequest.onabort=t.onAbort),p(t.onError)||(t.httpRequest.onerror=t.onError),p(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),p(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&(i.httpRequest=t.httpRequest,t.beforeSend(i)),i.cancel||t.httpRequest.send(p(t.data)?null:t.data)}))},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e,this),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(this.httpRequest),e},e.prototype.stateChange=function(e,t){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(n){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())},e.prototype.getResponseHeader=function(e){var t,i;t={};for(var n=J.exec(this.httpRequest.getAllResponseHeaders());n;)t[n[1].toLowerCase()]=n[2],n=J.exec(this.httpRequest.getAllResponseHeaders());return p(i=t[e.toLowerCase()])?null:i},e}(),$=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,K=/msie|trident/i,ee=/Trident\/7\./,te=/(ipad|iphone|ipod touch)/i,ie=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,ne=/android/i,re=/trident|windows phone|edge/i,oe=/(version)[ \/]([\w.]+)/i,ae={OPERA:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ \/]([\w.]+)/i,CHROME:/(chrome|crios)[ \/]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ \/]([\w.]+)/i,SAFARI:/(safari)[ \/]([\w.]+)/i,WEBKIT:/(webkit)[ \/]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!==typeof window&&(window.browserDetails=window.browserDetails||{});var se=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},i=[],n=0,r=Object.keys(ae);n<r.length;n++){var o=r[n];if(i=e.userAgent.match(ae[o])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(ee)){t.name="msie";break}var a=e.userAgent.match(oe);"safari"===t.name&&a&&(t.version=a[2]);break}}return t},e.getEvent=function(t){var i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?i[t].isPointer:e.isTouch?i[t].isTouch+(e.isDevice?"":" "+i[t].isDevice):i[t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.getValue=function(t,i){var n=window.browserDetails;return"undefined"===typeof n[t]?n[t]=i.test(e.userAgent):n[t]},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return u(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",K)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return u(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return u(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return u(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",$)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",te)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",ie)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",ne)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return u(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(u(window.cordova)&&u(window.PhoneGap)&&u(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",re)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return u(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return u(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return u(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return u(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!==typeof navigator?navigator.userAgent:"",e}(),le=function(){function e(){}return e.addOrGetEventData=function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])},e.add=function(t,i,n,r,o){var a,s=e.addOrGetEventData(t);a=o?function(e,t){var i;return function(){var n=this,r=arguments,o=function(){return i=null,e.apply(n,r)};clearTimeout(i),i=setTimeout(o,t)}}(n,o):n,r&&(a=a.bind(r));for(var l=i.split(" "),c=0;c<l.length;c++)s.push({name:l[c],listener:n,debounce:a}),se.isIE?t.addEventListener(l[c],a):t.addEventListener(l[c],a,{passive:!1});return a},e.remove=function(t,i,n){for(var r=e.addOrGetEventData(t),o=i.split(" "),a=function(e){var i,a=-1;r&&0!==r.length&&r.some((function(t,r){return t.name===o[e]&&t.listener===n&&(a=r,i=t.debounce,!0)})),-1!==a&&r.splice(a,1),i&&t.removeEventListener(o[e],i)},s=0;s<o.length;s++)a(s)},e.clearEvents=function(t){var i,n;n=h([],n,i=e.addOrGetEventData(t));for(var r=0;r<n.length;r++)t.removeEventListener(n[r].name,n[r].debounce),i.shift()},e.trigger=function(t,i,n){for(var r=0,o=e.addOrGetEventData(t);r<o.length;r++){var a=o[r];a.name===i&&a.debounce.call(this,n)}},e}(),ce=new RegExp("\\n|\\r|\\s\\s+","g"),de=new RegExp(/'|"/g),he=new RegExp("if ?\\("),pe=new RegExp("else if ?\\("),ue=new RegExp("else"),fe=new RegExp("for ?\\("),ge=new RegExp("(/if|/for)"),me=new RegExp("\\((.*)\\)",""),ve=new RegExp("^[0-9]+$","g"),ye=new RegExp("[\\w\"'.\\s+]+","g"),be=new RegExp('"(.*?)"',"g"),we=new RegExp("[\\w\"'@#$.\\s+]+","g"),xe=new RegExp("\\${([^}]*)}","g"),Oe=/^\..*/gm,Se=/\\/gi,Ce=/\\\\/gi,Pe=new RegExp("[\\w\"'@#$.\\s+]+","g"),je=/\window\./gm;function Ie(e,t){var i="data",n=function(e,t,i){var n=0,r=[],o=e.match(/class="([^\"]+|)\s{2}/g),a="";o&&o.forEach((function(t){a=t.replace(/\s\s+/g," "),e=e.replace(t,a)}));return e.replace(ce,"").replace(be,"'$1'").replace(xe,(function(e,o,a,s){var l=/\@|\#|\$/gm,c=o.match(me);if(c){var d=c[1];if(pe.test(o))o='";} '+o.replace(c[1],d.replace(ye,(function(e){return Ee(e=e.trim(),!de.test(e)&&-1===r.indexOf(e),t,r)})))+'{ \n str = str + "';else if(he.test(o))o='"; '+o.replace(c[1],d.replace(we,(function(e){return De(e,t,r)})))+'{ \n str = str + "';else if(fe.test(o)){var h=c[1].split(" of ");o='"; '+o.replace(c[1],(function(e){return r.push(h[0]),r.push(h[0]+"Index"),"var i"+(n+=1)+"=0; i"+n+" < "+Ee(h[1],!0,t,r)+".length; i"+n+"++"}))+"{ \n "+h[0]+"= "+Ee(h[1],!0,t,r)+"[i"+n+"]; \n var "+h[0]+"Index=i"+n+'; \n str = str + "'}else{var p=o.split("("),u=i&&i.hasOwnProperty(p[0])?"this.":"global";u=/\./.test(p[0])?"":u;var f=c[1].split(",");0===c[1].length||/data/.test(f[0])||/window./.test(f[0])||(c[1]="global"===u?t+"."+c[1]:c[1]);var g=/\@|\$|\#/gm,m=/\]\./gm;if(je.test(o)&&m.test(o)||g.test(o))/\@|\$|\#|\]\./gm.test(o)&&(o='"+ '+("global"===u?"":u)+o.replace(c[1],d.replace(Pe,(function(e){return De(e,t,r)})))+'+ "');else o='" + '+("global"===u?"":u)+o.replace(d,Ee(c[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==u,t,r))+'+"'}}else ue.test(o)?o='"; '+o.replace(ue,'} else { \n str = str + "'):o.match(ge)?o=o.replace(ge,'"; \n } \n str = str + "'):l.test(o)?(o.match(Se)&&(o=Ae(o)),o='"+'+Te(o,-1===r.indexOf(o),t,r)+'"]+"'):o=o.match(Se)?'"+'+Te(o=Ae(o),-1===r.indexOf(o),t,r)+'"]+"':'"+'+Ee(o.replace(/\,/gi,"+"+t+"."),-1===r.indexOf(o),t,r)+'+"';return o}))}(e,i,t);return new Function(i,'var str="'+n+'"; return str;').bind(t)}function Ee(e,t,i,n){return t&&!ve.test(e)&&-1===n.indexOf(e.split(".")[0])?i+"."+e:e}function Te(e,t,i,n){return t&&!ve.test(e)&&-1===n.indexOf(e.split(".")[0])?i+'["'+e:e}function Ae(e){return e=e.match(Ce)?e:e.replace(Se,"\\\\")}function De(e,t,i){e=e.trim();if(/\window\./gm.test(e))return e;var n=/'|"/gm;return/\@|\$|\#/gm.test(e)&&(e=Te(e,-1===i.indexOf(e),t,i)+'"]'),Oe.test(e)?function(e,t,i,n){return!t||ve.test(e)||-1!==n.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:i+"."+e}(e,!n.test(e)&&-1===i.indexOf(e),t,i):Ee(e,!n.test(e)&&-1===i.indexOf(e),t,i)}var ke=/^[\n\r.]+\<tr|^\<tr/,Me=/^[\n\r.]+\<svg|^\<path|^\<g/,Le={};function Re(){return"-"+Math.random().toString(36).substr(2,5)}function ze(e,t){var i=Fe.compile(e,t);return function(e,t,n,r,o,a,s){var l=i(e,t,n,s),c="BlazorTemplateId";if(y()&&!o){var d=r+Re();if(Le[r]||(Le[r]=[]),p(a))e.BlazorTemplateId=d,Le[r].push(e);else for(var h=0,u=Object.keys(Le[r][a]);h<u.length;h++){var f=u[h];f!==c&&e[f]&&(Le[r][a][f]=e[f]),f===c&&(d=Le[r][a][f])}return"rowTemplate"===n?[ot("tr",{id:d,className:"e-blazor-template"})]:[ot("div",{id:d,className:"e-blazor-template"})]}return"string"===typeof l?Me.test(l)?ot("svg",{innerHTML:l}).childNodes:ot(ke.test(l)?"table":"div",{innerHTML:l}).childNodes:l}}function Ne(e,t,i,n,r){if(y()){window.sfBlazor.updateTemplate(t,Le[e],e,i,r),!1!==n&&(Le[e]=[])}}function Be(e,t,i){var n=document.getElementById(e);if(n)for(var r=n.getElementsByClassName("blazor-inner-template"),o=0;o<r.length;o++){var a=" ";a=p(i)?r[o].getAttribute("data-templateId"):r[i].getAttribute("data-templateId");var s=document.getElementById(a);if(s)for(var l=s.childNodes.length,c=0;c<l;c++)p(i)?r[o].appendChild(s.childNodes[0]):(r[i].appendChild(s.childNodes[0]),o=r.length)}}function _e(e){Fe.compile=e.compile}function He(){return Fe.compile}var We,Fe={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t){return void 0===t&&(t={}),Ie(e,t)},e}())).compile},qe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ue=/(?:#([\w-]+)|(\w+)|\.([\w-]+))/g,Ve=/^(\.|#)/,Ye={".":"className","#":"id"},Xe={className:"attributes.className",id:"attributes.id",tagName:"tagName"},Ge=["area","base","basefont","br","col","frame","hr","img","input","link","meta","param","embed","command","keygen","source","track","wbr"],Ze=["a","address","article","applet","aside","audio","blockquote","button","canvas","center","dd","del","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frameset","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","ins","isindex","li","map","menu","noframes","noscript","object","ol","output","p","pre","section","script","table","tbody","td","tfoot","th","thead","tr","ul","video"],Je=["abbr","acronym","applet","b","basefont","bdo","big","br","button","cite","code","del","dfn","em","font","i","iframe","img","input","ins","kbd","label","map","object","q","s","samp","script","select","small","span","strike","strong","sub","sup","textarea","tt","u","var"],Qe=["colgroup","dd","dt","li","options","p","td","tfoot","th","thead","tr"],$e=["checked","compact","declare","defer","disabled","ismap","multiple","nohref","noresize","noshade","nowrap","readonly","selected"],Ke=["Script","style"],et={tabindex:"tabIndex"},tt=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,it=/^<\/([-A-Za-z0-9_]+)[^>]*>/,nt=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;!function(e){function t(e,t){t&&e&&e.forEach((function(e){return c(e)&&(e.parent&&i(e),e.parent=t),e}))}function i(e){var t=e.parent;if(t){var i=t.children.indexOf(e);-1!==i&&t.children.splice(i)}return t}function n(e,t){var i=e.match(Ve),n={};if(i){var r=Ye[i[0]];if("className"===r){var o=t.filter((function(e){return e.hasOwnProperty("className")}))[0],a=!1;o||(a=!0,o={});var s=o[r]||"";o[r]=s+"(?=.*?\\b{value}\\b)".replace("{value}",e.replace(".","")),a&&t.push(o)}else n[r]=e.replace(i[0],""),t.push(n)}else t.push({tagName:e})}function r(e,t,i,n){if(e.children){var o=e.children.filter((function(e){if("string"!==typeof e){for(var i=!0,n=0,r=t;n<r.length;n++){var o=r[n],a=Object.keys(o)[0],l=o[a],c=s(Xe[a],e);if("className"===a){if(!new RegExp("^"+l+".*$").test(c)){i=!1;break}}else if(c!==l){i=!1;break}}return i}return!1}));return n||o.length&&!i||e.children.forEach((function(e){c(e)&&(o=o.concat(r(e,t,i)))})),o}return[]}function o(e){for(var t,i=[],n=[],r=[];e;){t=!0;var o=a(n);if(o&&l(Ke,o))e=e.replace(new RegExp("([\\s\\S]*?)</"+a(r)+"[^>]*>"),(function(e,t){return u(t=t.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2")),""})),p("",a(n));else{if(0===e.indexOf("</"))(s=e.match(it))&&(e=e.substring(s[0].length),s[0].replace(it,p)),t=!1;else if(0===e.indexOf("<")){var s;(s=e.match(tt))&&(e=e.substring(s[0].length),s[0].replace(tt,h)),t=!1}if(t){var c=e.indexOf("<"),d=c<0?e:e.substring(0,c);e=c<0?"":e.substring(c),u(d)}}e}function h(e,t,o){if(t=t.toLowerCase(),l(Ze,t))for(;a(n)&&l(Je,a(n));)p("",a(n));l(Qe,t)&&a(n)&&p("",t);var s=l(Ge,t);s||n.push(t);var c={};o.replace(nt,(function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r=i[2]?i[2]:i[3]?i[3]:i[4]?i[4]:l($e,t)?t:"";if("style"===t){for(var o=r.split(";"),a={},s=0,d=o.length;s<d;s++){var h=o[s],p=h.split(":");a[p[0]]=p[1]}r=a}c[t=et[t]||t]=r})),c["data-id"]=Re();var d={tagName:t,attributes:c};if(s){var h=r[0]||i;void 0===h.children&&(h.children=[]),d.parent=h,h.children.push(d)}else r.unshift(d)}function p(e,t){var o;if(t)for(o=n.length-1;o>=0&&n[o]!==t;o--);else o=0;if(o>=0){for(var a=r.length-1;a>=o;a--){var s=r.shift();if(0===r.length)i.push(s);else{var l=r[0];void 0===l.children&&(l.children=[]),s.parent=l,l.children.push(s)}}n.length=o}}function u(e){if(0===r.length)i.push(e);else{var t=r[0];void 0===t.children&&(t.children=[]),t.children.push(e)}}return i}function a(e){return e[e.length-1]}function l(e,t){return-1!==e.indexOf(t)}e.createElement=function(e,t){var i=[],n=h({},{},t,!0);if(!p(t)&&Object.keys(t).length&&(n.innerHTML&&(i=o(n.innerHTML),delete n.innerHTML),n.attrs&&(h(n,n.attrs),delete n.attrs),n.styles)){for(var r=n.styles.split(";"),a={},s=0,l=r.length;s<l;s++){var c=r[s].split(":");a[c[0]]=c[1]}delete n.styles,n.style=a}return{tagName:e,attributes:n||{},children:i}},e.assignParent=t,e.append=function(e,i){t(e,i),i.children?i.children=i.children.concat(e):i.children=[].concat(e)},e.prepend=function(e,i){if(t(e,i),i.children&&i.children.length)for(var n=e.length-1;n>=0;n--)i.children.unshift(e[n]);else i.children=[],i.children.concat(e)},e.detach=i,e.vDomSelector=function e(t){for(var i=t.ele,o=t.selector,a=t.selectAll,s=t.immediateParent,l=o.split(" "),c=i,d=0,h=l.length;d<h;d++){var p=!1,u=c,f=l[d],g=[];if(qe.test(f))!0,n(f,g);else if(-1===f.indexOf(">"))for(var m=0,v=f.match(Ue);m<v.length;m++){n(v[m],g)}else if(-1!==f.indexOf(">")){p=!0;for(var y=i,b=void 0,w=0,x=0,O=f.split(">");x<O.length;x++){var S=O[x];if(!y)break;if(y.length){for(var C=[],P=0,j=y;P<j.length;P++){var I=j[P];C=C.concat(e({ele:I,selector:S,selectAll:a,immediateParent:!!w}))}b=C}else b=e({ele:y,selector:S,selectAll:a,immediateParent:!!w});w++,y=b}b&&(c=b)}if(!p)if(u.length){for(var E=[],T=0,A=u;T<A.length;T++){var D=A[T];E=E.concat(r(D,g,a,s))}c=E}else c=r(u,g,a,s)}return a?c:c[0]||null},e.accessElement=r,e.ConvertHTMLToJSon=o,e.cloneNode=function(e,t){return c(e)?t?h({},{},e,!0):{tagName:e.tagName,attributes:e.attributes}:e.cloneNode(t)},e.setStyleAttribute=function(e,t){e.attributes.style?e.attributes.style=h({},t):e.attributes.style=h(e.attributes.style,t)}}(We||(We={}));var rt=/^svg|^path|^g/;function ot(e,t){var i=rt.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return"undefined"===typeof t||(i.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(i.className=t.className),void 0!==t.id&&(i.id=t.id),void 0!==t.styles&&i.setAttribute("style",t.styles),void 0!==t.attrs&&gt(i,t.attrs)),i}function at(e,t){for(var i=lt(t),n=0,r=e;n<r.length;n++)for(var o=r[n],a=0,d=i;a<d.length;a++){var h=d[a];if(c(o)){var u=s("attributes.className",o);p(u)?l("attributes.className",h,o):new RegExp("\\b"+h+"\\b","i").test(u)||l("attributes.className",u+" "+h,o)}else o.classList.contains(h)||o.classList.add(h)}return e}function st(e,t){for(var i=lt(t),n=0,r=e;n<r.length;n++){var o=r[n],a=c(o);if(a?s("attributes.className",o):""!==o.className)for(var d=0,h=i;d<h.length;d++){var p=h[d];if(a){var u=s("attributes.className",o).split(" "),f=u.indexOf(p);-1!==f&&u.splice(f,1),l("attributes.className",u.join(" "),o)}else o.classList.remove(p)}}return e}function lt(e){var t=[];return"string"===typeof e?t.push(e):t=e,t}function ct(e){var t=e;return""===t.style.visibility&&t.offsetWidth>0}function dt(e,t,i){if(c(t))We.prepend(e,t);else{for(var n=document.createDocumentFragment(),r=0,o=e;r<o.length;r++){var a=o[r];n.appendChild(a)}t.insertBefore(n,t.firstElementChild),i&&pt(t)}return e}function ht(e,t,i){if(c(t))We.append(e,t);else{for(var n=document.createDocumentFragment(),r=0,o=e;r<o.length;r++){var a=o[r];n.appendChild(a)}t.appendChild(n),i&&pt(t)}return e}function pt(e){e.querySelectorAll("script").forEach((function(e){var t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),ut(t)}))}function ut(e){if(c(e))return We.detach(e);var t=e.parentNode;return t?t.removeChild(e):void 0}function ft(e){if(c(e))We.detach(e);else{var t=e.parentNode;le.clearEvents(e),t.removeChild(e)}}function gt(e,t){for(var i=e,n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];if(c(i)){var a=o;"tabindex"===o&&(a="tabIndex"),i.attributes[a]=t[o]}else i.setAttribute(o,t[o])}return i}function mt(e,t,i){return void 0===t&&(t=document),c(t)&&i?We.vDomSelector({ele:t,selector:e,selectAll:!1}):(e=yt(e),t.querySelector(e))}function vt(e,t,i){return void 0===t&&(t=document),c(t)&&!i?We.vDomSelector({ele:t,selector:e,selectAll:!0}):(e=yt(e),t.querySelectorAll(e))}function yt(e){if(e.match(/#[0-9]/g)){for(var t=e.split(","),i=0;i<t.length;i++){for(var n=t[i].split(" "),r=0;r<n.length;r++){if(n[r].indexOf("#")>-1)if(!n[r].match(/\[.*\]/))if(n[r].split("#")[1].match(/^\d/)){var o=n[r].split(".");o[0]=o[0].replace(/#/,"[id='")+"']",n[r]=o.join(".")}}t[i]=n.join(" ")}return t.join(",")}return e}function bt(e,t){var i=e;if("function"===typeof i.closest)return i.closest(t);for(;i&&1===i.nodeType;){if(Ot(i,t))return i;i=i.parentNode}return null}function wt(e,t){void 0!==t&&(c(e)?We.setStyleAttribute(e,t):Object.keys(t).forEach((function(i){e.style[i]=t[i]})))}function xt(e,t,i){at([e],t),st([e],i)}function Ot(e,t){var i=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return i?i.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var St=new RegExp("]"),Ct=function(){function e(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new F(this),u(t)||(this.element="string"===typeof t?document.querySelector(t):t,p(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),u(e)||this.setProperties(e,!0),this.isDestroyed=!1}return e.prototype.setProperties=function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,d(this,e),!0!==t?(d(this.changedProperties,e),this.dataBind()):y()&&this.isRendered&&this.serverDataBind(e),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},e.callChildDataBind=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if(t[r]instanceof Array)for(var o=0,a=t[r];o<a.length;o++){var s=a[o];void 0!==s.dataBind&&s.dataBind()}else t[r].dataBind()}},e.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},e.prototype.dataBind=function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,i=this.changedProperties,n=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(i,n),this.isProtectedOnChange=t}},e.prototype.serverDataBind=function(e){if(y()&&(e=e||{},h(this.bulkChanges,{},e,!0),this.allowServerDataBinding)){window.sfBlazor.updateModel(this),this.bulkChanges={}}},e.prototype.saveChanges=function(e,t,i){if(y()){var n={};n[e]=t,this.serverDataBind(n)}this.isProtectedOnChange||(this.oldProperties[e]=i,this.changedProperties[e]=t,this.finalUpdate(),this.finalUpdate=function(e){var t,i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);var n="ej2"+function(e){for(var t="",i=0;i<5;i++)t+=(i?",":"")+e[i];return t}(i),r=function(i){i.source===window&&"string"===typeof i.data&&i.data.length<=32&&i.data===n&&(e(),t())};return window.addEventListener("message",r,!1),window.postMessage(n,"*"),t=function(){window.removeEventListener("message",r),e=r=n=void 0}}(this.dataBind.bind(this)))},e.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},e.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},e.prototype.trigger=function(e,t,i,n){var r=this;if(!0!==this.isDestroyed){var o=this.isProtectedOnChange;this.isProtectedOnChange=!1;var a=this.modelObserver.notify(e,t,i,n);if(St.test(e)){var l=s(e,this);if(l){if(window.Blazor){var c=l.call(this,t);c&&"function"===typeof c.then?i?c.then((function(e){i&&(e="string"===typeof e&&r.modelObserver.isJson(e)?JSON.parse(e):e,i.call(r,e))})).catch((function(e){n&&(e="string"===typeof e&&r.modelObserver.isJson(e)?JSON.parse(e):e,n.call(r,e))})):a=c:i&&i.call(this,t)}else l.call(this,t),i&&i.call(this,t)}else i&&i.call(this,t)}return this.isProtectedOnChange=o,a}},e.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();at([this.element],["e-lib",e]),p(this.element.ej2_instances)?l("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},e.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter((function(t){return t!==e})),st([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&st([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},e}();function Pt(e,t,i,n){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof n||(e.properties[t]=a(n,[e,t,i])),e.properties[t]}function jt(e,t,i,n,r,o){for(var s=[],l=i?i.length:0,c=0;c<l;c++){var d=n;if(o&&(d=n(i[c],e)),r){var h=a(d,[e,t,{},!0]);h.setProperties(i[c],!0),s.push(h)}else s.push(a(d,[e,t,i[c],!1]))}return s}function It(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=e),this.properties[t]}}function Et(e,t){return function(i){if(this.properties[t]!==i){var n=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,i,n),this.properties[t]=i}}}function Tt(e,t,i){return function(){return Pt(this,t,e,i)}}function At(e,t,i){return function(n){Pt(this,t,e,i).setProperties(n)}}function Dt(e,t,i){return function(){var n=i({});return this.properties.hasOwnProperty(t)?this.properties[t]:Pt(this,t,e,n)}}function kt(e,t,i){return function(n){var r=i(n,this);Pt(this,t,e,r).setProperties(n)}}function Mt(e,t,i){return function(){var n=this;if(!this.properties.hasOwnProperty(t)){var r=jt(this,t,e,i,!1);this.properties[t]=r}var o=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return this.properties[t].hasOwnProperty("push")||o||["push","pop"].forEach((function(e){var r={value:Nt(e,t,i,n.properties[t]).bind(n),configurable:!0};Object.defineProperty(n.properties[t],e,r)})),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[t],"isComplexArray",{value:!0}),this.properties[t]}}function Lt(e,t,i){return function(n){this.isComplexArraySetter=!0;var r=jt(this,t,e,i,!1),o=jt(this,t,n,i,!0);this.isComplexArraySetter=!1,this.saveChanges(t,o,r),this.properties[t]=o}}function Rt(e,t,i){return function(n){var r=this.properties.hasOwnProperty(t)?this.properties[t]:e,o=jt(this,t,n,i,!0,!0);this.saveChanges(t,o,r),this.properties[t]=o}}function zt(e,t,i){return function(){var n=i({});if(!this.properties.hasOwnProperty(t)){var r=jt(this,t,e,n,!1);this.properties[t]=r}return this.properties[t]}}function Nt(e,t,i,n){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(e){case"push":for(var a=0;a<i.length;a++){Array.prototype[e].apply(n,[i[a]]);var s=Bt(o+(n.length-1),i[a],!this.controlParent,e);this.serverDataBind(s,i[a],!1,e)}break;case"pop":Array.prototype[e].apply(n);var l=Bt(o+n.length,null,!this.controlParent,e);this.serverDataBind(l,{ejsAction:"pop"},!1,e)}return n}}function Bt(e,t,i,n){var r=e;if(i&&((r={})[e]=t,t&&"object"===typeof t)){r[e].ejsAction=n}return r}function _t(e){return function(t,i){var n={set:Et(e,i),get:It(e,i),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),Yt(t,i,"prop",e)}}function Ht(e,t){return function(i,n){var r={set:At(e,n,t),get:Tt(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,r),Yt(i,n,"complexProp",e,t)}}function Wt(e){return function(t,i){var n={set:kt({},i,e),get:Dt({},i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),Yt(t,i,"complexProp",{},e)}}function Ft(e,t){return function(i,n){var r={set:Lt(e,n,t),get:Mt(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,r),Yt(i,n,"colProp",e,t)}}function qt(e){return function(t,i){var n={set:Rt([],i,e),get:zt([],i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),Yt(t,i,"colProp",{},e)}}function Ut(){return function(e,t){var i={set:function(e){var i=this.properties[t];if(i!==e){var n=Xt(this,t);!1===u(i)&&n.context.removeEventListener(n.prefix,i),n.context.addEventListener(n.prefix,e),this.properties[t]=e}},get:It(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),Yt(e,t,"event")}}function Vt(e){}function Yt(e,t,i,n,r){u(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[i+"s"].push({propertyName:t,defaultValue:n,type:r}),e.propList[i+"Names"].push(t)}function Xt(e,t){if(!1===e.hasOwnProperty("parentObj"))return{context:e,prefix:t};var i=s("propName",e);return i&&(t=i+"-"+t),Xt(s("parentObj",e),t)}var Gt=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zt=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Jt=function(e){function t(t){var i=e.call(this,t,void 0)||this;return i.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},i}var i;return Gt(t,e),i=t,t.prototype.animate=function(e,t){t=t||{};var n=this.getModel(t);if("string"===typeof e)for(var r=0,o=Array.prototype.slice.call(vt(e,document));r<o.length;r++){var a=o[r];n.element=a,i.delayAnimation(n)}else n.element=e,i.delayAnimation(n)},t.stop=function(e,t){e.style.animation="",e.removeAttribute("e-animate");var i=e.getAttribute("e-animation-id");if(i){var n=parseInt(i,10);cancelAnimationFrame(n),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)},t.delayAnimation=function(e){e.delay?setTimeout((function(){i.applyAnimation(e)}),e.delay):i.applyAnimation(e)},t.applyAnimation=function(e){var t=this;e.timeStamp=0;var i=0,n=0,r=0,o=e.duration;e.element.setAttribute("e-animate","true");!function a(s){try{if(s){r=0===r?s:r,e.timeStamp=s+e.timeStamp-r,r=s,!i&&e.begin&&e.begin.call(t,e),i+=1;var l=e.timeStamp/i;e.timeStamp<o&&e.timeStamp+l<o&&e.element.getAttribute("e-animate")?(e.element.style.animation=e.name+" "+e.duration+"ms "+e.timingFunction,e.progress&&e.progress.call(t,e),requestAnimationFrame(a)):(cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.element.removeAttribute("e-animate"),e.element.style.animation="",e.end&&e.end.call(t,e))}else performance.now(),n=requestAnimationFrame(a),e.element.setAttribute("e-animation-id",n.toString())}catch(c){cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.fail&&e.fail.call(t,c)}}()},t.prototype.getModel=function(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"animation"},t.prototype.destroy=function(){},Zt([_t("FadeIn")],t.prototype,"name",void 0),Zt([_t(400)],t.prototype,"duration",void 0),Zt([_t("ease")],t.prototype,"timingFunction",void 0),Zt([_t(0)],t.prototype,"delay",void 0),Zt([Ut()],t.prototype,"progress",void 0),Zt([Ut()],t.prototype,"begin",void 0),Zt([Ut()],t.prototype,"end",void 0),Zt([Ut()],t.prototype,"fail",void 0),t=i=Zt([Vt],t)}(Ct);function Qt(e,t,i){var n=function(e){return{selector:e&&e.selector?e.selector:null,ignore:e&&e.ignore?e.ignore:null,rippleFlag:e&&e.rippleFlag,isCenterRipple:e&&e.isCenterRipple,duration:e&&e.duration?e.duration:350}}(t);return!1===n.rippleFlag||void 0===n.rippleFlag&&!ii?Function:(e.setAttribute("data-ripple","true"),le.add(e,"mousedown",$t,{parent:e,rippleOptions:n}),le.add(e,"mouseup",Kt,{parent:e,rippleOptions:n,done:i}),le.add(e,"mouseleave",ei,{parent:e,rippleOptions:n}),se.isPointer&&le.add(e,"transitionend",ei,{parent:e,rippleOptions:n}),function(){e.removeAttribute("data-ripple"),le.remove(e,"mousedown",$t),le.remove(e,"mouseup",Kt),le.remove(e,"mouseleave",ei),le.remove(e,"transitionend",ei)})}function $t(e){var t=e.target,i=this.rippleOptions.selector,n=i?bt(t,i):t;if(!(!n||this.rippleOptions&&bt(t,this.rippleOptions.ignore))){var r=n.getBoundingClientRect(),o=e.pageX-document.body.scrollLeft,a=e.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),s=Math.max(Math.abs(o-r.left),Math.abs(o-r.right)),l=Math.max(Math.abs(a-r.top),Math.abs(a-r.bottom)),c=Math.sqrt(s*s+l*l),d=2*c+"px",h=o-r.left-c,p=a-r.top-c;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(h=0,p=0,d="100%"),n.classList.add("e-ripple");var u=ot("div",{className:"e-ripple-element",styles:"width: "+d+";height: "+d+";left: "+h+"px;top: "+p+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});n.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)",n!==this.parent&&le.add(n,"mouseleave",ei,{parent:this.parent,rippleOptions:this.rippleOptions})}}function Kt(e){ti(e,this)}function ei(e){ti(e,this)}function ti(e,t){var i=t.rippleOptions.duration,n=e.target,r=t.rippleOptions.selector,o=r?bt(n,r):n;if(o&&(!o||-1!==o.className.indexOf("e-ripple"))){var a=vt(".e-ripple-element",o),s=a[a.length-1];s&&(s.style.opacity="0.5"),t.parent!==o&&le.remove(o,"mouseleave",ei),setTimeout((function(){s&&s.parentNode&&s.parentNode.removeChild(s),o.getElementsByClassName("e-ripple-element").length||o.classList.remove("e-ripple"),t.done&&t.done(e)}),i)}}var ii=!1;var ni,ri=function(){function e(e){this.loadedModules=[],this.parent=e}return e.prototype.inject=function(e,t){var i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(var n=0;n<i;n++)for(var r=e[n],o=0,s=t;o<s.length;o++){var c=s[o],d=r.member;if(c.prototype.getModuleName()===r.member&&!this.isModuleLoaded(d)){var h=a(c,r.args),p=this.getMemberName(d);r.isProperty?l(p,c,this.parent):l(p,h,this.parent);var u=r;u.member=p,this.loadedModules.push(u)}}}else this.clean()},e.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var i=t[e];i.isProperty||s(i.member,this.parent).destroy()}this.loadedModules=[]},e.prototype.clearUnusedModule=function(e){for(var t,i,n=this,r=e.map((function(e){return n.getMemberName(e.member)})),o=0,a=this.loadedModules.filter((function(e){return-1===r.indexOf(e.member)}));o<a.length;o++){var l=a[o];l.isProperty||s(l.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(l),1),t=this.parent,i=l.member,delete t[i]}},e.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},e.prototype.isModuleLoaded=function(e){for(var t=0,i=this.loadedModules;t<i.length;t++){if(i[t].member===this.getMemberName(e))return!0}return!1},e}(),oi=function(){function e(e,t,i,n){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=s("callChildDataBind",Ct),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=n,this.setProperties(i,!0)}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[t]=e:delete this.parentObj.childChangedProperties[t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(d(this,e),this.updateChange(!1,this.propName),this.clearChanges()):d(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(l(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),l(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,i,n){this.controlParent.isProtectedOnChange||(n||this.serverDataBind(e,t,!0),this.oldProperties[e]=i,this.changedProperties[e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e.prototype.serverDataBind=function(e,t,i,n){if(y()&&!this.parentObj.isComplexArraySetter){var r,o={},a=i?this.getParentKey(!0)+"."+e:e;if(-1!==a.indexOf(".")){var s=a.split(".");r=o;for(var l=0;l<s.length;l++){var c=l===s.length-1;r[s[l]]=c?t:{},r=c?r:r[s[l]]}}else o[a]={},r=o[a],o[a][e]=t;if(this.isParentArray){r.ejsAction=n||"none"}this.controlParent.serverDataBind(o)}},e.prototype.getParentKey=function(e){var t="",i=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);var n=this.parentObj[this.propName].length;n=e?n:n>0?n-1:0,i+=t=-1!==t?"-"+t:"-"+n}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+t),i},e}(),ai=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),si=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},li=0,ci=0,di=!1;var hi=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.randomId=function(){if("undefined"!==typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}(),n.isStringTemplate=!1,n.needsID=!1,n.isReactHybrid=!1,p(n.enableRtl)&&n.setProperties({enableRtl:U},!0),p(n.locale)&&n.setProperties({locale:Y},!0),n.moduleLoader=new ri(n),n.localObserver=new F(n),q.on("notifyExternalChange",n.detectFunction,n,n.randomId),u(i)||n.appendTo(),n}return ai(t,e),t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(st([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),e.prototype.destroy.call(this),this.moduleLoader.clean(),q.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new F(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},t.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},t.prototype.appendTo=function(t){if(p(t)||"string"!==typeof t?p(t)||(this.element=t):this.element=mt(t,document),!p(this.element)){var i="e-"+this.getModuleName().toLowerCase();at([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var n=s("ej2_instances",this.element);n&&-1!==n.indexOf(this)||e.prototype.addInstance.call(this),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}},t.prototype.renderComplete=function(e){if(y()){window.sfBlazor.renderComplete(this.element,e)}this.isRendered=!0},t.prototype.dataBind=function(){this.injectModules(),e.prototype.dataBind.call(this)},t.prototype.on=function(e,t,i){if("string"===typeof e)this.localObserver.on(e,t,i);else for(var n=0,r=e;n<r.length;n++){var o=r[n];this.localObserver.on(o.event,o.handler,o.context)}},t.prototype.off=function(e,t){if("string"===typeof e)this.localObserver.off(e,t);else for(var i=0,n=e;i<n.length;i++){var r=n[i];this.localObserver.off(r.event,r.handler)}},t.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var i=0;i<e.length;i++)-1===this.prototype.injectedModules.indexOf(e[i])&&this.prototype.injectedModules.push(e[i])},t.prototype.createElement=function(e,t,i){return i&&this.isReactHybrid?(t&&(t={}),t["data-id"]=Re(),We.createElement(e,t)):ot(e,t)},t.prototype.triggerStateChange=function(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},t.prototype.mergePersistData=function(){var e;p(e=di?window.localStorage.getItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion):window.localStorage.getItem(this.getModuleName()+this.element.id))||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||(di?window.localStorage.setItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion,this.getPersistData()):window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData()))},t.prototype.renderReactTemplates=function(){},t.prototype.clearTemplate=function(e,t){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(li=0),ni=this.pageID(location.href),ci=history.length,e+"_"+ni+"_"+li++},t.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return Math.abs(t)},t.prototype.isHistoryChanged=function(){return ni!==this.pageID(location.href)||ci!==history.length},t.prototype.addOnPersist=function(e){for(var t=this,i={},n=0,r=e;n<r.length;n++){var o,a=r[n];u(o=s(a,this))||l(a,this.getActualProperties(o),i)}return JSON.stringify(i,(function(e,i){return t.getActualProperties(i)}))},t.prototype.getActualProperties=function(e){return e instanceof oi?s("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,t){for(var i={},n=function(n){if(-1===t.indexOf(n)){var o=e[n];if("object"!==typeof o||o instanceof Array)i[n]=o;else{var a=t.filter((function(e){return new RegExp(n+".").test(e)})).map((function(e){return e.replace(n+".","")}));i[n]=r.iterateJsonProperties(r.getActualProperties(o),a)}}},r=this,o=0,a=Object.keys(e);o<a.length;o++){n(a[o])}return i},si([_t(!1)],t.prototype,"enablePersistence",void 0),si([_t()],t.prototype,"enableRtl",void 0),si([_t()],t.prototype,"locale",void 0),t=si([Vt],t)}(Ct);"undefined"!==typeof window&&window.addEventListener("popstate",(function(){li=0}));var pi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ui=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},fi={left:0,top:0,bottom:0,right:0},gi={isDragged:!1},mi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pi(t,e),ui([_t(0)],t.prototype,"left",void 0),ui([_t(0)],t.prototype,"top",void 0),t}(oi),vi=function(e){function t(t,n){var r=e.call(this,n,t)||this;return r.dragLimit=i.getDefaultPosition(),r.borderWidth=i.getDefaultPosition(),r.padding=i.getDefaultPosition(),r.diffX=0,r.prevLeft=0,r.prevTop=0,r.dragProcessStarted=!1,r.tapHoldTimer=0,r.externalInitialize=!1,r.diffY=0,r.parentScrollX=0,r.parentScrollY=0,r.droppables={},r.bind(),r}var i;return pi(t,e),i=t,t.prototype.bind=function(){this.toggleEvents(),se.isIE&&at([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return h({},fi)},t.prototype.toggleEvents=function(e){var t;u(this.handle)||(t=mt(this.handle,this.element));var i=this.enableTapHold&&se.isDevice&&se.isTouch?this.mobileInitialize:this.initialize;e?le.remove(t||this.element,se.touchStartEvent,i):le.add(t||this.element,se.touchStartEvent,i,this)},t.prototype.mobileInitialize=function(e){var t=this,i=e.currentTarget;this.tapHoldTimer=setTimeout((function(){t.externalInitialize=!0,t.removeTapholdTimer(),t.initialize(e,i)}),this.tapHoldThreshold),le.add(document,se.touchMoveEvent,this.removeTapholdTimer,this),le.add(document,se.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),le.remove(document,se.touchMoveEvent,this.removeTapholdTimer),le.remove(document,se.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(e,t){return p(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY):this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),p(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0;this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(e,t){if(this.currentStateTarget=e.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=e.currentTarget||t,this.dragProcessStarted=!1,this.abort){var i=this.abort;"string"===typeof i&&(i=[i]);for(var n=0;n<i.length;n++)if(!p(bt(e.target,i[n])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!u(e.changedTouches)&&"touchstart"!==e.type&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");var r=this.getCoordinates(e);if(this.initialPosition={x:r.pageX,y:r.pageY},!this.clone){var o=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=r.pageX-(o.left+this.parentScrollX),this.relativeYPosition=r.pageY-(o.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(le.add(document,se.touchMoveEvent,this.intDragStart,this),le.add(document,se.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==e.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,le.trigger(document.documentElement,se.touchStartEvent,e)}},t.prototype.intDragStart=function(e){this.removeTapholdTimer();var t=!u(e.changedTouches);if(!t||1===e.changedTouches.length){t&&e.preventDefault();var i,n=this.getCoordinates(e),r=getComputedStyle(this.element);this.margin={left:parseInt(r.marginLeft,10),top:parseInt(r.marginTop,10),right:parseInt(r.marginRight,10),bottom:parseInt(r.marginBottom,10)};var o=this.element;if(this.clone&&this.dragTarget){var a=bt(e.target,this.dragTarget);p(a)||(o=a)}this.isReplaceDragEle&&(o=this.currentStateCheck(e.target,o)),this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(e,this.isDragScroll);var s=this.initialPosition.x-n.pageX,l=this.initialPosition.y-n.pageY;if(Math.sqrt(s*s+l*l)>=this.distance||this.externalInitialize){var c=this.getHelperElement(e);if(!c||p(c))return;var d=this.helperElement=c;if(this.parentClientRect=this.calculateParentPosition(d.offsetParent),this.dragStart){var h={event:e,element:o,target:this.getProperTargetElement(e),bindEvents:y()?this.bindDragEvents.bind(this):null,dragElement:d};this.trigger("dragStart",h)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues(),this.clone||this.dragArea||(i.top-=this.parentScrollY,i.left-=this.parentScrollX);var f=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});this.dragElePosition={top:i.top,left:i.left},wt(d,this.getDragPosition({position:"absolute",left:f.left,top:f.top})),le.remove(document,se.touchMoveEvent,this.intDragStart),le.remove(document,se.touchEndEvent,this.intDestroy),y()||this.bindDragEvents(d)}}},t.prototype.bindDragEvents=function(e){ct(e)?(le.add(document,se.touchMoveEvent,this.intDrag,this),le.add(document,se.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)e=e.offsetParent,this.top+=e.offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(e){return this.queryPositionInfo?this.queryPositionInfo(e):e},t.prototype.calculateParentPosition=function(e){if(p(e))return{left:0,top:0};var t=e.getBoundingClientRect(),i=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(i.marginLeft,10),top:t.top+window.pageYOffset-parseInt(i.marginTop,10)}},t.prototype.intDrag=function(e){if(u(e.changedTouches)||1===e.changedTouches.length){var t,i;this.position=this.getMousePosition(e,this.isDragScroll);var n=this.getDocumentWidthHeight("Height");n<this.position.top&&(this.position.top=n);var r=this.getDocumentWidthHeight("Width");if(r<this.position.left&&(this.position.left=r),this.drag){var o=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:o})}var a=this.checkTargetElement(e);if(a.target&&a.instance){var s=!0;this.hoverObject&&(this.hoverObject.instance!==a.instance?this.triggerOutFunction(e,a):s=!1),s&&(a.instance.dragData[this.scope]=this.droppables[this.scope],a.instance.intOver(e,a.target),this.hoverObject=a)}else this.hoverObject&&this.triggerOutFunction(e,a);var l=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var c=this.parentClientRect.left,d=this.parentClientRect.top,h=this.getCoordinates(e),f=h.pageX,g=h.pageY,m=this.position.left-this.diffX,v=this.position.top-this.diffY;if(this.dragArea){var y=getComputedStyle(l);if(this.pageX!==f||this.skipDistanceCheck){var b=l.offsetWidth+(parseFloat(y.marginLeft)+parseFloat(y.marginRight));t=this.dragLimit.left>m&&m>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<m+b&&m>0?m-(m-this.dragLimit.right)+window.pageXOffset-b:m<0?this.dragLimit.left:m}if(this.pageY!==g||this.skipDistanceCheck){var w=l.offsetHeight+(parseFloat(y.marginTop)+parseFloat(y.marginBottom));i=this.dragLimit.top>v&&v>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<v+w&&v>0?v-(v-this.dragLimit.bottom)+window.pageYOffset-w:v<0?this.dragLimit.top:v}}else t=m,i=v;var x,O,S=d+this.borderWidth.top,C=c+this.borderWidth.left;this.dragProcessStarted&&(p(i)&&(i=this.prevTop),p(t)&&(t=this.prevLeft)),this.dragArea?(x=i-S<0?this.dragLimit.top:i-S,O=t-C<0?this.dragElePosition.left:t-C):(x=i-S,O=t-C,this.clone||(x-=this.parentScrollY,O-=this.parentScrollX));var P=this.getProcessedPositionValue({top:x+"px",left:O+"px"});wt(l,this.getDragPosition(P)),!this.elementInViewport(l)&&this.enableAutoScroll&&this.helperElement.scrollIntoView(),this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=i,this.position.left=t,this.position.top=i,this.pageX=f,this.pageY=g}},t.prototype.triggerOutFunction=function(e,t){this.hoverObject.instance.intOut(e,t.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},t.prototype.getDragPosition=function(e){var t=h({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t},t.prototype.getDocumentWidthHeight=function(e){var t=document.body,i=document.documentElement;return Math.max(t["scroll"+e],i["scroll"+e],t["offset"+e],i["offset"+e],i["client"+e])},t.prototype.intDragStop=function(e){if(this.dragProcessStarted=!1,u(e.changedTouches)||1===e.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){var t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");var i=this.checkTargetElement(e);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(e,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),le.remove(document,se.touchMoveEvent,this.intDragStart),le.remove(document,se.touchEndEvent,this.intDragStop),le.remove(document,se.touchEndEvent,this.intDestroy),le.remove(document,se.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.isDragStarted=function(e){return e&&(gi.isDragged=!gi.isDragged),gi.isDragged},t.prototype.setDragArea=function(){var e,t,i,n=0,r=0;if(i="string"===typeof this.dragArea?mt(this.dragArea):this.dragArea){var o=i.getBoundingClientRect();e=i.scrollWidth?i.scrollWidth:o.right-o.left,t=i.scrollHeight?i.scrollHeight:o.bottom-o.top;for(var a=["Top","Left","Bottom","Right"],s=getComputedStyle(i),l=0;l<a.length;l++){var c=a[l],d=s["border"+c+"Width"],h=s["padding"+c],p=c.toLowerCase();this.borderWidth[p]=isNaN(parseFloat(d))?0:parseFloat(d),this.padding[p]=isNaN(parseFloat(h))?0:parseFloat(h)}n=o.top,r=o.left,this.dragLimit.left=r+this.borderWidth.left+this.padding.left,this.dragLimit.top=i.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=r+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=n+t-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(e){var t,i=this.getCoordinates(e),n=this.helperElement.style.pointerEvents||"";return g(e.target,this.helperElement)||-1!==e.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=n):t=e.target,t},t.prototype.currentStateCheck=function(e,t){return p(this.currentStateTarget)||this.currentStateTarget===e?p(t)?e:t:this.currentStateTarget},t.prototype.getMousePosition=function(e,t){var i,n,r=void 0!==e.srcElement?e.srcElement:e.target,o=this.getCoordinates(e),a=p(r.offsetParent);return t?(i=this.clone?o.pageX:o.pageX+(a?0:r.offsetParent.scrollLeft)-this.relativeXPosition,n=this.clone?o.pageY:o.pageY+(a?0:r.offsetParent.scrollTop)-this.relativeYPosition):(i=this.clone?o.pageX:o.pageX+window.pageXOffset-this.relativeXPosition,n=this.clone?o.pageY:o.pageY+window.pageYOffset-this.relativeYPosition),{left:i-(this.margin.left+this.cursorAt.left),top:n-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e},t.prototype.getHelperElement=function(e){var t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=ot("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t},t.prototype.setGlobalDroppables=function(e,t,i){this.droppables[this.scope]=e?null:{draggable:t,helper:i,draggedElement:this.element}},t.prototype.checkTargetElement=function(e){var t=this.getProperTargetElement(e),i=this.getDropInstance(t);if(!i&&t&&!p(t.parentNode)){var n=bt(t.parentNode,".e-droppable")||t.parentElement;n&&(i=this.getDropInstance(n))}return{target:t,instance:i}},t.prototype.getDropInstance=function(e){var t,i=e&&e.ej2_instances;if(i)for(var n=0,r=i;n<r.length;n++){var o=r[n];if("droppable"===o.getModuleName()){t=o;break}}return t},t.prototype.destroy=function(){this.toggleEvents(!0),e.prototype.destroy.call(this)},ui([Ht({},mi)],t.prototype,"cursorAt",void 0),ui([_t(!0)],t.prototype,"clone",void 0),ui([_t()],t.prototype,"dragArea",void 0),ui([_t()],t.prototype,"isDragScroll",void 0),ui([_t()],t.prototype,"isReplaceDragEle",void 0),ui([_t(!0)],t.prototype,"isPreventSelect",void 0),ui([Ut()],t.prototype,"drag",void 0),ui([Ut()],t.prototype,"dragStart",void 0),ui([Ut()],t.prototype,"dragStop",void 0),ui([_t(1)],t.prototype,"distance",void 0),ui([_t()],t.prototype,"handle",void 0),ui([_t()],t.prototype,"abort",void 0),ui([_t()],t.prototype,"helper",void 0),ui([_t("default")],t.prototype,"scope",void 0),ui([_t("")],t.prototype,"dragTarget",void 0),ui([_t()],t.prototype,"axis",void 0),ui([_t()],t.prototype,"queryPositionInfo",void 0),ui([_t(!1)],t.prototype,"enableTailMode",void 0),ui([_t(!1)],t.prototype,"skipDistanceCheck",void 0),ui([_t(!0)],t.prototype,"preventDefault",void 0),ui([_t(!1)],t.prototype,"enableAutoScroll",void 0),ui([_t(!1)],t.prototype,"enableTapHold",void 0),ui([_t(750)],t.prototype,"tapHoldThreshold",void 0),t=i=ui([Vt],t)}(Ct),yi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bi=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},wi=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.mouseOver=!1,n.dragData={},n.dragStopCalled=!1,n.bind(),n}return yi(t,e),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){le.add(this.element,se.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,t){if(!this.mouseOver){var i=this.dragData[this.scope];this.trigger("over",{event:e,target:t,dragData:i}),this.mouseOver=!0}},t.prototype.intOut=function(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)},t.prototype.intDrop=function(e,t){if(this.dragStopCalled){this.dragStopCalled=!1;var i,n=!0,r=this.dragData[this.scope],o=!!r&&(r.helper&&ct(r.helper));o&&(i=this.isDropArea(e,r.helper,t),this.accept&&(n=Ot(r.helper,this.accept))),o&&this.drop&&i.canDrop&&n&&this.trigger("drop",{event:e,target:i.target,droppedElement:r.helper,dragData:r}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,t,i){var n={canDrop:!0,target:i||e.target},r="touchend"===e.type;if(r||n.target===t){t.style.display="none";var o=r?e.changedTouches[0]:e,a=document.elementFromPoint(o.clientX,o.clientY);n.canDrop=!1,n.canDrop=g(a,this.element),n.canDrop&&(n.target=a),t.style.display=""}return n},t.prototype.destroy=function(){le.remove(this.element,se.touchEndEvent,this.intDrop),e.prototype.destroy.call(this)},bi([_t()],t.prototype,"accept",void 0),bi([_t("default")],t.prototype,"scope",void 0),bi([Ut()],t.prototype,"drop",void 0),bi([Ut()],t.prototype,"over",void 0),bi([Ut()],t.prototype,"out",void 0),t=bi([Vt],t)}(Ct),xi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Oi=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Si={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},Ci=function(e){function t(t,n){var r=e.call(this,n,t)||this;return r.keyPressHandler=function(e){for(var t=e.altKey,n=e.ctrlKey,o=e.shiftKey,a=e.which,s=0,l=Object.keys(r.keyConfigs);s<l.length;s++)for(var c=l[s],d=0,h=r.keyConfigs[c].split(",");d<h.length;d++){var p=h[d],u=i.getKeyConfigData(p.trim());t===u.altKey&&n===u.ctrlKey&&o===u.shiftKey&&a===u.keyCode&&(e.action=c,r.keyAction&&r.keyAction(e))}},r.bind(),r}var i;return xi(t,e),i=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[e];var t=e.toLowerCase().split("+"),n={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?n.keyCode=Number(t[t.length-1]):n.keyCode=i.getKeyCode(t[t.length-1]),i.configCache[e]=n,n},t.getKeyCode=function(e){return Si[e]||e.toUpperCase().charCodeAt(0)},t.configCache={},Oi([_t({})],t.prototype,"keyConfigs",void 0),Oi([_t("keyup")],t.prototype,"eventName",void 0),Oi([Ut()],t.prototype,"keyAction",void 0),t=i=Oi([Vt],t)}(Ct),Pi=function(){function e(e,t,i){this.controlName=e,this.localeStrings=t,this.setLocale(i||Y)}return e.prototype.setLocale=function(t){var i=this.intGetControlConstant(e.locale,t);this.currentLocale=i||this.localeStrings},e.load=function(e){this.locale=h(this.locale,e,{},!0)},e.prototype.getConstant=function(e){return p(this.currentLocale[e])?this.localeStrings[e]||"":this.currentLocale[e]},e.prototype.intGetControlConstant=function(e,t){return e[t]?e[t][this.controlName]:null},e.locale={},e}(),ji=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ii=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Ei=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ji(t,e),Ii([_t(50)],t.prototype,"swipeThresholdDistance",void 0),t}(oi),Ti=/(Up|Down)/,Ai=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(e){if(!0===n.touchAction){var t=n.updateChangeTouches(e);void 0!==e.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},n.startEventData=t,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout((function(){n.tapHoldEvent(e)}),n.tapHoldThreshold),le.add(n.element,se.touchMoveEvent,n.moveEvent,n),le.add(n.element,se.touchEndEvent,n.endEvent,n),le.add(n.element,se.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(e){var t=n.updateChangeTouches(e);n.movedPoint=t,n.isTouchMoved=!(t.clientX===n.startPoint.clientX&&t.clientY===n.startPoint.clientY);var i={};n.isTouchMoved&&(clearTimeout(n.timeOutTapHold),n.calcScrollPoints(e),i=h(i,{},{startEvents:n.startEventData,originalEvent:e,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(t)}),n.trigger("scroll",i),n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},n.cancelEvent=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(e),le.remove(n.element,se.touchCancelEvent,n.cancelEvent)},n.endEvent=function(e){n.swipeFn(e),n.isTouchMoved||"function"===typeof n.tap&&(n.trigger("tap",{originalEvent:e,tapCount:++n.tapCount}),n.timeOutTap=setTimeout((function(){n.tapCount=0}),n.tapThreshold)),n.modeclear()},n.swipeFn=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var t=n.updateChangeTouches(e),i=t.clientX-n.startPoint.clientX,r=t.clientY-n.startPoint.clientY;i=Math.floor(i<0?-1*i:i),r=Math.floor(r<0?-1*r:i),n.isTouchMoved=i>1||r>1,n.endPoint=t,n.calcPoints(e);var o={originalEvent:e,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(t)};if(n.isTouchMoved){var a=void 0,s=n.swipeSettings.swipeThresholdDistance;a=h(a,n.defaultArgs,o);var l=!1,c=n.element,d=n.isScrollable(c),p=Ti.test(n.movedDirection);(s<n.distanceX&&!p||s<n.distanceY&&p)&&(l=!d||n.checkSwipe(c,p)),l&&n.trigger("swipe",a)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout((function(){n.touchAction=!0}),"function"!==typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),le.remove(n.element,se.touchMoveEvent,n.moveEvent),le.remove(n.element,se.touchEndEvent,n.endEvent),le.remove(n.element,se.touchCancelEvent,n.cancelEvent)},n.bind(),n}return ji(t,e),t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents(),se.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.wireEvents=function(){le.add(this.element,se.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){le.remove(this.element,se.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var t=getComputedStyle(e),i=t.overflow+t.overflowX+t.overflowY;return!!/(auto|scroll)/.test(i)},t.prototype.tapHoldEvent=function(e){var t;this.tapCount=0,this.touchAction=!0,le.remove(this.element,se.touchMoveEvent,this.moveEvent),le.remove(this.element,se.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),le.remove(this.element,se.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=t.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=t.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var t=e.clientX,i=e.clientY,n=Date.now(),r=t-this.startPoint.clientX,o=i-this.startPoint.clientX,a=n-this.tStampStart;return Math.sqrt(r*r+o*o)/a},t.prototype.checkSwipe=function(e,t){var i=["scroll","offset"],n=t?["Height","Top"]:["Width","Left"];return e[i[0]+n[0]]<=e[i[1]+n[0]]||(0===e[i[0]+n[1]]||e[i[1]+n[0]]+e[i[0]+n[1]]>=e[i[0]+n[0]])},t.prototype.updateChangeTouches=function(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e},Ii([Ut()],t.prototype,"tap",void 0),Ii([Ut()],t.prototype,"tapHold",void 0),Ii([Ut()],t.prototype,"swipe",void 0),Ii([Ut()],t.prototype,"scroll",void 0),Ii([_t(350)],t.prototype,"tapThreshold",void 0),Ii([_t(750)],t.prototype,"tapHoldThreshold",void 0),Ii([Ht({},Ei)],t.prototype,"swipeSettings",void 0),t=Ii([Vt],t)}(Ct),Di=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],ki=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],Mi=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],Li=function(){function e(){}return e.beforeSanitize=function(){return{selectors:{tags:Di,attributes:ki}}},e.sanitize=function(e){var t=this.beforeSanitize();return this.serializeValue(t,e)},e.serializeValue=function(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),i},e.removeElement=function(){for(var e=this.wrapElement.children,t=0;t<e.length;t++)for(var i=e[t].attributes,n=0;n<i.length;n++)this.wrapElement.children[t].removeAttribute(i[n].localName)},e.removeXssTags=function(){var e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach((function(e){ut(e)}))},e.removeJsEvents=function(){var e=this.wrapElement.querySelectorAll("["+Mi.join("],[")+"]");e.length>0&&e.forEach((function(e){Mi.forEach((function(t){e.hasAttribute(t)&&e.removeAttribute(t)}))}))},e.removeXssAttrs=function(){var e=this;this.removeAttrs.forEach((function(t,i){var n=e.wrapElement.querySelectorAll(t.selector);n.length>0&&n.forEach((function(e){e.removeAttribute(t.attribute)}))}))},e}()},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(0),r=i(23),o=i(4),a={GroupGuid:"{271bbba0-1ee7}"},s=function(){function e(){}return e.getValue=function(e,t){return"function"===typeof e?e.call(t||{}):e},e.endsWith=function(e,t){return e.slice&&e.slice(-t.length)===t},e.startsWith=function(e,t){return e.slice(0,t.length)===t},e.fnSort=function(t){return"ascending"===(t=t?e.toLowerCase(t):"ascending")?this.fnAscending:this.fnDescending},e.fnAscending=function(e,t){return Object(n.J)(e)&&Object(n.J)(t)||null===t||void 0===t?-1:"string"===typeof e?e.localeCompare(t):null===e||void 0===e?1:e-t},e.fnDescending=function(e,t){return Object(n.J)(e)&&Object(n.J)(t)?-1:null===t||void 0===t?1:"string"===typeof e?-1*e.localeCompare(t):null===e||void 0===e?-1:t-e},e.extractFields=function(e,t){for(var i={},n=0;n<t.length;n++)i=this.setValue(t[n],this.getObject(t[n],e),i);return i},e.select=function(e,t){for(var i=[],n=0;n<e.length;n++)i.push(this.extractFields(e[n],t));return i},e.group=function(t,i,r,o,s,l,c){o=o||1;var d=t,h="GroupGuid";if(d.GroupGuid===a[h]){for(var p=function(e){if(Object(n.J)(s))d[e].items=u.group(d[e].items,i,r,d.level+1,null,l,c),d[e].count=d[e].items.length;else{var t,o=s.filter((function(t){return t.key===d[e].key}));t=s.indexOf(o[0]),d[e].items=u.group(d[e].items,i,r,d.level+1,s[t].items,l,c),d[e].count=s[t].count}},u=this,f=0;f<d.length;f++)p(f);return d.childLevels+=1,d}var g={},m=[];m.GroupGuid=a[h],m.level=o,m.childLevels=0,m.records=d;for(var v=function(e){var t=y.getVal(d,e,i);if(Object(n.J)(l)||(t=l(t,i)),!g[t]&&(g[t]={key:t,count:0,items:[],aggregates:{},field:i},m.push(g[t]),!Object(n.J)(s))){var o=s.filter((function(e){return e.key===g[t].key}));g[t].count=o[0].count}g[t].count=Object(n.J)(s)?g[t].count+=1:g[t].count,(!c||c&&r.length)&&g[t].items.push(d[e])},y=this,b=0;b<d.length;b++)v(b);if(r&&r.length){var w=function(t){for(var i={},o=void 0,a=r,l=0;l<r.length;l++)if(o=e.aggregates[r[l].type],Object(n.J)(s))o&&(i[a[l].field+" - "+a[l].type]=o(m[t].items,a[l].field));else{var c=s.filter((function(e){return e.key===m[t].key}));o&&(i[a[l].field+" - "+a[l].type]=o(c[0].items,a[l].field))}m[t].aggregates=i};for(b=0;b<m.length;b++)w(b)}if(c&&m.length&&r.length)for(b=0;b<m.length;b++)m[b].items=[];return d.length&&m||d},e.buildHierarchy=function(e,t,i,n,r){var o,a={};for(n.result&&(n=n.result),n.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),o=0;o<n.length;o++){(a[s=this.getObject(e,n[o])]||(a[s]=[])).push(n[o])}for(o=0;o<i.length;o++){var s=this.getObject(r||e,i[o]);i[o][t]=a[s]}},e.getFieldList=function(e,t,i){if(void 0===i&&(i=""),void 0===t||null===t)return this.getFieldList(e,[],i);for(var n=e,r=0,o=Object.keys(e);r<o.length;r++){var a=o[r];"object"!==typeof n[a]||n[a]instanceof Array?t.push(i+a):this.getFieldList(n[a],t,i+a+".")}return t},e.getObject=function(e,t){if(!e)return t;if(t){if(-1===e.indexOf("."))return t[e];for(var i=t,n=e.split("."),r=0;r<n.length&&null!=i;r++)i=i[n[r]];return i}},e.setValue=function(e,t,i){var r,o,a=e.toString().split("."),s=i||{},l=s,c=a.length;for(r=0;r<c;r++)o=a[r],r+1===c?l[o]=void 0===t?void 0:t:Object(n.J)(l[o])&&(l[o]={}),l=l[o];return s},e.sort=function(e,t,i){if(e.length<=1)return e;var n=parseInt((e.length/2).toString(),10),r=e.slice(0,n),o=e.slice(n);return r=this.sort(r,t,i),o=this.sort(o,t,i),this.merge(r,o,t,i)},e.ignoreDiacritics=function(t){return"string"!==typeof t?t:t.split("").map((function(t){return t in e.diacritics?e.diacritics[t]:t})).join("")},e.merge=function(e,t,i,n){for(var r,o=[];e.length>0||t.length>0;)r=e.length>0&&t.length>0?n?n(this.getVal(e,0,i),this.getVal(t,0,i),e[0],t[0])<=0?e:t:e[0][i]<e[0][i]?e:t:e.length>0?e:t,o.push(r.shift());return o},e.getVal=function(e,t,i){return i?this.getObject(i,e[t]):e[t]},e.toLowerCase=function(e){return e?"string"===typeof e?e.toLowerCase():e.toString():0===e||!1===e?e.toString():""},e.callAdaptorFunction=function(e,t,i,r){if(t in e){var o=e[t](i,r);Object(n.J)(o)||(i=o)}return i},e.getAddParams=function(t,i,n){var r={};return e.callAdaptorFunction(t,"addParams",{dm:i,query:n,params:n.params,reqParams:r}),r},e.isPlainObject=function(e){return!!e&&e.constructor===Object},e.isCors=function(){var e=null;try{e=new window.XMLHttpRequest}catch(t){}return!!e&&"withCredentials"in e},e.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,(function(e,i){if("crypto"in window&&"getRandomValues"in crypto){var n=new Uint8Array(1);window.crypto.getRandomValues(n),t=n[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===i?3&t|8:t]}))},e.isNull=function(e){return void 0===e||null===e},e.getItemFromComparer=function(t,i,r){var o,a,s,l=0,c="string"===typeof e.getVal(t,0,i);if(t.length)for(;Object(n.J)(o)&&l<t.length;)o=e.getVal(t,l,i),s=t[l++];for(;l<t.length;l++)a=e.getVal(t,l,i),Object(n.J)(a)||(c&&(o=+o,a=+a),r(o,a)>0&&(o=a,s=t[l]));return s},e.distinct=function(t,i,r){r=!Object(n.J)(r)&&r;var o,a=[],s={};return t.forEach((function(n,l){(o="object"===typeof t[l]?e.getVal(t,l,i):t[l])in s||(a.push(r?t[l]:o),s[o]=1)})),a},e.serverTimezoneOffset=null,e.timeZoneHandling=!0,e.throwError=function(e){try{throw new Error(e)}catch(t){throw t.message+"\n"+t.stack}},e.aggregates={sum:function(t,i){for(var n,r=0,o="number"!==typeof e.getVal(t,0,i),a=0;a<t.length;a++)n=e.getVal(t,a,i),isNaN(n)||null===n||(o&&(n=+n),r+=n);return r},average:function(t,i){return e.aggregates.sum(t,i)/t.length},min:function(t,i){var n;return"function"===typeof i&&(n=i,i=null),e.getObject(i,e.getItemFromComparer(t,i,n||e.fnAscending))},max:function(t,i){var n;return"function"===typeof i&&(n=i,i=null),e.getObject(i,e.getItemFromComparer(t,i,n||e.fnDescending))},truecount:function(e,t){return new r.a(e).executeLocal((new o.b).where(t,"equal",!0,!0)).length},falsecount:function(e,t){return new r.a(e).executeLocal((new o.b).where(t,"equal",!1,!0)).length},count:function(e,t){return e.length}},e.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},e.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},e.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},e.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains"},e.diacritics={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"},e.fnOperators={equal:function(t,i,n,r){return r&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),n?e.toLowerCase(t)===e.toLowerCase(i):t===i},notequal:function(t,i,n,r){return r&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),!e.fnOperators.equal(t,i,n)},lessthan:function(t,i,n){return n?e.toLowerCase(t)<e.toLowerCase(i):t<i},greaterthan:function(t,i,n){return n?e.toLowerCase(t)>e.toLowerCase(i):t>i},lessthanorequal:function(t,i,n){return n?e.toLowerCase(t)<=e.toLowerCase(i):t<=i},greaterthanorequal:function(t,i,n){return n?e.toLowerCase(t)>=e.toLowerCase(i):t>=i},contains:function(t,i,r,o){return o&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),r?!Object(n.J)(t)&&!Object(n.J)(i)&&-1!==e.toLowerCase(t).indexOf(e.toLowerCase(i)):!Object(n.J)(t)&&!Object(n.J)(i)&&-1!==t.toString().indexOf(i)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(t,i,n,r){return r&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),n?t&&i&&e.startsWith(e.toLowerCase(t),e.toLowerCase(i)):t&&i&&e.startsWith(t,i)},endswith:function(t,i,n,r){return r&&(t=e.ignoreDiacritics(t),i=e.ignoreDiacritics(i)),n?t&&i&&e.endsWith(e.toLowerCase(t),e.toLowerCase(i)):t&&i&&e.endsWith(t,i)},processSymbols:function(t){var i=e.operatorSymbols[t];return i?e.fnOperators[i]:e.throwError("Query - Process Operator : Invalid operator")},processOperator:function(t){var i=e.fnOperators[t];return i||e.fnOperators.processSymbols(t)}},e.parse={parseJson:function(t){return"string"===typeof t?t=JSON.parse(t,e.parse.jsonReviver):t instanceof Array?e.parse.iterateAndReviveArray(t):"object"===typeof t&&null!==t&&e.parse.iterateAndReviveJson(t),t},iterateAndReviveArray:function(t){for(var i=0;i<t.length;i++)"object"===typeof t[i]&&null!==t[i]?e.parse.iterateAndReviveJson(t[i]):"string"!==typeof t[i]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[i])?t[i]=e.parse.parseJson(t[i]):t[i]=e.parse.jsonReviver("",t[i])},iterateAndReviveJson:function(t){for(var i,n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];e.startsWith(o,"__")||("object"===typeof(i=t[o])?i instanceof Array?e.parse.iterateAndReviveArray(i):i&&e.parse.iterateAndReviveJson(i):t[o]=e.parse.jsonReviver(t[o],i))}},jsonReviver:function(t,i){if("string"===typeof i){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i),r=e.timeZoneHandling?e.serverTimezoneOffset:null;if(n)return e.dateParse.toTimeZone(new Date(parseInt(n[1],10)),r,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var o=i.indexOf("Z")>-1||i.indexOf("z")>-1,a=i.split(/[^0-9.]/);if(o)i=e.dateParse.toTimeZone(new Date(parseInt(a[0],10),parseInt(a[1],10)-1,parseInt(a[2],10),parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10)),e.serverTimezoneOffset,!1);else{var s=new Date(parseInt(a[0],10),parseInt(a[1],10)-1,parseInt(a[2],10),parseInt(a[3],10),parseInt(a[4],10),parseInt(a[5],10)),l=parseInt(a[6],10),c=parseInt(a[7],10);if(isNaN(l)&&isNaN(c))return s;i.indexOf("+")>-1?s.setHours(s.getHours()-l,s.getMinutes()-c):s.setHours(s.getHours()+l,s.getMinutes()+c),i=e.dateParse.toTimeZone(s,e.serverTimezoneOffset,!1)}null==e.serverTimezoneOffset&&(i=e.dateParse.addSelfOffset(i))}}return i},isJson:function(t){return"string"===typeof t[0]?t:e.parse.parseJson(t)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(t,i){return e.isPlainObject(t)?e.parse.jsonReplacer(t,i):t instanceof Array?e.parse.arrayReplacer(t):t instanceof Date?e.parse.jsonReplacer({val:t},i).val:t},jsonReplacer:function(t,i){for(var n,r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];if((n=t[a])instanceof Date){var s=n;null==e.serverTimezoneOffset?t[a]=e.dateParse.toTimeZone(s,null).toJSON():(s=new Date(+s+36e5*e.serverTimezoneOffset),t[a]=e.dateParse.toTimeZone(e.dateParse.addSelfOffset(s),null).toJSON())}}return t},arrayReplacer:function(t){for(var i=0;i<t.length;i++)e.isPlainObject(t[i])?t[i]=e.parse.jsonReplacer(t[i]):t[i]instanceof Date&&(t[i]=e.parse.jsonReplacer({date:t[i]}).date);return t},jsonDateReplacer:function(t,i){if("value"===t&&i){if("string"===typeof i){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i);if(n)i=e.dateParse.toTimeZone(new Date(parseInt(n[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var r=i.split(/[^0-9]/);i=e.dateParse.toTimeZone(new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10),parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10)),null,!0)}}if(i instanceof Date)return i=e.dateParse.addSelfOffset(i),null===e.serverTimezoneOffset?e.dateParse.toTimeZone(e.dateParse.addSelfOffset(i),null).toJSON():(i=e.dateParse.toTimeZone(i,i.getTimezoneOffset()/60*2-e.serverTimezoneOffset,!1)).toJSON()}return i}},e.dateParse={addSelfOffset:function(e){return new Date(+e-6e4*e.getTimezoneOffset())},toUTC:function(e){return new Date(+e+6e4*e.getTimezoneOffset())},toTimeZone:function(t,i,n){if(null===i)return t;var r=n?e.dateParse.toUTC(t):t;return new Date(+r-36e5*i)},toLocalTime:function(e){var t=e,i=-t.getTimezoneOffset(),n=i>=0?"+":"-",r=function(e){var t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return t.getFullYear()+"-"+r(t.getMonth()+1)+"-"+r(t.getDate())+"T"+r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+n+r(i/60)+":"+r(i%60)}},e}()},function(e,t,i){"use strict";e.exports=i(30)},function(e,t,i){"use strict";e.exports=i(31)},function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return a}));var n=i(1),r=i(0),o=function(){function e(e){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"===typeof e?this.fromTable=e:e&&e instanceof Array&&(this.lookups=e),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return e.prototype.setKey=function(e){return this.key=e,this},e.prototype.using=function(e){return this.dataManager=e,this},e.prototype.execute=function(e,t,i,r){return(e=e||this.dataManager)?e.executeQuery(this,t,i,r):n.a.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.executeLocal=function(e){return(e=e||this.dataManager)?e.executeLocal(this):n.a.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},e.prototype.clone=function(){var t=new e;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t.lazyLoad=this.lazyLoad.slice(0),t},e.prototype.from=function(e){return this.fromTable=e,this},e.prototype.addParams=function(e,t){return"function"===typeof t?this.params.push({key:e,fn:t}):this.params.push({key:e,value:t}),this},e.prototype.distinct=function(e){return this.distincts="string"===typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.expand=function(e){return this.expands="string"===typeof e?[].slice.call([e],0):e.slice(0),this},e.prototype.where=function(e,t,i,n,r){t=t?t.toLowerCase():null;var o=null;return"string"===typeof e?o=new a(e,t,i,n,r):e instanceof a&&(o=e),this.queries.push({fn:"onWhere",e:o}),this},e.prototype.search=function(e,t,i,r,o){"string"===typeof t&&(t=[t]),i&&"none"!==i||(i="contains");var a=n.a.fnOperators[i];return this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:i,searchKey:e,ignoreCase:r,ignoreAccent:o,comparer:a}}),this},e.prototype.sortBy=function(e,t,i){return this.sortByForeignKey(e,t,i)},e.prototype.sortByForeignKey=function(t,i,o,a){var s,l,c=Object(r.J)(a)?"ascending":a;if("string"===typeof t&&n.a.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),i="descending"),i&&"string"!==typeof i||(c=i?i.toLowerCase():"ascending",i=n.a.fnSort(i)),o){s=e.filterQueries(this.queries,"onSortBy");for(var d=0;d<s.length;d++)if("string"===typeof(l=s[d].e.fieldName)){if(l===t)return this}else if(l instanceof Array)for(var h=0;h<l.length;h++)if(l[h]===t||t.toLowerCase()===l[h]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:i,direction:c}}),this},e.prototype.sortByDesc=function(e){return this.sortBy(e,"descending")},e.prototype.group=function(e,t,i){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,comparer:t||null,format:i||null}}),this},e.prototype.page=function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},e.prototype.range=function(e,t){return this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},e.prototype.take=function(e){return this.queries.push({fn:"onTake",e:{nos:e}}),this},e.prototype.skip=function(e){return this.queries.push({fn:"onSkip",e:{nos:e}}),this},e.prototype.select=function(e){return"string"===typeof e&&(e=[].slice.call([e],0)),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},e.prototype.hierarchy=function(e,t){return this.subQuerySelector=t,this.subQuery=e,this},e.prototype.foreignKey=function(e){return this.fKey=e,this},e.prototype.requiresCount=function(){return this.isCountRequired=!0,this},e.prototype.aggregate=function(e,t){return this.queries.push({fn:"onAggregates",e:{field:t,type:e}}),this},e.filterQueries=function(e,t){return e.filter((function(e){return e.fn===t}))},e.filterQueryLists=function(e,t){for(var i=e.filter((function(e){return-1!==t.indexOf(e.fn)})),n={},r=0;r<i.length;r++)n[i[r].fn]||(n[i[r].fn]=i[r].e);return n},e}(),a=function(){function e(t,i,r,o,a){return void 0===o&&(o=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"===typeof t?(this.field=t,this.operator=i.toLowerCase(),this.value=r,this.ignoreCase=o,this.ignoreAccent=a,this.isComplex=!1,this.comparer=n.a.fnOperators.processOperator(this.operator)):(t instanceof e&&r instanceof e||r instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[t],r instanceof Array?[].push.apply(this.predicates,r):this.predicates.push(r)),this}return e.and=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.combinePredicates([].slice.call(t,0),"and")},e.prototype.and=function(t,i,n,r,o){return e.combine(this,t,i,n,"and",r,o)},e.or=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.combinePredicates([].slice.call(t,0),"or")},e.prototype.or=function(t,i,n,r,o){return e.combine(this,t,i,n,"or",r,o)},e.fromJson=function(e){if(e instanceof Array){for(var t=[],i=0,n=e.length;i<n;i++)t.push(this.fromJSONData(e[i]));return t}var r=e;return this.fromJSONData(r)},e.prototype.validate=function(e){var t,i,r=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,n.a.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);t="and"===this.condition;for(var o=0;o<r.length;o++)if(i=r[o].validate(e),t){if(!i)return!1}else if(i)return!0;return t},e.prototype.toJson=function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e}},e.combinePredicates=function(t,i){if(1===t.length){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new e(t[0],i,t.slice(1))},e.combine=function(t,i,r,o,a,s,l){return i instanceof e?e[a](t,i):"string"===typeof i?e[a](t,new e(i,r,o,s,l)):n.a.throwError("Predicate - "+a+" : invalid arguments")},e.fromJSONData=function(t){for(var i=t.predicates||[],n=i.length,r=[],o=0;o<n;o++)r.push(this.fromJSONData(i[o]));return t.isComplex?new e(r[0],t.condition,r.slice(1)):new e(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent)},e}()},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}i.d(t,"a",(function(){return r}))},function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(15);var r=i(16);function o(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,i){"use strict";i.d(t,"d",(function(){return P})),i.d(t,"b",(function(){return I})),i.d(t,"a",(function(){return A})),i.d(t,"c",(function(){return M}));i(13);var n=i(3),r=i.n(n);function o(e){return function(t){return!!t.type&&t.type.tabsRole===e}}var a=o("Tab"),s=o("TabList"),l=o("TabPanel");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){h(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function p(e,t){return n.Children.map(e,(function(e){return null===e?null:function(e){return a(e)||s(e)||l(e)}(e)?t(e):e.props&&e.props.children&&"object"===typeof e.props.children?Object(n.cloneElement)(e,d(d({},e.props),{},{children:p(e.props.children,t)})):e}))}function u(e,t){return n.Children.forEach(e,(function(e){null!==e&&(a(e)||l(e)?t(e):e.props&&e.props.children&&"object"===typeof e.props.children&&(s(e)&&t(e),u(e.props.children,t)))}))}function f(e){var t,i,n="";if("string"===typeof e||"number"===typeof e)n+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=f(e[t]))&&(n&&(n+=" "),n+=i);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}var g,m=function(){for(var e,t,i=0,n="";i<arguments.length;)(e=arguments[i++])&&(t=f(e))&&(n&&(n+=" "),n+=t);return n},v=0;function y(){return"react-tabs-"+v++}function b(e){var t=0;return u(e,(function(e){a(e)&&t++})),t}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function x(e){return e&&"getAttribute"in e}function O(e){return x(e)&&"tab"===e.getAttribute("role")}function S(e){return x(e)&&"true"===e.getAttribute("aria-disabled")}try{g=!("undefined"===typeof window||!window.document||!window.document.activeElement)}catch(L){g=!1}var C=function(e){var t,i;function o(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).tabNodes=[],t.handleKeyDown=function(e){var i=t.props.direction;if(t.isTabFromContainer(e.target)){var n=t.props.selectedIndex,r=!1,o=!1;32!==e.keyCode&&13!==e.keyCode||(r=!0,o=!1,t.handleClick(e)),37===e.keyCode||38===e.keyCode?(n="rtl"===i?t.getNextTab(n):t.getPrevTab(n),r=!0,o=!0):39===e.keyCode||40===e.keyCode?(n="rtl"===i?t.getPrevTab(n):t.getNextTab(n),r=!0,o=!0):35===e.keyCode?(n=t.getLastTab(),r=!0,o=!0):36===e.keyCode&&(n=t.getFirstTab(),r=!0,o=!0),r&&e.preventDefault(),o&&t.setSelected(n,e)}},t.handleClick=function(e){var i=e.target;do{if(t.isTabFromContainer(i)){if(S(i))return;var n=[].slice.call(i.parentNode.children).filter(O).indexOf(i);return void t.setSelected(n,e)}}while(null!=(i=i.parentNode))},t}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var c=o.prototype;return c.setSelected=function(e,t){if(!(e<0||e>=this.getTabsCount())){var i=this.props;(0,i.onSelect)(e,i.selectedIndex,t)}},c.getNextTab=function(e){for(var t=this.getTabsCount(),i=e+1;i<t;i++)if(!S(this.getTab(i)))return i;for(var n=0;n<e;n++)if(!S(this.getTab(n)))return n;return e},c.getPrevTab=function(e){for(var t=e;t--;)if(!S(this.getTab(t)))return t;for(t=this.getTabsCount();t-- >e;)if(!S(this.getTab(t)))return t;return e},c.getFirstTab=function(){for(var e=this.getTabsCount(),t=0;t<e;t++)if(!S(this.getTab(t)))return t;return null},c.getLastTab=function(){for(var e=this.getTabsCount();e--;)if(!S(this.getTab(e)))return e;return null},c.getTabsCount=function(){return b(this.props.children)},c.getPanelsCount=function(){return function(e){var t=0;return u(e,(function(e){l(e)&&t++})),t}(this.props.children)},c.getTab=function(e){return this.tabNodes["tabs-"+e]},c.getChildren=function(){var e=this,t=0,i=this.props,o=i.children,c=i.disabledTabClassName,d=i.focus,h=i.forceRenderTabPanel,u=i.selectedIndex,f=i.selectedTabClassName,m=i.selectedTabPanelClassName;this.tabIds=this.tabIds||[],this.panelIds=this.panelIds||[];for(var v=this.tabIds.length-this.getTabsCount();v++<0;)this.tabIds.push(y()),this.panelIds.push(y());return p(o,(function(i){var o=i;if(s(i)){var v=0,y=!1;g&&(y=r.a.Children.toArray(i.props.children).filter(a).some((function(t,i){return document.activeElement===e.getTab(i)}))),o=Object(n.cloneElement)(i,{children:p(i.props.children,(function(t){var i="tabs-"+v,r=u===v,o={tabRef:function(t){e.tabNodes[i]=t},id:e.tabIds[v],panelId:e.panelIds[v],selected:r,focus:r&&(d||y)};return f&&(o.selectedClassName=f),c&&(o.disabledClassName=c),v++,Object(n.cloneElement)(t,o)}))})}else if(l(i)){var b={id:e.panelIds[t],tabId:e.tabIds[t],selected:u===t};h&&(b.forceRender=h),m&&(b.selectedClassName=m),t++,o=Object(n.cloneElement)(i,b)}return o}))},c.isTabFromContainer=function(e){if(!O(e))return!1;var t=e.parentElement;do{if(t===this.node)return!0;if(t.getAttribute("data-tabs"))break;t=t.parentElement}while(t);return!1},c.render=function(){var e=this,t=this.props,i=(t.children,t.className),n=(t.disabledTabClassName,t.domRef),o=(t.focus,t.forceRenderTabPanel,t.onSelect,t.selectedIndex,t.selectedTabClassName,t.selectedTabPanelClassName,function(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(t,["children","className","disabledTabClassName","domRef","focus","forceRenderTabPanel","onSelect","selectedIndex","selectedTabClassName","selectedTabPanelClassName"]));return r.a.createElement("div",w({},o,{className:m(i),onClick:this.handleClick,onKeyDown:this.handleKeyDown,ref:function(t){e.node=t,n&&n(t)},"data-tabs":!0}),this.getChildren())},o}(n.Component);C.defaultProps={className:"react-tabs",focus:!1},C.propTypes={};var P=function(e){var t,i;function n(t){var i;return(i=e.call(this,t)||this).handleSelected=function(e,t,n){var r=i.props.onSelect,o=i.state.mode;if("function"!==typeof r||!1!==r(e,t,n)){var a={focus:"keydown"===n.type};1===o&&(a.selectedIndex=e),i.setState(a)}},i.state=n.copyPropsToState(i.props,{},t.defaultFocus),i}return i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,n.getDerivedStateFromProps=function(e,t){return n.copyPropsToState(e,t)},n.getModeFromProps=function(e){return null===e.selectedIndex?1:0},n.copyPropsToState=function(e,t,i){void 0===i&&(i=!1);var r={focus:i,mode:n.getModeFromProps(e)};if(1===r.mode){var o=b(e.children)-1,a=null;a=null!=t.selectedIndex?Math.min(t.selectedIndex,o):e.defaultIndex||0,r.selectedIndex=a}return r},n.prototype.render=function(){var e=this.props,t=e.children,i=(e.defaultIndex,e.defaultFocus,function(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,["children","defaultIndex","defaultFocus"])),n=this.state,o=n.focus,a=n.selectedIndex;return i.focus=o,i.onSelect=this.handleSelected,null!=a&&(i.selectedIndex=a),r.a.createElement(C,i,t)},n}(n.Component);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}P.defaultProps={defaultFocus:!1,forceRenderTabPanel:!1,selectedIndex:null,defaultIndex:null},P.propTypes={},P.tabsRole="Tabs";var I=function(e){var t,i;function n(){return e.apply(this,arguments)||this}return i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,n.prototype.render=function(){var e=this.props,t=e.children,i=e.className,n=function(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,["children","className"]);return r.a.createElement("ul",j({},n,{className:m(i),role:"tablist"}),t)},n}(n.Component);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}I.defaultProps={className:"react-tabs__tab-list"},I.propTypes={},I.tabsRole="TabList";var T="react-tabs__tab",A=function(e){var t,i;function n(){return e.apply(this,arguments)||this}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=n.prototype;return o.componentDidMount=function(){this.checkFocus()},o.componentDidUpdate=function(){this.checkFocus()},o.checkFocus=function(){var e=this.props,t=e.selected,i=e.focus;t&&i&&this.node.focus()},o.render=function(){var e,t=this,i=this.props,n=i.children,o=i.className,a=i.disabled,s=i.disabledClassName,l=(i.focus,i.id),c=i.panelId,d=i.selected,h=i.selectedClassName,p=i.tabIndex,u=i.tabRef,f=function(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(i,["children","className","disabled","disabledClassName","focus","id","panelId","selected","selectedClassName","tabIndex","tabRef"]);return r.a.createElement("li",E({},f,{className:m(o,(e={},e[h]=d,e[s]=a,e)),ref:function(e){t.node=e,u&&u(e)},role:"tab",id:l,"aria-selected":d?"true":"false","aria-disabled":a?"true":"false","aria-controls":c,tabIndex:p||(d?"0":null)}),n)},n}(n.Component);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}A.defaultProps={className:T,disabledClassName:T+"--disabled",focus:!1,id:null,panelId:null,selected:!1,selectedClassName:T+"--selected"},A.propTypes={},A.tabsRole="Tab";var k="react-tabs__tab-panel",M=function(e){var t,i;function n(){return e.apply(this,arguments)||this}return i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,n.prototype.render=function(){var e,t=this.props,i=t.children,n=t.className,o=t.forceRender,a=t.id,s=t.selected,l=t.selectedClassName,c=t.tabId,d=function(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(t,["children","className","forceRender","id","selected","selectedClassName","tabId"]);return r.a.createElement("div",D({},d,{className:m(n,(e={},e[l]=s,e)),role:"tabpanel",id:a,"aria-labelledby":c}),o||s?i:null)},n}(n.Component);M.defaultProps={className:k,forceRender:!1,selectedClassName:"react-tabs__tab-panel--selected"},M.propTypes={},M.tabsRole="TabPanel"},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(17);function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(n.a)(e,t)}},function(e,t,i){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}i.d(t,"a",(function(){return l}));var r=i(18);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=i(19);function s(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?Object(a.a)(e):t}function l(e){var t=Object(r.a)();return function(){var i,r=n(e);if(t){var o=n(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return s(this,i)}}},function(e,t,i){"use strict";i.d(t,"b",(function(){return Pu})),i.d(t,"c",(function(){return u})),i.d(t,"e",(function(){return ne})),i.d(t,"a",(function(){return oh})),i.d(t,"d",(function(){return Lp}));var n=i(3),r=i(0),o=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),a=["alt","className","disabled","form","id","readOnly","style","tabIndex","title","type","name","onClick","onFocus","onBlur"],s=["accordion","tab","splitter"],l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.attrKeys=[],t.cachedTimeOut=0,t.isAppendCalled=!1,t.initRenderCalled=!1,t.isReactForeceUpdate=!1,t.isReact=!0,t}return o(t,e),t.prototype.componentDidMount=function(){this.refreshChild(!0),this.canDelayUpdate=-1!==s.indexOf(this.getModuleName()),this.renderReactComponent(),this.portals&&this.portals.length&&this.renderReactTemplates()},t.prototype.renderReactComponent=function(){var e=this.reactElement;e&&(this.isAppendCalled=!0,this.appendTo(e))},t.prototype.shouldComponentUpdate=function(e){return this.initRenderCalled?(this.isAppendCalled||(clearTimeout(this.cachedTimeOut),this.isAppendCalled=!0,this.appendTo(this.reactElement)),this.updateProperties(e),!0):(this.updateProperties(e,!0),!0)},t.prototype.updateProperties=function(e,t){for(var i=this,n=Object(r.C)({},e),o=0,a=Object.keys(e);o<a.length;o++){var s=a[o],l="className"===s;"children"!==s&&(l||Object(r.J)(this.htmlattributes[s])||this.htmlattributes[s]===n[s]||(this.htmlattributes[s]=n[s]),this.compareValues(this.props[s],e[s])?delete n[s]:-1!==this.attrKeys.indexOf(s)&&(l?(this.element.classList.remove(this.props[s]),this.element.classList.add(n[s])):"disabled"!==s&&delete n[s]))}n.children&&delete n.children,this.initRenderCalled&&(this.canDelayUpdate||this.props.delayUpdate)?setTimeout((function(){i.refreshProperties(n,e,t)})):this.refreshProperties(n,e,t)},t.prototype.refreshProperties=function(e,t,i){Object.keys(e).length&&(i||this.processComplexTemplate(e,this),this.setProperties(e,i)),this.refreshChild(i,t)},t.prototype.processComplexTemplate=function(e,t){var i=t.complexTemplate;if(i)for(var n in i){var o=i[n];e[n]&&Object(r.X)(o,Object(r.H)(n,e),e)}},t.prototype.getDefaultAttributes=function(){var e=this;this.isReact=!0;var i=Object.keys(this.props);this.htmlattributes||(this.htmlattributes={}),this.attrKeys=a.concat(this.controlAttributes||[]);for(var n=0,r=i;n<r.length;n++){var o=r[n];-1===o.indexOf("data-")&&-1===o.indexOf("aria-")&&-1===this.attrKeys.indexOf(o)||this.htmlattributes[o]!==this.props[o]&&(this.htmlattributes[o]=this.props[o])}if(!this.htmlattributes.ref){this.htmlattributes.ref=function(t){e.reactElement=t};-1!==["autocomplete","combobox","dropdownlist","dropdowntree","multiselect","listbox","colorpicker","numerictextbox","textbox","uploader","maskedtextbox","slider","datepicker","datetimepicker","daterangepicker","timepicker"].indexOf(this.getModuleName())&&(this.htmlattributes.key=""+t.reactUid,t.reactUid++)}return this.htmlattributes},t.prototype.trigger=function(e,t,i){var n=this;if(!0!==this.isDestroyed){"change"!==e&&"input"!==e||this.props.onChange&&t.event&&this.props.onChange.call(void 0,{syntheticEvent:t.event,nativeEvent:{text:t.value},value:t.value,target:this});var r=this.isProtectedOnChange;this.isProtectedOnChange=!1,"created"===e?setTimeout((function(){n.isDestroyed||n.modelObserver.notify(e,t,i)})):this.modelObserver.notify(e,t,i),this.isProtectedOnChange=r}},t.prototype.compareValues=function(e,t){if(typeof e===typeof t){if(e===t)return!0;if((!Object(r.J)(e)&&e.constructor)!==(!Object(r.J)(t)&&t.constructor))return!1;if(e instanceof Date||e instanceof RegExp||e instanceof String||e instanceof Number)return e.toString()===t.toString();if(Object(r.K)(e)||Array.isArray(e)){var i=e,n=t;return Object(r.K)(i)&&(i=[e],n=[t]),this.compareObjects(i,n).status}}return!1},t.prototype.compareObjects=function(e,t,i){var n=!0,r=[];if(e.length===t.length)for(var o=0,a=t.length;o<a;o++){for(var s={},l=e[o],c=t[o],d=0,h=Object.keys(c);d<h.length;d++){var p=h[d],u=l[p],f=c[p];if(!l.hasOwnProperty(p)||!this.compareValues(f,u)){if(!i)return{status:!1};n=!1,s[p]=f}}Object.keys(s).length&&r.push({index:o,value:s,key:i})}else n=!1;return{status:n,changedProperties:r}},t.prototype.refreshChild=function(e,t){if(this.checkInjectedModules){for(var i=this.getInjectedModules()||[],n=0,o=this.getInjectedServices()||[];n<o.length;n++){var a=o[n];-1===i.indexOf(a)&&i.push(a)}this.injectedModules=i}if(this.directivekeys){var s=[],l=this.validateChildren({},this.directivekeys,t||this.props);if(l&&Object.keys(l).length){if(!e&&this.skipRefresh)for(var c=0,d=this.skipRefresh;c<d.length;c++){delete l[d[c]]}if(this.prevProperties)for(var h=Object.keys(this.prevProperties),p=0;p<h.length;p++){var u=h[p];if(l.hasOwnProperty(u)){var f=this.compareObjects(this.prevProperties[u],l[u],u);if(f.status)delete l[u];else{f.changedProperties.length&&(s=s.concat(f.changedProperties));var g={};g[u]=l[u],this.prevProperties=Object(r.C)(this.prevProperties,g)}}}else this.prevProperties=Object(r.C)({},l,{},!0);if(s.length)for(var m=0,v=s;m<v.length;m++){var y=v[m],b=Object(r.H)(y.key+"."+y.index,this);b&&b.setProperties?b.setProperties(y.value):Object(r.C)(b,y.value)}else this.setProperties(l,e)}}},t.prototype.componentWillUnmount=function(){clearTimeout(this.cachedTimeOut),this.initRenderCalled&&this.destroy()},t.prototype.renderReactTemplates=function(e){this.isReactForeceUpdate=!0,e?this.forceUpdate(e):this.forceUpdate(),this.isReactForeceUpdate=!1},t.prototype.clearTemplate=function(e,t,i){var n=this,r=[];e&&e.length?Array.prototype.forEach.call(e,(function(e){var i=0,o=0;if(n.portals.forEach((function(t){t.propName===e&&(r.push(o),o++)})),t&&n.portals[r[t[i]]].propName==e)n.portals.splice(t,1),i++;else for(var a=0;a<n.portals.length;a++)n.portals[a].propName==e&&(n.portals.splice(a,1),a--)})):this.portals=[],this.renderReactTemplates(i)},t.prototype.validateChildren=function(e,t,i){for(var r=!1,o=0,a=n.Children.toArray(i.children);o<a.length;o++){var s=a[o],l=this.getChildType(s),c=t[l];if(l&&t){var d=this.getChildProps(n.Children.toArray(s.props.children),c);d.length&&(r=!0,e[s.type.propertyName||l]=d)}}return r?e:null},t.prototype.getChildType=function(e){return e.type&&e.type.isDirective&&e.type.moduleName||""},t.prototype.getChildProps=function(e,t){for(var i=[],n=0,o=e;n<o.length;n++){var a=o[n],s=!1,l=void 0;"string"===typeof t?(s=!0,l=t):l=Object.keys(t)[0];var c=a.props;if(this.getChildType(a)===l)if(s||!c.children){var d=Object(r.C)({},c,{},!0);this.processComplexTemplate(d,a.type),i.push(d)}else{var h=this.validateChildren(Object(r.C)({},c),t[l],c)||c;h.children&&delete h.children,this.processComplexTemplate(h,a.type),i.push(h)}}return i},t.prototype.getInjectedServices=function(){for(var e=0,t=n.Children.toArray(this.props.children);e<t.length;e++){var i=t[e];if(i.type.isService)return i.props.services}return[]},t.reactUid=1,t}(n.Component);function c(e,t){t.forEach((function(t){Object.getOwnPropertyNames(t.prototype).forEach((function(i){"isMounted"!==i&&"replaceState"!==i&&(e.prototype[i]=t.prototype[i])}))}))}var d=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.render=function(){return null},t.isDirective=!0,t}(n.PureComponent),p=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p(t,e),t.prototype.render=function(){return null},t.isService=!0,t}(n.PureComponent),f=i(14),g=Object(r.F)();Object(r.W)({compile:function(e,t){return"string"===typeof e?g(e,t):function(t,i,o,a){var s,l=e,c=t;"object"===typeof l&&(l=e.template,c=Object(r.C)({},t,e.data||{})),s=a||document.createElement("div");var d=n.createElement(l,c),h=f.createPortal(d,s);if(h.propName=o,i.portals?i.portals.push(h):i.portals=[h],!a)return[s]}}});var m=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),v=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}m(t,e),t.moduleName="layer"}(h),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}m(t,e),t.propertyName="layers",t.moduleName="layers"}(h),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),y=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}v(t,e),t.moduleName="customCursor"}(h),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}v(t,e),t.propertyName="customCursor",t.moduleName="customCursors"}(h),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),b=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}y(t,e),t.moduleName="connector"}(h),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}y(t,e),t.propertyName="connectors",t.moduleName="connectors"}(h),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),w=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}b(t,e),t.moduleName="connectorFixedUserHandle"}(h),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}b(t,e),t.propertyName="fixedUserHandles",t.moduleName="connectorFixedUserHandles"}(h),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),x=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}w(t,e),t.moduleName="connectorAnnotation"}(h),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}w(t,e),t.propertyName="annotations",t.moduleName="connectorAnnotations"}(h),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),O=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}x(t,e),t.moduleName="node"}(h),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}x(t,e),t.propertyName="nodes",t.moduleName="nodes"}(h),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),S=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}O(t,e),t.moduleName="nodeFixedUserHandle"}(h),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}O(t,e),t.propertyName="fixedUserHandles",t.moduleName="nodeFixedUserHandles"}(h),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),C=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}S(t,e),t.moduleName="nodeAnnotation"}(h),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}S(t,e),t.propertyName="annotations",t.moduleName="nodeAnnotations"}(h),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),P=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}C(t,e),t.moduleName="port"}(h),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}C(t,e),t.propertyName="ports",t.moduleName="ports"}(h),function(){function e(e,t){this.width=e,this.height=t}return e.prototype.isEmpty=function(){return 0===this.height&&0===this.width},e.prototype.clone=function(){return new e(this.width,this.height)},e}()),j=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),I=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return j(t,e),t.equals=function(e,t){return e===t||!(!e||!t)&&(!e||!t||e.x===t.x&&e.y===t.y)},t.isEmptyPoint=function(e){return!e.x||!e.y},t.transform=function(e,t,i){var n={x:0,y:0};return n.x=Math.round(100*(e.x+i*Math.cos(t*Math.PI/180)))/100,n.y=Math.round(100*(e.y+i*Math.sin(t*Math.PI/180)))/100,n},t.findLength=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.findAngle=function(e,t){var i=Math.atan2(t.y-e.y,t.x-e.x);return i=180*i/Math.PI,(i%=360)<0&&(i+=360),i},t.distancePoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.getLengthFromListOfPoints=function(e){for(var t=0,i=0;i<e.length-1;i++)t+=this.distancePoints(e[i],e[i+1]);return t},t.adjustPoint=function(e,t,i,n){var r,o=i?{x:e.x,y:e.y}:{x:t.x,y:t.y};return e.x===t.x?e.y<t.y&&i||e.y>t.y&&!i?o.y+=n:o.y-=n:e.y===t.y?e.x<t.x&&i||e.x>t.x&&!i?o.x+=n:o.x-=n:i?(r=this.findAngle(e,t),o=this.transform(e,r,n)):(r=this.findAngle(t,e),o=this.transform(t,r,n)),o},t.direction=function(e,t){return Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?e.x<t.x?"Right":"Left":e.y<t.y?"Bottom":"Top"},t.prototype.getClassName=function(){return"Point"},I([Object(r.q)(0)],t.prototype,"x",void 0),I([Object(r.q)(0)],t.prototype,"y",void 0),t}(r.d);function T(e){var t,i=[],n=function(e){var t=/([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi,i=[],n=[],r={};t.lastIndex=0;var o=!1;r=t.exec(e);for(;r;){if("e"===r[1]){o=!0}else r[1]?("zm"===r[1].toLowerCase()?(i.length&&n.push(i),n.push(["Z"]),i=[r[1].substring(1,2)]):(i.length&&n.push(i),i=[r[1]]),o=!1):(i.length||(i=[]),o||i.push(Number(r[2])),o=!1);r=t.exec(e)}i.length&&n.push(i);return n}(e);if(n.length>0)for(var r=0;r<n.length;r++){var o=n[r],a="";switch((a=o[0]).toLowerCase()){case"m":for(t=1;t<o.length;t++)i.push({command:a,x:o[t],y:o[t+1]}),t+=1,"m"===a?a="l":"M"===a&&(a="L");break;case"l":case"t":for(t=1;t<o.length;t++)i.push({command:a,x:o[t],y:o[t+1]}),t+=1;break;case"h":for(t=1;t<o.length;t++)i.push({command:a,x:o[t]});break;case"v":for(t=1;t<o.length;t++)i.push({command:a,y:o[t]});break;case"z":i.push({command:a});break;case"c":for(t=1;t<o.length;t++)i.push({command:a,x1:o[t],y1:o[t+1],x2:o[t+2],y2:o[t+3],x:o[t+4],y:o[t+5]}),t+=5;break;case"s":for(t=1;t<o.length;t++)i.push({command:a,x2:o[t],y2:o[t+1],x:o[t+2],y:o[t+3]}),t+=3;break;case"q":for(t=1;t<o.length;t++)i.push({command:a,x1:o[t],y1:o[t+1],x:o[t+2],y:o[t+3]}),t+=3;break;case"a":for(t=1;t<o.length;t++)i.push({command:a,r1:o[t],r2:o[t+1],angle:o[t+2],largeArc:o[t+3],sweep:o[t+4],x:o[t+5],y:o[t+6]}),t+=6}}return i}function A(e){var t,i,n="";for(n="M"+e[0].x+" "+e[0].y,i=1;i<e.length;i++)n+="L"+(t=e[i]).x+" "+t.y;return n+="Z"}function D(e){var t,i,n,r,o,a,s,l,c,d,h=[];for(s=0,l=0,d=0,c=e.length;d<c;++d){var p,u=e[d];p=u.command,"y1"in u&&(r=u.y1),"y2"in u&&(a=u.y2),"x1"in u&&(n=u.x1),"x2"in u&&(o=u.x2),"x"in u&&(s=u.x),"y"in u&&(l=u.y);var f=h[h.length-1];switch(p){case"M":h.push({command:"M",x:s,y:l});break;case"L":h.push({command:"L",x0:t,y0:i,x:s,y:l});break;case"H":h.push({command:"L",x0:t,y0:i,x:s,y:i});break;case"V":h.push({command:"L",x0:t,y0:i,x:t,y:l});break;case"C":h.push({command:"C",x0:t,y0:i,x1:n,y1:r,x2:o,y2:a,x:s,y:l});break;case"S":if(f){var g=void 0,m={x:2*t-(g="C"===f.command||"S"===f.command?{x:f.x2,y:f.y2}:{x:t,y:i}).x,y:2*i-g.y};h.push({command:"C",x0:t,y0:i,x1:m.x,y1:m.y,x2:o,y2:a,x:s,y:l})}break;case"Q":h.push({command:"Q",x0:t,y0:i,x1:n,y1:r,x:s,y:l});break;case"T":if(f){g=void 0,m={x:2*t-(g="Q"===f.command?{x:f.x1,y:f.y1}:{x:t,y:i}).x,y:2*i-g.y};h.push({command:"Q",x0:t,y0:i,x1:m.x,y1:m.y,x:s,y:l})}break;case"A":var v=u;v.command="A",h.push(v);break;case"Z":case"z":h.push({command:"Z"}),s=t,l=i}"M"!==p&&"m"!==p||(s,l),t=s,i=l}return h}function k(e,t,i,n,r,o,a,s){var l,c,d,h,p,u,f,g,m;for(p=0,u=0,g=0,f=e.length;g<f;++g){var v=e[g],y=v.command;"x"in v&&(p=v.x),"y"in v&&(u=v.y),"y1"in v&&(c=v.y1),"y2"in v&&(h=v.y2),"x1"in v&&(l=v.x1),"x2"in v&&(d=v.x2),n?(void 0!==p&&(p=L(p,t,r,a)),void 0!==u&&(u=L(u,i,o,s)),void 0!==l&&(l=L(l,t,r,a)),void 0!==c&&(c=L(c,i,o,s)),void 0!==d&&(d=L(d,t,r,a)),void 0!==h&&(h=L(h,i,o,s))):(void 0!==p&&(p=Number((p+t).toFixed(2))),void 0!==u&&(u=Number((u+i).toFixed(2))),void 0!==l&&(l=Number((l+t).toFixed(2))),void 0!==c&&(c=Number((c+i).toFixed(2))),void 0!==d&&(d=Number((d+t).toFixed(2))),void 0!==h&&(h=Number((h+i).toFixed(2)))),(m=M(v,y,{x:p,y:u,x1:l,y1:c,x2:d,y2:h,r1:v.r1,r2:v.r2},n,t,i))&&(e[g]=m),"M"!==y&&"m"!==y||(p,u)}return z(e)}function M(e,t,i,n,r,o){switch(t){case"M":case"L":e.x=i.x,e.y=i.y;break;case"H":e.x=i.x;break;case"V":e.y=i.y;break;case"C":e.x=i.x,e.y=i.y,e.x1=i.x1,e.y1=i.y1,e.x2=i.x2,e.y2=i.y2;break;case"S":e.x=i.x,e.y=i.y,e.x2=i.x2,e.y2=i.y2;break;case"Q":e.x=i.x,e.y=i.y,e.x1=i.x1,e.y1=i.y1;break;case"T":e.x=i.x,e.y=i.y;break;case"A":var a=i.r1,s=i.r2;n&&(i.r1=a*=r,i.r2=s*=o),e.x=i.x,e.y=i.y,e.r1=i.r1,e.r2=i.r2;break;case"z":case"Z":e={command:"Z"}}return e}function L(e,t,i,n){return e!==i?e=n!==i?e*t-(Number(i)*t-Number(i))+(n-Number(i)):Number(e)*t-(Number(i)*t-Number(i)):n!==i&&(e=n),Number(e.toFixed(2))}function R(e){var t,i,n,r,o,a,s,l,c,d;for(s=0,l=0,d=0,c=e.length;d<c;++d){var h=e[d],p=h.command;if(/[MLHVCSQTA]/.test(p))"x"in h&&(h.x=s=h.x),"y"in h&&(h.y=l=h.y);else{"x1"in h&&(h.x1=n=s+h.x1),"x2"in h&&(h.x2=o=s+h.x2),"y1"in h&&(h.y1=r=l+h.y1),"y2"in h&&(h.y2=a=l+h.y2),"x"in h&&(h.x=s+=h.x),"y"in h&&(h.y=l+=h.y);var u=void 0;switch(p){case"m":case"M":u={command:"M",x:s,y:l};break;case"l":case"L":u={command:"L",x:s,y:l};break;case"h":case"H":u={command:"H",x:s};break;case"v":case"V":u={command:"V",y:l};break;case"c":case"C":u={command:"C",x:s,y:l,x1:n,y1:r,x2:o,y2:a};break;case"s":case"S":u={command:"S",x:s,y:l,x2:o,y2:a};break;case"q":case"Q":u={command:"Q",x:s,y:l,x1:n,y1:r};break;case"t":case"T":u={command:"T",x:s,y:l};break;case"a":case"A":(u={command:"A",x:s,y:l}).r1=h.r1,u.r2=h.r2,u.angle=h.angle,u.largeArc=h.largeArc,u.sweep=h.sweep;break;case"z":case"Z":u={command:"Z"},s=t,l=i,u=e[d]}u&&(e[d]=u)}"M"!==p&&"m"!==p||(t=s,i=l)}return e}function z(e){var t,i="";for(t=0;t<e.length;t++)i+=0===t?N(e[t]):" "+N(e[t]);return i}function N(e){var t="";switch(e.command){case"Z":case"z":t=e.command;break;case"M":case"m":case"L":case"l":t=e.command+" "+e.x+" "+e.y;break;case"C":case"c":t=e.command+" "+e.x1+" "+e.y1+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y;break;case"Q":case"q":t=e.command+" "+e.x1+" "+e.y1+" "+e.x+" "+e.y;break;case"A":case"a":var i=e.command,n=e.angle,r=e.largeArc?"1":"0",o=e.sweep?"1":"0";t=i+" "+e.r1+" "+e.r2+" "+n+" "+r+" "+o+" "+e.x+" "+e.y;break;case"H":case"h":t=e.command+" "+e.x;break;case"V":case"v":t=e.command+" "+e.y;break;case"S":case"s":t=e.command+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y;break;case"T":case"t":t=e.command+" "+e.x+" "+e.y}return t}var B,_=function(){function e(e,t,i,n){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===e||void 0===t?(e=t=Number.MAX_VALUE,i=n=0):(void 0===i&&(i=0),void 0===n&&(n=0)),this.x=e,this.y=t,this.width=i,this.height=n}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return{x:this.left,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return{x:this.right,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return{x:this.left,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return{x:this.right,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"middleLeft",{get:function(){return{x:this.left,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"middleRight",{get:function(){return{x:this.right,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topCenter",{get:function(){return{x:this.x+this.width/2,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomCenter",{get:function(){return{x:this.x+this.width/2,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),e.prototype.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},e.prototype.uniteRect=function(e){var t=Math.max(Number.NaN===this.right||this.x===Number.MAX_VALUE?e.right:this.right,e.right),i=Math.max(Number.NaN===this.bottom||this.y===Number.MAX_VALUE?e.bottom:this.bottom,e.bottom);return this.x=Math.min(this.left,e.left),this.y=Math.min(this.top,e.top),this.width=t-this.x,this.height=i-this.y,this},e.prototype.unitePoint=function(e){if(this.x===Number.MAX_VALUE)return this.x=e.x,void(this.y=e.y);var t=Math.min(this.left,e.x),i=Math.min(this.top,e.y),n=Math.max(this.right,e.x),r=Math.max(this.bottom,e.y);this.x=t,this.y=i,this.width=n-this.x,this.height=r-this.y},e.prototype.Inflate=function(e){return this.x-=e,this.y-=e,this.width+=2*e,this.height+=2*e,this},e.prototype.intersects=function(e){return!(this.right<e.left||this.left>e.right||this.top>e.bottom||this.bottom<e.top)},e.prototype.containsRect=function(e){return this.left<=e.left&&this.right>=e.right&&this.top<=e.top&&this.bottom>=e.bottom},e.prototype.containsPoint=function(e,t){return void 0===t&&(t=0),this.left-t<=e.x&&this.right+t>=e.x&&this.top-t<=e.y&&this.bottom+t>=e.y},e.toBounds=function(t){for(var i=new e,n=0,r=t;n<r.length;n++){var o=r[n];i.unitePoint(o)}return i},e.empty=new e(Number.MAX_VALUE,Number.MIN_VALUE,0,0),e}();!function(e){e[e.Identity=0]="Identity",e[e.Translation=1]="Translation",e[e.Scaling=2]="Scaling",e[e.Unknown=4]="Unknown"}(B||(B={}));var H=function(e,t,i,n,r,o,a){this.m11=e,this.m12=t,this.m21=i,this.m22=n,this.offsetX=r,this.offsetY=o,this.type=a};function W(){return new H(1,0,0,1,0,0,B.Identity)}function F(e,t){var i=function(e,t,i){switch(e.type){case B.Identity:break;case B.Translation:t+=e.offsetX,i+=e.offsetY;break;case B.Scaling:t*=e.m11,i*=e.m22;break;case B.Translation|B.Scaling:t*=e.m11,t+=e.offsetX,i*=e.m22,i+=e.offsetY;break;default:var n=i*e.m21+e.offsetX,r=t*e.m12+e.offsetY;t*=e.m11,t+=n,i*=e.m22,i+=r}return{x:t,y:i}}(e,t.x,t.y);return{x:Math.round(100*i.x)/100,y:Math.round(100*i.y)/100}}function q(e,t,i,n){Y(e,function(e,t,i){var n=W(),r=Math.sin(e),o=Math.cos(e),a=t*(1-o)+i*r,s=i*(1-o)-t*r;return n.type=B.Unknown,X(n,o,r,-r,o,a,s),n}(.017453292519943295*(t%=360),i||0,n||0))}function U(e,t,i,n,r){void 0===n&&(n=0),void 0===r&&(r=0),Y(e,function(e,t,i,n){var r=W();return r.type=i||n?B.Scaling|B.Translation:B.Scaling,X(r,e,0,0,t,i-e*i,n-t*n),r}(t,i,n,r))}function V(e,t,i){return e.type&B.Identity?(e.type=B.Translation,void X(e,1,0,0,1,t,i)):e.type&B.Unknown?(e.offsetX+=t,void(e.offsetY+=i)):(e.offsetX+=t,e.offsetY+=i,void(e.type|=B.Translation))}function Y(e,t){var i=e.type,n=t.type;if(n!==B.Identity){if(i===B.Identity)return G(e,t),void(e.type=t.type);if(n===B.Translation)return e.offsetX+=t.offsetX,e.offsetY+=t.offsetY,void(i!==B.Unknown&&(e.type|=B.Translation));if(i!==B.Translation){var r=i<<4|n;switch(r){case 34:return e.m11*=t.m11,void(e.m22*=t.m22);case 35:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX=t.offsetX,e.offsetY=t.offsetY,void(e.type=B.Translation|B.Scaling);case 36:break;default:switch(r){case 50:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX*=t.m11,void(e.offsetY*=t.m22);case 51:return e.m11*=t.m11,e.m22*=t.m22,e.offsetX=t.m11*e.offsetX+t.offsetX,void(e.offsetY=t.m22*e.offsetY+t.offsetY);case 52:break;default:switch(r){case 66:case 67:case 68:break;default:return}}}var o=W();return X(o,e.m11*t.m11+e.m12*t.m21,e.m11*t.m12+e.m12*t.m22,e.m21*t.m11+e.m22*t.m21,e.m21*t.m12+e.m22*t.m22,e.offsetX*t.m11+e.offsetY*t.m21+t.offsetX,e.offsetX*t.m12+e.offsetY*t.m22+t.offsetY),o.m21||o.m12?o.type=B.Unknown:((o.m11&&1!==o.m11||o.m22&&1!==o.m22)&&(o.type=B.Scaling),(o.offsetX||o.offsetY)&&(o.type|=B.Translation),(o.type&(B.Translation|B.Scaling))===B.Identity&&(o.type=B.Identity),o.type=B.Scaling|B.Translation),G(e,o),void(e.type=o.type)}var a=e.offsetX,s=e.offsetY;e.offsetX=a*t.m11+s*t.m21+t.offsetX,e.offsetY=a*t.m12+s*t.m22+t.offsetY,n!==B.Unknown?e.type=B.Translation|B.Scaling:e.type=B.Unknown}}function X(e,t,i,n,r,o,a){e.m11=t,e.m12=i,e.m21=n,e.m22=r,e.offsetX=o,e.offsetY=a}function G(e,t){e.m11=t.m11,e.m12=t.m12,e.m21=t.m21,e.m22=t.m22,e.offsetX=t.offsetX,e.offsetY=t.offsetY,e.type=t.type}var Z,J,Q,$,K,ee,te,ie,ne,re,oe,ae,se,le,ce,de,he,pe,ue,fe,ge,me,ve,ye,be=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),we=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},xe=function(e){if(e){if(Object(r.I)())return Ie;switch(e.type){case"Linear":return Ee;case"Radial":return Te;default:return Ee}}return Ee},Oe=function(e,t,i,n){this.left=e,this.right=t,this.top=i,this.bottom=n},Se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return be(t,e),we([Object(r.q)(0)],t.prototype,"left",void 0),we([Object(r.q)(0)],t.prototype,"right",void 0),we([Object(r.q)(0)],t.prototype,"top",void 0),we([Object(r.q)(0)],t.prototype,"bottom",void 0),t}(r.d),Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return be(t,e),we([Object(r.q)(45)],t.prototype,"angle",void 0),we([Object(r.q)(5)],t.prototype,"distance",void 0),we([Object(r.q)(.7)],t.prototype,"opacity",void 0),we([Object(r.q)("lightgrey")],t.prototype,"color",void 0),t}(r.d),Pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return be(t,e),t.prototype.getClassName=function(){return"Stop"},we([Object(r.q)("")],t.prototype,"color",void 0),we([Object(r.q)(0)],t.prototype,"offset",void 0),we([Object(r.q)(1)],t.prototype,"opacity",void 0),t}(r.d),je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return be(t,e),we([Object(r.e)([],Pe)],t.prototype,"stops",void 0),we([Object(r.q)("None")],t.prototype,"type",void 0),we([Object(r.q)("")],t.prototype,"id",void 0),t}(r.d),Ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return be(t,e),we([Object(r.q)(0)],t.prototype,"x1",void 0),we([Object(r.q)(0)],t.prototype,"x2",void 0),we([Object(r.q)(0)],t.prototype,"y1",void 0),we([Object(r.q)(0)],t.prototype,"y2",void 0),we([Object(r.q)(0)],t.prototype,"cx",void 0),we([Object(r.q)(0)],t.prototype,"cy",void 0),we([Object(r.q)(0)],t.prototype,"fx",void 0),we([Object(r.q)(0)],t.prototype,"fy",void 0),we([Object(r.q)(50)],t.prototype,"r",void 0),t}(je),Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return be(t,e),we([Object(r.q)(0)],t.prototype,"x1",void 0),we([Object(r.q)(0)],t.prototype,"x2",void 0),we([Object(r.q)(0)],t.prototype,"y1",void 0),we([Object(r.q)(0)],t.prototype,"y2",void 0),t}(je),Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return be(t,e),we([Object(r.q)(0)],t.prototype,"cx",void 0),we([Object(r.q)(0)],t.prototype,"cy",void 0),we([Object(r.q)(0)],t.prototype,"fx",void 0),we([Object(r.q)(0)],t.prototype,"fy",void 0),we([Object(r.q)(50)],t.prototype,"r",void 0),t}(je),Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return be(t,e),we([Object(r.q)("white")],t.prototype,"fill",void 0),we([Object(r.q)("black")],t.prototype,"strokeColor",void 0),we([Object(r.q)("")],t.prototype,"strokeDashArray",void 0),we([Object(r.q)(1)],t.prototype,"strokeWidth",void 0),we([Object(r.q)(1)],t.prototype,"opacity",void 0),we([Object(r.h)(xe)],t.prototype,"gradient",void 0),t}(r.d),De=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return be(t,e),we([Object(r.q)("transparent")],t.prototype,"fill",void 0),t}(Ae),ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return be(t,e),we([Object(r.q)("black")],t.prototype,"color",void 0),we([Object(r.q)("Arial")],t.prototype,"fontFamily",void 0),we([Object(r.q)(12)],t.prototype,"fontSize",void 0),we([Object(r.q)(!1)],t.prototype,"italic",void 0),we([Object(r.q)(!1)],t.prototype,"bold",void 0),we([Object(r.q)("CollapseSpace")],t.prototype,"whiteSpace",void 0),we([Object(r.q)("WrapWithOverflow")],t.prototype,"textWrapping",void 0),we([Object(r.q)("Center")],t.prototype,"textAlign",void 0),we([Object(r.q)("None")],t.prototype,"textDecoration",void 0),we([Object(r.q)("Wrap")],t.prototype,"textOverflow",void 0),we([Object(r.q)("transparent")],t.prototype,"fill",void 0),t}(Ae);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}be(t,e),we([Object(r.q)("white")],t.prototype,"fill",void 0),we([Object(r.q)("Wrap")],t.prototype,"textOverflow",void 0),we([Object(r.q)(1)],t.prototype,"strokeWidth",void 0),we([Object(r.h)(xe)],t.prototype,"gradient",void 0),we([Object(r.q)(1)],t.prototype,"opacity",void 0),we([Object(r.q)(!1)],t.prototype,"italic",void 0),we([Object(r.q)("")],t.prototype,"strokeDashArray",void 0),we([Object(r.q)("black")],t.prototype,"color",void 0),we([Object(r.q)(12)],t.prototype,"fontSize",void 0),we([Object(r.q)("Arial")],t.prototype,"fontFamily",void 0),we([Object(r.q)("CollapseSpace")],t.prototype,"whiteSpace",void 0),we([Object(r.q)("Center")],t.prototype,"textAlign",void 0),we([Object(r.q)("None")],t.prototype,"textDecoration",void 0),we([Object(r.q)(!1)],t.prototype,"bold",void 0),we([Object(r.q)("black")],t.prototype,"strokeColor",void 0),we([Object(r.q)("WrapWithOverflow")],t.prototype,"textWrapping",void 0)}(r.d);!function(e){e[e.Default=0]="Default",e[e.expandNode=2]="expandNode",e[e.interaction=4]="interaction",e[e.GroupingInProgress=8]="GroupingInProgress",e[e.GroupClipboardInProcess=16]="GroupClipboardInProcess",e[e.ClearObject=32]="ClearObject"}(Z||(Z={})),function(e){e[e.Visible=1]="Visible",e[e.Hidden=2]="Hidden",e[e.Hover=4]="Hover",e[e.Connect=8]="Connect"}(J||(J={})),function(e){e[e.None=0]="None",e[e.ShowHorizontalLines=1]="ShowHorizontalLines",e[e.ShowVerticalLines=2]="ShowVerticalLines",e[e.ShowLines=3]="ShowLines",e[e.SnapToHorizontalLines=4]="SnapToHorizontalLines",e[e.SnapToVerticalLines=8]="SnapToVerticalLines",e[e.SnapToLines=12]="SnapToLines",e[e.SnapToObject=16]="SnapToObject",e[e.All=31]="All"}(Q||(Q={})),function(e){e[e.None=1]="None",e[e.ConnectorSourceThumb=2]="ConnectorSourceThumb",e[e.ConnectorTargetThumb=4]="ConnectorTargetThumb",e[e.ResizeSouthEast=8]="ResizeSouthEast",e[e.ResizeSouthWest=16]="ResizeSouthWest",e[e.ResizeNorthEast=32]="ResizeNorthEast",e[e.ResizeNorthWest=64]="ResizeNorthWest",e[e.ResizeEast=128]="ResizeEast",e[e.ResizeWest=256]="ResizeWest",e[e.ResizeSouth=512]="ResizeSouth",e[e.ResizeNorth=1024]="ResizeNorth",e[e.Rotate=2048]="Rotate",e[e.UserHandle=4096]="UserHandle",e[e.ToolTip=8192]="ToolTip",e[e.ResizeAll=2046]="ResizeAll",e[e.All=16382]="All"}($||($={})),function(e){e.SamePoint="SamePoint",e.DifferentPoint="DifferentPoint"}(K||(K={})),function(e){e.Linear="Linear",e.Nonlinear="Nonlinear"}(ee||(ee={})),function(e){e[e.None=1]="None",e[e.Select=2]="Select",e[e.Delete=4]="Delete",e[e.Drag=8]="Drag",e[e.DragSourceEnd=16]="DragSourceEnd",e[e.DragTargetEnd=32]="DragTargetEnd",e[e.DragSegmentThumb=64]="DragSegmentThumb",e[e.AllowDrop=128]="AllowDrop",e[e.Bridging=256]="Bridging",e[e.BridgeObstacle=512]="BridgeObstacle",e[e.InheritBridging=1024]="InheritBridging",e[e.PointerEvents=2048]="PointerEvents",e[e.Tooltip=4096]="Tooltip",e[e.InheritTooltip=8192]="InheritTooltip",e[e.Interaction=4218]="Interaction",e[e.ReadOnly=16384]="ReadOnly",e[e.LineRouting=32768]="LineRouting",e[e.InheritLineRouting=65536]="InheritLineRouting",e[e.ConnectToNearByNode=131072]="ConnectToNearByNode",e[e.ConnectToNearByPort=262144]="ConnectToNearByPort",e[e.ConnectToNearByElement=393216]="ConnectToNearByElement",e[e.Default=470590]="Default"}(te||(te={})),function(e){e[e.ReadOnly=2]="ReadOnly",e[e.InheritReadOnly=4]="InheritReadOnly",e[e.Select=8]="Select",e[e.Drag=16]="Drag",e[e.Resize=32]="Resize",e[e.Rotate=64]="Rotate",e[e.Interaction=120]="Interaction",e[e.None=0]="None"}(ie||(ie={})),function(e){e[e.None=0]="None",e[e.Select=2]="Select",e[e.Drag=4]="Drag",e[e.Rotate=8]="Rotate",e[e.Shadow=16]="Shadow",e[e.PointerEvents=32]="PointerEvents",e[e.Delete=64]="Delete",e[e.InConnect=128]="InConnect",e[e.OutConnect=256]="OutConnect",e[e.Individual=512]="Individual",e[e.Expandable=1024]="Expandable",e[e.AllowDrop=2048]="AllowDrop",e[e.Inherit=78]="Inherit",e[e.ResizeNorthEast=4096]="ResizeNorthEast",e[e.ResizeEast=8192]="ResizeEast",e[e.ResizeSouthEast=16384]="ResizeSouthEast",e[e.ResizeSouth=32768]="ResizeSouth",e[e.ResizeSouthWest=65536]="ResizeSouthWest",e[e.ResizeWest=131072]="ResizeWest",e[e.ResizeNorthWest=262144]="ResizeNorthWest",e[e.ResizeNorth=524288]="ResizeNorth",e[e.Resize=1044480]="Resize",e[e.AspectRatio=1048576]="AspectRatio",e[e.Tooltip=2097152]="Tooltip",e[e.InheritTooltip=4194304]="InheritTooltip",e[e.ReadOnly=8388608]="ReadOnly",e[e.HideThumbs=16777216]="HideThumbs",e[e.AllowMovingOutsideLane=33554432]="AllowMovingOutsideLane",e[e.Default=5240814]="Default"}(ne||(ne={})),function(e){e[e.None=0]="None",e[e.ElementIsPort=2]="ElementIsPort",e[e.ElementIsGroup=4]="ElementIsGroup"}(re||(re={})),function(e){e[e.Rotate=2]="Rotate",e[e.ConnectorSource=4]="ConnectorSource",e[e.ConnectorTarget=8]="ConnectorTarget",e[e.ResizeNorthEast=16]="ResizeNorthEast",e[e.ResizeEast=32]="ResizeEast",e[e.ResizeSouthEast=64]="ResizeSouthEast",e[e.ResizeSouth=128]="ResizeSouth",e[e.ResizeSouthWest=256]="ResizeSouthWest",e[e.ResizeWest=512]="ResizeWest",e[e.ResizeNorthWest=1024]="ResizeNorthWest",e[e.ResizeNorth=2048]="ResizeNorth",e[e.Default=4094]="Default"}(oe||(oe={})),function(e){e[e.None=1]="None",e[e.Bridging=2]="Bridging",e[e.UndoRedo=4]="UndoRedo",e[e.Tooltip=8]="Tooltip",e[e.UserInteraction=16]="UserInteraction",e[e.ApiUpdate=32]="ApiUpdate",e[e.PageEditable=48]="PageEditable",e[e.Zoom=64]="Zoom",e[e.PanX=128]="PanX",e[e.PanY=256]="PanY",e[e.Pan=384]="Pan",e[e.ZoomTextEdit=512]="ZoomTextEdit",e[e.Virtualization=1024]="Virtualization",e[e.LineRouting=2048]="LineRouting",e[e.Default=500]="Default"}(ae||(ae={})),function(e){e[e.None=0]="None",e[e.SingleSelect=1]="SingleSelect",e[e.MultipleSelect=2]="MultipleSelect",e[e.ZoomPan=4]="ZoomPan",e[e.DrawOnce=8]="DrawOnce",e[e.ContinuousDraw=16]="ContinuousDraw",e[e.Default=3]="Default"}(se||(se={})),function(e){e[e.Self=1]="Self",e[e.Parent=2]="Parent"}(le||(le={})),function(e){e[e.Canvas=0]="Canvas",e[e.Svg=1]="Svg"}(ce||(ce={})),function(e){e[e.None=0]="None",e[e.Control=1]="Control",e[e.Meta=1]="Meta",e[e.Alt=2]="Alt",e[e.Shift=4]="Shift"}(de||(de={})),function(e){e[e.None=null]="None",e[e.Number0=0]="Number0",e[e.Number1=1]="Number1",e[e.Number2=2]="Number2",e[e.Number3=3]="Number3",e[e.Number4=4]="Number4",e[e.Number5=5]="Number5",e[e.Number6=6]="Number6",e[e.Number7=7]="Number7",e[e.Number8=8]="Number8",e[e.Number9=9]="Number9",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.Delete=46]="Delete",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.BackSpace=8]="BackSpace",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.Star=56]="Star",e[e.Plus=187]="Plus",e[e.Minus=189]="Minus"}(he||(he={})),function(e){e[e.Render=2]="Render",e[e.PublicMethod=4]="PublicMethod",e[e.ToolAction=8]="ToolAction",e[e.UndoRedo=16]="UndoRedo",e[e.TextEdit=32]="TextEdit",e[e.Group=64]="Group",e[e.Clear=128]="Clear",e[e.PreventClearSelection=256]="PreventClearSelection",e[e.Interactions=512]="Interactions",e[e.PreventHistory=1024]="PreventHistory",e[e.PreventIconsUpdate=2048]="PreventIconsUpdate",e[e.PreventCollectionChangeOnDragOver=4096]="PreventCollectionChangeOnDragOver",e[e.PreventZIndexOnDragging=8192]="PreventZIndexOnDragging",e[e.isGroupDragging=16384]="isGroupDragging",e[e.DragUsingMouse=32768]="DragUsingMouse",e[e.DecoratorPropertyChange=65536]="DecoratorPropertyChange"}(pe||(pe={})),function(e){e[e.None=2]="None",e[e.DrawSelectorBorder=4]="DrawSelectorBorder",e[e.PreventRenderSelector=8]="PreventRenderSelector"}(ue||(ue={})),function(e){e[e.None=0]="None",e[e.PreventDrag=2]="PreventDrag",e[e.PreventScale=4]="PreventScale",e[e.PreventDataInit=8]="PreventDataInit",e[e.hScrollbarMoved=16]="hScrollbarMoved",e[e.vScrollbarMoved=32]="vScrollbarMoved",e[e.AnimationClick=64]="AnimationClick",e[e.EnableGroupAction=128]="EnableGroupAction",e[e.PanInProgress=256]="PanInProgress",e[e.OverViewAction=512]="OverViewAction"}(fe||(fe={})),function(e){e[e.None=0]="None",e[e.PropertyChange=1024]="PropertyChange",e[e.Interaction=2048]="Interaction"}(ge||(ge={})),function(e){e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five"}(me||(me={})),function(e){e[e.collectionChange=0]="collectionChange",e[e.rotateChange=1]="rotateChange",e[e.positionChange=2]="positionChange",e[e.propertyChange=3]="propertyChange",e[e.selectionChange=4]="selectionChange",e[e.sizeChange=5]="sizeChange",e[e.drop=6]="drop",e[e.sourcePointChange=7]="sourcePointChange",e[e.targetPointChange=8]="targetPointChange",e[e.connectionChange=9]="connectionChange",e[e.animationComplete=10]="animationComplete",e[e.click=11]="click",e[e.doubleClick=12]="doubleClick",e[e.scrollChange=13]="scrollChange",e[e.dragEnter=14]="dragEnter",e[e.dragLeave=15]="dragLeave",e[e.dragOver=16]="dragOver",e[e.textEdit=17]="textEdit",e[e.paletteSelectionChange=18]="paletteSelectionChange",e[e.historyChange=19]="historyChange",e[e.mouseEnter=20]="mouseEnter",e[e.mouseLeave=21]="mouseLeave",e[e.mouseOver=22]="mouseOver",e[e.expandStateChange=23]="expandStateChange",e[e.segmentCollectionChange=24]="segmentCollectionChange",e[e.commandExecute=25]="commandExecute",e[e.historyStateChange=26]="historyStateChange",e[e.onUserHandleMouseDown=27]="onUserHandleMouseDown",e[e.onUserHandleMouseUp=28]="onUserHandleMouseUp",e[e.onUserHandleMouseEnter=29]="onUserHandleMouseEnter",e[e.onUserHandleMouseLeave=30]="onUserHandleMouseLeave",e[e.onImageLoad=31]="onImageLoad",e[e.onDoBindingInit=32]="onDoBindingInit",e[e.keyUp=33]="keyUp",e[e.keyDown=34]="keyDown",e[e.fixedUserHandleClick=35]="fixedUserHandleClick"}(ve||(ve={})),function(e){e[e.None=1]="None",e[e.Drag=2]="Drag",e[e.Draw=4]="Draw",e[e.InConnect=8]="InConnect",e[e.OutConnect=16]="OutConnect",e[e.Default=24]="Default"}(ye||(ye={}));var Me="contextMenuOpen",Le=function(){function e(){this.pivot={x:.5,y:.5},this.isDirt=!0,this.isExport=!1,this.exportScaleValue={x:0,y:0},this.exportScaleOffset={x:0,y:0},this.canApplyStyle=!0,this.visible=!0,this.offsetX=0,this.offsetY=0,this.cornerRadius=0,this.minHeight=void 0,this.minWidth=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.width=void 0,this.height=void 0,this.rotateAngle=0,this.margin={left:0,right:0,top:0,bottom:0},this.horizontalAlignment="Auto",this.verticalAlignment="Auto",this.flip="None",this.relativeMode="Point",this.transform=le.Self|le.Parent,this.style={fill:"white",strokeColor:"black",opacity:1,strokeWidth:1},this.desiredSize=new P,this.actualSize=new P,this.parentTransform=0,this.preventContainer=!1,this.isSvgRender=!1,this.bounds=new _(0,0,0,0),this.shadow=null,this.description="",this.staticSize=!1,this.isRectElement=!1,this.isCalculateDesiredSize=!0,this.flipOffset={x:0,y:0},this.elementActions=re.None,this.inversedAlignment=!0,this.position=void 0,this.unitMode=void 0,this.float=!1,this.floatingBounds=void 0}return e.prototype.setOffsetWithRespectToBounds=function(e,t,i){this.unitMode=i,this.position={x:e,y:t}},e.prototype.getAbsolutePosition=function(e){if(void 0!==this.position)return"Absolute"===this.unitMode?this.position:{x:this.position.x*e.width,y:this.position.y*e.height}},Object.defineProperty(e.prototype,"outerBounds",{get:function(){return this.floatingBounds||this.bounds},set:function(e){this.floatingBounds=e},enumerable:!0,configurable:!0}),e.prototype.measure=function(e,t,i){var n=void 0!==this.width?this.width:(e.width||0)-this.margin.left-this.margin.right,r=void 0!==this.height?this.height:(e.height||0)-this.margin.top-this.margin.bottom;return this.desiredSize=new P(n,r),this.isCalculateDesiredSize&&(this.desiredSize=this.validateDesiredSize(this.desiredSize,e)),this.desiredSize},e.prototype.arrange=function(e){return this.actualSize=e,this.updateBounds(),this.actualSize},e.prototype.updateBounds=function(){this.bounds=pc(this)},e.prototype.validateDesiredSize=function(e,t){return!this.isRectElement||this.width||this.minWidth||this.maxWidth||(e.width=50),!this.isRectElement||this.height||this.minHeight||this.maxHeight||(e.height=50),(void 0===e||void 0!==this.width&&void 0!==this.height)&&((e=e||new P).width=void 0===this.width?(t.width||0)-this.margin.left-this.margin.right:this.width,e.height=void 0===this.height?(t.height||0)-this.margin.top-this.margin.bottom:this.height),void 0!==this.minWidth&&(e.width=Math.max(e.width,this.minWidth)),void 0!==this.minHeight&&(e.height=Math.max(e.height,this.minHeight)),void 0!==this.maxWidth&&0!==this.maxWidth&&(e.width=Math.min(e.width,this.maxWidth)),void 0!==this.maxHeight&&0!==this.maxHeight&&(e.height=Math.min(e.height,this.maxHeight)),e},e}(),Re=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ze=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.padding=new Oe(0,0,0,0),t.desiredBounds=void 0,t.measureChildren=!0,t.prevRotateAngle=0,t}return Re(t,e),t.prototype.hasChildren=function(){return void 0!==this.children&&this.children.length>0},t.prototype.measure=function(e,i,n){this.desiredBounds=void 0;var r,o,a=void 0;if(this.hasChildren()){for(var s=0;s<this.children.length;s++){"Stretch"!==(r=this.children[s]).horizontalAlignment||e.width||(e.width=r.bounds.width),"Stretch"!==r.verticalAlignment||e.height||(e.height=r.bounds.height);var l="Stretch"===r.horizontalAlignment||"Stretch"===r.verticalAlignment;(this.measureChildren||l||r instanceof t&&void 0!==r.measureChildren)&&r.measure(e,i,n),o=this.GetChildrenBounds(r),"Stretch"!==r.horizontalAlignment&&"Stretch"!==r.verticalAlignment?void 0===this.desiredBounds?this.desiredBounds=o:this.desiredBounds.uniteRect(o):!this.actualSize||this.actualSize.width||this.actualSize.height||r.preventContainer||"Stretch"!==r.horizontalAlignment||"Stretch"!==r.verticalAlignment||(void 0===this.desiredBounds?this.desiredBounds=r.bounds:this.desiredBounds.uniteRect(r.bounds))}if(void 0!==this.desiredBounds&&0!==this.rotateAngle){var c={x:this.desiredBounds.x+this.desiredBounds.width*this.pivot.x,y:this.desiredBounds.y+this.desiredBounds.height*this.pivot.y},d=Cc(this.rotateAngle,void 0,void 0,c);this.desiredBounds.x=d.x-this.desiredBounds.width*this.pivot.x,this.desiredBounds.y=d.y-this.desiredBounds.height*this.pivot.y}this.desiredBounds&&(a=new P(this.desiredBounds.width,this.desiredBounds.height))}return a=this.validateDesiredSize(a,e),this.stretchChildren(a),this.desiredSize=a,a},t.prototype.arrange=function(e){var i,n=this.desiredBounds;if(n){this.offsetX,this.offsetY;if(this.offsetX=n.x+n.width*this.pivot.x,this.offsetY=n.y+n.height*this.pivot.y,this.hasChildren())for(var r=0;r<this.children.length;r++){var o=!1;"Stretch"===(i=this.children[r]).horizontalAlignment&&(i.offsetX=this.offsetX,i.parentTransform=this.parentTransform+this.rotateAngle,this.flip&&this.elementActions&re.ElementIsGroup&&(i.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-i.parentTransform:i.parentTransform),o=!0),"Stretch"===i.verticalAlignment&&(i.offsetY=this.offsetY,i.parentTransform=this.parentTransform+this.rotateAngle,o=!0),(o||this.measureChildren||i instanceof t&&void 0!==i.measureChildren)&&i.arrange(i.desiredSize)}}return this.actualSize=e,this.updateBounds(),this.prevRotateAngle=this.rotateAngle,e},t.prototype.stretchChildren=function(e){if(this.hasChildren())for(var i=0,n=this.children;i<n.length;i++){var r=n[i];"Stretch"!==r.horizontalAlignment&&void 0!==r.desiredSize.width||(r.desiredSize.width=e.width-r.margin.left-r.margin.right),"Stretch"!==r.verticalAlignment&&void 0!==r.desiredSize.height||(r.desiredSize.height=e.height-r.margin.top-r.margin.bottom),r instanceof t&&r.stretchChildren(r.desiredSize)}},t.prototype.applyPadding=function(e){e.width+=this.padding.left+this.padding.right,e.height+=this.padding.top+this.padding.bottom},t.prototype.findChildOffsetFromCenter=function(e,t){var i=function(e,t){var i=e.x+t.desiredSize.width*t.pivot.x,n=e.y+t.desiredSize.height*t.pivot.y;return{x:i,y:n}}({x:t.x-e.desiredSize.width/2,y:t.y-e.desiredSize.height/2},e);i=Cc(e.rotateAngle,t.x,t.y,i),i=Cc(this.rotateAngle+this.parentTransform,this.offsetX,this.offsetY,i),e.offsetX=i.x,e.offsetY=i.y},t.prototype.GetChildrenBounds=function(e){var t;t=e.desiredSize.clone();e.rotateAngle,this.rotateAngle;var i=e.offsetX,n=e.offsetY,r=i-t.width*e.pivot.x,o=n-t.height*e.pivot.y,a=r+t.width,s=o+t.height,l={x:r,y:o},c={x:a,y:o},d={x:r,y:s},h={x:a,y:s};return l=Cc(e.rotateAngle,e.offsetX,e.offsetY,l),c=Cc(e.rotateAngle,e.offsetX,e.offsetY,c),d=Cc(e.rotateAngle,e.offsetX,e.offsetY,d),h=Cc(e.rotateAngle,e.offsetX,e.offsetY,h),0!==this.rotateAngle&&(l=Cc(-this.rotateAngle,void 0,void 0,l),c=Cc(-this.rotateAngle,void 0,void 0,c),d=Cc(-this.rotateAngle,void 0,void 0,d),h=Cc(-this.rotateAngle,void 0,void 0,h)),_.toBounds([l,c,d,h])},t}(Le),Ne=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Be=function(e){function t(){var t=e.call(this)||this;return t.textContent="",t.canMeasure=!0,t.isLaneOrientation=!1,t.canConsiderBounds=!0,t.hyperlink={color:"blue"},t.doWrap=!0,t.textNodes=[],t.style={color:"black",fill:"transparent",strokeColor:"black",strokeWidth:1,fontFamily:"Arial",fontSize:12,whiteSpace:"CollapseSpace",textWrapping:"WrapWithOverflow",textAlign:"Center",italic:!1,bold:!1,textDecoration:"None",strokeDashArray:"",opacity:5,gradient:null,textOverflow:"Wrap"},t.style.fill="transparent",t.style.strokeColor="transparent",t}return Ne(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this.textContent},set:function(e){this.textContent!==e&&(this.textContent=e,this.isDirt=!0,this.doWrap=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.textNodes},set:function(e){this.textNodes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapBounds",{get:function(){return this.textWrapBounds},set:function(e){this.textWrapBounds=e},enumerable:!0,configurable:!0}),t.prototype.refreshTextElement=function(){this.isDirt=!0},t.prototype.measure=function(e){var t;return t=this.isDirt&&this.canMeasure?function(e,t,i,n,r){var o,a,s=new P(0,0),l=function(e,t){var i={fill:e.style.fill,stroke:e.style.strokeColor,angle:e.rotateAngle+e.parentTransform,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:e.style.strokeWidth,dashArray:e.style.strokeDashArray,opacity:e.style.opacity,shadow:e.shadow,gradient:e.style.gradient,visible:e.visible,id:e.id,description:e.description,width:t||e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5};return i.fontSize=e.style.fontSize,i.fontFamily=e.style.fontFamily,i.textOverflow=e.style.textOverflow,i.textDecoration=e.style.textDecoration,i.doWrap=e.doWrap,i.whiteSpace=Oc(e.style.whiteSpace,e.style.textWrapping),i.content=e.content,i.textWrapping=e.style.textWrapping,i.breakWord=yc(e.style.textWrapping),i.textAlign=vc(e.style.textAlign),i.color=e.style.color,i.italic=e.style.italic,i.bold=e.style.bold,i.dashArray="",i.strokeWidth=0,i.fill="",i}(e,n);e.childNodes=o=function(e,t,i){var n,r,o=[],a=0,s=t||e.content;if("nowrap"!==e.whiteSpace&&"pre"!==e.whiteSpace)if("breakall"===e.breakWord)for(n="",n+=s[0],a=0;a<s.length;a++)if((r=bc(n,e))>=e.width&&n.length>0)o[o.length]={text:n,x:0,dy:0,width:r},n="";else{(n+=s[a+1]||"").indexOf("\n")>-1&&(o[o.length]={text:n,x:0,dy:0,width:bc(n,e)},n="");var l=bc(n,e);Math.ceil(l)+2>=e.width&&n.length>0&&(o[o.length]={text:n,x:0,dy:0,width:l},n=""),a===s.length-1&&n.length>0&&(o[o.length]={text:n,x:0,dy:0,width:l},n="")}else o=function(e,t,i){var n,r,o,a,s=[],l="",c=0,d=0,h="nowrap"!==e.whiteSpace,p=(t||e.content).split("\n");for(c=0;c<p.length;c++)for("",n="NoWrap"!==e.textWrapping?p[c].split(" "):"NoWrap"===e.textWrapping?[p[c]]:p,d=0;d<n.length;d++){var u=bc(r=(l+=((0!==d||1===n.length)&&h&&l.length>0?" ":"")+n[d])+" "+(n[d+1]||""),e);Math.floor(u)>(i||e.width)-2&&l.length>0?(s[s.length]={text:l,x:0,dy:0,width:r===l?u:l===a?o:bc(l,e)},l=""):d===n.length-1&&(s[s.length]={text:l,x:0,dy:0,width:u},l=""),a=r,o=u}return s}(e,t,i);else o[o.length]={text:s,x:0,dy:0,width:bc(s,e)};return o}(l,r,e.isLaneOrientation?n:void 0),e.wrapBounds=a=function(e,t){var i,n,r={x:0,width:0},o=0;for(o=0;o<t.length;o++)n=i=t[o].width,i="left"===e.textAlign?0:"center"===e.textAlign?i>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:-i/2:"right"===e.textAlign?-i:t.length>1?0:-i/2,t[o].dy=1.2*e.fontSize,t[o].x=i,r?(r.x=Math.min(r.x,i),r.width=Math.max(r.width,n)):r={x:i,width:n};return r}(l,o),s.width=a.width,e.wrapBounds.width>=n&&"Wrap"!==l.textOverflow&&(s.width=n);return s.height=o.length*e.style.fontSize*1.2,s}(this,this.style,this.content,this.isLaneOrientation?e.height:this.width||e.width):this.desiredSize,void 0===this.width||void 0===this.height?this.desiredSize=new P(t.width,t.height):this.desiredSize=new P(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return(e.width!==this.actualSize.width||e.height!==this.actualSize.height||this.isDirt)&&(this.doWrap=!0),this.actualSize=e,this.updateBounds(),this.isDirt=!1,this.actualSize},t}(Le),_e=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),He=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.measureChildren=void 0,t}return _e(t,e),t.prototype.measure=function(t,i,n){var r=void 0,o=void 0;if(this.hasChildren()){for(var a=0,s=this.children;a<s.length;a++){var l=s[a];l instanceof Be?l.canMeasure&&(t.width=t.width||this.maxWidth||this.minWidth,l.measure(t)):l instanceof Be||l.measure(t,i,n);var c=l.desiredSize.clone();0!==l.rotateAngle&&(c=Sc(c,l.rotateAngle));var d=c.width+l.margin.right,h=c.height+l.margin.bottom,p=new _(l.margin.left,l.margin.top,d,h);if(l.float)if(void 0!==l.getAbsolutePosition(c))continue;l instanceof Be&&!(l instanceof Be&&l.canConsiderBounds)||(void 0===o?o=p:o.uniteRect(p))}if(o){var u,f;u=Math.max(o.left,0),f=Math.max(o.top,0),r=new P(o.width+u,o.height+f)}}return r=e.prototype.validateDesiredSize.call(this,r,t),e.prototype.stretchChildren.call(this,r),r.width+=this.padding.left+this.padding.right,r.height+=this.padding.top+this.padding.bottom,this.desiredSize=r,r},t.prototype.arrange=function(t,i){if(this.outerBounds=new _,this.hasChildren()){var n,r;n=this.offsetY-t.height*this.pivot.y+this.padding.top,r=this.offsetX-t.width*this.pivot.x+this.padding.left;for(var o=0,a=this.children;o<a.length;o++){var s=a[o];if(0!==(s.transform&le.Parent)){s.parentTransform=this.parentTransform+this.rotateAngle,("None"!==this.flip||this.elementActions&re.ElementIsGroup)&&(s.parentTransform="Horizontal"===this.flip||"Vertical"===this.flip?-s.parentTransform:s.parentTransform);var l,c=s.desiredSize.clone(),d=void 0,h=r,p=n;if("Point"===s.relativeMode){var u=s.getAbsolutePosition(t);void 0!==u&&(h+=u.x,p+=u.y)}l={x:(d="Object"===s.relativeMode?this.alignChildBasedOnParent(s,c,t,h,p):this.alignChildBasedOnaPoint(s,h,p)).x+c.width/2,y:d.y+c.height/2},e.prototype.findChildOffsetFromCenter.call(this,s,l)}!i||"Stretch"!==s.horizontalAlignment&&"Stretch"!==s.verticalAlignment?s instanceof Be&&s.canMeasure?(s.arrange(s.desiredSize),this.outerBounds.uniteRect(s.outerBounds)):s instanceof Be||(s.arrange(s.desiredSize),this.outerBounds.uniteRect(s.outerBounds)):s.arrange(t)}}return this.actualSize=t,this.updateBounds(),this.outerBounds.uniteRect(this.bounds),t},t.prototype.alignChildBasedOnParent=function(e,t,i,n,r){switch(e.horizontalAlignment){case"Auto":case"Left":n+=e.margin.left;break;case"Right":n+=i.width-t.width-e.margin.right;break;case"Stretch":case"Center":n+=i.width/2-t.width/2}switch(e.verticalAlignment){case"Auto":case"Top":r+=e.margin.top;break;case"Bottom":r+=i.height-t.height-e.margin.bottom;break;case"Stretch":case"Center":r+=i.height/2-t.height/2}return{x:n,y:r}},t.prototype.alignChildBasedOnaPoint=function(e,t,i){switch(t+=e.margin.left-e.margin.right,i+=e.margin.top-e.margin.bottom,e.horizontalAlignment){case"Auto":case"Left":t=e.inversedAlignment?t:t-e.desiredSize.width;break;case"Stretch":case"Center":t-=e.desiredSize.width*e.pivot.x;break;case"Right":t=e.inversedAlignment?t-e.desiredSize.width:t}switch(e.verticalAlignment){case"Auto":case"Top":i=e.inversedAlignment?i:i-e.desiredSize.height;break;case"Stretch":case"Center":i-=e.desiredSize.height*e.pivot.y;break;case"Bottom":i=e.inversedAlignment?i-e.desiredSize.height:i}return{x:t,y:i}},t}(ze);function We(e){return Fe[e.toString()]}var Fe={Rectangle:"M0,0 L50,0 L50,50 L0,50 z",Ellipse:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Hexagon:"M30,0 L60,0 L90,30 L60,60 L30,60 L0,30 L30,0 z",Parallelogram:"M30,0 L60,0 L45,30 L15,30 z",Triangle:"M45,0 L90,45 L0,45 L45,0 z",Plus:"M696.6084,158.2656 L674.8074,158.2656 L674.8074,136.4656 L658.4084,136.4656 L658.4084,158.2656 L636.6084,158.2656L636.6084,174.6646 L658.4084,174.6646 L658.4084,196.4656 L674.8074,196.4656 L674.8074,174.6646 L696.6084,174.6646L696.6084,158.2656 z",Star:"M540.3643,137.9336 L546.7973,159.7016 L570.3633,159.7296 L550.7723,171.9366 L558.9053,194.9966 L540.3643,179.4996L521.8223,194.9966 L529.9553,171.9366 L510.3633,159.7296 L533.9313,159.7016 L540.3643,137.9336 z",Pentagon:"M30,0 L60,30 L50,70 L10,70 L0,30 L30,0 z",Heptagon:"M223.7783,195.7134 L207.1303,174.8364 L213.0713,148.8034 L237.1303,137.2174 L261.1883,148.8034 L267.1303,174.8364L250.4813,195.7134 L223.7783,195.7134 z",Octagon:"M98.7319,196.4653 L81.1579,178.8923 L81.1579,154.0393 L98.7319,136.4653 L123.5849,136.4653L141.1579,154.0393 L141.1579,178.8923 L123.5849,196.4653 L98.7319,196.4653 z",Trapezoid:"M127.2842,291.4492 L95.0322,291.4492 L81.1582,256.3152 L141.1582,256.3152 L127.2842,291.4492 z",Decagon:"M657.3379,302.4141 L642.3369,291.5161 L636.6089,273.8821 L642.3369,256.2481 L657.3379,245.3511 L675.8789,245.3511L690.8789,256.2481 L696.6089,273.8821L690.8789,291.5161 L675.8789,302.4141 L657.3379,302.4141 z",RightTriangle:"M836.293,292.9238 L776.293,292.9238 L776.293,254.8408 L836.293,292.9238 z",Cylinder:"M 542.802,362.009C 542.802,368.452 525.341,373.676 503.802,373.676C 482.263,373.676 464.802,368.452 464.802,362.009L 464.802,466.484C 464.802,472.928 482.263,478.151 503.802,478.151C 525.341,478.151 542.802,472.928 542.802,466.484L 542.802,362.016C 542.802,368.459 525.341,373.534 503.802,373.534C 482.263,373.534 464.802,368.31 464.802,361.867L 464.802,362.016C 464.802,355.572 482.263,350.349 503.802,350.349C 525.341,350.349 542.802,355.572 542.802,362.016",Diamond:"M397.784,287.875 L369.5,316.159 L341.216,287.875 L369.5,259.591 L397.784,287.875 z"},qe=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ue=function(e){function t(){var t=e.call(this)||this;return t.pathData="",t.transformPath=!0,t.absolutePath="",t.canMeasurePath=!1,t.absoluteBounds=new _,t}return qe(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.pathData},set:function(e){this.pathData!==e&&(this.pathData=e,this.isDirt=!0)},enumerable:!0,configurable:!0}),t.prototype.getPoints=function(){var e=this;return this.pointTimer||(this.pointTimer=setTimeout((function(){e.points=null,e.pointTimer=null}),200)),this.points=this.points||function(e){var t,i,n=[],r="measureElement";window[r].style.visibility="visible";var o=kl(window[r].children[2])[0];o.setAttributeNS(null,"d",e.data);var a=e.absoluteBounds,s=Rl(e,a,e);o.setAttributeNS(null,"d",s);var l=o.getTotalLength();for(i=0;i<=l;i+=10)t=o.getPointAtLength(i),n.push({x:t.x,y:t.y});return window[r].style.visibility="hidden",n}(this),function(e,t){for(var i=[],n=0,r=t;n<r.length;n++){var o=r[n],a={x:e.offsetX-e.actualSize.width*e.pivot.x+o.x,y:e.offsetY-e.actualSize.height*e.pivot.y+o.y},s=void 0,l=e.rotateAngle+e.parentTransform;l&&q(s=W(),l,e.offsetX,e.offsetY),s&&(a=F(s,a)),i.push(a)}return i}(this,this.points)},t.prototype.measure=function(e){return this.staticSize&&void 0!==this.width&&void 0!==this.height?this.absoluteBounds=new _(this.offsetX-this.width*this.pivot.x,this.offsetY-this.height*this.pivot.y,this.width,this.height):(!this.isDirt||!this.transformPath&&void 0!==this.width&&void 0!==this.height||this.absoluteBounds&&0!==this.absoluteBounds.height)&&!this.canMeasurePath||(this.absoluteBounds=Ml(this.data?this.data:"")),void 0===this.width?this.desiredSize=new P(this.absoluteBounds.width,this.height||this.absoluteBounds.height):void 0===this.height?this.desiredSize=new P(this.width||this.absoluteBounds.width,this.absoluteBounds.height):this.desiredSize=new P(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.canMeasurePath=!1,this.desiredSize},t.prototype.arrange=function(e){return(this.isDirt||this.actualSize.width!==e.width||this.actualSize.height!==e.height)&&(this.isDirt=!0,this.absolutePath=this.updatePath(this.data,this.absoluteBounds,e),this.staticSize||(this.points=null)),this.actualSize=this.desiredSize,this.updateBounds(),this.isDirt=!1,this.actualSize},t.prototype.updatePath=function(e,t,i){var n=!1,r="",o=-t.x,a=-t.y,s=[];return i.width===t.width&&i.height===t.height||(o=i.width/Number(t.width?t.width:1),a=i.height/Number(t.height?t.height:1),n=!0),s=R(s=T(e)),r=(n||this.isDirt)&&this.transformPath?k(s,o,a,n,t.x,t.y,0,0):z(s),n=!1,r},t}(Le),Ve=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ye=function(e){function t(){var t=e.call(this)||this;return t.imageSource="",t.imageScale="None",t.imageAlign="None",t.stretch="Stretch",t}return Ve(t,e),Object.defineProperty(t.prototype,"source",{get:function(){return this.imageSource},set:function(e){this.imageSource=e,this.isDirt=!0},enumerable:!0,configurable:!0}),t.prototype.measure=function(e,t,i){return this.isDirt&&("Stretch"!==this.stretch||void 0===this.width&&void 0===this.height)&&(this.contentSize=function(e,t,i,n){var r="measureElement";window[r].style.visibility="visible";var o=window[r].children[1];o.setAttribute("src",e);var a=o.getBoundingClientRect(),s=a.width,l=a.height;t=new P(s,l),window[r].style.visibility="hidden";var c=document.createElement("img");return c.setAttribute("src",e),rc(c,{id:i+"sf-imageNode",style:"display: none;"}),document.body.appendChild(c),c.onload=function(e){var t=e.currentTarget;n&&n(i,{width:t.width,height:t.height})},t}(this.source,this.contentSize,t,i),this.isDirt=!1),void 0!==this.width&&void 0!==this.height?(this.desiredSize=new P(this.width,this.height),this.contentSize=this.desiredSize):this.desiredSize=this.contentSize,this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return this.actualSize=new P(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},t}(Le),Xe=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ge=function(e){function t(t,i){var n=e.call(this)||this;return n.data="",n.nodeId="",n.diagramId="",n.scale="Stretch",n.diagramId=i,n.nodeId=t,n}return Xe(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this.data},set:function(e){this.data=e,this.canReset||(this.canReset=!0,this.template=tc(this,!1),this.canReset=!1,this.isDirt=!0)},enumerable:!0,configurable:!0}),t.prototype.measure=function(e){if(this.isDirt){var t=function(e){var t="measureElement";window[t].style.visibility="visible";var i=window[t].children[2];i.appendChild(e);var n=e.getBoundingClientRect(),r=i.getBoundingClientRect(),o=n;return o.x=n.left-r.left,o.y=n.top-r.top,i.removeChild(e),window[t].style.visibility="hidden",o}(this.template);this.contentSize=new P,this.contentSize.width=t.width,this.contentSize.height=t.height;var i=t.x,n=t.y;this.templatePosition={x:i,y:n},this.isDirt=!1}if(void 0===this.width||void 0===this.height){var r=function(e){var t="measureElement";window[t].style.visibility="visible";var i=window[t].children[2];i.appendChild(e);var n=i.getBoundingClientRect();return i.removeChild(e),window[t].style.visibility="hidden",n}(this.template);this.desiredSize=new P(r.width,r.height)}else this.desiredSize=new P(this.width,this.height);return this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return this.actualSize=new P(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},t}(Le),Ze=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Je=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Qe=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n,r)||this;return o.inEdges=[],o.outEdges=[],o}return Ze(t,e),Je([Object(r.q)("")],t.prototype,"id",void 0),Je([Object(r.q)("Center")],t.prototype,"horizontalAlignment",void 0),Je([Object(r.q)("Center")],t.prototype,"verticalAlignment",void 0),Je([Object(r.g)({},Se)],t.prototype,"margin",void 0),Je([Object(r.q)(12)],t.prototype,"width",void 0),Je([Object(r.q)(12)],t.prototype,"height",void 0),Je([Object(r.g)({},Ae)],t.prototype,"style",void 0),Je([Object(r.q)("Square")],t.prototype,"shape",void 0),Je([Object(r.q)(J.Connect)],t.prototype,"visibility",void 0),Je([Object(r.q)("")],t.prototype,"pathData",void 0),Je([Object(r.q)(ye.Default)],t.prototype,"constraints",void 0),Je([Object(r.q)()],t.prototype,"addInfo",void 0),Je([Object(r.q)()],t.prototype,"outEdges",void 0),Je([Object(r.q)()],t.prototype,"inEdges",void 0),t}(r.d),$e=function(e){function t(t,i,n,r){return e.call(this,t,i,n,r)||this}return Ze(t,e),t.prototype.getClassName=function(){return"PointPort"},Je([Object(r.g)({x:.5,y:.5},E)],t.prototype,"offset",void 0),t}(Qe),Ke=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),et=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},tt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ke(t,e),et([Object(r.q)("blue")],t.prototype,"color",void 0),et([Object(r.q)("")],t.prototype,"content",void 0),et([Object(r.q)("")],t.prototype,"link",void 0),et([Object(r.q)("None")],t.prototype,"textDecoration",void 0),t}(r.d),it=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n,r)||this;return n.id||(t.parentObj&&t.parentObj.propName&&"phases"===t.parentObj.propName?o.id=t.parentObj.id:o.id=lc()),o}return Ke(t,e),et([Object(r.q)("")],t.prototype,"content",void 0),et([Object(r.q)(void 0)],t.prototype,"template",void 0),et([Object(r.q)("String")],t.prototype,"annotationType",void 0),et([Object(r.q)(!0)],t.prototype,"visibility",void 0),et([Object(r.q)(ie.InheritReadOnly)],t.prototype,"constraints",void 0),et([Object(r.g)(void 0,tt)],t.prototype,"hyperlink",void 0),et([Object(r.q)("")],t.prototype,"id",void 0),et([Object(r.q)()],t.prototype,"width",void 0),et([Object(r.q)()],t.prototype,"height",void 0),et([Object(r.q)(0)],t.prototype,"rotateAngle",void 0),et([Object(r.g)({strokeWidth:0,strokeColor:"transparent",fill:"transparent"},ke)],t.prototype,"style",void 0),et([Object(r.q)("Center")],t.prototype,"horizontalAlignment",void 0),et([Object(r.q)("Center")],t.prototype,"verticalAlignment",void 0),et([Object(r.g)({},Se)],t.prototype,"margin",void 0),et([Object(r.g)({top:void 0,bottom:void 0,left:void 0,right:void 0},Se)],t.prototype,"dragLimit",void 0),et([Object(r.q)("Shape")],t.prototype,"type",void 0),et([Object(r.q)()],t.prototype,"addInfo",void 0),t}(r.d),nt=function(e){function t(t,i,n,r){return e.call(this,t,i,n,r)||this}return Ke(t,e),t.prototype.getClassName=function(){return"ShapeAnnotation"},et([Object(r.g)({x:.5,y:.5},E)],t.prototype,"offset",void 0),t}(it),rt=function(e){function t(t,i,n,r){return e.call(this,t,i,n,r)||this}return Ke(t,e),t.prototype.getClassName=function(){return"PathAnnotation"},et([Object(r.q)(.5)],t.prototype,"offset",void 0),et([Object(r.g)({x:0,y:0},E)],t.prototype,"displacement",void 0),et([Object(r.q)("Center")],t.prototype,"alignment",void 0),et([Object(r.q)(!1)],t.prototype,"segmentAngle",void 0),t}(it);function ot(e){return at[e.toString()]}var at={X:"M14,14 L106,106 M106,14 L14,106",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z",Square:"M0,0 L10,0 L10,10 L0,10 z"},st={OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Square:"M0,0 L10,0 L10,10 L0,10 z",Fletch:"M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z",OpenFetch:"M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z",IndentedArrow:"M17,10c0,0-4.5,5.5,0,12L5,16L17,10z",OutdentedArrow:"M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M12,23l-7-7l7-7l6.9,7L12,23z",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z"};function lt(e){return ut[e.toString()]}var ct,dt,ht,pt,ut={Process:"M419.511,76.687L359.511,76.687L359.511,43.086L419.511,43.086z",Decision:"M 253.005,115.687L 200.567,146.071L 148.097,115.687L 200.534,85.304L 253.005,115.687 Z",Document:"M 60 31.9 c 0 0 -11 -7.7 -30 0 s -30 0 -30 0 V 0 h 60 V 31.9 Z",PreDefinedProcess:"M 0,0 L 50,0 L 50,50 L 0,50 Z  M 8.334,0 L 8.334,50 M 41.667,0 L 41.667,50",Terminator:"M 269.711,29.33C 269.71,44.061 257.77,56 243.04,56L 158.058,56C 143.33,56 131.39,44.061 131.39,29.33L 131.39,29.33C 131.391,14.6057 143.33,2.669 158.058,2.669L 243.044,2.669C 257.772,2.669 269.711,14.6057 269.711,29.333 Z",PaperTap:"M0.0009,17.2042 L0.0009,47.165 C0.001,47.165 14.403,53.5455 25.00,47.165 C35.599,40.7852 44.403,43.5087 50.00,47.165L50.001,17.2042 M50.001,32.7987 L50.001,2.8405 C50.001,2.8405 35.599,-3.5427 25.001,2.8405C14.403,9.2237 5.599,6.494 0.0009,2.8405 L0.0009,32.7987",DirectData:"M 132.62 0 L 17.38 0 C 7.78 0 0 13.43 0 30 C 0 46.57 7.78 60 17.38 60 L 132.62 60 M 132.62 0C 123.02 0 115.24 13.43 115.24 30 C 115.24 46.57 123.02 60 132.62 60 C 142.22 60 150 46.57 150 30 C 150 13.43 142.22 0 132.62 0 z ",SequentialData:"M0.0029,24.999 C0.0029,11.1922 10.433,0.0021 23.295,0.0021 C36.159,0.00216 46.585,11.1922 46.585,24.999C46.585,38.8057 36.159,49.9979 23.295,49.9979 C10.433,49.9979 0.0029,38.8057 0.0029,24.999 z M23.294,49.999 L50.002,49.999",Sort:"M50.001,24.9971 L25.001,49.9971 L0.00097,24.9971 L25.001,-0.00286865 L50.001,24.9971 z M0.000976562,24.9971 L50.001,24.9971",MultiDocument:"M43.6826,40 C44.8746,40.6183 45.8586,41.3502 46.8366,42.1122 L46.8366,4.74487 L3.09857,4.74487 L3.09857,10.9544 M46.837,35.143 C48.027,35.765 49.025,36.604 50.003,37.369 L50.003,0.002 L6.264,0.002 L6.264,4.744 M43.682,47.113 L43.682,10.765 L0.0025,10.7652 L0.0025,47.1132 C0.0025,47.1132 12.5846,53.6101 21.8426,47.1132 C31.1006,40.6163 38.792,43.393 43.6826,47.1132 z",Collate:"M50.001,0.0028 L25.001,25.0029 L0.00097,0.0028 L50.001,0.002 z M0.0009,50.002 L25.001,25.002L50.001,50.002 L0.0009,50.0029 z",SummingJunction:"M7.3252,42.6768 L42.6772,7.3247 M42.6768,42.6768 L7.3248,7.3247 M0.0009,25.001 C0.0009,11.193 11.197,0.0009 25.001,0.0009 C38.809,0.0009 50.001,11.193 50.001,25.001 C50.001,38.809 38.809,50.001 25.001,50.001 C11.197,50.00 0.0009,38.809 0.0009,25.00 z",Or:"M 0 50 L 100 50 M 50 100 L 50 0.0 M 0 50 C 0 22.384 22.392 0 50 0 C 77.616 0 100 22.384 100 50 C 100 77.616 77.616 100 50 100 C 22.392 100 0 77.616 0 50 Z",InternalStorage:"M 0 3.81946A 2.5,3.81946 0 0,1 2.5,0L 47.5 0A 2.5,3.81946 0 0,1 50,3.81946L 50 45.836A 2.5,3.819446 0 0,1 47.5,49.652778L 2.5 49.652778A 2.5,3.819446 0 0,1 0,45.8336L 0 3.819446ZM 0 11.45834L 50 11.4583334M 12.5 0L 12.5 49.652778",Extract:"M0,35 L30,0 L60,35 Z",ManualOperation:"M46.4,28.8 L14.8,28.8 L0,0 L60,0 Z",Merge:"M60,0 L30,35 L0,0 Z",OffPageReference:"M60,33.3 L30.1,39 L0,33.3 L0,0 L60,0 Z",SequentialAccessStorage:"M 60 30 C 60 13.4 46.6 0 30 0 S 0 13.4 0 30 s 13.4 30 30 30 h 28.6 v -6.5 h -9.9C 55.5 48 60 39.5 60 30 Z",Annotation:"M49.9984,50.0029 L-0.00271199,50.0029 L-0.00271199,0.00286865 L49.9984,0.00286865",Annotation2:"M49.9977,50.0029 L25.416,50.0029 L25.416,0.00286865 L49.9977,0.00286865 M25.4166,25.0029 L-0.00227869,25.0029",Data:"M 10 0 L 40 0 L 30 40 L 0 40 Z",Card:"M275,60 L400,60 L400,110 L260,110 L260,75 Z",Delay:"M0,0 L12.029,0 C14.212999,0 16,1.7869979 16,3.9709952 C16,6.1549926 14.212999,7.9409904 12.029,7.9409904 L0,7.9409904 z",Preparation:"M 1048.17 572 C 1051.06 568.86 1055.17 567.05 1059.5 567 L 1094.51 567 C 1098.84 567.05 1102.95 568.86 1105.84 572 L 1126.43 595 C 1127.01 596.28 1127.01 597.72 1126.43 599 L 1105.84 622 C 1102.95 625.14 1098.84 626.95 1094.51 627 L 1059.5 627 C 1055.17 626.95 1051.06 625.14 1048.17 622 L 1027.58 599 C 1027 597.72 1027 596.28 1027.58 595 L 1048.17 572 Z",Display:"M47.8809,19.2914 L32.7968,-0.00594145 L11.3902,-0.00594145 C7.93166,-0.00594145 0.00124586,11.187 0.00124586,24.9968C0.00124586,38.8032 7.93166,49.9962 11.3902,49.9962 L32.7968,49.99 L47.615,31.038 C47.615,31.0388 52.798,24.9968 47.880,19.2914 z",ManualInput:"M 912 732 L 1006.85 707 C 1008.2 707 1009.5 707.53 1010.46 708.46 C 1011.41 709.4 1011.95 710.67 1011.95 712 L 1011.95 762C 1012 764.41 1010.28 766.52 1007.87 767 L 917.1 767 C 915.75 767 914.45 766.47 913.49 765.54 C 912.54 764.6 912 763.33 912 762 L 912 732 Z",LoopLimit:"M 8 9 L 27 9 L 33 15 L 33 26 C 33 27 33 27 32 27 L 4 27 C 3 27 2 27 2 26 L 2 15 L 8 9 Z",StoredData:"M 5.55 0L 50 0A 1.5,30 0 0,1 50,0A 5.555,25 0 0,0 50,50A 1.5,30 0 0,1 50,50L 5.555 50A 5.55,25 0 0,1 5.555,0Z"};function ft(e,t,i){var n;return n=function(e,t,i,n,r){var o,a,s,l,c,d,h=e.sourceWrapper,p=e.targetWrapper,u=e.sourcePortWrapper,f=e.targetPortWrapper,g=[],m=13,v={corners:o,point:t,direction:s,margin:{left:5,right:5,bottom:5,top:5}},y={corners:a,point:i,direction:l,margin:{left:5,right:5,bottom:5,top:5}};void 0!==h&&void 0!==p&&(c=hc(h),d=hc(p),v.corners=h.corners,y.corners=p.corners);if(void 0!==u){var b={x:u.offsetX,y:u.offsetY};v.direction=Gt(b,c,h.bounds,!1)}if(void 0!==f){var w={x:f.offsetX,y:f.offsetY};y.direction=Gt(w,d,p.bounds,!1)}if(void 0!==h&&void 0!==p)return void 0!==v.direction&&void 0!==y.direction||(n?function(e,t,i){"LeftToRight"===i?(e.direction=e.direction?e.direction:"Right",t.direction=t.direction?t.direction:"Left"):"RightToLeft"===i?(e.direction=e.direction?e.direction:"Left",t.direction=t.direction?t.direction:"Right"):"TopToBottom"===i?(e.direction=e.direction?e.direction:"Bottom",t.direction=t.direction?t.direction:"Top"):"BottomToTop"===i&&(e.direction=e.direction?e.direction:"Top",t.direction=t.direction?t.direction:"Bottom")}(v,y,n):v.corners.top>y.corners.bottom&&Math.abs(v.corners.top-y.corners.bottom)>v.margin.top+v.margin.bottom?(v.direction=v.direction?v.direction:"Top",y.direction=y.direction?y.direction:"Bottom"):v.corners.bottom<y.corners.top&&Math.abs(v.corners.bottom-y.corners.top)>v.margin.bottom+v.margin.top?(v.direction=v.direction?v.direction:"Bottom",y.direction=y.direction?y.direction:"Top"):v.corners.right<y.corners.left&&Math.abs(v.corners.right-y.corners.left)>v.margin.right+v.margin.left||v.corners.right+m<y.corners.left||y.corners.right>=v.corners.left-m&&v.corners.left>y.corners.left?(v.direction=v.direction?v.direction:"Right",y.direction=y.direction?y.direction:"Left"):v.corners.left>y.corners.right&&Math.abs(v.corners.left-y.corners.right)>v.margin.left+v.margin.right||y.corners.right+m<v.corners.left||v.corners.right>=y.corners.left-m&&v.corners.left<y.corners.left?(v.direction=v.direction?v.direction:"Left",y.direction=y.direction?y.direction:"Right"):h.id!==p.id&&!c.equals(c,d)&&d.containsPoint(c.topCenter,v.margin.top)?(v.direction=v.direction?v.direction:"Bottom",y.direction=y.direction?y.direction:"Top"):(v.direction=v.direction?v.direction:"Top",y.direction=y.direction?y.direction:"Bottom")),function(e,t,i,n,r,o){var a,s=e.sourceWrapper,l=e.targetWrapper,c=e.sourcePortWrapper,d=e.targetPortWrapper,h=[],p=s.corners,u=l.corners,f=(u.center,{corners:p,point:n,direction:t,margin:{left:5,right:5,bottom:5,top:5}}),g={corners:u,point:r,direction:i,margin:{left:5,right:5,bottom:5,top:5}},m=Pt(s,p,e.sourceWrapper.bounds),v=Pt(l,u,e.targetWrapper.bounds),y=!1;e.sourceWrapper&&e.targetWrapper&&(y=function(e,t,i){for(var n=St(e,i.sourcePadding),r=St(t,i.targetPadding),o=0;o<n.length-1;o++)for(var a=n[o],s=0;s<r.length-1;s++){if(Wa(a,r[s]).enabled)return!0}return!1}(e.sourceWrapper,e.targetWrapper,e));if(void 0!==c){switch(f.point={x:c.offsetX,y:c.offsetY},f.direction){case"Bottom":case"Top":f.point.y=f.point.y;break;case"Left":case"Right":f.point.x=f.point.x}e.sourcePadding&&!y&&(d&&(g.point={x:d.offsetX,y:d.offsetY}),f.point=Ot(e,f,g,!1))}else"Orthogonal"===e.type?(e.segments&&e.segments.length>0&&e.segments[0].direction&&(f.direction=e.segments[0].direction),f.point=Rt(m,f.direction),a=Rt(m,Jt(f.direction)),f.point=Nt(e,s,f.point,a,!1)):f.point=s.corners.center;if(void 0!==d){switch(g.point={x:d.offsetX,y:d.offsetY},g.direction){case"Bottom":case"Top":g.point.y=g.point.y;break;case"Left":case"Right":g.point.x=g.point.x}e.targetPadding&&!y&&(g.point=Ot(e,f,g,!0))}else"Orthogonal"===e.type?(g.point=Rt(v,g.direction),a=Rt(v,Jt(g.direction)),g.point=Nt(e,l,g.point,a,!0)):g.point=l.corners.center;if("Orthogonal"!==e.type){var b=void 0,w=void 0;if(Et(e),void 0===e.sourcePortWrapper){f.point=f.corners.center,e.segments&&e.segments.length>0&&(w=e.segments[0],b=E.isEmptyPoint(w.point)?void 0:w);var x=void 0!==b?b.point:g.point;if("Bezier"===e.type&&e.segments.length>0&&e.segments[0].vector1.angle&&e.segments[0].vector1.distance){var O=Math.max(f.corners.width,f.corners.height);x=E.transform(f.point,e.segments[0].vector1.angle,O/2)}f.point=y?e.sourceWrapper.bounds.center:Nt(e,s,f.point,x,!1)}if(void 0===e.targetPortWrapper){g.point=g.corners.center,e.segments&&e.segments.length>1&&(w=e.segments[e.segments.length-2],b=E.isEmptyPoint(w.point)?void 0:w);var S=b?b.point:f.point;if("Bezier"===e.type&&e.segments.length>0&&e.segments[e.segments.length-1].vector2.angle&&e.segments[e.segments.length-1].vector2.distance){O=Math.max(f.corners.width,f.corners.height);S=E.transform(g.point,e.segments[0].vector2.angle,O/2)}g.point=y?e.targetWrapper.bounds.center:Nt(e,l,S,g.point,!0)}h=jt(e,f,g)}else if("Orthogonal"===e.type&&e.segments&&e.segments.length>0&&null!==e.segments[0].direction)h=function(e,t,i,n,r,o,a){var s,l,c,d,h=[];Et(e);for(var p=0;p<e.segments.length;p++){if(l=e.segments[p],n&&t.direction===Jt(l.direction)&&(l.direction=t.direction),p>0&&e.segments[p-1].direction===l.direction)p=Tt(e,p,t);else if(l.direction)t.point=gt(t,e.segments[p]);else{var u=e.segments[p-1];t.point=u.points[u.points.length-1]}if(p===e.segments.length-1)if(Dt(e,t),xt(s=void 0===r?At(e,t,i):bt(e,t,i),e,t),l.points=[],s.length>=2)for(c=0;c<s.length;c++)l.points.push(s[c]);else d=p;if(void 0!==d&&(d===e.segments.length-1&&(e.segments[d-1].direction=null,e.segments[d-1].length=null),e.segments.splice(d,1)),n&&0===p){var f=wt(e,n,o);f&&(t.point=f)}}return kt(e,h)}(e,f,g,c,d,s);else{if(!e.segments[0]){b=new Er(e,"segments",{type:"Orthogonal"},!0);e.segments.push(b)}e.segments[0].points=h=function(e,t,i,n,r){var o,a=!1;(a=function(e,t){var i=!1;switch(e){case"Left":switch(t){case"Right":case"Bottom":i=!0}break;case"Top":switch(t){case"Left":case"Right":case"Bottom":i=!0}break;case"Bottom":switch(t){case"Right":i=!0}}return i}(t.direction,i.direction))&&Xt(t,i);"Right"===t.direction&&"Left"===i.direction?o=function(e,t,i,n){var r,o=e.sourcePortWrapper,a=(e.targetPortWrapper,Math.round(Math.abs(t.point.y-i.point.y))),s=(Math.round(Math.abs(t.point.x-i.point.x)),{x:Math.max(t.point.x,t.corners.right),y:t.point.y}),l={x:Math.min(i.point.x,i.corners.left),y:i.point.y},c=10;if(n){var d=void 0;d=l,l=s,s=d}t.corners.bottom+c<i.corners.top-c||t.corners.top-c>i.corners.bottom+c||(c=0);t.margin={left:c,right:c,top:c,bottom:c},i.margin={left:c,right:c,top:c,bottom:c},r=0===a&&(t.corners.right<i.corners.left||n&&t.corners.right<i.corners.left)?me.One:t.point.x+t.margin.right<i.point.x-i.margin.left||e.sourceWrapper!==e.targetWrapper&&(hc(e.sourceWrapper).containsPoint(l)||hc(e.targetWrapper).containsPoint(s))?me.Three:(t.corners.bottom<=i.corners.top||t.corners.top>=i.corners.top||void 0!==o&&o.offsetY<=i.corners.top||void 0===o&&t.corners.right<=i.corners.top||void 0!==o&&o.offsetY>=i.corners.bottom||void 0===o&&(t.corners.right,i.corners.bottom),me.Five);return r}(e,t,i,a):"Right"===t.direction&&"Right"===i.direction?o=function(e,t,i){var n,r=e.sourcePortWrapper,o=e.targetPortWrapper,a=t.point.x-i.point.x,s=t.point.y-i.point.y;i.margin={left:10,right:10,top:10,bottom:10},t.margin={left:10,right:10,top:10,bottom:10},n=t.corners.right>=i.corners.right?void 0!==r&&(r.offsetY<i.corners.top||r.offsetY>i.corners.bottom)||void 0===r&&t.corners.middleRight.y<i.corners.top||void 0!==r&&r.offsetY>i.corners.bottom+i.margin.bottom&&t.corners.top>i.corners.bottom||void 0===r&&t.corners.middleRight.y>i.corners.bottom||void 0!==r&&r.offsetY<i.corners.top&&t.corners.bottom>i.corners.top||void 0===r&&t.corners.middleRight.y>i.corners.bottom?me.Three:t.corners.right<i.corners.left||i.corners.right<t.corners.left?me.Five:0===a||0===s?me.One:me.Three:void 0!==o&&t.corners.bottom<o.offsetY||void 0===o&&t.corners.bottom<i.corners.middleRight.y||void 0!==o&&t.corners.top>o.offsetY||void 0===o&&t.corners.top>i.corners.middleRight.y||void 0!==o&&(void 0!==r&&r.offsetX<i.corners.left&&r.offsetX!==o.offsetX&&r.offsetY!==o.offsetY&&Math.abs(t.corners.right-i.corners.left)<=20||void 0===r&&t.corners.right<i.corners.left&&t.corners.center.x!==i.corners.center.x&&t.corners.center.y!==i.corners.center.y)?me.Three:t.corners.right<i.corners.left?me.Five:0===a||0===s?me.One:me.Three;return n}(e,t,i):"Right"===t.direction&&"Top"===i.direction?o=function(e,t,i,n){var r,o=e.targetPortWrapper,a=e.sourcePortWrapper,s={x:Math.max(t.point.x,t.corners.right),y:t.point.y},l={x:i.point.x,y:Math.min(i.point.y,i.corners.top)};if(i.margin={left:5,right:5,top:5,bottom:5},t.margin={top:5,bottom:5,left:5,right:5},n){var c=void 0;c=a,a=o,o=c}r=void 0!==a&&a.offsetY<i.corners.top-i.margin.top||void 0===a&&t.corners.bottom<i.corners.top-i.margin.top?t.corners.bottom<i.corners.top?void 0!==o&&t.corners.right+t.margin.right<o.offsetX||void 0===o&&t.corners.right+t.margin.right<i.corners.topCenter.x?me.Two:me.Four:void 0!==o&&t.corners.left>o.offsetX||void 0===o&&t.corners.left>i.corners.topCenter.x?me.Four:me.Two:void 0!==a&&Math.abs(t.corners.right-i.corners.left)<=25&&Math.abs(a.offsetY-i.corners.top)<=25||void 0!==o&&Math.abs(o.offsetX-t.corners.topCenter.x)>=25&&t.corners.middleRight.y<o.offsetY?me.Two:t.corners.right<i.corners.left?me.Four:e.sourceWrapper!==e.targetWrapper&&(hc(e.sourceWrapper).containsPoint(l)||hc(e.targetWrapper).containsPoint(s))?me.Two:me.Four;return r}(e,t,i,a):"Right"===t.direction&&"Bottom"===i.direction?o=function(e,t,i,n){var r;t.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10};var o=e.sourcePortWrapper,a=e.targetPortWrapper;Math.max(t.point.x,t.corners.right),t.point.y,i.point.x,Math.max(i.point.y,i.corners.bottom);if(n){var s=void 0;s=o,o=a,a=s}r=void 0!==o&&o.offsetY>i.corners.bottom+i.margin.bottom||void 0===o&&t.corners.middleRight.y>i.corners.bottom+i.margin.bottom?t.corners.top>i.corners.bottom?void 0!==a&&t.corners.right+t.margin.right<a.offsetX||void 0===a&&t.corners.right+t.margin.right<i.corners.bottomCenter.x?me.Two:me.Four:void 0!==a&&t.corners.left>a.offsetX||void 0===a&&t.corners.left>i.corners.bottomCenter.x?me.Four:me.Two:void 0!==o&&Math.abs(t.corners.right-i.corners.left)<=25&&Math.abs(o.offsetY-i.corners.bottom)<=25?me.Two:(t.corners.right,i.corners.left,me.Four);return r}(e,t,i,a):"Bottom"===t.direction&&"Top"===i.direction?o=function(e,t){var i,n=e.point.x-t.point.x,r=(e.point.y,t.point.y,e.point.x,Math.max(e.point.y,e.corners.bottom),t.point.x,Math.min(t.point.y,t.corners.top),10);e.corners.right+r<t.corners.left-r||e.corners.left-r>t.corners.right+r||(r=0);e.margin={left:r,right:r,top:r,bottom:r},t.margin={left:r,right:r,top:r,bottom:r},i=0===n&&e.corners.bottom<t.corners.top?me.One:e.corners.bottom+e.margin.bottom<t.corners.top-t.margin.top?me.Three:(e.corners.right+e.margin.right<t.corners.left-t.margin.left||(e.corners.left,e.margin.left,t.corners.right,t.margin.right),me.Five);return i}(t,i):"Bottom"===t.direction&&"Bottom"===i.direction?(t.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10},o=function(e,t,i){var n,r=e.sourcePortWrapper,o=e.targetPortWrapper,a=Math.round(Math.abs(t.point.x-i.point.x)),s=Math.round(Math.abs(i.point.y-i.point.y));n=t.corners.bottom<i.corners.bottom?void 0!==r&&r.offsetX<i.corners.left-i.margin.left||void 0===r&&t.corners.bottomCenter.x<i.corners.left-i.margin.left||void 0!==r&&r.offsetX>i.corners.right+i.margin.right||void 0===r&&t.corners.bottomCenter.x>i.corners.right+i.margin.right?me.Three:t.corners.bottom<i.corners.top?me.Five:0===a||0===s?me.One:me.Three:void 0!==o&&t.corners.left>o.offsetX||void 0===o&&t.corners.left>i.corners.left||void 0!==o&&t.corners.right<o.offsetX||void 0===o&&t.corners.right<i.corners.right?me.Three:t.corners.top>i.corners.bottom?me.Five:0===a||0===s?me.One:me.Three;return n}(e,t,i)):"Bottom"===t.direction&&"Left"===i.direction?o=function(e,t,i,n){var r,o=e.sourcePortWrapper,a=e.targetPortWrapper;t.point.x,Math.max(t.point.y,t.corners.bottom),Math.min(i.point.x,i.corners.left),i.point.y;if(n){var s=void 0;s=o,o=a,a=s}r=void 0!==o&&o.offsetX<i.corners.left-i.margin.left||void 0===o&&t.corners.bottomCenter.x<i.corners.bottomLeft.x-i.margin.left?t.corners.right<i.corners.left?void 0!==a&&t.corners.bottom+t.margin.bottom<a.offsetY||void 0===a&&t.corners.bottom+t.margin.bottom<i.corners.middleLeft.y?me.Two:me.Four:void 0!==a&&t.corners.top>a.offsetY||void 0===a&&t.corners.top>i.corners.middleLeft.y?me.Four:me.Two:void 0!==a&&Math.abs(t.corners.right-i.corners.left)<=25&&Math.abs(a.offsetY-t.corners.bottom)<=25?me.Two:me.Four;return r}(e,t,i,a):"Left"===t.direction&&"Left"===i.direction?o=function(e,t,i){var n=e.sourcePortWrapper,r=e.targetPortWrapper;t.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10};var o,a=Math.round(Math.abs(t.point.x-i.point.x)),s=Math.round(Math.abs(t.point.y-i.point.y));o=t.corners.left<i.corners.left?void 0!==r&&t.corners.bottom+t.margin.bottom<r.offsetY||void 0===r&&t.corners.bottom+t.margin.bottom<i.corners.middleLeft.y||void 0!==r&&t.corners.top-t.margin.top>r.offsetY||void 0===r&&t.corners.top-t.margin.top>i.corners.middleLeft.y?me.Three:t.corners.right<i.corners.left||i.corners.right<t.corners.left?me.Five:0===a||0===s?me.One:me.Three:void 0!==n&&n.offsetY<i.corners.top-i.margin.top||void 0===n&&t.corners.middleLeft.y<i.corners.top||void 0!==n&&n.offsetY>i.corners.bottom+i.margin.bottom||void 0===n&&t.corners.middleLeft.y>i.corners.bottom+i.margin.bottom?me.Three:t.corners.left>i.corners.right?me.Five:0===a||0===s?me.One:me.Three;return o}(e,t,i):"Left"===t.direction&&"Top"===i.direction?o=function(e,t,i,n){var r,o=e.sourcePortWrapper,a=e.targetPortWrapper,s={x:Math.min(t.point.x,t.corners.left),y:t.point.y},l={x:i.point.x,y:Math.min(i.point.y,i.corners.top)};if(n){var c=void 0;c=o,o=a,a=c}r=void 0!==o&&o.offsetY<i.corners.top-i.margin.top||void 0===o&&(t.corners.bottom<i.corners.top-i.margin.top||t.corners.middleLeft.y<i.corners.top-i.margin.top)?t.corners.bottom<i.corners.top?void 0!==a&&t.corners.left-t.margin.left>a.offsetX||void 0===a&&t.corners.left-t.margin.left>i.corners.topCenter.x?me.Two:me.Four:void 0!==a&&t.corners.right<a.offsetX||void 0===a&&t.corners.right<i.corners.topCenter.x?me.Four:me.Two:void 0!==o&&Math.abs(t.corners.left-i.corners.right)<=25&&Math.abs(o.offsetY-i.corners.top)<=25||e.sourceWrapper!==e.targetWrapper&&(hc(e.sourceWrapper).containsPoint(l)||hc(e.targetWrapper).containsPoint(s))?me.Two:(t.corners.left,i.corners.right,me.Four);return r}(e,t,i,a):"Top"===t.direction&&"Top"===i.direction&&(o=function(e,t,i){var n,r=e.sourcePortWrapper,o=e.targetPortWrapper,a=Math.round(Math.abs(t.point.x-i.point.x)),s=Math.round(Math.abs(t.point.y-i.point.y));t.margin={left:10,right:10,top:10,bottom:10},i.margin={left:10,right:10,top:10,bottom:10},n=t.corners.top<i.corners.top?void 0!==o&&t.corners.left>o.offsetX||void 0===o&&t.corners.left>i.corners.left||void 0!==o&&t.corners.right<o.offsetX||void 0===o&&t.corners.right<i.corners.right?me.Three:t.corners.bottom<i.corners.top?me.Five:0===a||0===s?me.One:me.Three:void 0!==r&&r.offsetX>i.corners.right||void 0===r&&t.corners.left>i.corners.right||void 0!==r&&r.offsetX<i.corners.left||void 0===r&&t.corners.bottomRight.x<i.corners.left?me.Three:t.corners.top>i.corners.bottom?me.Five:0===a||0===s?me.One:me.Three;return n}(e,t,i));a&&Xt(t,i);return function(e,t,i,n,r,o){var a,s,l=e.sourceWrapper,c=e.targetWrapper,d=(e.targetPortWrapper,l.corners),h=c.corners,p=20;if((i.direction!==n.direction||t===me.Five)&&(i.direction===Jt(n.direction)||t===me.Three))switch(i.direction){case"Left":d.middleLeft.x>h.middleRight.x&&(s=(d.middleLeft.x-h.middleRight.x)/2,p=o?s:Math.min(p,s));break;case"Right":d.middleRight.x<h.middleLeft.x&&(s=(h.middleLeft.x-d.middleRight.x)/2,p=o?s:Math.min(p,s));break;case"Top":d.topCenter.y>h.bottomCenter.y&&(s=(d.topCenter.y-h.bottomCenter.y)/2,p=o?s:Math.min(p,s));break;case"Bottom":d.bottomCenter.y<h.topCenter.y&&(s=(h.topCenter.y-d.bottomCenter.y)/2,p=o?s:Math.min(p,s))}p=Ft(d,i,p),r&&(p=Math.max(p,r));t===me.One&&(a=[i.point,n.point]);t===me.Two&&(a=qt(i,n));t===me.Three&&(a=Ut(e,i,n,p));if(t===me.Four){a=Vt(i,n,void 0,a,p)}t===me.Five&&(a=function(e,t,i){void 0===i&&(i=20);var n,r,o=i,a=e.corners.left-e.margin.left,s=e.corners.right+e.margin.right,l=e.corners.bottom+e.margin.bottom,c=e.corners.top-e.margin.top,d=t.corners.left-t.margin.left,h=t.corners.right+t.margin.right,p=t.corners.bottom+t.margin.bottom,u=t.corners.top-t.margin.top;switch(e.direction){case"Left":(c>u&&c<p||l<p&&l>u)&&a>d&&a<=h&&i>=20&&(o=e.point.x-t.corners.left+o),r=zt(e.point,o,180);break;case"Top":(a>d&&a<h||s<h&&s>d)&&c>u&&c<=p&&i>=20&&(o=e.point.y-t.corners.top+o),r=zt(e.point,o,270);break;case"Right":(c>u&&c<p||l<p&&l>u)&&s<h&&s>=d&&i>=20&&(o=t.corners.right-e.point.x+o),r=zt(e.point,o,0);break;case"Bottom":(a>d&&a<h||s<h&&s>d)&&l<p&&l>=u&&i>=20&&(o=t.corners.bottom-e.point.y+o),r=zt(e.point,o,90)}if(n=[e.point,r],"Top"===e.direction||"Bottom"===e.direction){var f=e.direction;e.direction=r.x>t.point.x?"Left":"Right",e.point=r,n=Vt(e,t,f,n)}else{f=e.direction;e.direction=r.y>t.point.y?"Top":"Bottom",e.point=r,n=Vt(e,t,f,n)}return n}(i,n,p));return a}(e,o,t,i,n,r)}(e,f,g,void 0,o)}return h}(e,v.direction,y.direction,v.point,y.point,r);Et(e),(e.sourceWrapper||e.targetWrapper)&&function(e,t,i){var n=e.sourcePortWrapper,r=e.targetPortWrapper,o=e.sourceWrapper,a=t.point,s={left:0,right:0,top:0,bottom:0},l={x:0,y:0},c="Top";o?(a=i.point,s=t.margin):(o=e.targetWrapper,s=i.margin);if("Orthogonal"===e.type)if(e.segments&&e.segments.length>0&&e.sourceWrapper&&e.segments[0].direction)t.direction=e.segments[0].direction,l=Nt(e,o,l=Rt(o.corners,t.direction),Rt(o.corners,Jt(t.direction)),!1);else{var d={corners:null,direction:null,point:null,margin:null};Mt(o,{corners:null,direction:null,point:a,margin:s},d,e),l=d.point,c=d.direction}else{var h=void 0;e.segments&&e.segments.length>1&&(h=o===e.sourceWrapper?e.segments[0].point:e.segments[e.segments.length-2].point),l=Nt(e,o,o.bounds.center,e.segments&&e.segments.length>1?h:a,o===e.targetWrapper)}o===e.sourceWrapper?(t.direction=t.direction||c,t.point=l,e.sourcePortWrapper&&(t.point={x:n.offsetX,y:n.offsetY},e.sourcePadding&&(t.point=Ot(e,t,i,!1)))):(i.direction=i.direction||c,i.point=l,e.targetPortWrapper&&(i.point={x:r.offsetX,y:r.offsetY},e.targetPadding&&(i.point=Ot(e,t,i,!0))))}(e,v,y);if("Straight"===e.type||"Bezier"===e.type)g=jt(e,v,y);else if("Orthogonal"===e.type&&e.segments&&e.segments.length>0&&null!==e.segments[0].length&&null!==e.segments[0].direction)g=function(e,t,i,n,r,o,a){var s,l,c,d,h=[];if(Et(e),e.segments.length>0){for(var p=0;p<e.segments.length;p++){var u=e.segments[p];if(0===p&&void 0!==e.sourcePortWrapper&&(c=Gt({x:o.offsetX,y:o.offsetY},hc(n),n.bounds,!1),u.direction===Jt(c)&&(u.direction=c)),p>0&&e.segments[p-1].direction===u.direction)p=Tt(e,p,t);else{var f=e.segments[p-1];t.point=u.direction?gt(t,u):f.points[f.points.length-1]}if(p===e.segments.length-1&&(a||r?e.targetWrapper&&void 0===e.targetPortWrapper?(Dt(e,t),l=vt(e,t,i)):l=bt(e,t,i):l=mt(e,t,i),l))if(xt(l,e,t),u.points=[],l.length>=2)for(s=0;s<l.length;s++)u.points.push(l[s]);else d=p;if(o&&0===p){var g=wt(e,o,n);g&&(t.point=g)}}void 0!==d&&(d===e.segments.length-1&&(e.segments[d-1].direction=null,e.segments[d-1].length=null),e.segments.splice(d,1)),h=kt(e,h)}return h}(e,v,y,h,p,u,f);else{var x=void 0;v.direction?x=Ft(h.bounds,v,20):v.direction=y.direction?void 0!==e.targetPortWrapper?y.direction:Jt(y.direction):E.direction(v.point,y.point),e.segments[0].points=g=Ut(e,v,y,x)}return g}(e,"Straight"!==e.type&&e.sourceWrapper?e.sourceWrapper.corners.center:function(e){var t;if(e.sourcePortWrapper){var i=e.sourcePortWrapper,n=e.sourceWrapper,r={x:i.offsetX,y:i.offsetY};Gt(r,hc(n),n.bounds,!1);t=r}else if(e.sourceID&&e.sourceWrapper)if(e.targetWrapper){var o=e.sourceWrapper.corners.center,a=e.targetWrapper.corners.center;t=Nt(e,e.sourceWrapper,o,a,!1)}else t=e.sourcePoint;else t=e.sourcePoint;return t}(e),e.targetPoint,t,i),Bt(e,n[0],!1),Bt(e,n[n.length-1],!0),n}function gt(e,t){var i,n,r;return e.direction=t.direction,t.points=[],t.points.push(e.point),r="Left"===t.direction||"Top"===t.direction?-t.length:t.length,n="Left"===t.direction||"Right"===t.direction?0:90,i=zt(e.point,r,n),t.points.push(i),i}function mt(e,t,i){var n,r,o,a;(t.corners=e.sourceWrapper?e.sourceWrapper.corners:void 0,e.sourcePortWrapper)&&(o=Gt({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},hc(e.sourceWrapper),e.sourceWrapper.bounds,!1),!t.corners||"Bottom"!==t.direction&&"Top"!==t.direction?!t.corners||"Left"!==t.direction&&"Right"!==t.direction||i.point.y>t.corners.top&&i.point.y<t.corners.bottom&&(r=t.point.x>i.point.x?"Left":"Right"):i.point.x>t.corners.left&&i.point.x<t.corners.right&&(r=t.point.y>i.point.y?"Top":"Bottom"));e.sourcePortWrapper&&o===Jt(r)?(("Left"===o||"Right"===o)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.center.y&&i.point.y>=t.corners.top&&i.point.y<=t.corners.center.y?(t.direction="Top",a=t.point.y-t.corners.top+20):("Left"===o||"Right"===o)&&t.point.y>t.corners.center.y&&t.point.y<=t.corners.bottom&&i.point.y>t.corners.center.y&&i.point.y<=t.corners.bottom?(t.direction="Bottom",a=t.corners.bottom-t.point.y+20):("Top"===o||"Bottom"===o)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.center.x&&i.point.x>=t.corners.left&&i.point.x<=t.corners.center.x?(t.direction="Left",a=t.point.x-t.corners.left+20):("Top"===o||"Bottom"===o)&&t.point.x<=t.corners.right&&t.point.x>t.corners.center.x&&i.point.x<=t.corners.right&&i.point.x<t.corners.center.x&&(t.direction="Right",a=t.corners.right-t.point.x+20),t.direction&&a&&(n=Ut(e,t,i,a,!0))):(t.direction=r||It(t.direction,t.point,i.point),n=qt(t,i));return n}function vt(e,t,i){var n;i.corners=e.targetWrapper.corners,Mt(e.targetWrapper,t,i,e);var r=It(i.direction,t.point,i.point);t.direction!==i.direction||"Left"!==t.direction&&"Right"!==t.direction?(t.direction=r,n=qt(t,i)):(t.direction=r,n=Ut(e,t,i,e.targetWrapper.width/2+20),t.point=n[1],Mt(e.targetWrapper,t,i,e),n=Ut(e,t,i));return n}function yt(e,t,i){var n,r,o;i.corners=e.targetWrapper.corners,"Left"!==t.direction&&"Right"!==t.direction?i.corners.center.y!==t.point.y||i.corners.left<=t.point.x&&t.point.x<=i.corners.right?i.corners.center.y===t.point.y&&"Bottom"===e.segments[e.segments.length-2].direction||i.corners.center.y>t.point.y&&t.point.y>=i.corners.top?(r="Top",o=t.point.y-i.corners.top+20):i.corners.center.y===t.point.y&&"Top"===e.segments[e.segments.length-2].direction||i.corners.center.y<t.point.y&&t.point.y<=i.corners.bottom?(r="Bottom",o=i.corners.bottom-t.point.y+20):void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&t.corners.top<=t.point.y&&t.point.y<=t.corners.bottom&&(r=t.direction,o=t.point.y>i.point.y?t.point.y-t.corners.top+20:t.corners.bottom-t.point.y+20):(r="Top",o=i.corners.height/2+20):i.corners.center.x!==t.point.x||i.corners.top<t.point.y&&t.point.y<=i.corners.bottom?i.corners.center.x===t.point.x&&"Right"===e.segments[e.segments.length-2].direction||i.corners.center.x>t.point.x&&t.point.x>=i.corners.left?(r="Left",o=t.point.x-i.corners.left+20):i.corners.center.x===t.point.x&&"Left"===e.segments[e.segments.length-2].direction||i.corners.center.x<=t.point.x&&t.point.x<=i.corners.right?(r="Right",o=i.corners.right-t.point.x+20):void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&t.corners.left<=t.point.x&&t.point.x<=t.corners.right&&(r=t.direction,o=t.point.x>i.point.x?t.point.x-t.corners.left+20:t.corners.right-t.point.x+20):(r="Left",o=i.corners.width/2+20);var a="Left"===r||"Top"===r?-o:o,s="Left"===r||"Right"===r?0:90;n=t.point,t.point=zt(t.point,a,s),t.direction=E.direction(t.point,i.point),void 0===e.sourcePortWrapper||void 0===e.targetPortWrapper||t.corners.center.x!==i.corners.center.x&&t.corners.center.y!==i.corners.center.y||(t.direction=i.direction);var l=Ut(e,t,i);return l.splice(0,0,n),l}function bt(e,t,i){var n,r;(i.corners=e.targetWrapper.corners,void 0!==e.sourcePortWrapper)&&(r=Gt({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},hc(e.sourceWrapper),e.sourceWrapper.bounds,!1));var o=function(e,t,i,n){var r=!1;switch(i.direction){case"Left":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&"Right"===n&&t.point.x>i.point.x&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom||("Bottom"===n&&t.point.y>i.point.y||"Top"===n&&t.point.y<i.point.y)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right?(t.direction="Right"===n?t.point.y>i.point.y?"Top":"Bottom":t.point.x<i.point.x?"Right":"Left",r=!0):t.point.x>i.point.x&&(t.point.y>i.point.y||t.point.y<i.point.y)&&!(i.corners.top>t.point.y&&i.corners.bottom<t.point.y)?t.direction="Left":t.point.x<i.point.x&&t.point.y>i.point.y||t.point.x>i.point.x&&t.point.y<=i.point.y&&i.corners.top<t.point.y&&i.corners.center.y>=t.point.y?t.direction="Top":t.point.x<i.point.x&&t.point.y<i.point.y||t.point.x>i.point.x&&t.point.y>i.point.y&&i.corners.bottom<t.point.y&&i.corners.center.y>t.point.y?t.direction="Bottom":t.point.y===i.point.y&&t.point.x<i.point.x&&(t.direction="Right");break;case"Right":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&("Bottom"===n&&t.point.y>i.point.y||"Top"===n&&t.point.y<i.point.y)&&t.point.x>i.point.x&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right?(t.direction=t.point.x>i.point.x?"Left":"Right",r=!0):void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&"Left"===n&&t.point.x<i.point.x&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom?(t.direction=t.point.y>i.point.y?"Top":"Bottom",r=!0):t.point.x<i.point.x&&i.corners.top<=t.point.y&&i.corners.bottom>=t.point.y&&t.point.y===i.point.y||t.point.y>i.point.y&&t.point.x>i.point.x?t.direction="Top":t.point.y<i.point.y&&t.point.x>i.point.x?t.direction="Bottom":t.point.x<i.point.x&&(t.point.y>i.point.y||t.point.y<i.point.y)?t.direction="Right":t.point.y===i.point.y&&t.point.x>i.point.x&&(t.direction="Left");break;case"Top":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&"Bottom"===n&&t.point.y>i.point.y&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right||("Right"===n&&t.point.x>i.point.x||"Left"===n&&i.point.y>t.point.y&&i.point.x>t.point.x)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom?(t.direction="Bottom"===n?t.point.x>i.point.x?"Left":"Right":t.point.y<i.point.y?"Bottom":"Top",r=!0):t.point.x===i.point.x&&t.point.y<i.point.y?t.direction="Bottom":t.point.y>i.point.y&&t.point.x>i.corners.left&&t.point.x<i.corners.right?t.direction="Left":t.point.y>=i.point.y?t.direction="Top":t.point.y<i.point.y&&t.point.x>i.point.x?t.direction="Left":t.point.y<i.point.y&&t.point.x<i.point.x&&(t.direction="Right");break;case"Bottom":void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&(("Right"===n||"Left"===n&&i.point.x>t.point.x)&&t.point.y>i.point.y&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom||"Top"===n&&t.point.y<i.point.y&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right)?(t.direction="Right"===n||"Left"===n?t.point.y>i.point.y?"Top":"Bottom":t.point.x>i.point.x?"Left":"Right",r=!0):t.point.y<i.point.y&&t.point.x>i.corners.left&&i.corners.right>t.point.x?t.point.y<i.point.y&&t.point.x>i.corners.left&&i.corners.center.x>=t.point.x?t.direction="Left":t.point.y<i.point.y&&t.point.x<i.corners.right&&i.corners.center.x<t.point.x&&(t.direction="Right"):t.point.y>i.point.y&&t.point.x>i.point.x?t.direction="Left":t.point.y>i.point.y&&t.point.x<i.point.x?t.direction="Right":t.point.y<=i.point.y&&(t.point.x>i.point.x||i.point.x>t.point.x)&&(t.direction="Bottom")}return r}(e,t,i,r);return void 0!==e.sourcePortWrapper&&void 0!==e.targetPortWrapper&&i.direction===Jt(r)&&(("Left"===i.direction&&t.point.x>i.point.x||"Right"===i.direction&&t.point.x<i.point.x)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom||"Bottom"===i.direction&&t.point.y<i.point.y&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right)?n=yt(e,t,i):t.direction===i.direction?n=Ut(e,t,i):("Left"===i.direction&&t.point.x>i.point.x||"Right"===i.direction&&t.point.x<i.point.x)&&("Top"===t.direction||"Bottom"===t.direction)&&t.point.y<=i.point.y&&i.corners.top<=t.point.y&&i.corners.bottom>=t.point.y||"Top"===i.direction&&t.point.y>i.point.y||"Bottom"===i.direction&&t.point.y<i.point.y&&i.corners.left<=t.point.x&&i.corners.right>=t.point.x?n=yt(e,t,i):void 0!==e.sourceWrapper&&void 0!==e.targetWrapper&&void 0!==e.targetPortWrapper&&("Left"===t.direction||"Right"===t.direction)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom&&("Top"===i.direction||"Bottom"===i.direction)&&i.corners.center.x===t.corners.center.x?(t.direction="Top"===i.direction?"Bottom":"Top",n=Ut(e,t,i,"Top"===i.direction?t.corners.bottom-t.point.y+20:t.point.y-t.corners.top+20)):void 0!==e.sourceWrapper&&void 0!==e.targetWrapper&&void 0!==e.targetPortWrapper&&("Top"===t.direction||"Bottom"===t.direction)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right&&("Left"===i.direction||"Right"===i.direction)&&i.corners.center.y===t.corners.center.y?(t.direction="Left"===i.direction?"Right":"Left",n=Ut(e,t,i,"Left"===i.direction?t.corners.right-t.point.x+20:t.point.x-t.corners.left+20)):n=o?Ut(e,t,i,"Left"===t.direction||"Right"===t.direction?"Left"===t.direction?t.point.x-t.corners.left+20:t.corners.right-t.point.x+20:"Top"===t.direction?t.point.y-t.corners.top+20:t.corners.bottom-t.point.y+20):qt(t,i),n}function wt(e,t,i){var n,r={x:t.offsetX,y:t.offsetY},o=hc(i),a=Gt(r,o,i.bounds,!1),s=e.segments[0];return s.direction!==a&&(!function(e,t,i,n,r,o){var a,s,l=13,c=[];c.push(n),n.y===r.y&&("Left"===t&&r.x<n.x||"Right"===t&&r.x>n.x)||n.x===r.x&&("Top"===t&&r.y<n.y||"Bottom"===t&&r.y>n.y)||("Top"===t||"Bottom"===t?"Top"===t&&r.y<n.y&&r.y>n.y-l||"Bottom"===t&&r.y>n.y&&r.y<n.y+l?(s="Top"===t?i.top-l:i.bottom+l,c.push({x:n.x,y:s}),c.push({x:n.x+(r.x-n.x)/2,y:s}),c.push({x:n.x+(r.x-n.x)/2,y:r.y})):Math.abs(n.x-r.x)>l&&("Top"===t&&r.y<n.y||"Bottom"===t&&r.y>n.y)?c.push({x:n.x,y:r.y}):(s="Top"===t?i.top-l:i.bottom+l,a=r.x<n.x?i.left-l:i.right+l,c.push({x:n.x,y:s}),c.push({x:r.x,y:s})):"Left"===t&&r.x<n.x&&r.x>n.x-l||"right"===t&&r.x>n.x&&r.x<n.x+l?(a="Left"===t?i.left-l:i.right+l,c.push({x:a,y:n.y}),c.push({x:a,y:n.y+(r.y-n.y)/2}),c.push({x:r.x,y:n.y+(r.y-n.y)/2})):Math.abs(n.y-r.y)>l&&("Left"===t&&r.x<n.x||"Right"===t&&r.x>n.x)?c.push({x:r.x,y:n.y}):(a="Left"===t?i.left-l:i.right+l,c.push({x:a,y:n.y}),c.push({x:a,y:r.y})),o&&(c.push(e.points[0]),c.reverse()),e.points=c)}(s,a,o,s.points[0],s.points[s.points.length-1],!1),n=s.points[s.points.length-1],s.direction=E.direction(s.points[s.points.length-2],s.points[s.points.length-1])),n}function xt(e,t,i){var n,r=t.segments[t.segments.length-2],o=r.points[r.points.length-1];("Top"!==r.direction&&"Bottom"!==r.direction||o.x!==e[1].x)&&("Left"!==r.direction&&"Right"!==r.direction||o.y!==e[1].y)||(r.points[r.points.length-1]=e[1],n=E.direction(r.points[0],r.points[r.points.length-1]),void 0!==t.sourceWrapper&&void 0===t.sourcePortWrapper&&n===Jt(r.direction)&&("Left"===r.direction||"Right"===r.direction?r.points[0].x="Right"===r.direction?r.points[0].x-t.sourceWrapper.corners.width:r.points[0].x+t.sourceWrapper.corners.width:r.points[0].y="Bottom"===r.direction?r.points[0].y-t.sourceWrapper.corners.height:r.points[0].y+t.sourceWrapper.corners.height),r.direction=n,r.length=E.distancePoints(r.points[0],r.points[r.points.length-1]),e.splice(0,1))}function Ot(e,t,i,n){var r=e.sourcePortWrapper,o=e.targetPortWrapper,a=n?e.targetPadding:e.sourcePadding,s=n?o:r,l=new _(s.bounds.x-a,s.bounds.y-a,s.actualSize.width+2*a,s.actualSize.height+2*a),c=[l.topLeft,l.topRight,l.bottomRight,l.bottomLeft];c[c.length]=c[0];c.length;var d={x1:t.point.x,y1:t.point.y,x2:i.point.x,y2:i.point.y},h=n?i.point:t.point;return _t(d,c,!0,h)||h}function St(e,t){var i=[],n=Ua(e,e.corners,t);n.push(n[0]);for(var r=0;r<n.length-1;r++)i.push(Ct(n[r],n[r+1]));return i}function Ct(e,t){return{x1:e.x,y1:e.y,x2:t.x,y2:t.y}}function Pt(e,t,i){var n,r=e.rotateAngle+e.parentTransform;if(r){if(r<45)return t;if(r<=135)n={width:t.width,height:t.height,topLeft:t.bottomLeft,topCenter:t.middleLeft,topRight:t.topLeft,middleLeft:t.bottomCenter,center:i.center,middleRight:t.topCenter,bottomLeft:t.bottomRight,bottomCenter:t.middleRight,bottomRight:t.topRight,left:i.left,right:i.right,top:i.top,bottom:i.bottom};else if(r<=225)n={width:t.width,height:t.height,topLeft:t.bottomLeft,topCenter:t.bottomCenter,topRight:t.bottomRight,middleLeft:t.middleRight,center:i.center,middleRight:t.middleLeft,bottomLeft:t.topLeft,bottomCenter:t.topCenter,bottomRight:t.topRight,left:i.left,right:i.right,top:i.top,bottom:i.bottom};else{if(!(r<=315))return t;n={width:t.width,height:t.height,topLeft:t.topRight,topCenter:t.middleRight,topRight:t.bottomRight,middleLeft:t.topCenter,center:i.center,middleRight:t.bottomCenter,bottomLeft:t.topLeft,bottomCenter:t.middleLeft,bottomRight:t.bottomLeft,left:i.left,right:i.right,top:i.top,bottom:i.bottom}}return n}return t}function jt(e,t,i){var n=[];if(e.segments&&e.segments.length>0){var r=void 0,o=[],a=t.point;for(r=0;r<e.segments.length;r++){var s=e.segments[r];if((o=[]).push(a),r!==e.segments.length-1?(o.push(s.point),a=s.point):o.push(i.point),e.segments[r].points=o,e.segments.length>1&&E.equals(s.points[0],s.points[1])&&e.segments.splice(r,1),s)for(var l=0;l<s.points.length;l++)(l>0||0===r)&&n.push(s.points[l])}}return n}function It(e,t,i){return"Top"===e||"Bottom"===e?i.x>t.x?"Right":"Left":i.y>t.y?"Bottom":"Top"}function Et(e){if("Straight"===e.type||"Bezier"===e.type){if(0===e.segments.length||e.segments.length>0&&!E.isEmptyPoint(e.segments[e.segments.length-1].point)){var t=void 0;t="Bezier"===e.type?new Ir(e,"segments",{type:"Bezier"},!0):new jr(e,"segments",{type:"Straight"},!0),e.segments.push(t)}}else if(0===e.segments.length||e.segments[e.segments.length-1].direction){t=new Er(e,"segments",{type:"Orthogonal"},!0);e.segments.push(t)}}function Tt(e,t,i){var n=e.segments[t],r="Left"===n.direction||"Top"===n.direction?-n.length:n.length,o="Left"===n.direction||"Right"===n.direction?0:90,a=zt(i.point,r,o);return e.segments[t-1].length+=n.length,e.segments[t-1].points[1]=i.point=a,e.segments.splice(t,1),--t}function At(e,t,i){var n,r;e.sourcePortWrapper&&(r=Gt({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},hc(e.sourceWrapper),e.sourceWrapper.bounds,!1));Mt(e.targetWrapper,t,i,e);var o=It(i.direction,t.point,i.point);if(void 0===e.sourcePortWrapper||t.direction!==i.direction||("Top"!==t.direction&&"Bottom"!==t.direction||t.corners.center.x!==i.corners.center.x)&&("Left"!==t.direction&&"Right"!==t.direction||t.corners.center.y!==i.corners.center.y))if(i.point.x>=t.corners.left&&i.point.x<=t.corners.right&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom){t.direction=i.point.y>t.point.y?"Bottom":"Top",n=Ut(e,t,i,"Top"===t.direction?t.point.y-t.corners.top+20:t.corners.bottom-t.point.y+20)}else if(e.sourcePortWrapper&&r===Jt(o)){var a;("Left"===r||"Right"===r)&&t.point.y>=t.corners.top&&t.point.y<=t.corners.bottom?(t.direction=i.point.y>t.point.y?"Bottom":"Top",a=t.corners.height/2+20):("Top"===r||"Bottom"===r)&&t.point.x>=t.corners.left&&t.point.x<=t.corners.right&&(t.direction=i.point.x>t.point.x?"Right":"Left",a=t.corners.width/2+20),t.direction&&a?n=Ut(e,t,i,a,!0):(t.direction=o,n=qt(t,i))}else if(!e.sourcePortWrapper||r!==i.direction||"Top"!==r&&"Bottom"!==r||t.corners.center.x!==i.corners.center.x)t.direction=o,n=qt(t,i);else{t.direction=i.point.y>t.point.y?"Bottom":"Top",n=Ut(e,t,i,"Bottom"===t.direction?t.corners.bottom-t.point.y+20:t.point.y-t.corners.top+20)}else t.direction=o,n=Ut(e,t,i,"Top"===o||"Bottom"===o?e.sourceWrapper.height/2+20:e.sourceWrapper.width/2+20),t.point=n[1],"Left"===o||"Right"===o?(i.direction=o,i.point="Left"===o?i.corners.middleLeft:i.corners.middleRight):Mt(e.targetWrapper,t,i,e),n=Ut(e,t,i);return n}function Dt(e,t){if(void 0!==e.targetWrapper&&void 0===e.targetPortWrapper){if(hc(e.targetWrapper).containsPoint(t.point,1)){var i=e.targetWrapper,n=e.segments[e.segments.length-2],r=n.points[n.points.length-1],o=Jt(n.direction);"Bottom"===o?r.y<i.corners.bottom+1&&(n.points[n.points.length-1].y=i.corners.bottom+20,n.length=E.distancePoints(n.points[0],n.points[n.points.length-1])):"Top"===o?r.y>i.corners.top-1&&(n.points[n.points.length-1].y=i.corners.top-20,n.length=E.distancePoints(n.points[0],n.points[n.points.length-1])):"Left"===o?r.x>i.corners.left-1&&(n.points[n.points.length-1].x=i.corners.left-20,n.length=E.distancePoints(n.points[0],n.points[n.points.length-1])):"Right"===o&&r.x<i.corners.right+1&&(n.points[n.points.length-1].x=i.corners.right+20,n.length=E.distancePoints(n.points[0],n.points[n.points.length-1])),t.point=n.points[n.points.length-1]}}}function kt(e,t){for(var i=0;i<e.segments.length;i++)for(var n=e.segments[i],r=0;r<n.points.length;r++)(r>0||0===i)&&t.push(n.points[r]);return t}function Mt(e,t,i,n){var r,o={x:0,y:0},a=Pt(e,e.corners,e.bounds),s=t.margin,l=t.point;if(a.bottomCenter.y+s.bottom<l.y)r="Bottom",o=a.bottomCenter;else if(a.topCenter.y-s.top>l.y)r="Top",o=a.topCenter;else if(a.middleLeft.x-s.left>l.x)r="Left",o=a.middleLeft;else if(a.middleRight.x+s.right<l.x)r="Right",o=a.middleRight;else{var c=Math.abs(l.y-a.topCenter.y),d=Math.abs(l.x-a.middleRight.x),h=Math.abs(l.y-a.bottomCenter.y),p=Math.abs(l.x-a.middleLeft.x),u=Number.MAX_VALUE;u=c,r="Top",o=a.topCenter,u>d&&(u=d,r="Right",o=a.middleRight),u>h&&(u=h,r="Bottom",o=a.bottomCenter),u>p&&(r="Left",o=a.middleLeft)}i.point=o,i.direction=r;var f=Rt(a,Jt(i.direction));i.point=Nt(n,e,i.point,f,e===n.targetWrapper)}function Lt(e,t){var i={x:t.x,y:e.y},n=(E.findLength(e,i),E.findLength(i,t)),r=E.findLength(t,e),o=Math.asin(n/r);return o=180*o/Math.PI,e.x<t.x?e.y>t.y&&(o=360-o):o=e.y<t.y?180-o:180+o,o}function Rt(e,t){var i;switch(t){case"Left":i=e.middleLeft;break;case"Top":i=e.topCenter;break;case"Right":i=e.middleRight;break;case"Bottom":i=e.bottomCenter}return i}function zt(e,t,i){return E.transform(e,i,t)}function Nt(e,t,i,n,r){i={x:i.x,y:i.y},n={x:n.x,y:n.y};var o,a,s,l=E.findAngle(n,i),c=r?e.targetWrapper:e.sourceWrapper,d=r?e.targetPadding:e.sourcePadding,h=r||"Orthogonal"===e.type?i:n;E.transform(i,l,Math.max(c.actualSize.height/2,c.actualSize.width/2));o=c;var p=Cc(-c.parentTransform,c.offsetX,c.offsetY,i),u=Cc(-c.parentTransform,c.offsetX,c.offsetY,n);if("Orthogonal"===e.type){p.x===u.x&&(p.y<u.y?p.y-=5:p.y+=5),p.y===u.y&&(p.x<u.x?p.x-=5:p.x+=5),i=Cc(c.parentTransform,c.offsetX,c.offsetY,p)}else{r?E.findAngle(i,n):E.findAngle(n,i);if(r){var f=E.findAngle(i,n);n=E.transform({x:n.x,y:n.y},f,Math.max(c.actualSize.width,c.actualSize.height))}else{var g=E.findAngle(n,i);i=E.transform({x:i.x,y:i.y},g,Math.max(c.actualSize.width,c.actualSize.height))}}(e.sourcePadding||e.targetPadding)&&(a=new _(c.bounds.x-d,c.bounds.y-d,c.actualSize.width+2*d,c.actualSize.height+2*d)),c instanceof Ue&&c.data?(s=a?[a.topLeft,a.topRight,a.bottomRight,a.bottomLeft]:o.getPoints(),o.data.split("m").length-1+(o.data.split("M").length-1)===1&&(s[s.length]=s[0])):(s=a?[a.topLeft,a.topRight,a.bottomRight,a.bottomLeft]:Ua(c,c.corners))[s.length]=s[0];s.length;return _t({x1:i.x,y1:i.y,x2:n.x,y2:n.y},s,!0,h)||i}function Bt(e,t,i){return t.x=Math.round(100*t.x)/100,t.y=Math.round(100*t.y)/100,i?e.targetPoint=t:e.sourcePoint=t,t}function _t(e,t,i,n){var r,o=t.length,a={x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y},s=Ht(e,a);if(s&&(r=E.distancePoints(s,n)),isNaN(r)||r>0)for(var l=1;l<o-1;l++){var c=Ht(e,a={x1:t[l].x,y1:t[l].y,x2:t[l+1].x,y2:t[l+1].y});if(c){var d=E.distancePoints(c,n);if((isNaN(r)||r>d)&&(r=d,s=c),r>=0&&r<=1)break}}return s}function Ht(e,t){var i,n,r,o,a,s,l,c,d,h,p,u,f,g=e.x1,m=e.y1,v=e.x2,y=e.y2,b=t.x1,w=t.y1,x=t.x2,O=t.y2;return h=(i=y-m)*x+(r=g-v)*O+(a=v*m-g*y),0!==(d=i*b+r*w+a)&&0!==h&&Wt(d,h)?null:(c=(n=O-w)*v+(o=b-x)*y+(s=x*w-b*O),0!==(l=n*g+o*m+s)&&0!==c&&Wt(l,c)||0===(p=i*o-n*r)?null:(u=p<0?-p/2:p/2,u=0,{x:(f=r*s-o*a)<0?(f-u)/p:(f+u)/p,y:(f=n*a-i*s)<0?(f-u)/p:(f+u)/p}))}function Wt(e,t){return e*t>=0}function Ft(e,t,i){switch(t.direction){case"Left":t.point.x>e.left&&(i=t.point.x-e.left>i?t.point.x-e.left+i:i);break;case"Right":t.point.x<e.right&&(i=e.right-t.point.x>i?e.right-t.point.x+i:i);break;case"Top":t.point.y>e.top&&(i=t.point.y-e.top>i?t.point.y-e.top+i:i);break;case"Bottom":t.point.y<e.bottom&&(i=e.bottom-t.point.y>i?e.bottom-t.point.y+i:i)}return i}function qt(e,t){var i;switch(e.direction){case"Left":case"Right":var n={x:t.point.x,y:e.point.y};i=E.equals(e.point,n)||E.equals(t.point,n)?[e.point,t.point]:[e.point,n,t.point];break;case"Top":case"Bottom":var r={x:e.point.x,y:t.point.y};i=E.equals(e.point,r)||E.equals(t.point,r)?[e.point,t.point]:[e.point,r,t.point]}return i}function Ut(e,t,i,n,r){n||(n=20);var o,a,s,l=e.sourcePortWrapper,c=i.point.x-t.point.x,d=i.point.y-t.point.y;if(!r&&(Math.abs(c)<.001||Math.abs(d)<.001)&&void 0===i.direction)return[t.point,i.point];if(void 0===e.targetWrapper&&Math.abs(c)<=31&&Math.abs(d)<=31){if("Left"===t.direction||"Right"===t.direction?Math.abs(d)<12&&(t.direction=t.point.y>i.point.y?"Top":"Bottom"):Math.abs(c)<12&&(t.direction=t.point.x>i.point.x?"Left":"Right"),Math.abs(c)>12||Math.abs(d)>12)return qt(t,i);n+=5}return"Left"===t.direction||"Right"===t.direction?("Right"===t.direction?(void 0!==i.direction&&"Right"===i.direction&&(n=Math.max(t.point.x,i.point.x)-t.point.x+n),t.point.x>i.point.x&&void 0===l&&(n=-n)):(void 0!==i.direction&&"Left"===i.direction&&(n=t.point.x-Math.min(t.point.x,i.point.x)+n),(t.point.x>i.point.x||void 0!==l||"Left"===t.direction)&&(n=-n)),s=i.point.y-t.point.y,o=zt(t.point,n,0),0!==(s=i.point.y-o.y)&&(a=zt(o,i.point.y-o.y,90))):"Top"!==t.direction&&"Bottom"!==t.direction||("Bottom"===t.direction?void 0!==i.direction&&"Bottom"===i.direction&&(n=Math.max(t.point.y,i.point.y)-t.point.y+n):(void 0!==i.direction&&"Top"===i.direction&&(n=t.point.y-Math.min(t.point.y,i.point.y)+n),(t.point.y>i.point.y||void 0!==l||"Top"===t.direction)&&(n=-n)),s=i.point.x-t.point.x,o=(t.direction,zt(t.point,n,90)),0!==(s=i.point.x-o.x)&&(a=zt(o,i.point.x-o.x,0))),0===s?[t.point,i.point]:[t.point,o,a,i.point]}function Vt(e,t,i,n,r){var o;switch(void 0===r&&(r=20),void 0===i?(e.margin={left:2,right:2,top:2,bottom:2},t.margin={left:0,right:5,top:0,bottom:5}):"Bottom"===e.direction?t.corners.top>e.corners.bottom&&t.corners.top-e.corners.bottom<20&&(r=(t.corners.top-e.corners.bottom)/2):"Top"===e.direction?t.corners.bottom<e.corners.top&&e.corners.top-t.corners.bottom<20&&(r=(e.corners.top-t.corners.bottom)/2):"Right"===e.direction?t.corners.left>e.corners.right&&t.corners.left-e.corners.right<20&&(r=(t.corners.left-e.corners.right)/2):"Left"===e.direction&&t.corners.right<e.corners.left&&e.corners.left-t.corners.right<20&&(r=(e.corners.left-t.corners.right)/2),e.direction){case"Left":r=function(e,t,i,n){e.corners.left-e.margin.left>t.corners.left-t.margin.left&&e.corners.left-e.margin.left<=t.corners.right+t.margin.right?(("Bottom"===t.direction&&e.point.y<t.point.y||"Top"===t.direction&&e.point.y>t.point.y)&&(n+=e.corners.left-t.corners.left),n+=e.point.x-e.corners.left):void 0!==i&&"Top"!==i&&"Bottom"===t.direction&&e.point.y<t.point.y||void 0!==i&&"Bottom"!==i&&"Top"===t.direction&&t.point.y<e.point.y?n+=Math.abs(e.point.x-t.corners.right):n+=e.point.x-e.corners.left;return n}(e,t,i,r),o=zt(e.point,r,180);break;case"Right":r=function(e,t,i,n){e.corners.right+e.margin.right<t.corners.right+t.margin.right&&e.corners.right+e.margin.right>=t.corners.left-t.margin.left?(("Bottom"===t.direction&&e.point.y<t.point.y||"Top"===t.direction&&e.point.y>t.point.y)&&(i+=t.corners.right-e.corners.right),i+=e.corners.right-e.point.x):void 0!==n&&"Top"!==n&&"Bottom"===t.direction&&e.point.y<t.point.y||void 0!==n&&"Bottom"!==n&&"Top"===t.direction&&t.point.y<e.point.y?i+=Math.abs(e.point.x-t.corners.right):i+=e.corners.right-e.point.x;return i}(e,t,r,i),o=zt(e.point,r,0);break;case"Top":r=function(e,t,i,n){e.corners.top-e.margin.top>t.corners.top+t.margin.top&&e.corners.top-e.margin.top<=t.corners.bottom+t.margin.bottom?(("Right"===t.direction&&e.point.x<t.point.x||"Left"===t.direction&&e.point.x>t.point.x)&&(n+=e.corners.top-t.corners.top),n+=e.point.y-e.corners.top):void 0!==i&&"Left"!==i&&"Right"===t.direction&&e.point.x<t.point.x||void 0!==i&&"Right"!==i&&"Left"===t.direction&&t.point.x<e.point.x?n+=Math.abs(e.point.y-t.corners.bottom):n+=e.point.y-e.corners.top;return n}(e,t,i,r),o=zt(e.point,r,270);break;case"Bottom":r=function(e,t,i,n){e.corners.bottom+e.margin.bottom<t.corners.bottom+t.margin.bottom&&e.corners.bottom+e.margin.bottom>=t.corners.top-t.margin.top?(("Right"===t.direction&&e.point.x<t.point.x||"Left"===t.direction&&e.point.x>t.point.x)&&(i+=t.corners.bottom-e.corners.bottom),i+=e.corners.bottom-e.point.y):void 0!==n&&"Left"!==n&&"Right"===t.direction&&e.point.x<t.point.x||void 0!==n&&"Right"!==n&&"Left"===t.direction&&t.point.x<e.point.x?i+=Math.abs(e.point.y-t.corners.bottom):i+=e.corners.bottom-e.point.y;return i}(e,t,r,i),o=zt(e.point,r,90)}return void 0!==n?n.push(o):n=[e.point,o],"Top"===e.direction||"Bottom"===e.direction?Yt(o,"horizontal",e,t,n):"Right"!==e.direction&&"Left"!==e.direction||Yt(o,"vertical",e,t,n),n}function Yt(e,t,i,n,r){var o,a,s;"horizontal"===t?(i.margin={left:0,right:10,top:0,bottom:10},n.margin={left:0,right:10,top:0,bottom:10}):"vertical"===t&&(i.margin={left:10,right:0,top:10,bottom:0},n.margin={left:10,right:0,top:10,bottom:0});var l=20;if("horizontal"===t){switch(n.direction){case"Left":if(i.corners.right+i.margin.right<n.corners.left-n.margin.left&&(n.corners.left-i.corners.right>l||i.corners.top-i.margin.top<=n.point.y&&i.corners.bottom+i.margin.bottom>=n.point.y)){var c=Math.min(Math.abs(n.corners.left-i.corners.right)/2,20);l=i.corners.right-e.x+c}else l="Top"===i.direction&&e.y>n.point.y||"Bottom"===i.direction&&e.y<n.point.y?Math.min(n.corners.left,e.x)-e.x-20:e.x>=i.corners.left-i.margin.left&&e.x<=i.corners.right+i.margin.right?Math.min(n.corners.left,i.corners.left)-e.x-20:n.corners.left-e.x-20;break;case"Right":if(i.corners.left-i.margin.left>n.corners.right+n.margin.right&&(i.corners.left-n.corners.right>l||i.corners.top-i.margin.top<=n.point.y&&i.corners.bottom+i.margin.bottom>=n.point.y)){c=Math.min(Math.abs(i.corners.left-n.corners.right)/2,20);l=i.corners.left-e.x-c}else l="Top"===i.direction&&e.y>n.point.y||"Bottom"===i.direction&&e.y<n.point.y?Math.max(n.corners.right,e.x)-e.x+20:e.x>=i.corners.left-i.margin.left&&e.x<=i.corners.right+i.margin.right?Math.max(n.corners.right,i.corners.right)-e.x+20:n.corners.right-e.x+20}o=zt(e,l,0),a=zt(o,n.point.y-e.y,90),s=n.point}else if("vertical"===t){switch(n.direction){case"Top":if(i.corners.bottom+i.margin.bottom<n.corners.top-n.margin.top&&(n.corners.top-i.corners.bottom>l||i.corners.left-i.margin.left<=n.point.x&&i.corners.right+i.margin.right>=n.point.x)){c=Math.min(Math.abs(n.corners.top-i.corners.bottom)/2,20);l=i.corners.bottom-e.y+c}else l="Left"===i.direction&&e.x>n.point.x||"Right"===i.direction&&e.x<n.point.x?Math.min(n.corners.top,e.y)-e.y-20:e.y>=i.corners.top-i.margin.top&&e.y<=i.corners.bottom+i.margin.bottom?Math.min(n.corners.top,i.corners.top)-e.y-20:n.corners.top-e.y-20;break;case"Bottom":if(i.corners.top-i.margin.top>n.corners.bottom+n.margin.bottom&&(i.corners.top-n.corners.bottom>l||i.corners.left-i.margin.left<=n.point.x&&i.corners.right+i.margin.right>=n.point.x)){c=Math.min(Math.abs(i.corners.top-n.corners.bottom)/2,20);l=i.corners.top-e.y-c}else l="Left"===i.direction&&e.x>n.point.x||"Right"===i.direction&&e.x<n.point.x?Math.max(n.corners.bottom,e.y)-e.y+20:e.y>=i.corners.top-i.margin.top&&e.y<=i.corners.bottom+i.margin.bottom?Math.max(n.corners.bottom,i.corners.bottom)-e.y+20:n.corners.bottom-e.y+20}o=zt(e,l,90),a=zt(o,n.point.x-e.x,0),s=n.point}r.push(o),r.push(a),r.push(s)}function Xt(e,t){var i=e.direction;e.direction=t.direction,t.direction=i;var n=e.point;e.point=t.point,t.point=n;var r=e.corners;e.corners=t.corners,t.corners=r}function Gt(e,t,i,n){var r=void 0===t?i:t,o=r.topLeft,a=r.topRight,s=r.bottomRight,l=r.bottomLeft,c=r.center,d=Lt(c,e),h=Lt(c,s),p=Lt(c,l),u=Lt(c,o),f=Lt(c,a);return d>u&&d<f?"Top":d>=h&&d<p?"Bottom":d>=p&&d<=u?"Left":"Right"}function Zt(e){var t;return t=e.wrapper.children[0].bounds,"None"!==e.sourceDecorator.shape&&t.uniteRect(e.wrapper.children[1].bounds),"None"!==e.targetDecorator.shape&&t.uniteRect(e.wrapper.children[2].bounds),t}function Jt(e){switch(e){case"Top":return"Bottom";case"Bottom":return"Top";case"Left":return"Right";case"Right":return"Left"}return"auto"}var Qt,$t,Kt=!1;function ei(e,t,i,n,r){if(dt=i+t==="topright"?void 0:r,dt=r,Kt=!!n,!e)return{left:0,top:0};t||(t="left"),i||(i="top"),pt=e.ownerDocument,ht=e;return function(e,t,i){switch(ct=ht.getBoundingClientRect(),t+e){case"topcenter":ti(di(),i),ii(si(),i);break;case"topright":ti(ci(),i),ii(si(),i);break;case"centercenter":ti(di(),i),ii(ai(),i);break;case"centerright":ti(ci(),i),ii(ai(),i);break;case"centerleft":ti(li(),i),ii(ai(),i);break;case"bottomcenter":ti(di(),i),ii(oi(),i);break;case"bottomright":ti(ci(),i),ii(oi(),i);break;case"bottomleft":ti(li(),i),ii(oi(),i);break;default:case"topleft":ti(li(),i),ii(si(),i)}return i}(t.toLowerCase(),i.toLowerCase(),{left:0,top:0})}function ti(e,t){t.left=e}function ii(e,t){t.top=e}function ni(){return pt.documentElement.scrollTop||pt.body.scrollTop}function ri(){return pt.documentElement.scrollLeft||pt.body.scrollLeft}function oi(){return Kt?ct.bottom:ct.bottom+ni()}function ai(){return si()+ct.height/2}function si(){return Kt?ct.top:ct.top+ni()}function li(){return ct.left+ri()}function ci(){return ct.right+ri()-(dt?dt.width:0)}function di(){return li()+ct.width/2}function hi(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var r=e.getBoundingClientRect();if($t=t,Qt=e.ownerDocument,n||(n=ei(e,"left","top")),i.X){var o=$t?bi():Ai(),a=Ci(),s=Pi(),l=a-n.left,c=n.left+r.width-s;r.width>o?n.left=l>0&&c<=0?s-r.width:c>0&&l<=0?a:l>c?s-r.width:a:l>0?n.left+=l:c>0&&(n.left-=c)}if(i.Y){var d=$t?wi():Ti(),h=Si(),p=ji(),u=h-n.top,f=n.top+r.height-p;r.height>d?n.top=u>0&&f<=0?p-r.height:f>0&&u<=0?h:u>f?p-r.height:h:u>0?n.top+=u:f>0&&(n.top-=f)}return n}function pi(e,t,i,n){void 0===t&&(t=null);var r=ei(e,"left","top");i&&(r.left=i),n&&(r.top=n);var o=[];$t=t,Qt=e.ownerDocument;var a=e.getBoundingClientRect(),s=r.top,l=r.left,c=r.left+a.width,d=yi(s,r.top+a.height),h=gi(l,c);return d.topSide&&o.push("top"),h.rightSide&&o.push("right"),h.leftSide&&o.push("left"),d.bottomSide&&o.push("bottom"),o}function ui(e,t,i,n,r,o,a,s,l){if(void 0===a&&(a=null),void 0===s&&(s={X:!0,Y:!0}),t&&e&&r&&o&&(s.X||s.Y)){var c={TL:null,TR:null,BL:null,BR:null},d={TL:null,TR:null,BL:null,BR:null},h=e.getBoundingClientRect(),p={posX:r,posY:o,offsetX:i,offsetY:n,position:{left:0,top:0}};$t=a,Qt=t.ownerDocument,function(e,t,i,n,r){i.position=ei(e,i.posX,i.posY,n,r),t.TL=ei(e,"left","top",n,r),t.TR=ei(e,"right","top",n,r),t.BR=ei(e,"left","bottom",n,r),t.BL=ei(e,"right","bottom",n,r)}(t,c,p,l,h),fi(d,p,h),s.X&&mi(t,d,c,p,h,!0),s.Y&&c.TL.top>-1&&vi(t,d,c,p,h,!0),function(e,t,i){var n=0,r=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){var o=ei(e.offsetParent,"left","top",!1,i);n=o.left,r=o.top}e.style.top=t.position.top+t.offsetY-r+"px",e.style.left=t.position.left+t.offsetX-n+"px"}(e,p,h)}}function fi(e,t,i){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+i.width},e.BL={top:e.TL.top+i.height,left:e.TL.left},e.BR={top:e.TL.top+i.height,left:e.TL.left+i.width}}function gi(e,t){var i=!1,n=!1;return e-Ei()<Ci()&&(i=!0),t>Pi()&&(n=!0),{leftSide:i,rightSide:n}}function mi(e,t,i,n,r,o){var a=gi(t.TL.left,t.TR.left);i.TL.left-Ei()<=Ci()&&(a.leftSide=!1),i.TR.left>=Pi()&&(a.rightSide=!1),(a.leftSide&&!a.rightSide||!a.leftSide&&a.rightSide)&&("right"===n.posX?n.posX="left":n.posX="right",n.offsetX=n.offsetX+r.width,n.offsetX=-1*n.offsetX,n.position=ei(e,n.posX,n.posY,!1),fi(t,n,r),o&&mi(e,t,i,n,r,!1))}function vi(e,t,i,n,r,o){var a=yi(t.TL.top,t.BL.top);i.TL.top-Ii()<=Si()&&(a.topSide=!1),i.BL.top>=ji()&&(a.bottomSide=!1),(a.topSide&&!a.bottomSide||!a.topSide&&a.bottomSide)&&("top"===n.posY?n.posY="bottom":n.posY="top",n.offsetY=n.offsetY+r.height,n.offsetY=-1*n.offsetY,n.position=ei(e,n.posX,n.posY,!1,r),fi(t,n,r),o&&vi(e,t,i,n,r,!1))}function yi(e,t){var i=!1,n=!1;return e-Ii()<Si()&&(i=!0),t>ji()&&(n=!0),{topSide:i,bottomSide:n}}function bi(){return $t.getBoundingClientRect().width}function wi(){return $t.getBoundingClientRect().height}function xi(){return $t.getBoundingClientRect().left}function Oi(){return $t.getBoundingClientRect().top}function Si(){return $t?Oi():0}function Ci(){return $t?xi():0}function Pi(){return $t?Ei()+xi()+bi():Ei()+Ai()}function ji(){return $t?Ii()+Oi()+wi():Ii()+Ti()}function Ii(){return Qt.documentElement.scrollTop||Qt.body.scrollTop}function Ei(){return Qt.documentElement.scrollLeft||Qt.body.scrollLeft}function Ti(){return window.innerHeight}function Ai(){var e=window.innerWidth;return e-(e-(Object(r.J)(document.documentElement)?0:document.documentElement.offsetWidth))}var Di=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ki=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Mi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Di(t,e),ki([Object(r.q)("left")],t.prototype,"X",void 0),ki([Object(r.q)("top")],t.prototype,"Y",void 0),t}(r.d),Li="e-popup",Ri="e-rtl",zi="e-popup-open",Ni="e-popup-close",Bi=function(e){function t(t,i){return e.call(this,i,t)||this}return Di(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"width":Object(r.V)(this.element,{width:Object(r.D)(e.width)});break;case"height":Object(r.V)(this.element,{height:Object(r.D)(e.height)});break;case"zIndex":Object(r.V)(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var o=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+o).toString()+"px";break;case"offsetY":var a=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+a).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.remove(Li,Ri,zi,Ni),this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add(Li);var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=Object(r.D)(this.width)),"auto"!==this.height&&(e.height=Object(r.D)(this.height)),Object(r.V)(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){r.c.isDevice&&r.m.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];r.m.add(i,"scroll",this.scrollRefresh,this)}},t.prototype.unwireEvents=function(){r.c.isDevice&&r.m.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];r.m.remove(i,"scroll",this.scrollRefresh)}},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||Object(r.J)(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"===typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,t){for(var i=this.getScrollableParent(e),n=0;n<i.length;n++)if(!this.isElementVisible(e,i[n]))return!1;return!0},t.prototype.isElementVisible=function(e,t){var i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(Object(r.J)(this.checkGetBoundingClientRect(t))){var n=window,o={top:n.scrollY,left:n.scrollX,right:n.scrollX+n.outerWidth,bottom:n.scrollY+n.outerHeight},a=ei(e),s={top:a.top,left:a.left,right:a.left+i.width,bottom:a.top+i.height},l={top:o.bottom-s.top,left:o.right-s.left,bottom:s.bottom-o.top,right:s.right-o.left};return l.top>0&&l.left>0&&l.right>0&&l.bottom>0}var c=t.getBoundingClientRect();return!(i.bottom<c.top)&&!(i.bottom>c.bottom)&&!(i.right>c.right)&&!(i.left<c.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(Ri):this.element.classList.remove(Ri)},t.prototype.setContent=function(){Object(r.J)(this.content)||(this.element.innerHTML="","string"===typeof this.content?this.element.textContent=this.content:this.element.appendChild(this.content))},t.prototype.orientationOnChange=function(){var e=this;setTimeout((function(){e.refreshPosition()}),200)},t.prototype.refreshPosition=function(e,t){Object(r.J)(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()},t.prototype.reposition=function(){var e,t,i=this.getRelateToElement();if("number"===typeof this.position.X&&"number"===typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"===typeof this.position.X&&"number"===typeof this.position.Y||"number"===typeof this.position.X&&"string"===typeof this.position.Y){var n=this.element.style.display,o=void 0;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(o=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),e="string"===typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=n,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=o)}else if(i){n=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=n}else e={left:0,top:0};Object(r.J)(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(t){return null}},t.prototype.getAnchorPosition=function(e,t,i,n,o){var a=this.checkGetBoundingClientRect(t),s=this.checkGetBoundingClientRect(e);if(Object(r.J)(a)||Object(r.J)(s))return null;var l=e,c={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?c=ei(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==l.tagName&&(t=t.parentElement),c=function(e,t){var i=!1,n={left:0,top:0},o=e;if(!e||!t)return n;for(Object(r.J)(t.offsetParent)&&"fixed"===t.style.position&&(i=!0);(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;for(e=o;(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left-=e.scrollLeft,n.top-=e.scrollTop,e=e.parentElement;return n}(l,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?c.left+=window.innerWidth/2-a.width/2:"container"===this.targetType?c.left+=s.width/2-a.width/2:c.left+=s.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?c.left+=window.innerWidth-a.width:"container"===this.targetType?c.left+=s.width-a.width:c.left+=s.width}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?c.top+=window.innerHeight/2-a.height/2:"container"===this.targetType?c.top+=s.height/2-a.height/2:c.top+=s.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?c.top+=window.innerHeight-a.height:"container"===this.targetType?c.top+=s.height-a.height:c.top+=s.height}return c.left+=n,c.top+=o,c},t.prototype.callFlip=function(e){var t=this.getRelateToElement();ui(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==pi(this.element,this.viewPortElement).length)if(Object(r.J)(this.viewPortElement)){var t=hi(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(Object(r.J)(i)||Object(r.J)(n))return null;e&&!0===e.Y&&(n.top>i.top?this.element.style.top="0px":n.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-n.bottom)+"px")),e&&!0===e.X&&(n.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-n.right)+"px":n.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-i.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,t){var i=this;if(this.wireEvents(),1e3===this.zIndex||!Object(r.J)(t)){var n=Object(r.J)(t)?this.element:t;this.zIndex=Hi(n),Object(r.V)(this.element,{zIndex:this.zIndex})}e=Object(r.J)(e)||"object"!==typeof e?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(Object(r.Q)([this.element],Ni),Object(r.t)([this.element],zi),this.checkCollision(),Object(r.Q)([this.element],zi),Object(r.t)([this.element],Ni)),Object(r.J)(e)?(Object(r.Q)([this.element],Ni),Object(r.t)([this.element],zi),this.trigger("open")):(e.begin=function(){i.isDestroyed||(Object(r.Q)([i.element],Ni),Object(r.t)([i.element],zi))},e.end=function(){i.isDestroyed||i.trigger("open")},new r.b(e).animate(this.element))},t.prototype.hide=function(e){var t=this;e=Object(r.J)(e)||"object"!==typeof e?this.hideAnimation:e,Object(r.J)(e)?(Object(r.Q)([this.element],zi),Object(r.t)([this.element],Ni),this.trigger("close")):(e.end=function(){t.isDestroyed||(Object(r.Q)([t.element],zi),Object(r.t)([t.element],Ni),t.trigger("close"))},new r.b(e).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),_i(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var t=e.parentElement;t&&"HTML"!==t.tagName;){var i=getComputedStyle(t);"fixed"===i.position&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,Object(r.J)(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},ki([Object(r.q)("auto")],t.prototype,"height",void 0),ki([Object(r.q)("auto")],t.prototype,"width",void 0),ki([Object(r.q)(null)],t.prototype,"content",void 0),ki([Object(r.q)("container")],t.prototype,"targetType",void 0),ki([Object(r.q)(null)],t.prototype,"viewPortElement",void 0),ki([Object(r.q)({X:"none",Y:"none"})],t.prototype,"collision",void 0),ki([Object(r.q)("")],t.prototype,"relateTo",void 0),ki([Object(r.g)({},Mi)],t.prototype,"position",void 0),ki([Object(r.q)(0)],t.prototype,"offsetX",void 0),ki([Object(r.q)(0)],t.prototype,"offsetY",void 0),ki([Object(r.q)(1e3)],t.prototype,"zIndex",void 0),ki([Object(r.q)(!1)],t.prototype,"enableRtl",void 0),ki([Object(r.q)("reposition")],t.prototype,"actionOnScroll",void 0),ki([Object(r.q)(null)],t.prototype,"showAnimation",void 0),ki([Object(r.q)(null)],t.prototype,"hideAnimation",void 0),ki([Object(r.l)()],t.prototype,"open",void 0),ki([Object(r.l)()],t.prototype,"close",void 0),ki([Object(r.l)()],t.prototype,"targetExitViewport",void 0),t=ki([r.p],t)}(r.i);function _i(e,t){for(var i=getComputedStyle(e),n=[],r=/(auto|scroll)/,o=e.parentElement;o&&"HTML"!==o.tagName;){var a=getComputedStyle(o);"absolute"===i.position&&"static"===a.position||!r.test(a.overflow+a.overflowY+a.overflowX)||n.push(o),o=o.parentElement}return t||n.push(document),n}function Hi(e){for(var t=e.parentElement,i=[];t&&"BODY"!==t.tagName;){var n=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),o=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==n&&"static"!==o&&i.push(n),t=t.parentElement}for(var a=[],s=0;s<document.body.children.length;s++)if(!e.isEqualNode(document.body.children[s])){n=document.defaultView.getComputedStyle(document.body.children[s],null).getPropertyValue("z-index"),o=document.defaultView.getComputedStyle(document.body.children[s],null).getPropertyValue("position");"auto"!==n&&"static"!==o&&a.push(n)}a.push("999");var l=[];if(!Object(r.J)(e.parentElement)&&"BODY"!==e.parentElement.tagName){var c=[].slice.call(e.parentElement.children);for(s=0;s<c.length;s++){n=document.defaultView.getComputedStyle(c[s],null).getPropertyValue("z-index"),o=document.defaultView.getComputedStyle(c[s],null).getPropertyValue("position");"auto"!==n&&"static"!==o&&l.push(n)}}var d=i.concat(a,l),h=Math.max.apply(Math,d)+1;return h>2147483647?2147483647:h}var Wi,Fi,qi,Ui,Vi,Yi,Xi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Gi=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Zi="e-tooltip",Ji="e-rtl",Qi="e-tip-content",$i="e-arrow-tip",Ki="e-arrow-tip-outer",en="e-arrow-tip-inner",tn="e-tip-bottom",nn="e-tip-top",rn="e-tip-left",on="e-tip-right",an="e-popup-open",sn="e-popup-close",ln="e-lib",cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xi(t,e),Gi([Object(r.q)({effect:"FadeIn",duration:150,delay:0})],t.prototype,"open",void 0),Gi([Object(r.q)({effect:"FadeOut",duration:150,delay:0})],t.prototype,"close",void 0),t}(r.d),dn=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.isBlazorTooltip=!1,n.contentTargetValue=null,n.contentEvent=null,n.contentAnimation=null,n}return Xi(t,e),t.prototype.initialize=function(){this.formatPosition(),this.isServerRender()||Object(r.t)([this.element],Zi)},t.prototype.isServerRender=function(){return Object(r.I)()&&this.isServerRendered},t.prototype.formatPosition=function(){var e,t;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1])},t.prototype.renderArrow=function(){if(this.setTipClass(this.position),this.isServerRender()){e=this.tooltipEle.querySelector("."+$i);Object(r.t)([e.querySelector("."+Ki)],this.tipClass),Object(r.t)([e.querySelector("."+en)],this.tipClass),this.tooltipEle.appendChild(e)}else{var e;(e=this.createElement("div",{className:$i+" "+this.tipClass})).appendChild(this.createElement("div",{className:Ki+" "+this.tipClass})),e.appendChild(this.createElement("div",{className:en+" "+this.tipClass})),this.tooltipEle.appendChild(e)}},t.prototype.setTipClass=function(e){0===e.indexOf("Right")?this.tipClass=rn:0===e.indexOf("Bottom")?this.tipClass=nn:0===e.indexOf("Left")?this.tipClass=on:this.tipClass=tn},t.prototype.renderPopup=function(e){var t=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove(ln),this.popupObj=new Bi(this.tooltipEle,{height:this.height,width:this.width,position:{X:t.left,Y:t.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="block";var t=ei(e,this.tooltipPositionX,this.tooltipPositionY),i=this.calculateTooltipOffset(this.position),n=this.collisionFlipFit(e,t.left+i.left,t.top+i.top);return this.tooltipEle.style.display="",n},t.prototype.reposition=function(e){var t=this.getTooltipPosition(e);this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind()},t.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)},t.prototype.closePopupHandler=function(){Object(r.R)(this.element.id+"content","Content"),this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)},t.prototype.calculateTooltipOffset=function(e){var t={top:0,left:0},i=this.tooltipEle.offsetWidth,n=this.tooltipEle.offsetHeight,r=this.tooltipEle.querySelector("."+$i),o=r?r.offsetWidth:0,a=r?r.offsetHeight:0,s=this.showTipPointer?0:8,l=a/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),c=o/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(s+=2),e){case"RightTop":t.left+=o+s,t.top-=n-l;break;case"RightCenter":t.left+=o+s,t.top-=n/2;break;case"RightBottom":t.left+=o+s,t.top-=l;break;case"BottomRight":t.top+=a+s,t.left-=c;break;case"BottomCenter":t.top+=a+s,t.left-=i/2;break;case"BottomLeft":t.top+=a+s,t.left-=i-c;break;case"LeftBottom":t.left-=o+i+s,t.top-=l;break;case"LeftCenter":t.left-=o+i+s,t.top-=n/2;break;case"LeftTop":t.left-=o+i+s,t.top-=n-l;break;case"TopLeft":t.top-=n+a+s,t.left-=i-c;break;case"TopRight":t.top-=n+a+s,t.left-=c;break;default:t.top-=n+a+s,t.left-=i/2}return t.left+=this.offsetX,t.top+=this.offsetY,t},t.prototype.updateTipPosition=function(e){var t=this.tooltipEle.querySelectorAll(".e-arrow-tip,.e-arrow-tip-outer,."+en),i=[tn,nn,rn,on];Object(r.Q)(t,i),this.setTipClass(e),Object(r.t)(t,this.tipClass)},t.prototype.adjustArrow=function(e,t,i,n){if(!1!==this.showTipPointer){var r,o;this.updateTipPosition(t),this.tooltipEle.style.display="block";var a,s=this.tooltipEle.clientWidth,l=this.tooltipEle.clientHeight,c=this.tooltipEle.querySelector("."+$i),d=this.tooltipEle.querySelector("."+en),h=c.offsetWidth,p=c.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===tn||this.tipClass===nn){if(this.tipClass===tn?(o="99.9%",d.style.top="-"+(p-2)+"px"):(o=-(p-1)+"px",d.style.top="-"+(p-6)+"px"),e)r=(a="Center"!==i||s>e.offsetWidth||this.mouseTrail)&&"Left"===i||!a&&"End"===this.tipPointerPosition?s-h-2+"px":a&&"Right"===i||!a&&"Start"===this.tipPointerPosition?"2px":s/2-h/2+"px"}else this.tipClass===on?(r="99.9%",d.style.left="-"+(h-2)+"px"):(r=-(h-1)+"px",d.style.left=h-2-h+"px"),o=(a="Center"!==n||l>e.offsetHeight||this.mouseTrail)&&"Top"===n||!a&&"End"===this.tipPointerPosition?l-p-2+"px":a&&"Bottom"===n||!a&&"Start"===this.tipPointerPosition?"2px":l/2-p/2+"px";c.style.top=o,c.style.left=r}},t.prototype.renderContent=function(e){var t=this.tooltipEle.querySelector("."+Qi);if(this.cssClass&&Object(r.t)([this.tooltipEle],this.cssClass.split(" ")),e&&!Object(r.J)(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),Object(r.J)(this.content))e&&!Object(r.J)(e.getAttribute("data-content"))&&(t.innerHTML=e.getAttribute("data-content"));else if(this.isBlazorTooltip||!this.isServerRender())if(t.innerHTML="",this.content instanceof HTMLElement)t.appendChild(this.content);else if("string"===typeof this.content&&this.content.indexOf("<div>Blazor")<0)this.enableHtmlSanitizer&&this.setProperties({content:r.r.sanitize(this.content)},!0),t.innerHTML=this.content;else{var i=Object(r.z)(this.content)({},this,"content",this.element.id+"content",void 0,void 0,t);i&&Object(r.u)(i,t),this.renderReactTemplates(),"string"===typeof this.content&&this.content.indexOf("<div>Blazor")>=0&&(this.isBlazorTemplate=!0,Object(r.Y)(this.element.id+"content","Content",this))}},t.prototype.renderCloseIcon=function(){if(this.isSticky){var e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),r.m.add(e,r.c.touchStartEvent,this.onStickyClose,this)}},t.prototype.addDescribedBy=function(e,t){var i=(e.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),Object(r.v)(e,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})},t.prototype.removeDescribedBy=function(e){var t=e.getAttribute("data-tooltip-id"),i=(e.getAttribute("aria-describedby")||"").split(/\s+/),n=i.indexOf(t);-1!==n&&i.splice(n,1),e.removeAttribute("data-tooltip-id");var r=i.join(" ").trim();r?e.setAttribute("aria-describedby",r):e.removeAttribute("aria-describedby")},t.prototype.tapHoldHandler=function(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)},t.prototype.touchEndHandler=function(e){var t=this;if(!this.isSticky){this.autoCloseTimer=setTimeout((function(){t.close()}),1500)}},t.prototype.targetClick=function(e){var t;t=this.target?Object(r.y)(e.target,this.target):this.element,Object(r.J)(t)||(null===t.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,t))},t.prototype.targetHover=function(e){var t;if(t=this.target?Object(r.y)(e.target,this.target):this.element,!(Object(r.J)(t)||null!==t.getAttribute("data-tooltip-id")&&0===this.closeDelay)){for(var i=0,n=[].slice.call(document.querySelectorAll("[data-tooltip-id= "+this.ctrlId+"_content]"));i<n.length;i++){var o=n[i];this.restoreElement(o)}this.showTooltip(t,this.animation.open,e)}},t.prototype.showTooltip=function(e,t,i){var n=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:this.tooltipEle,isInteracted:!Object(r.J)(i)};this.trigger("beforeRender",this.tooltipEventArgs,function(r){n.beforeRenderCallback(r,e,i,t)}.bind(this))},t.prototype.beforeRenderCallback=function(e,t,i,n){var o=!1;if(e.cancel)this.isHidden=!0,this.clear();else if(this.isHidden=!1,Object(r.J)(this.tooltipEle)){if(this.isServerRender()){this.contentTargetValue=t,this.contentEvent=i,this.contentAnimation=n;this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{enableTooltip:"true"}),o=!0}else this.ctrlId=this.element.getAttribute("id")?Object(r.G)(this.element.getAttribute("id")):Object(r.G)("tooltip"),this.tooltipEle=this.createElement("div",{className:"e-tooltip-wrap e-popup e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+Object(r.D)(this.width)+";height:"+Object(r.D)(this.height)+";position:absolute;"}),this.beforeRenderBlazor(t,this);o||this.afterRenderBlazor(t,i,n,this)}else this.isServerRender()&&(Object(r.t)([this.tooltipEle],an),document.body.appendChild(this.tooltipEle),this.renderCloseIcon(),this.renderPopup(t)),t&&(this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),r.b.stop(this.tooltipEle),this.reposition(t),this.afterRenderBlazor(t,i,n,this))},t.prototype.contentUpdated=function(e){Object(r.J)(this.tooltipEle)&&this.isServerRender()&&(this.ctrlId=this.element.id,this.tooltipEle=document.querySelector("#"+this.ctrlId+"_content"),this.tooltipEle&&(this.tooltipEle.setAttribute("style","width:"+Object(r.D)(this.width)+";height:"+Object(r.D)(this.height)+";position:absolute;"),this.beforeRenderBlazor(this.contentTargetValue,this),this.afterRenderBlazor(this.contentTargetValue,this.contentEvent,this.contentAnimation,this),this.contentTargetValue=this.contentEvent=this.contentAnimation=null))},t.prototype.beforeRenderBlazor=function(e,t){e&&(r.c.isDevice&&Object(r.t)([t.tooltipEle],"e-bigger"),"auto"!==t.width&&(t.tooltipEle.style.maxWidth=Object(r.D)(t.width)),this.isServerRender()||t.tooltipEle.appendChild(t.createElement("div",{className:Qi})),document.body.appendChild(t.tooltipEle),Object(r.Q)([t.tooltipEle],"e-hidden"),t.addDescribedBy(e,t.ctrlId+"_content"),t.renderContent(e),Object(r.t)([t.tooltipEle],an),t.showTipPointer&&t.renderArrow(),t.renderCloseIcon(),t.renderPopup(e),t.adjustArrow(e,t.position,t.tooltipPositionX,t.tooltipPositionY),r.b.stop(t.tooltipEle),t.reposition(e))},t.prototype.afterRenderBlazor=function(e,t,i,n){if(e){Object(r.Q)([n.tooltipEle],an),Object(r.t)([n.tooltipEle],sn),n.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:e,event:t||null,element:n.tooltipEle,isInteracted:!Object(r.J)(t)},n.needTemplateReposition()&&!n.mouseTrail&&(n.tooltipEle.style.display="none");n.trigger("beforeOpen",n.tooltipEventArgs,function(r){n.beforeOpenCallback(r,e,i,t)}.bind(n))}},t.prototype.beforeOpenCallback=function(e,t,i,n){var r=this;if(e.cancel)this.isHidden=!0,this.clear(),this.restoreElement(t);else{var o={name:i.effect,duration:i.duration,delay:i.delay,timingFunction:"easeOut"};if("None"===i.effect&&(o=void 0),this.openDelay>0){this.showTimer=setTimeout((function(){r.popupObj&&r.popupObj.show(o,t)}),this.openDelay)}else this.popupObj&&this.popupObj.show(o,t)}n&&this.wireMouseEvents(n,t)},t.prototype.needTemplateReposition=function(){return!Object(r.J)(this.viewContainerRef)&&"string"!==typeof this.viewContainerRef||this.isServerRender()&&this.isBlazorTemplate},t.prototype.checkCollision=function(e,t,i){var n={left:t,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},r=pi(this.tooltipEle,this.target?this.element:null,t,i);return r.length>0&&(n.horizontal=r.indexOf("left")>=0?"Right":r.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=r.indexOf("top")>=0?"Bottom":r.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},t.prototype.collisionFlipFit=function(e,t,i){var n=this.checkCollision(e,t,i),r=n.position;if(this.tooltipPositionY!==n.vertical&&(r=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===r.indexOf("Left")&&(n.vertical="LeftTop"===r||"LeftCenter"===r?"Top":"Bottom",r=n.vertical+"Left"),0===r.indexOf("Right")&&(n.vertical="RightTop"===r||"RightCenter"===r?"Top":"Bottom",r=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:r},this.trigger("beforeCollision",this.tooltipEventArgs),n.position!==r){var o=ei(e,n.horizontal,n.vertical);this.adjustArrow(e,r,n.horizontal,n.vertical);var a=this.calculateTooltipOffset(r);a.top-=-1!=="TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.offsetY:0,a.left-=-1!=="RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.offsetX:0,n.position=r,n.left=o.left+a.left,n.top=o.top+a.top}else this.adjustArrow(e,r,n.horizontal,n.vertical);var s={left:n.left,top:n.top},l=hi(this.tooltipEle,this.target?this.element:null,{X:!0,Y:!1},s).left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===r.indexOf("Bottom")||0===r.indexOf("Top"))){var c=this.tooltipEle.querySelector("."+$i),d=parseInt(c.style.left,10)-(l-n.left);d<0?d=0:d+c.offsetWidth>this.tooltipEle.clientWidth&&(d=this.tooltipEle.clientWidth-c.offsetWidth),c.style.left=d.toString()+"px"}return this.tooltipEle.style.display="",s.left=l,s},t.prototype.hideTooltip=function(e,t,i){var n=this;if(this.closeDelay>0){clearTimeout(this.hideTimer),clearTimeout(this.showTimer);this.hideTimer=setTimeout((function(){n.closeDelay&&n.tooltipEle&&n.isTooltipOpen||n.tooltipHide(e,t,i)}),this.closeDelay)}else this.tooltipHide(e,t,i)},t.prototype.tooltipHide=function(e,t,i){var n,o=this;n=t?this.target?i||t.target:this.element:document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]"),this.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:n,event:t||null,element:this.tooltipEle,isInteracted:!Object(r.J)(t)},this.trigger("beforeClose",this.tooltipEventArgs,(function(t){t.cancel?o.isHidden=!1:o.isServerRender()?o.blazorHide(e,n):o.popupHide(e,n)}))},t.prototype.blazorHide=function(e,t){var i=this;this.popupObj?this.popupHide(e,t):setTimeout((function(){i.popupHide(e,t)}),200)},t.prototype.popupHide=function(e,t){t&&this.restoreElement(t),this.isHidden=!0;var i={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};"None"===e.effect&&(i=void 0),this.popupObj&&this.popupObj.hide(i)},t.prototype.restoreElement=function(e){this.unwireMouseEvents(e),Object(r.J)(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)},t.prototype.clear=function(){if(this.tooltipEle&&(Object(r.Q)([this.tooltipEle],sn),Object(r.t)([this.tooltipEle],an)),this.isHidden){if(this.popupObj&&this.popupObj.destroy(),this.isServerRender()&&this.tooltipEle){this.tooltipEle.style.display="none";this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",{enableTooltip:"false"}),Object(r.P)(this.tooltipEle)}else this.tooltipEle&&Object(r.P)(this.tooltipEle);this.tooltipEle=null,this.popupObj=null}},t.prototype.tooltipHover=function(e){this.tooltipEle&&(this.isTooltipOpen=!0)},t.prototype.tooltipMouseOut=function(e){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,e,this.findTarget())},t.prototype.onMouseOut=function(e){var t=e.relatedTarget;if(t&&!this.mouseTrail){var i=Object(r.y)(t,".e-tooltip-wrap.e-lib.e-popup");i?r.m.add(i,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,e,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear()},t.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.animation.close,e,this.findTarget()),r.m.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},t.prototype.onStickyClose=function(e){this.close()},t.prototype.onMouseMove=function(e){var t=0,i=0;e.type.indexOf("touch")>-1?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):(t=e.pageX,i=e.pageY),r.b.stop(this.tooltipEle),Object(r.Q)([this.tooltipEle],sn),Object(r.t)([this.tooltipEle],an),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.calculateTooltipOffset(this.position),o=t+n.left+this.offsetX,a=i+n.top+this.offsetY,s=this.checkCollision(e.target,o,a);if(this.tooltipPositionX!==s.horizontal||this.tooltipPositionY!==s.vertical){var l=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?s.vertical+s.horizontal:s.horizontal+s.vertical;s.position=l,this.adjustArrow(e.target,s.position,s.horizontal,s.vertical);var c=this.calculateTooltipOffset(s.position);s.left=t+c.left-this.offsetX,s.top=i+c.top-this.offsetY}this.tooltipEle.style.left=s.left+"px",this.tooltipEle.style.top=s.top+"px"},t.prototype.keyDown=function(e){this.tooltipEle&&27===e.keyCode&&this.close()},t.prototype.touchEnd=function(e){this.tooltipEle&&null===Object(r.y)(e.target,"."+Zi)&&!this.isSticky&&this.close()},t.prototype.scrollHandler=function(e){this.tooltipEle&&(Object(r.y)(e.target,".e-tooltip-wrap.e-lib.e-popup")||this.close())},t.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},t.prototype.preRender=function(){this.tipClass=tn,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},t.prototype.wireEvents=function(e){for(var t=0,i=this.getTriggerList(e);t<i.length;t++){var n=i[t];if("Custom"===n)return;"Focus"===n&&this.wireFocusEvents(),"Click"===n&&r.m.add(this.element,r.c.touchStartEvent,this.targetClick,this),"Hover"===n&&(r.c.isDevice?(this.touchModule=new r.s(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),r.m.add(this.element,r.c.touchEndEvent,this.touchEndHandler,this)):(r.m.add(this.element,"mouseover",this.targetHover,this),this.isServerRender()&&!this.isSticky&&r.m.add(this.element,"mouseleave",this.onMouseOut,this)))}r.m.add(document,"touchend",this.touchEnd,this),r.m.add(document,"scroll wheel",this.scrollHandler,this),r.m.add(document,"keydown",this.keyDown,this)},t.prototype.getTriggerList=function(e){return"Auto"===e&&(e=r.c.isDevice?"Hover":"Hover Focus"),e.split(" ")},t.prototype.wireFocusEvents=function(){if(Object(r.J)(this.target))r.m.add(this.element,"focus",this.targetHover,this);else for(var e=0,t=[].slice.call(this.element.querySelectorAll(this.target));e<t.length;e++){var i=t[e];r.m.add(i,"focus",this.targetHover,this)}},t.prototype.wireMouseEvents=function(e,t){this.tooltipEle&&(this.isSticky||("focus"===e.type&&r.m.add(t,"blur",this.onMouseOut,this),"mouseover"===e.type&&(this.isServerRender()||r.m.add(t,"mouseleave",this.onMouseOut,this)),this.closeDelay&&(r.m.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),r.m.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&r.m.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))},t.prototype.unwireEvents=function(e){for(var t=0,i=this.getTriggerList(e);t<i.length;t++){var n=i[t];if("Custom"===n)return;"Focus"===n&&this.unwireFocusEvents(),"Click"===n&&r.m.remove(this.element,r.c.touchStartEvent,this.targetClick),"Hover"===n&&(r.c.isDevice?(this.touchModule&&this.touchModule.destroy(),r.m.remove(this.element,r.c.touchEndEvent,this.touchEndHandler)):(r.m.remove(this.element,"mouseover",this.targetHover),this.isServerRender()&&!this.isSticky&&r.m.remove(this.element,"mouseleave",this.onMouseOut)))}r.m.remove(document,"touchend",this.touchEnd),r.m.remove(document,"scroll wheel",this.scrollHandler),r.m.remove(document,"keydown",this.keyDown)},t.prototype.unwireFocusEvents=function(){if(Object(r.J)(this.target))r.m.remove(this.element,"focus",this.targetHover);else for(var e=0,t=[].slice.call(this.element.querySelectorAll(this.target));e<t.length;e++){var i=t[e];r.m.remove(i,"focus",this.targetHover)}},t.prototype.unwireMouseEvents=function(e){if(!this.isSticky){for(var t=0,i=this.getTriggerList(this.opensOn);t<i.length;t++){var n=i[t];"Focus"===n&&r.m.remove(e,"blur",this.onMouseOut),"Hover"!==n||r.c.isDevice||this.isServerRender()||r.m.remove(e,"mouseleave",this.onMouseOut)}this.closeDelay&&(r.m.remove(e,"mouseenter",this.tooltipHover),r.m.remove(e,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&r.m.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)},t.prototype.findTarget=function(){return document.querySelector("[data-tooltip-id= "+this.ctrlId+"_content]")},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(e,t){for(var i=this.findTarget(),n=0,o=Object.keys(e);n<o.length;n++){switch(o[n]){case"width":this.tooltipEle&&i&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=Object(r.D)(e.width),this.reposition(i));break;case"height":this.tooltipEle&&i&&(this.tooltipEle.style.height=Object(r.D)(e.height),this.reposition(i));break;case"content":if(this.tooltipEle)this.isServerRender()&&(this.isBlazorTooltip=!0),this.renderContent();else if(this.isServerRender()){var a={content:e.content};this.interopAdaptor.invokeMethodAsync("OnTooltipServerCall",a)}break;case"opensOn":this.unwireEvents(t.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&i){var s=this.tooltipEle.querySelector("."+en);s.style.top=s.style.left=null,this.reposition(i)}break;case"tipPointerPosition":this.tooltipEle&&i&&this.reposition(i);break;case"offsetX":if(this.tooltipEle){var l=e.offsetX-t.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+l).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var c=e.offsetY-t.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+c).toString()+"px"}break;case"cssClass":this.tooltipEle&&(t.cssClass&&Object(r.Q)([this.tooltipEle],t.cssClass.split(" ")),e.cssClass&&Object(r.t)([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?Object(r.t)([this.tooltipEle],Ji):Object(r.Q)([this.tooltipEle],Ji))}}},t.prototype.open=function(e,t){Object(r.J)(t)&&(t=this.animation.open),Object(r.J)(e)&&(e=this.element),"none"!==e.style.display&&this.showTooltip(e,t)},t.prototype.close=function(e){e||(e=this.animation.close),this.hideTooltip(e)},t.prototype.refresh=function(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)},t.prototype.destroy=function(){if(this.isServerRender()||(e.prototype.destroy.call(this),this.tooltipEle&&Object(r.P)(this.tooltipEle)),this.isServerRender()&&this.tooltipEle){var t=document.querySelector("#"+this.ctrlId+"_content_placeholder");t&&t.appendChild(this.tooltipEle)}this.popupObj&&this.popupObj.destroy(),Object(r.Q)([this.element],Zi),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null},Gi([Object(r.q)("auto")],t.prototype,"width",void 0),Gi([Object(r.q)("auto")],t.prototype,"height",void 0),Gi([Object(r.q)()],t.prototype,"content",void 0),Gi([Object(r.q)()],t.prototype,"target",void 0),Gi([Object(r.q)("TopCenter")],t.prototype,"position",void 0),Gi([Object(r.q)(0)],t.prototype,"offsetX",void 0),Gi([Object(r.q)(0)],t.prototype,"offsetY",void 0),Gi([Object(r.q)(!0)],t.prototype,"showTipPointer",void 0),Gi([Object(r.q)("Auto")],t.prototype,"tipPointerPosition",void 0),Gi([Object(r.q)("Auto")],t.prototype,"opensOn",void 0),Gi([Object(r.q)(!1)],t.prototype,"mouseTrail",void 0),Gi([Object(r.q)(!1)],t.prototype,"isSticky",void 0),Gi([Object(r.g)({},cn)],t.prototype,"animation",void 0),Gi([Object(r.q)(0)],t.prototype,"openDelay",void 0),Gi([Object(r.q)(0)],t.prototype,"closeDelay",void 0),Gi([Object(r.q)()],t.prototype,"cssClass",void 0),Gi([Object(r.q)(!1)],t.prototype,"enableHtmlSanitizer",void 0),Gi([Object(r.l)()],t.prototype,"beforeRender",void 0),Gi([Object(r.l)()],t.prototype,"beforeOpen",void 0),Gi([Object(r.l)()],t.prototype,"afterOpen",void 0),Gi([Object(r.l)()],t.prototype,"beforeClose",void 0),Gi([Object(r.l)()],t.prototype,"afterClose",void 0),Gi([Object(r.l)()],t.prototype,"beforeCollision",void 0),Gi([Object(r.l)()],t.prototype,"created",void 0),Gi([Object(r.l)()],t.prototype,"destroyed",void 0),t=Gi([r.p],t)}(r.i),hn=!1;function pn(e,t,i,n,r){if(Fi=i+t==="topright"?void 0:r,Fi=r,hn=!!n,!e)return{left:0,top:0};t||(t="left"),i||(i="top"),Ui=e.ownerDocument,qi=e;return function(e,t,i){switch(Wi=qi.getBoundingClientRect(),t+e){case"topcenter":un(On(),i),fn(bn(),i);break;case"topright":un(xn(),i),fn(bn(),i);break;case"centercenter":un(On(),i),fn(yn(),i);break;case"centerright":un(xn(),i),fn(yn(),i);break;case"centerleft":un(wn(),i),fn(yn(),i);break;case"bottomcenter":un(On(),i),fn(vn(),i);break;case"bottomright":un(xn(),i),fn(vn(),i);break;case"bottomleft":un(wn(),i),fn(vn(),i);break;default:case"topleft":un(wn(),i),fn(bn(),i)}return i}(t.toLowerCase(),i.toLowerCase(),{left:0,top:0})}function un(e,t){t.left=e}function fn(e,t){t.top=e}function gn(){return Ui.documentElement.scrollTop||Ui.body.scrollTop}function mn(){return Ui.documentElement.scrollLeft||Ui.body.scrollLeft}function vn(){return hn?Wi.bottom:Wi.bottom+gn()}function yn(){return bn()+Wi.height/2}function bn(){return hn?Wi.top:Wi.top+gn()}function wn(){return Wi.left+mn()}function xn(){return Wi.right+mn()-(Fi?Fi.width:0)}function On(){return wn()+Wi.width/2}function Sn(e,t){var i=!1,n=!1;return e-Ln()<An()&&(i=!0),t>Dn()&&(n=!0),{leftSide:i,rightSide:n}}function Cn(e,t){var i=!1,n=!1;return e-Mn()<Tn()&&(i=!0),t>kn()&&(n=!0),{topSide:i,bottomSide:n}}function Pn(){return Yi.getBoundingClientRect().width}function jn(){return Yi.getBoundingClientRect().height}function In(){return Yi.getBoundingClientRect().left}function En(){return Yi.getBoundingClientRect().top}function Tn(){return Yi?En():0}function An(){return Yi?In():0}function Dn(){return Yi?Ln()+In()+Pn():Ln()+zn()}function kn(){return Yi?Mn()+En()+jn():Mn()+Rn()}function Mn(){return Vi.documentElement.scrollTop||Vi.body.scrollTop}function Ln(){return Vi.documentElement.scrollLeft||Vi.body.scrollLeft}function Rn(){return window.innerHeight}function zn(){var e=window.innerWidth;return e-(e-(Object(r.J)(document.documentElement)?0:document.documentElement.offsetWidth))}var Nn=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bn=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},_n=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Nn(t,e),Bn([Object(r.q)({effect:"FadeIn",duration:150,delay:0})],t.prototype,"open",void 0),Bn([Object(r.q)({effect:"FadeOut",duration:150,delay:0})],t.prototype,"close",void 0)}(r.d),"e-tip-bottom"),Hn="e-tip-top",Wn="e-tip-left",Fn="e-tip-right",qn="e-popup-open",Un="e-popup-close",Vn="e-lib",Yn="e-popup-open",Xn="e-popup-close",Gn=function(){function e(e){this.isBlazorTooltip=!1,this.contentEvent=null,this.width="auto",this.height="auto",this.content="",this.target="",this.position="TopCenter",this.offsetX=0,this.offsetY=0,this.tipPointerPosition="Auto",this.openDelay=0,this.closeDelay=0,this.cssClass="",this.element=e,this.tipClass=_n,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0,this.showTipPointer=!0}return e.prototype.open=function(e,t,i){Object(r.J)(this.animation.open)&&(this.animation.open=this.element.tooltip&&this.element.tooltip.animation&&this.element.tooltip.animation.open),this.showTooltip(e,t)},e.prototype.updateTooltip=function(e){this.tooltipEle&&(this.addDescribedBy(e,this.ctrlId+"_content"),this.renderContent(e),this.reposition(e),this.adjustArrow(e,this.position,this.tooltipPositionX,this.tooltipPositionY))},e.prototype.formatPosition=function(){var e,t;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1])},e.prototype.destroy=function(){},e.prototype.close=function(){if(this.tooltipEle){Object(r.Q)([this.tooltipEle],Un),Object(r.t)([this.tooltipEle],qn),r.b.stop(this.tooltipEle);var e=void 0,t=this;t.isHidden=!0,this.animation.close&&(e={name:this.animation.close.effect,duration:this.animation.close.duration||0,delay:this.animation.close.delay||0,timingFunction:"easeOut"}),Object(r.J)(e)?(Object(r.Q)([this.tooltipEle],Yn),Object(r.t)([this.tooltipEle],Xn),Object(r.P)(this.tooltipEle),this.tooltipEle=null):(e.end=function(){t.isHidden&&(Object(r.P)(t.tooltipEle),t.tooltipEle=null)},new r.b(e).animate(this.tooltipEle))}},e.prototype.showTooltip=function(e,t,i){var n=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:this.tooltipEle,isInteracted:!Object(r.J)(i)};this.element.trigger("beforeRender",this.tooltipEventArgs,function(r){n.beforeRenderCallback(r,e,i,t)}.bind(this))},e.prototype.beforeRenderCallback=function(e,t,i,n){this.formatPosition();e.cancel?this.isHidden=!0:(this.isHidden=!1,Object(r.J)(this.tooltipEle)?(this.ctrlId=this.element.element.id,this.tooltipEle=Object(r.A)("div",{className:"e-tooltip-wrap e-popup e-lib",attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+Object(r.D)(this.width)+";height:"+Object(r.D)(this.height)+";position:absolute; pointer-events:none;"}),this.beforeRenderBlazor(t,this),r.b.stop(this.tooltipEle),this.afterRenderBlazor(t,i,n,this)):t&&(this.addDescribedBy(t,this.ctrlId+"_content"),this.renderContent(t),r.b.stop(this.tooltipEle),this.reposition(t),this.afterRenderBlazor(t,i,n,this),this.adjustArrow(t,this.position,this.tooltipPositionX,this.tooltipPositionY)))},e.prototype.afterRenderBlazor=function(e,t,i,n){var o=this;if(e){Object(r.Q)([n.tooltipEle],qn),Object(r.t)([n.tooltipEle],Un),n.tooltipEventArgs={type:t?t.type:null,cancel:!1,target:e,event:t||null,element:n.tooltipEle,isInteracted:!Object(r.J)(t)};var a=void 0;this.animation.open&&(a={name:this.animation.open.effect,duration:this.animation.open.duration||0,delay:this.animation.open.delay||0,timingFunction:"easeIn"}),Object(r.J)(a)?(Object(r.Q)([n.tooltipEle],Un),Object(r.t)([n.tooltipEle],qn)):(a.begin=function(){Object(r.Q)([n.tooltipEle],Xn),Object(r.t)([n.tooltipEle],Yn)},a.end=function(){o.element.trigger("open")},new r.b(a).animate(this.tooltipEle))}},e.prototype.setTipClass=function(e){0===e.indexOf("Right")?this.tipClass=Wn:0===e.indexOf("Bottom")?this.tipClass=Hn:0===e.indexOf("Left")?this.tipClass=Fn:this.tipClass=_n},e.prototype.renderArrow=function(){this.setTipClass(this.position);var e=Object(r.A)("div",{className:"e-arrow-tip "+this.tipClass});e.appendChild(Object(r.A)("div",{className:"e-arrow-tip-outer "+this.tipClass})),e.appendChild(Object(r.A)("div",{className:"e-arrow-tip-inner "+this.tipClass})),this.tooltipEle.appendChild(e)},e.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="block";var t=pn(e,this.tooltipPositionX,this.tooltipPositionY),i=this.calculateTooltipOffset(this.position),n=this.collisionFlipFit(e,t.left+i.left,t.top+i.top);return this.tooltipEle.style.display="",n},e.prototype.checkCollision=function(e,t,i){var n={left:t,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},r=function(e,t,i,n){void 0===t&&(t=null);var r=pn(e,"left","top");i&&(r.left=i),n&&(r.top=n);var o=[];Yi=t,Vi=e.ownerDocument;var a=e.getBoundingClientRect(),s=r.top,l=r.left,c=r.left+a.width,d=Cn(s,r.top+a.height),h=Sn(l,c);return d.topSide&&o.push("top"),h.rightSide&&o.push("right"),h.leftSide&&o.push("left"),d.bottomSide&&o.push("bottom"),o}(this.tooltipEle,this.target?this.element.element:null,t,i);return r.length>0&&(n.horizontal=r.indexOf("left")>=0?"Right":r.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=r.indexOf("top")>=0?"Bottom":r.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},e.prototype.collisionFlipFit=function(e,t,i){var n=this.checkCollision(e,t,i),r=n.position;if(this.tooltipPositionY!==n.vertical&&(r=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===r.indexOf("Left")&&(n.vertical="LeftTop"===r||"LeftCenter"===r?"Top":"Bottom",r=n.vertical+"Left"),0===r.indexOf("Right")&&(n.vertical="RightTop"===r||"RightCenter"===r?"Top":"Bottom",r=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:r},this.element.trigger("beforeCollision",this.tooltipEventArgs),n.position!==r){var o=pn(e,n.horizontal,n.vertical);this.adjustArrow(e,r,n.horizontal,n.vertical);var a=this.calculateTooltipOffset(r);a.top-=-1!=="TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="TopBottom".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.offsetY:0,a.left-=-1!=="RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!=="RightLeft".indexOf(r.split(/(?=[A-Z])/)[0])?2*this.offsetX:0,n.position=r,n.left=o.left+a.left,n.top=o.top+a.top}else this.adjustArrow(e,r,n.horizontal,n.vertical);var s={left:n.left,top:n.top},l=function(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var r=e.getBoundingClientRect();if(Yi=t,Vi=e.ownerDocument,n||(n=pn(e,"left","top")),i.X){var o=Yi?Pn():zn(),a=An(),s=Dn(),l=a-n.left,c=n.left+r.width-s;r.width>o?n.left=l>0&&c<=0?s-r.width:c>0&&l<=0?a:l>c?s-r.width:a:l>0?n.left+=l:c>0&&(n.left-=c)}if(i.Y){var d=Yi?jn():Rn(),h=Tn(),p=kn(),u=h-n.top,f=n.top+r.height-p;r.height>d?n.top=u>0&&f<=0?p-r.height:f>0&&u<=0?h:u>f?p-r.height:h:u>0?n.top+=u:f>0&&(n.top-=f)}return n}(this.tooltipEle,this.target?this.element.element:null,{X:!0,Y:!1},s).left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===r.indexOf("Bottom")||0===r.indexOf("Top"))){var c=this.tooltipEle.querySelector(".e-arrow-tip"),d=parseInt(c.style.left,10)-(l-n.left);d<0?d=0:d+c.offsetWidth>this.tooltipEle.clientWidth&&(d=this.tooltipEle.clientWidth-c.offsetWidth),c.style.left=d.toString()+"px"}return this.tooltipEle.style.display="",s.left=l,s},e.prototype.calculateTooltipOffset=function(e){var t={top:0,left:0},i=this.tooltipEle.offsetWidth,n=this.tooltipEle.offsetHeight,r=this.tooltipEle.querySelector(".e-arrow-tip"),o=r?r.offsetWidth:0,a=r?r.offsetHeight:0,s=this.showTipPointer?0:8,l=a/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),c=o/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(e){case"RightTop":t.left+=o+s,t.top-=n-l;break;case"RightCenter":t.left+=o+s,t.top-=n/2;break;case"RightBottom":t.left+=o+s,t.top-=l;break;case"BottomRight":t.top+=a+s,t.left-=c;break;case"BottomCenter":t.top+=a+s,t.left-=i/2;break;case"BottomLeft":t.top+=a+s,t.left-=i-c;break;case"LeftBottom":t.left-=o+i+s,t.top-=l;break;case"LeftCenter":t.left-=o+i+s,t.top-=n/2;break;case"LeftTop":t.left-=o+i+s,t.top-=n-l;break;case"TopLeft":t.top-=n+a+s,t.left-=i-c;break;case"TopRight":t.top-=n+a+s,t.left-=c;break;default:t.top-=n+a+s,t.left-=i/2}return t.left+=this.offsetX,t.top+=this.offsetY,t},e.prototype.reposition=function(e){var t=this.getTooltipPosition(e);this.tooltipEle.style.left=t.left+"px",this.tooltipEle.style.top=t.top+"px"},e.prototype.beforeRenderBlazor=function(e,t){if(e){r.c.isDevice&&Object(r.t)([t.tooltipEle],"e-bigger"),"auto"!==t.width&&(t.tooltipEle.style.maxWidth=Object(r.D)(t.width)),t.tooltipEle.appendChild(Object(r.A)("div",{className:"e-tip-content e-diagramTooltip-content"})),document.body.appendChild(t.tooltipEle),Object(r.t)([t.tooltipEle],qn),Object(r.Q)([t.tooltipEle],"e-hidden"),t.addDescribedBy(e,t.ctrlId+"_content"),t.renderContent(e),Object(r.t)([t.tooltipEle],qn),this.showTipPointer&&t.renderArrow();var i=this.getTooltipPosition(e);this.tooltipEle.classList.remove(Vn),this.tooltipEle.style.left=i.left+"px",this.tooltipEle.style.top=i.top+"px",t.reposition(e),t.adjustArrow(e,t.position,t.tooltipPositionX,t.tooltipPositionY)}},e.prototype.addDescribedBy=function(e,t){var i=(e.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),Object(r.v)(e,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})},e.prototype.renderContent=function(e){var t=this.tooltipEle.querySelector(".e-tip-content");if(this.cssClass&&Object(r.t)([this.tooltipEle],this.cssClass.split(" ")),e&&!Object(r.J)(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),Object(r.J)(this.content))e&&!Object(r.J)(e.getAttribute("data-content"))&&(t.innerHTML=e.getAttribute("data-content"));else if(this.isBlazorTooltip,t.innerHTML="",this.content instanceof HTMLElement)t.appendChild(this.content);else if("string"===typeof this.content&&this.content.indexOf("<div>Blazor")<0)t.innerHTML=this.content;else{var i=Object(r.z)(this.content);Object(r.u)(i({},null,null,this.element.element.id+"content"),t),"string"===typeof this.content&&this.content.indexOf("<div>Blazor")>=0&&(this.isBlazorTemplate=!0,Object(r.Y)(this.element.element.id+"content","Content",this))}},e.prototype.updateTipPosition=function(e){var t=this.tooltipEle.querySelectorAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner"),i=[_n,Hn,Wn,Fn];Object(r.Q)(t,i),this.setTipClass(e),Object(r.t)(t,this.tipClass)},e.prototype.adjustArrow=function(e,t,i,n){if(this.showTipPointer){var r,o;this.updateTipPosition(t),this.tooltipEle.style.display="block";var a,s=this.tooltipEle.clientWidth,l=this.tooltipEle.clientHeight,c=this.tooltipEle.querySelector(".e-arrow-tip"),d=this.tooltipEle.querySelector(".e-arrow-tip-inner"),h=c.offsetWidth,p=c.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===_n||this.tipClass===Hn){if(this.tipClass===_n?(o="99.9%",d.style.top="-"+(p-2)+"px"):(o=-(p-1)+"px",d.style.top="-"+(p-6)+"px"),e)r=(a="Center"!==i||s>e.offsetWidth)&&"Left"===i||!a&&"End"===this.tipPointerPosition?s-h-2+"px":a&&"Right"===i||!a&&"Start"===this.tipPointerPosition?"2px":s/2-h/2+"px"}else this.tipClass===Fn?(r="99.9%",d.style.left="-"+(h-2)+"px"):(r=-(h-1)+"px",d.style.left=h-2-h+"px"),o=(a="Center"!==n||l>e.offsetHeight)&&"Top"===n||!a&&"End"===this.tipPointerPosition?l-p-2+"px":a&&"Bottom"===n||!a&&"Start"===this.tipPointerPosition?"2px":l/2-p/2+"px";c.style.top=o,c.style.left=r}},e.prototype.getModuleName=function(){return"BlazorTooltip"},e}(),Zn=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Jn=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Qn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zn(t,e),Jn([Object(r.q)("")],t.prototype,"content",void 0),Jn([Object(r.q)("TopLeft")],t.prototype,"position",void 0),Jn([Object(r.q)("Mouse")],t.prototype,"relativeMode",void 0),Jn([Object(r.q)(!0)],t.prototype,"showTipPointer",void 0),Jn([Object(r.q)("auto")],t.prototype,"width",void 0),Jn([Object(r.q)("auto")],t.prototype,"height",void 0),Jn([Object(r.q)("Auto")],t.prototype,"openOn",void 0),Jn([Object(r.q)()],t.prototype,"animation",void 0),t}(r.d);function $n(e){var t;if(Object(r.I)())t=new Gn(e),t=tr(e.tooltip,t);else{var i=new dn;i=tr(e.tooltip,i),(t=new dn(i)).beforeCollision=er,t.beforeOpen=Kn,t.cssClass="e-diagram-tooltip",t.opensOn="custom",t.appendTo("#"+e.element.id),t.close()}return t}function Kn(e){""!==this.content&&void 0!==this.content||(e.element.style.display="none")}function er(e){e.collidedPosition&&e.collidedPosition!==this.position&&(e.element.style.display="none")}function tr(e,t){return e.content?(t.content=e.content,t.position=e.position,t.showTipPointer=e.showTipPointer,t.width=e.width,t.height=e.height,e.animation?t.animation=e.animation:t.animation={close:{effect:"None"}}):t.close(),t}var ir=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),nr=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},rr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ir(t,e),nr([Object(r.q)()],t.prototype,"width",void 0),nr([Object(r.q)()],t.prototype,"height",void 0),t}(r.d),or=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ir(t,e),nr([Object(r.q)()],t.prototype,"width",void 0),nr([Object(r.q)()],t.prototype,"height",void 0),nr([Object(r.q)()],t.prototype,"fit",void 0),nr([Object(r.q)()],t.prototype,"description",void 0),nr([Object(r.q)()],t.prototype,"template",void 0),nr([Object(r.q)()],t.prototype,"tooltip",void 0),t}(r.d),ar=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sr=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},lr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ar(t,e),sr([Object(r.q)("")],t.prototype,"id",void 0),sr([Object(r.q)(-1)],t.prototype,"zIndex",void 0),sr([Object(r.g)({},Se)],t.prototype,"margin",void 0),sr([Object(r.q)(!0)],t.prototype,"visible",void 0),sr([Object(r.g)({},Qn)],t.prototype,"tooltip",void 0),sr([Object(r.q)(!1)],t.prototype,"excludeFromLayout",void 0),sr([Object(r.q)()],t.prototype,"addInfo",void 0),sr([Object(r.q)("None")],t.prototype,"flip",void 0),sr([Object(r.g)({},or)],t.prototype,"symbolInfo",void 0),t}(r.d),cr=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dr=function(e){function t(t,i,n,r){var o=e.call(this)||this;return o.data="",o.nodeId="",o.annotationId="",o.diagramId="",o.diagramId=i,o.nodeId=t,o.annotationId=n,o.templateFn=dc(r),o}return cr(t,e),t.prototype.getNodeTemplate=function(){return this.templateFn},Object.defineProperty(t.prototype,"content",{get:function(){return this.data},set:function(e){this.data=e,this.canReset||(this.canReset=!0,this.isTemplate||(this.template=tc(this,!0)),this.canReset=!1,this.isDirt=!0)},enumerable:!0,configurable:!0}),t}(Le),hr=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pr=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},ur=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hr(t,e),pr([Object(r.q)("")],t.prototype,"id",void 0),pr([Object(r.q)("transparent")],t.prototype,"fill",void 0),pr([Object(r.q)("black")],t.prototype,"iconStrokeColor",void 0),pr([Object(r.q)(0)],t.prototype,"iconStrokeWidth",void 0),pr([Object(r.q)(!0)],t.prototype,"visibility",void 0),pr([Object(r.q)(10)],t.prototype,"width",void 0),pr([Object(r.q)(10)],t.prototype,"height",void 0),pr([Object(r.q)("transparent")],t.prototype,"handleStrokeColor",void 0),pr([Object(r.q)(1)],t.prototype,"handleStrokeWidth",void 0),pr([Object(r.q)("")],t.prototype,"pathData",void 0),pr([Object(r.q)(0)],t.prototype,"cornerRadius",void 0),pr([Object(r.g)({left:0,right:0,top:0,bottom:0},Se)],t.prototype,"padding",void 0),t}(r.d),fr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hr(t,e),pr([Object(r.g)({x:0,y:0},E)],t.prototype,"offset",void 0),pr([Object(r.g)({},Se)],t.prototype,"margin",void 0),t}(ur),gr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hr(t,e),pr([Object(r.q)(.5)],t.prototype,"offset",void 0),pr([Object(r.q)("Center")],t.prototype,"alignment",void 0),pr([Object(r.g)({x:0,y:0},E)],t.prototype,"displacement",void 0),t}(ur),mr=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vr=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},yr=function(e){if(Object(r.I)())return Br;if(e)switch(e.type){case"Bpmn":return Cr;case"UmlActivity":return Sr;case"UmlClassifier":return Nr;default:return Or}return Or},br=function(e){if(e){if(Object(r.I)())return Tr;switch(e.type){case"Straight":return jr;case"Bezier":return Ir;case"Orthogonal":return Er;default:return jr}}},wr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mr(t,e),vr([Object(r.q)(10)],t.prototype,"width",void 0),vr([Object(r.q)(10)],t.prototype,"height",void 0),vr([Object(r.q)("Arrow")],t.prototype,"shape",void 0),vr([Object(r.g)({fill:"black",strokeColor:"black",strokeWidth:1},Ae)],t.prototype,"style",void 0),vr([Object(r.g)({x:0,y:.5},E)],t.prototype,"pivot",void 0),vr([Object(r.q)("")],t.prototype,"pathData",void 0),t}(r.d),xr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mr(t,e),vr([Object(r.q)(0)],t.prototype,"angle",void 0),vr([Object(r.q)(0)],t.prototype,"distance",void 0),t}(r.d),Or=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mr(t,e),vr([Object(r.q)("None")],t.prototype,"type",void 0),t}(r.d),Sr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mr(t,e),vr([Object(r.q)("Object")],t.prototype,"flow",void 0),vr([Object(r.q)(30)],t.prototype,"exceptionFlowHeight",void 0),t}(Or),Cr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mr(t,e),vr([Object(r.q)("Sequence")],t.prototype,"flow",void 0),vr([Object(r.q)("Normal")],t.prototype,"sequence",void 0),vr([Object(r.q)("Default")],t.prototype,"message",void 0),vr([Object(r.q)("Default")],t.prototype,"association",void 0),t}(Or),Pr=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n,r)||this;return o.points=[],o}return mr(t,e),vr([Object(r.q)("Straight")],t.prototype,"type",void 0),vr([Object(r.q)(!0)],t.prototype,"allowDrag",void 0),t}(r.d),jr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mr(t,e),t.prototype.getClassName=function(){return"StraightSegment"},vr([Object(r.g)({x:0,y:0},E)],t.prototype,"point",void 0),t}(Pr),Ir=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mr(t,e),t.prototype.getClassName=function(){return"BezierSegment"},vr([Object(r.g)({x:0,y:0},E)],t.prototype,"point1",void 0),vr([Object(r.g)({x:0,y:0},E)],t.prototype,"point2",void 0),vr([Object(r.g)({angle:0,distance:0},xr)],t.prototype,"vector1",void 0),vr([Object(r.g)({angle:0,distance:0},xr)],t.prototype,"vector2",void 0),t}(jr),Er=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mr(t,e),t.prototype.getClassName=function(){return"OrthogonalSegment"},vr([Object(r.q)(null)],t.prototype,"length",void 0),vr([Object(r.q)(null)],t.prototype,"direction",void 0),t}(Pr),Tr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mr(t,e),t.prototype.getClassName=function(){return"DiagramConnectorSegment"},vr([Object(r.q)("Straight")],t.prototype,"type",void 0),vr([Object(r.q)(!0)],t.prototype,"allowDrag",void 0),vr([Object(r.g)({x:0,y:0},E)],t.prototype,"point",void 0),vr([Object(r.g)({x:0,y:0},E)],t.prototype,"point1",void 0),vr([Object(r.g)({x:0,y:0},E)],t.prototype,"point2",void 0),vr([Object(r.g)({angle:0,distance:0},xr)],t.prototype,"vector1",void 0),vr([Object(r.g)({angle:0,distance:0},xr)],t.prototype,"vector2",void 0),vr([Object(r.q)(null)],t.prototype,"length",void 0),vr([Object(r.q)(null)],t.prototype,"direction",void 0),t}(r.d);function Ar(e,t,i){var n=e.center,r=i?45:180/(2+2/(e.height/e.width)),o=r,a=180-r,s=a+2*r,l=360-r,c=Lt(t,n);return c>o&&c<a?"top":c>a&&c<s?"right":c>s&&c<l?"bottom":"left"}function Dr(e){return!e.distance&&!e.angle}function kr(e,t,i){var n=60,r={x:0,y:0};switch(i||(i=Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?e.x<t.x?"right":"left":e.y<t.y?"bottom":"top"),i){case"bottom":case"top":n=Math.min(.45*Math.abs(e.y-t.y),n),r={x:e.x,y:e.y+("bottom"===i?n:-n)};break;case"right":case"left":n=Math.min(.45*Math.abs(e.x-t.x),n),r={x:e.x+("right"===i?n:-n),y:e.y}}return r}function Mr(e,t,i,n,r){var o=0,a=0,s=0,l=0,c=Number((r.distance(t,e)+r.distance(i,t)+r.distance(n,i))/3);if(0!==c)for(var d=0;d<=c;d++){var h=d/c,p=(1-h)*(1-h)*(1-h)*e.x+3*h*(1-h)*(1-h)*t.x+3*h*h*(1-h)*i.x+h*h*h*n.x,u=(1-h)*(1-h)*(1-h)*e.y+3*h*(1-h)*(1-h)*t.y+3*h*h*(1-h)*i.y+h*h*h*n.y;0===d?(o=s=p,a=l=u):(o=Math.min(p,o),a=Math.min(u,a),s=Math.max(p,s),l=Math.max(u,l))}return{x:o,y:a,width:s-o,height:l-a,left:o,top:a,right:o+(s-o),bottom:a+(l-a),center:{x:(o+(s-o))/2,y:(a+(l-a))/2}}}function Lr(e,t,i,n,r,o,a){var s={x:0,y:0},l=o/a,c=(1-l)*(1-l)*(1-l)*t.x+3*l*(1-l)*(1-l)*i.x+3*l*l*(1-l)*n.x+l*l*l*r.x;s.x=c;var d=(1-l)*(1-l)*(1-l)*t.y+3*l*(1-l)*(1-l)*i.y+3*l*l*(1-l)*n.y+l*l*l*r.y;return s.y=d,s}var Rr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mr(t,e),vr([Object(r.q)(!0)],t.prototype,"optional",void 0),vr([Object(r.q)(void 0)],t.prototype,"lowerBounds",void 0),vr([Object(r.q)(void 0)],t.prototype,"upperBounds",void 0),t}(r.d),zr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mr(t,e),vr([Object(r.q)("OneToOne")],t.prototype,"type",void 0),vr([Object(r.g)({},Rr)],t.prototype,"target",void 0),vr([Object(r.g)({},Rr)],t.prototype,"source",void 0),t}(r.d),Nr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mr(t,e),vr([Object(r.q)("UmlClassifier")],t.prototype,"type",void 0),vr([Object(r.q)("Aggregation")],t.prototype,"relationship",void 0),vr([Object(r.q)("Directional")],t.prototype,"associationType",void 0),vr([Object(r.g)({},zr)],t.prototype,"multiplicity",void 0),t}(Or),Br=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mr(t,e),vr([Object(r.q)("None")],t.prototype,"type",void 0),vr([Object(r.q)("Directional")],t.prototype,"associationType",void 0),vr([Object(r.q)("Aggregation")],t.prototype,"relationship",void 0),vr([Object(r.g)({},zr)],t.prototype,"multiplicity",void 0),vr([Object(r.q)("Sequence")],t.prototype,"bpmnFlow",void 0),vr([Object(r.q)("Default")],t.prototype,"message",void 0),vr([Object(r.q)("Normal")],t.prototype,"sequence",void 0),vr([Object(r.q)("Default")],t.prototype,"association",void 0),vr([Object(r.q)("Object")],t.prototype,"umlActivityFlow",void 0),vr([Object(r.q)(30)],t.prototype,"exceptionFlowHeight",void 0),t}(r.d),_r=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n,r)||this;return o.parentId="",o.bridges=[],o.status="None",o.shape&&"UmlActivity"===o.shape.type&&Ra(n,o),n&&n.shape&&"None"!==n.shape.type&&za(n,o),o}return mr(t,e),t.prototype.setPortID=function(e,t){if(this.targetID&&this.sourceID)for(var i=e.nameTable[this.targetID],n=e.nameTable[this.sourceID],r=t?i&&i.ports:n&&n.ports,o=void 0,a=0;r&&a<r.length;a++)o=r[a],this.targetPortID===o.id&&t?!(o.constraints&ye.None)&&o.constraints&ye.InConnect||(this.targetPortID=""):this.sourcePortID!==o.id||t||!(o.constraints&ye.None)&&o.constraints&ye.OutConnect||(this.sourcePortID="")},t.prototype.init=function(e){var t;this.id||(this.id=lc()),this.sourcePortID&&this.setPortID(e),this.targetPortID&&this.setPortID(e,!0);var i=new He,n=new Ue;n.id=this.id+"_path";var o,a=new Ue,s=new Ue;n=this.getSegmentElement(this,n);var l=[];switch(l=this.getConnectorPoints(this.type),l=this.clipDecorators(this,l),o=_.toBounds(l),i.width=o.width,i.height=o.height,i.offsetX=o.x+i.pivot.x*o.width,i.offsetY=o.y+i.pivot.y*o.height,this.shape.type){case"Bpmn":switch(Object(r.I)()?this.shape.bpmnFlow:this.shape.flow){case"Sequence":t=this.getBpmnSequenceFlow();break;case"Association":(t=new Ue).visible=!1,this.getBpmnAssociationFlow();break;case"Message":t=this.getBpmnMessageFlow(),n=this.getSegmentElement(this,n),this.updateShapePosition(this,t)}break;case"UmlActivity":switch(Object(r.I)()?this.shape.umlActivityFlow:this.shape.flow){case"Object":this.getUMLObjectFlow();break;case"Exception":this.getUMLExceptionFlow(n)}break;case"UmlClassifier":this.getConnectorRelation()}var c=this.intermediatePoints;if("Bezier"===this.type){var d=this.segments[0],h=this.segments[this.segments.length-1];c=[E.isEmptyPoint(h.point2)?h.bezierPoint2:h.point2,E.isEmptyPoint(d.point1)?d.bezierPoint1:d.point1]}var p=e.getDescription;this.sourceWrapper&&this.sourceWrapper.style.strokeWidth;if(a=this.getDecoratorElement(l[0],c[1],this.sourceDecorator,!0,p),s=this.getDecoratorElement(l[l.length-1],c[c.length-2],this.targetDecorator,!1,p),a.id=this.id+"_srcDec",s.id=this.id+"_tarDec",n.style=this.style,n.style.fill="transparent",void 0!==p){var u=p(this,e);n.description=u||this.id}i.style.strokeColor="transparent",i.style.fill="transparent",i.style.strokeWidth=0,i.children=[n,a,s],i.id=this.id,void 0!==t&&i.children.push(t),i.offsetX=n.offsetX,i.offsetY=n.offsetY,i.width=n.width,i.height=n.height;for(var f=0;this.annotations,f<this.annotations.length;f++)i.children.push(this.getAnnotationElement(this.annotations[f],this.intermediatePoints,o,p,e.element.id,e.annotationTemplate));for(f=0;this.fixedUserHandles,f<this.fixedUserHandles.length;f++)i.children.push(this.getfixedUserHandle(this.fixedUserHandles[f],this.intermediatePoints,o));return this.wrapper=i,i},t.prototype.getConnectorRelation=function(){var e=this.shape;"Association"===e.relationship?(this.segments[0].type="Straight",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Inheritance"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Composition"===e.relationship||"Aggregation"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None"):"Dependency"===e.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="OpenArrow"):"Realization"===e.relationship&&(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"),"BiDirectional"===e.associationType&&(this.sourceDecorator.shape="None",this.targetDecorator.shape="None");var t,i,n,r,o="",a="";e.multiplicity.source&&(e.multiplicity.source.lowerBounds=e.multiplicity.source.lowerBounds,e.multiplicity.source.upperBounds=e.multiplicity.source.upperBounds),e.multiplicity.target&&(e.multiplicity.target.lowerBounds=e.multiplicity.target.lowerBounds,e.multiplicity.target.upperBounds=e.multiplicity.target.upperBounds),i=e.multiplicity.source,n=e.multiplicity.target,r=i.upperBounds?i.lowerBounds+"..."+i.upperBounds:i.lowerBounds,t=n.upperBounds?n.lowerBounds+"..."+n.upperBounds:n.lowerBounds,"ManyToOne"===e.multiplicity.type&&(e.multiplicity.target.optional=!1,o=r||"*",a="1"),"OneToMany"===e.multiplicity.type&&(e.multiplicity.source.optional=!1,a=t||"*",o="1"),"ManyToOne"===e.multiplicity.type&&(o=r||"*",a=t||"*"),"OneToOne"===e.multiplicity.type&&(e.multiplicity.target.optional=!1,e.multiplicity.source.optional=!1,o="1",a="1"),this.annotations=[{id:this.id+"sourcelabel",content:o,offset:0,alignment:"Before",margin:{right:5,bottom:5}},{id:this.id+"targetlabel",content:a,offset:1,alignment:"Before",margin:{right:5,bottom:5}}]},t.prototype.getBpmnSequenceFlow=function(){var e=new Ue,t=new Ue;if("Normal"===this.shape.sequence&&"Bezier"!==this.type&&(this.targetDecorator.shape="Arrow"),"Default"===this.shape.sequence){e=this.getSegmentElement(this,e);var i=this.intermediatePoints;t=As(i,this),this.targetDecorator.shape="Arrow"}return"Conditional"===this.shape.sequence&&(this.targetDecorator.shape="Arrow",this.sourceDecorator.shape="Diamond",t.id=this.id+this.shape.type),t},t.prototype.getUMLObjectFlow=function(){if(this.annotations)for(var e=0;e<this.annotations.length;e++)this.annotations[e].content="["+this.annotations[e].content+"]"},t.prototype.getUMLExceptionFlow=function(e){this.type="Straight";var t=this.shape.exceptionFlowHeight/2,i={x:(this.targetPoint.x+this.sourcePoint.x)/2,y:(this.targetPoint.y+this.sourcePoint.y)/2},n=i.x-this.sourcePoint.x,r=i.y-this.sourcePoint.y,o=t/Math.sqrt(n*n+r*r),a={x:i.x-n*o,y:i.y-r*o},s={x:i.x+n*o,y:i.y+r*o},l=W();q(l,315,i.x,i.y),this.segments=[];var c=new jr(this,"segments",{type:"Straight",point:F(l,s)},!0);this.segments.push(c),c=new jr(this,"segments",{type:"Straight",point:F(l,a)},!0),this.segments.push(c),e=this.getSegmentElement(this,e)},t.prototype.getBpmnAssociationFlow=function(){"Default"===this.shape.association&&(this.targetDecorator.shape="Arrow"),"Directional"===this.shape.association&&(this.targetDecorator.shape="Arrow"),"BiDirectional"===this.shape.association&&(this.targetDecorator.shape="Arrow",this.sourceDecorator.shape="Arrow")},t.prototype.getfixedUserHandle=function(e,t,i){var n=new He;n.float=!0;e.id=e.id||lc(),n.id=this.id+"_"+e.id,n.children=[],n.visible=e.visibility,n.width=e.width,n.height=e.height,n.style.strokeWidth=e.handleStrokeWidth,n.style.fill=e.fill,n.style.strokeColor=e.handleStrokeColor,n.cornerRadius=e.cornerRadius,this.updateAnnotation(e,t,i,n);var r=Xa(e,n);return n.children.push(r),n.description=n.id,n},t.prototype.getBpmnMessageFlow=function(){var e=new Ue;return this.targetDecorator.shape="Arrow",this.targetDecorator.width=5,this.targetDecorator.height=10,this.sourceDecorator.shape="Circle","InitiatingMessage"!==this.shape.message&&"NonInitiatingMessage"!==this.shape.message||(e.id=this.id+"_"+this.shape.message,e.width=25,e.height=15,e.data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",e.horizontalAlignment="Center",e.verticalAlignment="Center",e.transform=le.Self,e.style.fill="NonInitiatingMessage"===this.shape.message?"lightgrey":"white"),e},t.prototype.distance=function(e,t){return Ms(e,t)},t.prototype.findPath=function(e,t){return ks(e,t)},t.prototype.getAnnotationElement=function(e,t,i,n,o,a){var s,l;e.id=e.id||lc(),Object(r.I)()&&"Template"===e.annotationType&&(e.template=e.template?e.template:""),o&&(e.template||"Template"===e.annotationType||a&&""===e.content)?s=sc(s=new dr(this.id,o,e.id,a),e,a):((s=new Be).content=e.content,s.style.textOverflow="Wrap"),s.constraints=e.constraints,s.visible=e.visibility,s.rotateAngle=e.rotateAngle,s.horizontalAlignment=e.horizontalAlignment,s.verticalAlignment=e.verticalAlignment,s.width=e.width,s.height=e.height,void 0===i.width||e.template||(s.width=(e.width||i.width)-e.margin.left-e.margin.right),s.margin=e.margin,s.id=this.id+"_"+e.id,0===i.width&&(i.width=this.style.strokeWidth),0===i.height&&(i.height=this.style.strokeWidth),s.style=e.style;var c=Pc(n);return c&&(l=c(e,this)),s.description=l||s.id,this.updateAnnotation(e,t,i,s),s},t.prototype.updateAnnotation=function(e,t,i,n,r){var o,a,s,l,c,d,h,p,u={x:0,y:0};n instanceof dr||Le||r||n.refreshTextElement(),n.width=e.width||i.width,a=(o=Ga(t,e,i)).point,e instanceof rt&&e.segmentAngle&&(n.rotateAngle=e.rotateAngle+o.angle,n.rotateAngle=(n.rotateAngle+360)%360),0===i.width&&(i.width=this.style.strokeWidth),0===i.height&&(i.height=this.style.strokeWidth),d={x:(a.x-i.x)/i.width,y:(a.y-i.y)/i.height},u.x=i.width*d.x,u.y=i.height*d.y,s=function(e,t,i){t%=360;var n,r,o=45,a=135,s=225,l=315;switch(e.alignment){case"Before":t>=o&&t<=a?(r="right",n=.5===e.offset?"center":"top"):t>=s&&t<=l?(r="left",n=.5===e.offset?"center":"bottom"):t>o&&t<s?(n="top",r=.5===e.offset?"center":"right"):(n="bottom",r=.5===e.offset?"center":"left");break;case"After":t>=o&&t<=a?(r="left",n=.5===e.offset?"center":"top"):t>=s&&t<=l?(r="right",n=.5===e.offset?"center":"bottom"):t>o&&t<s?(n="bottom",r=.5===e.offset?"center":"right"):(n="top",r=.5===e.offset?"center":"left");break;case"Center":r="center",n="center"}if(0===e.offset||1===e.offset){switch(c=i[0],d=i[1],Math.abs(d.x-c.x)>Math.abs(d.y-c.y)?c.x<d.x?"right":"left":c.y<d.y?"bottom":"top"){case"left":r=0===e.offset?"right":"left";break;case"right":r=0===e.offset?"left":"right";break;case"bottom":n=0===e.offset?"top":"bottom";break;case"top":n=0===e.offset?"bottom":"top"}}var c,d;return{hAlign:r,vAlign:n}}(e,o.angle,t),l=s.hAlign,c=s.vAlign,"left"===l?(h="Left",u.x+=e.displacement.x):"right"===l?(h="Right",u.x-=e.displacement.x):"center"===l&&(h="Center"),"top"===c?(p="Top",u.y+=e.displacement.y):"bottom"===c?(p="Bottom",u.y-=e.displacement.y):"center"===c&&(p="Center"),n.horizontalAlignment=h,n.verticalAlignment=p,n.setOffsetWithRespectToBounds(u.x,u.y,"Absolute"),n.relativeMode="Point"},t.prototype.getConnectorPoints=function(e,t,i,n){Math.abs(this.sourcePoint.x-this.targetPoint.x),Math.abs(this.sourcePoint.y-this.targetPoint.y);var r=ft(this,i,n).slice(0);return r&&r.length>0&&(this.sourcePoint=r[0],this.targetPoint=r[r.length-1]),r},t.prototype.clipDecorator=function(e,t,i,n){var r,o,a={x:0,y:0},s=t.length;r=i?t[0]:t[s-1],o=i?t[1]:t[s-2];var l=E.distancePoints(r,o);l=0===l?1:l;var c=1,d=i?e.sourceWrapper:e.targetWrapper;d&&(c=d.style.strokeWidth,n&&n&pe.DecoratorPropertyChange&&(c=1));var h=c-1;return a.x=Math.round(r.x+h*(o.x-r.x)/l),a.y=Math.round(r.y+h*(o.y-r.y)/l),(i&&"None"!==e.sourceDecorator.shape||!i&&"None"!==e.targetDecorator.shape)&&(a=E.adjustPoint(a,o,!0,n&pe.DecoratorPropertyChange?0:c/2)),a},t.prototype.clipDecorators=function(e,t,i){return"None"!==e.sourceDecorator.shape&&(t[0]=this.clipDecorator(e,t,!0,i)),"None"!==e.targetDecorator.shape&&(t[t.length-1]=this.clipDecorator(e,t,!1,i)),t},t.prototype.updateSegmentElement=function(e,t,i,n){var r,o=new _;if(r=this.getSegmentPath(e,t,n),"Bezier"===e.type){if(this.segments.length>0)for(var a=0;a<this.segments.length;a++){var s=this.segments[a],l=e.segments[a],c=E.isEmptyPoint(s.point1)?l.bezierPoint1:l.point1,d=E.isEmptyPoint(s.point2)?l.bezierPoint2:l.point2;o.uniteRect(Mr(s.points[0],c,d,s.points[1],e))}}else o=_.toBounds(t);return i.width=o.width,i.height=o.height,i.offsetX=o.x+i.width/2,i.offsetY=o.y+i.height/2,i.data=r,e.wrapper&&(e.wrapper.offsetX=i.offsetX,e.wrapper.offsetY=i.offsetY,e.wrapper.width=o.width,e.wrapper.height=o.height),i},t.prototype.getSegmentElement=function(e,t,i,n){var r;return js(e),r=this.getConnectorPoints(e.type,void 0,i),this.intermediatePoints=r,t.staticSize=!0,t=this.updateSegmentElement(e,r,t,n)},t.prototype.getDecoratorElement=function(e,t,i,n,r){var o=new Ue;if(o.transform=le.Self,this.updateDecoratorElement(o,e,t,i),void 0!==r){var a=r(i,this);o.description=a||"source"}return o},t.prototype.bridgePath=function(e,t,i){var n=t;if(e.bridges.length>0)if("Straight"===e.type&&e.segments.length<2)for(var r=0;r<e.bridges.length;r++){(o=e.bridges[r]).rendered||(n+=" L"+o.startPoint.x+" "+o.startPoint.y,n+=o.path,o.rendered=!0)}else if("Orthogonal"===e.type||"Straight"===e.type&&e.segments.length>1)for(r=0;r<e.bridges.length;r++){var o;(o=e.bridges[r]).segmentPointIndex===i&&(o.rendered||o.segmentPointIndex===i&&(n+=" L"+o.startPoint.x+" "+o.startPoint.y,n+=o.path,o.rendered=!0))}return n},t.prototype.updateDecoratorElement=function(e,t,i,n){var r,o;e.offsetX=t.x,e.offsetY=t.y,o=E.findAngle(t,i),r=function(e,t){return"Custom"===e?t.pathData:st[e]}(n.shape,n);var a=new P(n.width,n.height);e.pivot.x=n.pivot.x,e.pivot.y=n.pivot.y,e.style=n.style,e.rotateAngle=o,e.data=r,e.canMeasurePath=!0,e.width=a.width,e.height=a.height},t.prototype.getSegmentPath=function(e,t,i){for(var n,r,o,a="",s=[],l=0;l<t.length;)s.push({x:t[l].x,y:t[l].y}),l++;for(var c=0;c<e.bridges.length;c++){e.bridges[c].rendered=!1}if(s=this.clipDecorators(e,s,i),this.cornerRadius>0&&"Bezier"!==this.type)for(var d=0;d<s.length-1;d++){n=s[d],0===d&&(a="M"+n.x+" "+n.y);var h=E.distancePoints(s[d],s[d+1]);h>0&&(r=d<s.length-2?h<2*this.cornerRadius?E.adjustPoint(s[d],s[d+1],!1,h/2):E.adjustPoint(s[d],s[d+1],!1,this.cornerRadius):s[d+1],d>0&&(h<2*this.cornerRadius?(o=E.adjustPoint(s[d],s[d+1],!0,h/2),d<s.length-2&&(r=null)):o=E.adjustPoint(s[d],s[d+1],!0,this.cornerRadius)),o&&(a+="Q"+n.x+" "+n.y+" "+o.x+" "+o.y),r&&(e.bridges.length>0&&(a=this.bridgePath(e,a,d),"Orthogonal"===e.type&&(a=this.bridgePath(e,a,d+1))),a+=" L"+r.x+" "+r.y))}else if("Bezier"===this.type){for(var p=void 0,u=this.segments,f=0;f<u.length;f++)s.length>2&&(u[f].bezierPoint1={x:0,y:0},u[f].bezierPoint2={x:0,y:0}),!E.isEmptyPoint(u[f].point1)||u[f].vector1.angle||u[f].vector1.distance?u[f].vector1.angle||u[f].vector1.distance?u[f].bezierPoint1=E.transform(s[f],u[f].vector1.angle,u[f].vector1.distance):u[f].bezierPoint1={x:u[f].point1.x||u[f].bezierPoint1.x,y:u[f].point1.y||u[f].bezierPoint1.y}:((e.sourceID||this.sourcePortID)&&this.sourceWrapper&&(p=Ar(this.sourceWrapper.bounds,s[f],!0)),u[f].bezierPoint1=kr(s[f],s[f+1],p)),!E.isEmptyPoint(u[f].point2)||u[f].vector2.angle||u[f].vector2.distance?u[f].vector2.angle||u[f].vector2.distance?u[f].bezierPoint2=E.transform(s[f+1],u[f].vector2.angle,u[f].vector2.distance):u[f].bezierPoint2={x:u[f].point2.x||u[f].bezierPoint2.x,y:u[f].point2.y||u[f].bezierPoint2.y}:((e.targetID||this.targetPortID)&&this.targetWrapper&&(p=Ar(this.targetWrapper.bounds,s[f+1],!0)),u[f].bezierPoint2=kr(s[f+1],s[f],p));s.splice(1,0,{x:u[0].bezierPoint1.x,y:u[0].bezierPoint1.y}),s.splice(s.length-1,0,{x:u[u.length-1].bezierPoint2.x,y:u[u.length-1].bezierPoint2.y}),s=this.clipDecorators(e,s,i);for(var g=0;g<u.length;g++){0===g&&(a="M"+s[0].x+" "+s[0].y);var m=g===u.length-1?s[s.length-1].x+" "+s[s.length-1].y:u[g].points[u[g].points.length-1].x+" "+u[g].points[u[g].points.length-1].y;a+="C"+u[g].bezierPoint1.x+" "+u[g].bezierPoint1.y+" "+u[g].bezierPoint2.x+" "+u[g].bezierPoint2.y+" "+m}}else for(var v=0;v<s.length;v++)n=s[v],0===v&&(a="M"+n.x+" "+n.y),v>0&&(a=this.bridgePath(e,a,v),a+=" L"+n.x+" "+n.y);return a},t.prototype.updateShapeElement=function(e){var t;switch(e.shape.type){case"Bpmn":e.wrapper.children[3]instanceof Ue&&(t=e.wrapper.children[3]),("Message"===e.shape.flow||Object(r.I)()&&"Message"===e.shape.bpmnFlow)&&this.updateShapePosition(e,t);break;case"UmlActivity":("Exception"===e.shape.flow||Object(r.I)()&&"Exception"===e.shape.umlActivityFlow)&&this.getUMLExceptionFlow(e.wrapper.children[0])}},t.prototype.updateShapePosition=function(e,t){for(var i,n,r=0,o=this.intermediatePoints,a=0;a<o.length-1;a++){var s=.5*(r+=this.distance(o[a],o[a+1]));r>=s&&(i=Lt(o[a],o[a+1]),n=E.transform(o[a],i,s))}t.offsetX=n.x,t.offsetY=n.y},t.prototype.scale=function(e,t,i,n,r){var o=0,a=0;if(this.wrapper&&this.wrapper.outerBounds){var s=Zt(this),l=(this.wrapper.bounds.width||this.style.strokeWidth||1)-2,c=(this.wrapper.bounds.height||this.style.strokeWidth||1)-2;o=s.width-l,a=s.height-c,e=(i-Math.max(o,a))/l,t=(n-Math.max(o,a))/c,o=a=Math.min(o,a)}e=t=Math.min(e,t);var d=W();q(d,-(r=r||this.wrapper).rotateAngle,r.offsetX,r.offsetY),U(d,e,t,r.offsetX,r.offsetY),q(d,r.rotateAngle,r.offsetX,r.offsetY);var h=function(e,t){for(var i=[],n=0,r=t;n<r.length;n++){var o=r[n];i.push(F(e,o))}return i}(d,this.intermediatePoints);return this.sourcePoint=h[0],this.targetPoint=h[h.length-1],cs(this,h=this.intermediatePoints=ft(this)),{x:o,y:a}},t.prototype.getClassName=function(){return"Connector"},vr([Object(r.h)(yr)],t.prototype,"shape",void 0),vr([Object(r.q)(te.Default)],t.prototype,"constraints",void 0),vr([Object(r.q)(10)],t.prototype,"bridgeSpace",void 0),vr([Object(r.e)([],rt)],t.prototype,"annotations",void 0),vr([Object(r.g)({},E)],t.prototype,"sourcePoint",void 0),vr([Object(r.g)({},E)],t.prototype,"targetPoint",void 0),vr([Object(r.e)([],gr)],t.prototype,"fixedUserHandles",void 0),vr([Object(r.f)(br)],t.prototype,"segments",void 0),vr([Object(r.q)("")],t.prototype,"sourceID",void 0),vr([Object(r.q)("")],t.prototype,"targetID",void 0),vr([Object(r.q)(10)],t.prototype,"hitPadding",void 0),vr([Object(r.q)(0)],t.prototype,"connectionPadding",void 0),vr([Object(r.q)("Straight")],t.prototype,"type",void 0),vr([Object(r.q)(0)],t.prototype,"cornerRadius",void 0),vr([Object(r.g)({shape:"None"},wr)],t.prototype,"sourceDecorator",void 0),vr([Object(r.g)({shape:"Arrow"},wr)],t.prototype,"targetDecorator",void 0),vr([Object(r.g)({},Qn)],t.prototype,"tooltip",void 0),vr([Object(r.q)("")],t.prototype,"sourcePortID",void 0),vr([Object(r.q)("")],t.prototype,"targetPortID",void 0),vr([Object(r.q)(0)],t.prototype,"sourcePadding",void 0),vr([Object(r.g)({},rr)],t.prototype,"previewSize",void 0),vr([Object(r.g)({},rr)],t.prototype,"dragSize",void 0),vr([Object(r.q)(0)],t.prototype,"targetPadding",void 0),vr([Object(r.g)({strokeWidth:1,strokeColor:"black"},De)],t.prototype,"style",void 0),vr([Object(r.q)(null)],t.prototype,"wrapper",void 0),t}(lr),Hr=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wr=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Fr=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.offset=0,n.scale=1,n}return Hr(t,e),t.prototype.preRender=function(){this.unWireEvents(),this.wireEvents()},t.prototype.render=function(){this.updateRulerGeometry(),this.renderComplete()},t.prototype.getModuleName=function(){return"Ruler"},t.prototype.destroy=function(){this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this),this.element.classList.remove("e-ruler")},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"length":case"interval":case"segmentWidth":case"tickAlignment":case"markerColor":case"thickness":this.updateRuler()}}},t.prototype.updateRulerGeometry=function(){this.element.style.textAlign="left",this.renderRulerSpace(),this.updateRuler()},t.prototype.renderRulerSpace=function(){var e=this.getRulerGeometry(),t=document.getElementById(this.element.id+"_ruler_space");return t||(t=Zl("div",{id:this.element.id+"_ruler_space",style:"height:"+e.height+"px;width:"+e.width+"px;cssFloat:left;"}),this.element.appendChild(t)),t},t.prototype.updateRuler=function(){var e=this.getRulerSize(),t=this.getRulerGeometry(),i=0,n=0,r=new P,o=this.getRulerSVG(t);if(o&&(i=this.length,r.height=e,n=this.offset,i&&i!==1/0)){var a=i+this.segmentWidth,s=n;this.updateSegments(s,a+Math.abs(s),o,e)}},t.prototype.updateSegments=function(e,t,i,n){for(var r=e,o={trans:0};r<t;){var a=this.getNewSegment(r,i);a&&(i.appendChild(a.segment),r=this.updateSegment(e,t,a,r,o,n))}},t.prototype.updateSegment=function(e,t,i,n,r,o){var a=this.updateSegmentWidth(this.scale);n===e?(this.startValue=Math.floor(e/a)*a/this.scale,this.startValue=this.startValue%1!==0?Number(this.startValue.toFixed(1)):this.startValue,i.label.textContent=this.startValue.toString(),this.defStartValue=n=this.startValue*this.scale,"Horizontal"===this.orientation?this.hRulerOffset=e-n:this.vRulerOffset=e-n):(this.startValue=n/this.scale,this.startValue=this.startValue%1!==0?Number(this.startValue.toFixed(1)):this.startValue,i.label.textContent=this.startValue.toString()),this.updateTickLabel(i,o);var s="Horizontal"===this.orientation?r.trans+.5+",0.5":"0.5,"+(r.trans+.5);return i.segment.setAttribute("transform","translate("+s+")"),r.trans+=a,n+=a},t.prototype.updateTickLabel=function(e,t){var i=e.segment.lastChild.getBBox(),n="Horizontal"===this.orientation,r="RightOrBottom"===this.tickAlignment,o=n?2:0,a=n?r?t/2+5.5-5.5:t/2+5.5:i.height,s=r?-(i.width+2)+","+(t/2-i.height):-(i.width+2)+","+(t/2-i.height/2),l=n?{x:o,y:a}:{x:o,y:a,transform:"rotate(270)translate("+s+")"};ic(e.segment.lastChild,l)},t.prototype.getNewSegment=function(e,t){var i=this.createNewTicks(e,t);return{segment:i,label:this.createTickLabel(t,i)}},t.prototype.createNewTicks=function(e,t){var i,n,r,o=this.updateSegmentWidth(this.scale);r=Jl("g",{class:"e-ruler-segment"});for(var a=0;a<this.interval;a++)n=o/this.interval,i=this.createTick(t,n,a+1,e),r.appendChild(i);return r},t.prototype.getLinePoint=function(e,t,i){var n=this.updateSegmentWidth(this.scale),r=this.getRulerSize();return i=(t*=i-1)%n===0?r:.3*r},t.prototype.createTick=function(e,t,i,n){var r,o,a=this.getLinePoint(e,t,i),s=this.getRulerSize(),l="Horizontal"===this.orientation,c="RightOrBottom"===this.tickAlignment,d=Pc(this.arrangeTick);o={ruler:undefined,tickLength:a,tickInterval:this.segmentWidth/this.interval*(i-1)},d&&d(o),a=o.tickLength;var h=t*(i-1);return(r=Jl("line",{x1:l?h:c?s:0,y1:l?c?s:s-(s-a):h,x2:l?h:c?s-a:s-(s-a),y2:l?c?s-a:0:h,"stroke-width":"1",stroke:"black"})).setAttribute("class","e-ruler-tick"),r},t.prototype.createTickLabel=function(e,t){var i;if(t){i=Jl("text",{class:"e-ruler-tick-label"}),t.appendChild(i)}return i},t.prototype.updateSegmentWidth=function(e){if(100!==this.segmentWidth)return this.segmentWidth;var t,i=1;for(t=100,t=100/Math.pow(2,Math.round(Math.log(e)/Math.log(2)));t>100;)i/=10,t/=10;for(;t<25;)i*=10,t*=10;return t>=25&&t%25!==0&&(t=25*Math.round(t/25)),t*e/i},t.prototype.createMarkerLine=function(e,t,i){var n;return t&&((n=e.getElementById(t.id+"_marker"))&&n.parentNode.removeChild(n),n=Jl("line",i)),n},t.prototype.drawRulerMarker=function(e,t,i){var n,r,o,a,s,l,c,d="Horizontal"===this.orientation,h=e.getElementsByTagName("svg");for(s=0;s<h.length;s++){h[s]&&(n=h[s]);break}if(n){r=this.getRulerSize(),l={id:e.id+"_marker",x1:0,y1:0,x2:d?0:r,y2:d?r:0,stroke:this.markerColor,"stroke-width":1.5,class:"e-d-ruler-marker"},c=this.createMarkerLine(n,e,l),o=this.scale,a=this.offset-this.defStartValue;var p=(d?t.x:t.y)*o+i+a;c.setAttribute("transform","translate("+(d?p+.5+" 0.5":"0.5 "+(p+.5))+")"),n.appendChild(c)}},t.prototype.getRulerGeometry=function(){return new P(this.element?this.element.getBoundingClientRect().width:0,this.element?this.element.getBoundingClientRect().height:0)},t.prototype.getRulerSize=function(){return this.thickness},t.prototype.getRulerSVG=function(e){var t,i,n=this.getRulerSize();if(this.element&&(t=document.getElementById(this.element.id+"_ruler_space"))){if(i=Jl("svg",{id:this.element.id+"_Ruler_svg",width:"Horizontal"===this.orientation?e.width+200:n+"px",height:"Horizontal"===this.orientation?n:e.height+200+"px",style:"position:inherit;"}),t.childNodes.length>0)for(var r=t.childNodes.length-1;r>=0;r--)t.childNodes[r].parentNode.removeChild(t.childNodes[r]);t.appendChild(i)}return i},t.prototype.wireEvents=function(){},t.prototype.unWireEvents=function(){},Wr([Object(r.q)(5)],t.prototype,"interval",void 0),Wr([Object(r.q)(100)],t.prototype,"segmentWidth",void 0),Wr([Object(r.q)("Horizontal")],t.prototype,"orientation",void 0),Wr([Object(r.q)("RightOrBottom")],t.prototype,"tickAlignment",void 0),Wr([Object(r.q)("red")],t.prototype,"markerColor",void 0),Wr([Object(r.q)(25)],t.prototype,"thickness",void 0),Wr([Object(r.q)(null)],t.prototype,"arrangeTick",void 0),Wr([Object(r.q)(400)],t.prototype,"length",void 0),t}(r.i);function qr(e,t){var i=document.getElementById(e.element.id+(t?"_hRuler":"_vRuler")),n=Yr(e),r=Xr(e),o=t?"margin-left:"+n.width+"px;":"margin-top:"+n.height+"px;";if(!i){var a="height:"+(t?n.height:r.height+100)+"px;overflow:hidden;width:"+(t?r.width+100:n.width)+"px;position:absolute;font-size:11px;"+o;i=Zl("div",{id:e.element.id+(t?"_hRuler":"_vRuler"),style:a})}e.element.insertBefore(i,e.element.firstChild);var s=t?e.rulerSettings.horizontalRuler:e.rulerSettings.verticalRuler,l=new Fr(s);l.orientation=t?"Horizontal":"Vertical",l.length=(t?r.width:r.height)+s.segmentWidth,l.appendTo("#"+e.element.id+(t?"_hRuler":"_vRuler")),t?e.hRuler=l:e.vRuler=l;var c=document.getElementById(e.element.id+(t?"_hRuler":"_vRuler"));t?e.hRuler.element=c:e.vRuler.element=c}function Ur(e){var t=-e.scroller.horizontalOffset,i=-e.scroller.verticalOffset;e&&e.rulerSettings.showRulers?(e.hRuler.length=0,e.vRuler.length=0,void 0!==t&&e.hRuler.element&&Gr(e,e.hRuler,t,!0),void 0!==i&&e.vRuler.element&&Gr(e,e.vRuler,i,!1)):Vr(e)}function Vr(e){ec(e.element.id+"_hRuler"),ec(e.element.id+"_vRuler"),ec(e.element.id+"_overlapRuler")}function Yr(e){var t=0,i=0;return e.rulerSettings.showRulers&&(t=e.rulerSettings.horizontalRuler.thickness,i=e.rulerSettings.verticalRuler.thickness),new P(i,t)}function Xr(e){var t=Yr(e),i=e.scroller.viewPortHeight,n=e.scroller.viewPortWidth;return n<e.element.clientWidth-t.width&&(n=e.element.clientWidth-t.width),i<e.element.clientHeight-t.height&&(i=e.element.clientHeight-t.height),e.hRuler&&e.hRuler.length&&(n=e.hRuler.length),e.vRuler&&e.vRuler.length&&(i=e.vRuler.length),new P(n,i)}function Gr(e,t,i,n){var r=Yr(e),o=Xr(e),a=n?e.rulerSettings.horizontalRuler:e.rulerSettings.verticalRuler;!function(e,t,i){var n=document.getElementById(e.element.id+(i?"_hRuler":"_vRuler")),r=i?e.hRuler:e.vRuler;n&&e&&t&&(n.style.width=(i?t.width+r.segmentWidth:r.thickness)+"px",n.style.height=(i?r.thickness:t.height+r.segmentWidth)+"px",(n=document.getElementById(e.element.id+"_overlapRuler"))&&(i?n.style.height=r.thickness+"px":n.style.width=r.thickness+"px"))}(e,o,n),function(e,t,i){var n=document.getElementById(e.element.id+(i?"_hRuler_ruler_space":"_vRuler_ruler_space")),r=i?e.hRuler:e.vRuler;n&&e&&t&&(n.style.width=(i?t.width+2*r.segmentWidth:r.thickness)+"px",n.style.height=(i?r.thickness:t.height+2*r.segmentWidth)+"px")}(e,o,n),t.offset=i,t.scale=e.scroller.currentZoom,t.length=(n?o.width:o.height)+100,t.arrangeTick=Pc(a.arrangeTick),t.dataBind();var s=n?e.hRuler.element:e.vRuler.element;n?s.style.marginLeft=r.width-t.hRulerOffset+"px":s.style.marginTop=r.height-t.vRulerOffset+"px"}function Zr(e){if(e){return e instanceof nt||e instanceof rt?e.constraints&ie.Select:e instanceof _r?e.constraints&te.Select:e.constraints&ne.Select}return 1}function Jr(e){if(e){return e instanceof nt||e instanceof rt?e.constraints&ie.Drag:e instanceof _r?e.constraints&te.Drag:e instanceof Dl?1:e.constraints&ne.Drag}return 1}function Qr(e){return e.constraints&te.DragSourceEnd}function $r(e){return e.constraints&te.DragTargetEnd}function Kr(e){return e.constraints&te.DragSegmentThumb}function eo(e){return e instanceof nt||e instanceof rt?e.constraints&ie.Rotate:e.constraints&ne.Rotate}function to(e){return e.constraints&ne.Shadow}function io(e){return e instanceof Pl&&e.constraints&ne.InConnect?e.constraints&ne.InConnect:0}function no(e){return e&&e.constraints&&!(e.constraints&ye.None)&&e.constraints&ye.InConnect?e.constraints&ye.InConnect:0}function ro(e){return e instanceof Pl&&e.constraints&ne.OutConnect?e.constraints&ne.OutConnect:0}function oo(e){return e&&e.constraints&&!(e.constraints&ye.None)&&e.constraints&ye.OutConnect?e.constraints&ye.OutConnect:0}function ao(e,t){var i=0;return e instanceof nt||e instanceof rt?i=e.constraints&ie.Resize:e&&("SouthEast"===t?i=e.constraints&ne.ResizeSouthEast:"East"===t?i=e.constraints&ne.ResizeEast:"NorthEast"===t?i=e.constraints&ne.ResizeNorthEast:"South"===t?i=e.constraints&ne.ResizeSouth:"North"===t?i=e.constraints&ne.ResizeNorth:"SouthWest"===t?i=e.constraints&ne.ResizeSouthWest:"West"===t?i=e.constraints&ne.ResizeWest:"NorthWest"===t&&(i=e.constraints&ne.ResizeNorthWest)),i}function so(e){return e instanceof _r?e.constraints&te.AllowDrop:e.constraints&ne.AllowDrop}function lo(e){return e.constraints&ae.Virtualization}function co(e){return e.tool&se.SingleSelect}function ho(e){return e.tool&se.MultipleSelect}function po(e){return e.tool&se.ZoomPan}function uo(e){return e.tool&se.ContinuousDraw}function fo(e){return e.tool&se.DrawOnce}function go(e){return e.tool&se.SingleSelect||e.tool&se.MultipleSelect}function mo(e){return e.constraints&ae.UserInteraction}function vo(e){return e.constraints&ae.ZoomTextEdit}function yo(e){return function(e){return e.constraints&ae.ApiUpdate}(e)||e.diagramActions&pe.ToolAction}function bo(e,t){return e.constraints&ye.Draw}function wo(e,t){return e.constraints&ye.Drag}function xo(e){return!(e&ue.DrawSelectorBorder)}function Oo(e){return!!(e&ue.PreventRenderSelector)}var So=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Co=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Po=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return So(t,e),t.prototype.getClassName=function(){return"UserHandle"},Co([Object(r.q)("")],t.prototype,"name",void 0),Co([Object(r.q)("")],t.prototype,"pathData",void 0),Co([Object(r.q)("")],t.prototype,"content",void 0),Co([Object(r.q)("")],t.prototype,"source",void 0),Co([Object(r.q)("#000000")],t.prototype,"backgroundColor",void 0),Co([Object(r.q)("Top")],t.prototype,"side",void 0),Co([Object(r.q)("")],t.prototype,"borderColor",void 0),Co([Object(r.q)(.5)],t.prototype,"borderWidth",void 0),Co([Object(r.q)(25)],t.prototype,"size",void 0),Co([Object(r.q)("white")],t.prototype,"pathColor",void 0),Co([Object(r.q)(10)],t.prototype,"displacement",void 0),Co([Object(r.q)(!0)],t.prototype,"visible",void 0),Co([Object(r.q)(0)],t.prototype,"offset",void 0),Co([Object(r.g)({},Se)],t.prototype,"margin",void 0),Co([Object(r.q)("Center")],t.prototype,"horizontalAlignment",void 0),Co([Object(r.q)("Center")],t.prototype,"verticalAlignment",void 0),Co([Object(r.q)(!1)],t.prototype,"disableNodes",void 0),Co([Object(r.q)(!1)],t.prototype,"disableConnectors",void 0),Co([Object(r.q)("")],t.prototype,"template",void 0),t}(r.d);function jo(e){return Io[e.toString()]}var Io={Action:"M 90 82.895 C 90 86.819 86.776 90 82.8 90 H 7.2 C 3.224 90 0 86.819 0 82.895 V 7.105 C 0 3.181 3.224 0 7.2 0 h 75.6 C 86.776 0 90 3.181 90 7.105 V 82.895 Z",Decision:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",MergeNode:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",InitialNode:"M10,19.5c-5.238,0-9.5-4.262-9.5-9.5S4.762,0.5,10,0.5s9.5,4.262,9.5,9.5S15.238,19.5,10,19.5z",ForkNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",JoinNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",TimeEvent:"M50.001,0.00286865 L25.001,25.0029 L0.000976562,0.00286865 L50.001,0.00286865 z M0.000976562,50.0029 L25.001,25.0029 L50.001,50.0029 L0.000976562,50.0029 z",AcceptingEvent:"M17.8336 32.164 L29.64 24 L17.32 16 L48.1664 16 L48.5 32 Z",SendSignal:"M48.164 31.8336 L56 23.832 L47.836 16 L16.168 16 L16.1668 31.8336 Z",ReceiveSignal:"M48.1664 31.8336 L39.836 24 L47.836 16 L16.168 16 L16.168 31.836 Z",StructuredNode:"M0,0 L50,0 L50,50 L0,50 z",Note:"M20 12 L4 12 L4 22 L22 22 L22 14 L20 14 L20 12 L22 14 Z"},Eo=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),To=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Ao=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Eo(t,e),To([Object(r.q)()],t.prototype,"key",void 0),To([Object(r.q)()],t.prototype,"keyModifiers",void 0),t}(r.d),Do=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Eo(t,e),t.prototype.getClassName=function(){return"Command"},To([Object(r.q)("")],t.prototype,"name",void 0),To([Object(r.q)()],t.prototype,"canExecute",void 0),To([Object(r.q)()],t.prototype,"execute",void 0),To([Object(r.g)({},Ao)],t.prototype,"gesture",void 0),To([Object(r.q)("")],t.prototype,"parameter",void 0),t}(r.d),ko=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Eo(t,e),To([Object(r.e)([],Do)],t.prototype,"commands",void 0),t}(r.d),Mo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Eo(t,e),To([Object(r.q)()],t.prototype,"show",void 0),To([Object(r.q)()],t.prototype,"showCustomMenuOnly",void 0),To([Object(r.q)()],t.prototype,"items",void 0),t}(r.d),Lo=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ro=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.childTable=[],t.cellStyle={},t.desiredRowHeight=[],t.desiredCellWidth=[],t}return Lo(t,e),t.prototype.rowDefinitions=function(){return this.rowDefns},t.prototype.columnDefinitions=function(){return this.colDefns},t.prototype.addObject=function(e,t,i,n,r){if(this.rows.length>=t){var o=this.rows[t];if(o.cells.length>i){r=r||1,n=n||1;var a=o.cells[i];a.columnSpan=Math.max(r,a.columnSpan),a.rowSpan=Math.max(n,a.rowSpan);var s=new Ho;(s=e).rowId=t,s.columnId=i,s.columnSpan=r,this.childTable[s.id]=s,this.addObjectToCell(s,a)}}},t.prototype.addObjectToCell=function(e,t){t.children||(t.children=[]),e.style.strokeColor="black",e.style.strokeWidth=1,e.style.fill="white",t.children.push(e)},t.prototype.updateProperties=function(e,t,i,n){this.offsetX=e,this.offsetY=t,this.width=i,this.height=n},t.prototype.setDefinitions=function(e,t){this.rowDefns=e,this.colDefns=t,this.children=[],this.rows=this.rows||[];for(var i=0;i<e.length;i++){var n=e[i],r=new Bo;r.cells=[];var o=new No;o.width=this.width;var a=this.colDefns;(void 0===a||a.length<1)&&(a=[o]),this.addCellInRow(a,n,r),this.rows.push(r)}},t.prototype.addCellInRow=function(e,t,i){for(var n=0;n<e.length;n++){var r=e[n],o=new _o;o.children=[],this.cellStyle.fill="none",this.cellStyle.strokeColor="none",o.id=lc(),o.style=this.cellStyle,o.desiredCellWidth=o.minWidth=r.width,o.desiredCellHeight=o.minHeight=t.height,i.cells.push(o),this.children.push(o)}},t.prototype.calculateSize=function(){for(var e=this.rows||[],t=0,i=0,n=0;n<e.length;n++){var r=this.rows[n];i=0;for(var o=0;o<r.cells.length;o++)if(i+=r.cells[o].desiredCellWidth,o===r.cells.length-1&&(this.width&&this.width!==i&&(r.cells[o].desiredCellWidth+=this.width-i,r.cells[o].minWidth=r.cells[o].desiredCellWidth,r.cells[o].children&&r.cells[o].children.length&&(r.cells[o].children[0].width=r.cells[o].desiredCellWidth),this.colDefns[o].width=r.cells[o].desiredCellWidth),t+=r.cells[o].desiredCellHeight,n===e.length-1&&this.height&&this.height!==t)){var a=this.height-t;if(a>0){for(var s=0;s<r.cells.length;s++)r.cells[s].desiredCellHeight+=a,r.cells[s].minHeight=r.cells[s].desiredCellHeight=r.cells[s].desiredCellHeight,r.cells[s].children&&r.cells[s].children.length&&(r.cells[s].children[0].height=r.cells[s].desiredCellHeight);this.rowDefns[n].height+=a}}}},t.prototype.updateRowHeight=function(e,t,i,n){var r=this.rows[e];this.rowDefns[e].height=t,void 0!==this.height&&(this.height+=t-r.cells[0].desiredCellHeight);for(var o=0;o<r.cells.length;o++)r.cells[o].desiredCellHeight=r.cells[o].minHeight=t,r.cells[o].children&&r.cells[o].children.length&&(r.cells[o].children[0].height=t,this.setTextRefresh(r.cells[o].children[0]));if(this.desiredRowHeight[e]=t,this.measure(new P(this.width,this.height)),this.arrange(this.desiredSize),i){var a=void 0!==n?this.calculateCellHeightBasedOnChildren(e,n):this.calculateCellHeight(e);a>t&&this.updateRowHeight(e,a,!1)}},t.prototype.setTextRefresh=function(e){if(e.children&&e.children.length)for(var t=e.children,i=0;i<t.length;i++)t[i]instanceof Be&&t[i].refreshTextElement(),t[i]instanceof He&&this.setTextRefresh(t[i])},t.prototype.updateColumnWidth=function(e,t,i,n){this.colDefns[e].width=t,void 0!==this.width&&(this.width+=t-this.rows[this.rows.length-1].cells[e].desiredCellWidth);for(var r=0;r<this.rows.length;r++)this.setTextRefresh(this.rows[r].cells[0]),this.rows[r].cells[e].desiredCellWidth=this.rows[r].cells[e].minWidth=t,this.rows[r].cells[e].children&&this.rows[r].cells[e].children.length&&(this.rows[r].cells[e].children[0].width=t);if(this.desiredCellWidth[e]=t,this.measure(new P(this.width,this.height)),this.arrange(this.desiredSize),i){var o=void 0!==n?this.calculateCellWidthBasedOnChildren(e,n):this.calculateCellWidth(e);o>t&&this.updateColumnWidth(e,o,!1)}},t.prototype.calculateCellWidth=function(e){for(var t,i,n,r=0;r<this.rows.length;r++)1===(n=this.rows[r].cells[e]).columnSpan&&(i=n.outerBounds.width>n.bounds.width&&(0===n.children.length||void 0===n.children[0].maxWidth)?n.outerBounds.width:n.bounds.width,t=t?t<i?i:t:i);return t},t.prototype.calculateCellHeight=function(e){for(var t,i,n,r=this.rows[e],o=0;o<r.cells.length;o++)i=(n=r.cells[o]).outerBounds.height>n.bounds.height?n.outerBounds.height:n.bounds.height,t=t?t<i?i:t:i;return t},t.prototype.calculateCellSizeBasedOnChildren=function(e,t,i,n){var r,o;if((o=e&&e.children.length>0?e.children[0]:void 0)&&1===e.columnSpan){r="Width"===t?o.bounds.right:o.bounds.bottom,n||(n="Width"===t?o.bounds.width:o.bounds.height);for(var a=0;a<o.children.length;a++){var s=o.children[a];if(s instanceof He&&-1===s.id.indexOf("header")){var l=("Width"===t?s.bounds.right:s.bounds.bottom)+i;if(l>r){var c=l-r+("Width"===t?o.bounds.width:o.bounds.height);n&&(n=n<c?c:n)}}}}return n},t.prototype.calculateCellWidthBasedOnChildren=function(e,t){for(var i,n,r=0;r<this.rows.length;r++)n=this.rows[r].cells[e],i=this.calculateCellSizeBasedOnChildren(n,"Width",t,i);return i},t.prototype.calculateCellHeightBasedOnChildren=function(e,t){for(var i,n,r=this.rows[e],o=0;o<r.cells.length;o++)n=r.cells[o],i=this.calculateCellSizeBasedOnChildren(n,"Height",t,i);return i},t.prototype.addRow=function(e,t,i){this.rowDefns.length>0?this.rowDefns.splice(e,0,t):this.rowDefns.push(t);var n=new Bo;n.cells=[],(new No).width=this.width;var r=this.colDefns;this.addCellInRow(r,t,n),e>this.rows.length-1?this.rows.push(n):this.rows.splice(e,0,n),i&&(this.measure(new P(this.width,this.height)),this.arrange(this.desiredSize))},t.prototype.addColumn=function(e,t,i){var n,r,o,a,s=this.rows;this.colDefns.length>0?this.colDefns.splice(e,0,t):this.colDefns.push(t),void 0!==this.width&&(this.width+=t.width);for(var l=0;l<s.length;l++)n=s[l],r=this.rowDefns[l],o=t,(a=new _o).style=this.cellStyle,a.desiredCellWidth=a.minWidth=o.width,a.desiredCellHeight=a.minHeight=r.height,a.children=[],e>n.cells.length-1?n.cells.push(a):n.cells.splice(e,0,a),this.children.push(a);i&&(this.measure(new P(this.width,this.height)),this.arrange(this.desiredSize))},t.prototype.removeRow=function(e){var t,i,n=this.rows[e];this.height-=this.rowDefns[e].height;for(var r=0;r<n.cells.length;r++)t=n.cells[r],this.children.splice(this.children.indexOf(t),1),(i=document.getElementById(t.id+"_groupElement"))&&i.parentElement&&i.parentElement.removeChild(i);this.rows.splice(e,1),this.rowDefns.splice(e,1),this.measure(new P(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.removeColumn=function(e){var t,i,n=this.rows;this.width-=this.colDefns[e].width;for(var r=0;r<n.length;r++)t=n[r].cells[e],this.children.splice(this.children.indexOf(t),1),(i=document.getElementById(t.id+"_groupElement"))&&i.parentElement&&i.parentElement.removeChild(i),n[r].cells.splice(e,1);this.colDefns.splice(e,1),this.measure(new P(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.updateRowIndex=function(e,t){this.rows;var i=this.rows[e];this.rows.splice(e,1),this.rows.splice(t,0,i);var n=this.rowDefns[e];this.rowDefns.splice(e,1),this.rowDefns.splice(t,0,n),this.measure(new P(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.updateColumnIndex=function(e,t,i){for(var n,r,o,a=e;a<this.rows.length;a++)n=this.rows[a],r=this.rows[a].cells[t],n.cells.splice(t,1),n.cells.splice(i,0,r);var s=this.colDefns[t];this.colDefns.splice(t,1),this.colDefns.splice(i,0,s),o=this.desiredCellWidth[t],this.desiredCellWidth.splice(t,1),this.desiredCellWidth.splice(i,0,o),this.measure(new P(this.width,this.height)),this.arrange(this.desiredSize)},t.prototype.measure=function(t){var i=void 0;if(void 0!==this.rows&&this.rows.length>0){var n=0,r=0;i=new P(0,0),this.calculateSize();for(var o=0,a=this.rows;o<a.length;o++){r=0;for(var s=0,l=(u=a[o]).cells;s<l.length;s++){var c=(v=l[s]).measure(new P(v.desiredCellWidth,v.desiredCellHeight));1===v.rowSpan&&(0===r||void 0===this.desiredRowHeight[n]?this.desiredRowHeight[n]=c.height:this.desiredRowHeight[n]=Math.max(c.height,this.desiredRowHeight[n])),1===v.columnSpan&&(0===n||void 0===this.desiredCellWidth[r]?this.desiredCellWidth[r]=c.width:this.desiredCellWidth[r]=Math.max(c.width,this.desiredCellWidth[r]),n===this.rows.length-1&&(i.width+=this.desiredCellWidth[r])),r++}i.height+=this.desiredRowHeight[n],n++}n=r=0;for(var d=0,h=0,p=this.rows;h<p.length;h++){var u;r=0;for(var f=0,g=0,m=(u=p[h]).cells;g<m.length;g++){var v;if(1!==(v=m[g]).columnSpan){v.desiredSize.width=0;for(var y=0;y<v.columnSpan;y++)y+r<u.cells.length&&(v.desiredSize.width+=this.desiredCellWidth[y+r],v.minWidth=v.desiredSize.width,v.measure(v.desiredSize));r++}else v.desiredSize.width=this.desiredCellWidth[f],v.measure(v.desiredSize);if(1!==v.rowSpan){v.desiredSize.height=0;for(y=0;y<v.rowSpan;y++)y+d<this.rows.length&&(v.desiredSize.height+=this.desiredRowHeight[y+d],v.minHeight=v.desiredSize.height,v.measure(v.desiredSize))}else v.desiredSize.height=this.desiredRowHeight[d],v.measure(v.desiredSize);n++,f++}d++}}return void 0===i&&(i=e.prototype.validateDesiredSize.call(this,i,t)),e.prototype.stretchChildren.call(this,i),this.desiredSize=i,i},t.prototype.arrange=function(e,t){var i=0,n=0;if(void 0!==this.rows&&this.rows.length>0){for(var r=this.offsetX-e.width*this.pivot.x,o=this.offsetY-e.height*this.pivot.y,a=r,s=0,l=this.rows;s<l.length;s++){a=r,i=0;for(var c=0,d=(f=l[s]).cells;c<d.length;c++){var h=d[c],p=Math.max(this.desiredCellWidth[i],h.desiredSize.width),u=Math.max(this.desiredRowHeight[n],h.desiredSize.height);h.offsetX=a+p*h.pivot.x,h.offsetY=o+u*h.pivot.y,a+=this.desiredCellWidth[i],h.arrange(new P(p,u)),i++}o+=this.desiredRowHeight[n],n++}if(t){h=void 0;var f=void 0,g=void 0,m=void 0,v=void 0;for(n=0;n<this.rows.length;n++)for(f=this.rows[n],i=0;i<f.cells.length;i++)if((h=f.cells[i]).columnSpan>1&&this.children.splice(this.children.indexOf(h)+1,h.columnSpan-1),h.rowSpan>1)for(g=n,m=0;g+h.rowSpan-1<this.rows.length&&m<h.rowSpan-1;g++,m++)v=this.rows[g+1].cells[i],this.children.splice(this.children.indexOf(v),1)}}return this.actualSize=e,this.updateBounds(),e},t}(ze),zo=function(){this.height=void 0},No=function(){this.width=void 0},Bo=function(){this.cells=null},_o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.columnSpan=1,t.rowSpan=1,t}return Lo(t,e),t}(He),Ho=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rowId=0,t.columnId=0,t.rowSpan=1,t.columnSpan=1,t}return Lo(t,e),t}(Le);function Wo(e,t,i,n){var r;if(qo(e,t,!0)){var o=e.isProtectedOnChange;e.protectPropertyChange(!0);var a=(r=e.nameTable[t.parentId]).wrapper;if(r&&"Canvas"===r.container.type&&!n&&!(a.bounds.x<=i.x&&a.bounds.right>=i.x&&a.bounds.y<=i.y&&a.bounds.bottom>=i.y)&&!(t.constraints&ne.AllowMovingOutsideLane)){var s=uc(t);e.clearSelection(),Vo(e,t),t.parentId="";var l={type:"ChildCollectionChanged",category:"Internal",undoObject:s,redoObject:uc(t)};e.addHistoryEntry(l),e.commandHandler.isContainer&&(e.commandHandler.isContainer=!1,e.endGroupAction()),Xo(t,e)}e.protectPropertyChange(o)}}function Fo(e,t){var i,n,o;if(e.enableServerDataBinding(!1),!Object(r.I)()||Object(r.I)()&&e.diagramActions&pe.ToolAction)if(e.selectedObject.helperObject)o=e.selectedObject.helperObject;else if(e.selectedItems.nodes.length>0||e.selectedItems.connectors.length>0){if(t instanceof Dl&&t.nodes.length+t.connectors.length===1?(i=t.nodes.length>0?t.nodes[0]:t.connectors[0],n=e.selectedItems.wrapper.children[0]):(i=t,n=Object(r.I)()?t===e.selectedItems.nodes[0]?e.selectedItems.wrapper:t.wrapper:e.selectedItems.wrapper),e.selectedObject.actualObject=i,!e.currentSymbol&&(i.isLane&&Aa(i,e)&&qo(e,i)||!i.isLane&&qo(e,i)||e.constraints&ae.LineRouting&&e.selectedItems.nodes.length>0))o=function(e,t){for(var i,n={},r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];n[a]=t[a]}return Ps(t)===Pl&&((i=new Pl(e,"nodes",n,!0)).id=t.id,e.initObject(i)),e.updateDiagramObject(i),i}(e,{id:"helper",rotateAngle:n.rotateAngle,offsetX:n.offsetX,offsetY:n.offsetY,minWidth:n.minWidth,minHeight:n.minHeight,maxWidth:n.maxWidth,maxHeight:n.maxHeight,width:n.actualSize.width,height:n.actualSize.height,style:{strokeDashArray:"2 2",fill:"transparent",strokeColor:"#7D7D7D",strokeWidth:2}}),e.selectedObject.helperObject=o}return e.enableServerDataBinding(!0),o}function qo(e,t,i){var n=i?e.nameTable[t.parentId]:e.nameTable[t.parentId]||t;return!(!n||!n.container)}function Uo(e,t){var i=e.nameTable[t.parentId];"Canvas"===i.container.type&&(t.margin.left=t.offsetX-i.wrapper.bounds.x-t.width/2,t.margin.top=t.offsetY-i.wrapper.bounds.y-t.height/2),e.nodePropertyChange(t,{},{width:t.width,height:t.height,offsetX:t.offsetX,offsetY:t.offsetY,margin:{left:t.margin.left,right:t.margin.right,top:t.margin.top,bottom:t.margin.bottom},rotateAngle:t.rotateAngle}),i.isLane||(i.wrapper.measure(new P),i.wrapper.arrange(i.wrapper.desiredSize))}function Vo(e,t){if(t.parentId&&""!==t.parentId){var i=e.nameTable[t.parentId];if(i.isLane&&i.parentId)for(var n=e.nameTable[i.parentId],r=i.id.slice(n.id.length),o=r.substring(0,r.length-1),a=n.shape.lanes,s=void 0,l=0;l<a.length;l++)if(o===(s=a[l]).id)for(var c=0;c<s.children.length;c++)s.children[c].id===t.id&&(s.children.splice(c,1),c--);e.deleteChild(t)}}function Yo(e,t,i,n,r){if(!e.currentSymbol){e.protectPropertyChange(!0);var o=e.nameTable[t.parentId];i=e.getObject(i.id)||i;var a=-1!==e.nodes.indexOf(i)?i.id:i;if("Canvas"!==t.container.type||r){if(o){var s=o.wrapper.bounds,l=t.wrapper.bounds;if("Horizontal"===o.shape.orientation)i.margin.left-=l.x-s.x;else{var c=t.parentId+o.shape.lanes[0].id+"_0_header";i.margin.top-=l.y-s.y-e.nameTable[c].wrapper.bounds.height}}}else{var d=i.wrapper.offsetX-i.wrapper.actualSize.width/2-(t.wrapper.offsetX-t.wrapper.actualSize.width/2),h=i.wrapper.offsetY-i.wrapper.actualSize.height/2-(t.wrapper.offsetY-t.wrapper.actualSize.height/2);i.margin.left=d,i.margin.top=h}var p=e.nameTable[t.id];if(p.children||(p.children=[]),-1===p.children.indexOf(i.id)){Vo(e,i),e.getObject(i.id)&&e.removeElements(i);var u=uc(i);if(e.addChild(p,a),i=e.getObject(i.id),p.isLane&&p.parentId)for(var f=(o=e.nameTable[p.parentId]).shape.lanes,g=p.id.slice(o.id.length),m=g.substring(0,g.length-1),v=0;v<f.length;v++)p.isLane&&m===f[v].id&&(i.parentObj instanceof ih||(i.parentObj=f[v]),f[v].children.push(i));if(e.updateDiagramObject(i),Xo(i,e),p.parentId?n||Go(p,o,i,e):e.updateDiagramObject(p),!(e.diagramActions&pe.UndoRedo)){var y={type:"ChildCollectionChanged",category:"Internal",undoObject:u,redoObject:uc(i),historyAction:r?"AddNodeToLane":void 0};e.addHistoryEntry(y)}}e.protectPropertyChange(!1)}}function Xo(e,t){var i=Nl(e.id+"_groupElement",t.element.id),n=Nl(e.parentId?e.parentId+"_groupElement":t.element.id+"_diagramLayer",t.element.id);i&&n&&n.appendChild(i)}function Go(e,t,i,n,r){var o,a=uc(e),s=!1,l=t.shape.padding,c=e.wrapper.bounds,d=e.wrapper.outerBounds,h=i.wrapper.bounds;if(t&&"SwimLane"===t.shape.type&&(c.right<h.right+l||c.bottom<h.bottom+l)){var p=t.wrapper.children[0],u=p.bounds.x,f=p.bounds.y,g=void 0;if(c.right<h.right+l&&d.x<=c.x&&(g=h.right-c.right,o=!1,p.updateColumnWidth(e.columnIndex,c.width+g,!0,l)),c.bottom<h.bottom+l&&d.y<=c.y&&(g=h.bottom-c.bottom,o=!0,p.updateRowHeight(e.rowIndex,c.height+g,!0,l)),!(n.diagramActions&pe.UndoRedo)&&(r&&(n.startGroupAction(),s=!0),void 0!==o)){var m={category:"Internal",type:o?"RowHeightChanged":"ColumnWidthChanged",undoObject:a,redoObject:uc(e)};n.addHistoryEntry(m)}t.width=t.wrapper.width=p.width,t.height=t.wrapper.height=p.height,na(t),"Horizontal"===t.shape.orientation&&fa(t,n,e.wrapper,e.columnIndex),ga(n,t),n.drag(t,u-p.bounds.x,f-p.bounds.y),la(t,n),sa(t)}return function(e,t,i){var n=e.nameTable[t.parentId];if(n&&n.isLane){var r=e.nameTable[n.parentId],o=r.wrapper.children[0];r.wrapper.bounds.x,r.wrapper.bounds.y;o.updateColumnWidth(n.columnIndex,o.columnDefinitions()[n.columnIndex].width,!0,i),o.updateRowHeight(n.rowIndex,o.rowDefinitions()[n.rowIndex].height,!0,i);var a=n.wrapper,s=void 0;t.margin.left<i&&(t.margin.left=i),t.margin.top<i&&(t.margin.top=i);for(var l=0;l<a.children.length;l++){var c=a.children[l];if(c instanceof He){var d=e.nameTable[c.id];if(d.isLane){s=d.wrapper,!0;break}}}s&&("Horizontal"===r.shape.orientation?t.margin.left<i+s.actualSize.width&&(t.margin.left=i+s.actualSize.width):t.margin.top<i+s.actualSize.height&&(t.margin.top=i+s.actualSize.height)),r.wrapper.measure(new P(r.width,r.height)),r.wrapper.arrange(r.wrapper.desiredSize),t.offsetX=t.wrapper.offsetX,t.offsetY=t.wrapper.offsetY,e.nodePropertyChange(t,{},{margin:{left:t.margin.left,top:t.margin.top}}),o.measure(new P(o.width,o.height)),o.arrange(o.desiredSize),r.width=r.wrapper.width=r.wrapper.children[0].actualSize.width,r.height=r.wrapper.height=r.wrapper.children[0].actualSize.height}}(n,i,l),n.updateDiagramElementQuad(),s}function Zo(e,t,i,n,r,o){var a=_l(n.element.id);n.diagramRenderer.renderStackHighlighter(e,a,n.scroller.transform,t,i,r,o)}function Jo(e,t,i){i.width||0!==i.shape.phases.length||(i.width=100);var n=[],r=[],o=0,a=i.shape,s="Horizontal"===a.orientation;if(a.header&&a.hasHeader&&ea(n,a.header.height),function(e,t,i){var n,r=0,o=i.shape;if(e.length>0)for(var a=0;a<e.length;a++)r+=e[a].height;if(t){if(o.phases.length>0&&o.phaseSize&&(r+=o.phaseSize,ea(e,o.phaseSize)),o.lanes.length>0)for(a=0;a<o.lanes.length;a++)r+=n=o.lanes[a].height,a===o.lanes.length-1&&r<i.height&&(n+=i.height-r),ea(e,n)}else if(o.phases.length>0){var s=0;for(a=0;a<o.phases.length;a++){var l=o.phases[a].offset;s+=0===a?l:l-=s,r+=n=l,a===o.phases.length-1&&r<i.height&&(n+=i.height-r),ea(e,n)}}else ea(e,i.height)}(n,s,i),function(e,t,i){var n,r,o,a,s=0,l=i.shape;if(l.phases.length>0&&"Horizontal"===l.orientation)for(a=0;a<l.phases.length;a++)n=l.phases[a].offset,s+=0===a?n:n-=s,r=ta(n),a===l.phases.length-1&&s<i.width&&(r.width+=i.width-s),e.push(r);else if(t)r=ta(i.width),e.push(r);else{for(l.phaseSize&&l.phases.length>0?l.lanes.length+1:l.lanes.length,l.phaseSize&&l.phases.length>0&&(s+=l.phaseSize,r=ta(l.phaseSize),e.push(r)),o=0;o<l.lanes.length;o++)s+=l.lanes[o].width,r=ta(l.lanes[o].width),o===l.lanes.length-1&&s<i.width&&(r.width+=i.width-s),e.push(r);0===l.phases.length&&0===l.lanes.length&&(r=ta(i.width),e.push(r))}}(r,s,i),e.setDefinitions(n,r),a.header&&a.hasHeader&&(!function(e,t,i){for(var n=0,r=e.columnDefinitions(),o=i.shape,a=0;a<r.length;a++)n+=r[a].width;o.header.id=o.header.id||lc();var s={id:i.id+o.header.id,annotations:[uc(o.header.annotation)],style:o.header.style?o.header.style:void 0,offsetX:i.offsetX,offsetY:i.offsetY,rowIndex:0,columnIndex:0,maxWidth:n,container:{type:"Canvas",orientation:"Horizontal"}};Zr(i)||(s.constraints&=~ne.Select);var l=Qo(t,e,i,s,!0);e.addObject(l,0,0,1,e.columnDefinitions().length)}(e,t,i),o++),a.phases.length>0&&a.phaseSize){for(var l=0;l<a.phases.length;l++)""===a.phases[l].id&&(a.phases[l].id=lc()),$o(e,t,i,o,s,l);o++}if(a.lanes.length>0)for(l=0;l<a.lanes.length;l++)""===a.lanes[l].id&&(a.lanes[l].id=lc()),Ko(e,t,i,o,l,s),o++}function Qo(e,t,i,n,r,o,a,s){var l=new Pl(e,"nodes",n,!0);if(l.parentId=i.id,l.isHeader=!!r,l.isPhase=!!o,l.isLane=!!a,s&&(l[o?"PhaseHeaderParent":"LaneHeaderParent"]=s),l.constraints&=~(ne.InConnect|ne.OutConnect),l.constraints|=ne.HideThumbs,e.initObject(l),e.nodes.push(l),l.wrapper.children.length>0){for(var c=0;c<l.wrapper.children.length;c++){var d=l.wrapper.children[c];d instanceof Le&&(d.isCalculateDesiredSize=!1),d instanceof Be&&(d.canConsiderBounds=!1,(!r&&"Vertical"===i.shape.orientation&&o||"Vertical"!==i.shape.orientation&&a)&&(d.isLaneOrientation=!0,d.refreshTextElement()))}l.wrapper.measure(new P(void 0,void 0)),l.wrapper.arrange(l.wrapper.desiredSize)}return l.wrapper}function $o(e,t,i,n,r,o){var a,s=0,l=0,c=i.shape;r?(l=o,s=n,a=e.columnDefinitions()[o].width):s=c.header&&c.hasHeader?o+1:o;var d={annotations:[uc(c.phases[o].header.annotation)],maxWidth:a,id:i.id+c.phases[o].id+"_header",offsetX:i.offsetX,offsetY:i.offsetY,style:c.phases[o].style,rowIndex:s,columnIndex:l,container:{type:"Canvas",orientation:r?"Horizontal":"Vertical"}};d.annotations[0].rotateAngle=r?0:270,Zr(i)||(d.constraints&=~ne.Select),c.phases[o].header.id=d.id;var h=Qo(t,0,i,d,!1,!0,!1,c.phases[o].id);e.addObject(h,s,l)}function Ko(e,t,i,n,r,o){for(var a,s,l,c,d,h=i.shape,p=h.phases.length||1,u=h.header&&h.hasHeader?1:0,f=0,g=o?n:u,m=h.phaseSize&&h.phases.length>0?1:0,v=0;v<p;v++)f=o?v:r+m,l=e.rows[g].cells[f],c={id:i.id+h.lanes[r].id+v,rowIndex:g,columnIndex:f,width:l.minWidth,height:l.minHeight,offsetX:i.offsetX,offsetY:i.offsetY,style:h.lanes[r].style,constraints:ne.Default|ne.ReadOnly|ne.AllowDrop,container:{type:"Canvas",orientation:o?"Horizontal":"Vertical"}},Zr(i)||(c.constraints&=~ne.Select),(s=Qo(t,0,i,c,!1,!1,!0)).children[0].isCalculateDesiredSize=!1,0===v&&((a={id:i.id+h.lanes[r].id+"_"+v+"_header",style:h.lanes[r].header.style,annotations:[uc(h.lanes[r].header.annotation)],offsetX:i.offsetX,offsetY:i.offsetY,rowIndex:g,columnIndex:f,container:{type:"Canvas",orientation:o?"Horizontal":"Vertical"}}).annotations[0].rotateAngle=o?270:0,h.lanes[r].header.id=a.id,o?a.width=h.lanes[r].header.width:a.height=h.lanes[r].header.height,Zr(i)||(a.constraints&=~ne.Select),d=Qo(t,0,i,a,!1,!1,!0,h.lanes[r].id),s.children.push(d)),e.addObject(s,g,f),o||g++,f=o?v:r+1}function ea(e,t){var i=new zo;i.height=t,e.push(i)}function ta(e){var t=new No;return t.width=e,t}function ia(e,t,i,n){for(var r,o,a,s,l,c,d,h=[],p=0,u=t.rowDefinitions().length,f=0;f<u;f++)for(c=t.rows[f],s=0;s<c.cells.length;s++)if((l=c.cells[s].children[0])&&l.children&&l.children.length)for(a=1;a<l.children.length;a++)if(r=l.children[a],(o=e.getObject(r.id))&&(o.inEdges.length>0||o.outEdges.length>0))for(d=o.inEdges.concat(o.outEdges),p=0;p<d.length;p++)-1===h.indexOf(d[p])&&h.push(d[p]);return h}function na(e){var t=e.wrapper;if(t.measure(new P(e.width,e.height)),t.children[0]instanceof Ro){var i=t.children[0],n=!1;i.width&&i.width<i.desiredSize.width&&(n=!0,i.width=i.desiredSize.width),i.height&&i.height<i.desiredSize.height&&(n=!0,i.height=i.desiredSize.height),n&&i.measure(new P(i.width,i.height))}t.arrange(t.desiredSize)}function ra(e,t,i){var n,r,o,a,s,l,c,d,h=t.wrapper.children[0];for(n=i;n<h.rows.length;n++)for(l=h.rows[n],r=0;r<l.cells.length;r++)if((c=l.cells[r]).children&&c.children.length>0)for(o=0;o<c.children.length;o++)d=c.children[o],(a=e.nameTable[d.id]).isLane&&d.children.length>1&&(s=e.nameTable[d.children[1].id])&&s.isLane&&(s.rowIndex=n,s.columnIndex=r),a.rowIndex=n,a.columnIndex=r}function oa(e,t){var i,n,r,o,a,s,l,c,d=t.wrapper.children[0],h=t.shape,p=h.padding,u=h.lanes,f=d.bounds.y,g=h.phaseSize>0?h.phases.length:0,m="Horizontal"===h.orientation,v=m?h.phases.length||1:u.length+1,y=m?(h.header&&h.hasHeader?1:0)+(h.phases.length>0?1:0)+h.lanes.length:(h.header&&h.hasHeader?1:0)+h.phases.length;if(0===g&&!m&&h.lanes.length&&(y+=1),m?(i=(h.header&&h.hasHeader?1:0)+(g>0?1:0),n=0):(i=h.header&&h.hasHeader?1:0,n=g>0?1:0),u.length>0)for(f+=h.header&&h.hasHeader?h.header.height:0,s=0;s<u.length;s++){for(l=0;l<u[s].children.length;l++)if((r=u[s].children[l]).offsetX=u[s].width,r.offsetY=u[s].height,e.initObject(r),e.nodes.push(r),o=r.wrapper,m){for(c=n;c<v;c++)if(a=d.rows[i].cells[c],o.margin.left<a.bounds.right-d.bounds.x){r.parentId=a.children[0].id,c>n?o.margin.left=o.margin.left-(a.bounds.left-d.bounds.left):a.children[0].children[1].actualSize.width+p>=o.margin.left&&(o.margin.left=a.children[0].children[1].actualSize.width+p),o.margin.left<p&&(o.margin.left=p),o.margin.top<p&&(o.margin.top=p),aa(o,r,e);break}}else for(var b=i;b<y;b++)if(a=d.rows[b].cells[n],o.margin.top<a.bounds.bottom-f){r.parentId=a.children[0].id,b>i?o.margin.top=o.margin.top-(a.bounds.top-f):a.children[0].children[1].actualSize.height+p>=o.margin.top&&(o.margin.top=a.children[0].children[1].actualSize.height+p),o.margin.left<p&&(o.margin.left=p),o.margin.top<p&&(o.margin.top=p),aa(o,r,e);break}m?i++:n++}d.measure(new P(t.width,t.height)),d.arrange(d.desiredSize),function(e,t){var i,n,r,o,a,s,l=e.columnDefinitions(),c=e.rowDefinitions(),d=ua(t);"Vertical"===t.shape.orientation&&0===d&&(d=t.shape.header&&t.shape.hasHeader?1:0);var h=t.shape.padding;for(i=0;i<l.length;i++)e.updateColumnWidth(i,l[i].width,!0,h);for(i=d;i<c.length;i++)e.updateRowHeight(i,c[i].height,!0,h);for(n=0;n<c.length;n++)for(s=e.rows[n],i=0;i<l.length;i++)if((o=s.cells[i]).children&&o.children.length>0)for(r=0;r<o.children.length;r++)(a=o.children[r]).maxWidth&&(a.maxWidth=o.actualSize.width),a.maxHeight&&(a.maxHeight=o.actualSize.height)}(d,t),t.width=t.wrapper.width=d.width,t.height=t.wrapper.height=d.height,ga(e,t),t.wrapper.measure(new P(t.width,t.height)),t.wrapper.arrange(d.desiredSize),function(e){if("SwimLane"===e.shape.type)for(var t=e.shape.lanes,i=void 0,n=void 0,r=0;r<t.length;r++){i=t[r];for(var o=0;o<i.children.length;o++)(n=i.children[o]).offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY}}(t),la(t,e),sa(t)}function aa(e,t,i){e.measure(new P(t.width,t.height)),e.arrange(e.desiredSize);var n=i.getObject(t.parentId);i.addChild(n,t.id)}function sa(e){if("SwimLane"===e.shape.type&&!e.shape.isLane&&!e.shape.isPhase){var t=void 0,i=void 0,n=void 0,r=e.shape.lanes,o=ua(e),a=e.wrapper.children[0].rowDefinitions();for(i=0;i<r.length;i++,o++)t=r[i],"Horizontal"===e.shape.orientation?(n=a[o].height,t.height!==n&&(t.height=n)):(n=e.wrapper.children[0].columnDefinitions()[o].width,t.width!==n&&(t.width=n))}}function la(e,t){var i,n,r,o,a=e.shape,s=a.phases,l=a.header&&a.hasHeader?1:0,c=e.wrapper.children[0],d=c.bounds.y+(a.header&&a.hasHeader?a.header.height:0);if("SwimLane"===e.shape.type&&(e=t.getObject(e.id)||e,s.length>0))if(c=e.wrapper.children[0],"Horizontal"===a.orientation)for(r=a.header&&a.hasHeader?c.rows[1]:c.rows[0],i=0;i<s.length;i++)n=(o=r.cells[i].children[0]).bounds.right-c.bounds.x,s[i].offset!==n&&(s[i].offset=n),t.nameTable[o.id].maxWidth=o.maxWidth;else for(i=0;i<s.length;i++)n=(o=c.rows[l+i].cells[0].children[0]).bounds.bottom-d,s[i].offset!==n&&(s[i].offset=n),t.nameTable[o.id].maxWidth=o.maxWidth}function ca(e,t){if(e&&e.length>0){var i=void 0;t.lineRoutingModule&&t.constraints&ae.LineRouting&&t.lineRoutingModule.renderVirtualRegion(t,!0);for(var n=0;n<e.length;n++)i=t.getObject(e[n]),t.lineRoutingModule&&t.constraints&ae.LineRouting&&"Orthogonal"===i.type?t.lineRoutingModule.refreshConnectorSegments(t,i,!0):t.connectorPropertyChange(i,{},{sourceID:i.sourceID,targetID:i.targetID})}}function da(e,t,i,n){var r,o,a,s,l,c,d,h,p=e.getObject(t.parentId),u=p.shape,f=p.wrapper.children[0],g=u.lanes,m=ia(e,f,t.rowIndex);if("Horizontal"===u.orientation&&t.rowIndex!==i.rowIndex||"Vertical"===u.orientation&&t.columnIndex!==i.columnIndex){if("Horizontal"===u.orientation)s=t.rowIndex,l=i.rowIndex,r=(u.header&&u.hasHeader?1:0)+(u.phases.length&&u.phaseSize?1:0),d=t.rowIndex-r,h=i.rowIndex-r,g[d].canMove&&(d<h?n&&i.wrapper.offsetY>n.y&&(l+=h>0?-1:1,h+=h>0?-1:1):n&&i.wrapper.offsetY<n.y&&(l+=1,h+=1),s!==l&&f.updateRowIndex(s,l));else if(s=t.columnIndex,l=i.columnIndex,r=u.phases.length&&u.phaseSize?1:0,d=t.columnIndex-r,h=i.columnIndex-r,u.header&&u.hasHeader?1:0,g[d].canMove&&(d<h?n&&i.wrapper.offsetX>n.x&&(l+=h>0?-1:1,h+=h>0?-1:1):n&&i.wrapper.offsetX<n.x&&(l+=1,h+=1),s!==l)){if((0===u.phaseSize||0===u.phases.length)&&(0===l||0===s)&&u.header&&u.hasHeader){var v=0===l?s:l;f.rows[0].cells[v].children=f.rows[0].cells[0].children,f.rows[0].cells[v].columnSpan=f.rows[0].cells[0].columnSpan,f.rows[0].cells[0].children=[]}f.updateColumnIndex(0,s,l)}s!==l&&(c=g[d]).canMove&&(o={target:uc(i),source:uc(t)},c=g[d],g.splice(d,1),g.splice(h,0,c),a={type:"LanePositionChanged",redoObject:{target:uc(o.source),source:uc(o.target)},undoObject:o,category:"Internal"},e.diagramActions&pe.UndoRedo||e.commandHandler.addHistoryEntry(a),ra(e,p,0),ca(m,e),function(e,t){for(var i,n,r=0;r<e.length;r++){i=e[r];for(var o=0;o<i.children.length;o++)(n=t.nameTable[i.children[o].id]).offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY}}(g,e),p.wrapper.measure(new P(p.width,p.height)),p.wrapper.arrange(p.wrapper.desiredSize),e.updateDiagramObject(p))}e.updateDiagramElementQuad()}function ha(e,t,i,n){var r=e.getObject(i.id),o=r.shape,a=o.header&&o.hasHeader?1:0,s=o.lanes,l=o.phases,c=n.wrapper.actualSize.width,d=n.wrapper.actualSize.height,h=t.wrapper.actualSize.width,p=t.wrapper.actualSize.height;"SwimLane"===r.shape.type&&("Horizontal"===o.orientation?t.isPhase?l[t.columnIndex].offset+=c-h:(a=o.phaseSize&&o.phases.length>0?a+1:a,s[t.rowIndex-a].height+=d-p):t.isPhase?l[t.rowIndex-a].offset+=d-p:(a=o.phaseSize&&o.phases.length>0?1:0,s[t.columnIndex-a].width+=c-h))}function pa(e,t){var i,n=e.shape,r=n.header&&n.hasHeader?1:0;return"Horizontal"===n.orientation?(r+=n.phases.length>0?1:0,i=t.rowIndex-r):i=t.columnIndex-(n.phaseSize&&n.phases.length>0?1:0),i}function ua(e){var t=0,i=e.shape;return"Horizontal"===i.orientation&&(t=i.header&&i.hasHeader?1:0),i.phases.length>0&&i.phaseSize&&(t+=1),t}function fa(e,t,i,n){var r=e.shape;if(r.phases.length>0){var o=t.nameTable[r.phases[n].header.id];o&&o.maxWidth<i.outerBounds.width&&(o.maxWidth=i.outerBounds.width,o.wrapper.maxWidth=i.outerBounds.width)}}function ga(e,t){if(t.shape.header&&t.shape.hasHeader){var i=t.wrapper.children[0].rows[0].cells[0].children[0].id,n=e.nameTable[i];n&&n.isHeader&&n.maxWidth<t.width&&(n.maxWidth=t.width,n.wrapper.maxWidth=t.width)}}function ma(e,t,i,n){var r,o=e.nameTable[t.id];if("SwimLane"===o.shape.type){e.protectPropertyChange(!0);var a,s,l=o.wrapper.children[0],c=l.bounds,d=o.shape,h=void 0,p=!1,u=void 0,f=void 0,g=void 0,m=void 0,v=void 0,y=void 0,b=void 0,w=void 0,x=void 0;if(g=new Il(d,"lanes",i,!0),f=d.header&&d.hasHeader?1:0,"Horizontal"===d.orientation&&(p=!0,f=d.phases.length>0?f+1:f),a=ia(e,l),f+=s=void 0!==n?n:d.lanes.length,r={element:g,cause:e.diagramActions,state:"Changing",type:"Addition",cancel:!1,laneIndex:s},e.triggerEvent(ve.collectionChange,r),!r.cancel){if(p){var O=new zo;O.height=i.height,l.addRow(f,O,!1),o.height=void 0!==o.height?o.height+i.height:o.height,o.wrapper.height=l.height=o.height}else{var S=new No;S.width=i.width,l.addColumn(s+1,S,!1),o.width&&(o.width+=i.width,o.wrapper.width=l.width=o.width),e.diagramActions&pe.UndoRedo||(l.rows[0].cells[0].columnSpan+=1)}if(e.diagramActions&pe.UndoRedo||(g.id=""===g.id?lc():g.id),void 0!==n?d.lanes.splice(n,0,g):d.lanes.push(g),r={element:g,cause:e.diagramActions,state:"Changed",type:"Addition",cancel:!1,laneIndex:s},e.triggerEvent(ve.collectionChange,r),Ko(l,e,o,f,s,p),h="Horizontal"===d.orientation?e.nameTable[l.rows[f].cells[0].children[0].id]:d.header&&d.hasHeader?e.nameTable[l.rows[1].cells[f].children[0].id]:e.nameTable[l.rows[0].cells[f].children[0].id],e.diagramActions&pe.UndoRedo||(u={type:"LaneCollectionChanged",changeType:"Insert",undoObject:uc(g),redoObject:uc(h),category:"Internal"},e.addHistoryEntry(u)),ra(e,o,"Horizontal"===d.orientation?f:d.header&&d.hasHeader?1:0),na(o),ga(e,o),(m=i.children)&&m.length>0)for(v=0;v<m.length;v++)if(x={x:(w=m[v]).wrapper.offsetX,y:w.wrapper.offsetY},"Horizontal"===d.orientation)for(l.rows[f].cells[y],y=0;y<l.rows[f].cells.length;y++)va(e,l.rows[f].cells[y],x,w);else for(b=0;b<l.rows.length;b++)va(e,l.rows[b].cells[f],x,w);ca(a,e),e.drag(o,c.x-l.bounds.x,c.y-l.bounds.y)}e.protectPropertyChange(!1)}}function va(e,t,i,n){if(t.children&&t.children.length>0){var r=t.children[0],o=e.nameTable[r.id];r.bounds.containsPoint(i)&&e.addChild(o,n)}}function ya(e,t,i){if("SwimLane"===t.shape.type){var n,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=void 0,d=void 0,h=t.wrapper.bounds.x,p=t.wrapper.bounds.y,u=t.shape,f=u.padding,g=u.phases,m=void 0,v=t.wrapper.children[0],y="Horizontal"===u.orientation;if(r=u.header&&u.hasHeader?0:-1,u.phases.length>0&&(r+=1,0),n=y?u.lanes[0].header.width:u.lanes[0].header.height,i.offset>n){for(d=0;d<g.length;d++)if(a=g[d],s=d>0?g[d-1]:a,a.offset>i.offset){if(m=d>0?i.offset-s.offset:i.offset,y){var b=v.columnDefinitions()[d];b.width-=m,(l=e.nameTable[u.phases[d].header.id]).maxWidth=l.wrapper.maxWidth=b.width,v.updateColumnWidth(d,b.width,!1);var w=new No;w.width=m,c=d,v.addColumn(d,w,!1);break}var x=v.rowDefinitions()[d+r];x.height-=m,l=e.nameTable[u.phases[d].header.id],v.updateRowHeight(d+r,x.height,!1);var O=new zo;O.height=m,c=d,v.addRow(d+r,O,!1);break}if(e.diagramActions&pe.UndoRedo&&void 0===c)(A=e.historyManager.currentEntry.next).isLastPhase&&function(e,t,i,n,r,o){var a=t.shape.phases[e-2],s=i.previousPhase.offset;if(r){var l=n.columnDefinitions()[e-1],c=new No;e>1?(c.width=l.width-(s-a.offset),l.width=s-a.offset):(c.width=l.width-s,l.width=s),n.updateColumnWidth(e-1,l.width,!1),n.addColumn(e,c,!1)}else{l=n.rowDefinitions()[e];var d=new zo;e>1?(d.height=i.undoObject.offset-s,l.height=s-a.offset):(d.height=l.height-s,l.height=s),n.updateRowHeight(e,l.height,!1),n.addRow(1+e,d,!1)}}(c=g.length,t,A,v,y);var S=new El(t.shape,"phases",i,!0);if(e.diagramActions&pe.UndoRedo||(S.id+=lc()),u.phases.splice(c,0,S),$o(v,e,t,r,y,c),y){if(o=e.nameTable[v.rows[r].cells[c].children[0].id],0===c&&u.header&&u.hasHeader){v.rows[0].cells[0].children=v.rows[0].cells[1].children,v.rows[0].cells[1].children=[];for(var C=v.rows[0],P=0;P<C.cells.length;P++)C.cells[P].minWidth=void 0,C.cells[P].columnSpan=0===P?v.rows[0].cells.length:1}!function(e,t,i,n,r){var o,a,s=t.shape,l=ua(t);s.header&&s.hasHeader&&(i.rows[0].cells[0].columnSpan=i.rows[0].cells.length);for(o=l;o<i.rows.length;o++)ba(e,t,(a=i.rows[o]).cells[n-1],a.cells[n],a.cells[n+1],o,n);ra(e,t,1)}(e,t,v,c);var j=v.columnDefinitions();if(v.updateColumnWidth(c,j[c].width,!0,f),o.maxWidth=o.wrapper.maxWidth=j[c].width,j.length>c+1){var I=e.nameTable[v.rows[r].cells[c+1].children[0].id];v.updateColumnWidth(c+1,j[c+1].width,!0,f),I.maxWidth=I.wrapper.maxWidth=j[c+1].width}t.width=t.wrapper.width=t.wrapper.children[0].width=v.width}else{o=e.nameTable[v.rows[r+c].cells[0].children[0].id];var E=v.rowDefinitions(),T=E[r+c].height;!function(e,t,i,n,r){for(var o,a,s=i.rows[n],l=i.rows[n+1],c=i.rows[n-1],d=1;d<s.cells.length;d++)o=s.cells[d],a=l?l.cells[d]:void 0,ba(e,t,c.cells[d],o,a,n,d);ra(e,t,1)}(e,t,v,r+c),v.updateRowHeight(r+c,T,!0,f),E.length>r+c+1&&(T=E[r+c+1].height,v.updateRowHeight(r+c+1,T,!0,f)),t.height=t.wrapper.height=t.wrapper.children[0].height=v.actualSize.height}if(na(t),t.width=t.wrapper.actualSize.width,ga(e,t),e.drag(t,h-t.wrapper.bounds.x,p-t.wrapper.bounds.y),la(t,e),!(e.diagramActions&pe.UndoRedo)){var A={type:"PhaseCollectionChanged",changeType:"Insert",undoObject:uc(S),redoObject:uc(o),category:"Internal"};e.addHistoryEntry(A)}e.updateDiagramObject(t)}}}function ba(e,t,i,n,r,o,a){var s,l,c,d,h,p=t.shape,u="Horizontal"===p.orientation,f=t.wrapper.children[0],g=n.desiredCellWidth,m=n.desiredCellHeight,v=u?o:a;if(i?(s=u?i.bounds.x+i.bounds.width:i.bounds.x,l=u?i.bounds.y:i.bounds.y+i.bounds.height):(s=f.bounds.x,l=r.bounds.y),c=new _(s,l,g,m),(d=Qo(e,0,t,{id:t.id+(u?p.lanes[v-2]:p.lanes[v-1]).id+lc()[0],rowIndex:o,columnIndex:a,width:n.minWidth,height:n.minHeight,style:(u?p.lanes[v-2]:p.lanes[v-1]).style,constraints:ne.Default|ne.AllowDrop,container:{type:"Canvas",orientation:u?"Horizontal":"Vertical"}},!1,!1,!0)).children[0].isCalculateDesiredSize=!1,f.addObject(d,o,a),r&&r.children&&r.children.length)for(h=0;h<r.children.length;h++)u?e.nameTable[r.children[h].id].columnIndex+=1:e.nameTable[r.children[h].id].rowIndex+=1;!function(e,t,i,n,r,o,a){var s,l,c,d=e.nameTable[r.id],h=t||a,p=e.nameTable[d.parentId].shape.padding;if(h.children&&h.children[0].children.length>1)for(var u=1;u<h.children[0].children.length;u++)s=h.children[0].children[u],c=e.nameTable[s.id],l=o?{x:s.bounds.x,y:s.bounds.center.y}:{x:s.bounds.center.x,y:s.bounds.top},n.containsPoint(l)?(i.children[0].children.push(s),h.children[0].children.splice(u,1),u--,e.deleteChild(c),c.isLane||(c.parentId=r.id),d.children||(d.children=[]),t||(o?c.margin.left=c.wrapper.bounds.x-h.children[0].bounds.right:c.margin.top=c.wrapper.bounds.y-h.children[0].bounds.bottom),d.children.push(s.id),c.zIndex=d.zIndex+1,e.removeElements(c)):t&&(o?(c.margin.left-=i.desiredCellWidth,p>c.margin.left&&(c.margin.left=p)):(c.margin.top-=i.desiredCellHeight,p>c.margin.top&&(c.margin.top=p)))}(e,r,n,c,d,u,i)}function wa(e,t,i){if("SwimLane"===t.shape.type&&("ResizeSouth"===i||"ResizeEast"===i)){var n=t.shape,r=t.wrapper.children[0],o=void 0,a=void 0;"ResizeSouth"===i?"Vertical"===n.orientation?o=r.rows[r.rows.length-1].cells[0]:(a=r.rows.length-1,o=r.rows[a].cells[r.rows[a].cells.length-1]):(a=n.header&&n.hasHeader?1:0,o=r.rows[a].cells[r.rows[a].cells.length-1]),e.commandHandler.select(e.nameTable[o.children[0].id])}}function xa(e,t,i,n,r,o){var a,s,l,c,d,h,p,u,f=lc(),g=e.shape,m=g.phases,v=e.offsetX-e.wrapper.actualSize.width/2,y=e.offsetY-e.wrapper.actualSize.height/2;if("Vertical"===g.orientation&&(y+=g.header&&g.hasHeader?g.header.height:0),!o)for(r||(e.id+=f,g&&g.header&&g.hasHeader?g.header.id+=f:g.header=void 0),a=0;m&&a<m.length;a++)m[a].id+=f;for(u=r?[i.childTable[n.id]]:g.lanes,a=0;u&&a<u.length;a++)for(l=u[a],o||(l.id+=f),s=0;l.children&&s<l.children.length;s++)h=(c=l.children[s]).wrapper.offsetX-c.width/2,p=c.wrapper.offsetY-c.height/2,c.zIndex=-1,c.inEdges=c.outEdges=[],(o||i&&(1===i.pasteIndex||0===i.pasteIndex))&&("Vertical"===g.orientation?c.margin.top=p-y:c.margin.left=h-v),o||(c.id+=f);if(!o){if(r)d={shape:{lanes:u,phases:m,phaseSize:g.phaseSize,type:"SwimLane",orientation:g.orientation,header:{annotation:{content:"Title"},height:50}}},"Horizontal"===g.orientation?(d.width=e.wrapper.actualSize.width,d.height=n.wrapper.actualSize.height+g.header.height+g.phaseSize,d.offsetX=e.wrapper.offsetX+10*i.pasteIndex,d.offsetY=n.wrapper.offsetY+10*i.pasteIndex):(d.width=n.wrapper.actualSize.width,d.height=e.wrapper.actualSize.height,d.offsetX=n.wrapper.offsetX+10*i.pasteIndex,d.offsetY=e.wrapper.offsetY+10*i.pasteIndex),e=d;if(0!==i.pasteIndex&&(e.offsetX+=10,e.offsetY+=10),e.zIndex=-1,e=t.add(e),!r)for(var b=0,w=Object.keys(i.childTable);b<w.length;b++){var x=w[b],O=i.childTable[x];O.id+=f,O.sourceID+=f,O.targetID+=f,O.zIndex=-1,t.add(O)}"SVG"!==t.mode&&t.refreshDiagramLayer(),t.select([e])}return e}function Oa(e,t,i,n){var r,o=t.nodes[0];if(n||qo(e,o,!0)){var a,s,l=void 0,c=void 0,d=void 0,h=new Le;i&&(d=e.nameTable[i].parentId,l=o=e.nameTable[i]),a=i?l.wrapper:o.wrapper,(s=e.nameTable[d||o.parentId])&&"Grid"===s.container.type&&((r=new He).children=[],!n&&o.isHeader||("Horizontal"===s.container.orientation&&o.isPhase||"Vertical"===s.container.orientation&&(o.rowIndex>0&&o.columnIndex>0||o.isLane)?(c=function(e,t,i){for(var n=new _,r="SwimLane"===e.shape.type?e.wrapper.children[0].rows:e.wrapper.rows,o=i?1:0;o<r.length;o++)n.uniteRect(r[o].cells[t].bounds);return n}(s,l?l.columnIndex:o.columnIndex,!(!s.shape.header||!s.shape.hasHeader)),r.offsetX=c.center.x,r.offsetY=c.center.y,h.width=c.width,h.height=c.height):(r.offsetX=s.offsetX,r.offsetY=a.offsetY,h.width=s.wrapper.actualSize.width,h.height=a.actualSize.height)),r.children.push(h),r.measure(new P),r.arrange(r.desiredSize))}return r}function Sa(e,t,i,n,r){r=void 0!==r?r:pa(t,i);for(var o=!1,a=t.shape.lanes[r],s=a.children.length-1;s>=0;s--)n?n.id===a.children[s].id&&a.children.splice(s,1):(e.removeDependentConnector(a.children[s]),e.diagramActions&pe.UndoRedo||(e.diagramActions=e.diagramActions|pe.UndoRedo,o=!0),e.remove(a.children[s]),a.children.splice(s,1),o&&(e.diagramActions=e.diagramActions&~pe.UndoRedo))}function Ca(e){return e.children[0]}function Pa(e,t){e.nodes.splice(e.nodes.indexOf(t),1),e.removeFromAQuad(t),e.removeObjectsFromLayer(t),delete e.nameTable[t.id],e.removeElements(t)}function ja(e,t,i,n){var r;if("SwimLane"===i.shape.type){var o=i.shape,a=void 0;if(1===o.lanes.length)e.remove(i);else{var s=i.wrapper.bounds.x,l=i.wrapper.bounds.y,c=void 0,d=void 0,h=void 0,p=void 0,u=i.wrapper.children[0];if(a=n?o.lanes.indexOf(n):pa(i,t),r={element:t,cause:e.diagramActions,state:"Changing",type:"Removal",cancel:!1,laneIndex:a},e.triggerEvent(ve.collectionChange,r),!r.cancel){var f=uc(o.lanes[a]);if(Sa(e,i,t,void 0,a),!(e.diagramActions&pe.UndoRedo)){var g={type:"LaneCollectionChanged",changeType:"Remove",undoObject:f,redoObject:uc(t),category:"Internal"};e.addHistoryEntry(g)}o.lanes.splice(a,1);var m=t?"Horizontal"===o.orientation?t.rowIndex:t.columnIndex:ua(i)+a;if("Horizontal"===o.orientation){for(c=u.rows[m],d=0;d<c.cells.length;d++)if((h=c.cells[d])&&h.children.length>0)for(p=0;p<h.children.length;p++)Ia(e,h.children[p]);u.removeRow(m)}else{for(i.width=void 0!==i.width?i.width-u.rows[0].cells[m].actualSize.width:i.width,d=0;d<u.rows.length;d++)if((h=u.rows[d].cells[m])&&h.children.length>0)for(p=0;p<h.children.length;p++)Ia(e,h.children[p]);u.removeColumn(m)}r={element:t,cause:e.diagramActions,state:"Changed",type:"Removal",cancel:!1,laneIndex:a},e.triggerEvent(ve.collectionChange,r),i.width=i.wrapper.width=u.width,i.height=i.wrapper.height=u.height,na(i),"Vertical"===i.shape.orientation&&(m=0),ra(e,i,m),e.drag(i,s-i.wrapper.bounds.x,l-i.wrapper.bounds.y),e.updateDiagramObject(i)}}}}function Ia(e,t){var i,n;if(t instanceof He){if(t.children.length>0)for(i=0;i<t.children.length;i++)t.children[i]instanceof He&&Ia(e,t.children[i]);n=e.getObject(t.id),Pa(e,n)}}function Ea(e,t,i,n){e.protectPropertyChange(!0);i.wrapper.bounds.x,i.wrapper.bounds.y;var r,o=!1,a=i.shape,s=i.wrapper.children[0],l=n?a.phases.indexOf(n):function(e,t){var i=t.shape,n=i.header&&i.hasHeader?1:0;return"Horizontal"===i.orientation?e.columnIndex:e.rowIndex-n}(t,i),c=a.phases.length;if(a.phases.length>1){l===c-1&&(o=!0,r=uc(a.phases[l-1]));var d=uc(a.phases[l]);if(a.phases.splice(l,1),!(e.diagramActions&pe.UndoRedo)){var h={type:"PhaseCollectionChanged",changeType:"Remove",undoObject:d,previousPhase:r,redoObject:uc(t),category:"Internal",isLastPhase:o};e.addHistoryEntry(h)}"Horizontal"===a.orientation?function(e,t,i,n){var r,o,a,s,l,c,d,h,p,u,f,g;for(n=void 0!==n?n:i.columnIndex,d=0;d<t.rows.length;d++)if((r=t.rows[d]).cells.length>1&&(o=r.cells[n],l=(a=r.cells.length-1===n?r.cells[n-1]:r.cells[n+1]).children[0],o.children.length>0))if(s=o.children[0],f=e.nameTable[s.id],0===a.children.length&&o.children.length>0)a.children=o.children,a.columnSpan=o.columnSpan-1;else{for(h=0;h<s.children.length;h++){if((u=s.children[h])instanceof He){if((g=e.nameTable[u.id]).isLane||(g.parentId=l.id),r.cells.length-1===n&&(g.margin.left=g.wrapper.bounds.x-l.bounds.x,u.margin.left=g.wrapper.bounds.x-l.bounds.x),l.children.push(u),e.nameTable[l.id]){var m=e.nameTable[l.id];m.children||(m.children=[]),m.children.push(u.id)}s.children.splice(h,1),h--,f&&f.children&&-1!==f.children.indexOf(g.id)&&f.children.splice(f.children.indexOf(g.id),1)}if(r.cells.length-1!==n)for(p=0;p<l.children.length;p++){var v=l.children[p];if(v instanceof He){var y=e.nameTable[v.id];y.margin.left=y.wrapper.bounds.x-s.bounds.x,v.margin.left=y.wrapper.bounds.x-s.bounds.x}}}if(f&&f.isPhase){var b=e.nameTable[l.id];b&&(l.maxWidth=b.wrapper.maxWidth=b.wrapper.maxWidth+=f.wrapper.maxWidth)}Pa(e,f)}var w=t.columnDefinitions()[n].width;t.removeColumn(n),n<t.columnDefinitions().length?(c=t.columnDefinitions()[n].width,c+=w,t.updateColumnWidth(n,c,!0)):(c=t.columnDefinitions()[n-1].width,c+=w,t.updateColumnWidth(n-1,c,!0))}(e,s,t,l):function(e,t,i,n,r){var o,a,s,l,c,d,h,p,u,f,g=r.shape,m=void 0!==n?g.header?n+1:n:i.rowIndex;o=t.rows[m];var v=r.wrapper.bounds.y,y=g.phases.length;void 0!==g.header&&g.hasHeader&&(v+=t.rowDefinitions()[0].height);for(s=n===y?t.rows[m-1]:t.rows[m+1],c=0;c<o.cells.length;c++)if(a=o.cells[c],p=s.cells[c].children[0],a.children.length>0){var b=a.children[0],w=e.nameTable[b.id];if(n<y)for(h=0;h<p.children.length;h++)(u=p.children[h])instanceof He&&((f=e.nameTable[u.id]).margin.top=f.wrapper.bounds.y-(0===n?v:b.bounds.y),u.margin.top=f.wrapper.bounds.y-(0===n?v:b.bounds.y));for(d=0;d<b.children.length;d++)(u=b.children[d])instanceof He&&((f=e.nameTable[u.id]).parentId=p.id,n===y&&(f.margin.top=f.wrapper.bounds.y-(0===n?v:p.bounds.y),u.margin.top=f.wrapper.bounds.y-(0===n?v:p.bounds.y)),p.children.push(u),b.children.splice(d,1),d--,w.children&&-1!==w.children.indexOf(f.id)&&w.children.splice(w.children.indexOf(f.id),1));Pa(e,w)}var x=t.rowDefinitions()[m].height;t.removeRow(m),m<t.rowDefinitions().length?(l=t.rowDefinitions()[m].height,l+=x,t.updateRowHeight(m,l,!0)):(l=t.rowDefinitions()[m-1].height,l+=x,t.updateRowHeight(m-1,l,!0))}(e,s,t,l,i),ga(e,i),ra(e,i,1),la(i,e),e.protectPropertyChange(!1),e.updateDiagramObject(i)}}function Ta(e,t){var i;if(e.isLane){var n=t.getObject(e.parentId);if(n&&"SwimLane"===n.shape.type&&e.isLane){var r=pa(n,e);i=n.shape.lanes[r]}}return i}function Aa(e,t){if(e.isLane&&Ta(e,t).canMove)return!0;return!1}function Da(e,t){for(var i=0;i<e.length;i++)if(e[i].id===t)return!0;return!1}function ka(e,t){t instanceof Pl&&(e.shape.header||(t.shape.hasHeader=!1))}function Ma(e,t,i,n){return n=t?n:void 0!==e[i-1]?e[i-1]+n:0}function La(e,t){var i=[];if(t)i=e;else{for(var n=0;n<e.length;n++)i.push(e[n]);i.push(e[i.length-2]),i.push(e[i.length-2])}return i}function Ra(e,t){if(t instanceof Pl)switch(Object(r.I)()?e.shape.umlActivityShape:e.shape.shape){case"JoinNode":e.width||(t.width=20),e.height||(t.height=90),e.style&&e.style.fill||(t.style.fill="black");break;case"ForkNode":e.width||(t.width=90),e.height||(t.height=20),e.style&&e.style.fill||(t.style.fill="black");break;case"InitialNode":case"FinalNode":e.style&&e.style.fill||(t.style.fill="black")}else switch(Object(r.I)()?e.shape.umlActivityFlow:e.shape.flow){case"Object":e.style&&e.style.strokeDashArray||(t.style.strokeDashArray="8 4"),e.style&&e.style.strokeWidth||(t.style.strokeWidth=2),e.targetDecorator&&e.targetDecorator.shape||(t.targetDecorator.shape="OpenArrow");break;case"Control":e.style&&e.style.strokeWidth||(t.style.strokeWidth=2),e.targetDecorator&&e.targetDecorator.shape||(t.targetDecorator.shape="OpenArrow"),e.sourceDecorator&&e.sourceDecorator.shape||(t.sourceDecorator.shape="None")}}function za(e,t){switch(e.shape.type){case"Bpmn":switch(Object(r.I)()?e.shape.bpmnFlow:e.shape.flow){case"Sequence":("Normal"===e.shape.sequence&&"Bezier"!==e.type||"Default"===e.shape.sequence||"Conditional"===e.shape.sequence)&&(t.targetDecorator&&t.targetDecorator.style&&(t.targetDecorator.style.fill=e.targetDecorator&&e.targetDecorator.style&&e.targetDecorator.style.fill||"black"),"Conditional"===e.shape.sequence&&t.sourceDecorator&&(t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white"),t.sourceDecorator.width=e.sourceDecorator&&e.sourceDecorator.width||20,t.sourceDecorator.height=e.sourceDecorator&&e.sourceDecorator.width||10));break;case"Association":"Default"!==e.shape.association&&"Directional"!==e.shape.association&&"BiDirectional"!==e.shape.association||(t.targetDecorator&&t.targetDecorator.style&&(t.targetDecorator.style.fill=e.targetDecorator&&e.targetDecorator.style&&e.targetDecorator.style.fill||"black"),"BiDirectional"===e.shape.association&&t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white",t.sourceDecorator.width=e.sourceDecorator&&e.sourceDecorator.width||5,t.sourceDecorator.height=e.sourceDecorator&&e.sourceDecorator.height||10));break;case"Message":t.style&&!t.style.strokeDashArray&&(t.style.strokeDashArray=e.style&&e.style.strokeDashArray||"4 4")}break;case"UmlActivity":switch(Object(r.I)()?e.shape.umlActivityFlow:e.shape.flow){case"Exception":"Directional"!==e.shape.association&&"BiDirectional"!==e.shape.association||(t.style.strokeDashArray=e.style&&e.style.strokeDashArray||"2 2")}break;case"UmlClassifier":var i=!1;"Association"===e.shape.relationship?i=!0:"Inheritance"===e.shape.relationship?(t.targetDecorator&&t.targetDecorator.style&&(t.targetDecorator.style.fill=e.targetDecorator&&e.targetDecorator.style&&e.targetDecorator.style.fill||"white"),t.style&&(i=!0,t.style.strokeDashArray=e.style&&e.style.strokeDashArray||"4 4")):"Composition"===e.shape.relationship?(t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"black"),i=!0):"Aggregation"===e.shape.relationship||void 0===e.shape.relationship?(t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white"),i=!0):"Dependency"===e.shape.relationship?(t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white"),i=!0,t.style.strokeDashArray="4 4"):"Realization"===e.shape.relationship&&(t.sourceDecorator&&t.sourceDecorator.style&&(t.sourceDecorator.style.fill=e.sourceDecorator&&e.sourceDecorator.style&&e.sourceDecorator.style.fill||"white"),i=!0),i&&(t.style.strokeWidth=e.style&&e.style.strokeWidth||2)}}function Na(e,t,i){var n;n=E.findLength(t,e)>E.findLength(i,e)?i:t;var r=E.findAngle(t,i),o=E.findAngle(n,e),a=E.findLength(n,e),s=o+2*(r-o);return{x:n.x+a*Math.cos(s*Math.PI/180),y:n.y+a*Math.sin(s*Math.PI/180)}}function Ba(e,t,i){if(e&&e.children&&e.children.length>0)for(var n=void 0,r=0;r<e.children.length;r++)return(n=i[e.children[r]]).shape.type===t||Ba(n,t,i);return!1}function _a(e,t,i,n,r){if(i&&(e instanceof _r||e&&(e.shape&&"SwimLane"!==e.shape.type||void 0===e.shape)))for(var o=void 0,a=0,s=Object.keys(i);a<s.length;a++){var l=s[a];if(o=i[l],"shape"===l&&o.type&&(e.shape={type:o.type}),o)if(Array.isArray(o)&&o.length&&o.length>0&&"annotations"!==r&&"ports"!==r)if(e[l].length>0)for(var c=0;c<=e[l].length;c++)_a(e[l],t?t[l]:void 0,i[l],"annotations"===l||"ports"===l?e:void 0,l);else _a(e[l],t?t[l]:void 0,i[l],"annotations"===l||"ports"===l?e:void 0,l);else if(o instanceof Object&&t&&"annotations"!==r&&"ports"!==r)_a(e[l],t[l],i[l]);else if("annotations"!==r&&"ports"!==r&&t&&!t[l]||!t&&e&&(e[l]||void 0!==e[l]))e[l]=i[l];else{var d=void 0;"annotations"!==r&&"ports"!==r||("annotations"===r?(e[l]&&_a(e[l],t[l],i[l]),e[l]||(Ps(n)===_r?(d=new rt(n,"annotations",i[l]),n.annotations.push(d)):(d=new nt(n,"annotations",i[l]),n.annotations.push(d)))):e[l]?_a(e[l],t[l],i[l]):(d=new $e(n,"ports",i[l]),n.ports.push(d)))}}}function Ha(e,t){var i;i="Bezier"===e.type?function(e){var t=[];if("Bezier"===e.type)for(var i=0,n=0;n<e.segments.length;n++)for(var r=e.segments[n],o=E.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1,a=E.isEmptyPoint(r.point2)?r.bezierPoint2:r.point2,s=Number((e.distance(o,r.points[0])+e.distance(a,o)+e.distance(r.points[1],a))/1.5),l=0;l<s-1;l+=10)t[i]=Lr(0,r.points[0],E.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1,E.isEmptyPoint(r.point2)?r.bezierPoint2:r.point2,r.points[1],l,s),i++;return t}(e):e.intermediatePoints;for(var n=0;n<i.length-1;n++){var r=i[n],o=i[n+1],a=_.toBounds([r,o]);if(a.Inflate(e.hitPadding),a.containsPoint(t)){var s=Na(t,r,o),l=Wa({x1:r.x,x2:o.x,y1:r.y,y2:o.y},{x1:t.x,x2:s.x,y1:t.y,y2:s.y});if(l.enabled){var c=E.findLength(t,l.intersectPt);if(Math.abs(c)<e.hitPadding)return!0}else{var d=_.toBounds([t,t]);if(d.Inflate(3),d.containsPoint(r)||d.containsPoint(o))return!0}if(E.equals(t,s))return!0}}if(e.annotations.length>0){var h=e.wrapper.children;for(n=3;n<h.length;n++){if(h[n].bounds.containsPoint(t))return!0}}return!1}function Wa(e,t){var i={x:0,y:0},n=e,r=t,o=(r.y2-r.y1)*(n.x2-n.x1)-(r.x2-r.x1)*(n.y2-n.y1),a=(r.x2-r.x1)*(n.y1-r.y1)-(r.y2-r.y1)*(n.x1-r.x1),s=(n.x2-n.x1)*(n.y1-r.y1)-(n.y2-n.y1)*(n.x1-r.x1);if(0===o||(e.x1===t.x1||e.y1===t.y1)&&(e.x2===t.x2||e.y2===t.y2)&&(0===a||0===s)&&o>0)return{enabled:!1,intersectPt:i};var l=a/o,c=s/o;return l>=0&&l<=1&&c>=0&&c<=1?(i.x=n.x1+l*(n.x2-n.x1),i.y=n.y1+l*(n.y2-n.y1),{enabled:!0,intersectPt:i}):{enabled:!1,intersectPt:i}}function Fa(e,t,i,n){var r=Wa(qa(e.x,e.y,t.x,t.y),qa(i.x,i.y,n.x,n.y));return r.enabled?r.intersectPt:{x:0,y:0}}function qa(e,t,i,n){return{x1:Number(e)||0,y1:Number(t)||0,x2:Number(i)||0,y2:Number(n)||0}}function Ua(e,t,i){var n=[];i=i||0;var r={x:t.topLeft.x-i,y:t.topLeft.y},o={x:t.topRight.x+i,y:t.topRight.y},a={x:t.bottomRight.x,y:t.bottomRight.y-i},s={x:t.bottomLeft.x,y:t.bottomLeft.y+i};return n.push(r),n.push(o),n.push(a),n.push(s),n}function Va(e,t,i,n){var r,o=i instanceof Pl?i.constraints&ne.InheritTooltip:i.constraints&te.InheritTooltip,a=i instanceof Pl?i.constraints&ne.Tooltip:i.constraints&te.Tooltip,s="Mouse"===(!o&&a?i.tooltip.relativeMode:e.tooltip.relativeMode);"Mouse"===n?s=!0:"Object"===n&&(s=!1),r=function(e,t,i,n){var r={},o=(i.scroller.transform.scale,document.getElementById(i.element.id)),a=e.wrapper.bounds,s=o.getBoundingClientRect();i.scroller.horizontalOffset,i.scroller.verticalOffset;switch(i.tooltipObject.position){case"BottomCenter":r=Ya(t,a.bottomCenter,i,n,s.width/2,s.height);break;case"BottomLeft":case"LeftBottom":r=Ya(t,a.bottomLeft,i,n,0,s.height);break;case"BottomRight":case"RightBottom":r=Ya(t,a.bottomRight,i,n,s.width,s.height);break;case"LeftCenter":r=Ya(t,a.middleLeft,i,n,0,s.height/2);break;case"LeftTop":case"TopLeft":r=Ya(t,a.topLeft,i,n,0,0);break;case"RightCenter":r=Ya(t,a.middleRight,i,n,s.width,s.height/2);break;case"RightTop":case"TopRight":r=Ya(t,a.topRight,i,n,s.width,0);break;case"TopCenter":r=Ya(t,a.topCenter,i,n,s.width/2,0)}return r}(i,t,e,s);var l=Yr(e);return{x:r.x+l.width,y:r.y+l.height}}function Ya(e,t,i,n,r,o){var a={},s=i.scroller.transform.scale,l=i.scroller.horizontalOffset,c=i.scroller.verticalOffset;return a.x=(n?e.x:t.x)*s+l-r,a.y=(n?e.y:t.y)*s+c-o,a}function Xa(e,t){var i;return(i=new Ue).data=e.pathData,i.height=e.height>10?e.height-(e.padding.bottom+e.padding.top):e.height,i.width=e.width>10?e.width-(e.padding.left+e.padding.right):e.width,i.visible=t.visible,i.id=t.id+"_shape",i.inversedAlignment=!1,i.horizontalAlignment="Center",i.verticalAlignment="Center",i.style={fill:e.iconStrokeColor,strokeColor:e.iconStrokeColor,strokeWidth:e.iconStrokeWidth},i.setOffsetWithRespectToBounds(.5,.5,"Fraction"),i.relativeMode="Object",i.description=t.description||"",i}function Ga(e,t,i){var n,r,o;r=Za(e,t),n=E.findAngle(e[r.index],e[r.index+1]);var a=function(e){var t;t=e instanceof gr?0:void 0===e.content?10:0;var i=0;switch(e.alignment){case"Center":i=0;break;case"Before":i=-(0+t);break;case"After":i=0+t}return i}(t);return o=E.transform(r.point,n+45,a),r.point=o,r.angle=n,r}function Za(e,t){for(var i,n,r,o,a,s=0,l=t.offset,c=[],d=0;d<e.length-1;d++)s+=E.distancePoints(e[d],e[d+1]),c.push(s);r=l*s;for(var h=0;h<c.length;h++){if(c[h]>=r)return n=E.findAngle(e[h],e[h+1]),{point:i=E.transform(e[h],n,r-(o||0)),index:a=h};o=c[h]}return{point:i,index:a}}function Ja(e,t){if(e instanceof Pl&&e.children)for(var i=0;i<e.children.length;i++)t.nameTable[e.children[i]].children&&Ja(e,t),t.removeFromAQuad(t.nameTable[e.children[i]]),t.removeObjectsFromLayer(t.nameTable[e.children[i]]),delete t.nameTable[e.children[i]]}function Qa(e,t){if(e&&e.children&&e.children.length>0)for(var i=0;i<e.children.length;i++){var n=e.children[i];n instanceof He&&Qa(n,t)}return-1===t.indexOf(e.id)&&t.push(e.id),t}function $a(e){var t=function(e){for(var t,i,n=[],r=0;r<e.length;r++)if("SwimLane"===(t=e[r]).shape.type){i=t.wrapper.children[0].childTable;for(var o=0,a=Object.keys(i);o<a.length;o++)n=Qa(i[a[o]],n)}return n}(e.nodes),i=uc(e,e.getCustomProperty);return i.selectedItems.nodes=[],i.selectedItems.connectors=[],i.selectedItems.wrapper=null,e.serializationSettings.preventDefaults&&(i=Ka(i,e)),function(e,t){var i=t.nodes;if(i)for(var n=0;n<i.length;n++)-1!==e.indexOf(i[n].id)&&(i.splice(n,1),n--)}(t,i),JSON.stringify(i)}function Ka(e,t,i,n){i=function(e,t){var i,n=[],r=new ih,o="getClassName";if(e[o])switch(e[o]()){case"Diagram":i=new ih;break;case"Node":i=new Pl(r,"",n);break;case"Path":i=new $s(r,"",n);break;case"Native":i=new Ks(r,"",n);break;case"Html":i=new el(r,"",n);break;case"Image":i=new tl(r,"",n);break;case"Text":i=new il(r,"",n);break;case"BasicShape":i=new nl(r,"",n);break;case"FlowShape":i=new rl(r,"",n);break;case"BpmnShape":i=new fl(r,"",n);break;case"UmlActivityShape":i=new gl(r,"",n);break;case"UmlClassifierShape":i=new Sl(r,"",n);break;case"SwimLane":i=new Tl(r,"",n),e.header&&(i.header=new jl(r,"",n),i.header.style.fill="");break;case"ShapeAnnotation":i=new nt(r,"",n);break;case"PointPort":i=new $e(r,"",n);break;case"BpmnGateway":i=new ol(r,"",n);break;case"BpmnDataObject":i=new al(r,"",n);break;case"BpmnEvent":i=new ll(r,"",n);break;case"BpmnSubEvent":i=new cl(r,"",n);break;case"BpmnActivity":i=new pl(r,"",n);break;case"BpmnAnnotation":i=new ul(r,"",n);break;case"MethodArguments":i=new ml(r,"",n);break;case"UmlClassAttribute":i=new vl(r,"",n);break;case"UmlClassMethod":i=new yl(r,"",n);break;case"UmlClass":i=new bl(r,"",n);break;case"UmlInterface":i=new wl(r,"",n);break;case"UmlEnumerationMember":i=new xl(r,"",n);break;case"UmlEnumeration":i=new Ol(r,"",n);break;case"Lane":i=new Il(r,"",n);break;case"Phase":i=new El(r,"",n);break;case"ChildContainer":i=new Al;break;case"Connector":i=new _r(r,"",n);break;case"StraightSegment":i=new jr(r,"",n);break;case"BezierSegment":i=new Ir(r,"",n);break;case"OrthogonalSegment":i=new Er(r,"",n);break;case"PathAnnotation":i=new rt(r,"",n);break;case"Stop":i=new Pe(r,"",n);break;case"Point":i=t||new E(r,"",n);break;case"UserHandle":i=new Po(r,"",n);break;case"Command":i=new Do(r,"",n)}else i=t;return i}(t,i);for(var r=[],o=0,a=r=r.concat(Object.keys(e));o<a.length;o++){var s=a[o];t instanceof Pl&&(n="shape"===s),e[s]instanceof Array?es(e,i,t,s):e[s]instanceof Object&&i&&i[s]?"wrapper"!==s&&(e[s]=Ka(e[s],t[s],i[s],n)):(i&&e[s]===i[s]||void 0===e[s])&&(n&&"type"===s||t instanceof Tl&&"orientation"===s||delete e[s]),"[]"!==JSON.stringify(e[s])&&"{}"!==JSON.stringify(e[s])&&void 0!==e[s]||delete e[s]}return e}function es(e,t,i,n){if(0===e[n].length)delete e[n];else if(e[n].every((function(e){return"number"===typeof e}))){var r=void 0,o=!0;for(r=0;r<e[n].length;r++)o=!(!o||e[n][r]!==t[n][r]);o&&delete e[n]}else{r=void 0;if("layers"===n&&(e[n].splice(0,1),0===e[n].length&&delete e[n]),e[n])for(r=e[n].length-1;r>=0;r--)"nodes"!==n&&"connectors"!==n||(e[n][r].wrapper=null),"dataManager"!==n&&(e[n][r]=Ka(e[n][r],i[n][r],void 0!==t[n]?t[n][r]:[]),"[]"!==JSON.stringify(e[n][r])&&"{}"!==JSON.stringify(e[n][r])&&void 0!==e[n][r]||e[n].splice(r,1))}}function ts(e,t){t.enableServerDataBinding(!1);var i=t.blazorActions;t.blazorActions=t.addConstraints(i,Z.ClearObject),t.clear(),t.blazorActions=t.removeConstraints(i,Z.ClearObject),t.protectPropertyChange(!0);for(var n=t.dataSourceSettings.doBinding,r=t.setNodeTemplate,o=t.getDescription,a=t.getCustomProperty,s={},l=0,c=t.commandManager.commands;l<c.length;l++){var d=c[l];s[d.name]={execute:d.execute,canExecute:d.canExecute}}var h=t.rulerSettings.horizontalRuler.arrangeTick,p=t.rulerSettings.verticalRuler.arrangeTick,u=t.layout.getLayoutInfo,f=t.layout.getBranch,g=t.getNodeDefaults,m=t.getConnectorDefaults,v=JSON.parse(e);v=function(e){if(e&&(void 0===e.version||e.version<17.1)&&e.nodes)for(var t=0,i=e.nodes;t<i.length;t++){var n=i[t];if(n&&n.ports&&n.ports.length>0)for(var r=0,o=n.ports;r<o.length;r++){var a=o[r];a&&a.constraints&&a.constraints===ye.None&&(a.constraints=ye.Default)}}return e}(v),t.contextMenuSettings=v.contextMenuSettings||{},t.constraints=v.constraints||ae.Default,t.tool=v.tool||se.Default,t.bridgeDirection=v.bridgeDirection||"Top",t.pageSettings=v.pageSettings||{},t.drawingObject=v.drawingObject||void 0,t.tooltip=v.tooltip||{},t.addInfo=v.addInfo||void 0,t.getDescription=o,t.scrollSettings=v.scrollSettings||{},t.commandManager=v.commandManager||{},t.layers=v.layers||[],t.rulerSettings.horizontalRuler.arrangeTick=h,t.rulerSettings.verticalRuler.arrangeTick=p;for(var y=0,b=t.commandManager.commands;y<b.length;y++){var w=b[y];s[w.name]&&(w.execute=s[w.name].execute,w.canExecute=s[w.name].canExecute)}if(t.backgroundColor=v.backgroundColor||"transparent",t.basicElements=v.basicElements||[],t.connectors=v.connectors||[],t.dataSourceSettings=v.dataSourceSettings||{},t.dataSourceSettings.doBinding=n,t.height=v.height||"100%",t.setNodeTemplate=r,t.getConnectorDefaults=m,t.getNodeDefaults=g,t.getCustomProperty=a,t.mode=v.mode||"SVG",v.nodes)for(var x=0;x<v.nodes.length;x++)v.nodes[x].shape&&"SwimLane"===v.nodes[x].shape.type&&xa(v.nodes[x],void 0,void 0,void 0,void 0,!0);t.nodes=v.nodes||[],t.rulerSettings=v.rulerSettings||{},t.snapSettings=v.snapSettings||{},t.width=v.width||"100%",t.layout=v.layout||{},t.layout.getLayoutInfo=Pc(u),t.layout.getBranch=Pc(f),t.diagramActions=0,t.isLoading=!0,t.protectPropertyChange(!1);var O;for(x=0;x<t.views.length;x++)O=t.views[t.views[x]],t.blazorActions=t.addConstraints(i,Z.ClearObject),O.refresh(),t.blazorActions=t.removeConstraints(i,Z.ClearObject),O instanceof ih&&t.element.classList.add("e-diagram");return v.selectedItems&&(v.selectedItems.nodes=[],v.selectedItems.connectors=[]),t.selectedItems=v.selectedItems,t.enableServerDataBinding(!0),v}function is(e,t){var i=t.style,n=t;t.canApplyStyle=!0;for(var r=0,o=Object.keys(e);r<o.length;r++){switch(o[r]){case"fill":i.fill=e.fill,i instanceof De&&(i.fill="transparent");break;case"textOverflow":i.textOverflow=e.textOverflow;break;case"opacity":i.opacity=e.opacity;break;case"strokeColor":i.strokeColor=e.strokeColor;break;case"strokeDashArray":i.strokeDashArray=e.strokeDashArray;break;case"strokeWidth":i.strokeWidth=e.strokeWidth;break;case"bold":i.bold=e.bold;break;case"color":i.color=e.color;break;case"textWrapping":i.textWrapping=e.textWrapping;break;case"fontFamily":i.fontFamily=e.fontFamily;break;case"fontSize":i.fontSize=e.fontSize;break;case"italic":i.italic=e.italic;break;case"textAlign":i.textAlign=e.textAlign;break;case"whiteSpace":i.whiteSpace=e.whiteSpace;break;case"textDecoration":i.textDecoration=e.textDecoration;break;case"gradient":if(i.gradient){ns(e.gradient,i.gradient);break}}}t instanceof Be&&n.refreshTextElement()}function ns(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"type":t.type=e.type;break;case"x1":t.x1=e.x1;break;case"x2":t.x2=e.x2;break;case"y1":t.y1=e.y1;break;case"y2":t.y2=e.y2;break;case"cx":t.cx=e.cx;break;case"cy":t.cy=e.cy;break;case"fx":t.fx=e.fx;break;case"fy":t.fy=e.fy;break;case"r":t.r=e.r;break;case"stops":t.stops=e.stops}}}function rs(e,t,i){e.width=t.width,e.height=t.height,e.minHeight=t.minHeight,e.maxHeight=t.maxHeight,e.minWidth=t.minWidth,e.maxWidth=t.maxWidth,e.horizontalAlignment=t.wrapper.children[0].horizontalAlignment,e.verticalAlignment=t.wrapper.children[0].verticalAlignment,e.relativeMode=t.wrapper.children[0].relativeMode,e.visible=t.wrapper.children[0].visible,t.shape instanceof il&&(e.margin=t.shape.margin),e.id=t.wrapper.children[0].id,e.style=t.style;for(var n=0,r=i.views;n<r.length;n++){var o=r[n];ec(t.id+"_groupElement",o),ec(t.id+"_content_groupElement",o),ec(t.id+"_html_element",o)}t.wrapper.children.splice(0,1),t.wrapper.children.splice(0,0,e)}function os(e,t,i,n){var o=new Le;switch(e.shape.type){case"Path":var a=new Ue;a.data=t.shape.data,rs(o=a,t,n);break;case"Image":var s=new Ye;s.source=t.shape.source,s.imageAlign=t.shape.align,s.imageScale=t.shape.scale,rs(o=s,t,n);break;case"Text":rs(o=new Be,t,n);break;case"Basic":var l=void 0;l=(Object(r.I)()?"Rectangle"===t.shape.basicShape:"Rectangle"===t.shape.shape)?new Le:new Ue,!Object(r.I)()&&"Polygon"===t.shape.shape||Object(r.I)()&&"Polygon"===t.shape.basicShape?l.data=A(t.shape.points):l.data=We(Object(r.I)()?t.shape.basicShape:t.shape.shape),rs(o,t,n),(!Object(r.I)()&&"Rectangle"===t.shape.shape||Object(r.I)()&&"Rectangle"===t.shape.basicShape)&&(l.cornerRadius=t.shape.cornerRadius),o=l;break;case"Flow":var c=new Ue,d=Object(r.I)()?t.shape.flowShape:t.shape.shape;c.data=lt(d),rs(o=c,t,n);break;case"Native":var h=new Ge(e.id,n.element.id);h.content=t.shape.content,h.scale=t.shape.scale,rs(o=h,t,n);break;case"HTML":var p=new dr(t.id,n.element.id);p.content=t.shape.content,rs(o=p,t,n)}void 0===e.shape.type||e.shape.type===i.shape.type||Object(r.I)()&&"UmlActivity"===e.shape.type?function(e,t,i){if(Object.keys(e.shape).length>0)if("Path"===t.shape.type&&void 0!==e.shape.data)t.wrapper.children[0].data=e.shape.data;else if("Text"===t.shape.type&&void 0!==e.shape.content)t.wrapper.children[0].content=e.shape.content;else if("Image"===t.shape.type&&void 0!==e.shape.source)t.wrapper.children[0].source=e.shape.source;else if("Native"===t.shape.type){for(var n=void 0,o=0;o<i.views.length;o++)n=Nl(t.wrapper.children[0].id+"_native_element",i.views[o]),void 0!==e.shape.content&&n&&(n.removeChild(n.children[0]),t.wrapper.children[0].content=e.shape.content,n.appendChild(tc(t.wrapper.children[0],!1)));t.wrapper.children[0].scale=e.shape.scale?e.shape.scale:t.wrapper.children[0].scale}else if("HTML"===t.shape.type){var a=void 0;for(o=0;o<i.views.length;o++)(a=Nl(t.wrapper.children[0].id+"_html_element",i.views[o]))&&(a.removeChild(a.children[0]),t.wrapper.children[0].content=e.shape.content,a.appendChild(tc(t.wrapper.children[0],!0)))}else if("Flow"===t.shape.type&&(Object(r.I)()&&void 0!==e.shape.flowShape||void 0!==e.shape.shape)){t.shape.shape=Object(r.I)()?e.shape.flowShape:e.shape.shape;var s=lt(t.shape.shape.toString());t.wrapper.children[0].data=s}else if("UmlActivity"===t.shape.type&&(Object(r.I)()&&void 0!==e.shape.umlActivityShape||!Object(r.I)()&&void 0!==e.shape.shape))!function(e,t){Object(r.I)()?e.shape.umlActivityShape=t.shape.umlActivityShape:e.shape.shape=t.shape.shape;var i=jo((Object(r.I)()?e.shape.umlActivityShape:e.shape.shape).toString());Object(r.I)()&&"InitialNode"===e.shape.umlActivityShape||!Object(r.I)()&&"InitialNode"===e.shape.shape||!Object(r.I)()&&("ForkNode"===e.shape.shape||"JoinNode"===e.shape.shape)||Object(r.I)()&&("ForkNode"===e.shape.umlActivityShape||"JoinNode"===e.shape.umlActivityShape)?e.wrapper.children[0].style.fill="black":(!Object(r.I)()&&"FinalNode"===e.shape.shape||Object(r.I)()&&"FinalNode"===e.shape.umlActivityShape)&&e instanceof Pl&&(e.wrapper=as(e));i&&(e.wrapper.children[0].data=i)}(t,e);else if(void 0!==e.shape.cornerRadius)t.wrapper.children[0].cornerRadius=e.shape.cornerRadius;else if(Object(r.I)()&&void 0!==e.shape.basicShape||void 0!==e.shape.shape){t.shape.shape=Object(r.I)()?e.shape.basicShape:e.shape.shape;var l=We(t.shape.shape.toString());t.wrapper.children[0].data=l}t.wrapper.children[0].canMeasurePath=!0}(e,t,n):(o.width=t.wrapper.children[0].width,o.height=t.wrapper.children[0].height,t.shape instanceof il&&(o.margin=t.shape.margin),o.style=t.style,t.wrapper.children[0]=o)}function as(e){var t=new He;t.style.fill="transparent";var i="M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",n=new Ue;n.data=i,n.id=e.id+"_0_finalNode",n.horizontalAlignment="Center",n.verticalAlignment="Center",n.relativeMode="Object",n.style.strokeColor=e.style.strokeColor,n.style.strokeWidth=e.style.strokeWidth;var r=new Ue;return r.data=i,r.id=e.id+"_1_finalNode",r.horizontalAlignment="Center",r.verticalAlignment="Center",r.relativeMode="Object",r.style.fill=e.style.fill,r.style.strokeColor=e.style.strokeColor,r.style.strokeWidth=e.style.strokeWidth,t.children=[n,r],t.children[0].width=e.width,t.children[0].height=e.height,t.children[1].height=e.height/1.5,t.children[1].width=e.width/1.5,t.style.strokeWidth=0,t.style.strokeColor="transparent",t}function ss(e){ec(e+"_linear"),ec(e+"_radial")}function ls(e,t){var i=e.indexOf(t);i>=0&&e.splice(i,1)}function cs(e,t,i){var n,r,o;if(e.intermediatePoints=t,e.updateSegmentElement(e,t,e.wrapper.children[0],i),e.sourcePoint,r=e.sourceDecorator,"Bezier"===e.type){var a=e.segments[0],s=e.segments[e.segments.length-1];n=[E.isEmptyPoint(s.point2)?s.bezierPoint2:s.point2,E.isEmptyPoint(a.point1)?a.bezierPoint1:a.point1]}else n=e.intermediatePoints;t=e.clipDecorators(e,t,i);var l=e.wrapper.children[0];l.canMeasurePath=!0,l=e.wrapper.children[1],e.updateDecoratorElement(l,t[0],n[1],r),e.targetPoint,o=e.targetDecorator,l=e.wrapper.children[2],e.updateDecoratorElement(l,t[t.length-1],n[n.length-2],o),e.updateShapeElement(e)}function ds(e,t,i){var n,r=e.wrapper,o=r.bounds,a=t.offset,s=t.size/i.scale,l=t.margin,c=r.offsetX-r.actualSize.width*r.pivot.x,d=r.offsetY-r.actualSize.height*r.pivot.y;if(n={x:0,y:0},e.nodes.length>0){switch(t.side){case"Top":n.x+=c+o.width*a,n.y+=d-(s/2+12.5);break;case"Bottom":n.x+=c+a*o.width,n.y+=d+r.actualSize.height+(s/2+12.5);break;case"Left":n.x+=c-(s/2+12.5),n.y+=d+a*o.height;break;case"Right":n.x+=c+r.actualSize.width+(s/2+12.5),n.y+=d+a*o.height}n.x+=(l.left-l.right)/i.scale+s/2*("Center"===t.horizontalAlignment?0:"Right"===t.horizontalAlignment?-1:1),n.y+=(l.top-l.bottom)/i.scale+s/2*("Center"===t.verticalAlignment?0:"Top"===t.verticalAlignment?-1:1)}else if(e.connectors.length>0){var h=e.connectors[0],p={offset:a},u=Za(h.intermediatePoints,p),f=u.index;n=u.point;var g,m=Ga(h.intermediatePoints,p),v=(h.intermediatePoints,m.angle);q(g=W(),-v,h.intermediatePoints[f].x,h.intermediatePoints[f].y),(n=F(g,n)).x+=l.left-l.right+s/2*("Center"===t.horizontalAlignment?0:"Right"===t.horizontalAlignment?-1:1),n.y+=l.top-l.bottom+s/2*("Center"===t.verticalAlignment?0:"Top"===t.verticalAlignment?-1:1),q(g=W(),v,h.intermediatePoints[f].x,h.intermediatePoints[f].y),n=F(g,n)}0===r.rotateAngle&&0===r.parentTransform||(q(g=W(),r.rotateAngle+r.parentTransform,r.offsetX,r.offsetY),n=F(g,n));return n}function hs(e,t,i,n){if(n.annotation){if(ao(n.annotation))return!0}else if($[t]&e&&oe[t]&i)return!0;return!1}function ps(e,t){return!!($[t]&e)}function us(e,t){return e.visibility&t}function fs(e,t){var i;if("Text"===e.shape.type)i=e.shape;else{var n=t.split("_");t=n[n.length-1];for(var r=0;r<e.annotations.length;r++)t===e.annotations[r].id&&(i=e.annotations[r])}return i}function gs(e,t){var i=t.split("_");if(t=i[i.length-1],e){e=e;for(var n=0;n<e.ports.length;n++)if(t===e.ports[n].id)return e.ports[n]}}function ms(e,t){var i={},n=0;if(e.ports){var r=e.ports;for(n=0;n<r.length;n++)t?r[n].constraints&ye.InConnect&&(i=r[n]):r[n].constraints&ye.OutConnect&&(i=r[n])}return i}function vs(e,t,i){for(var n=i?e.annotations:e.ports,r=0;r<n.length;r++)if(n[r].id===t)return r.toString();return"-1"}function ys(e,t){var i;for(i=0;i<e.length;i++)if(t===e[i].id)return!0;return!1}function bs(e,t,i,n){if(void 0!==e.width&&void 0!==e.height&&(e.width*=t,e.height*=i),e instanceof ze){var r=W(),o=n.width||n.actualSize.width,a=n.height||n.actualSize.height;if(void 0!==o&&void 0!==a){var s=n.offsetX-o*n.pivot.x,l=n.offsetY-a*n.pivot.y,c={x:s+o*n.pivot.x,y:l+a*n.pivot.y};c=Cc(n.rotateAngle,n.offsetX,n.offsetY,c),q(r,-n.rotateAngle,c.x,c.y),U(r,t,i,c.x,c.y),q(r,n.rotateAngle,c.x,c.y);for(var d=0,h=e.children;d<h.length;d++){var p=h[d];if(void 0!==p.width&&void 0!==p.height){var u=F(r,{x:p.offsetX,y:p.offsetY});p.offsetX=u.x,p.offsetY=u.y,bs(p,t,i,n)}}}}}function ws(e,t,i,n,r,o){for(var a,s=e.children,l=0;l<s.length;l++)if(a=n[s[l]])if(a.children)ws(a,t,i,n,r,o);else if(a.offsetX-=t,a.offsetY-=i,!r){var c,d=void 0;n[a.id]=a,(d=a.initContainer()).children||(d.children=[]),c=a.init(o),d.children.push(c),d.measure(new P(a.width,a.height)),d.arrange(d.desiredSize)}}function xs(e,t,i){if(0===i.length)i.push(e);else if(1===i.length)i[0][t]>e[t]?i.splice(0,0,e):i.push(e);else if(i.length>1){for(var n=0,r=i.length-1,o=Math.floor((n+r)/2);o!==n;)i[o][t]<e[t]?(n=o,o=Math.floor((n+r)/2)):i[o][t]>e[t]&&(r=o,o=Math.floor((n+r)/2));i[r][t]<e[t]?i.push(e):i[n][t]>e[t]?i.splice(n,0,e):i[n][t]<e[t]&&i[r][t]>e[t]&&i.splice(r,0,e)}}function Os(e){var t=document.getElementById(e.diagramId),i="ej2_instances",n=t[i][0].nodes;void 0===n&&(n=function(e){for(var t=[],i=0;i<e.palettes.length;i++)for(var n=e.palettes[i].symbols,r=0;r<n.length;r++)n[r]instanceof Pl&&t.push(n[r]);return t}(t[i][0]));for(var r=0;n&&r<n.length;r++)if(n[r].id===e.nodeId)return Ss(n[r],e);var o=t[i][0].connectors;for(r=0;o&&r<o.length;r++)if(o[r].id===e.nodeId)return Ss(o[r],e);var a=t[i][0].enterObject;return a&&(a.id===e.nodeId||a.children)?a.children&&Ba(a,"HTML",t[i][0].enterTable)?t[i][0].enterTable[e.nodeId]:a:null}function Ss(e,t){var i,n=e.annotations;for(i=0;n&&i<n.length;i++)if(t.annotationId&&n[i].id===t.annotationId)return n[i];return e}function Cs(e,t,i,n){return Object(r.I)()&&(e={cause:e.cause,state:i,type:n,cancel:!1,element:Ps(t)===_r?{connector:Ls(t)}:{node:Ls(t)}}),e}var Ps=function(e){return e&&(e=void 0!==e.sourceID||void 0!==e.sourcePoint||void 0!==e.targetID||void 0!==e.targetPoint||void 0!==e.type?_r:Pl),e},js=function(e){if(!e.sourceID&&!e.targetID){var t={x:e.sourcePoint.x,y:e.sourcePoint.y},i={x:e.targetPoint.x,y:e.targetPoint.y};"Horizontal"===e.flip?(e.sourcePoint.x=i.x,e.targetPoint.x=t.x):"Vertical"===e.flip?(e.sourcePoint.y=i.y,e.targetPoint.y=t.y):"Both"===e.flip&&(e.sourcePoint=i,e.targetPoint=t)}},Is=function(e,t,i){var n=i.offset.x,r=i.offset.y;return"Horizontal"===t?(n=1-i.offset.x,r=i.offset.y):"Vertical"===t?(n=i.offset.x,r=1-i.offset.y):"Both"===t&&(n=1-i.offset.x,r=1-i.offset.y),e.setOffsetWithRespectToBounds(n,r,"Fraction"),e},Es=function e(t,i,n,r,o){if(t.hasChildren())for(var a=0,s=t.children;a<s.length;a++){var l=s[a],c=i-l.offsetX+i,d=n-l.offsetY+n;"Horizontal"!==o&&"Both"!==o||(l.offsetX=c,l.flipOffset.x=c-l.desiredSize.width/2),"Vertical"!==o&&"Both"!==o||(l.offsetY=d,l.flipOffset.y=d-l.desiredSize.height/2),(l instanceof He||l instanceof ze)&&e(l,i,n,r,o),l.measure(new P(l.bounds.width,l.bounds.height)),l.arrange(l.desiredSize);var h=r.nameTable[l.id];h&&r.updateConnectorEdges(h)}},Ts=function(e){var t=e.selectedItems.nodes,i=e.selectedItems.connectors,n=e.allowServerDataBinding,r=e.isProtectedOnChange;e.protectPropertyChange(!0),e.allowServerDataBinding=!1,e.selectedItems.nodes=[],e.selectedItems.connectors=[],e.allowServerDataBinding=n,e.protectPropertyChange(r);for(var o=uc(e.selectedItems),a=0;a<t.length;a++)e.selectedItems.nodes.push(e.nameTable[t[a].id]);for(a=0;a<i.length;a++)e.selectedItems.connectors.push(e.nameTable[i[a].id]);return o},As=function(e,t){for(var i,n=new Ue,r=0;r<e.length-1;r++)i=ks(e[r],e[r+1]),n.data=i[0],n.id=t.id+"_"+t.shape.sequence,n.offsetX=i[1].x,n.offsetY=i[1].y,n.rotateAngle=45,n.transform=le.Self;return n},Ds=function(e,t){if(e instanceof Pl)for(var i=0;i<e.ports.length;i++)if(e.ports[i].id===t.id.split("_")[1])return!0;return!1},ks=function(e,t){var i={x:e.x,y:e.y},n=Ms(e,t);n=Math.min(30,n/2);var r=Lt(e,t),o=E.transform({x:i.x,y:i.y},r,n),a=E.transform({x:o.x,y:o.y},r,-12),s=E.transform({x:a.x,y:a.y},r,24);return["M"+a.x+" "+a.y+" L"+s.x+" "+s.y,o]},Ms=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function Ls(e){return Object(r.I)()&&(e=uc(e)),e}function Rs(){return(navigator.platform.indexOf("Mac")>=0||navigator.platform.indexOf("iPad")>=0||navigator.platform.indexOf("iPhone")>=0||navigator.platform.indexOf("MacIntel")>=0)&&("safari"===r.c.info.name||"webkit"===r.c.info.name)}function zs(e,t,i,n){return void 0!==t.previewSize[n]?t.previewSize[n]:void 0!==e.symbolPreview[n]?e.symbolPreview[n]:t[n]||i.actualSize[n]}var Ns=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bs=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},_s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ns(t,e),Bs([Object(r.q)("None")],t.prototype,"shape",void 0),Bs([Object(r.q)("white")],t.prototype,"fill",void 0),Bs([Object(r.q)("Auto")],t.prototype,"horizontalAlignment",void 0),Bs([Object(r.q)("Auto")],t.prototype,"verticalAlignment",void 0),Bs([Object(r.q)(10)],t.prototype,"width",void 0),Bs([Object(r.q)(10)],t.prototype,"height",void 0),Bs([Object(r.g)({x:.5,y:1},E)],t.prototype,"offset",void 0),Bs([Object(r.q)("#1a1a1a")],t.prototype,"borderColor",void 0),Bs([Object(r.q)(1)],t.prototype,"borderWidth",void 0),Bs([Object(r.g)({},Se)],t.prototype,"margin",void 0),Bs([Object(r.q)("")],t.prototype,"pathData",void 0),Bs([Object(r.q)("")],t.prototype,"content",void 0),Bs([Object(r.q)(0)],t.prototype,"cornerRadius",void 0),Bs([Object(r.g)({left:2,right:2,top:2,bottom:2},Se)],t.prototype,"padding",void 0),t}(r.d),Hs=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ws=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.orientation="Vertical",t.measureChildren=void 0,t.considerPadding=!0,t}return Hs(t,e),t.prototype.measure=function(e){var t="Horizontal"===this.orientation?this.updateHorizontalStack:this.updateVerticalStack;return this.desiredSize=this.measureStackPanel(e,t),this.desiredSize},t.prototype.arrange=function(e){var t="Horizontal"===this.orientation?this.arrangeHorizontalStack:this.arrangeVerticalStack;return this.actualSize=this.arrangeStackPanel(e,t),this.updateBounds(),this.actualSize},t.prototype.measureStackPanel=function(t,i){var n=void 0;if(void 0!==this.children&&this.children.length>0)for(var r=0,o=this.children;r<o.length;r++){var a=o[r];a.parentTransform=this.rotateAngle+this.parentTransform,this.measureChildren?a.measure(a.desiredSize):a.measure(t);var s=a.desiredSize.clone();this.applyChildMargin(a,s),0!==a.rotateAngle&&(s=Sc(s,a.rotateAngle)),void 0===n?n=s:a.preventContainer||i(s,n)}return n=e.prototype.validateDesiredSize.call(this,n,t),this.stretchChildren(n),this.considerPadding&&this.applyPadding(n),n},t.prototype.arrangeStackPanel=function(t,i){if(void 0!==this.children&&this.children.length>0){var n=void 0,r=void 0;n=this.offsetX-t.width*this.pivot.x+this.padding.left,r=this.offsetY-t.height*this.pivot.y+this.padding.top;for(var o=0,a=this.children;o<a.length;o++){var s=a[o],l=s.desiredSize.clone(),c=l;"Vertical"===this.orientation?r+=s.margin.top:n+=s.margin.left,0!==s.rotateAngle&&(c=Sc(l,s.rotateAngle));var d=i(n,r,s,this,t,c);e.prototype.findChildOffsetFromCenter.call(this,s,d),s.arrange(l,!0),"Vertical"===this.orientation?r+=c.height+s.margin.bottom:n+=c.width+s.margin.right}}return t},t.prototype.updateHorizontalStack=function(e,t){t.height=Math.max(e.height,t.height),t.width+=e.width},t.prototype.updateVerticalStack=function(e,t){t.width=Math.max(e.width,t.width),t.height+=e.height},t.prototype.arrangeHorizontalStack=function(e,t,i,n,r,o){var a=0;if("Top"===i.verticalAlignment)a=t+i.margin.top+o.height/2;else if("Bottom"===i.verticalAlignment){a=n.offsetY+r.height*(1-n.pivot.y)-n.padding.bottom-i.margin.bottom-o.height/2}else a=n.offsetY-r.height*n.pivot.y+r.height/2,i.margin.top&&(a=t+i.margin.top+o.height/2);return{x:e+o.width/2,y:a}},t.prototype.arrangeVerticalStack=function(e,t,i,n,r,o){var a=0;if("Left"===i.horizontalAlignment)a=e+i.margin.left+o.width/2;else if("Right"===i.horizontalAlignment){a=n.offsetX+r.width*(1-n.pivot.x)-n.padding.right-i.margin.right-o.width/2}else a=n.offsetX-r.width*n.pivot.x+r.width/2,i.margin.left&&(a=e+i.margin.left+o.width/2);return{x:a,y:t+o.height/2}},t.prototype.stretchChildren=function(e){if(void 0!==this.children&&this.children.length>0)for(var t=0,i=this.children;t<i.length;t++){var n=i[t];"Vertical"===this.orientation?"Stretch"===n.horizontalAlignment&&(n.desiredSize.width=e.width-(n.margin.left+n.margin.right)):"Stretch"===n.verticalAlignment&&(n.desiredSize.height=e.height-(n.margin.top+n.margin.bottom))}},t.prototype.applyChildMargin=function(e,t){t.height+=e.margin.top+e.margin.bottom,t.width+=e.margin.left+e.margin.right},t}(ze);function Fs(e,t,i){var n,r="NoWrap";"Class"===t.shape.classifier?n=t.shape.classShape:"Enumeration"===t.shape.classifier?n=t.shape.enumerationShape:"Interface"===t.shape.classifier&&(n=t.shape.interfaceShape);t.container={type:"Stack",orientation:"Vertical"},t.constraints=(ne.Default|ne.HideThumbs)&~(ne.Rotate|ne.Resize),t.style={fill:t.style.fill,strokeColor:t.style.strokeColor,strokeWidth:1.5},t.children=[],t.maxWidth&&(r="Wrap");var o=new Pl(i,"nodes",{id:t.id+"_umlClass_header",annotations:[{id:"name",content:n.name,offset:{x:.5,y:.65},margin:{left:10,right:10},style:{bold:!0,fontSize:14,color:n.style.color,fill:n.style.fill,textWrapping:r}},{content:"<<"+t.shape.classifier+">>",margin:{left:10,right:10},id:"class",style:{fontSize:n.style.fontSize,color:n.style.color,fill:n.style.fill,textWrapping:r},offset:{x:.5,y:.3},constraints:ie.ReadOnly}],constraints:(ne.Default|ne.HideThumbs)&~(ne.Rotate|ne.Drag|ne.Resize),verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor}},!0);return i.initObject(o),i.nodes.push(o),i.UpdateBlazorDiagramModel(o,"Node"),t.children.push(o.id),function(e,t,i,n){if("Enumeration"===e.shape.classifier){var r=i.members;if(r&&r.length){qs(e,t);for(var o="",a=0;a<r.length;a++){var s=r[a];if(""!==s.name&&(o+=s.name),a!==r.length){var l=Us(e,s),c=new Pl(t,"nodes",{id:lc()+"_umlMember",annotations:[{id:"name",content:o,offset:{x:0,y:.5},style:{bold:!0,fontSize:l.fontSize,color:l.color,fill:l.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:e.style.fill,strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor,textWrapping:n},constraints:(ne.Default|ne.HideThumbs)&~(ne.Rotate|ne.Drag|ne.Resize),minHeight:25},!0);t.initObject(c),t.nodes.push(c),t.UpdateBlazorDiagramModel(c,"Node"),e.children.push(c.id),o="",s.isSeparator&&a!==r.length-1&&qs(e,t)}}}}else{var d=i.attributes;if(d.length){var h="";qs(e,t);for(a=0;a<d.length;a++){var p=void 0,u=d[a];if(p=u.scope&&"Public"===u.scope?" +":u.scope&&"Private"===u.scope?"-":u.scope&&"Protected"===u.scope?"#":"~",""!==u.name&&p&&(h+=p+" "+u.name+" : "+u.type),a!==d.length){l=Us(e,u),c=new Pl(t,"nodes",{id:lc()+"_umlProperty",style:{fill:e.style.fill,strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor},annotations:[{id:"name",content:h,offset:{x:0,y:.5},style:{bold:!0,fontSize:l.fontSize,color:l.color,fill:l.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(ne.Default|ne.HideThumbs)&~(ne.Rotate|ne.Drag|ne.Resize),minHeight:25},!0);t.initObject(c),t.nodes.push(c),t.UpdateBlazorDiagramModel(c,"Node"),e.children.push(c.id),h="",u.isSeparator&&a!==d.length-1&&qs(e,t)}}}}}(t,i,n,r),function(e,t,i,n){if(i.methods&&i.methods.length){var r=i.methods;qs(e,t);for(var o="",a="",s=void 0,l=0;l<r.length;l++){var c=r[l];if(s=c.scope&&"Public"===c.scope?" +":c.scope&&"Private"===c.scope?"-":c.scope&&"Protected"===c.scope?"#":"~",c.parameters)for(var d=0;d<c.parameters.length;d++)c.parameters[d].type?o+=c.parameters[d].name+":"+c.parameters[d].type:o+=c.parameters[d].name,d!==c.parameters.length-1&&(o+=",");if(""!==c.name&&s&&(a+=s+" "+c.name+"("+o+") : "+c.type),l!==r.length){var h=Us(e,c),p=new Pl(t,"nodes",{id:lc()+"_umlMethods",verticalAlignment:"Stretch",horizontalAlignment:"Stretch",annotations:[{id:"name",content:a,offset:{x:0,y:.5},style:{bold:!0,fontSize:h.fontSize,color:h.color,fill:h.fill,textWrapping:n},margin:{left:14,right:5},horizontalAlignment:"Left"}],style:{fill:e.style.fill,strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor},minHeight:25,constraints:(ne.Default|ne.HideThumbs)&~(ne.Rotate|ne.Drag|ne.Resize)},!0);t.initObject(p),t.nodes.push(p),t.UpdateBlazorDiagramModel(p,"Node"),e.children.push(p.id),a="",c.isSeparator&&l!==r.length-1&&qs(e,t)}}}}(t,i,n,r),t.offsetX=t.offsetX,t.offsetY=t.offsetY,t.style.fill=t.style.fill,t.borderColor=t.borderColor,i.initObject(t),e}function qs(e,t){var i=new Pl(t,"nodes",{id:lc()+"_path",height:1,constraints:ne.Default&~ne.Select,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor}},!0);t.initObject(i),t.nodes.push(i),e.children.push(i.id)}function Us(e,t){var i={},n=t.style;return i.fill="transparent"!==n.fill?n.fill:e.style.fill,i.color=n.color,i.fontSize=12!==n.fontSize?n.fontSize:e.style.fontSize,i.strokeColor="black"!==n.strokeColor?n.strokeColor:e.style.strokeColor,i.strokeWidth=1!==n.strokeWidth?n.strokeWidth:e.style.strokeWidth,i}var Vs=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ys=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Xs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vs(t,e),Ys([Object(r.q)("Horizontal")],t.prototype,"orientation",void 0),Ys([Object(r.q)("Center")],t.prototype,"type",void 0),Ys([Object(r.q)(void 0)],t.prototype,"offset",void 0),Ys([Object(r.q)(!1)],t.prototype,"enableRouting",void 0),Ys([Object(r.q)([])],t.prototype,"children",void 0),Ys([Object(r.q)("")],t.prototype,"assistants",void 0),Ys([Object(r.q)("")],t.prototype,"level",void 0),Ys([Object(r.q)("")],t.prototype,"hasSubTree",void 0),Ys([Object(r.q)("")],t.prototype,"rows",void 0),t}(r.d),Gs=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zs=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Js=function(e){if(e){if(Object(r.I)())return Cl;switch(e.type){case"Basic":return nl;case"Flow":return rl;case"Path":return $s;case"Image":return tl;case"Text":return il;case"Bpmn":return fl;case"Native":return Ks;case"HTML":return el;case"UmlActivity":return gl;case"UmlClassifier":return Sl;case"SwimLane":return Tl;default:return nl}}return Object(r.I)()?Cl:nl},Qs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),Zs([Object(r.q)("Basic")],t.prototype,"type",void 0),t}(r.d),$s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"Path"},Zs([Object(r.q)("Path")],t.prototype,"type",void 0),Zs([Object(r.q)("")],t.prototype,"data",void 0),t}(Qs),Ks=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"Native"},Zs([Object(r.q)("Native")],t.prototype,"type",void 0),Zs([Object(r.q)("")],t.prototype,"content",void 0),Zs([Object(r.q)("Stretch")],t.prototype,"scale",void 0),t}(Qs),el=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"Html"},Zs([Object(r.q)("HTML")],t.prototype,"type",void 0),Zs([Object(r.q)("")],t.prototype,"content",void 0),t}(Qs),tl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"Image"},Zs([Object(r.q)("Image")],t.prototype,"type",void 0),Zs([Object(r.q)("")],t.prototype,"source",void 0),Zs([Object(r.q)("None")],t.prototype,"scale",void 0),Zs([Object(r.q)("None")],t.prototype,"align",void 0),t}(Qs),il=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"Text"},Zs([Object(r.q)("Text")],t.prototype,"type",void 0),Zs([Object(r.q)("")],t.prototype,"content",void 0),Zs([Object(r.g)({},Se)],t.prototype,"margin",void 0),t}(Qs),nl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"BasicShape"},Zs([Object(r.q)("Basic")],t.prototype,"type",void 0),Zs([Object(r.q)("Rectangle")],t.prototype,"shape",void 0),Zs([Object(r.q)(0)],t.prototype,"cornerRadius",void 0),Zs([Object(r.e)([],E)],t.prototype,"points",void 0),t}(Qs),rl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"FlowShape"},Zs([Object(r.q)("Flow")],t.prototype,"type",void 0),Zs([Object(r.q)("Terminator")],t.prototype,"shape",void 0),t}(Qs),ol=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"BpmnGateway"},Zs([Object(r.q)("None")],t.prototype,"type",void 0),t}(r.d),al=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"BpmnDataObject"},Zs([Object(r.q)("None")],t.prototype,"type",void 0),Zs([Object(r.q)(!1)],t.prototype,"collection",void 0),t}(r.d),sl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),Zs([Object(r.q)("None")],t.prototype,"type",void 0),Zs([Object(r.q)("None")],t.prototype,"loop",void 0),Zs([Object(r.q)(!1)],t.prototype,"call",void 0),Zs([Object(r.q)(!1)],t.prototype,"compensation",void 0),t}(r.d),ll=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"BpmnEvent"},Zs([Object(r.q)("Start")],t.prototype,"event",void 0),Zs([Object(r.q)("None")],t.prototype,"trigger",void 0),t}(r.d),cl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"BpmnSubEvent"},Zs([Object(r.q)("None")],t.prototype,"trigger",void 0),Zs([Object(r.q)("Start")],t.prototype,"event",void 0),Zs([Object(r.q)("")],t.prototype,"id",void 0),Zs([Object(r.g)({},E)],t.prototype,"offset",void 0),Zs([Object(r.e)([],nt)],t.prototype,"annotations",void 0),Zs([Object(r.e)([],$e)],t.prototype,"ports",void 0),Zs([Object(r.q)()],t.prototype,"width",void 0),Zs([Object(r.q)()],t.prototype,"height",void 0),Zs([Object(r.g)({},Se)],t.prototype,"margin",void 0),Zs([Object(r.q)("Center")],t.prototype,"horizontalAlignment",void 0),Zs([Object(r.q)("Center")],t.prototype,"verticalAlignment",void 0),Zs([Object(r.q)(!0)],t.prototype,"visible",void 0),t}(r.d),dl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),Zs([Object(r.g)({id:"success",event:"End",offset:{x:1,y:.5}},cl)],t.prototype,"success",void 0),Zs([Object(r.g)({id:"failure",event:"Intermediate",trigger:"Error",offset:{x:.25,y:1}},cl)],t.prototype,"failure",void 0),Zs([Object(r.g)({id:"cancel",event:"Intermediate",trigger:"Cancel",offset:{x:.75,y:1}},cl)],t.prototype,"cancel",void 0),t}(r.d),hl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),Zs([Object(r.q)("None")],t.prototype,"type",void 0),Zs([Object(r.q)(!1)],t.prototype,"adhoc",void 0),Zs([Object(r.q)("Default")],t.prototype,"boundary",void 0),Zs([Object(r.q)(!1)],t.prototype,"compensation",void 0),Zs([Object(r.q)("None")],t.prototype,"loop",void 0),Zs([Object(r.q)(!0)],t.prototype,"collapsed",void 0),Zs([Object(r.e)([],cl)],t.prototype,"events",void 0),Zs([Object(r.g)({},dl)],t.prototype,"transaction",void 0),Zs([Object(r.q)(void 0)],t.prototype,"processes",void 0),t}(r.d),pl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"BpmnActivity"},Zs([Object(r.q)("Task")],t.prototype,"activity",void 0),Zs([Object(r.g)({},sl)],t.prototype,"task",void 0),Zs([Object(r.g)({},hl)],t.prototype,"subProcess",void 0),t}(r.d),ul=function(e){function t(t,i,n,r){return e.call(this,t,i,n,r)||this}return Gs(t,e),t.prototype.getClassName=function(){return"BpmnAnnotation"},Zs([Object(r.q)("")],t.prototype,"text",void 0),Zs([Object(r.q)("")],t.prototype,"id",void 0),Zs([Object(r.q)(0)],t.prototype,"angle",void 0),Zs([Object(r.q)()],t.prototype,"height",void 0),Zs([Object(r.q)()],t.prototype,"width",void 0),Zs([Object(r.q)(0)],t.prototype,"length",void 0),t}(r.d),fl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"BpmnShape"},Zs([Object(r.q)("Bpmn")],t.prototype,"type",void 0),Zs([Object(r.q)("Event")],t.prototype,"shape",void 0),Zs([Object(r.g)({},ll)],t.prototype,"event",void 0),Zs([Object(r.g)({},ol)],t.prototype,"gateway",void 0),Zs([Object(r.g)({},al)],t.prototype,"dataObject",void 0),Zs([Object(r.g)({},pl)],t.prototype,"activity",void 0),Zs([Object(r.g)({},ul)],t.prototype,"annotation",void 0),Zs([Object(r.e)([],ul)],t.prototype,"annotations",void 0),t}(Qs),gl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"UmlActivityShape"},Zs([Object(r.q)("UmlActivity")],t.prototype,"type",void 0),Zs([Object(r.q)("Action")],t.prototype,"shape",void 0),t}(Qs),ml=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"MethodArguments"},Zs([Object(r.q)("")],t.prototype,"name",void 0),Zs([Object(r.q)("")],t.prototype,"type",void 0),Zs([Object(r.g)({},ke)],t.prototype,"style",void 0),t}(r.d),vl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"UmlClassAttribute"},Zs([Object(r.q)("Public")],t.prototype,"scope",void 0),Zs([Object(r.q)(!1)],t.prototype,"isSeparator",void 0),t}(ml),yl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"UmlClassMethod"},Zs([Object(r.e)([],ml)],t.prototype,"parameters",void 0),t}(vl),bl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"UmlClass"},Zs([Object(r.q)("")],t.prototype,"name",void 0),Zs([Object(r.e)([],vl)],t.prototype,"attributes",void 0),Zs([Object(r.e)([],yl)],t.prototype,"methods",void 0),Zs([Object(r.g)({},ke)],t.prototype,"style",void 0),t}(r.d),wl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"UmlInterface"},Zs([Object(r.q)(!1)],t.prototype,"isSeparator",void 0),t}(bl),xl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"UmlEnumerationMember"},Zs([Object(r.q)("")],t.prototype,"name",void 0),Zs([Object(r.q)("")],t.prototype,"value",void 0),Zs([Object(r.q)(!1)],t.prototype,"isSeparator",void 0),Zs([Object(r.g)({},ke)],t.prototype,"style",void 0),t}(r.d),Ol=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"UmlEnumeration"},Zs([Object(r.q)("")],t.prototype,"name",void 0),Zs([Object(r.e)([],xl)],t.prototype,"members",void 0),Zs([Object(r.g)({},ke)],t.prototype,"style",void 0),t}(r.d),Sl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"UmlClassifierShape"},Zs([Object(r.q)("UmlClassifier")],t.prototype,"type",void 0),Zs([Object(r.g)({},bl)],t.prototype,"classShape",void 0),Zs([Object(r.g)({},wl)],t.prototype,"interfaceShape",void 0),Zs([Object(r.g)({},Ol)],t.prototype,"enumerationShape",void 0),Zs([Object(r.q)("Class")],t.prototype,"classifier",void 0),t}(Qs),Cl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"DiagramShape"},Zs([Object(r.q)("Basic")],t.prototype,"type",void 0),Zs([Object(r.q)("Rectangle")],t.prototype,"basicShape",void 0),Zs([Object(r.q)("Terminator")],t.prototype,"flowShape",void 0),Zs([Object(r.q)("Event")],t.prototype,"bpmnShape",void 0),Zs([Object(r.q)("Action")],t.prototype,"umlActivityShape",void 0),Zs([Object(r.q)("")],t.prototype,"data",void 0),Zs([Object(r.q)("")],t.prototype,"content",void 0),Zs([Object(r.q)("")],t.prototype,"textContent",void 0),Zs([Object(r.q)("Stretch")],t.prototype,"scale",void 0),Zs([Object(r.q)("")],t.prototype,"source",void 0),Zs([Object(r.q)("None")],t.prototype,"align",void 0),Zs([Object(r.g)({},Se)],t.prototype,"margin",void 0),Zs([Object(r.q)(0)],t.prototype,"cornerRadius",void 0),Zs([Object(r.e)([],E)],t.prototype,"points",void 0),Zs([Object(r.g)({},al)],t.prototype,"dataObject",void 0),Zs([Object(r.g)({},ll)],t.prototype,"event",void 0),Zs([Object(r.g)({},ol)],t.prototype,"gateway",void 0),Zs([Object(r.e)([],ul)],t.prototype,"annotations",void 0),Zs([Object(r.g)({},pl)],t.prototype,"activity",void 0),Zs([Object(r.g)({},ul)],t.prototype,"annotation",void 0),Zs([Object(r.g)({},Ol)],t.prototype,"enumerationShape",void 0),Zs([Object(r.q)("Class")],t.prototype,"classifier",void 0),Zs([Object(r.g)({},bl)],t.prototype,"classShape",void 0),Zs([Object(r.g)({},wl)],t.prototype,"interfaceShape",void 0),t}(r.d),Pl=function(e){function t(t,i,n,r){var o,a=e.call(this,t,i,n,r)||this;return a.isCanvasUpdate=!1,a.status="None",a.parentId="",a.processId="",a.umlIndex=-1,a.outEdges=[],a.inEdges=[],a.isHeader=!1,a.isLane=!1,a.isPhase=!1,a.children&&a.children.length>0&&((o=n).style&&o.style.fill||(a.style.fill="transparent"),o.style&&o.style.strokeColor||(a.style.strokeColor="transparent")),a.shape&&"UmlActivity"===a.shape.type&&Ra(n,a),a.shape&&"SwimLane"===a.shape.type&&ka(n,a),a}return Gs(t,e),Object.defineProperty(t.prototype,"actualSize",{get:function(){return null!==this.wrapper?this.wrapper.actualSize:new P(this.width||0,this.height||0)},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t,i;t="SwimLane"!=this.shape.type?new Le:new Ro;switch(this.shape.changedProperties={},this.shape.oldProperties={},this.shape.type){case"Path":var n=new Ue;n.data=this.shape.data,t=n;break;case"Image":var o=new Ye;o.source=this.shape.source,o.imageAlign=this.shape.align,o.imageScale=this.shape.scale,t=o;break;case"Text":var a=new Be;a.content=Object(r.I)()?this.shape.textContent:this.shape.content,t=a,i=this.style,t.style=i;break;case"Basic":if(!Object(r.I)()&&"Rectangle"===this.shape.shape||Object(r.I)()&&"Rectangle"===this.shape.basicShape)(t=l=new Le).cornerRadius=this.shape.cornerRadius;else if(!Object(r.I)()&&"Polygon"===this.shape.shape||Object(r.I)()&&"Polygon"===this.shape.basicShape){var s=new Ue;s.data=A(this.shape.points),t=s}else{var l=new Ue,c=We(Object(r.I)()?this.shape.basicShape:this.shape.shape);l.data=c,t=l}break;case"Flow":var d=new Ue,h=lt(Object(r.I)()?this.shape.flowShape:this.shape.shape);d.data=h,t=d;break;case"UmlActivity":t=function(e,t,i){var n=Object(r.I)()?i.shape.umlActivityShape:i.shape.shape,o=jo(n);switch(e.data=o,t=e,n){case"StructuredNode":if(i.annotations)for(var a=0;a<i.annotations.length;a++)i.annotations[a].content="<<"+i.annotations[a].content+">>";t=e;break;case"FinalNode":t=as(i)}return t}(new Ue,t,this);break;case"Bpmn":if(e.bpmnModule){t=e.bpmnModule.initBPMNContent(t,this,e),this.wrapper.elementActions=this.wrapper.elementActions|re.ElementIsGroup;var p=this.shape.activity.subProcess;if(p.processes&&p.processes.length)for(var u=0,f=this.shape.activity.subProcess.processes;u<f.length;u++){var g=f[u];!e.nameTable[g]||e.nameTable[g].processId&&e.nameTable[g].processId!==this.id||(e.nameTable[g].processId=this.id,p.collapsed&&e.updateElementVisibility(e.nameTable[g].wrapper,e.nameTable[g],!p.collapsed),t.children.push(e.nameTable[g].wrapper))}}break;case"Native":var m=new Ge(this.id,e.element.id);m.content=this.shape.content,m.scale=this.shape.scale,t=m;break;case"HTML":var v=new dr(this.id,e.element.id,void 0,e.nodeTemplate);this.shape.content?v.content=this.shape.content:e.nodeTemplate&&(v.isTemplate=!0,v.template=v.content=tc(v,!0,this)),t=v;break;case"UmlClassifier":t=Fs(t,this,e);break;case"SwimLane":this.annotations=[],this.ports=[],t.cellStyle.fill="none",t.cellStyle.strokeColor="none",this.container={type:"Grid",orientation:this.shape.orientation},t.id=this.id,this.container.orientation=this.shape.orientation,this.constraints|=ne.HideThumbs,Jo(t,e,this)}return t.id=this.id+"_content",t.relativeMode="Object",void 0!==this.width&&(t.width=this.width),t.horizontalAlignment="Stretch",void 0!==this.height&&(t.height=this.height),void 0!==this.minHeight&&(t.minHeight=this.minHeight),void 0!==this.maxHeight&&(t.maxHeight=this.maxHeight),void 0!==this.minWidth&&(t.minWidth=this.minWidth),void 0!==this.maxWidth&&(t.maxWidth=this.maxWidth),(!Object(r.I)()&&"Rectangle"===this.shape.shape&&!this.shape.cornerRadius||Object(r.I)()&&"Rectangle"===this.shape.basicShape&&"Basic"===this.shape.type&&!this.shape.cornerRadius)&&(t.isRectElement=!0),t.verticalAlignment="Stretch",(this.shape instanceof il||Object(r.I)()&&"Text"===this.shape.type)&&(t.margin=this.shape.margin),to(this)&&0!==(this.constraints&ne.Shadow)&&(t.shadow=this.shadow),("Bpmn"!==this.shape.type||!Object(r.I)()&&"Message"===this.shape.shape||Object(r.I)()&&"Message"===this.shape.bpmnShape||!Object(r.I)()&&"DataSource"===this.shape.shape||Object(r.I)()&&"DataSource"===this.shape.bpmnShape)&&("UmlActivity"!==this.shape.type||!Object(r.I)()&&"FinalNode"!==this.shape.shape||Object(r.I)()&&"FinalNode"!==this.shape.umlActivityShape)&&"Text"!==this.shape.type&&(t.style=this.style),(this.wrapper.elementActions&re.ElementIsGroup||"Horizontal"!==this.flip)&&"Vertical"!==this.flip||(t.flip=this.flip),t},t.prototype.initContainer=function(){var e;if(this.id||(this.id=lc()),!this.container||this.shape instanceof Tl)e=this.children?new ze:new He;else switch(this.container.type){case"Canvas":e=new He;break;case"Stack":e=new Ws;break;case"Grid":(e=new Ro).setDefinitions(this.rows,this.columns)}return e.id=this.id,e.offsetX=this.offsetX,e.offsetY=this.offsetY,e.visible=this.visible,e.horizontalAlignment=this.horizontalAlignment,e.verticalAlignment=this.verticalAlignment,this.container&&(e.width=this.width,e.height=this.height,"Stack"===this.container.type&&(e.orientation=this.container.orientation)),e.style.fill=this.backgroundColor,e.style.strokeColor=this.borderColor,e.style.strokeWidth=this.borderWidth,e.rotateAngle=this.rotateAngle,e.minHeight=this.minHeight,e.minWidth=this.minWidth,e.maxHeight=this.maxHeight,e.maxWidth=this.maxWidth,e.pivot=this.pivot,e.margin=this.margin,e.flip=this.flip,this.wrapper=e,e},t.prototype.initPorts=function(e,t){for(var i=0;this.ports,i<this.ports.length;i++)this.initPort(e,t,this.ports[i])},t.prototype.initPort=function(e,t,i){var n,r,o=this.wrapper;n=this.initPortWrapper(i);var a=Pc(e);a&&(r=a(n,this)),n.description=r||n.id,n.inversedAlignment=o.inversedAlignment,n.elementActions=n.elementActions|re.ElementIsPort,t.children.push(n)},t.prototype.getIconOffet=function(e,t){var i,n;return"BottomToTop"===e.orientation?(i=t.offset.x,n=1-t.offset.y):"LeftToRight"===e.orientation?(i=t.offset.y,n=t.offset.x):"RightToLeft"===e.orientation?(i=1-t.offset.y,n=t.offset.x):(i=t.offset.x,n=t.offset.y),{x:i,y:n}},t.prototype.initIcons=function(e,t,i,n){var r,o=this.wrapper,a=this.isExpanded?this.expandIcon:this.collapseIcon;if("None"!==a.shape){var s=new He;s.float=!0;s.id=this.id+"_icon_content",s.children=[],s.height=a.height,s.width=a.width,s.style.strokeColor="transparent",s.margin=a.margin,s.horizontalAlignment="Center",s.verticalAlignment="Center",s.visible=this.visible,r=this.getIconOffet(t,a),s.setOffsetWithRespectToBounds(r.x,r.y,"Fraction"),s.relativeMode="Point",this.initIconSymbol(a,s,e,n);var l=void 0,c=Pc(e);c&&(l=c(a,this)),s.description=l||s.id,s.inversedAlignment=o.inversedAlignment,i.children.push(s)}},t.prototype.initfixedUserHandles=function(e){var t,i,n=this.wrapper;(i=new He).float=!0;e.id=e.id||lc(),i.id=this.id+"_"+e.id,i.children=[],i.height=e.height,i.width=e.width,i.style.strokeColor=e.handleStrokeColor,i.style.fill=e.fill,i.style.strokeWidth=e.handleStrokeWidth,i.margin=e.margin,i.visible=e.visibility,i.cornerRadius=e.cornerRadius,i.horizontalAlignment="Center",i.verticalAlignment="Center",t=this.getfixedUserHandleOffet(e),i.setOffsetWithRespectToBounds(t.x,t.y,"Fraction"),i.relativeMode="Point";var r=Xa(e,i);return i.children.push(r),i.description=i.id,i.inversedAlignment=n.inversedAlignment,i},t.prototype.getfixedUserHandleOffet=function(e){return{x:e.offset.x,y:e.offset.y}},t.prototype.initAnnotations=function(e,t,i,n,r){for(var o,a=0;this.annotations,a<this.annotations.length;a++){o=this.initAnnotationWrapper(this.annotations[a],i,n,a,r);var s=void 0,l=Pc(e);l&&(s=l(o,this)),o.description=s||o.id,o.inversedAlignment=t.inversedAlignment,t.children.push(o)}},t.prototype.initPortWrapper=function(e){e.id=e.id||lc();var t=new Ue;t.height=e.height,t.width=e.width;var i="Custom"===e.shape?e.pathData:ot(e.shape);t.id=this.id+"_"+e.id,t.margin=e.margin,t.data=i;var n=e.style;return t.style={fill:n.fill,strokeColor:n.strokeColor,gradient:null,opacity:n.opacity,strokeDashArray:n.strokeDashArray,strokeWidth:n.strokeWidth},t.horizontalAlignment=e.horizontalAlignment,t.verticalAlignment=e.verticalAlignment,t=Is(t,this.flip,e),void 0===this.width&&void 0===this.height||(t.float=!0),t.relativeMode="Point",t.visible=!(!us(e,J.Visible)||us(e,J.Hover)||us(e,J.Connect)),t.elementActions=t.elementActions|re.ElementIsPort,t},t.prototype.initAnnotationWrapper=function(e,t,i,n,o){e.id=e.id||n+"annotation"||lc();var a,s=e;if(Object(r.I)()&&"Template"===e.annotationType&&(e.template=e.template?e.template:""),t&&(e.template||"Template"===e.annotationType||o&&""===e.content))a=sc(a=new dr(this.id,t,e.id,o),e,o);else{(a=new Be).canMeasure=!i;var l=e.style,c=e.hyperlink.link?e.hyperlink:void 0;a.style={fill:l.fill,strokeColor:l.strokeColor,strokeWidth:l.strokeWidth,bold:l.bold,textWrapping:l.textWrapping,color:c?c.color||a.hyperlink.color:l.color,whiteSpace:l.whiteSpace,fontFamily:l.fontFamily,fontSize:l.fontSize,italic:l.italic,gradient:null,opacity:l.opacity,strokeDashArray:l.strokeDashArray,textAlign:l.textAlign,textOverflow:e.style.textOverflow,textDecoration:c?c.textDecoration||a.hyperlink.textDecoration:l.textDecoration},a.hyperlink.link=e.hyperlink.link||void 0,a.hyperlink.content=e.hyperlink.content||void 0,a.hyperlink.textDecoration=e.hyperlink.textDecoration||void 0,a.content=c?c.content||a.hyperlink.link:e.content}return a.constraints=e.constraints,a.height=e.height,a.width=e.width,a.visible=e.visibility,a.rotateAngle=e.rotateAngle,a.id=this.id+"_"+e.id,void 0===this.width||e.template||(void 0===e.width||e.width>this.width&&("Wrap"===e.style.textWrapping||"WrapWithOverflow"===e.style.textWrapping))&&(a.width=this.width),a.margin=e.margin,a.horizontalAlignment=e.horizontalAlignment,a.verticalAlignment=e.verticalAlignment,a.setOffsetWithRespectToBounds(s.offset.x,s.offset.y,"Fraction"),void 0===this.width&&void 0===this.height||(a.float=!0),a.relativeMode="Point",a},t.prototype.initIconContainer=function(e,t){var i=new Le;return i.id=t.id+"_rect",i.height=e.height,i.width=e.width,i.visible=t.visible,i.margin=e.margin,i.cornerRadius=e.cornerRadius,i.style={fill:e.fill,strokeColor:e.borderColor,strokeWidth:e.borderWidth},i.setOffsetWithRespectToBounds(.5,.5,"Fraction"),i.horizontalAlignment="Center",i.verticalAlignment="Center",i.relativeMode="Object",i.description=i.description||"Click here to expand or collapse",i},t.prototype.initIconSymbol=function(e,t,i,n){var r;if(t.children.push(this.initIconContainer(e,t)),"Template"===e.shape)(r=new Ge(this.id,n)).content=e.content,r.height=10,r.width=10;else{(r=new Ue).data=function(e){var t;switch(e.shape){case"Minus":t="M0,50 L100,50";break;case"Plus":t="M0,-50 L0,50 M-50,0 L50,0";break;case"ArrowUp":t="M0,100 L50,0 L100,100 Z";break;case"ArrowDown":t="M0,0 L50,100 L100,0 Z";break;case"Path":t=e.pathData}return t}(e);var o=Ml(r.data);r.height=o.height<10?o.height:10-(e.padding.bottom+e.padding.top),r.width=o.width<10?o.width:10-(e.padding.left+e.padding.right)}r.id=t.id+"_shape",r.horizontalAlignment="Center",r.verticalAlignment="Center",r.visible=t.visible,r.visible=t.visible,r.style={fill:"black",strokeColor:e.borderColor,strokeWidth:e.borderWidth},r.setOffsetWithRespectToBounds(.5,.5,"Fraction"),r.relativeMode="Object",r.description=t.description||"Click here to expand or collapse",t.children.push(r)},t.prototype.getClassName=function(){return"Node"},Zs([Object(r.e)([],nt)],t.prototype,"annotations",void 0),Zs([Object(r.q)(0)],t.prototype,"offsetX",void 0),Zs([Object(r.g)({},Xs)],t.prototype,"layoutInfo",void 0),Zs([Object(r.q)(0)],t.prototype,"offsetY",void 0),Zs([Object(r.e)([],$e)],t.prototype,"ports",void 0),Zs([Object(r.q)(!0)],t.prototype,"isExpanded",void 0),Zs([Object(r.e)([],fr)],t.prototype,"fixedUserHandles",void 0),Zs([Object(r.g)({},_s)],t.prototype,"expandIcon",void 0),Zs([Object(r.g)({},_s)],t.prototype,"collapseIcon",void 0),Zs([Object(r.g)({x:.5,y:.5},E)],t.prototype,"pivot",void 0),Zs([Object(r.q)()],t.prototype,"width",void 0),Zs([Object(r.q)()],t.prototype,"height",void 0),Zs([Object(r.q)()],t.prototype,"minWidth",void 0),Zs([Object(r.q)()],t.prototype,"minHeight",void 0),Zs([Object(r.q)()],t.prototype,"maxWidth",void 0),Zs([Object(r.q)()],t.prototype,"maxHeight",void 0),Zs([Object(r.q)(0)],t.prototype,"rotateAngle",void 0),Zs([Object(r.g)({fill:"white"},ke)],t.prototype,"style",void 0),Zs([Object(r.q)("transparent")],t.prototype,"backgroundColor",void 0),Zs([Object(r.q)("none")],t.prototype,"borderColor",void 0),Zs([Object(r.q)(0)],t.prototype,"borderWidth",void 0),Zs([Object(r.q)()],t.prototype,"data",void 0),Zs([Object(r.h)(Js)],t.prototype,"shape",void 0),Zs([Object(r.g)({},rr)],t.prototype,"previewSize",void 0),Zs([Object(r.g)({},rr)],t.prototype,"dragSize",void 0),Zs([Object(r.q)(null)],t.prototype,"wrapper",void 0),Zs([Object(r.q)(ne.Default)],t.prototype,"constraints",void 0),Zs([Object(r.g)({},Ce)],t.prototype,"shadow",void 0),Zs([Object(r.q)()],t.prototype,"children",void 0),Zs([Object(r.q)(null)],t.prototype,"container",void 0),Zs([Object(r.q)("Left")],t.prototype,"horizontalAlignment",void 0),Zs([Object(r.q)("Top")],t.prototype,"verticalAlignment",void 0),Zs([Object(r.q)()],t.prototype,"rows",void 0),Zs([Object(r.q)()],t.prototype,"columns",void 0),Zs([Object(r.q)()],t.prototype,"rowIndex",void 0),Zs([Object(r.q)()],t.prototype,"columnIndex",void 0),Zs([Object(r.q)()],t.prototype,"rowSpan",void 0),Zs([Object(r.q)()],t.prototype,"columnSpan",void 0),Zs([Object(r.q)("")],t.prototype,"branch",void 0),t}(lr),jl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),Zs([Object(r.q)("")],t.prototype,"id",void 0),Zs([Object(r.g)({},it)],t.prototype,"annotation",void 0),Zs([Object(r.g)({fill:"#E7F4FF",strokeColor:"#CCCCCC"},Ae)],t.prototype,"style",void 0),Zs([Object(r.q)(50)],t.prototype,"height",void 0),Zs([Object(r.q)(50)],t.prototype,"width",void 0),t}(r.d),Il=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"Lane"},Zs([Object(r.q)("")],t.prototype,"id",void 0),Zs([Object(r.g)({fill:"#F9F9F9",strokeColor:"#CCCCCC"},Ae)],t.prototype,"style",void 0),Zs([Object(r.e)([],Pl)],t.prototype,"children",void 0),Zs([Object(r.q)(100)],t.prototype,"height",void 0),Zs([Object(r.q)(100)],t.prototype,"width",void 0),Zs([Object(r.g)({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},jl)],t.prototype,"header",void 0),Zs([Object(r.q)(!0)],t.prototype,"canMove",void 0),t}(r.d),El=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.getClassName=function(){return"Phase"},Zs([Object(r.q)("")],t.prototype,"id",void 0),Zs([Object(r.g)({strokeColor:"#CCCCCC"},Ae)],t.prototype,"style",void 0),Zs([Object(r.g)({annotation:{content:"Phase"}},jl)],t.prototype,"header",void 0),Zs([Object(r.q)(100)],t.prototype,"offset",void 0),t}(r.d),Tl=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.padding=20,t.hasHeader=!0,t}return Gs(t,e),t.prototype.getClassName=function(){return"SwimLane"},Zs([Object(r.q)("SwimLane")],t.prototype,"type",void 0),Zs([Object(r.q)(20)],t.prototype,"phaseSize",void 0),Zs([Object(r.e)([],El)],t.prototype,"phases",void 0),Zs([Object(r.q)("Horizontal")],t.prototype,"orientation",void 0),Zs([Object(r.e)([],Il)],t.prototype,"lanes",void 0),Zs([Object(r.g)({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},jl)],t.prototype,"header",void 0),Zs([Object(r.q)(!1)],t.prototype,"isLane",void 0),Zs([Object(r.q)(!1)],t.prototype,"isPhase",void 0),t}(Qs),Al=function(){function e(){}return e.prototype.getClassName=function(){return"ChildContainer"},Zs([Object(r.q)("Canvas")],e.prototype,"type",void 0),Zs([Object(r.q)("Vertical")],e.prototype,"orientation",void 0),e}(),Dl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.init=function(e){var t=new ze;t.measureChildren=!1;new P;if(t.children=[],this.annotation){var i=this.nodes.length>0?e.nameTable[this.nodes[0].id].wrapper:e.nameTable[this.connectors[0].id].wrapper,n=e.getWrapper(i,this.annotation.id);t.children.push(n)}else if(this.nodes||this.connectors){for(var r=0;r<this.nodes.length;r++){n=e.nameTable[this.nodes[r].id].wrapper;t.children.push(n)}for(var o=0;o<this.connectors.length;o++){n=e.nameTable[this.connectors[o].id].wrapper;t.children.push(n)}}var a=e.isProtectedOnChange;return e.protectPropertyChange(!1),this.wrapper=t,e.protectPropertyChange(a),t},Zs([Object(r.q)(null)],t.prototype,"wrapper",void 0),Zs([Object(r.e)([],Pl)],t.prototype,"nodes",void 0),Zs([Object(r.e)([],_r)],t.prototype,"connectors",void 0),Zs([Object(r.q)()],t.prototype,"width",void 0),Zs([Object(r.q)()],t.prototype,"height",void 0),Zs([Object(r.q)(0)],t.prototype,"rotateAngle",void 0),Zs([Object(r.q)(0)],t.prototype,"offsetX",void 0),Zs([Object(r.q)(0)],t.prototype,"offsetY",void 0),Zs([Object(r.g)({x:.5,y:.5},E)],t.prototype,"pivot",void 0),Zs([Object(r.q)("CompleteIntersect")],t.prototype,"rubberBandSelectionMode",void 0),Zs([Object(r.e)([],Po)],t.prototype,"userHandles",void 0),Zs([Object(r.q)($.All)],t.prototype,"constraints",void 0),Zs([Object(r.q)()],t.prototype,"setTooltipTemplate",void 0),t}(r.d);function kl(e){var t,i=[];if("msie"===r.c.info.name||"edge"===r.c.info.name)for(var n=0;n<e.childNodes.length;n++)1===(t=e.childNodes[n]).nodeType&&i.push(t);else i=e.children;return i}function Ml(e){if(e){window.measureElement.style.visibility="visible";var t=kl(window.measureElement.children[2])[0];t.setAttribute("d",e);var i=t.getBBox(),n=new _(i.x,i.y,i.width,i.height);return window.measureElement.style.visibility="hidden",n}return new _(0,0,0,0)}function Ll(e,t,i,n,r){var o=new P,a=Zl("span",{style:"display:inline-block; line-height: normal"});return e.bold&&(a.style.fontWeight="bold"),e.italic&&(a.style.fontStyle="italic"),void 0!==i&&(a.style.width=i.toString()+"px"),void 0!==n&&(a.style.height=n.toString()+"px"),void 0!==r&&(a.style.maxWidth=r.toString()+"px"),a.style.fontFamily=e.fontFamily,a.style.fontSize=e.fontSize+"px",a.style.color=e.color,a.textContent=t,a.style.whiteSpace=Oc(e.whiteSpace,e.textWrapping),a.style.wordBreak=void 0!==r?"break-word":yc(e.textWrapping),document.body.appendChild(a),o.width=a.offsetWidth,o.height=a.offsetHeight,document.body.removeChild(a),o}function Rl(e,t,i,n){var r,o,a=0,s=0,l=!1;return 0===(r=t).x&&0===r.y||(a=0-Number(r.x),s=0-Number(r.y)),(e.actualSize.width!==r.width||e.actualSize.height!==r.height||n)&&(a=(n&&n.width||e.actualSize.width)/Number(r.width?r.width:1),s=(n&&n.height||e.actualSize.height)/Number(r.height?r.height:1),l=!0),o=k(R(T(e.data)),a,s,l,r.x,r.y,0,0),l=!1,o}function zl(e){return Nl(e).getElementsByClassName("e-diagram-layer")[0]}function Nl(e,t){var i;return t&&(i=document.getElementById(t)),"msie"===r.c.info.name||"edge"===r.c.info.name?i?i.querySelector("#"+e):document.getElementById(e):i?i.querySelector("#"+CSS.escape(e)):document.getElementById(e)}function Bl(e,t,i){var n,r,o=void 0,a="";"native"===i?(n=Xl(e),a="_content_groupElement"):"html"===i?(n=Gl(e).childNodes[0],a="_html_element"):(n=function(e){var t=zl(e);return t.getElementById(e+"_diagramLayer")}(e),a="_groupElement");for(var s=0;n.childNodes&&s<n.childNodes.length;s++)if((r=n.childNodes[s])&&r.id===t+a){o=s;break}return o}function _l(e){return Nl(e).getElementsByClassName("e-adorner-layer")[0]}function Hl(e){return _l(e).getElementById(e+"_SelectorElement")}function Wl(e){return _l(e).getElementById(e+"_diagramAdorner")}function Fl(e){return Nl(e).getElementsByClassName("e-userHandle-layer")[0]}function ql(e){return Nl(e).getElementsByClassName("e-native-layer")[0]}function Ul(e){return Nl(e).getElementsByClassName("e-grid-layer")[0]}function Vl(e){return Nl(e).getElementsByClassName("e-background-layer")[0].parentNode}function Yl(e){return Nl(e).getElementsByClassName("e-background-layer")[0]}function Xl(e){return ql(e).getElementById(e+"_nativeLayer")}function Gl(e){var t=null;if(window.domTable[e+"html_layer"])t=window.domTable[e+"html_layer"];else{t=Nl(e).getElementsByClassName("e-html-layer")[0],window.domTable[e+"html_layer"]=t}return t}function Zl(e,t){var i=Object(r.A)(e);return rc(i,t),i}function Jl(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg",e);return ic(i,t),i}function Ql(e,t,i){for(var n=e;n&&!(i?n.id===t:$l(n,t));)n=n.parentNode;return n}function $l(e,t){return(" "+("object"===typeof e.className?e.className.animVal:e.className)+" ").indexOf(" "+t+" ")>-1}function Kl(e,t,i){e=[];for(var n=0,r=i.length;n<r;n++)e.push({pageX:i[n].clientX,pageY:i[n].clientY,pointerId:null});return e}function ec(e,t){var i=Nl(e,t);i&&i.parentNode.removeChild(i)}function tc(e,t,i){var n;if(t){n=Zl("div",{style:"height: 100%; width: 100%"})}else n=document.createElementNS("http://www.w3.org/2000/svg","g");var o,a,s=Os(e),l="",c={};if(s instanceof Pl){if(c=s,"Native"===s.shape.type){!0;var d,h=document.createElementNS("http://www.w3.org/2000/svg","svg");document.body.appendChild(h),h.innerHTML=s.shape.content,d=h.getElementsByTagName("svg").length>0?h.getElementsByTagName("svg")[0].outerHTML:h.getElementsByTagName("g")[0].outerHTML,s.shape.content=d,e.content=d,h.parentElement.removeChild(h)}Object(r.I)()&&(l="diagramsf_node_template",c=Ls(s)),o="nodeTemplate"}else c=s,Object(r.I)()&&(c=Ls(s),l="diagramsf_annotation_template"),o="annotationTemplate";var p=document.getElementById(e.diagramId).ej2_instances[0];if("string"!==typeof e.content||e.isTemplate&&!Object(r.I)())if(e.isTemplate){g=void 0;g=e.getNodeTemplate()(uc(i),p,o+"_"+("nodeTemplate"===o?i.id:e.nodeId+i.id),void 0,void 0,!1);for(var u=0;u<g.length;u++)n.appendChild(g[u])}else n.appendChild(e.content);else{var f=document.getElementById(e.content);if(f)n.appendChild(f);else for(var g=void 0,m=0,v=(g=Object(r.z)(e.content))(c,p,o,l);m<v.length;m++)a=v[m],n.appendChild(a)}return e.isTemplate?n:n.cloneNode(!0)}function ic(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)"style"!==i[n]?e.setAttribute(i[n],t[i[n]]):nc(e,t[i[n]])}function nc(e,t){for(var i=t.split(";"),n=0;n<i.length;n++){var r=i[n].split(":");2===r.length&&(e.style[r[0].trim()]=r[1].trim())}}function rc(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)"style"!==i[n]?e.setAttribute(i[n],t[i[n]]):nc(e,t[i[n]])}function oc(){if(window.measureElement)window.measureElement.usageCount+=1;else{var e=Zl("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),t=Zl("span",{style:"display:inline-block ; line-height: normal"});e.appendChild(t);var i;i=Zl("img",{}),e.appendChild(i);var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.appendChild(n);var r=document.createElementNS("http://www.w3.org/2000/svg","path");n.appendChild(r);document.createTextNode("");var o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.appendChild(o),window.measureElement=e,window.measureElement.usageCount=1,document.body.appendChild(e);window.measureElementCount?window.measureElementCount++:window.measureElementCount=1}}function ac(e,t,i,n){return!(t.length>1&&0===e.x)||"Clip"!==n.textOverflow&&"Ellipsis"!==n.textOverflow||"Wrap"!==n.textWrapping&&"WrapWithOverflow"!==n.textWrapping||(e.x=t[i-1]?t[i-1].x:-e.width/2),e.x}function sc(e,t,i){return i&&!t.template?(e.isTemplate=!0,e.template=e.content=tc(e,!0,t)):e.content=t.template,e}function lc(){for(var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i="",n=0;n<5;n++){if("crypto"in window&&"getRandomValues"in crypto){var r=new Uint16Array(1);e=(window.msCrypto||window.crypto).getRandomValues(r)[0]%(t.length-1)}else e=Math.floor(Math.random()*t.length);0===n&&e<10?n--:i+=t.substring(e,e+1)}return i}function cc(e,t){if(e.nodes&&e.nodes.length>0)for(var i=0;i<e.nodes.length;i++)if(e.nodes[i].id===t)return i;if(e.connectors&&e.connectors.length>0)for(i=0;i<e.connectors.length;i++)if(e.connectors[i].id===t)return i;return null}function dc(e){if(e){try{if(document.querySelectorAll(e).length)return Object(r.z)(document.querySelector(e).innerHTML.trim())}catch(t){return Object(r.z)(e)}}}function hc(e){new _;var t=e.offsetY-e.actualSize.height*e.pivot.y,i=e.offsetY+e.actualSize.height*(1-e.pivot.y),n=e.offsetX-e.actualSize.width*e.pivot.x,r=e.offsetX+e.actualSize.width*(1-e.pivot.x),o={x:n,y:t},a={x:r,y:t},s={x:n,y:i},l={x:r,y:i};return _.toBounds([o,a,s,l])}function pc(e){var t,i=new _,n=(t=hc(e)).middleLeft,r=t.topCenter,o=t.bottomCenter,a=t.middleRight,s=t.topLeft,l=t.topRight,c=t.bottomLeft,d=t.bottomRight;if(e.corners={topLeft:s,topCenter:r,topRight:l,middleLeft:n,middleRight:a,bottomLeft:c,bottomCenter:o,bottomRight:d},0!==e.rotateAngle||0!==e.parentTransform){var h=W();q(h,e.rotateAngle+e.parentTransform,e.offsetX,e.offsetY),e.corners.topLeft=s=F(h,s),e.corners.topCenter=r=F(h,r),e.corners.topRight=l=F(h,l),e.corners.middleLeft=n=F(h,n),e.corners.middleRight=a=F(h,a),e.corners.bottomLeft=c=F(h,c),e.corners.bottomCenter=o=F(h,o),e.corners.bottomRight=d=F(h,d)}return i=_.toBounds([s,l,c,d]),e.corners.left=i.left,e.corners.right=i.right,e.corners.top=i.top,e.corners.bottom=i.bottom,e.corners.center=i.center,e.corners.width=i.width,e.corners.height=i.height,i}function uc(e,t,i,n){var r={},o="properties";if(e){i=e.propName;var a=e[o]||e,s=[],l=[];if((s=s.concat(Object.keys(a))).push("version"),i){var c=Pc(t);l=c?c(i):[],s=s.concat(l)}var d=function(e){switch(e){case"nodes":case"children":return["inEdges","outEdges","parentId","processId","nodeId","umlIndex","isPhase","isLane"];case"connectors":return["parentId"];case"annotation":case"annotations":return["nodeId"];case"shape":return["hasHeader"];case"layers":return["objectZIndex"]}return[]}(i);s=s.concat(d),n&&(s=function(e,t){var i=[];return t instanceof Pl?i=["width","height","offsetX","offsetY","container","visible","horizontalAlignment","verticalAlignment","backgroundColor","borderColor","borderWidth","rotateAngle","minHeight","minWidth","maxHeight","maxWidth","pivot","margin","flip","wrapper","constraints","style","annotations","ports","isExpanded","expandIcon"]:t instanceof _r?i=["constraints","sourcePadding","targetPadding","cornerRadius","flip","type","targetDecorator","sourceDecorator","sourceID","shape","bridgeSpace","annotations","segments","hitPadding","tooltip","previewSize","dragSize","style","sourcePortID","targetID","targetPortID","visible"]:t instanceof wr?i=["height","width","shape","style","pivot","pathData"]:t instanceof Qs||t instanceof _s?(i.push("shape"),t instanceof nl?i.push("cornerRadius"):t instanceof Text?i.push("margin"):t instanceof Image?(i.push("align"),i.push("scale")):t instanceof Ks?i.push("scale"):t instanceof fl?(i.push("activity"),i.push("annotations")):t instanceof _s&&(i.push("borderColor"),i.push("borderWidth"),i.push("cornerRadius"),i.push("fill"))):t instanceof pl?i.push("subProcess"):t instanceof sl?(i.push("call"),i.push("compensation"),i.push("loop")):t instanceof hl?(i.push("adhoc"),i.push("boundary"),i.push("compensation"),i.push("loop"),i.push("processes")):t instanceof Qe?(i.push("height"),i.push("width"),i.push("visibility"),i.push("horizontalAlignment"),i.push("verticalAlignment"),i.push("shape")):t instanceof it?(i.push("constraints"),i.push("height"),i.push("horizontalAlignment"),i.push("rotateAngle"),i.push("template"),i.push("verticalAlignment"),i.push("visibility"),i.push("width"),i.push("margin")):t instanceof Se?(i.push("left"),i.push("right"),i.push("top"),i.push("bottom")):t instanceof ke&&(i=["strokeWidth","strokeDashArray","opacity","gradient","fontSize","fontFamily","textOverflow","textDecoration","whiteSpace","textWrapping","textAlign","italic","bold"]),t instanceof Ae&&(i.push("strokeColor"),i.push("color")),e.concat(i)}(s,e));for(var h=0,p=s;h<p.length;h++){var u=p[h];if("historyManager"!==u)if("wrapper"!==u){!(!e[u]||!e.hasOwnProperty("observers"))||(e[u]instanceof Array?r[u]=fc(-1===d.indexOf(u)&&e[o]?e[o][u]:e[u],t,u,n):e[u]instanceof Array===!1&&e[u]instanceof HTMLElement?r[u]=e[u].cloneNode(!0).innerHtml:e[u]instanceof Array===!1&&e[u]instanceof Object?r[u]=uc(-1===d.indexOf(u)&&e[o]?e[o][u]:e[u],void 0,void 0,n):r[u]=e[u])}else e[u]&&(r[u]={actualSize:{width:e[u].actualSize.width,height:e[u].actualSize.height},offsetX:e[u].offsetX,offsetY:e[u].offsetY})}}return r}function fc(e,t,i,n){var r;if(e){r=[];for(var o=0;o<e.length;o++)e[o]instanceof Array?r.push(e[o]):e[o]instanceof Object?r.push(uc(e[o],t,i,n)):r.push(e[o])}return r}function gc(e,t){if(e){t||(t={properties:{}});for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if(e[r]instanceof Array){var o=mc(e[r],t.properties[r]);t.properties[r]&&t.properties[r].length||(t[r]=o)}else if(e[r]instanceof Array===!1&&e[r]instanceof HTMLElement)t[r]=e[r].cloneNode(!0).innerHtml;else if(e[r]instanceof Array===!1&&e[r]instanceof Object){var a=gc(e[r],t.properties[r]);a.properties&&!Object.keys(a.properties).length&&delete a.properties,t[r]=a}else t[r]=void 0!==t.properties[r]?t[r]:e[r]}}return t}function mc(e,t){var i=[],n=!1;t||(t=[]),t.length||(n=!0);for(var r=0;r<e.length;r++)if(e[r]instanceof Array){mc(e[r],t[r]);n&&i.push(mc)}else if(e[r]instanceof Object){var o=gc(e[r],t[r]);n&&i.push(o)}else i.push(e[r]);return i}function vc(e){var t="";switch(e){case"Center":t="center";break;case"Left":t="left";break;case"Right":t="right"}return t}function yc(e){var t="";switch(e){case"Wrap":t="breakall";break;case"NoWrap":t="keepall";break;case"WrapWithOverflow":t="normal";break;case"LineThrough":t="line-through"}return t}function bc(e,t){window.measureElement.style.visibility="visible";var i=kl(window.measureElement.children[2])[1];i.textContent=e,nc(i,"font-size:"+t.fontSize+"px; font-family:"+t.fontFamily+";font-weight:"+(t.bold?"bold":"normal"));var n=i.getBBox().width;return window.measureElement.style.visibility="hidden",n}function wc(e,t){return(e+t)/2}function xc(e,t){var i,n=0,r=0,o=0,a="";i=e.length;var s=0;do{o>0&&(n=r),r=Math.floor(wc(n,i)),o=bc(a+=e.substr(n,r),t)}while(o<=t.width);for(a=a.substr(0,n),s=n;s<i;s++)if((o=bc(a+=e[s],t))>=t.width){e=e.substr(0,a.length-1);break}return"Ellipsis"===t.textOverflow?(e=e.substr(0,e.length-3),e+="..."):e=e.substr(0,e.length),e}function Oc(e,t){if("NoWrap"===t&&"PreserveAll"===e)return"pre";var i="";switch(e){case"CollapseAll":i="nowrap";break;case"CollapseSpace":i="pre-line";break;case"PreserveAll":i="pre-wrap"}return i}function Sc(e,t){var i=W();q(i,t,0,0);var n=F(i,{x:0,y:0}),r=F(i,{x:e.width,y:0}),o=F(i,{x:0,y:e.height}),a=F(i,{x:e.width,y:e.height}),s=Math.min(n.x,r.x,o.x,a.x),l=Math.min(n.y,r.y,o.y,a.y),c=Math.max(n.x,r.x,o.x,a.x),d=Math.max(n.y,r.y,o.y,a.y);return new P(c-s,d-l)}function Cc(e,t,i,n){if(0!==e){var r=W();return q(r,e,t,i),F(r,n)}return n}function Pc(e){return void 0!==e&&"string"===typeof e&&(e=Object(r.H)(e,window)),e}var jc=function(){function e(){}return e.getContext=function(e){return e.getContext("2d")},e.setCanvasSize=function(e,t,i){e&&(e.setAttribute("width",t.toString()),e.setAttribute("height",i.toString()))},e.prototype.renderGradient=function(e,t,i,n){var r,o,a;if("None"!==e.gradient.type){for(var s=0;s<e.gradient.stops.length;s++)r=void 0!==r?e.gradient.stops[s].offset:Math.max(r,e.gradient.stops[s].offset),o=void 0!==o?e.gradient.stops[s].offset:Math.min(o,e.gradient.stops[s].offset);if("Linear"===e.gradient.type){var l=e.gradient;a=t.createLinearGradient(i+l.x1,n+l.y1,i+l.x2,n+l.y2)}else{var c=e.gradient;a=t.createRadialGradient(i+c.fx,n+c.fy,0,i+c.cx,n+c.cy,c.r)}for(s=0;s<e.gradient.stops.length;s++){var d=e.gradient.stops[s],h=o<0?(r+d.offset)/(2*r):d.offset/r;a.addColorStop(h,d.color)}t.fillStyle=a}return t},e.prototype.renderShadow=function(t,i,n){void 0===n&&(n=null);var r=e.getContext(i);r.save(),r.beginPath(),r.strokeStyle=r.fillStyle=t.shadow.color,r.globalAlpha=t.shadow.opacity;var o=E.transform({x:0,y:0},t.shadow.angle,t.shadow.distance),a=t.x+o.x,s=t.y+o.y,l=a+t.width*t.pivotX,c=s+t.height*t.pivotY;this.rotateContext(i,t.angle,l,c),n?(r.translate(a,s),this.renderPath(i,t,n),r.translate(-a,-s)):(r.rect(a,s,t.width,t.height),r.fillRect(a,s,t.width,t.height)),r.fill(),r.stroke(),r.closePath(),r.restore()},e.createCanvas=function(e,t,i){var n=Zl("canvas",{id:e});return this.setCanvasSize(n,t,i),n},e.prototype.setStyle=function(t,i){var n=e.getContext(t);"none"===i.fill&&(i.fill="transparent"),"none"===i.stroke&&(i.stroke="transparent"),n.strokeStyle=i.stroke,n.lineWidth=i.strokeWidth,0===i.strokeWidth&&(n.strokeStyle="transparent"),n.globalAlpha=i.opacity;var r=[];i.dashArray&&(r=this.parseDashArray(i.dashArray)),n.setLineDash(r),i.gradient&&"None"!==i.gradient.type?this.renderGradient(i,n,0,0):n.fillStyle=i.fill},e.prototype.rotateContext=function(t,i,n,r){var o=e.getContext(t);o.translate(n,r),o.rotate(i*Math.PI/180),o.translate(-n,-r)},e.prototype.setFontStyle=function(t,i){var n=e.getContext(t),r="";i.italic&&(r+="italic "),i.bold&&(r+="bold "),r+=i.fontSize+"px ",r+=i.fontFamily,n.font=r},e.prototype.parseDashArray=function(e){for(var t=[],i=-1!==e.indexOf(" ")?" ":",",n=0,r=e.split(i);n<r.length;n++){var o=r[n];t.push(Number(o))}return t},e.prototype.drawRectangle=function(t,i){if(!0===i.visible)if(i.cornerRadius)i.data=function(e,t,i){var n,r,o,a="",s=[{x:0+e,y:0},{x:0+i-e,y:0},{x:0+i,y:0+e},{x:0+i,y:0+t-e},{x:0+i-e,y:0+t},{x:0+e,y:0+t},{x:0,y:0+t-e},{x:0,y:0+e}],l=[{x:0+i,y:0},{x:0+i,y:0+t},{x:0,y:0+t},{x:0,y:0}],c=0;for(a="M"+s[0].x+" "+s[0].y,o=0;o<s.length;o+=2)a+="L"+(n=s[o+1]).x+" "+n.y,r=s[o+2]||s[0],a+="Q"+l[c].x+" "+l[c].y+" "+r.x+" "+r.y,c++;return a}(i.cornerRadius,i.height,i.width),this.drawPath(t,i);else{var n=e.getContext(t);i.shadow&&this.renderShadow(i,t),n.save(),n.beginPath();i.cornerRadius;var r=i.x+i.width*i.pivotX,o=i.y+i.height*i.pivotY;this.rotateContext(t,i.angle,r,o),this.setStyle(t,i),n.rect(i.x,i.y,i.width,i.height),n.fillRect(i.x,i.y,i.width,i.height),n.fill(),n.stroke(),n.closePath(),n.restore()}},e.prototype.drawPath=function(t,i){var n=[];n=D(n=T(i.data)),i.shadow&&this.renderShadow(i,t,n);var r=e.getContext(t);r.save(),r.beginPath();var o=i.y+i.height*i.pivotY,a=i.x+i.width*i.pivotX;"Horizontal"===i.flip||"Vertical"===i.flip?(r.translate(i.x+i.width/2,i.y+i.height/2),r.rotate(-i.angle*Math.PI/180),r.translate(-i.x-i.width/2,-i.y-i.height/2)):this.rotateContext(t,i.angle,a,o),this.setStyle(t,i),r.translate(i.x,i.y),"Horizontal"===i.flip?(r.scale(-1,1),r.translate(-1*i.width,0)):"Vertical"===i.flip?(r.scale(1,-1),r.translate(0,-1*i.height)):"Both"===i.flip&&(r.scale(-1,-1),r.translate(-1*i.width,-1*i.height)),this.renderPath(t,i,n),r.fill(),r.translate(-i.x,-i.y),r.stroke(),r.restore()},e.prototype.renderPath=function(t,i,n){if(!0===i.visible){var r,o=e.getContext(t),a=void 0,s=void 0,l=void 0,c=void 0,d=void 0,h=void 0,p=void 0,u=void 0,f=void 0,g=n;for(p=0,u=0,f=0,r=g.length;f<r;++f){var m=g[f],v=m.command;switch("x1"in m&&(l=m.x1),"x2"in m&&(d=m.x2),"y1"in m&&(c=m.y1),"y2"in m&&(h=m.y2),"x"in m&&(p=m.x),"y"in m&&(u=m.y),v){case"M":o.moveTo(p,u),m.x=p,m.y=u;break;case"L":o.lineTo(p,u),m.x=p,m.y=u;break;case"C":o.bezierCurveTo(l,c,d,h,p,u),m.x=p,m.y=u,m.x1=l,m.y1=c,m.x2=d,m.y2=h;break;case"Q":o.quadraticCurveTo(l,c,p,u),m.x=p,m.y=u,m.x1=l,m.y1=c;break;case"A":var y={x:a,y:s},b=m.r1,w=m.r2,x=m.angle*(Math.PI/180),O=m.largeArc,S=m.sweep,C={x:p,y:u},P={x:Math.cos(x)*(y.x-C.x)/2+Math.sin(x)*(y.y-C.y)/2,y:-Math.sin(x)*(y.x-C.x)/2+Math.cos(x)*(y.y-C.y)/2},j=Math.pow(P.x,2)/Math.pow(b,2)+Math.pow(P.y,2)/Math.pow(w,2);j>1&&(b*=Math.sqrt(j),w*=Math.sqrt(j));var I=Math.pow(w,2)*Math.pow(P.x,2),E=(O===S?-1:1)*Math.sqrt((Math.pow(b,2)*Math.pow(w,2)-Math.pow(b,2)*Math.pow(P.y,2)-I)/(Math.pow(b,2)*Math.pow(P.y,2)+Math.pow(w,2)*Math.pow(P.x,2)));isNaN(E)&&(E=0);var T={x:E*b*P.y/w,y:E*-w*P.x/b},A={x:(y.x+C.x)/2+Math.cos(x)*T.x-Math.sin(x)*T.y,y:(y.y+C.y)/2+Math.sin(x)*T.x+Math.cos(x)*T.y},D=this.a([1,0],[(P.x-T.x)/b,(P.y-T.y)/w]),k=[(P.x-T.x)/b,(P.y-T.y)/w],M=[(-P.x-T.x)/b,(-P.y-T.y)/w],L=this.a(k,M);this.r(k,M)<=-1&&(L=Math.PI),this.r(k,M)>=1&&(L=0);var R=D+(S?1:-1)*(L/2);Math.cos(R),Math.sin(R);if(m.centp=A,m.xAxisRotation=x,m.rx=b,m.ry=w,m.a1=D,m.ad=L,m.sweep=S,null!=o){var z=b>w?b:w,N=b>w?1:b/w,B=b>w?w/b:1;o.save(),o.translate(A.x,A.y),o.rotate(x),o.scale(N,B),o.arc(0,0,z,D,D+L,!S),o.scale(1/N,1/B),o.rotate(-x),o.translate(-A.x,-A.y),o.restore()}break;case"Z":case"z":o.closePath(),p=a,u=s}a=p,s=u}}},e.prototype.drawText=function(t,i,n,r,o,a,s){if(i.content&&!0===i.visible){var l=e.getContext(t);l.save(),this.setStyle(t,i),a&&(i.fontSize*=a);var c=i.x+i.width*i.pivotX,d=i.y+i.height*i.pivotY;this.rotateContext(t,i.angle,c,d),this.setFontStyle(t,i);var h,p=0;h=i.childNodes;var u=i.wrapBounds;if(l.fillStyle=i.color,u){var f=this.labelAlign(i,u,h);for(p=0;p<h.length;p++){var g=h[p];g.x=ac(g,h,p,i);var m=f.x+(a?g.x*a:g.x)-u.x,v=f.y+(a?g.dy*a:g.dy)*p+.8*i.fontSize;if(u.width>i.width&&"Wrap"!==i.textOverflow&&"NoWrap"===i.textWrapping&&(g.text=xc(g.text,i)),"Clip"!==i.textOverflow&&"Ellipsis"!==i.textOverflow||"Wrap"!==i.textWrapping)l.fillText(g.text,m,v);else if(v<s.actualSize.height+s.bounds.y){if("Ellipsis"===i.textOverflow&&h[p+1]){var y=h[p+1];f.y+y.dy*(p+1)+.8*i.fontSize>s.actualSize.height+s.bounds.y&&(g.text=g.text.slice(0,g.text.length-3),g.text=g.text.concat("..."))}l.fillText(g.text,m,v)}if("Underline"===i.textDecoration||"Overline"===i.textDecoration||"LineThrough"===i.textDecoration){var b=m,w=void 0,x=m+l.measureText(g.text).width,O=void 0;switch(i.textDecoration){case"Underline":w=v+2,O=v+2;break;case"Overline":w=f.y+g.dy*p,O=f.y+g.dy*p;break;case"LineThrough":w=(v+f.y+g.dy*p)/2+2,O=(v+f.y+g.dy*p)/2+2}l.beginPath(),l.moveTo(b,w),l.lineTo(x,O),l.strokeStyle=i.color,l.lineWidth=.08*i.fontSize,l.globalAlpha=i.opacity,l.stroke()}}}l.restore()}},e.prototype.loadImage=function(e,t,i,n,r){this.rotateContext(i,t.angle,n,r);var o=new Image;o.src=t.source,this.image(e,o,t.x,t.y,t.width,t.height,t)},e.prototype.drawImage=function(t,i,n,r){var o=this;if(i.visible){var a=e.getContext(t);a.save();var s=i.x+i.width*i.pivotX,l=i.y+i.height*i.pivotY,c=new Image;c.src=i.source;var d=a.canvas.id.split("_");d[d.length-1];r?c.onload=function(){o.loadImage(a,i,t,s,l)}:this.loadImage(a,i,t,s,l),a.restore()}},e.prototype.image=function(e,t,i,n,r,o,a){e.beginPath();var s=t.width,l=t.height,c=r,d=o,h=0,p=0;if(a&&"None"!==a.alignment){var u=a.alignment.toLowerCase().substr(1,3),f=a.alignment.toLowerCase().substr(5,3);if("Slice"===a.scale){var g=function(){h=c,p=l*c/s},m=function(){h=s*d/l,p=d};c>d?(g(),d>p&&m()):c===d?s>l?m():g():(m(),c>h&&g());var v=this.getSliceOffset(u,h,c,s),y=this.getSliceOffset(f,p,d,l),b=s-v,w=l-y,x=h-v*(h/s),O=p-y*(p/l),S=Zl("canvas",{width:r.toString(),height:o.toString()});S.getContext("2d").drawImage(t,v,y,b,w,0,0,x,O),e.drawImage(S,i,n,r,o)}else if("Meet"===a.scale){var C=l/s,P=d/c;h=P>C?c:d/C,p=P>C?c*C:d,i+=this.getMeetOffset(u,h,c),n+=this.getMeetOffset(f,p,d),e.drawImage(t,0,0,s,l,i,n,h,p)}else e.drawImage(t,i,n,r,o)}else if("None"!==a.flip){var j=1,I=1;"Horizontal"!==a.flip&&"Both"!==a.flip||(i=-i,r=-r,j=-1),"Vertical"!==a.flip&&"Both"!==a.flip||(n=-n,o=-o,I=-1),e.scale(j,I),e.drawImage(t,i,n,r,o)}else e.drawImage(t,i,n,r,o);e.closePath()},e.prototype.getSliceOffset=function(e,t,i,n){switch(e){case"min":return 0;case"mid":return(t-i)/2*n/t;case"max":return(t-i)*n/t;default:return 0}},e.prototype.getMeetOffset=function(e,t,i){var n=Math.max(t,i),r=Math.min(t,i);switch(e){case"min":return 0;case"mid":return(n-r)/2;case"max":return n-r;default:return 0}},e.prototype.m=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},e.prototype.r=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(this.m(e)*this.m(t))},e.prototype.a=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(this.r(e,t))},e.prototype.labelAlign=function(e,t,i){var n=new P(t.width,i.length*(1.2*e.fontSize)),r={x:0,y:0},o=e.x,a=e.y,s=.5*e.width,l=.5*e.height;return"left"===e.textAlign?s=0:"center"===e.textAlign?s=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)&&"NoWrap"===e.textWrapping?0:.5*e.width:"right"===e.textAlign&&(s=1*e.width),r.x=o+s+(t?t.x:0),r.y=a+l-n.height/2,r},e}(),Ic=function(){function e(){}return e.prototype.renderShadow=function(e,t,i,n){void 0===i&&(i=null);var r,o,a=E.transform({x:0,y:0},e.shadow.angle,e.shadow.distance),s=e.x+a.x,l=e.y+a.y;e.width,e.pivotX,e.height,e.pivotY;n&&(o=n.getElementById(t.id+"_shadow")),o||(r=i?"path":"rect",o=document.createElementNS("http://www.w3.org/2000/svg",r),t.appendChild(o));var c={id:t.id+"_shadow",fill:e.shadow.color,stroke:e.shadow.color,opacity:e.shadow.opacity.toString(),transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")translate("+(e.x+a.x)+","+(e.y+a.y)+")"};if(n){var d=n.getElementById(t.id);d&&d.insertBefore(o,d.firstChild)}ic(o,c),i?i&&this.renderPath(o,e,i):ic(o,{width:e.width,height:e.height})},e.prototype.parseDashArray=function(e){return[]},e.prototype.drawRectangle=function(e,t,i,n,r,o,a){var s,l,c;t.shadow&&!n&&this.renderShadow(t,e,void 0,o),s=t.id===e.id?t.id+"_container":t.id,o&&(l=o.getElementById(s)),l&&!r||(l=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(l)),o&&!t.shadow&&(c=o.getElementById(t.id+"_groupElement_shadow"))&&c.parentNode.removeChild(c);var d={id:s,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),visibility:t.visible?"visible":"hidden",transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",rx:t.cornerRadius||0,ry:t.cornerRadius||0,opacity:t.opacity,"aria-label":a||""};t.class&&(d.class=t.class);a||(d["pointer-events"]="none"),ic(l,d),this.setSvgStyle(l,t,i)},e.prototype.updateSelectionRegion=function(e,t){var i,n;i=e.parentNode.getElementById(t.id),n={id:t.id,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",class:"e-diagram-selected-region"},i||(i=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(i)),this.setSvgStyle(i,t),ic(i,n)},e.prototype.createGElement=function(e,t){return Jl(e,t)},e.prototype.drawLine=function(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","line");this.setSvgStyle(i,t);var n=t.x+t.width*t.pivotX,r=t.y+t.height*t.pivotY,o={id:t.id,x1:t.startPoint.x+t.x,y1:t.startPoint.y+t.y,x2:t.endPoint.x+t.x,y2:t.endPoint.y+t.y,stroke:t.stroke,"stroke-width":t.strokeWidth.toString(),opacity:t.opacity.toString(),transform:"rotate("+t.angle+" "+n+" "+r+")",visibility:t.visible?"visible":"hidden"};t.class&&(o.class=t.class),ic(i,o),e.appendChild(i)},e.prototype.drawCircle=function(e,t,i,n){var r=document.createElementNS("http://www.w3.org/2000/svg","circle");this.setSvgStyle(r,t);var o=t.class||"";i||(o+=" e-disabled");var a={id:t.id,cx:t.centerX,cy:t.centerY,r:t.radius,visibility:t.visible?"visible":"hidden",class:o,"aria-label":n?n["aria-label"]:""};r.style.display=t.visible?"block":"none",ic(r,a),e.appendChild(r)},e.prototype.drawPath=function(e,t,i,n,r,o){var a=Math.floor(10*Math.random()+1);e.id,a.toString();var s,l,c=[];c=D(c=T(t.data)),t.shadow&&this.renderShadow(t,e,c,r),r&&!t.shadow&&(s=r.getElementById(t.id+"_groupElement_shadow"))&&s.parentNode.removeChild(s),r&&(l=r.getElementById(t.id)),l&&!n||(l=document.createElementNS("http://www.w3.org/2000/svg","path"),e.appendChild(l)),this.renderPath(l,t,c);var d={id:t.id,transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")translate("+t.x+","+t.y+")",visibility:t.visible?"visible":"hidden",opacity:t.opacity,"aria-label":o||""};t.class&&(d.class=t.class),ic(l,d),this.setSvgStyle(l,t,i)},e.prototype.renderPath=function(e,t,i){var n,r,o,a,s,l,c,d,h=i,p="";for(s=0,l=0,d=0,c=h.length;d<c;++d){var u=h[d],f=u.command;switch("x1"in u&&(n=u.x1),"x2"in u&&(o=u.x2),"y1"in u&&(r=u.y1),"y2"in u&&(a=u.y2),"x"in u&&(s=u.x),"y"in u&&(l=u.y),f){case"M":p=p+"M"+s.toString()+","+l.toString()+" ";break;case"L":p=p+"L"+s.toString()+","+l.toString()+" ";break;case"C":p=p+"C"+n.toString()+","+r.toString()+","+o.toString()+","+a.toString()+",",p+=s.toString()+","+l.toString()+" ";break;case"Q":p=p+"Q"+n.toString()+","+r.toString()+","+s.toString()+","+l.toString()+" ";break;case"A":p=p+"A"+u.r1.toString()+","+u.r2.toString()+","+u.angle.toString()+",",p+=u.largeArc.toString()+","+u.sweep+","+s.toString()+","+l.toString()+" ";break;case"Z":case"z":p+="Z "}}e.setAttribute("d",p)},e.prototype.setSvgFontStyle=function(e,t){e.style.fontStyle=t.italic?"italic":"normal",e.style.fontWeight=t.bold?"bold":"normal",e.style.fontSize=t.fontSize.toString()+"px",e.style.fontFamily=t.fontFamily},e.prototype.drawText=function(e,t,i,n,r,o,a){if(void 0!==t.content){var s=void 0,l=void 0,c=void 0,d=void 0,h=void 0,p=void 0,u=0,f=0,g=0,m=void 0;if(i&&(m=i.getElementById(t.id+"_text")),m){if(t.doWrap)for(;m.firstChild;)m.removeChild(m.firstChild)}else t.doWrap=!0,m=document.createElementNS("http://www.w3.org/2000/svg","text"),"pre-wrap"===t.whiteSpace&&m.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.appendChild(m);var v=t.x+t.width*t.pivotX,y=t.y+t.height*t.pivotY,b=0;if(t.doWrap||"Wrap"!==t.textOverflow){var w=document.getElementById(t.id+"_text");for(w&&(w.innerHTML=""),this.setSvgStyle(m,t,r),this.setSvgFontStyle(m,t),s=document.createTextNode(t.content),l=t.childNodes,c=t.wrapBounds,d=this.svgLabelAlign(t,c,l),c.width>t.width&&"Wrap"!==t.textOverflow&&"NoWrap"===t.textWrapping&&(l[0].text=xc(t.content,t)),g=0;g<l.length;g++)if(p=document.createElementNS("http://www.w3.org/2000/svg","tspan"),s=document.createTextNode(l[g].text),(h=l[g]).x=ac(h,l,g,t),u=d.x+h.x-c.x,f=d.y+h.dy*g+.8*t.fontSize,"Clip"!==t.textOverflow&&"Ellipsis"!==t.textOverflow||"WrapWithOverflow"!==t.textWrapping&&"Wrap"!==t.textWrapping||!a)this.setText(m,p,h,s,u,f);else{var x=t.isHorizontalLane?a.actualSize.width:a.actualSize.height;if(!(f<x))break;if("Ellipsis"===t.textOverflow&&l[g+1]){var O=l[g+1];d.y+O.dy*(g+1)+.8*t.fontSize>x&&(h.text=h.text.slice(0,h.text.length-3),h.text=h.text.concat("..."),s.data=h.text)}this.setText(m,p,h,s,u,f),b+=h.dy}}b&&t.isHorizontalLane&&(v=t.parentOffsetX+t.pivotX,y=t.parentOffsetY+t.pivotY,t.y=t.parentOffsetY-b*t.pivotY+.5),t.textDecoration&&"LineThrough"===t.textDecoration&&(t.textDecoration=yc(t.textDecoration)),ic(m,{id:t.id+"_text",fill:t.color,visibility:t.visible?"visible":"hidden","text-decoration":t.textDecoration,transform:"rotate("+t.angle+","+v+","+y+")translate("+t.x+","+t.y+")",opacity:t.opacity,"aria-label":n||""})}},e.prototype.setText=function(e,t,i,n,r,o){ic(t,{x:r.toString(),y:o.toString()}),e.setAttribute("fill",i.text),t.appendChild(n),e.appendChild(t)},e.prototype.drawImage=function(e,t,i,n){var o;t.id;i&&(o=i.getElementById(t.id+"image")),o||(o=document.createElementNS("http://www.w3.org/2000/svg","image"),e.appendChild(o));var a=new Image;a.src=t.source;var s="None"!==t.scale?t.scale:"";Object(r.I)()&&"None"===t.alignment&&"Stretch"===s&&(s="");var l=t.alignment,c=l.charAt(0).toLowerCase()+l.slice(1);s&&(c+=" "+s.charAt(0).toLowerCase()+s.slice(1)),ic(o,{id:t.id+"image",x:t.x.toString(),y:t.y.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",width:t.width.toString(),visibility:t.visible?"visible":"hidden",height:t.height.toString(),preserveAspectRatio:c,opacity:(t.opacity||1).toString()}),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a.src.toString())},e.prototype.drawHTMLContent=function(e,t,i,n,r){var o,a;if(t){var s=void 0,l=void 0,c=void 0;for(s=0;s<t.childNodes.length;s++)for(c=t.childNodes[s],l=0;l<c.childNodes.length;l++)if(c.childNodes[l].id===e.id+"_html_element"){o=c.childNodes[l];break}}if(!o){if(!(a=t.querySelector("#"+e.id+"_html_element")||t.querySelector("#"+e.nodeId+"_html_element")))a=Zl("div",{id:e.nodeId+"_html_element",class:"foreign-object"});o=Zl("div",{id:e.id+"_html_element",class:"foreign-object"}),e.isTemplate?o.appendChild(e.template):o.appendChild(e.template.cloneNode(!0)),void 0!==r&&t.childNodes.length>r&&t.insertBefore(o,t.childNodes[r]),a.appendChild(o),t.appendChild(a)}var d=hc(e).topLeft;o.setAttribute("style","height:"+e.actualSize.height+"px; width:"+e.actualSize.width+"px;left:"+d.x+"px; top:"+d.y+"px;position:absolute;transform:rotate("+(e.rotateAngle+e.parentTransform)+"deg);pointer-events:"+(n?"all":"none")+";visibility:"+(e.visible?"visible":"hidden")+";opacity:"+e.style.opacity+";")},e.prototype.drawNativeContent=function(e,t,i,n,r){var o,a;r&&(o=r.getElementById(e.id+"_native_element"),a=r.getElementById(e.id+"_clip")),o||((o=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id",e.id+"_native_element"),o.appendChild(e.template.cloneNode(!0)),t.appendChild(o)),a&&o.removeChild(a),o.setAttribute("style","visibility:"+(e.visible?"visible":"hidden")+";opacity:"+e.style.opacity+";"),this.setNativTransform(e,o,i,n),"Slice"===e.scale&&this.drawClipPath(e,o,i,n,r),ic(o,e.description?{"aria-label":e.description}:{})},e.prototype.setNativTransform=function(e,t,i,n){var r=0!==e.contentSize.width?e.contentSize.width:1,o=0!==e.contentSize.height?e.contentSize.height:1,a=e.templatePosition.x*n/r,s=e.templatePosition.y*i/o;t.setAttribute("transform","rotate("+e.parentTransform+","+e.offsetX+","+e.offsetY+") translate("+(e.offsetX-a-n*e.pivot.x)+","+(e.offsetY-s-i*e.pivot.y)+") scale("+n/r+","+i/o+")")},e.prototype.drawClipPath=function(e,t,i,n,r){var o=e.contentSize.width,a=e.contentSize.height,s=(e.actualSize.width,e.actualSize.height,e.width/(n/o)),l=e.height/(i/a),c=e.templatePosition.x+(e.width>=e.height?0:(o-s)/2),d=e.templatePosition.y+(e.height>=e.width?0:(a-l)/2),h=r.getElementById(e.id+"_clip");(h=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id",e.id+"_clip"),t.appendChild(h);var p=r.getElementById(e.id+"_clip_rect");return p=document.createElementNS("http://www.w3.org/2000/svg","rect"),h.appendChild(p),ic(p,{id:e.id+"_clip_rect",width:s.toString(),height:l.toString(),x:c.toString(),y:d.toString()}),Rs()?t.setAttribute("clip-path","url("+location.protocol+"//"+location.host+location.pathname+"#"+e.id+"_clip)"):t.setAttribute("clip-path","url(#"+e.id+"_clip)"),t},e.prototype.renderGradient=function(e,t,i){var n,r,o,a,s,l=Vl(i),c=l.getElementById(i+"gradient_pattern");if(c||(c=Jl("defs",{id:i+"gradient_pattern"}),l.insertBefore(c,l.firstChild)),ss(t.id),"None"!==e.gradient.type){for(var d=0;d<e.gradient.stops.length;d++)n=n?Math.max(n,e.gradient.stops[d].offset):e.gradient.stops[d].offset,r=r?Math.min(r,e.gradient.stops[d].offset):e.gradient.stops[d].offset;"Linear"===e.gradient.type?((s=e.gradient).id=t.id+"_linear",o=this.createLinearGradient(s),c.appendChild(o)):((a=e.gradient).id=t.id+"_radial",o=this.createRadialGradient(a),c.appendChild(o));for(d=0;d<e.gradient.stops.length;d++){var h=e.gradient.stops[d],p=r<0?(n+h.offset)/(2*n):h.offset/n,u=document.createElementNS("http://www.w3.org/2000/svg","stop");ic(u,{offset:p.toString(),style:"stop-color:"+h.color}),o.appendChild(u)}}return o},e.prototype.createLinearGradient=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");return ic(t,{id:e.id,x1:e.x1+"%",y1:e.y1+"%",x2:e.x2+"%",y2:e.y2+"%"}),t},e.prototype.createRadialGradient=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","radialGradient");return ic(t,{id:e.id,cx:e.cx+"%",cy:e.cy+"%",r:e.r+"%",fx:e.fx+"%",fy:e.fy+"%"}),t},e.prototype.setSvgStyle=function(e,t,i){if(t.canApplyStyle||void 0===t.canApplyStyle){"none"===t.fill&&(t.fill="transparent"),"none"===t.stroke&&(t.stroke="transparent");var n=[],r=void 0;if(t.dashArray)n=(new jc).parseDashArray(t.dashArray);if(t.gradient&&"None"!==t.gradient.type&&i){var o=this.renderGradient(t,e,i);r=Rs()?"url("+location.protocol+"//"+location.host+location.pathname+"#"+o.id+")":"url(#"+o.id+")"}else r=t.fill;t.stroke&&e.setAttribute("stroke",t.stroke),void 0!==t.strokeWidth&&null!==t.strokeWidth&&e.setAttribute("stroke-width",t.strokeWidth.toString()),n&&e.setAttribute("stroke-dasharray",n.toString()||"none"),r&&e.setAttribute("fill",r)}},e.prototype.svgLabelAlign=function(e,t,i){var n=new P(t.width,i.length*(1.2*e.fontSize)),r={x:0,y:0},o=.5*e.width,a=.5*e.height;return"left"===e.textAlign?o=0:"center"===e.textAlign?o=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)&&"NoWrap"===e.textWrapping?0:.5*e.width:"right"===e.textAlign&&(o=1*e.width),r.x=0+o+(t?t.x:0),r.y=1.2+a-n.height/2,r},e}(),Ec=function(){function e(e,t,i){this.renderer=null,this.isSvgMode=!0,this.transform={x:0,y:0},this.diagramId=e,this.element=Nl(this.diagramId),this.svgRenderer=t,this.isSvgMode=i,this.renderer=i?new Ic:new jc}return e.prototype.setCursor=function(e,t){e.style.cursor=t},e.prototype.setLayers=function(){this.iconSvgLayer=this.element.getElementsByClassName("e-ports-expand-layer")[0],this.adornerSvgLayer=this.element.getElementsByClassName("e-adorner-layer")[0],this.nativeSvgLayer=this.element.getElementsByClassName("e-native-layer")[0],this.diagramSvgLayer=this.element.getElementsByClassName("e-diagram-layer")[0]},e.prototype.getAdornerLayer=function(){return Wl(this.diagramId)},e.prototype.getParentSvg=function(e,t,i){return this.diagramId&&e&&e.id?e.id.split("_icon_content").length>1||e.id.split("_nodeport").length>1||e.elementActions&re.ElementIsPort?this.iconSvgLayer:t&&"selector"===t?this.adornerSvgLayer:e instanceof Ge?this.nativeSvgLayer:this.diagramSvgLayer:i},e.prototype.getParentElement=function(e,t,i,n){var r=t;if(i&&this.diagramId&&e&&e.id){e.id.split("_icon_content").length>1?(r=i.getElementById(this.diagramId+"_diagramExpander"),t=null):e.id.split("_nodeport").length>1?r=i.getElementById(this.diagramId+"_diagramPorts"):e instanceof Ge?(r=i.getElementById(this.diagramId+"_nativeLayer"),t=null):e.elementActions&re.ElementIsPort?(r=i.getElementById(this.diagramId+"_diagramPorts"),t=null):r=i.getElementById(this.diagramId+"_diagramLayer");var o=this.getGroupElement(e,t||r,n);r=o.g,o.svg&&(i=o.svg)}return{g:r,svg:i}},e.prototype.getGroupElement=function(e,t,i){var n,r,o=this.getParentSvg(e);if(t&&o){if(o&&!(n=o.getElementById(e.id+"_groupElement"))&&o!==this.nativeSvgLayer){var a=this.nativeSvgLayer;n=a.getElementById(e.id+"_groupElement"),r=a}n||(n=this.svgRenderer.createGElement("g",{id:e.id+"_groupElement"}),void 0!==i&&t.childNodes.length>i?t.insertBefore(n,t.childNodes[i]):t.appendChild(n))}return{g:n,svg:r}},e.prototype.renderElement=function(e,t,i,n,r,o,a,s,l){e instanceof ze?(!1,this.renderContainer(e,t,i,n,r,o,a,s,l)):e instanceof Ye?this.renderImageElement(e,t,n,r,a):e instanceof Ue?this.renderPathElement(e,t,n,r,a,l):e instanceof Be?this.renderTextElement(e,t,n,r,a):e instanceof Ge?this.renderNativeElement(e,t,n,r,a):e instanceof dr?this.renderHTMLElement(e,t,i,n,r,a,s):this.renderRect(e,t,n,r,l)},e.prototype.drawSelectionRectangle=function(e,t,i,n,r,o){e=(e+o.tx)*o.scale,t=(t+o.ty)*o.scale;var a={width:i*o.scale,height:n*o.scale,x:e+.5,y:t+.5,fill:"transparent",stroke:"gray",angle:0,pivotX:.5,pivotY:.5,strokeWidth:1,dashArray:"6 3",opacity:1,visible:!0,id:r.id+"_selected_region"},s=this.getAdornerLayer();this.svgRenderer.updateSelectionRegion(s,a)},e.prototype.renderHighlighter=function(e,t,i){var n=e.actualSize.width||2,r=e.actualSize.height||2,o=e.offsetX-n*e.pivot.x,a=e.offsetY-r*e.pivot.y;o=(o+i.tx)*i.scale,a=(a+i.ty)*i.scale;var s={width:n*i.scale,height:r*i.scale,x:o,y:a,fill:"transparent",stroke:"#8CC63F",angle:e.rotateAngle,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:4,dashArray:"",opacity:1,cornerRadius:0,visible:!0,id:t.id+"_highlighter",class:"e-diagram-highlighter"};this.svgRenderer.drawRectangle(t,s,this.diagramId,void 0,void 0,t)},e.prototype.renderStackHighlighter=function(e,t,i,n,r,o,a){var s,l=e.actualSize.width||2,c=e.offsetX-l*e.pivot.x,d=e.actualSize.height||2,h=e.offsetY-d*e.pivot.y;c=(c+i.tx)*i.scale;var p=e.bounds,u="";if(h=(h+i.ty)*i.scale,n)if(o){s="M 0 0 L "+((m=l*i.scale)+2)+" 0 Z";var f=p.x,g=p.y;f=e.actualSize.width/Number(p.width?p.width:1)*i.scale,g=e.actualSize.height/Number(p.height?p.height:1)*i.scale;u=k(R(T("M7,4 L8,4 8,7 11,7 11,8 8,8 8,11 7,11 7,8 4,8 4,7 7,7 z M7.5,0.99999994C3.9160004,1 1,3.9160004 0.99999994,7.5 1,11.084 3.9160004,14 7.5,14 11.084,14 14,11.084 14,7.5 14,3.9160004 11.084,1 7.5,0.99999994 z M7.5,0 C11.636002,0 15,3.3639984 15,7.5 15,11.636002 11.636002,15 7.5,15 3.3640003,15 0,11.636002 0,7.5 0,3.3639984 3.3640003,0 7.5,0 z")),f+m+2,g-8,!1,p.x,p.y,0,0),r.y>=e.offsetY&&(h+=d)}else{var m;a&&r.y>=e.offsetY&&(h+=d),s="M -10 -10 L 0 0 Z M -10 10 L 0 0 Z M 0 0 L "+(m=l*i.scale)+" 0 Z M "+m+" 0 L "+(m+10)+" 10 Z L "+(m+10)+" -10 Z"}else s="M 10 -10 L 0 0 Z M -10 -10 L 0 0 Z M 0 0 L 0 "+(m=d*i.scale)+" Z M 0  "+m+" L -10  "+(m+10)+" Z L 10  "+(m+10)+" Z",r.x>=e.offsetX&&(c+=l);var v={data:s+u,width:l*i.scale,height:d*i.scale,x:c,y:h,fill:"transparent",stroke:"#8CC63F",angle:e.rotateAngle,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:1,dashArray:"",opacity:1,visible:!0,id:t.id+"_stack_highlighter",class:"e-diagram-highlighter"};this.svgRenderer.drawPath(t,v,this.diagramId)},e.prototype.drawLine=function(e,t){this.svgRenderer.drawLine(e,t)},e.prototype.drawPath=function(e,t){this.svgRenderer.drawPath(e,t,this.diagramId)},e.prototype.renderResizeHandle=function(e,t,i,n,r,o,a,s,l,c){var d=e.offsetX-e.actualSize.width*e.pivot.x,h=e.offsetY-e.actualSize.height*e.pivot.y,p=e.actualSize.height,u=e.actualSize.width;!c&&i&oe.Rotate&&xo(this.rendererActions)&&!Oo(this.rendererActions)&&(this.renderPivotLine(e,t,o,r,a),this.renderRotateThumb(e,t,o,r,a)),this.renderBorder(e,t,o,s,l,c);var f=e.actualSize.width*n,g=e.actualSize.height*n;l||!xo(this.rendererActions)||Oo(this.rendererActions)||(f>=40&&g>=40&&(r&$.ResizeNorthWest&&this.renderCircularHandle("resizeNorthWest",e,d,h,t,ps(r,"ResizeNorthWest"),i&oe.ResizeNorthWest,o,void 0,a,{"aria-label":"Thumb to resize the selected object on top left side direction"},void 0,"e-diagram-resize-handle e-northwest"),r&$.ResizeNorthEast&&this.renderCircularHandle("resizeNorthEast",e,d+u,h,t,ps(r,"ResizeNorthEast"),i&oe.ResizeNorthEast,o,void 0,a,{"aria-label":"Thumb to resize the selected object on top right side direction"},void 0,"e-diagram-resize-handle e-northeast"),r&$.ResizeSouthWest&&this.renderCircularHandle("resizeSouthWest",e,d,h+p,t,ps(r,"ResizeSouthWest"),i&oe.ResizeSouthWest,o,void 0,a,{"aria-label":"Thumb to resize the selected object on bottom left side direction"},void 0,"e-diagram-resize-handle e-southwest"),r&$.ResizeSouthEast&&this.renderCircularHandle("resizeSouthEast",e,d+u,h+p,t,ps(r,"ResizeSouthEast"),i&oe.ResizeSouthEast,o,void 0,a,{"aria-label":"Thumb to resize the selected object on bottom right side direction"},void 0,"e-diagram-resize-handle e-southeast")),r&$.ResizeNorth&&this.renderCircularHandle("resizeNorth",e,d+u/2,h,t,ps(r,"ResizeNorth"),i&oe.ResizeNorth,o,void 0,a,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-diagram-resize-handle e-north"),r&$.ResizeSouth&&this.renderCircularHandle("resizeSouth",e,d+u/2,h+p,t,ps(r,"ResizeSouth"),i&oe.ResizeSouth,o,void 0,a,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-diagram-resize-handle e-south"),r&$.ResizeWest&&this.renderCircularHandle("resizeWest",e,d,h+p/2,t,ps(r,"ResizeWest"),i&oe.ResizeWest,o,void 0,a,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-diagram-resize-handle e-west"),r&$.ResizeEast&&this.renderCircularHandle("resizeEast",e,d+u,h+p/2,t,ps(r,"ResizeEast"),i&oe.ResizeEast,o,void 0,a,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-diagram-resize-handle e-east"))},e.prototype.renderEndPointHandle=function(e,t,i,n,r,o,a,s){var l,c,d=e.sourcePoint,h=e.targetPoint,p=e.wrapper;if(this.renderCircularHandle("connectorSourceThumb",p,d.x,d.y,t,ps(n,"ConnectorSourceThumb"),i&oe.ConnectorSource,r,o,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend"),this.renderCircularHandle("connectorTargetThumb",p,h.x,h.y,t,ps(n,"ConnectorTargetThumb"),i&oe.ConnectorTarget,r,a,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend"),s)if(("Straight"===e.type||"Bezier"===e.type)&&e.segments.length>0)for(l=0;l<e.segments.length-1;l++)c=e.segments[l],this.renderCircularHandle("segementThumb_"+(l+1),p,c.point.x,c.point.y,t,!0,i&oe.ConnectorSource,r,o,null,null,l);else for(l=0;l<e.segments.length;l++){var u=e.segments[l];this.renderOrthogonalThumbs("orthoThumb_"+(l+1),p,u,t,ps(n,"ConnectorSourceThumb"),r)}if("Bezier"===e.type)for(l=0;l<e.segments.length;l++){var f=e.segments[l],g=E.isEmptyPoint(f.point1)?f.bezierPoint1:f.point1;this.renderCircularHandle("bezierPoint_"+(l+1)+"_1",p,g.x,g.y,t,ps(n,"ConnectorSourceThumb"),i&oe.ConnectorSource,r,void 0,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-bezier-handle e-source"),ps(n,"ConnectorSourceThumb")&&this.renderBezierLine("bezierLine_"+(l+1)+"_1",p,t,f.points[0],E.isEmptyPoint(f.point1)?f.bezierPoint1:f.point1,r),g=E.isEmptyPoint(f.point2)?f.bezierPoint2:f.point2,this.renderCircularHandle("bezierPoint_"+(l+1)+"_2",p,g.x,g.y,t,ps(n,"ConnectorTargetThumb"),i&oe.ConnectorTarget,r,void 0,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-bezier-handle e-target"),ps(n,"ConnectorTargetThumb")&&this.renderBezierLine("bezierLine_"+(l+1)+"_2",p,t,f.points[1],E.isEmptyPoint(f.point2)?f.bezierPoint2:f.point2,r)}},e.prototype.renderOrthogonalThumbs=function(e,t,i,n,r,o){var a,s,l,c=0;for(c=0;c<i.points.length-1;c++)l=E.distancePoints(i.points[c],i.points[c+1]),a=i.points[c].y.toFixed(2)===i.points[c+1].y.toFixed(2)?"horizontal":"vertical",s=!!(l>=50&&i.allowDrag),this.renderOrthogonalThumb(e+"_"+(c+1),t,(i.points[c].x+i.points[c+1].x)/2,(i.points[c].y+i.points[c+1].y)/2,n,s,a,o)},e.prototype.renderOrthogonalThumb=function(e,t,i,n,r,o,a,s){var l,c,d;"horizontal"===a?(l="M0,7 L15,0 L30,7 L15,14 z",c=-15,d=-7):(l="M7,0 L0,15 L7,30 L14,15 z",c=-7,d=-15);var h={x:(i+s.tx)*s.scale+c,y:(n+s.ty)*s.scale+d,angle:0,fill:"#e2e2e2",stroke:"black",strokeWidth:1,dashArray:"",data:l,width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:o,id:e};this.svgRenderer.drawPath(r,h,this.diagramId)},e.prototype.renderPivotLine=function(e,t,i,n,r){var o=e,a=!!(n&$.Rotate);r&&(a=!1);var s=this.getBaseAttributes(o,i);s.fill="None",s.stroke="black",s.strokeWidth=1,s.dashArray="2,3",s.visible=a;var l=i.scale;s.x*=l,s.y*=l,s.width*=l,s.height*=l,s.id="pivotLine",s.class="e-diagram-pivot-line";var c={x:o.actualSize.width*o.pivot.x*l,y:-20},d={x:o.actualSize.width*o.pivot.x*l,y:0};s.startPoint=c,s.endPoint=d,this.svgRenderer.drawLine(t,s)},e.prototype.renderBezierLine=function(e,t,i,n,r,o){var a=this.getBaseAttributes(t,o);a.id=e,a.stroke="black",a.strokeWidth=1,a.dashArray="3,3",a.fill="None",a.class="e-diagram-bezier-line",a.x=0,a.y=0;var s=o.scale,l={x:(n.x+o.tx)*s,y:(n.y+o.ty)*s},c={x:(r.x+o.tx)*s,y:(r.y+o.ty)*s};a.startPoint=l,a.endPoint=c,this.svgRenderer.drawLine(i,a)},e.prototype.renderCircularHandle=function(e,t,i,n,r,o,a,s,l,c,d,h,p){var u=t,f=7,g={x:i,y:n};if(0!==u.rotateAngle||0!==u.parentTransform){var m=W();q(m,u.rotateAngle+u.parentTransform,u.offsetX,u.offsetY),g=F(m,g)}var v=this.getBaseAttributes(u);v.stroke="black",v.strokeWidth=1,void 0!==h?(f=5,v.id="segmentEnd_"+h,v.fill="#e2e2e2"):(f=7,v.fill=l?"#8CC63F":"white"),v.centerX=(g.x+s.tx)*s.scale,v.centerY=(g.y+s.ty)*s.scale,v.radius=f,v.angle=0,v.id=e,v.visible=o,v.class=p,l&&(v.class+=" e-connected"),c&&(v.visible=!1),this.svgRenderer.drawCircle(r,v,a,d)},e.prototype.renderBorder=function(e,t,i,n,r,o){var a=e,s=this.getBaseAttributes(a,i);s.x*=i.scale,s.y*=i.scale,s.width*=i.scale,s.height*=i.scale,s.fill="transparent",s.stroke="#097F7F",s.strokeWidth=1.2,s.gradient=null,s.dashArray="6,3",s.class="e-diagram-border",o&&(s.class+=" e-diagram-lane"),s.id="borderRect",s.id=this.rendererActions&ue.DrawSelectorBorder?"borderRect_symbol":"borderRect",n||(s.class+=" e-disabled"),r&&(s.class+=" e-thick-border"),s.cornerRadius=0;var l=this.getParentSvg(e,"selector");this.svgRenderer.drawRectangle(t,s,this.diagramId,void 0,!0,l)},e.prototype.renderUserHandler=function(e,t,i,n){for(var r,o=e.wrapper,a=0,s=e.userHandles;a<s.length;a++){var l=s[a];r=!0,(l.disableConnectors&&e.connectors.length>0||l.disableNodes&&e.nodes.length>0)&&(r=!1);var c=document.getElementById(l.name+"_template_hiddenUserHandle");c&&(l.template=c.childNodes[0].cloneNode(!0));var d=void 0;if((d=ds(e,l,i)).x=(d.x+i.tx)*i.scale,d.y=(d.y+i.ty)*i.scale,l.visible&&(l.visible=!!(e.constraints&$.UserHandle)),r)if(l.pathData){var h=l.pathData?l.pathData:l.content,p=this.getBaseAttributes(o);p.id=l.name+"_userhandle",p.fill=l.backgroundColor,p.stroke=l.borderColor,p.strokeWidth=l.borderWidth,p.centerX=d.x,p.centerY=d.y,p.radius=.5*l.size,p.class="e-diagram-userhandle-circle",p.angle=0,p.visible=l.visible,p.opacity=1,this.svgRenderer.drawCircle(t,p,1,{"aria-label":l.name+"user handle"});var u=[];u=R(u=T(h));var f=Ml(h),g=k(u,(l.size-.45*l.size)/f.width,(l.size-.45*l.size)/f.height,!0,f.x,f.y,0,0);f=Ml(g);var m={x:d.x-f.width/2,y:d.y-f.height/2,angle:0,id:"",class:"e-diagram-userhandle-path",fill:l.pathColor,stroke:l.backgroundColor,strokeWidth:.5,dashArray:"",data:g,width:l.size-5,height:l.size-5,pivotX:0,pivotY:0,opacity:1,visible:l.visible};this.svgRenderer.drawPath(t,m,this.diagramId,void 0,void 0,{"aria-label":l.name+"user handle"})}else if(l.content){var v=void 0;(v=new Ge(l.name,this.diagramId)).content=l.content,v.offsetX=d.x,v.offsetY=d.y,v.id=l.name+"_shape",v.horizontalAlignment="Center",v.verticalAlignment="Center",v.visible=l.visible,v.setOffsetWithRespectToBounds(d.x,d.y,"Fraction"),v.relativeMode="Object",v.description=l.name||"User handle",v.measure(new P(l.size,l.size)),v.arrange(v.desiredSize),this.svgRenderer.drawNativeContent(v,t,l.size,l.size,this.adornerSvgLayer)}else if(l.source){var y=new Ye;(m=this.getBaseAttributes(y,i)).width=l.size,m.height=l.size,m.x=d.x-l.size/2,m.y=d.y-l.size/2,m.sourceWidth=l.size,m.sourceHeight=l.size,m.alignment=y.imageAlign,m.source=l.source,m.scale=y.imageScale,m.visible=l.visible,m.description=l.name||"User handle",m.id=l.name+"_",this.renderer.drawImage(t,m,this.adornerSvgLayer,!1)}else{var b=void 0;(b=new dr(l.name,this.diagramId)).offsetX=d.x,b.offsetY=d.y,b.id=l.name+"_shape",b.visible=l.visible,b.relativeMode="Object",b.template=l.template,b.measure(new P(l.size,l.size)),b.arrange(b.desiredSize),this.svgRenderer.drawHTMLContent(b,n,void 0,!0,void 0)}}},e.prototype.renderRotateThumb=function(e,t,i,n,r){new Ue;var o,a=new P;a.width=18,a.height=16;var s=e.offsetY-e.actualSize.height*e.pivot.y,l=e.offsetX-e.actualSize.width*e.pivot.x,c=!!(n&$.Rotate);r&&(c=!1);var d=l+e.pivot.x*e.actualSize.width,h=s;if(d=(d+i.tx)*i.scale,h=(h+i.ty)*i.scale,o={x:d-.5*a.width,y:h-30-.5*a.height},0!==e.rotateAngle||0!==e.parentTransform){var p=W();q(p,e.rotateAngle+e.parentTransform,(i.tx+e.offsetX)*i.scale,(i.ty+e.offsetY)*i.scale),o=F(p,o)}var u={x:o.x,y:o.y,angle:e.rotateAngle+e.parentTransform,fill:"#231f20",stroke:"black",strokeWidth:.5,dashArray:"",data:"M 16.856144362449648 10.238890446662904 L 18.000144362449646 3.437890446662903L 15.811144362449646 4.254890446662903 C 14.837144362449646 2.5608904466629028 13.329144362449647  1.2598904466629026 11.485144362449645 0.5588904466629026 C 9.375144362449646 - 0.24510955333709716 7.071144362449646  - 0.18010955333709716 5.010144362449646 0.7438904466629028 C 2.942144362449646 1.6678904466629028 1.365144362449646 3.341890446662903 0.558144362449646 5.452890446662903 C - 0.244855637550354 7.567890446662903 - 0.17985563755035394 9.866890446662904 0.7431443624496461 11.930890446662904 C 1.6681443624496461 13.994890446662904 3.343144362449646 15.575890446662903 5.457144362449647 16.380890446662903 C 6.426144362449647 16.7518904466629 7.450144362449647 16.9348904466629 8.470144362449647 16.9348904466629 C 9.815144362449647 16.9348904466629 11.155144362449647 16.6178904466629 12.367144362449647 15.986890446662901 L 11.351144362449647 14.024890446662901 C 9.767144362449647 14.8468904466629 7.906144362449647 14.953890446662902 6.237144362449647 14.3178904466629 C 4.677144362449647 13.7218904466629 3.444144362449647 12.5558904466629 2.758144362449647 11.028890446662901 C 2.078144362449646 9.501890446662903 2.031144362449646 7.802890446662903 2.622144362449646 6.243890446662903 C 3.216144362449646 4.6798904466629025 4.387144362449646 3.442890446662903 5.914144362449646 2.760890446662903 C 7.437144362449646 2.078890446662903 9.137144362449646 2.0298904466629026 10.700144362449645 2.6258904466629027 C 11.946144362449646 3.100890446662903 12.971144362449646 3.9538904466629026 13.686144362449646 5.049890446662903 L 11.540144362449645 5.850890446662903 L 16.856144362449648 10.238890446662904 Z",width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:c,id:e.id,class:"e-diagram-rotate-handle"};u.id="rotateThumb",this.svgRenderer.drawPath(t,u,this.diagramId,!0,void 0,{"aria-label":"Thumb to rotate the selected object"})},e.prototype.renderPathElement=function(e,t,i,n,r,o){var a=this.getBaseAttributes(e,i,o);a.data=e.absolutePath,a.data=e.absolutePath;var s=e.description?e.description:e.id;if(this.isSvgMode||(a.x=e.flipOffset.x?e.flipOffset.x:a.x,a.y=e.flipOffset.y?e.flipOffset.y:a.y),e.isExport){var l=e.absoluteBounds;a.data=Rl(e,l,0,a)}this.renderer.drawPath(t,a,this.diagramId,void 0,n,s)},e.prototype.renderSvgGridlines=function(e,t,i,n,r,o){var a=document.createElementNS("http://www.w3.org/2000/svg","pattern"),s=document.createElementNS("http://www.w3.org/2000/svg","defs");s.setAttribute("id",this.diagramId+"_grid_pattern_defn"),(e.constraints&Q.ShowHorizontalLines||e.constraints&Q.ShowVerticalLines)&&a.setAttribute("id",this.diagramId+"_pattern");var l=0,c=0,d=0,h=0,p=1,u=!1,f="Lines"===e.gridType,g=f?e.verticalGridlines.lineIntervals:e.verticalGridlines.dotIntervals,m=f?e.horizontalGridlines.lineIntervals:e.horizontalGridlines.dotIntervals;if(n.showRulers&&n.dynamicGrid&&r&&o)d=o.updateSegmentWidth(i.scale),h=r.updateSegmentWidth(i.scale),e.horizontalGridlines.scaledIntervals=[d/r.interval],e.verticalGridlines.scaledIntervals=[h/o.interval],u=!0;else{for(var v=0;v<g.length;v+=1)l+=g[v];for(v=0;v<m.length;v+=1)c+=m[v];p=this.scaleSnapInterval(e,i.scale)}l=u?h:l*p,c=u?d:c*p,ic(a,{id:this.diagramId+"_pattern",x:0,y:0,width:l,height:c,patternUnits:"userSpaceOnUse"}),this.horizontalSvgGridlines(a,l,c,p,e,n,o,u,f,m),this.verticalSvgGridlines(a,l,c,p,e,n,r,u,f,g),s.appendChild(a),t.appendChild(s)},e.prototype.horizontalSvgGridlines=function(e,t,i,n,r,o,a,s,l,c){var d,h=0,p=[];if(r.constraints&Q.ShowHorizontalLines){r.horizontalGridlines.lineDashArray&&(p=this.renderer.parseDashArray(r.horizontalGridlines.lineDashArray)),o.showRulers&&o.dynamicGrid&&a&&(c=this.updateLineIntervals(c,o,a,i,l)),c=La(c,l);for(var u=0;u<c.length;u+=2){h=Ma(c,l,u,h);d=document.createElementNS("http://www.w3.org/2000/svg",l?"path":"circle");var f=l?h+c[u]/2:h;f=s?f:f*n;l?(ic(d,{"stroke-width":c[u],stroke:r.horizontalGridlines.lineColor,d:"M0,"+f+" L"+t+","+f+" Z",dashArray:p.toString(),class:1.25===c[u]?"e-diagram-thick-grid":"e-diagram-thin-grid"}),e.appendChild(d),h+=c[u+1]+c[u]):(this.renderDotGrid(u,e,r,0,f,n,!0),h+=c[u])}}},e.prototype.renderDotGrid=function(e,t,i,n,r,o,a){var s,l,c,d=a?i.verticalGridlines.dotIntervals:i.horizontalGridlines.dotIntervals;d=La(d,!1);for(var h=1;h<d.length;h+=2)s=h===d.length-1?d[0]:d[h-1],c=n,c*=o,ic(l=document.createElementNS("http://www.w3.org/2000/svg","circle"),{cx:a?c:r,cy:a?r:c,fill:i.horizontalGridlines.lineColor,r:s}),t.appendChild(l),n+=d[h]+d[h-1]},e.prototype.verticalSvgGridlines=function(e,t,i,n,r,o,a,s,l,c){var d,h=0,p=[];if(r.constraints&Q.ShowVerticalLines){r.verticalGridlines.lineDashArray&&(p=this.renderer.parseDashArray(r.verticalGridlines.lineDashArray)),o.showRulers&&o.dynamicGrid&&a&&(c=this.updateLineIntervals(c,o,a,t,l));c=La(c,l);for(var u=0;u<c.length;u+=2){h=Ma(c,l,u,h),d=document.createElementNS("http://www.w3.org/2000/svg",l?"path":"circle");var f=l?h+c[u]/2:h;f=s?f:f*n;l?(ic(d,{"stroke-width":c[u],stroke:r.verticalGridlines.lineColor,d:"M"+f+",0 L"+f+","+i+" Z",dashArray:p.toString(),class:1.25===c[u]?"e-diagram-thick-grid":"e-diagram-thin-grid"}),e.appendChild(d),h+=c[u+1]+c[u]):(this.renderDotGrid(u,e,r,0,f,n,!1),h+=c[u])}}},e.prototype.updateGrid=function(e,t,i,n,r,o){var a=t.getElementById(this.diagramId+"_grid_rect"),s=!1;if(a){var l=t.getElementById(this.diagramId+"_pattern");l&&l.parentNode.removeChild(l);var c=0,d=0,h=1,p="Lines"===e.gridType,u=p?e.verticalGridlines.lineIntervals:e.verticalGridlines.dotIntervals,f=p?e.horizontalGridlines.lineIntervals:e.horizontalGridlines.dotIntervals;n.showRulers&&n.dynamicGrid&&o&&r?(c=o.updateSegmentWidth(i.scale),d=r.updateSegmentWidth(i.scale),s=!0,e.horizontalGridlines.scaledIntervals=[c/r.interval],e.verticalGridlines.scaledIntervals=[d/o.interval]):h=this.scaleSnapInterval(e,i.scale);for(var g=0,m=0;m<f.length;m+=1)g+=f[m];var v=0;for(m=0;m<u.length;m+=1)v+=u[m];var y={x:-i.tx*i.scale,y:-i.ty*i.scale};ic(a,y),v=s?d:v*h,g=s?c:g*h,y={id:this.diagramId+"_pattern",x:0,y:0,width:v,height:g,patternUnits:"userSpaceOnUse"},ic(l=document.createElementNS("http://www.w3.org/2000/svg","pattern"),y),this.horizontalSvgGridlines(l,v,g,h,e,n,o,s,p,f),this.verticalSvgGridlines(l,v,g,h,e,n,r,s,p,u);var b=t.getElementById(this.diagramId+"_grid_pattern_defn");b&&b.appendChild(l)}},e.prototype.updateLineIntervals=function(e,t,i,n,r){for(var o=[],a=n/i.interval,s=r?i.interval:i.interval+1,l=0;l<2*s;l++)o[l]=l%2===0?r?0===l?1.25:.25:0:r?a-o[l-1]:a;return o},e.prototype.scaleSnapInterval=function(e,t){if(t>=2)for(;t>=2;)t/=2;else if(t<=.5)for(;t<=.5;)t*=2;var i;if(e.horizontalGridlines.scaledIntervals=e.horizontalGridlines.snapIntervals,e.verticalGridlines.scaledIntervals=e.verticalGridlines.snapIntervals,1!==t){var n=e.horizontalGridlines;for(n.scaledIntervals=[],i=0;i<n.snapIntervals.length;i++)n.scaledIntervals[i]=n.snapIntervals[i]*t;for((n=e.verticalGridlines).scaledIntervals=[],i=0;i<n.snapIntervals.length;i++)n.scaledIntervals[i]=n.snapIntervals[i]*t}return t},e.prototype.renderTextElement=function(e,t,i,n,r){var o=this.getBaseAttributes(e,i);o.cornerRadius=0,o.whiteSpace=Oc(e.style.whiteSpace,e.style.textWrapping),o.content=e.content,o.breakWord=yc(e.style.textWrapping),o.textAlign=vc(e.style.textAlign),o.color=e.style.color,o.italic=e.style.italic,o.bold=e.style.bold,o.fontSize=e.style.fontSize,o.fontFamily=e.style.fontFamily,o.textOverflow=e.style.textOverflow,o.textWrapping=e.style.textWrapping,o.textDecoration=e.style.textDecoration,o.doWrap=e.doWrap,o.wrapBounds=e.wrapBounds,o.childNodes=e.childNodes,o.isHorizontalLane=e.isLaneOrientation,e.isLaneOrientation&&(o.parentOffsetX=this.groupElement.offsetX,o.parentOffsetY=this.groupElement.offsetY,o.parentWidth=this.groupElement.actualSize.width,o.parentHeight=this.groupElement.actualSize.height),o.dashArray="",o.strokeWidth=0,o.fill=e.style.fill;var a=e.description?e.description:e.content?e.content:e.id;("Wrap"===e.style.textWrapping||"WrapWithOverflow"===e.style.textWrapping)&&this.groupElement&&o.height>this.groupElement.actualSize.height&&("Clip"===e.style.textOverflow||"Ellipsis"===e.style.textOverflow)&&(o.y=o.y+(o.height-this.groupElement.actualSize.height)/2),this.renderer.drawRectangle(t,o,this.diagramId,void 0,void 0,n),this.renderer.drawText(t,o,n,a,this.diagramId,e.isExport&&Math.min(e.exportScaleValue.x||e.exportScaleValue.y),this.groupElement),this.isSvgMode&&(e.doWrap=!1)},e.prototype.renderNativeElement=function(e,t,i,n,r){var o,a,s=this.getParentSvg(e,void 0,t)||n,l=this.getParentElement(e,t,s).g||t,c=this.getBaseAttributes(e,i);switch(c.fill="transparent",c.cornerRadius=e.cornerRadius,c.stroke="transparent",this.renderer.drawRectangle(t,c,this.diagramId,void 0,void 0,n),e.scale){case"None":o=e.contentSize.width,a=e.contentSize.height;break;case"Stretch":o=e.actualSize.width,a=e.actualSize.height;break;case"Meet":o=a=e.actualSize.width<=e.actualSize.height?e.actualSize.width:e.actualSize.height;break;case"Slice":o=a=e.actualSize.width>=e.actualSize.height?e.actualSize.width:e.actualSize.height}this.svgRenderer&&this.svgRenderer.drawNativeContent(e,l,a,o,s)},e.prototype.renderHTMLElement=function(e,t,i,n,r,o,a){var s=this.getBaseAttributes(e,n);s.fill="transparent",s.cornerRadius=e.cornerRadius,s.stroke="transparent",this.renderer.drawRectangle(t,s,this.diagramId,void 0,void 0,r),this.svgRenderer&&this.svgRenderer.drawHTMLContent(e,i.children[0],n,function(e){var t=e.parentElement;do{if($l(t,"e-diagram"))return!0;t=t.parentElement}while(t);return!1}(i),a)},e.prototype.renderImageElement=function(e,t,i,n,r){var o,a,s,l,c=this.getBaseAttributes(e,i);if(c.cornerRadius=0,this.renderer.drawRectangle(t,c,this.diagramId,void 0,void 0,n),"Stretch"===e.stretch)o=e.actualSize.width,a=e.actualSize.height;else{var d=e.contentSize.width,h=e.contentSize.height,p=c.width/d,u=c.height/h,f=void 0;switch(e.stretch){case"Meet":o=d*(f=Math.min(p,u)),a=h*f,c.x+=Math.abs(c.width-o)/2,c.y+=Math.abs(c.height-a)/2;break;case"Slice":p=c.width/d,u=c.height/h,o=d*(f=Math.max(p,u)),a=h*f,s=c.width/o*d,l=c.height/a*h;break;case"None":o=d,a=h}}c.width=o,c.height=a,c.sourceWidth=s,c.sourceHeight=l,c.source=e.source,c.alignment=e.imageAlign,c.scale=e.imageScale,c.description=e.description?e.description:e.id,this.renderer.drawImage(t,c,n,r)},e.prototype.renderContainer=function(e,t,i,n,r,o,a,s,l){var c={svg:r,g:t};if(this.diagramId&&(r=this.getParentSvg(e)||r,this.isSvgMode)){var d;d=this.getParentElement(e,t,r,s).g||t,r=this.getParentSvg(this.hasNativeParent(e.children))||r;var h=this.getParentElement(this.hasNativeParent(e.children),d,r,s);c.svg=h.svg||r,c.g=h.g||d,o?(r&&(r.getElementById(c.g.id)||t.appendChild(c.g)),t=c.g):t=c.g}if(this.renderRect(e,t,n,r),this.groupElement=e,e.hasChildren()){for(var p,u=void 0,f=void 0,g=0,m=e.children;g<m.length;g++){var v=m[g];r=this.getParentSvg(this.hasNativeParent(e.children)||v)||r,this.isSvgMode&&(u=(p=this.getParentElement(this.hasNativeParent(e.children)||v,t,r)).g||t,p.svg&&(r=p.svg)),this.isSvgMode||(v.flip=e.flip),this.renderElement(v,u||t,i,n,r,!0,a,s,l),v instanceof Be&&u&&!(e.elementActions&re.ElementIsGroup)&&(f=v.flip&&"None"!==v.flip?v.flip:e.flip,this.renderFlipElement(v,u,f)),v.elementActions&re.ElementIsPort&&u&&(f=v.flip&&"None"!==v.flip?v.flip:e.flip,this.renderFlipElement(e,u,f)),!(v instanceof Be)&&"None"!==e.flip&&e.elementActions&re.ElementIsGroup&&this.renderFlipElement(v,u||t,e.flip)}e.elementActions&re.ElementIsGroup||this.renderFlipElement(e,t,e.flip)}},e.prototype.renderFlipElement=function(e,t,i){var n={},r=1,o=1,a=0,s=0,l=0,c=0;if("None"!==i?("Horizontal"!==i&&"Both"!==i||(a=e.bounds.center.x,l=-e.bounds.center.x,r=-1),"Vertical"!==i&&"Both"!==i||(s=e.bounds.center.y,c=-e.bounds.center.y,o=-1),n={transform:"translate("+a+","+s+") scale("+r+","+o+") translate("+l+","+c+")"}):n={transform:"translate(0,0)"},n)if(e&&e.children&&e.children.length&&e.children[0]instanceof dr){var d=t.id.split("_preview");(t=(document.getElementById(d[0]+"_html_div")||Gl(this.diagramId).children[0]).querySelector("#"+e.id+"_content_html_element"))&&(t.style.transform="scale("+r+","+o+")rotate("+(e.rotateAngle+e.parentTransform)+"deg)")}else ic(t,n)},e.prototype.hasNativeParent=function(e,t){if(e&&e.length>0){var i=e[0];if(i instanceof Ge)return i;i.children&&i.children.length&&this.hasNativeParent(i.children,t++||0)}},e.prototype.renderRect=function(e,t,i,n,r){var o=this.getBaseAttributes(e,i,r);o.cornerRadius=e.cornerRadius||0;var a=e.description?e.description:e.id;this.renderer.drawRectangle(t,o,this.diagramId,void 0,void 0,n,a)},e.prototype.drawRect=function(e,t){t.cornerRadius=0,this.svgRenderer.drawRectangle(e,t,this.diagramId)},e.prototype.getBaseAttributes=function(e,t,i){var n={width:e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5,fill:e.style.fill,stroke:e.style.strokeColor,angle:e.rotateAngle+e.parentTransform,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:e.style.strokeWidth,dashArray:e.style.strokeDashArray||"",opacity:e.style.opacity,shadow:e.shadow,gradient:e.style.gradient,visible:e.visible,id:e.id,description:e.description,canApplyStyle:e.canApplyStyle};return i&&(n.x=n.x-.5,n.y=n.y-.5),e.isExport&&(n.width*=e.exportScaleValue.x,n.height*=e.exportScaleValue.y,n.x*=e.exportScaleValue.x,n.y*=e.exportScaleValue.y,n.strokeWidth*=e.exportScaleValue.x),e.flip&&(n.flip=e.flip),t&&(n.x+=t.tx,n.y+=t.ty),n},e.renderSvgBackGroundImage=function(e,t,i,n,r,o){if(e.source){var a=Vl(t.id).getElementById(t.id+"_image");if(!a){var s=Nl(t.id).getElementsByClassName("e-background-image-layer")[0];(a=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("id",t.id+"_image"),s.appendChild(a)}var l=new Image;l.src=e.source,a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l.src.toString());var c="None"!==e.scale?e.scale:"",d=e.align,h=d.charAt(0).toLowerCase()+d.slice(1);c&&(h+=" "+c.charAt(0).toLowerCase()+c.slice(1)),ic(a,{id:t.id+"_image",x:i,y:n,width:r,height:o,preserveAspectRatio:h})}},e.prototype.transformLayers=function(e,t){var i=e.tx*e.scale,n=e.ty*e.scale;if(i!==this.transform.x||n!==this.transform.y||0===i||0===n){if(t)window.domTable[this.diagramId+"_diagramLayer"]||(window.domTable[this.diagramId+"_diagramLayer"]=this.diagramSvgLayer.getElementById(this.diagramId+"_diagramLayer")),window.domTable[this.diagramId+"_diagramLayer"].setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")");return function(e){var t=null;return window.domTable[e+"_gridline"]?t=window.domTable[e+"_gridline"]:(t=Ul(e).getElementById(e+"_gridline"),window.domTable[e+"_gridline"]=t),t}(this.diagramId).setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+")"),window.domTable[this.diagramId+"_diagramPorts"]||(window.domTable[this.diagramId+"_diagramPorts"]=this.iconSvgLayer.getElementById(this.diagramId+"_diagramPorts")),window.domTable[this.diagramId+"_diagramPorts"].setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")"),window.domTable[this.diagramId+"_diagramExpander"]||(window.domTable[this.diagramId+"_diagramExpander"]=this.iconSvgLayer.getElementById(this.diagramId+"_diagramExpander")),window.domTable[this.diagramId+"_diagramExpander"].setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")"),window.domTable[this.diagramId+"_nativeLayer"]||(window.domTable[this.diagramId+"_nativeLayer"]=this.nativeSvgLayer.getElementById(this.diagramId+"_nativeLayer")),window.domTable[this.diagramId+"_nativeLayer"].setAttribute("transform","translate("+e.tx*e.scale+","+e.ty*e.scale+"),scale("+e.scale+")"),Gl(this.diagramId).children[0].style.transform="translate("+e.tx*e.scale+"px,"+e.ty*e.scale+"px)scale("+e.scale+")",this.transform={x:e.tx*e.scale,y:e.ty*e.scale},!0}return!1},e.prototype.updateNode=function(e,t,i,n,r){this.renderElement(e,t,i,n,this.getParentSvg(e),void 0,void 0,r)},e}(),Tc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ac=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Dc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Tc(t,e),Ac([Object(r.q)("")],t.prototype,"source",void 0),Ac([Object(r.q)("transparent")],t.prototype,"color",void 0),Ac([Object(r.q)("None")],t.prototype,"scale",void 0),Ac([Object(r.q)("None")],t.prototype,"align",void 0),t}(r.d),kc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Tc(t,e),Ac([Object(r.q)("Page")],t.prototype,"mode",void 0),Ac([Object(r.q)("PageSettings")],t.prototype,"region",void 0),Ac([Object(r.g)({top:25,bottom:25,left:25,right:25},Se)],t.prototype,"margin",void 0),Ac([Object(r.q)(!1)],t.prototype,"canZoomIn",void 0),Ac([Object(r.q)(void 0)],t.prototype,"customBounds",void 0),Ac([Object(r.q)(!1)],t.prototype,"canFit",void 0),t}(r.d),Mc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Tc(t,e),Ac([Object(r.q)(null)],t.prototype,"width",void 0),Ac([Object(r.q)(null)],t.prototype,"height",void 0),Ac([Object(r.g)({},Se)],t.prototype,"margin",void 0),Ac([Object(r.q)("Landscape")],t.prototype,"orientation",void 0),Ac([Object(r.q)("Infinity")],t.prototype,"boundaryConstraints",void 0),Ac([Object(r.g)({},Dc)],t.prototype,"background",void 0),Ac([Object(r.q)(!1)],t.prototype,"multiplePage",void 0),Ac([Object(r.q)(!1)],t.prototype,"showPageBreaks",void 0),Ac([Object(r.g)({},kc)],t.prototype,"fitOptions",void 0),t}(r.d),Lc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Tc(t,e),Ac([Object(r.q)(0)],t.prototype,"horizontalOffset",void 0),Ac([Object(r.q)(0)],t.prototype,"verticalOffset",void 0),Ac([Object(r.q)(1)],t.prototype,"currentZoom",void 0),Ac([Object(r.q)(0)],t.prototype,"viewPortWidth",void 0),Ac([Object(r.q)(0)],t.prototype,"viewPortHeight",void 0),Ac([Object(r.q)(.2)],t.prototype,"minZoom",void 0),Ac([Object(r.q)(30)],t.prototype,"maxZoom",void 0),Ac([Object(r.q)("Diagram")],t.prototype,"scrollLimit",void 0),Ac([Object(r.q)()],t.prototype,"scrollableArea",void 0),Ac([Object(r.q)(!1)],t.prototype,"canAutoScroll",void 0),Ac([Object(r.g)({left:15,right:15,top:15,bottom:15},Se)],t.prototype,"autoScrollBorder",void 0),Ac([Object(r.g)({left:0,right:0,top:0,bottom:0},Se)],t.prototype,"padding",void 0),t}(r.d),Rc=function(){function e(){this.services={}}return e.prototype.register=function(e,t){this.services[e]=t},e.prototype.getService=function(e){return this.services[e]},e}(),zc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Nc=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Bc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zc(t,e),Nc([Object(r.q)("lightgray")],t.prototype,"lineColor",void 0),Nc([Object(r.q)("")],t.prototype,"lineDashArray",void 0),Nc([Object(r.q)([1.25,18.75,.25,19.75,.25,19.75,.25,19.75,.25,19.75])],t.prototype,"lineIntervals",void 0),Nc([Object(r.q)([1,19,.5,19.5,.5,19.5,.5,19.5,.5,19.5])],t.prototype,"dotIntervals",void 0),Nc([Object(r.q)([20])],t.prototype,"snapIntervals",void 0),t}(r.d),_c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zc(t,e),Nc([Object(r.g)({},Bc)],t.prototype,"horizontalGridlines",void 0),Nc([Object(r.g)({},Bc)],t.prototype,"verticalGridlines",void 0),Nc([Object(r.q)(Q.All)],t.prototype,"constraints",void 0),Nc([Object(r.q)(5)],t.prototype,"snapAngle",void 0),Nc([Object(r.q)("Lines")],t.prototype,"gridType",void 0),Nc([Object(r.q)(5)],t.prototype,"snapObjectDistance",void 0),t}(r.d),Hc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wc=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Fc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hc(t,e),Wc([Object(r.q)(5)],t.prototype,"interval",void 0),Wc([Object(r.q)(100)],t.prototype,"segmentWidth",void 0),Wc([Object(r.q)("Horizontal")],t.prototype,"orientation",void 0),Wc([Object(r.q)("RightOrBottom")],t.prototype,"tickAlignment",void 0),Wc([Object(r.q)("red")],t.prototype,"markerColor",void 0),Wc([Object(r.q)(25)],t.prototype,"thickness",void 0),Wc([Object(r.q)(null)],t.prototype,"arrangeTick",void 0),t}(r.d),qc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hc(t,e),Wc([Object(r.q)(!1)],t.prototype,"showRulers",void 0),Wc([Object(r.q)(!0)],t.prototype,"dynamicGrid",void 0),Wc([Object(r.g)({orientation:"Horizontal"},Fc)],t.prototype,"horizontalRuler",void 0),Wc([Object(r.g)({orientation:"Vertical"},Fc)],t.prototype,"verticalRuler",void 0),t}(r.d),Uc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vc=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Yc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Uc(t,e),Vc([Object(r.q)("")],t.prototype,"property",void 0),Vc([Object(r.q)("")],t.prototype,"field",void 0),t}(r.d),Xc=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Gc=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Zc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xc(t,e),Gc([Object(r.q)("")],t.prototype,"read",void 0),Gc([Object(r.q)("")],t.prototype,"create",void 0),Gc([Object(r.q)("")],t.prototype,"update",void 0),Gc([Object(r.q)("")],t.prototype,"destroy",void 0),Gc([Object(r.q)()],t.prototype,"customFields",void 0),t}(r.d),Jc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xc(t,e),Gc([Object(r.q)("")],t.prototype,"id",void 0),Gc([Object(r.q)("")],t.prototype,"sourceID",void 0),Gc([Object(r.q)("")],t.prototype,"targetID",void 0),Gc([Object(r.q)(null)],t.prototype,"sourcePointX",void 0),Gc([Object(r.q)(null)],t.prototype,"sourcePointY",void 0),Gc([Object(r.q)(null)],t.prototype,"targetPointX",void 0),Gc([Object(r.q)(null)],t.prototype,"targetPointY",void 0),Gc([Object(r.q)(null)],t.prototype,"dataManager",void 0),Gc([Object(r.g)({},Zc)],t.prototype,"crudAction",void 0),t}(r.d),Qc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xc(t,e),Gc([Object(r.q)("")],t.prototype,"id",void 0),Gc([Object(r.q)(null)],t.prototype,"dataManager",void 0),Gc([Object(r.q)(null)],t.prototype,"dataSource",void 0),Gc([Object(r.q)("")],t.prototype,"root",void 0),Gc([Object(r.q)("")],t.prototype,"parentId",void 0),Gc([Object(r.q)()],t.prototype,"doBinding",void 0),Gc([Object(r.e)([],Yc)],t.prototype,"dataMapSettings",void 0),Gc([Object(r.g)({},Zc)],t.prototype,"crudAction",void 0),Gc([Object(r.g)({},Jc)],t.prototype,"connectionDataSource",void 0),t}(r.d),$c=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kc=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},ed=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $c(t,e),Kc([Object(r.q)("")],t.prototype,"fixedNode",void 0),Kc([Object(r.q)(30)],t.prototype,"horizontalSpacing",void 0),Kc([Object(r.q)("SamePoint")],t.prototype,"connectionPointOrigin",void 0),Kc([Object(r.q)("Nonlinear")],t.prototype,"arrangement",void 0),Kc([Object(r.q)(30)],t.prototype,"verticalSpacing",void 0),Kc([Object(r.q)(30)],t.prototype,"maxIteration",void 0),Kc([Object(r.q)(40)],t.prototype,"springFactor",void 0),Kc([Object(r.q)(50)],t.prototype,"springLength",void 0),Kc([Object(r.g)({left:50,top:50,right:0,bottom:0},Se)],t.prototype,"margin",void 0),Kc([Object(r.q)("Auto")],t.prototype,"horizontalAlignment",void 0),Kc([Object(r.q)("Auto")],t.prototype,"verticalAlignment",void 0),Kc([Object(r.q)("TopToBottom")],t.prototype,"orientation",void 0),Kc([Object(r.q)("Auto")],t.prototype,"connectionDirection",void 0),Kc([Object(r.q)("Default")],t.prototype,"connectorSegments",void 0),Kc([Object(r.q)("None")],t.prototype,"type",void 0),Kc([Object(r.q)()],t.prototype,"getLayoutInfo",void 0),Kc([Object(r.q)()],t.prototype,"layoutInfo",void 0),Kc([Object(r.q)()],t.prototype,"getBranch",void 0),Kc([Object(r.q)()],t.prototype,"bounds",void 0),Kc([Object(r.q)(!0)],t.prototype,"enableAnimation",void 0),Kc([Object(r.q)("")],t.prototype,"root",void 0),t}(r.d);function td(e,t,i,n,r,o,a){n.selectedItems.connectors[0];if(o&&o.length>1&&r&&r.length>1)return"PinchZoom";if(n.currentSymbol)return"Drag";if("PortDraw"===n.eventHandler.action&&(n.tool&=~se.DrawOnce),(fo(n)||uo(n))&&n.drawingObject)return"Draw";if(nd(n)&&((p=n.selectedItems).wrapper&&ps(p.constraints,"UserHandle")))for(var s=0,l=p.userHandles;s<l.length;s++){var c=l[s];if(c.visible)if(id(i,u=ds(p,c,n.scroller.transform),c.size/(2*n.scroller.transform.scale)))return c.name}if(nd(n)){var d=n.selectedItems.annotation?n.selectedItems.wrapper.children[0]:n.selectedItems.wrapper,h=d.bounds,p=n.selectedItems,u=new _(h.x,h.y,h.width,h.height);if(rd(n)&&!n.selectedItems.annotation){var f=n.selectedItems.connectors[0],g=10/n.scrollSettings.currentZoom,m=10/n.scrollSettings.currentZoom;if(ps(p.constraints,"ResizeAll")){if(ps(p.constraints,"ConnectorSourceThumb")&&Qr(f)&&id(i,f.sourcePoint,g))return"ConnectorSourceEnd";if(ps(p.constraints,"ConnectorTargetThumb")&&$r(f)&&id(i,f.targetPoint,m))return"ConnectorTargetEnd";if("OrthoThumb"===(O=function(e,t,i,n){var r=10/n.scrollSettings.currentZoom,o=10/n.scrollSettings.currentZoom;if("Bezier"===e.type)for(var a=0;a<e.segments.length;a++){var s=e.segments[a];if(id(i,E.isEmptyPoint(s.point1)?s.bezierPoint1:s.point1,o))return"BezierSourceThumb";if(id(i,E.isEmptyPoint(s.point2)?s.bezierPoint2:s.point2,r))return"BezierTargetThumb"}if(n.connectorEditingToolModule&&Kr(e))if("Straight"===e.type||"Bezier"===e.type)for(a=0;a<e.segments.length;a++){s=void 0;if(id(i,(s=e.segments[a]).point,10))return"SegmentEnd"}else for(a=0;a<e.segments.length;a++){s=void 0;var l={x:0,y:0};if((s=e.segments[a]).allowDrag)for(var c=0;c<s.points.length-1;c++){if(E.distancePoints(s.points[c],s.points[c+1])>=50&&(l.x=(s.points[c].x+s.points[c+1].x)/2,l.y=(s.points[c].y+s.points[c+1].y)/2,id(i,l,30)))return"OrthoThumb"}}return null}(f,0,i,n)))return O;if(ps(p.constraints,"ConnectorSourceThumb")&&Qr(f)&&O)return O;if(ps(p.constraints,"ConnectorTargetThumb")&&$r(f)&&O)return O}}else{var v=10/n.scroller.currentZoom,y=W();q(y,d.rotateAngle+d.parentTransform,d.offsetX,d.offsetY);var b=d.offsetX-d.pivot.x*d.actualSize.width,w=d.offsetY-d.pivot.y*d.actualSize.height,x={x:b+(.5===d.pivot.x?2*d.pivot.x:d.pivot.x)*d.actualSize.width/2,y:w-30/n.scroller.currentZoom};x=F(y,x);var O,S=!!n.selectedItems.annotation,C=!(!S||!eo(n.selectedItems.annotation));if(ps(p.constraints,"Rotate")&&id(i,x,v)&&n.selectedItems.thumbsConstraints&oe.Rotate){if(S&&C)return"LabelRotate";if(!S)return"Rotate"}if(u.Inflate(v),u.containsPoint(i))if(O=function(e,t,i,n,r,o){var a;1===e.selectedItems.nodes.length&&0===e.selectedItems.connectors.length&&e.selectedItems.nodes[0].container&&(a=function(e,t,i,n,r){var o=10/e.scroller.currentZoom,a=40/e.scroller.currentZoom,s=e.selectedItems,l=t.actualSize.width,c=t.actualSize.height,d=new _(n,r+20,t.style.strokeWidth,c-40),h=new _(n+l,r+20,t.style.strokeWidth,c-40),p=new _(n+20,r,l-40,t.style.strokeWidth),u=new _(n+20,r+c,l-40,t.style.strokeWidth),f=qo(e,e.selectedItems.nodes[0],!0)?e.nameTable[e.selectedItems.nodes[0].parentId]:e.selectedItems.nodes[0];if(l>=a&&c>=a){if(hs(s.constraints,"ResizeEast",s.thumbsConstraints,s)&&h.containsPoint(i,o))return"ResizeEast";if(hs(s.constraints,"ResizeSouth",s.thumbsConstraints,s)&&u.containsPoint(i,o))return"ResizeSouth";if("Grid"!==f.container.type){if(hs(s.constraints,"ResizeWest",s.thumbsConstraints,s)&&d.containsPoint(i,o))return"ResizeWest";if(hs(s.constraints,"ResizeNorth",s.thumbsConstraints,s)&&p.containsPoint(i,o))return"ResizeNorth"}}return null}(e,t,i,r,o));a||e.selectedItems.nodes[0]&&(e.selectedItems.nodes[0].isPhase||e.selectedItems.nodes[0].isLane||"SwimLane"===e.selectedItems.nodes[0].shape.type)||(a=function(e,t,i,n,r,o){var a=40/e.scroller.currentZoom,s=10/e.scroller.currentZoom,l=e.selectedItems,c=!!l.annotation;if(t.actualSize.width>=a&&t.actualSize.height>=a){if(hs(l.constraints,"ResizeSouthEast",l.thumbsConstraints,l)&&id(i,F(n,{x:r+t.actualSize.width,y:o+t.actualSize.height}),s))return c?"LabelResizeSouthEast":"ResizeSouthEast";if(hs(l.constraints,"ResizeSouthWest",l.thumbsConstraints,l)&&id(i,F(n,{x:r,y:o+t.actualSize.height}),s))return c?"LabelResizeSouthWest":"ResizeSouthWest";if(hs(l.constraints,"ResizeNorthEast",l.thumbsConstraints,l)&&id(i,F(n,{x:r+t.actualSize.width,y:o}),s))return c?"LabelResizeNorthEast":"ResizeNorthEast";if(hs(l.constraints,"ResizeNorthWest",l.thumbsConstraints,l)&&id(i,F(n,{x:r,y:o}),s))return c?"LabelResizeNorthWest":"ResizeNorthWest"}if(hs(l.constraints,"ResizeEast",l.thumbsConstraints,l)&&id(i,F(n,{x:r+t.actualSize.width,y:o+t.actualSize.height/2}),s))return c?"LabelResizeEast":"ResizeEast";if(hs(l.constraints,"ResizeWest",l.thumbsConstraints,l)&&id(i,F(n,{x:r,y:o+t.actualSize.height/2}),s))return c?"LabelResizeWest":"ResizeWest";if(hs(l.constraints,"ResizeSouth",l.thumbsConstraints,l)&&id(i,F(n,{x:r+t.actualSize.width/2,y:o+t.actualSize.height}),s))return c?"LabelResizeSouth":"ResizeSouth";if(hs(l.constraints,"ResizeNorth",l.thumbsConstraints,l)&&id(i,F(n,{x:r+t.actualSize.width/2,y:o}),s))return c?"LabelResizeNorth":"ResizeNorth";return null}(e,t,i,n,r,o));if(a)return a;return null}(n,d,i,y,b,w))return O}}if(po(n)&&!e)return"Pan";if(a instanceof $e&&!po(n)&&"None"!==(O=function(e,t,i,n){if(wo(t)&&(us(t,J.Hover)||us(t,J.Visible))){if(t.constraints&ye.Drag)return"PortDrag"}else if(bo(t)&&(us(t,J.Hover)||us(t,J.Visible))&&t.constraints&ye.Draw){e.drawingObject={};var r={type:"Orthogonal",sourcePortID:t.id};return e.drawingObject=r,e.tool|=se.DrawOnce,e.currentDrawingObject=r,"PortDraw"}return"None"}(n,a)))return O;if((a instanceof nt||a instanceof rt)&&!po(n)&&Zr(a))return od(n,a,void 0,t)&&Jr(a)?"LabelDrag":"LabelSelect";if(null!==e){if(!(e instanceof Pl||e instanceof _r))return"Select";if(t&&t.id){var P=t.id.split(e.id)[1];if(P&&P.match("^_icon"))return"LayoutAnimation"}if(t&&t.id)for(var j=void 0,I=0;I<e.fixedUserHandles.length;I++)if(j=e.fixedUserHandles[I].id,t.id&&t.id.indexOf(j)>-1)return"FixedUserHandle";if(Jr(e)&&t instanceof Be&&t.hyperlink.link)return"Hyperlink";if(!Jr(e)||!od(n,e,!1)||void 0!==n.selectedItems.annotation)return e&&po(n)&&!go(n)?"Pan":n.selectedItems.nodes.length&&n.selectedItems.nodes[0].isLane&&n.selectedItems.wrapper&&n.selectedItems.wrapper.bounds.containsPoint(i)?"Drag":"Select";if(e instanceof _r&&!id(i,e.sourcePoint,e.hitPadding)&&!id(i,e.targetPoint,e.hitPadding)||!(e instanceof _r))return"Drag"}return"Select"}function id(e,t,i){return e.x>=t.x-i&&e.x<=t.x+i&&e.y>=t.y-i&&e.y<=t.y+i}function nd(e){return e.selectedItems.nodes.length>0||e.selectedItems.connectors.length>0}function rd(e){return 1===e.selectedItems.connectors.length&&!e.selectedItems.nodes.length}function od(e,t,i,n){if(void 0===i&&(i=!0),t instanceof Dl)return!0;if(t instanceof Pl)for(;t;){if(-1!==e.selectedItems.nodes.indexOf(t)&&void 0===e.selectedItems.annotation)return!0;if(i)break;t=e.nameTable[t.parentId]}else if(t instanceof _r){if(-1!==e.selectedItems.connectors.indexOf(t)&&void 0===e.selectedItems.annotation)return!0}else if((t instanceof nt||t instanceof rt)&&e.selectedItems.annotation&&e.selectedItems.wrapper.children[0].id===n.id)return!0;return!1}var ad,sd={None:"default",Rotate:"crosshair",Select:"default",Drag:"move",ResizeWest:"w-resize",ResizeEast:"e-resize",ResizeSouth:"s-resize",ResizeNorth:"n-resize",Draw:"crosshair",PortDraw:"crosshair",ResizeNorthEast:"ne-resize",ResizeNorthWest:"nw-resize",ResizeSouthEast:"se-resize",ResizeSouthWest:"sw-resize",ConnectorSourceEnd:"move",ConnectorTargetEnd:"move",BezierSourceThumb:"move",BezierTargetThumb:"move",OrthoThumb:"move",SegmentEnd:"move",Pan:"grab",Hyperlink:"pointer",PortDrag:"pointer",LabelSelect:"pointer",LabelDrag:"move",LabelRotate:"crosshair",LabelResizeWest:"w-resize",LabelResizeEast:"e-resize",LabelResizeSouth:"s-resize",LabelResizeNorth:"n-resize",LabelResizeNorthEast:"ne-resize",LabelResizeNorthWest:"nw-resize",LabelResizeSouthEast:"se-resize",LabelResizeSouthWest:"sw-resize"},ld=function(){function e(){this.valueCreated="created",this.valueUpdated="updated",this.valueDeleted="deleted",this.valueUnchanged="unchanged",this.newNodeObject=[],this.newConnectorObject=[],this.diagramObject={}}return e.prototype.updateObjectCollection=function(e,t){for(var i=0;i<e.length;i++)e[i].objects||(e[i].objects=[]),e[i].objects=t.layers[i].objects},e.prototype.getOldObject=function(e,t,i){for(var n=t?i.oldNodeObjects:i.oldConnectorObjects,r=0;r<n.length;r++)if(n[r].id===e)return n[r]},e.prototype.changeSegments=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if("segments"===r){var o=this.removeNullValues(t[r]);e[r]=o}}return e},e.prototype.removeNullValues=function(e){for(var t=[],i={},n=0;n<e.length;n++)i=this.removeNullObjectValues(e[n]),t.push(i);return t},e.prototype.removeNullObjectValues=function(e){for(var t={},i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];void 0!==e[r]&&(t[r]=e[r]instanceof Object?this.removeNullObjectValues(e[r]):e[r])}return t},e.prototype.getDifferenceValues=function(e,t,i,n){var r,o,a,s,l=e instanceof Pl;if(e&&(s=l?this.getOldObject(e.id,!0,n):this.getOldObject(e.id,!1,n))){var c=uc(e);if(a=this.map(c,s),r=this.frameObject({},a),o=this.removeEmptyValues(r),(o=this.changeSegments(o,c)).children&&(o.children=uc(e).children),o.ports&&o.ports.length)for(var d=0;d<o.ports.length;d++)c.ports[d].outEdges&&(o.ports[d].outEdges=c.ports[d].outEdges),c.ports[d].inEdges&&(o.ports[d].inEdges=c.ports[d].inEdges);return this.getDiagramObjects(o,e.id,l,t,i,n)}},e.prototype.getLayerObject=function(e,t,i){if(Object(r.I)()){for(var n={layers:[]},o={layers:[]},a=0;a<i.layers.length;a++)o.layers.push(uc(i.layers[a]));var s=void 0;for(a=0;a<o.layers.length;a++){s=t?this.map(e.layers[a],uc(o.layers[a])):this.map(uc(o.layers[a]),e.layers[a]);var l=this.frameObject({},s),c=this.removeEmptyValues(l);n.layers[a]=c}return this.updateObjectCollection(n.layers,i),n}},e.prototype.getDiagramObjects=function(e,t,i,n,r,o){var a;if(a=cc(o,t),e.sfIndex=a,i?this.newNodeObject.push(e):this.newConnectorObject.push(e),n&&(n.sourceWrapper instanceof Be&&r||n.portId)){var s=void 0,l=void 0;l=i?n.portId?this.newNodeObject[0].ports:this.newNodeObject[0].annotations:this.newConnectorObject[0].annotations||[];for(var c=0;c<l.length;c++)if(Object.keys(l[c]).length>0){var d=o.nameTable[t];if(s=l[c],n.portId)this.newNodeObject[0].ports=[s];else{for(var h=0;h<d.annotations.length;h++)n.sourceWrapper.id===d.id+"_"+d.annotations[h].id&&(s.sfIndex=h);i?this.newNodeObject[0].annotations=[s]:this.newConnectorObject[0].annotations=[s]}}}this.diagramObject={nodes:this.newNodeObject,connectors:this.newConnectorObject}},e.prototype.removeArrayValues=function(e){var t=[];if(JSON.stringify(e)!==JSON.stringify({data:[]}))for(var i=0;i<e.length;i++)if(e[i]instanceof Object){var n=this.removeEmptyValues(e[i]);t.push(n)}else t.push(e[i]);return t},e.prototype.removeEmptyValues=function(e){for(var t={},i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if("wrapper"!==r&&("data"!==r||"data"===r&&!(e[r]instanceof Array))){var o=e[r],a=JSON.stringify(o);if(o instanceof Array){var s=this.removeArrayValues(o);"[]"!==JSON.stringify(s)&&(t[r]=s)}else if(o instanceof Object){if(a!==JSON.stringify({data:[]})){s=this.removeEmptyValues(o);"{}"!==JSON.stringify(s)&&(t[r]=s)}}else a!==JSON.stringify(["data"])&&a!==JSON.stringify("data")&&a!==JSON.stringify({data:[]})&&"version"!==r&&"ejsAction"!==r&&(t[r]=e[r])}}return t},e.prototype.map=function(e,t,i){if(this.isFunction(e)||this.isFunction(t))throw"Invalid argument. Function given, object expected.";if(this.isValue(e)||this.isValue(t))return{type:this.compareValues(e,t),data:void 0===e?t:e};var n={};if(this.isArray(e))for(var r=0;r<e.length;r++){n[i]||(n[i]=[]);var o=this.map(e[r],t[r]);n[i].push(o)}else for(var a in e)if(!this.isFunction(e[a])){var s=void 0;void 0!==t[a]&&(s=t[a]);var l=this.map(e[a],s,this.isArray(s)?a:void 0);this.isArray(s)?n[a]=l[a]:n[a]=l}if(this.isArray(t))for(var c=t.length-1;c>=0;c--)if(n[i]||(n[i]=[]),this.isFunction(t[c])||void 0!==n[i][c])n[i][c].type&&n[i][c].type!==this.valueUpdated&&delete n[i];else{o=this.map(void 0,t[c]);n[i][c]=o}else for(var a in t)if(this.isFunction(t[a])||void 0!==n[a])n[a].type&&n[a].type!==this.valueUpdated&&n[a].type!==this.valueDeleted&&delete n[a];else{l=this.map(void 0,t[a]);n[a]=l}return n},e.prototype.compareValues=function(e,t){return e===t||this.isDate(e)&&this.isDate(t)&&e.getTime()===t.getTime()?this.valueUnchanged:void 0===e?this.valueCreated:void 0===t?this.valueDeleted:this.valueUpdated},e.prototype.isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},e.prototype.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.prototype.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.prototype.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},e.prototype.isValue=function(e){return!this.isObject(e)&&!this.isArray(e)},e.prototype.frameObject=function(e,t){for(var i in t)if(this.isArray(t[i])){e[i]||(e[i]=[]);for(var n=0;n<t[i].length;n++){var r=this.frameObject({},t[i][n]);e[i].push(r)}}else if("type"!=i||"type"==i&&t[i]!==this.valueUpdated&&t[i]!==this.valueUnchanged&&t[i]!==this.valueDeleted&&t[i]!==this.valueCreated){if(this.isFunction(t[i]))continue;if(this.isValue(t[i]))return t.data;r=this.frameObject({},t[i]);(this.isValue(r)||Object.keys(r).length>0)&&(e[i]=r)}return e},e}(),cd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dd=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))},hd=function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},pd=function(){function e(e,t){void 0===t&&(t=!1),this.commandHandler=null,this.deepDiffer=new ld,this.inAction=!1,this.isProtectChange=!1,this.currentElement=null,this.blocked=!1,this.isTooltipVisible=!1,this.childTable={},this.undoElement={nodes:[],connectors:[]},this.checkProperty=!0,this.undoParentElement={nodes:[],connectors:[]},this.commandHandler=e,this.isProtectChange=t}return e.prototype.startAction=function(e){this.currentElement=e,this.inAction=!0},e.prototype.mouseDown=function(e){Object(r.I)()&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0)),this.currentElement=e.source,this.startPosition=this.currentPosition=this.prevPosition=e.position,this.isTooltipVisible=!0,this.startAction(e.source),this.checkProperty=!0},e.prototype.checkPropertyValue=function(){this.checkProperty&&this.commandHandler.startTransaction(this.isProtectChange)},e.prototype.mouseMove=function(e){return this.currentPosition=e.position,this.inAction&&(this.commandHandler.startTransaction(this.isProtectChange),this.checkProperty=!1),!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.currentPosition=e.position,this.isTooltipVisible=!1,this.commandHandler.endTransaction(this.isProtectChange),Object(r.I)()&&(this.commandHandler.enableCloneObject(!1),this.commandHandler.ismouseEvents(!1),this.commandHandler.getBlazorOldValues(e,this instanceof Id)),this.endAction()},e.prototype.endAction=function(){this.isTooltipVisible||this.commandHandler.closeTooltip(),this.commandHandler=null,this.currentElement=null,this.currentPosition=null,this.inAction=!1,this.blocked=!1},e.prototype.mouseWheel=function(e){this.currentPosition=e.position},e.prototype.mouseLeave=function(e){this.mouseUp(e)},e.prototype.updateSize=function(e,t,i,n,r,o){e=this.commandHandler.renderContainerHelper(e)||e;var a,s={snapped:!1,offset:0,left:!1,right:!1},l={snapped:!1,offset:0,top:!1,bottom:!1},c=this.currentPosition.x-this.startPosition.x,d=this.currentPosition.y-this.startPosition.y,h=!(e instanceof Be)&&this.commandHandler.snappingModule&&this.commandHandler.snappingModule.canSnap(),p=h?this.commandHandler.snappingModule.getLayer():null,u=e instanceof Be?o:e.rotateAngle;q(a=W(),-u,0,0);e.offsetX,e.offsetY;var f=e.width,g=e.height;e.pivot.x,e.pivot.y;var m,v=0,y=0,b=e instanceof Be?e.actualSize.width:e.width,w=e instanceof Be?e.actualSize.height:e.height;switch(n){case"ResizeWest":c=(m=F(a,{x:c,y:d})).x,d=m.y,y=1,c=h?this.commandHandler.snappingModule.snapLeft(s,l,p,c,d,e,i===t,r):c,d=0,v=(r.width-c)/b;break;case"ResizeEast":c=(m=F(a,{x:c,y:d})).x,d=m.y,c=h?this.commandHandler.snappingModule.snapRight(s,l,p,c,d,e,i===t,r):c,d=0,v=(r.width+c)/b,y=1;break;case"ResizeNorth":v=1,c=(m=F(a,{x:c,y:d})).x,d=m.y,d=h?this.commandHandler.snappingModule.snapTop(s,l,p,c,d,e,i===t,r):d,y=(r.height-d)/w;break;case"ResizeSouth":v=1,c=(m=F(a,{x:c,y:d})).x,d=m.y,d=h?this.commandHandler.snappingModule.snapBottom(s,l,p,c,d,e,i===t,r):d,y=(r.height+d)/w;break;case"ResizeNorthEast":c=(m=F(a,{x:c,y:d})).x,d=m.y,c=h?this.commandHandler.snappingModule.snapRight(s,l,p,c,d,e,i===t,r):c,d=h?this.commandHandler.snappingModule.snapTop(s,l,p,c,d,e,i===t,r):d,v=(r.width+c)/b,y=(r.height-d)/w;break;case"ResizeNorthWest":c=(m=F(a,{x:c,y:d})).x,d=m.y,d=h?this.commandHandler.snappingModule.snapTop(s,l,p,c,d,e,i===t,r):d,c=h?this.commandHandler.snappingModule.snapLeft(s,l,p,c,d,e,i===t,r):c,v=(r.width-c)/b,y=(r.height-d)/w;break;case"ResizeSouthEast":c=(m=F(a,{x:c,y:d})).x,d=m.y,d=h?this.commandHandler.snappingModule.snapBottom(s,l,p,c,d,e,i===t,r):d,c=h?this.commandHandler.snappingModule.snapRight(s,l,p,c,d,e,i===t,r):c,y=(r.height+d)/w,v=(r.width+c)/b;break;case"ResizeSouthWest":c=(m=F(a,{x:c,y:d})).x,d=m.y,d=h?this.commandHandler.snappingModule.snapBottom(s,l,p,c,d,e,i===t,r):d,c=h?this.commandHandler.snappingModule.snapLeft(s,l,p,c,d,e,i===t,r):c,v=(r.width-c)/b,y=(r.height+d)/w}return{width:v,height:y}},e.prototype.getPivot=function(e){switch(e){case"ResizeWest":return{x:1,y:.5};case"ResizeEast":return{x:0,y:.5};case"ResizeNorth":return{x:.5,y:1};case"ResizeSouth":return{x:.5,y:0};case"ResizeNorthEast":return{x:0,y:1};case"ResizeNorthWest":return{x:1,y:1};case"ResizeSouthEast":return{x:0,y:0};case"ResizeSouthWest":return{x:1,y:0}}return{x:.5,y:.5}},e}(),ud=function(e){function t(t,i,n){var r=e.call(this,t,!0)||this;return r.action=n,r}return cd(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction&&!1===E.equals(this.currentPosition,this.prevPosition)){var i=_.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.clearSelectedItems(),this.commandHandler.drawSelectionRectangle(i.x,i.y,i.width,i.height)}return!this.blocked},t.prototype.mouseUp=function(t){if(this.checkPropertyValue(),!this.commandHandler.isUserHandle(this.currentPosition))if(!1===E.equals(this.currentPosition,this.prevPosition)&&this.inAction){var i=_.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.doRubberBandSelection(i)}else{var n=this.commandHandler.getSelectedObject();this.commandHandler.hasSelection()&&t.info&&t.info.ctrlKey?t&&t.source&&(this.commandHandler.isSelected(t.source)?1===t.clickCount&&(this.commandHandler.unSelect(t.source),this.commandHandler.updateBlazorSelector()):this.commandHandler.selectObjects([t.source],!0)):(this.commandHandler.clearSelection(null===t.source),"LabelSelect"===this.action?this.commandHandler.labelSelect(t.source,t.sourceWrapper):t.source&&this.commandHandler.selectObjects([t.source],!1,n))}this.inAction=!1,e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(pd),fd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return cd(t,e),t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.inAction=!1;for(var i,n=t.source,o=t.sourceWrapper.id,a=0;a<n.fixedUserHandles.length;a++)o.indexOf(n.fixedUserHandles[a].id)>-1&&(i=n.fixedUserHandles[a]);if(Object(r.I)()){var s=Ps(t.source)===_r?{connector:t.source}:{node:t.source},l={fixedUserHandle:Ps(t.source)===_r?{connectorFixedUserHandle:i}:{nodeFixedUserHandle:i},element:s},c=ve.fixedUserHandleClick;this.commandHandler.triggerEvent(c,l),e.prototype.mouseUp.call(this,t)}else{l={fixedUserHandle:i,element:t.source},c=ve.fixedUserHandleClick;this.commandHandler.triggerEvent(c,l),e.prototype.mouseUp.call(this,t)}},t}(pd),gd=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.isConnected=!1,n.endPoint=i,n}return cd(t,e),t.prototype.mouseDown=function(t){return dd(this,void 0,void 0,(function(){var i,n,o,a,s,l,c,d;return hd(this,(function(h){if(Object(r.I)()&&t&&t.source&&(this.commandHandler.insertSelectedObjects(),this.commandHandler.insertBlazorConnector(t.source),(i=t.source).connectors&&(n=i.connectors[0],this.oldConnector=uc(n),o={connector:Ls(n),oldValue:{connectorTargetValue:{portId:void 0,nodeId:void 0}},newValue:{connectorTargetValue:{portId:void 0,nodeId:void 0}},cancel:!1,state:"Changing",connectorEnd:this.endPoint},this.tempArgs=o)),this.inAction=!0,this.undoElement=void 0,this instanceof wd||(this.undoElement=uc(t.source)),e.prototype.mouseDown.call(this,t),t.source&&t.source.connectors&&({x:this.prevPosition.x,y:this.prevPosition.y},a=t.source.connectors[0],this.oldConnector=uc(a)),"BezierSourceThumb"===this.endPoint||"BezierTargetThumb"===this.endPoint)for(s=0;s<a.segments.length;s++)l=a.segments[s],c=E.isEmptyPoint(l.point1)?l.bezierPoint1:l.point1,d=E.isEmptyPoint(l.point2)?l.bezierPoint2:l.point2,(id(this.currentPosition,c,a.hitPadding)||id(this.currentPosition,d,a.hitPadding))&&(this.selectedSegment=l);return this.currentPosition=t.position,[2]}))}))},t.prototype.mouseUp=function(t){return dd(this,void 0,void 0,(function(){var i,n,o,a,s,l,c,d,h,p,u,f,g;return hd(this,(function(m){switch(m.label){case 0:return Object(r.I)()?(u=ve.connectionChange,i=void 0,this.tempArgs&&this.oldConnector?(this.commandHandler.updatePropertiesToBlazor(t,!1),this.tempArgs.state="Changed",o="ConnectorSourceEnd"===this.endPoint?"sourceID":"targetID",a="ConnectorSourceEnd"===this.endPoint?"sourcePortID":"targetPortID",this.tempArgs.oldValue="ConnectorSourceEnd"===this.endPoint?{connectorSourceValue:{nodeId:this.oldConnector[o],portId:this.oldConnector[a]}}:{connectorTargetValue:{nodeId:this.oldConnector[o],portId:this.oldConnector[a]}},i={state:this.tempArgs.state,oldValue:this.tempArgs.oldValue,newValue:this.tempArgs.newValue,cancel:this.tempArgs.cancel,connectorEnd:this.tempArgs.connectorEnd},"diagram","sfBlazor","Blazor",window&&window.Blazor&&this.commandHandler.diagram.connectionChange?(n={EventName:"connectionChange",args:JSON.stringify(this.tempArgs)},[4,window.sfBlazor.updateBlazorDiagramEvents(n,this.commandHandler.diagram)]):[3,2]):[3,3]):[3,3];case 1:i=m.sent(),m.label=2;case 2:i&&this.commandHandler.updateConnectorValue(i),m.label=3;case 3:return!Object(r.I)()&&this.isConnected&&t.source.connectors&&(l=t.source.connectors[0],o="ConnectorSourceEnd"===this.endPoint?"sourceID":"targetID",a="ConnectorSourceEnd"===this.endPoint?"sourcePortID":"targetPortID",p={connector:Ls(l),oldValue:{nodeId:this.oldConnector[o],portId:this.oldConnector[a]},newValue:{nodeId:l[o],portId:l[a]},cancel:!1,state:"Changed",connectorEnd:this.endPoint},l[o]!==this.oldConnector[o]&&(this.commandHandler.triggerEvent(ve.connectionChange,p),this.isConnected=!1)),this.checkPropertyValue(),this.commandHandler.updateSelector(),this.commandHandler.removeSnap(),this.commandHandler.changeAnnotationDrag(t),this instanceof wd||("ConnectorSourceEnd"!==this.endPoint||!t.source.connectors.length||E.equals(t.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)&&t.source.connectors[0].sourceID===this.undoElement.connectors[0].sourceID)&&("ConnectorTargetEnd"!==this.endPoint||E.equals(t.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint)&&t.source.connectors[0].targetID===this.undoElement.connectors[0].targetID)?this instanceof wd||"BezierTargetThumb"!==this.endPoint&&"BezierSourceThumb"!==this.endPoint||this.undoElement&&t.source&&(f=void 0,f=uc(t.source),g={type:"SegmentChanged",redoObject:f,undoObject:this.undoElement,category:"Internal"},this.commandHandler.addHistoryEntry(g)):(s=void 0,l=void 0,t.source&&t.source.connectors&&(s={x:this.prevPosition.x,y:this.prevPosition.y},l=t.source.connectors[0]),c=void 0,d=void 0,t.target&&((h=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof $e?c=h.id:d=h.id),p={connector:l,state:"Completed",targetNode:d,oldValue:s,newValue:s,cancel:!1,targetPort:c},Object(r.I)()&&(p={connector:Ls(l),state:"Completed",targetNode:d,oldValue:Ls(s),newValue:s,cancel:p.cancel,targetPort:c}),u="ConnectorSourceEnd"===this.endPoint?ve.sourcePointChange:ve.targetPointChange,this.commandHandler.triggerEvent(u,p),this.commandHandler.removeTerminalSegment(l,!0),this.undoElement&&t.source&&(f=void 0,f=uc(t.source),g={type:"ConnectionChanged",redoObject:uc(f),undoObject:uc(this.undoElement),category:"Internal"},this.commandHandler.addHistoryEntry(g))),this.commandHandler.updateBlazorSelector(),this.canCancel=void 0,this.tempArgs=void 0,e.prototype.mouseUp.call(this,t),[2]}}))}))},t.prototype.mouseMove=function(t){var i;if(e.prototype.mouseMove.call(this,t),!(this instanceof wd)&&("ConnectorSourceEnd"===this.endPoint&&E.equals(t.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)||"ConnectorTargetEnd"===this.endPoint&&E.equals(t.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint))){var n=void 0,o=void 0;t.source&&t.source.connectors&&(n={x:this.prevPosition.x,y:this.prevPosition.y},o=t.source.connectors[0]);var a=void 0,s=void 0;if(t.target)s=t.target.id,(y=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof $e||y instanceof cl?a=y.id:s=y.id;var l={connector:o,state:"Start",targetNode:s,oldValue:n,newValue:n,cancel:!1,targetPort:a};Object(r.I)()&&(l={connector:Ls(o),state:"Start",targetNode:s,oldValue:n,newValue:n,cancel:l.cancel,targetPort:a});var c="ConnectorSourceEnd"===this.endPoint?ve.sourcePointChange:ve.targetPointChange;this.commandHandler.triggerEvent(c,l)}if(this.currentPosition=t.position,this.currentPosition&&this.prevPosition){var d=this.currentPosition.x-this.prevPosition.x,h=this.currentPosition.y-this.prevPosition.y,p=void 0,u=(n=void 0,void 0),f=void 0;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var g=void 0;t.source&&t.source.connectors&&(p={x:this.currentPosition.x,y:this.currentPosition.y},n={x:this.prevPosition.x,y:this.prevPosition.y},g=t.source.connectors[0]);var m=void 0,v=void 0;if(t.target)(y=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof $e?m=y.id:v=y.id;var y;l={connector:g,state:"Progress",targetNode:v,oldValue:n,newValue:p,cancel:!1,targetPort:m};if(Object(r.I)()&&(l={connector:Ls(g),state:"Progress",targetNode:v,oldValue:n,newValue:p,cancel:l.cancel,targetPort:m}),!(this instanceof wd)){c="ConnectorSourceEnd"===this.endPoint?ve.sourcePointChange:ve.targetPointChange;this.commandHandler.triggerEvent(c,l)}if(t.target&&(u=ms(t.target,!0),f=ms(t.target,!1)),!l.cancel&&this.inAction&&void 0!==this.endPoint&&0!==d||0!==h)if(this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,t.source,this.currentPosition,this.selectedSegment,t.target,m),this.commandHandler.updateSelector(),t.target&&("ConnectorSourceEnd"===this.endPoint&&(ro(t.target)||oo(f))||"ConnectorTargetEnd"===this.endPoint&&(io(t.target)||no(u))))if(this.commandHandler.canDisconnect(this.endPoint,t,m,v)&&(i=this.commandHandler.disConnect(t.source,this.endPoint,this.canCancel),this.isConnected=!0),(y=this.commandHandler.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof Pl)(io(y)&&"ConnectorTargetEnd"===this.endPoint||ro(y)&&"ConnectorSourceEnd"===this.endPoint)&&(i=this.commandHandler.connect(this.endPoint,t,this.canCancel),this.isConnected=!0);else this.checkConnect(y)&&(this.isConnected=!0,i=this.commandHandler.connect(this.endPoint,t,this.canCancel));else-1===this.endPoint.indexOf("Bezier")&&(this.isConnected=!0,i=this.commandHandler.disConnect(t.source,this.endPoint,this.canCancel),this.commandHandler.updateSelector());if(this.commandHandler.canEnableDefaultTooltip()){var b=this.getTooltipContent(t.position);this.commandHandler.showTooltip(t.source,t.position,b,"ConnectTool",this.isTooltipVisible),this.isTooltipVisible=!1}i&&(this.tempArgs=i)}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.getTooltipContent=function(e){return"X:"+Math.round(e.x)+" Y:"+Math.round(e.y)},t.prototype.checkConnect=function(e){return!(!no(e)||"ConnectorTargetEnd"!==this.endPoint)||(!(!oo(e)||"ConnectorSourceEnd"!==this.endPoint)||!(e.constraints&ye.None||no(e)||oo(e)))},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},t}(pd),md=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.currentTarget=null,n.canCancel=!1,n.objectType=i,n}return cd(t,e),t.prototype.mouseDown=function(t){if(t.source instanceof Pl||t.source instanceof _r){var i=this.commandHandler.getSelectedObject();this.commandHandler.selectObjects([t.source],t.info&&t.info.ctrlKey,i);var n={nodes:[],connectors:[]};t.source instanceof Pl?n.nodes.push(uc(t.source)):n.connectors.push(uc(t.source)),this.undoElement=uc(n)}else this.undoElement=uc(t.source);var o;if(this.undoParentElement=this.commandHandler.getSubProcess(t.source),"Port"===this.objectType&&(this.portId=t.sourceWrapper.id),this.commandHandler.insertBlazorConnector(t.source),Object(r.I)()){this.commandHandler.insertSelectedObjects(),this.startPosition=this.currentPosition=this.prevPosition=t.position,this.initialOffset={x:0,y:0},t.source&&(o={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY});var a={source:uc(t.source),state:"Start",oldValue:o,newValue:{},target:uc(t.target),targetPosition:t.position,allowDrop:!0,cancel:!1};this.tempArgs=a}e.prototype.mouseDown.call(this,t),this.initialOffset={x:0,y:0}},t.prototype.mouseUp=function(t,i){return dd(this,void 0,void 0,(function(){var n,o,a,s,l,c,d,h,p,u,f,g,m,v,y,b,w;return hd(this,(function(x){switch(x.label){case 0:return Object(r.I)()&&"Port"!==this.objectType?(this.commandHandler.updatePropertiesToBlazor(t,!1),t.source&&(o={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY},n={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY}),m={state:"Completed",oldValue:Ls(this.tempArgs.oldValue),newValue:Ls(o),target:Ls(this.currentTarget),targetPosition:Ls(this.currentPosition),allowDrop:!0,cancel:!1},a=void 0,"diagram","sfBlazor","Blazor",window&&window.Blazor&&this.commandHandler.diagram.positionChange?(s={EventName:"positionChange",args:JSON.stringify(m)},[4,window.sfBlazor.updateBlazorDiagramEvents(s,this.commandHandler.diagram)]):[3,2]):[3,3];case 1:a=x.sent(),x.label=2;case 2:a&&a.cancel&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0),this.canCancel=!0),this.canCancel&&(this.commandHandler.insertBlazorObject(t.source),l=this.tempArgs.oldValue.offsetX-t.source.wrapper.offsetX,c=this.tempArgs.oldValue.offsetY-t.source.wrapper.offsetY,this.commandHandler.dragSelectedObjects(l,c)),x.label=3;case 3:return this.checkPropertyValue(),h=!1,u={nodes:[],connectors:[]},"Port"===this.objectType?[3,8]:(t.source instanceof Pl||t.source instanceof _r?(t.source instanceof Pl?u.nodes.push(uc(t.source)):u.connectors.push(uc(t.source)),d=uc(u),f=t.source.wrapper,d.offsetX=f.offsetX,d.offsetY=f.offsetY):d=uc(t.source),("helper"!==(p=this.commandHandler.renderContainerHelper(t.source)||t.source||this.commandHandler.renderContainerHelper(t.source)).id||d.nodes[0].isLane||d.nodes[0].isPhase)&&"helper"===p.id||(!(p instanceof Dl&&p.width==this.undoElement.width&&p.height==this.undoElement.height)&&p instanceof Dl||p.offsetX===this.undoElement.offsetX&&p.offsetY===this.undoElement.offsetY&&p.sourcePoint===this.undoElement.sourcePoint&&p.targetPoint===this.undoElement.targetPoint)&&!this.isSelectionHasConnector(p)||(t.source&&(o={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY},n={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY}),m={source:t.source,state:"Completed",oldValue:n,newValue:o,target:this.currentTarget,targetPosition:this.currentPosition,allowDrop:!0,cancel:!1},m={source:Ls(t.source),state:"Completed",oldValue:Ls(n),newValue:Ls(o),target:Ls(this.currentTarget),targetPosition:Ls(this.currentPosition),allowDrop:m.allowDrop,cancel:m.cancel},Object(r.I)()&&(m=this.getBlazorPositionChangeEventArgs(m,this.currentTarget)),Object(r.I)()||this.commandHandler.triggerEvent(ve.positionChange,m),i||(this.commandHandler.startGroupAction(),h=!0,w={type:"PositionChanged",redoObject:uc(d),undoObject:uc(this.undoElement),category:"Internal"},d.nodes[0]&&d.nodes[0].processId&&(g={type:"SizeChanged",category:"Internal",undoObject:this.undoParentElement,redoObject:this.commandHandler.getSubProcess(t.source)},this.commandHandler.addHistoryEntry(g)),this.commandHandler.addHistoryEntry(w))),this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,0,0),this.commandHandler.removeSnap(),this.commandHandler.removeHighlighter(),t.source&&this.currentTarget&&so(this.currentTarget)&&this.commandHandler.isDroppable(t.source,this.currentTarget)?(this.commandHandler.drop(this.currentElement,this.currentTarget,this.currentPosition),m={element:t.source,target:this.currentTarget,position:this.currentPosition,cancel:!1},Object(r.I)()?(m=function(e,t){if(Object(r.I)()){var i=Ps(e.source)===_r,n=Ls(e.source),o=Ls(e.target);t={element:i?{connector:n.connectors[0],connectorId:n.connectors[0].id}:{node:n.nodes[0],nodeId:n.nodes[0].id},target:i?{connector:o}:{node:o},position:t.position,cancel:t.cancel}}return t}(t,m),[4,this.commandHandler.triggerEvent(ve.drop,m)]):[3,5]):[3,7]);case 4:return m=x.sent()||m,[3,6];case 5:this.commandHandler.triggerEvent(ve.drop,m),x.label=6;case 6:if(!m.cancel&&t.source&&this.commandHandler.isParentAsContainer(this.currentTarget)){for(v=t.source instanceof Dl?t.source.nodes:[t.source],y=!1,b=0;b<v.length;b++)v[b].container||(y=!0,this.commandHandler.dropChildToContainer(this.currentTarget,v[b]),this.commandHandler.renderContainerHelper(v[b]));h&&this.commandHandler.isContainer&&y&&this.commandHandler.endGroupAction()}x.label=7;case 7:return t.source&&this.currentTarget&&this.commandHandler.dropAnnotation(t.source,this.currentTarget),this.commandHandler.updateSelector(),h&&!this.commandHandler.isContainer&&this.commandHandler.endGroupAction(),[3,9];case 8:u.nodes.push(uc(t.source)),t.portId=this.portId,d=uc(u),w={type:"PortPositionChanged",objectId:this.portId,redoObject:uc(d),undoObject:uc(this.undoElement),category:"Internal"},this.commandHandler.addHistoryEntry(w),x.label=9;case 9:return this.commandHandler.updateBlazorSelector(),e.prototype.mouseUp.call(this,t),[2]}}))}))},t.prototype.isSelectionHasConnector=function(e){return!(!(e.nodes&&e.connectors&&e.nodes.length>0&&e.connectors.length>0)||e.width===this.undoElement.width&&e.height===this.undoElement.height)},t.prototype.getBlazorPositionChangeEventArgs=function(e,t){return e={source:Ls(e.source),state:e.state,oldValue:e.oldValue,newValue:e.newValue,target:Ps(t)===_r?{connector:Ls(t)}:{node:Ls(t)},targetPosition:this.currentPosition,allowDrop:!0,cancel:!1}},t.prototype.mouseMove=function(t){e.prototype.mouseMove.call(this,t);var i,n,o=!1;(i=this.commandHandler.renderContainerHelper(t.source)||t.source)instanceof Pl||i instanceof _r?i instanceof Pl?i.offsetX===this.undoElement.nodes[0].offsetX&&i.offsetY===this.undoElement.nodes[0].offsetY&&(o=!0):E.equals(i.sourcePoint,this.undoElement.connectors[0].sourcePoint)&&E.equals(i.targetPoint,this.undoElement.connectors[0].targetPoint)&&(o=!0):i.wrapper.offsetX===this.undoElement.wrapper.offsetX&&i.wrapper.offsetY===this.undoElement.wrapper.offsetY&&(o=!0),i&&(n={offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY});var a={source:i,state:"Start",oldValue:n,newValue:n,target:t.target,targetPosition:t.position,allowDrop:!0,cancel:!1};if(a={source:Ls(i),state:"Start",oldValue:Ls(n),newValue:Ls(n),target:t.target,targetPosition:t.position,allowDrop:a.allowDrop,cancel:a.cancel},o&&!Object(r.I)()&&this.commandHandler.triggerEvent(ve.positionChange,a),this.currentPosition=t.position,"Port"!==this.objectType){this.currentPosition.x,this.prevPosition.x,this.currentPosition.y,this.prevPosition.y;var s,l=this.initialOffset.x+(this.currentPosition.x-this.prevPosition.x),c=this.initialOffset.y+(this.currentPosition.y-this.prevPosition.y);this.commandHandler.dragOverElement(t,this.currentPosition),this.commandHandler.disConnect(t.source),this.commandHandler.removeSnap();var d=void 0,h=this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,l,c);this.initialOffset.x=l-h.x,this.initialOffset.y=c-h.y,i&&(s={offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY},d={offsetX:i.wrapper.offsetX+h.x,offsetY:i.wrapper.offsetY+h.y}),this.currentTarget&&t.target!==this.currentTarget&&this.commandHandler.removeChildFromBPmn(t.source,t.target,this.currentTarget),this.currentTarget=t.target;var p={source:i,state:"Progress",oldValue:s,newValue:d,target:t.target,targetPosition:t.position,allowDrop:!0,cancel:!1};if(Object(r.I)()&&(p=this.getBlazorPositionChangeEventArgs(p,t.target)),Object(r.I)()||this.commandHandler.triggerEvent(ve.positionChange,p),!p.cancel&&!this.canCancel){this.blocked=!this.commandHandler.dragSelectedObjects(h.x,h.y);var u=!this.commandHandler.mouseOver(this.currentElement,this.currentTarget,this.currentPosition);this.blocked=this.blocked||u}if(this.commandHandler.removeStackHighlighter(),this.commandHandler.renderStackHighlighter(t),this.currentTarget&&t.source!==this.currentTarget&&this.commandHandler.isDroppable(t.source,this.currentTarget)&&"helper"!==t.source.id){var f=t.source instanceof Dl?t.source.nodes[0]:t.source;this.commandHandler.isParentAsContainer(f,!0)||"SwimLane"===f.shape.type||f.shape.isPhase||(this.currentTarget.isLane?this.commandHandler.renderStackHighlighter(t,this.currentTarget):this.commandHandler.drawHighlighter(this.currentTarget))}else this.commandHandler.removeHighlighter();if(this.commandHandler.canEnableDefaultTooltip()){var g=this.getTooltipContent(t.source);this.commandHandler.showTooltip(t.source,t.position,g,"MoveTool",this.isTooltipVisible),this.isTooltipVisible=!1}}else{var m=W(),v=t.source;q(m,-v.rotateAngle,v.offsetX,v.offsetY);var y=F(m,{x:this.prevPosition.x,y:this.prevPosition.y}),b=F(m,{x:t.position.x,y:t.position.y});this.commandHandler.portDrag(t.source,t.sourceWrapper,b.x-y.x,b.y-y.y)}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.getTooltipContent=function(e){return"X:"+Math.round(e.wrapper.bounds.x)+" Y:"+Math.round(e.wrapper.bounds.y)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.currentTarget=null,this.prevPosition=null},t}(pd),vd=function(e){function t(t){return e.call(this,t,!0)||this}return cd(t,e),t.prototype.mouseDown=function(t){if(Object(r.I)()){var i={rotateAngle:(this.commandHandler.renderContainerHelper(t.source)||t.source).wrapper.rotateAngle},n={source:Ls(t.source),state:"Start",oldValue:i,newValue:void 0,cancel:!1};this.tempArgs=n,this.tempArgs&&this.tempArgs.cancel&&(this.canCancel=!0)}if(this.undoElement=uc(t.source),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var o=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],[]),a=0;a<o.length;a++){var s=this.commandHandler.cloneChild(o[a].id);this.childTable[o[a].id]=uc(s)}e.prototype.mouseDown.call(this,t)},t.prototype.mouseUp=function(t){return dd(this,void 0,void 0,(function(){var i,n,o,a,s,l,c,d,h;return hd(this,(function(p){switch(p.label){case 0:return this.checkPropertyValue(),Object(r.I)()?("diagram","sfBlazor","Blazor",this.commandHandler.updatePropertiesToBlazor(t,!1),i=this.commandHandler.renderContainerHelper(t.source)||t.source,l={rotateAngle:this.tempArgs.oldValue.rotateAngle},n={rotateAngle:i.wrapper.rotateAngle},c={state:"Completed",oldValue:l,newValue:n,cancel:!1},o=void 0,window&&window.Blazor&&this.commandHandler.diagram.rotateChange?(a={EventName:"rotateChange",args:JSON.stringify(c)},[4,window.sfBlazor.updateBlazorDiagramEvents(a,this.commandHandler.diagram)]):[3,2]):[3,3];case 1:o=p.sent(),p.label=2;case 2:o&&o.cancel&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0),this.canCancel=!0),this.canCancel&&(this.commandHandler.insertBlazorObject(t.source),this.commandHandler.rotatePropertyChnage(this.tempArgs.oldValue.rotateAngle)),p.label=3;case 3:return s=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.rotateAngle!==s.wrapper.rotateAngle&&(l={rotateAngle:s.wrapper.rotateAngle},c={source:t.source,state:"Completed",oldValue:l,newValue:l,cancel:!1},Object(r.I)()||this.commandHandler.triggerEvent(ve.rotateChange,c),void 0,d=uc(t.source),h={type:"RotationChanged",redoObject:uc(d),undoObject:uc(this.undoElement),category:"Internal",childTable:this.childTable},this.commandHandler.addHistoryEntry(h),this.commandHandler.updateSelector()),this.commandHandler.updateBlazorSelector(),this.canCancel=void 0,this.tempArgs=void 0,e.prototype.mouseUp.call(this,t),[2]}}))}))},t.prototype.mouseMove=function(t){var i;if(e.prototype.mouseMove.call(this,t),i=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.rotateAngle===i.wrapper.rotateAngle){var n={rotateAngle:i.wrapper.rotateAngle},o={source:t.source,state:"Start",oldValue:n,newValue:n,cancel:!1};Object(r.I)()||this.commandHandler.triggerEvent(ve.rotateChange,o)}this.currentPosition=t.position;var a={x:i.wrapper.offsetX,y:i.wrapper.offsetY},s=E.findAngle(a,this.currentPosition)+90,l=this.commandHandler.snapAngle(s);s=((s=0!==l?l:s)+360)%360;var c={rotateAngle:i.wrapper.rotateAngle},d={rotateAngle:s},h=(t.source,!1),p={source:Ls(t.source),state:"Progress",oldValue:Ls(c),newValue:Ls(d),cancel:h};if(Object(r.I)()||this.commandHandler.triggerEvent(ve.rotateChange,p),(!Object(r.I)()&&!p.cancel||Object(r.I)()&&!this.canCancel)&&(this.blocked=!this.commandHandler.rotateSelectedItems(s-i.wrapper.rotateAngle)),this.commandHandler.canEnableDefaultTooltip()){var u=this.getTooltipContent(t.source);this.commandHandler.showTooltip(t.source,t.position,u,"RotateTool",this.isTooltipVisible),this.isTooltipVisible=!1}return!this.blocked},t.prototype.getTooltipContent=function(e){return Math.round(e.rotateAngle%360).toString()+"\xb0"},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t}(pd),yd=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.initialBounds=new _,n.canCancel=!1,n.corner=i,n}return cd(t,e),t.prototype.mouseDown=function(t){var i;if(Object(r.I)()){this.commandHandler.insertSelectedObjects(),this.startPosition=this.currentPosition=this.prevPosition=t.position,this.currentElement=t.source,this.initialBounds.x=t.source.wrapper.offsetX,this.initialBounds.y=t.source.wrapper.offsetY,this.initialBounds.height=t.source.wrapper.actualSize.height,this.initialBounds.width=t.source.wrapper.actualSize.width,t.source&&(i={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height});var n={source:Ls(t.source),state:"Start",oldValue:i,newValue:Ls(this.currentElement),cancel:!1};this.tempArgs=n}if(this.undoElement=uc(t.source),this.undoParentElement=this.commandHandler.getSubProcess(t.source),e.prototype.mouseDown.call(this,t),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var o=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],[]),a=0;a<o.length;a++){var s=this.commandHandler.cloneChild(o[a].id);this.childTable[o[a].id]=uc(s)}this.commandHandler.checkSelection(t.source,this.corner),e.prototype.mouseDown.call(this,t),this.initialBounds.x=t.source.wrapper.offsetX,this.initialBounds.y=t.source.wrapper.offsetY,this.initialBounds.height=t.source.wrapper.actualSize.height,this.initialBounds.width=t.source.wrapper.actualSize.width},t.prototype.mouseUp=function(t,i){return dd(this,void 0,void 0,(function(){var n,o,a,s,l,c,d,h,p,u,f,g;return hd(this,(function(m){switch(m.label){case 0:return Object(r.I)()?("diagram","sfBlazor","Blazor",this.commandHandler.updatePropertiesToBlazor(t,!1),u=uc(t.source),n={width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height,offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY},p={oldValue:this.tempArgs.oldValue,newValue:n,cancel:!1,state:"Completed"},this.canCancel?[3,3]:(o=void 0,window&&window.Blazor&&this.commandHandler.diagram.sizeChange?(a={EventName:"sizeChange",args:JSON.stringify(p)},[4,window.sfBlazor.updateBlazorDiagramEvents(a,this.commandHandler.diagram)]):[3,2])):[3,4];case 1:o=m.sent(),m.label=2;case 2:o&&o.cancel&&(this.commandHandler.enableCloneObject(!0),this.commandHandler.ismouseEvents(!0),this.commandHandler.insertBlazorObject(t.source),s=this.tempArgs.oldValue.width/u.wrapper.actualSize.width,l=this.tempArgs.oldValue.height/u.wrapper.actualSize.height,this.commandHandler.scaleSelectedItems(s,l,this.getPivot(this.corner))),m.label=3;case 3:this.tempArgs=void 0,this.canCancel=void 0,m.label=4;case 4:return this.checkPropertyValue(),this.commandHandler.removeSnap(),this.commandHandler.updateSelector(),c=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.offsetX===c.wrapper.offsetX&&this.undoElement.offsetY===c.wrapper.offsetY&&this.undoElement.width===c.wrapper.bounds.width&&this.undoElement.height===c.wrapper.bounds.height||(Object(r.I)()||(d=this.updateSize(t.source,this.currentPosition,this.prevPosition,this.corner,this.initialBounds),this.blocked=this.scaleObjects(d.width,d.height,this.corner,this.currentPosition,this.prevPosition,c),h={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},p={source:Ls(t.source),state:"Completed",oldValue:h,newValue:h,cancel:!1},this.commandHandler.triggerEvent(ve.sizeChange,p)),u=uc(t.source),f={type:"SizeChanged",redoObject:uc(u),undoObject:uc(this.undoElement),category:"Internal",childTable:this.childTable},i||(this.commandHandler.startGroupAction(),this.commandHandler.addHistoryEntry(f),u.nodes[0]&&u.nodes[0].processId&&(g={type:"SizeChanged",redoObject:this.commandHandler.getSubProcess(t.source),undoObject:this.undoParentElement,category:"Internal"},this.commandHandler.addHistoryEntry(g)),this.commandHandler.endGroupAction())),this.commandHandler.updateBlazorSelector(),e.prototype.mouseUp.call(this,t),[2,!this.blocked]}}))}))},t.prototype.mouseMove=function(t){var i;if(e.prototype.mouseMove.call(this,t),i=this.commandHandler.renderContainerHelper(t.source)||t.source,this.undoElement.offsetX===i.wrapper.offsetX&&this.undoElement.offsetY===i.wrapper.offsetY){var n={offsetX:t.source.wrapper.offsetX,offsetY:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},o={source:t.source,state:"Start",oldValue:n,newValue:this.currentElement,cancel:!1};Object(r.I)()||this.commandHandler.triggerEvent(ve.sizeChange,o)}this.currentPosition=t.position;var a={x:this.currentPosition.x-this.startPosition.x,y:this.currentPosition.y-this.startPosition.y};a=Cc(-this.currentElement.wrapper.rotateAngle,void 0,void 0,a);this.currentElement.wrapper.actualSize.width,a.x,this.currentElement.wrapper.actualSize.width,this.currentElement.wrapper.actualSize.height,a.y,this.currentElement.wrapper.actualSize.height;a=this.getChanges(a),this.commandHandler.removeSnap();var s=this.updateSize(t.source,this.startPosition,this.currentPosition,this.corner,this.initialBounds);if(this.blocked=!this.scaleObjects(s.width,s.height,this.corner,this.startPosition,this.currentPosition,i),this.commandHandler.canEnableDefaultTooltip()){var l=this.getTooltipContent(t.source);this.commandHandler.showTooltip(t.source,t.position,l,"ResizeTool",this.isTooltipVisible),this.isTooltipVisible=!1}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.getTooltipContent=function(e){return"W:"+Math.round(e.wrapper.bounds.width)+" H:"+Math.round(e.wrapper.bounds.height)},t.prototype.getChanges=function(e){switch(this.corner){case"ResizeEast":return{x:e.x,y:0};case"ResizeSouthEast":return e;case"ResizeSouth":return{x:0,y:e.y};case"ResizeNorth":return{x:0,y:-e.y};case"ResizeNorthEast":return{x:e.x,y:-e.y};case"ResizeNorthWest":return{x:-e.x,y:-e.y};case"ResizeWest":return{x:-e.x,y:0};case"ResizeSouthWest":return{x:-e.x,y:e.y}}return e},t.prototype.scaleObjects=function(e,t,i,n,o,a){a instanceof Dl&&1===a.nodes.length&&a.nodes[0].constraints&ne.AspectRatio&&("ResizeWest"===i||"ResizeEast"===i||"ResizeNorth"===i||"ResizeSouth"===i?1===t&&1===e||(t=e=Math.max(1===t?0:t,1===e?0:e)):t=e=n!==o?Math.max(t,e):0);var s={offsetX:a.offsetX,offsetY:a.offsetY,width:a.width,height:a.height};this.blocked=this.commandHandler.scaleSelectedItems(e,t,this.getPivot(this.corner));var l,c,d={offsetX:a.offsetX,offsetY:a.offsetY,width:a.width,height:a.height};return l={source:a,state:"Progress",oldValue:s,newValue:d,cancel:!1},c={source:Ls(a),state:"Progress",oldValue:Ls(s),newValue:Ls(d),cancel:l.cancel},Object(r.I)()||this.commandHandler.triggerEvent(ve.sizeChange,c),(c.cancel||this.canCancel)&&this.commandHandler.scaleSelectedItems(1/e,1/t,this.getPivot(this.corner)),this.blocked},t}(pd),bd=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.sourceObject=i,n}return cd(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.inAction=!0,this.commandHandler.setFocus()},t.prototype.mouseMove=function(t){var i;e.prototype.mouseMove.call(this,t);var n={offsetX:this.currentPosition.x,width:3,height:3,offsetY:this.currentPosition.y};if(this.drawingObject||(this.drawingObject=this.commandHandler.drawObject(n)),this.inAction&&!1===E.equals(this.currentPosition,this.prevPosition)){var r=_.toBounds([this.prevPosition,this.currentPosition]);(i=this.commandHandler.checkBoundaryConstraints(void 0,void 0,r))&&this.commandHandler.updateNodeDimension(this.drawingObject,r)}return i},t.prototype.mouseUp=function(t){this.checkPropertyValue();var i=_.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.checkBoundaryConstraints(void 0,void 0,i),this.drawingObject&&this.drawingObject instanceof Pl&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.drawingObject=null),this.commandHandler.updateBlazorSelector(),e.prototype.mouseUp.call(this,t),this.inAction=!1},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(pd),wd=function(e){function t(t,i,n){var r=e.call(this,t,i)||this;return r.sourceObject=n,r}return cd(t,e),t.prototype.mouseDown=function(t){return dd(this,void 0,void 0,(function(){return hd(this,(function(i){return e.prototype.mouseDown.call(this,t),this.inAction=!0,this.commandHandler.setFocus(),[2]}))}))},t.prototype.mouseMove=function(t){if(this.commandHandler.enableServerDataBinding(!1),this.inAction){var i={sourcePoint:this.currentPosition,targetPoint:this.currentPosition};this.drawingObject||(this.drawingObject=this.commandHandler.drawObject(i)),t.source=this.drawingObject,(t.target&&t.target instanceof Pl||t.actualObject&&t.sourceWrapper&&Ds(t.actualObject,t.sourceWrapper))&&("ConnectorTargetEnd"!==this.endPoint||io(t.target))&&this.commandHandler.connect(this.endPoint,t),this.endPoint="ConnectorTargetEnd"}return this.inAction||(this.commandHandler.updateSelector(),t.source&&t.sourceWrapper&&this.commandHandler.renderHighlighter(t,!0)),e.prototype.mouseMove.call(this,t),this.commandHandler.enableServerDataBinding(!0),!this.blocked},t.prototype.mouseUp=function(t){return dd(this,void 0,void 0,(function(){return hd(this,(function(i){return this.commandHandler.enableServerDataBinding(!1),this.checkPropertyValue(),this.drawingObject&&this.drawingObject instanceof _r&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.drawingObject=null),this.commandHandler.updateBlazorSelector(),this.inAction=!1,this.commandHandler.enableServerDataBinding(!0),e.prototype.mouseUp.call(this,t),[2]}))}))},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(gd),xd=function(e){function t(t){return e.call(this,t,!0)||this}return cd(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.commandHandler.clearSelection();var i={shape:{type:"Text"},offsetX:this.currentPosition.x,offsetY:this.currentPosition.y};t.source||(this.drawingNode=this.commandHandler.drawObject(i))},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.drawingNode)this.drawingNode.style.strokeColor="black",this.drawingNode.style.strokeDashArray="2 2",this.drawingNode.style.fill="transparent";else{var i={shape:{type:"Text"},offsetX:this.currentPosition.x,width:30,height:30,offsetY:this.currentPosition.y};this.drawingNode=this.commandHandler.drawObject(i),this.drawingNode.style.strokeDashArray="2 2",this.drawingNode.style.fill="transparent"}if(this.inAction&&!1===E.equals(this.currentPosition,this.prevPosition)){var n=_.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.updateNodeDimension(this.drawingNode,n)}return!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.drawingNode?(this.drawingNode.style.strokeColor="none",this.drawingNode.style.fill="none"):this.drawingNode=t.source,this.drawingNode&&(this.drawingNode instanceof Pl||this.drawingNode instanceof _r)&&this.commandHandler.addText(this.drawingNode,this.currentPosition),e.prototype.mouseUp.call(this,t),this.inAction=!1},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t}(pd),Od=function(e){function t(t,i){var n=e.call(this,t)||this;return n.zooming=i,n}return cd(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.inAction=!0,this.commandHandler.setBlazorDiagramProps(!0)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction)if(this.zooming||!1!==E.equals(this.currentPosition,this.prevPosition)){if(t.moveTouches&&t.moveTouches.length&&t.moveTouches.length>=2){var i=t.startTouches[0],n=t.startTouches[1],r=t.moveTouches[0],o=t.moveTouches[1],a=this.getDistance(r,o)/this.getDistance(i,n),s=t.position;this.commandHandler.zoom(a,0,0,s),this.updateTouch(i,r),this.updateTouch(n,o)}}else{var l=this.currentPosition.x-this.prevPosition.x,c=this.currentPosition.y-this.prevPosition.y;this.commandHandler.scroll(l,c,this.currentPosition)}return this.commandHandler.dataBinding(),!this.blocked},t.prototype.mouseUp=function(t){this.commandHandler.setBlazorDiagramProps(!1),this.checkPropertyValue(),this.commandHandler.updatePanState(!1),e.prototype.mouseUp.call(this,t),this.inAction=!1},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.getDistance=function(e,t){var i=t.pageX-e.pageX,n=t.pageY-e.pageY;return Math.sqrt(i*i+n*n)},t.prototype.updateTouch=function(e,t){e.pageX=t.pageX,e.pageY=t.pageY},t}(pd),Sd=function(e){function t(t){return e.call(this,t,!0)||this}return cd(t,e),t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.commandHandler.initExpand(t),e.prototype.mouseUp.call(this,t)},t}(pd),Cd=function(e){function t(t){return e.call(this,t,!0)||this}return cd(t,e),t.prototype.mouseUp=function(t){this.checkPropertyValue(),window.open(t.sourceWrapper.hyperlink.link,"_blank").focus(),e.prototype.mouseUp.call(this,t)},t}(pd),Pd=function(e){function t(t){return e.call(this,t,!0)||this}return cd(t,e),t.prototype.mouseDown=function(t){if(e.prototype.mouseDown.call(this,t),this.inAction=!0,this.drawingObject){var i=void 0,n=this.drawingObject.shape;i={x:(i=n.points[n.points.length-1]).x,y:i.y},this.drawingObject.shape.points.push(i)}else{this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var o={offsetX:this.currentPosition.x,offsetY:this.currentPosition.y,width:5,height:5,style:{strokeColor:"black",strokeWidth:1},shape:{type:"Basic",shape:"Polygon",points:[{x:this.startPoint.x,y:this.startPoint.y},{x:this.currentPosition.x,y:this.currentPosition.y}]}};Object(r.I)()&&"Basic"===o.shape.type&&(o.shape.basicShape="Polygon"),this.drawingObject=this.commandHandler.drawObject(o)}},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction){var i=this.drawingObject.shape;if(this.drawingObject&&this.currentPosition&&(i.points[i.points.length-1].x=this.currentPosition.x,i.points[i.points.length-1].y=this.currentPosition.y,this.drawingObject.wrapper.children[0].data=A(this.drawingObject.shape.points),this.inAction&&!1===E.equals(this.currentPosition,this.prevPosition))){var n=_.toBounds(this.drawingObject.shape.points);this.commandHandler.updateNodeDimension(this.drawingObject,n)}}return!0},t.prototype.mouseUp=function(t,i){this.checkPropertyValue(),e.prototype.mouseMove.call(this,t),this.inAction&&(this.inAction=!1,this.drawingObject&&this.commandHandler.addObjectToDiagram(this.drawingObject)),this.endAction()},t.prototype.mouseWheel=function(t){e.prototype.mouseWheel.call(this,t),this.mouseMove(t)},t.prototype.endAction=function(){this.inAction=!1,this.drawingObject=null},t}(pd),jd=function(e){function t(t){return e.call(this,t,!0)||this}return cd(t,e),t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction){var i=this.drawingObject;i.targetPoint=this.currentPosition,this.commandHandler.updateConnectorPoints(i)}return!0},t.prototype.mouseDown=function(t){if(e.prototype.mouseDown.call(this,t),this.inAction=!0,this.drawingObject){var i=this.drawingObject,n=void 0;(n=new jr(i,"segments",{type:"Straight"},!0)).point=this.currentPosition,i.segments[i.segments.length-1]=n}else{var r={id:"Connector",type:"Straight",sourcePoint:this.currentPosition,targetPoint:this.currentPosition};this.drawingObject=this.commandHandler.drawObject(r)}},t.prototype.mouseWheel=function(t){e.prototype.mouseWheel.call(this,t),this.mouseMove(t)},t.prototype.mouseUp=function(t){if(this.checkPropertyValue(),e.prototype.mouseMove.call(this,t),this.inAction&&this.drawingObject){var i=this.drawingObject;i.segments[i.segments.length-1].point={x:0,y:0},this.commandHandler.addObjectToDiagram(this.drawingObject)}this.endAction()},t.prototype.endAction=function(){this.drawingObject=null,this.inAction=!1},t}(pd),Id=function(e){function t(t){return e.call(this,t,!0)||this}return cd(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,this.undoElement=uc(t.source),this.annotationId=t.sourceWrapper.id,e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){e.prototype.mouseMove.call(this,t);var i=this.currentPosition.x-this.prevPosition.x,n=this.currentPosition.y-this.prevPosition.y,r=t.source;if(r instanceof Pl){var o=W();q(o,-r.rotateAngle,0,0);var a=F(o,{x:i,y:n});i=a.x,n=a.y}return this.inAction&&(this.commandHandler.labelDrag(t.source,t.sourceWrapper,i,n),this.commandHandler.updateSelector()),this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue();var i=t.source;this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,undoObject:uc(this.undoElement),category:"Internal",redoObject:uc(i)};this.commandHandler.addHistoryEntry(n),e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t}(pd),Ed=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.corner=i,n}return cd(t,e),t.prototype.mouseDown=function(t){this.inAction=!0;var i=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];this.annotationId=t.source.wrapper.children[0].id,this.undoElement=uc(i);var n=t.source.wrapper.children[0];this.initialBounds={x:n.offsetX,y:n.offsetY,width:n.actualSize.width,height:n.actualSize.height},e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){return e.prototype.mouseMove.call(this,t),this.inAction&&this.resizeObject(t),!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue();var i=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:uc(i),undoObject:uc(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.resizeObject=function(e){var t;t=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];var i,n,r=e.source.wrapper.children[0],o={x:r.offsetX,y:r.offsetY},a=r.rotateAngle;a=((a+=t instanceof Pl?t.rotateAngle:0)+360)%360;var s=W();q(s,a,o.x,o.y);var l=this.corner.slice(5),c=this.updateSize(r,this.startPosition,this.currentPosition,l,this.initialBounds,a),d=r.offsetX-r.actualSize.width*r.pivot.x,h=r.offsetY-r.actualSize.height*r.pivot.y,p=this.getPivot(l),u=F(s,p={x:d+r.actualSize.width*p.x,y:h+r.actualSize.height*p.y});c.x=u.x,c.y=u.y,i=(i=c.width)<0?1:i,n=(n=c.height)<0?1:n,this.commandHandler.labelResize(t,e.source.annotation,i,n,c,e.source),this.commandHandler.updateSelector()},t}(pd),Td=function(e){function t(t){return e.call(this,t,!0)||this}return cd(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,this.annotationId=t.source.wrapper.children[0].id;var i=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];this.undoElement=uc(i),e.prototype.mouseDown.call(this,t)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),t.source&&this.inAction){var i,n=t.source.nodes[0]?t.source.nodes[0]:t.source.connectors[0];i=t.source.annotation,this.commandHandler.labelRotate(n,i,this.currentPosition,t.source),this.commandHandler.updateSelector()}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.inAction=!1;var i=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0],n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:uc(i),undoObject:uc(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t}(pd),Ad=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dd=function(e){function t(t,i){var n=e.call(this,t,!0)||this;return n.endPoint=i,n}return Ad(t,e),t.prototype.mouseDown=function(t){var i,n=!0;if(t.source&&t.source.connectors&&(i=t.source.connectors[0]),t.info&&(n=t.info.ctrlKey&&"Orthogonal"!==t.actualObject.type),i&&n){this.inAction=!0,this.undoElement=uc(t.source),e.prototype.mouseDown.call(this,t);for(var r=0;r<i.segments.length;r++){var o=i.segments[r];if("OrthoThumb"===this.endPoint)for(var a=0;a<o.points.length-1;a++){var s={x:0,y:0};s.x=(o.points[a].x+o.points[a+1].x)/2,s.y=(o.points[a].y+o.points[a+1].y)/2,id(this.currentPosition,s,30)&&(this.selectedSegment=o,this.segmentIndex=a)}else id(this.currentPosition,o.point,10)&&(this.selectedSegment=o)}}},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.currentPosition=t.position,this.currentPosition&&this.prevPosition){var i=this.currentPosition.y-this.prevPosition.y,n=this.currentPosition.x-this.prevPosition.x;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var r=void 0;if(t.source&&t.source.connectors&&(r=t.source.connectors[0]),this.inAction&&void 0!==this.selectedSegment&&void 0!==this.endPoint&&(0!==n||0!==i)){if("OrthoThumb"===this.endPoint)this.blocked=!this.dragOrthogonalSegment(r,this.selectedSegment,this.currentPosition,this.segmentIndex);else{var o=this.currentPosition.x-this.selectedSegment.point.x,a=this.currentPosition.y-this.selectedSegment.point.y,s=r.segments.indexOf(this.selectedSegment);this.blocked=!this.commandHandler.dragControlPoint(r,o,a,!1,s)}this.commandHandler.updateSelector()}}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseUp=function(t){var i,n;if(t.source&&t.source.connectors&&(n={segments:(i=t.source.connectors[0]).segments}),t&&t.source&&t.info&&t.info.ctrlKey&&t.info.shiftKey&&"Straight"===i.type)this.addOrRemoveSegment(i,this.currentPosition);else if("OrthoThumb"===this.endPoint&&this.selectedSegment){var r=i.segments.indexOf(this.selectedSegment),o=i.segments[r-1],a=i.segments[r+1];if(r===i.segments.length-2&&this.updateLastSegment(i,this.selectedSegment))i.segments.splice(i.segments.length-2,1);else if(o&&Math.abs(o.length)<5)1!==r&&this.removePrevSegment(i,r);else if(a){var s=E.distancePoints(a.points[0],a.points[1]),l=a.length||0===a.length?a.length:s;Math.abs(l)<=5&&this.removeNextSegment(i,r)}this.commandHandler.updateEndPoint(i,n)}if(this.undoElement){var c={type:"SegmentChanged",redoObject:uc(t.source),undoObject:this.undoElement,category:"Internal"};this.commandHandler.addHistoryEntry(c)}e.prototype.mouseUp.call(this,t)},t.prototype.removePrevSegment=function(e,t){var i=e.segments[t-2],n=e.segments[t+1];if(!((n.length||0===n.length?n.length:E.distancePoints(n.points[0],n.points[1]))<=5)){var o=e.segments.slice(t-1,t+1),a={element:e,removeSegments:o,type:"Removal",cancel:!1};if(Object(r.I)()&&(a={element:Ls(e),removeSegments:Ls(o),type:"Removal",cancel:a.cancel}),this.commandHandler.triggerEvent(ve.segmentCollectionChange,a),!a.cancel){var s=e.segments[t+1];e.segments.splice(t-1,2);var l=this.selectedSegment;"Left"===l.direction||"Right"===l.direction?(i.points[i.points.length-1].x=s.points[0].x,s.points[0].y=i.points[i.points.length-1].y):(i.points[i.points.length-1].y=s.points[0].y,s.points[0].x=i.points[i.points.length-1].x),(l.length||0===l.length)&&this.findSegmentDirection(i),this.findSegmentDirection(s)}}},t.prototype.findSegmentDirection=function(e){e.direction&&(e.length||0===e.length)&&(e.length=E.distancePoints(e.points[0],e.points[e.points.length-1]),e.direction=E.direction(e.points[0],e.points[e.points.length-1]))},t.prototype.removeNextSegment=function(e,t){var i,n,o=this.selectedSegment,a=e.segments[t-1],s=e.segments[t+2],l=e.segments[t+1];if(l.length||0===l.length?(i=e.segments.slice(t,2),n={element:e,removeSegments:i,type:"Removal",cancel:!1},n={element:Ls(e),removeSegments:Ls(i),type:"Removal",cancel:!1},Object(r.I)()&&(n={element:Ls(e),removeSegments:Ls(i),type:"Removal",cancel:!1}),this.commandHandler.triggerEvent(ve.segmentCollectionChange,n),n.cancel||(e.segments.splice(t,2),"Top"===o.direction||"Bottom"===o.direction?(s.points[0].y=o.points[0].y,a.points[a.points.length-1].x=s.points[0].x):(s.points[0].x=o.points[0].x,a.points[a.points.length-1].y=s.points[0].y))):(i=e.segments.slice(t+1,1),n={element:e,removeSegments:i,type:"Removal",cancel:!1},Object(r.I)()&&(n={element:e,removeSegments:i,type:"Removal",cancel:!1}),this.commandHandler.triggerEvent(ve.segmentCollectionChange,n),n.cancel||(e.segments.splice(t+1,1),"Top"===o.direction||"Bottom"===o.direction?a.points[a.points.length-1].x=l.points[l.points.length-1].x:a.points[a.points.length-1].y=l.points[l.points.length-1].y,this.findSegmentDirection(a),o.length=o.direction=null)),a&&s&&!n.cancel&&(a.length=E.distancePoints(a.points[0],s.points[0]),a.direction=E.direction(a.points[0],s.points[0]),s.length||0===s.length)){s.length=E.distancePoints(a.points[a.points.length-1],s.points[s.points.length-1]);var c=a.points,d=s.points;s.direction=E.direction(c[c.length-1],d[d.length-1])}},t.prototype.addOrRemoveSegment=function(e,t){for(var i,n,r={segments:e.segments},o=0;o<e.segments.length;o++){id(t,(a=e.segments[o]).point,e.hitPadding)&&(n=o,i=!0)}if(i&&void 0!==n){if(e.segments&&e.segments[n]&&"Straight"===e.segments[n].type){var a=e.segments[n],s=e.segments[n+1];s&&(e.segments.splice(n,1),s.points[0]=a.points[0])}}else{this.commandHandler.enableServerDataBinding(!1);var l=this.findIndex(e,t);if(e.segments&&e.segments[l]&&"Straight"===e.segments[l].type){a=e.segments[l];var c=new jr(e,"segments",{type:"Straight",point:t},!0);c.points[0]=a.points[0],c.points[1]=t,a.points[0]=t,e.segments.splice(l,0,c),i=!0}this.commandHandler.enableServerDataBinding(!0)}i&&this.commandHandler.updateEndPoint(e,r)},t.prototype.findIndex=function(e,t){for(var i=[],n=0;n<e.segments.length;n++){var r=e.segments[n],o=_.toBounds([r.points[0],r.points[1]]);o.Inflate(e.hitPadding),o.containsPoint(t)&&i.push(r)}if(1===i.length)return e.segments.indexOf(i[0]);var a=void 0,s=void 0,l=void 0,c=void 0,d=void 0,h=void 0;for(n=0;n<i.length;n++)c=i[n],d=(t.y-c.points[0].y)/(c.points[1].y-t.y),h=(t.x-c.points[0].x)/(c.points[1].x-t.x),a=Math.abs(d-h),0===n&&(s=a,l=0),a<s&&(s=a,l=n);return e.segments.indexOf(i[l])},t.prototype.dragOrthogonalSegment=function(e,t,i,n){var r={x:0,y:0},o={segments:e.segments};r.x=(t.points[n].x+t.points[n+1].x)/2,r.y=(t.points[n].y+t.points[n+1].y)/2;var a=i.y-r.y,s=i.x-r.x,l=e.segments.indexOf(t),c=!1;t.points[0].y.toFixed(2),t.points[1].y.toFixed(2);return-1!==l&&(0===l&&1===e.segments.length&&2===t.points.length?(l=this.addSegments(e,t,s,a,l),c=!0):l!==e.segments.length-1||null!==t.direction&&null!==t.length?0===l&&(l=this.insertFirstSegment(e,t,s,a,l),c=!0):(l=this.addTerminalSegment(e,t,s,a,n),c=!0),l&&(c&&(this.selectedSegment=t=e.segments[l],this.segmentIndex=0),this.updateAdjacentSegments(e,l,s,a),this.commandHandler.updateEndPoint(e,o))),!0},t.prototype.addSegments=function(e,t,i,n,o){var a,s,l,c=[],d=E.distancePoints(t.points[0],t.points[1]),h=E.direction(t.points[0],t.points[1]);c.push(new Er(e,"segments",{type:"Orthogonal",direction:h,length:d/4},!0)),s=t.points[0].y===t.points[1].y?n>0?"Bottom":"Top":i>0?"Right":"Left",l=t.points[0].x===t.points[1].x?n:i,c.push(new Er(e,"segments",{type:"Orthogonal",direction:s,length:l},!0)),c.push(new Er(e,"segments",{type:"Orthogonal",direction:h,length:d/2},!0));var p={element:e,addSegments:c,type:"Addition",cancel:!1};return Object(r.I)()&&(p={addSegments:Ls(c),type:"Addition",cancel:p.cancel,element:Ls(e)}),this.commandHandler.triggerEvent(ve.segmentCollectionChange,p),p.cancel||(e.segments=c.concat(e.segments),a=o+2),a},t.prototype.insertFirstSegment=function(e,t,i,n,o){var a,s,l,c,d,h=[];if(e.sourcePortID&&t.length&&e.segments[0].points.length>2)for(var p=void 0,u=0;u<t.points.length-1;u++){var f=E.distancePoints(t.points[u],t.points[u+1]),g=E.direction(t.points[u],t.points[u+1]);0===(d=new Er(e,"segments",{type:"Orthogonal",direction:g,length:f},!0)).length&&(!p||"Top"!==p.direction&&"Bottom"!==p.direction?d.direction=n>0?"Bottom":"Top":d.direction=i>0?"Right":"Left"),p=d,h.push(d)}else l={type:"Orthogonal",direction:t.direction,length:t.length/3},h.push(new Er(e,"segments",l,!0)),"Bottom"===t.direction||"Top"===t.direction?(s=Math.abs(i),a=i>0?"Right":"Left"):(s=Math.abs(n),a=n>0?"Bottom":"Top"),d=new Er(e,"segments",{type:"Orthogonal",direction:a,length:s},!0),h.push(d);var m={element:e,addSegments:h,type:"Addition",cancel:!1};if(Object(r.I)()&&(m={element:Ls(e),addSegments:Ls(h),type:"Addition",cancel:m.cancel}),this.commandHandler.triggerEvent(ve.segmentCollectionChange,m),!m.cancel){if(e.sourcePortID&&t.length&&e.segments[0].points.length>2)e.segments.splice(0,1),c=1;else{var v=e.segments[1];v&&v.length&&(v.length=a!==v.direction?v.length+s:v.length-s),c=2,t.length=2*t.length/3}e.segments=h.concat(e.segments)}return c},t.prototype.updateAdjacentSegments=function(e,t,i,n){var r=e.segments[t],o=r.points[r.points.length-1],a=r.points[0],s=!0;if("Orthogonal"===r.type&&(r.points[0]=a,r.points[r.points.length-1]=o,e.segments[t-1]&&(s=this.updatePreviousSegment(i,n,e,t)),e.segments.length-1>t&&s)){var l=e.segments[t+1];this.updateNextSegment(e,r,l,i,n)}},t.prototype.addTerminalSegment=function(e,t,i,n,o){e.segments;var a,s,l,c,d=e.segments.indexOf(t),h=[],p=e.segments.pop(),u=e.segments[e.segments.length-1];a=u&&"Orthogonal"===u.type?u:null;for(var f=0;f<t.points.length-2;f++)l=E.distancePoints(t.points[f],t.points[f+1]),c=E.direction(t.points[f],t.points[f+1]),s=new Er(e,"segments",{type:"Orthogonal",length:l,direction:c},!0),h.push(s),a=s;var g=o;if((2===t.points.length||g===t.points.length-2)&&(a&&(a.length+=5),void 0!==g)){var m;l=2*E.distancePoints(t.points[t.points.length-2],t.points[t.points.length-1])/3,c=E.direction(t.points[t.points.length-2],t.points[t.points.length-1]),m=new Er(e,"segments",{type:"Orthogonal",length:l,direction:c}),h.push(m)}var v=new Er(e,"segments",{type:"Orthogonal"},!0);h.push(v);var y,b=!1;return y={element:Ls(e),addSegments:Ls(h),type:"Addition",cancel:b},Object(r.I)()&&(y={element:Ls(e),addSegments:Ls(h),type:"Addition",cancel:b}),this.commandHandler.triggerEvent(ve.segmentCollectionChange,y),y.cancel?e.segments.push(p):(e.segments=e.segments.concat(h),d+=o),this.commandHandler.updateEndPoint(e),d},t.prototype.updatePortSegment=function(e,t,i,n,r){if(1===i&&2===e.points.length&&e.length<0){var o=t.sourceWrapper.corners,a=t.segments[i],s=t.segments[i+1],l=void 0,c=[];l=new Er(t,"segments",{type:"Orthogonal",length:13,direction:e.direction}),c.push(l);var d=void 0;d="Left"===a.direction?a.points[0].x-(o.middleLeft.x-20):"Right"===a.direction?o.middleRight.x+20-a.points[0].x:"Bottom"===a.direction?o.bottomCenter.y+20-a.points[0].y:a.points[0].y-(o.topCenter.y-20);a.direction;l=new Er(t,"segments",{type:"Orthogonal",length:d,direction:a.direction}),c.push(l),a.length=a.length-d,s&&s.length&&s.direction&&(s.direction===e.direction?s.length-=13:s.direction===Jt(e.direction)&&(s.length+=13)),t.segments=c.concat(t.segments),this.selectedSegment=t.segments[3]}},t.prototype.updatePreviousSegment=function(e,t,i,n){var r=i.segments[n],o=i.segments[n-1];o.points[o.points.length-1]=r.points[0];var a=!i.sourceID||""!==i.sourcePortID,s=!0;return"Orthogonal"===o.type&&("Bottom"===o.direction?o.length+=t:"Top"===o.direction?o.length-=t:"Right"===o.direction?o.length+=e:o.length-=e,""!==i.sourcePortID&&o.length<0?this.updatePortSegment(o,i,n,e,t):i.sourceID&&""===i.sourcePortID&&o.length<0&&1===n&&(s=!1,this.updateFirstSegment(i,r)),a&&this.changeSegmentDirection(o)),s},t.prototype.changeSegmentDirection=function(e){e.length<0&&(e.direction=Jt(e.direction),e.length*=-1)},t.prototype.updateNextSegment=function(e,t,i,n,r){t.points[t.points.length-1];i.points[0]=t.points[t.points.length-1],i&&"Orthogonal"===i.type&&(i.length||0===i.length)&&("Left"===i.direction||"Right"===i.direction?0!==n&&(i.length="Right"===i.direction?i.length-n:i.length+n,(i.length||0===i.length)&&this.changeSegmentDirection(i)):0!==r&&(i.length="Bottom"===i.direction?i.length-r:i.length+r,(i.length||0===i.length)&&this.changeSegmentDirection(i)))},t.prototype.updateFirstSegment=function(e,t){var i,n=e.segments.indexOf(t),r=!1,o=e.segments[n],a=e.segments[n-1],s={segments:e.segments};if(a.length<0&&e.sourceID){var l=e.sourceWrapper.corners,c=[],d=void 0,h=!1;this.changeSegmentDirection(o);var p=e.segments[n+1],u=e.segments[n+2];switch(p&&this.changeSegmentDirection(p),u&&this.changeSegmentDirection(u),a.direction){case"Top":case"Bottom":i=o.length>0&&"Left"===o.direction?l.middleLeft:l.middleRight,o.length>l.width/2?Math.abs(a.length)<l.height/2&&(a.length=E.distancePoints(l.center,a.points[a.points.length-1]),o.points[0].x=i.x,o.length=E.distancePoints(o.points[0],o.points[o.points.length-1]),o.length-=20,r=!0):(p&&p.direction&&p.length&&(p.points[0].y=i.y,p.points[0].x=p.points[p.points.length-1].x="Right"===o.direction?i.x+20:i.x-20),r=!0,h=!0);break;case"Left":case"Right":i=o.length>0&&"Top"===o.direction?l.topCenter:l.bottomCenter,o.length>l.height/2?Math.abs(a.length)<l.width/2&&(a.length=E.distancePoints(l.center,a.points[a.points.length-1]),o.points[0].y=i.y,o.length=E.distancePoints(o.points[0],o.points[o.points.length-1]),o.length-=20,r=!0):(p&&p.direction&&p.length&&(p.points[0].x=i.x,p.points[0].y=p.points[p.points.length-1].y="Bottom"===o.direction?i.y+20:i.y-20),r=!0,h=!0)}this.changeSegmentDirection(a),this.changeSegmentDirection(o),r&&(d={type:"Orthogonal",direction:o.direction,length:20},c.push(new Er(e,"segments",d,!0)),h&&(p&&p.direction&&p.length&&(p.length=E.distancePoints(p.points[0],p.points[p.points.length-1])),u&&u.direction&&u.length&&(u.length=E.distancePoints(p.points[p.points.length-1],u.points[u.points.length-1])),e.segments.splice(n-1,2)),e.segments=c.concat(e.segments)),this.selectedSegment=h?e.segments[n-1]:e.segments[n+1],this.commandHandler.updateEndPoint(e,s)}},t.prototype.updateLastSegment=function(e,t){if(e.targetID&&""===e.targetPortID){var i=void 0,n=void 0,r=void 0,o=void 0,a=e.targetWrapper.corners,s=t.points[0],l=t.points[t.points.length-1];return"Right"===t.direction||"Left"===t.direction?(i={x:s.x,y:s.y},n={x:"Left"===t.direction?l.x-a.width/2:l.x+a.width/2,y:l.y},r={x:a.center.x,y:a.center.y-a.height},o={x:a.center.x,y:a.center.y+a.height}):(i={x:s.x,y:s.y},n={x:l.x,y:"Bottom"===t.direction?l.y+a.height/2:l.y-a.height/2},r={x:a.center.x-a.width,y:a.center.y},o={x:a.center.x+a.width,y:a.center.y}),Wa({x1:i.x,y1:i.y,x2:n.x,y2:n.y},{x1:r.x,y1:r.y,x2:o.x,y2:o.y}).enabled}return!1},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"ConnectorEditingTool"},t}(pd),kd=function(){function e(e,t){this.currentAction="None",this.previousAction="None",this.focus=!1,this.isBlocked=!1,this.isMouseDown=!1,this.inAction=!1,this.doingAutoScroll=!1,this.diagram=null,this.objectFinder=null,this.tool=null,this.eventArgs=null,this.keyArgs={},this.diagram=e,this.objectFinder=new Md,this.commandHandler=t}return Object.defineProperty(e.prototype,"action",{get:function(){return this.currentAction},set:function(e){e!==this.currentAction&&("PortDraw"===this.currentAction&&(this.diagram.tool&=~se.DrawOnce,this.tool&&this.tool.mouseUp({position:this.currentPosition}),this.tool=null),"Rotate"===e||"LabelRotate"===e?this.diagram.diagramCanvas.classList.add("e-diagram-rotate"):"Rotate"!==this.currentAction&&"LabelRotate"!==this.currentAction||this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),this.currentAction=e,"None"!==this.currentAction&&"Select"!==this.currentAction&&!(this.diagram.diagramActions&pe.TextEdit)||this.commandHandler.isUserHandle(this.currentPosition)?this.diagram.diagramActions=this.diagram.diagramActions|pe.ToolAction:this.diagram.diagramActions=this.diagram.diagramActions&~pe.ToolAction,this.diagram.setCursor(this.diagram.getCursor(e,this.inAction)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blocked",{get:function(){return this.isBlocked},set:function(e){this.isBlocked=e,this.blocked?this.diagram.setCursor("not-allowed"):this.diagram.setCursor(this.diagram.getCursor(this.action,this.inAction))},enumerable:!0,configurable:!0}),e.prototype.getMousePosition=function(e){var t,i,n;-1!==e.type.indexOf("touch")?(i=(t=e).changedTouches[0].clientX,n=t.changedTouches[0].clientY):(i=e.clientX,n=e.clientY);var r=new P;r=Yr(this.diagram);var o=this.diagram.element.getBoundingClientRect();return i=i+this.diagram.diagramCanvas.scrollLeft-o.left-r.width,n=n+this.diagram.diagramCanvas.scrollTop-o.top-r.height,i/=this.diagram.scroller.transform.scale,n/=this.diagram.scroller.transform.scale,{x:i-=this.diagram.scroller.transform.tx,y:n-=this.diagram.scroller.transform.ty}},e.prototype.windowResize=function(e){var t=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout((function(){t.updateViewPortSize(t.diagram.element)}),300),!1},e.prototype.updateViewPortSize=function(e){var t=document.getElementById(e.id);if(t){var i=t.getBoundingClientRect();this.diagram.scroller.setViewPortSize(i.width,i.height);var n=new P;n=Yr(this.diagram);var r=this.diagram.getSizeValue(this.diagram.width,n.width),o=this.diagram.getSizeValue(this.diagram.height,n.height);this.diagram.diagramCanvas.style.width=r,this.diagram.diagramCanvas.style.height=o,this.diagram.scroller.setSize(),this.diagram.transformLayers(),this.diagram.rulerSettings.showRulers&&Ur(this.diagram)}},e.prototype.canHideResizers=function(){return(this.tool instanceof md||this.tool instanceof vd)&&this.isMouseDown},e.prototype.updateCursor=function(){if(1===this.diagram.selectedItems.nodes.length||1===this.diagram.selectedItems.connectors.length){var e=[];e=e.concat(this.diagram.selectedItems.nodes,this.diagram.selectedItems.connectors),this.blocked=this.isMouseDown&&1===e.length&&this.tool instanceof ud&&!Jr(e[0])}},e.prototype.isForeignObject=function(e,t){var i=e;if(i)for(;null!==i.parentNode;){if("string"===typeof i.className&&(!t&&-1!==i.className.indexOf("foreign-object")||t&&-1!==i.className.indexOf("e-diagram-text-edit")))return i;i=i.parentNode}return null},e.prototype.isMetaKey=function(e){return navigator.platform.match("Mac")?e.metaKey:e.ctrlKey},e.prototype.renderUmlHighLighter=function(e){this.diagram.commandHandler.removeStackHighlighter();var t=this.diagram.selectedItems.nodes[0];if(t&&t.container&&"Stack"===t.container.type&&"UmlClassifier"===t.shape.type&&!t.wrapper.bounds.containsPoint(this.currentPosition)){var i=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction);if(n&&n.parentId&&n.parentId===t.id){var r="Vertical"===this.diagram.nameTable[n.parentId].container.orientation;Zo(n.wrapper,r,e.position,this.diagram,!0)}}},e.prototype.isDeleteKey=function(e,t){return navigator.platform.match("Mac")&&"Backspace"===e&&"delete"===t},e.prototype.isMouseOnScrollBar=function(e){var t,i,n,r,o=e.offsetX,a=e.offsetY,s=this.diagram.diagramCanvas,l=s.offsetHeight,c=s.offsetWidth;return!!(l<s.scrollHeight&&(t={x:c-17,y:0},i={x:c,y:0},n={x:c-17,y:l},r={x:c,y:l},_.toBounds([t,i,n,r]).containsPoint({x:o,y:a})))||!!(c<s.scrollWidth&&(t={x:0,y:l-17},i={x:c,y:l-17},n={x:0,y:l},r={x:c,y:l},_.toBounds([t,i,n,r]).containsPoint({x:o,y:a})))},e.prototype.updateVirtualization=function(){var e,t=this;e=setInterval((function(i){t.diagram.removeVirtualObjects(e)}),50),setTimeout((function(){t.diagram.deleteVirtualObject=!0}),50)},e.prototype.checkPreviousAction=function(){if(this.action!==this.previousAction&&this.diagram.selectedItems.userHandles.length)for(var e=0;e<this.diagram.selectedItems.userHandles.length;e++)this.previousAction&&this.diagram.selectedItems.userHandles[e]&&(this.checkUserHandleEvent(ve.onUserHandleMouseLeave),this.previousAction="None")},e.prototype.checkUserHandleEvent=function(e){if(this.diagram.selectedItems&&this.diagram.selectedItems.userHandles.length>0)for(var t=e===ve.onUserHandleMouseLeave?this.previousAction:this.action,i={element:void 0},n=0;n<this.diagram.selectedItems.userHandles.length;n++)if(t===this.diagram.selectedItems.userHandles[n].name||e===ve.onUserHandleMouseUp&&"Select"===t){i.element=this.diagram.selectedItems.userHandles[n],e===ve.onUserHandleMouseEnter&&(this.previousAction=this.action),e===ve.onUserHandleMouseDown&&(this.userHandleObject=this.diagram.selectedItems.userHandles[n].name);var r=document.getElementById(this.diagram.selectedItems.userHandles[n].name+"_userhandle");e===ve.onUserHandleMouseUp?this.commandHandler.isUserHandle(this.currentPosition)&&r&&r.id===this.userHandleObject+"_userhandle"&&this.diagram.triggerEvent(e,i):this.diagram.triggerEvent(e,i)}},e.prototype.mouseDown=function(e){var t;if(this.focus=!0,t=e.touches,this.isMouseOnScrollBar(e))return this.isScrolling=!0,void e.preventDefault();if(this.checkUserHandleEvent(ve.onUserHandleMouseDown),!this.checkEditBoxAsTarget(e)&&mo(this.diagram)||po(this.diagram)&&!go(this.diagram))if("Select"!==this.action&&"Drag"!==this.action||this.diagram.updatePortVisibility(this.hoverElement,J.Hover,!0),!(this.tool instanceof Pd||this.tool instanceof jd)||2!==e.button&&2!==e.buttons)if(!0===this.inAction&&!0===this.isMouseDown&&(this.tool instanceof Pd||this.tool instanceof jd))this.isMouseDown=!0,this.eventArgs={},this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs);else{this.isMouseDown=!0,this.currentPosition=this.prevPosition=this.getMousePosition(e),this.eventArgs={},this.diagram.textEditing&&!this.isMouseOnScrollBar(e)&&(this.diagram.endEdit(),this.diagram.textEditing=!1);var i=void 0,n=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action),r=this.objectFinder.findObjectUnderMouse(this.diagram,n,this.action,this.inAction,this.eventArgs,this.currentPosition),o=null;null!==r&&(o=this.diagram.findElementUnderMouse(r,this.currentPosition))&&(i=this.commandHandler.findTarget(o,r)),this.action=this.diagram.findActionToBeDone(r,o,this.currentPosition,i);var a=this.isMetaKey(e);if(a&&e.shiftKey&&this.diagram.connectorEditingToolModule?this.action="SegmentEnd":!a&&!e.shiftKey||po(this.diagram)||(this.action="Select"),this.tool=this.diagram.getTool(this.action),this.tool||(this.action="Select",this.tool=this.diagram.getTool(this.action)),this.getMouseEventArgs(this.currentPosition,this.eventArgs),a||e.shiftKey){var s=a&&e.shiftKey?{ctrlKey:a,shiftKey:e.shiftKey}:{ctrlKey:!0};this.eventArgs.info=s}this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs),this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper},this.initialEventArgs.position=this.currentPosition,this.initialEventArgs.info=this.eventArgs.info,this.inAction=!1,"touchstart"===e.type&&(t&&t.length>=2&&(this.touchStartList=Kl(this.touchStartList,0,t)),t||e.preventDefault())}else{Ls(this.diagram),Ls(this.currentPosition),e.buttons,Ls(this.eventArgs.actualObject),0===e.button||e.button;this.inAction=!1,this.tool.mouseUp(this.eventArgs)}this.isForeignObject(e.target)||this.isForeignObject(e.target,!0)||t||e.preventDefault()},e.prototype.mouseMoveExtend=function(e,t){(this.tool instanceof Pd||this.tool instanceof jd)&&this.tool.mouseMove(this.eventArgs),this.diagram.scrollSettings.canAutoScroll?this.checkAutoScroll(e):this.blocked||this.tool.mouseMove(this.eventArgs),this.eventArgs.target&&(this.hoverElement=this.eventArgs.target);var i=!(this.eventArgs.target instanceof Pl&&t instanceof Pl);this.tool instanceof gd&&this.diagram.updatePortVisibility(this.hoverElement instanceof Pl?this.hoverElement:this.hoverNode,J.Connect|J.Hover,i),this.hoverElement instanceof Pl&&this.hoverNode instanceof Pl&&this.hoverNode&&this.hoverNode.id!==this.hoverElement.id&&this.diagram.updatePortVisibility(this.hoverNode,J.Connect|J.Hover,!0),this.hoverElement=i?null:t,this.hoverNode=i?null:t},e.prototype.checkAction=function(e){if("LabelSelect"===this.action&&this.eventArgs.sourceWrapper&&(this.eventArgs.sourceWrapper instanceof Be||this.eventArgs.sourceWrapper instanceof dr)){var t=this.commandHandler.findTarget(this.eventArgs.sourceWrapper,this.eventArgs.source);!od(this.diagram,t,!1,this.eventArgs.sourceWrapper)&&Jr(t)&&(this.action="LabelDrag",this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))}else Jr(e)&&Zr(e)&&this.initialEventArgs&&this.initialEventArgs.source&&"Select"===this.action&&(!od(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof Dl&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),e instanceof _r&&(!(e instanceof _r)||id(this.currentPosition,e.sourcePoint,e.hitPadding)||id(this.currentPosition,e.targetPoint,e.hitPadding))||(this.action="Drag"),this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))},e.prototype.isSwimlaneElements=function(e){return!e||!(e.isLane||e.isPhase||e.isHeader)},e.prototype.mouseMove=function(e,t){var i,n;if(this.focus=!0,this.isScrolling)e.preventDefault();else if(mo(this.diagram)||po(this.diagram)&&!go(this.diagram)){this.currentPosition=this.getMousePosition(e);var r=this.diagram.findObjectsUnderMouse(this.currentPosition),o=this.diagram.findObjectUnderMouse(r,this.action,this.inAction);i=this.diagram,n=this.currentPosition,i.rulerSettings.showRulers&&(i.hRuler.drawRulerMarker(i.hRuler.element,n,i.scroller.horizontalOffset),i.vRuler.drawRulerMarker(i.vRuler.element,n,i.scroller.verticalOffset));var a=!1,s=void 0;if("touchmove"===e.type&&(t=e.touches)&&t.length>1&&(this.touchMoveList=Kl(this.touchMoveList,0,t),"PinchZoom"!==this.action&&(a=!0)),!1===E.equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown||a){this.eventArgs={};var l=null;if(null!==o){if(l=this.diagram.findElementUnderMouse(o,this.currentPosition),o!==this.hoverElement){var c=this.getContent();this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&""!==c&&this.elementLeave(),this.diagram.updatePortVisibility(this.hoverElement,J.Hover,!0),o instanceof Pl&&(this.hoverNode=o);var d=!0;!this.isSwimlaneElements(o)&&this.hoverElement&&this.isSwimlaneElements(this.hoverElement)&&(d=!1),this.hoverElement=d?o:this.hoverElement,d?this.elementEnter(this.currentPosition,!1):this.hoverElement=o}else this.hoverElement||this.hoverElement!==o||this.elementEnter(this.currentPosition,!0);l&&(s=this.commandHandler.findTarget(l,o))}this.action=this.diagram.findActionToBeDone(o,l,this.currentPosition,s),this.checkUserHandleEvent(ve.onUserHandleMouseEnter),this.checkPreviousAction(),this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.tool=this.getTool(this.action),this.mouseEvents(),this.tool instanceof wd||this.tool instanceof jd||this.tool instanceof Pd?this.tool.mouseMove(this.eventArgs):t&&this.tool instanceof Od&&this.tool.mouseDown(this.eventArgs),this.updateCursor(),this.renderUmlHighLighter(this.eventArgs);var h=!1;(!this.hoverElement||this.tool instanceof Od||!(o instanceof Pl)||!this.isSwimlaneElements(o)||0!==this.diagram.selectedItems.nodes.length&&od(this.diagram,this.hoverElement))&&(h=!0),this.diagram.updatePortVisibility(this.hoverElement,J.Hover,h);var p=this.getContent();null===o&&this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&p&&(this.hoverElement=null,this.elementLeave()),a=!1}else{if(this.eventArgs.position=this.currentPosition,"Drag"===this.action&&!od(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof Dl&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.mouseEvents(),e.ctrlKey||e.shiftKey){var u=e.ctrlKey&&e.shiftKey?{ctrlKey:e.ctrlKey,shiftKey:e.shiftKey}:{ctrlKey:!0};this.eventArgs.info=u}this.checkAction(o);var f=this.getConnectorPadding(this.eventArgs);this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source,f),this.updateCursor(),this.inAction=!0,this.initialEventArgs=null,"Drag"!==this.action&&"Rotate"!==this.action||(this.diagram.diagramActions=this.diagram.diagramActions|pe.Interactions),this.mouseMoveExtend(e,o)}this.prevPosition=this.currentPosition,this.isForeignObject(e.target,!0)||e.preventDefault()}}},e.prototype.getContent=function(){return this.hoverElement instanceof Pl&&this.hoverElement.constraints&ne.Tooltip||this.hoverElement instanceof _r&&this.hoverElement.constraints&te.Tooltip?this.hoverElement.tooltip.content:this.diagram.tooltip.content},e.prototype.checkAutoScroll=function(e){var t=this.startAutoScroll(e);if(!t&&this.doingAutoScroll)this.doingAutoScroll=!1,clearInterval(this.timeOutValue);else if(t){if((this.tool instanceof md||this.tool instanceof yd||this.tool instanceof ud)&&this.inAction){var i=this;this.diagram.scrollSettings.canAutoScroll&&t&&!this.doingAutoScroll&&(this.doingAutoScroll=!0,this.timeOutValue=setInterval((function(n){i.doAutoScroll(t,e,100)}),100))}}else this.blocked=!this.tool.mouseMove(this.eventArgs)},e.prototype.mouseUp=function(e){var t;if(this.checkUserHandleEvent(ve.onUserHandleMouseUp),"SVG"===this.diagram.mode&&lo(this.diagram)&&this.updateVirtualization(),this.diagram.previousSelectedObject=null,this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,ue.DrawSelectorBorder),t=e.touches,this.isScrolling)return this.isScrolling=!1,void e.preventDefault();if(!this.checkEditBoxAsTarget(e)&&mo(this.diagram)||po(this.diagram)&&!go(this.diagram)){if(this.tool&&(!(this.tool instanceof Pd||this.tool instanceof jd)||(this.tool instanceof Pd||this.tool instanceof jd)&&2===e.detail)){if(!this.isForeignObject(e.target)&&this.isMouseDown&&document.getElementById(this.diagram.element.id+"content").focus(),!this.inAction&&3!==e.which&&"Drag"===this.action){this.action="Select";var i=this.diagram.findObjectsUnderMouse(this.currentPosition),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction),o=!0;!e.ctrlKey&&this.isMouseDown&&this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>1&&1===e.which&&!(this.diagram.diagramActions&pe.PreventClearSelection)&&(o=!1,this.commandHandler.clearSelection()),od(this.diagram,n)&&o||this.commandHandler.selectObjects([n])}var a=this.updateContainerProperties(),s=void 0;if(this.addUmlNode(),this.inAction=!1,this.isMouseDown=!1,this.currentPosition=this.getMousePosition(e),this.diagram.selectedObject.helperObject&&(s=this.updateContainerBounds()),this.tool&&(this.tool.prevPosition||this.tool instanceof Cd)){this.eventArgs.position=this.currentPosition;var l=this.getConnectorPadding(this.eventArgs);this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source,l);var c=this.isMetaKey(e);if(c||e.shiftKey){var d=c&&e.shiftKey?{ctrlKey:c,shiftKey:e.shiftKey}:{ctrlKey:!0};this.eventArgs.info=d}if(this.diagram.diagramActions&pe.Interactions&&(this.diagram.diagramActions=this.diagram.diagramActions&~pe.Interactions),this.eventArgs.clickCount=e.detail,this.diagram.selectedObject.helperObject&&(this.tool instanceof md||this.tool instanceof yd)){if(this.diagram.selectedObject.actualObject&&""!==this.diagram.selectedObject.actualObject.parentId){var h=this.diagram.getObject(this.diagram.selectedObject.actualObject.parentId);h&&h.isLane&&(this.commandHandler.isContainer=!0)}this.tool.mouseUp(this.eventArgs,a.isPreventHistory)}else this.tool.mouseUp(this.eventArgs),!this.diagram.checkMenu||-1===window.navigator.userAgent.indexOf("Linux")&&-1===window.navigator.userAgent.indexOf("X11")||(this.diagram.contextMenuModule.contextMenu.open(e.pageY,e.pageX,this.diagram.element),this.diagram.checkMenu=!1);a.hasStack&&this.diagram.endGroupAction()}if(s&&this.diagram.endGroupAction(),this.updateContainerBounds(!0),2!==this.eventArgs.clickCount&&this.commandHandler.updateSelectedNodeProperties(this.eventArgs.source),this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0},this.diagram.diagramActions&pe.PublicMethod&&this.diagram.constraints&ae.LineRouting&&(this.diagram.diagramActions=this.diagram.diagramActions&~pe.PublicMethod)),this.blocked=!1,this.hoverElement){var p=J.Connect;od(this.diagram,this.hoverElement)&&(p|=J.Hover),this.diagram.updatePortVisibility(this.hoverElement,p,!0),this.hoverElement=null}this.touchStartList=null,this.touchMoveList=null,this.tool instanceof xd||(this.tool=null)}t||e.preventDefault(),this.diagram.currentDrawingObject=void 0;var u=this.diagram.selectedItems,f=!1;if(this.commandHandler.isUserHandle(this.currentPosition)&&this.isForeignObject(e.target)&&(f=!0),!this.inAction&&u.wrapper&&u.userHandles.length>0&&!f&&this.diagram.renderSelector(!0),!this.inAction&&!this.diagram.currentSymbol&&this.eventArgs){var g={element:Ls(this.eventArgs.source)||Ls(this.diagram),position:Ls(this.eventArgs.position),count:e.detail,actualObject:Ls(this.eventArgs.actualObject),button:0===e.button?"Left":1===e.button?"Middle":"Right"};Object(r.I)()&&this.diagram.click&&(g=this.getBlazorClickEventArgs(g)),this.diagram.triggerEvent(ve.click,g)}this.eventArgs={}}this.eventArgs={},this.diagram.commandHandler.removeStackHighlighter()},e.prototype.getConnectorPadding=function(e){var t,i=e.source;if(i&&i instanceof Dl&&i.connectors.length){var n=i.connectors[0];t=n.constraints&te.ConnectToNearByPort?n.connectionPadding:0}return t||0},e.prototype.getBlazorClickEventArgs=function(e){return e={element:this.eventArgs.source?{selector:Ls(this.eventArgs.source)}:{diagram:Ls(this.diagram)},position:Ls(this.eventArgs.position),count:e.count,actualObject:this.eventArgs.actualObject?{selector:Ls(this.eventArgs.actualObject)}:{diagram:Ls(this.diagram)},button:e.button},this.eventArgs.source instanceof Pl?(e.element.selector.nodes=[],e.element.selector.nodes.push(Ls(this.eventArgs.source))):this.eventArgs.source instanceof _r&&(e.element.selector.connectors=[],e.element.selector.connectors.push(Ls(this.eventArgs.source))),e},e.prototype.addSwimLaneObject=function(e){var t,i,n,r,o,a,s=0,l=e.shape,c=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);if(i||(i=this.diagram.findObjectUnderMouse(c,this.action,this.inAction)),this.diagram.clearSelectorLayer(),i&&!(i.isLane||i.isPhase||i.isHeader))for(var d=0;d<c.length;d++){var h=this.diagram.nameTable[c[d].id];(h.isLane||h.isPhase||h.isHeader)&&(i=h)}if(i&&(l.isPhase||l.isLane&&i.isLane)){var p=i.parentId;t=this.diagram.nameTable[p]}if(t&&(n=t.shape,o=l.isLane?l.orientation===n.orientation:l.orientation!==n.orientation),o&&i){if(n.header&&n.hasHeader&&"Horizontal"===n.orientation&&(s=1),n.phases.length>0&&(s+=1),l.isPhase){a="Horizontal"===n.orientation?this.currentPosition.x-t.wrapper.bounds.x:this.currentPosition.y-(t.wrapper.bounds.y+n.header.height);var u={id:lc(),offset:a,header:{annotation:{content:"Phase"}}};this.diagram.addPhases(t,[u])}else{l.lanes[0].header.height;var f={id:lc(),style:l.lanes[0].style,header:{annotation:{content:l.lanes[0].header.annotation.content,style:l.lanes[0].header.annotation.style},style:l.lanes[0].header.style}};"Horizontal"===l.orientation?f.height=l.lanes[0].height:f.width=l.lanes[0].width,"Horizontal"===n.orientation?(r=i.rowIndex?i.rowIndex:this.diagram.nameTable[i.parentId].rowIndex,i.wrapper.offsetY<this.currentPosition.y&&(r+=1)):(r=i.columnIndex?i.columnIndex:this.diagram.nameTable[i.parentId].columnIndex,this.currentPosition.x<i.wrapper.bounds.center.x&&(r-=1)),n.lanes.length>r-s?(f.header.width=n.lanes[r-s].header.width,f.header.height=n.lanes[r-s].header.height):(f.header.width=n.lanes[r-s-1].header.width,f.header.height=n.lanes[r-s-1].header.height),this.diagram.addLanes(t,[f],r-s)}this.commandHandler.select(t)}else if(l.isLane){var g={id:lc(),width:e.width,height:e.height,addInfo:e.addInfo,shape:{type:"SwimLane",header:{annotation:{content:"Header"},height:50,style:l.lanes[0].header.style},phases:[{id:lc(),header:{annotation:{content:"Phase"}}}],lanes:[{id:lc(),height:e.height,width:e.width,style:l.lanes[0].style,header:{annotation:{content:l.lanes[0].header.annotation.content,style:l.lanes[0].header.annotation.style},style:l.lanes[0].header.style}}],orientation:l.orientation}};"Vertical"===l.orientation&&(g.width+=20),g.offsetX=this.currentPosition.x+g.width/2,g.offsetY=this.currentPosition.y+g.height/2,this.diagram.add(g)}},e.prototype.mouseLeave=function(e){(this.tool&&this.inAction&&this.tool.mouseLeave(this.eventArgs),this.diagram.selectedObject.helperObject)&&(this.updateContainerProperties(),this.updateContainerBounds()&&this.diagram.endGroupAction());this.eventArgs&&this.eventArgs.source&&(this.diagram.updatePortVisibility(this.eventArgs.source,J.Hover,!0),this.hoverElement=null),this.tool instanceof gd&&this.eventArgs&&this.eventArgs.target&&this.eventArgs.target instanceof Pl&&(this.diagram.updatePortVisibility(this.eventArgs.target,J.Hover|J.Connect,!0),this.hoverElement=null);var t=this.diagram.selectedItems;t&&t.wrapper&&this.diagram.renderSelector(!0),(this.diagram.diagramActions&pe.Interactions||this.diagram.diagramActions&pe.ToolAction)&&(this.diagram.diagramActions=this.diagram.diagramActions&~pe.ToolAction),this.isMouseDown=!1,this.focus=!1,this.touchStartList=null,this.touchMoveList=null,this.elementLeave(),this.commandHandler.removeSnap(),this.inAction=!1,this.eventArgs={},this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0}),this.tool=null,function(){var e,t,i=document.getElementsByClassName("e-d-ruler-marker");if(i&&i.length>0)for(t=i.length-1;t>=0;t--)(e=i[t])&&e.parentNode.removeChild(e)}(),"Rotate"===this.action&&this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),e.preventDefault()},e.prototype.mouseWheel=function(e){this.diagram.blazorActions|=Z.interaction;var t=e.wheelDelta>0||-40*e.detail>0,i=this.getMousePosition(e);if(this.diagram.tooltipObject.close(),this.isMetaKey(e))this.diagram.zoom(t?1.2:1/1.2,i),e.preventDefault();else{var n=this.diagram.scroller.horizontalOffset,r=this.diagram.scroller.verticalOffset,o=t?20:-20;this.tool&&(this.tool instanceof Pd||this.tool instanceof jd)&&(this.eventArgs={},this.getMouseEventArgs(i,this.eventArgs),this.eventArgs.position=i,this.tool.mouseWheel(this.eventArgs)),this.diagram.scrollActions|=ge.Interaction,e.shiftKey?this.diagram.scroller.zoom(1,o,0,i):this.diagram.scroller.zoom(1,0,o,i),this.diagram.scrollActions&=~ge.Interaction,n===this.diagram.scroller.horizontalOffset&&r===this.diagram.scroller.verticalOffset||e.preventDefault()}if(this.diagram.textEditing){if(this.diagram.isTriggerEvent=!0,this.diagram.activeLabel.parentId){var a=this.diagram.getObject(this.diagram.activeLabel.parentId);this.diagram.startTextEdit(a,this.diagram.activeLabel.id)}this.diagram.isTriggerEvent=!1}this.diagram.blazorActions=this.diagram.blazorActions&~Z.interaction},e.prototype.keyDown=function(e){if(!(this.diagram.diagramActions&pe.TextEdit)&&!this.checkEditBoxAsTarget(e)||"Escape"===e.key||27===e.keyCode){var t=void 0,i=e.keyCode?e.keyCode:e.which,n=e.key,o=this.isMetaKey(e);if(this.diagram.commandManager&&this.diagram.commands)for(var a=this.diagram.commands,s=0,l=Object.keys(a);s<l.length;s++){var c=l[s];if((t=this.diagram.commands[c])&&(t.gesture.keyModifiers||t.gesture.key)&&(i===t.gesture.key||n===he[t.gesture.key]||this.isDeleteKey(n,c))&&(!t.gesture.keyModifiers&&!e.altKey&&!e.shiftKey&&!o||t.gesture.keyModifiers&&(o||e.altKey||e.shiftKey)&&this.altKeyPressed(t.gesture.keyModifiers)&&e.altKey||this.shiftKeyPressed(t.gesture.keyModifiers)&&e.shiftKey||this.ctrlKeyPressed(t.gesture.keyModifiers)&&o)){var d=Pc(t.canExecute);if(Object(r.I)()||d&&d({keyDownEventArgs:KeyboardEvent,parameter:t.parameter})){if(e.preventDefault(),"Escape"===e.key)if(this.checkEditBoxAsTarget(e))document.getElementById(this.diagram.diagramCanvas.id).focus();else if(this.diagram.currentSymbol){this.diagram.removeFromAQuad(this.diagram.currentSymbol),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[this.diagram.currentSymbol.id]),this.diagram.removeElements(this.diagram.currentSymbol),Ja(this.diagram.currentSymbol,this.diagram),delete this.diagram.nameTable[this.diagram.currentSymbol.id],this.diagram.droppable.sourceElement.draggable.intDestroy();var h=this.diagram.droppable.selectedSymbols;h.parentNode.removeChild(h);var p=this.diagram.diagramActions;this.diagram.diagramActions=this.diagram.addConstraints(p,pe.PreventClearSelection),this.tool.mouseUp(this.eventArgs),this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,ue.DrawSelectorBorder),this.diagram.previousSelectedObject&&this.diagram.select(this.diagram.previousSelectedObject),this.action="Select",this.diagram.previousSelectedObject=null,this.diagram.currentSymbol=null,this.diagram.diagramActions=this.diagram.removeConstraints(p,pe.PreventClearSelection),this.isMouseDown=!1}else this.inAction&&this.diagram.drawingObject&&this.tool&&this.tool.inAction&&(this.tool.mouseUp(this.eventArgs),this.tool=null,this.isMouseDown=!1);if(t.execute)if(this.diagram.tool!==se.ZoomPan)Pc(t.execute)({keyDownEventArgs:KeyboardEvent,parameter:t.parameter});if(Object(r.I)()){var u={gesture:t.gesture};this.diagram.triggerEvent(ve.commandExecute,u)}break}}}}this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;this.keyArgs={element:Ls(this.diagram.selectedItems),key:e.key,keyCode:e.keyCode?e.keyCode:e.which},this.getKeyModifier(this.keyArgs,e),this.diagram.diagramActions&pe.TextEdit&&this.getlabel(this.keyArgs,e),this.diagram.triggerEvent(ve.keyDown,this.keyArgs)},e.prototype.getlabel=function(e,t){var i=this.diagram.activeLabel;e.target=this.diagram.element.id+"_editBox";var n=this.diagram.nameTable[i.parentId];if(document.getElementById(this.diagram.element.id+"_editBox")){e.text=document.getElementById(this.diagram.element.id+"_editBox").value;for(var r=0;r<n.annotations.length;r++)if(n.annotations[r].id===i.id){e.label=n.annotations[r];break}}},e.prototype.getKeyModifier=function(e,t){e.keyModifiers=de.None,t.ctrlKey&&(e.keyModifiers|=de.Control),t.shiftKey&&(e.keyModifiers|=de.Shift),t.altKey&&(e.keyModifiers|=de.Alt),this.isMetaKey(t)&&(e.keyModifiers|=de.Meta)},e.prototype.keyUp=function(e){this.keyArgs={element:Ls(this.diagram.selectedItems),key:e.key,keyCode:e.keyCode?e.keyCode:e.which};this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;this.getKeyModifier(this.keyArgs,e),this.diagram.diagramActions&pe.TextEdit&&this.getlabel(this.keyArgs,e),this.diagram.triggerEvent(ve.keyUp,this.keyArgs)},e.prototype.startAutoScroll=function(e){var t=this.getMousePosition(e);t.x*=this.diagram.scroller.currentZoom,t.y*=this.diagram.scroller.currentZoom;var i,n=Yr(this.diagram),o=this.diagram.scrollSettings.autoScrollBorder;if("mozilla"===r.c.info.name&&0===this.diagram.scroller.viewPortWidth){var a=document.getElementById(this.diagram.element.id).getBoundingClientRect();a.width!==this.diagram.scroller.viewPortWidth&&this.diagram.scroller.setViewPortSize(a.width,a.height)}return this.diagram.scrollSettings.canAutoScroll&&(t.x+this.diagram.scroller.horizontalOffset+o.right+n.width>=this.diagram.scroller.viewPortWidth-18?i="right":t.x+this.diagram.scroller.horizontalOffset<o.left?i="left":t.y+this.diagram.scroller.verticalOffset+o.bottom+n.height>this.diagram.scroller.viewPortHeight-18?i="bottom":t.y+this.diagram.scroller.verticalOffset<o.top&&(i="top")),i},e.prototype.doAutoScroll=function(e,t,i,n){var r=e;if((this.tool instanceof md||this.tool instanceof yd||this.tool instanceof ud)&&this.inAction){var o=this.getMousePosition(t),a=(this.diagram.scrollSettings.autoScrollBorder,0),s=0,l={x:o.x,y:o.y};switch(r){case"right":l.x=o.x+10,a=10;break;case"left":l.x=o.x-10,a=-10;break;case"bottom":l.y=o.y+10,s=10;break;case"top":l.y=o.y-10,s=-10}this.eventArgs.position={x:l.x,y:l.y},this.currentPosition=this.eventArgs.position;var c=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);this.eventArgs.target=this.diagram.findObjectUnderMouse(c,this.action,this.inAction),this.tool.mouseMove(this.eventArgs),this.diagram.scrollActions|=ge.Interaction,this.diagram.scroller.zoom(1,-a,-s,o),this.diagram.scrollActions&=~ge.Interaction}},e.prototype.mouseEvents=function(){for(var e=this.diagram.findObjectsUnderMouse(this.currentPosition),t=0;t<e.length;t++)this.eventArgs.actualObject===e[t]&&e.splice(t,1);var i={targets:{}};if(Object(r.I)()||(i={targets:Ls(e),element:Ls(this.eventArgs.source===this.eventArgs.actualObject?void 0:this.eventArgs.source),actualObject:Ls(this.eventArgs.actualObject)}),Object(r.I)()&&(this.diagram.mouseEnter||this.diagram.mouseOver)&&(i.actualObject=Ps(this.eventArgs.actualObject)===_r?{connector:Ls(this.eventArgs.actualObject)}:{node:Ls(this.eventArgs.actualObject)},i.targets.connector=[],i.targets.node=[],this.getBlazorCollectionObject(e,i)),this.lastObjectUnderMouse&&this.diagram.mouseLeave&&(!this.eventArgs.actualObject||this.lastObjectUnderMouse!==this.eventArgs.actualObject)){var n={targets:void 0,element:Ls(this.lastObjectUnderMouse),actualObject:void 0};Object(r.I)()&&(n={targets:void 0,element:Ps(this.lastObjectUnderMouse)===_r?{connector:Ls(e)}:{node:Ls(this.lastObjectUnderMouse)},actualObject:void 0}),this.diagram.triggerEvent(ve.mouseLeave,n),this.lastObjectUnderMouse=null}(!this.lastObjectUnderMouse&&this.eventArgs.source||this.lastObjectUnderMouse!==this.eventArgs.actualObject)&&(this.lastObjectUnderMouse=this.eventArgs.actualObject,void 0!==this.eventArgs.actualObject&&this.diagram.triggerEvent(ve.mouseEnter,i)),this.eventArgs.actualObject&&this.diagram.triggerEvent(ve.mouseOver,i)},e.prototype.getBlazorCollectionObject=function(e,t){if(e)for(var i=0;i<e.length;i++)Ps(e[i])===_r?t.targets.connector.push(Ls(e[i])):t.targets.node.push(Ls(e[i]))},e.prototype.elementEnter=function(e,t){if(!t){var i=this.hoverElement instanceof Pl&&this.hoverElement.constraints&ne.Tooltip||this.hoverElement instanceof _r&&this.hoverElement.constraints&te.Tooltip,n=this.getContent();"Auto"===this.hoverElement.tooltip.openOn&&""!==n&&function(e,t){var i=e.tooltipObject;tr(t?t.tooltip:e.tooltip,i)}(this.diagram,i?this.hoverElement:void 0);var o=Va(this.diagram,e,this.hoverElement);"Auto"===this.hoverElement.tooltip.openOn&&""!==n&&(this.diagram.tooltipObject.close(),this.diagram.tooltipObject.openOn=this.hoverElement.tooltip.openOn,this.diagram.tooltipObject.offsetX=o.x,this.diagram.tooltipObject.offsetY=o.y,Object(r.I)()?this.diagram.tooltipObject.open(this.diagram.element,{}):this.diagram.tooltipObject.dataBind()),function(e,t){var i=0;return e instanceof _r?e.constraints&te.Tooltip?i=e.constraints&te.Tooltip:e.constraints&te.InheritTooltip&&(i=t.constraints&ae.Tooltip):e.constraints&ne.Tooltip?i=e.constraints&ne.Tooltip:e.constraints&ne.InheritTooltip&&(i=t.constraints&ae.Tooltip),i}(this.hoverElement,this.diagram)&&"Auto"===this.hoverElement.tooltip.openOn&&this.diagram.tooltipObject.open(this.diagram.element)}},e.prototype.elementLeave=function(){this.diagram.tooltipObject&&"Custom"!==this.diagram.tooltipObject.openOn&&this.diagram.tooltipObject.close()},e.prototype.altKeyPressed=function(e){return!!(e&de.Alt)},e.prototype.ctrlKeyPressed=function(e){return!!(e&de.Control)},e.prototype.shiftKeyPressed=function(e){return!!(e&de.Shift)},e.prototype.scrolled=function(e){this.diagram.updateScrollOffset(),Object(r.I)()&&this.diagram.realActions&fe.OverViewAction&&this.diagram.setBlazorDiagramProps(!1)},e.prototype.doubleClick=function(e){if(mo(this.diagram)){var t=void 0,i=this.diagram.findObjectsUnderMouse(this.currentPosition),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction);if(null!==n&&mo(this.diagram)){if(t=this.diagram.findElementUnderMouse(n,this.currentPosition),this.tool&&(this.tool instanceof Pd||this.tool instanceof jd)){Ls(n)||Ls(this.diagram),this.currentPosition,e.detail;this.tool.mouseUp(this.eventArgs),this.isMouseDown=!1,this.eventArgs={},this.tool=null,e.preventDefault()}else{var o=this.diagram.commandHandler.getObjectLayer(n.id);if(o&&!o.lock&&o.visible&&!(this.diagram.diagramActions&pe.TextEdit)){var a="";"TextAnnotation"===n.shape.shape&&(a=n.wrapper.children[1].id.split("_")[1]),this.diagram.startTextEdit(n,a||(t instanceof Be?t.id.split(n.id+"_")[1]:void 0))}}}var s={source:Ls(n)||Ls(this.diagram),position:this.currentPosition,count:e.detail};if(Object(r.I)()){var l=void 0;l=n instanceof Pl?{nodes:[Ls(n)]}:n instanceof _r?{connectors:[Ls(n)]}:Ls(n),s={source:n?{selector:l}:{diagram:Ls(this.diagram)},position:this.currentPosition,count:e.detail}}this.diagram.triggerEvent(ve.doubleClick,s)}},e.prototype.itemClick=function(e,t){var i=e;return qo(this.diagram,i,!0)?i:null},e.prototype.inputChange=function(e){var t,i,n,r,o,a,s,l,c,d=document.getElementById(this.diagram.element.id+"_editBox"),h=document.getElementById(this.diagram.element.id+"_editTextBoxDiv"),p=d.value,u=p.split("\n");(!(r=this.diagram.selectedItems.nodes[0]?this.diagram.selectedItems.nodes[0]:this.diagram.selectedItems.connectors[0])&&this.tool instanceof xd||r&&"SwimLane"===r.shape.type)&&(r=this.diagram.nameTable[this.diagram.activeLabel.parentId]),r&&("Text"!==r.shape.type&&r.annotations.length>0||"Text"===r.shape.type)&&(n=this.diagram.getWrapper(r.wrapper,this.diagram.activeLabel.id),t=(t=r.wrapper.bounds.width<n.bounds.width?r.wrapper.bounds.width:n.bounds.width)>90?t:90,s=Ll(n.style,p,void 0,void 0,t),i=Number(d.style.fontSize.split("px")[0]),u.length>1&&""===u[u.length-1]&&(s.height=s.height+i),l=this.diagram.scroller.transform,c=vo(this.diagram)?l.scale:1,a=(90>(a=s.width)?90:a)*c,o=(12>s.height?12:s.height)*c,h.style.left=(n.bounds.center.x+l.tx)*l.scale-a/2-2.5+"px",h.style.top=(n.bounds.center.y+l.ty)*l.scale-o/2-3+"px",h.style.width=a+"px",h.style.height=o+"px",d.style.minHeight="12px",d.style.minWidth="90px",d.style.width=a+"px",d.style.height=o+"px")},e.prototype.isAddTextNode=function(e,t){return!!(this.tool instanceof xd||t)&&(this.tool=null,e&&!uo(this.diagram)&&(this.diagram.drawingObject=void 0,this.diagram.currentDrawingObject=void 0),!(ys(this.diagram.nodes,e.id)||ys(this.diagram.connectors,e.id)||this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(e)>-1))},e.prototype.checkEditBoxAsTarget=function(e){return!(!e.target||e.target.id!==this.diagram.element.id+"_editBox")},e.prototype.getMouseEventArgs=function(e,t,i,n){var r,o,a;if(t.position=e,i?(o=this.diagram.findObjectsUnderMouse(this.currentPosition,i),r=this.diagram.findTargetObjectUnderMouse(o,this.action,this.inAction,t.position,i)):"Drag"===this.action||"ConnectorSourceEnd"===this.action||"SegmentEnd"===this.action||"OrthoThumb"===this.action||"BezierSourceThumb"===this.action||"BezierTargetThumb"===this.action||"ConnectorTargetEnd"===this.action||-1!==this.action.indexOf("Rotate")||-1!==this.action.indexOf("Resize")?(r=this.diagram.selectedItems,!this.diagram.currentSymbol&&"Drag"===this.action&&r&&this.diagram.selectedItems.nodes.length>0&&"SwimLane"===this.diagram.selectedItems.nodes[0].shape.type&&(o=this.diagram.findObjectsUnderMouse(this.currentPosition),r=this.diagram.findObjectUnderMouse(o,this.action,this.inAction))):(o=this.diagram.findObjectsUnderMouse(this.currentPosition),r=this.diagram.findObjectUnderMouse(o,this.action,this.inAction)),r&&r.isHeader&&(r=this.diagram.nameTable[r.parentId],this.eventArgs.actualObject=r),r){var s=void 0,l=void 0,c=void 0;if(((a=this.diagram.findElementUnderMouse(r,this.currentPosition,n))&&r.ports&&r.ports.length&&!Ds(r,a)||!a||!r)&&o&&o.length&&i instanceof Dl)for(s=i.connectors[0],c=o.length-1;c>=0;c--)if((l=o[c])instanceof Pl&&s&&s.connectionPadding){if(r=l,a=this.diagram.findElementUnderMouse(r,this.currentPosition,n),s.constraints&te.ConnectToNearByPort&&r&&r.ports&&r.ports.length&&Ds(r,a))break;if(l instanceof Pl&&s&&s.connectionPadding&&l.wrapper.outerBounds.containsPoint(this.currentPosition)&&s.constraints&te.ConnectToNearByNode&&!(s.constraints&te.ConnectToNearByPort)){r=l,a=this.diagram.findElementUnderMouse(r,this.currentPosition,0);break}}}return i?(t.target=r,t.targetWrapper=a):(t.source=r,t.sourceWrapper=a),t.actualObject=this.eventArgs.actualObject,t.source instanceof Dl&&void 0===t.actualObject&&(t.source.nodes.length>0||t.source.connectors.length>0)&&(t.actualObject=t.source.nodes.length>0?this.diagram.nameTable[t.source.nodes[0].id]:this.diagram.nameTable[t.source.connectors[0].id]),t.startTouches=this.touchStartList,t.moveTouches=this.touchMoveList,t},e.prototype.resetTool=function(){this.action="Select",this.hoverElement=null,this.hoverNode=null,this.tool=this.diagram.getTool(this.action),this.updateCursor()},e.prototype.getTool=function(e){switch(e){case"Select":return new ud(this.commandHandler,!0);case"Drag":return new md(this.commandHandler);case"Rotate":return new vd(this.commandHandler);case"LayoutAnimation":return new Sd(this.commandHandler);case"FixedUserHandle":return new fd(this.commandHandler,!0);case"Hyperlink":return new Cd(this.commandHandler);case"ResizeSouthEast":case"ResizeSouthWest":case"ResizeNorthEast":case"ResizeNorthWest":case"ResizeSouth":case"ResizeNorth":case"ResizeWest":case"ResizeEast":return new yd(this.commandHandler,e);case"ConnectorSourceEnd":case"ConnectorTargetEnd":case"BezierSourceThumb":case"BezierTargetThumb":return new gd(this.commandHandler,e);case"SegmentEnd":case"OrthoThumb":return new Dd(this.commandHandler,e);case"Draw":var t=function(e){var t;return e&&(e.type?t="Connector":e.shape&&!e.type&&(t="Node")),t}(this.diagram.drawingObject);if("Node"===t&&"Text"===this.diagram.drawingObject.shape.type)return new xd(this.commandHandler);if("Node"===t&&("Polygon"===this.diagram.drawingObject.shape.shape||Object(r.I)()&&"Polygon"===this.diagram.drawingObject.shape.basicShape)&&!this.diagram.drawingObject.shape.points)return new Pd(this.commandHandler);if("Node"===t||"Node"===t&&"Polygon"===this.diagram.drawingObject.shape.shape&&this.diagram.drawingObject.shape.points)return new bd(this.commandHandler,this.diagram.drawingObject);if("Connector"===t&&"Polyline"===this.diagram.drawingObject.type)return new jd(this.commandHandler);if("Connector"===t)return new wd(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);break;case"Pan":return new Od(this.commandHandler,!1);case"PinchZoom":return new Od(this.commandHandler,!0);case"PortDrag":return new md(this.commandHandler,"Port");case"PortDraw":return new wd(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);case"LabelSelect":return new ud(this.commandHandler,!0,"LabelSelect");case"LabelDrag":return new Id(this.commandHandler);case"LabelResizeSouthEast":case"LabelResizeSouthWest":case"LabelResizeNorthEast":case"LabelResizeNorthWest":case"LabelResizeSouth":case"LabelResizeNorth":case"LabelResizeWest":case"LabelResizeEast":return new Ed(this.commandHandler,e);case"LabelRotate":return new Td(this.commandHandler)}return null},e.prototype.getCursor=function(e){var t=this.diagram.selectedItems.annotation?this.diagram.selectedItems.wrapper.children[0]:this.diagram.selectedItems;return function(e,t){if(t+=360,t%=360,-1===e.indexOf("Resize"))return sd[e];var i=sd[e];return t>=0&&t<25||t>=160&&t<=205||t>=340&&t<=360?i:t>=25&&t<=70||t>=205&&t<=250?"n-resize"===i||"s-resize"===i?"ne-resize":"nw-resize"===i||"se-resize"===i?"n-resize":"e-resize"===i||"w-resize"===i?"nw-resize":"e-resize":t>=70&&t<=115||t>=250&&t<=295?"n-resize"===i||"s-resize"===i?"e-resize":"nw-resize"===i||"se-resize"===i?"ne-resize":"e-resize"===i||"w-resize"===i?"n-resize":"nw-resize":t>=115&&t<=155||t>=295&&t<=340?"n-resize"===i||"s-resize"===i?"nw-resize":"nw-resize"===i||"se-resize"===i?"e-resize":"e-resize"===i||"w-resize"===i?"ne-resize":sd[e]:"n-resize"}(e,this.diagram.selectedItems.annotation?t.rotateAngle+t.parentTransform:t.rotateAngle)},e.prototype.findElementUnderMouse=function(e,t,i){return this.objectFinder.findElementUnderSelectedItem(e,t,i)},e.prototype.findObjectsUnderMouse=function(e,t){return this.objectFinder.findObjectsUnderMouse(e,this.diagram,this.eventArgs,t)},e.prototype.findObjectUnderMouse=function(e,t,i){return this.objectFinder.findObjectUnderMouse(this.diagram,e,t,i,this.eventArgs,this.currentPosition)},e.prototype.findTargetUnderMouse=function(e,t,i,n,r){return this.objectFinder.findObjectUnderMouse(this.diagram,e,t,i,this.eventArgs,n,r)},e.prototype.findActionToBeDone=function(e,t,i,n){return td(e,t,this.currentPosition,this.diagram,this.touchStartList,this.touchMoveList,n)},e.prototype.updateContainerBounds=function(e){var t=!1;if(this.diagram.selectedObject.helperObject&&this.diagram.selectedObject.actualObject instanceof Pl){var i=this.tool instanceof yd,n=this.diagram.selectedObject.actualObject,r=this.diagram.nameTable[n.parentId];e?Wo(this.diagram,n,this.currentPosition,i):((!r||r&&"SwimLane"!==r.shape.type)&&this.diagram.updateDiagramObject(n),t=function(e,t,i,n){var r,o=!1;if(qo(e,t,!0)){e.protectPropertyChange(!0);var a=(r=e.nameTable[t.parentId]).wrapper;if(r&&"Canvas"===r.container.type){if(n||a.bounds.x<=i.x&&a.bounds.right>=i.x&&a.bounds.y<=i.y&&a.bounds.bottom>=i.y){var s=void 0,l=a.bounds.y,c=a.bounds.x,d=e.nameTable[r.parentId]||r;if("SwimLane"===d.shape.type)o=Go(r,d,t,e,!0);else{var h=e.nameTable[r.parentId]||r,p=h.shape;s=h.wrapper,a.actualSize.width<a.outerBounds.width&&!(a.bounds.x>a.outerBounds.x)&&(void 0!==r.rowIndex?(h.columns.length,s.updateColumnWidth(r.columnIndex,a.outerBounds.width,!0),"Horizontal"===p.orientation&&p.phaseSize&&fa(h,e,a,r.columnIndex),ga(e,h),e.drag(h,c-a.bounds.x,l-a.bounds.y)):e.scale(r,1+(a.outerBounds.width-a.actualSize.width)/a.actualSize.width,1,a.outerBounds.x<a.bounds.x?{x:1,y:.5}:{x:0,y:.5})),a.actualSize.height<a.outerBounds.height&&!(a.bounds.y>a.outerBounds.y)&&(void 0!==r.rowIndex?(s.updateRowHeight(r.rowIndex,a.outerBounds.height,!0),e.drag(h,c-a.bounds.x,l-a.bounds.y)):e.scale(r,1,1+(a.outerBounds.height-a.actualSize.height)/a.actualSize.height,a.outerBounds.y<a.bounds.y?{x:.5,y:1}:{x:.5,y:0}))}}e.select([t]),ca([],e)}e.protectPropertyChange(!1)}return o}(this.diagram,n,this.currentPosition,i),this.diagram.updateSelector(),(n.isLane||n.isPhase)&&(this.diagram.clearSelection(),this.commandHandler.selectObjects([n])))}return t},e.prototype.updateContainerProperties=function(){var e,t,i,n,r=!1,o=!1,a={hasStack:!1,isPreventHistory:!1};if(this.diagram.selectedObject.helperObject){var s=this.diagram.findObjectsUnderMouse(this.currentPosition),l=this.diagram.findObjectUnderMouse(s,this.action,this.inAction);if(e=this.diagram.selectedObject.helperObject,(n=this.diagram.selectedObject.actualObject)instanceof Pl){if("SwimLane"===n.shape.type&&(i=ia(this.diagram,n.wrapper.children[0])),"SwimLane"!==n.shape.type&&n.parentId&&"SwimLane"===this.diagram.getObject(n.parentId).shape.type&&l instanceof Pl&&this.diagram.getObject(l.parentId)&&"SwimLane"!==this.diagram.getObject(l.parentId).shape.type&&(l=this.diagram.getObject(l.parentId)),"Drag"===this.currentAction&&n.container&&"Canvas"===n.container.type&&n.parentId&&"SwimLane"===this.diagram.getObject(n.parentId).shape.type&&l&&l!==n&&l.container&&"Canvas"===l.container.type&&l.isLane&&n.isLane&&l.parentId===n.parentId)da(this.diagram,n,l,this.currentPosition),a.isPreventHistory=!0;else{var c=this.diagram.nameTable[n.parentId];if(!c||c&&"SwimLane"!==c.shape.type)if(c&&c.isLane&&n.constraints&ne.AllowMovingOutsideLane){var d=this.diagram.getObject(c.parentId),h=d.id+d.shape.lanes[0].id+"0",p=this.diagram.getObject(h),u=p.wrapper.bounds.x,f=p.wrapper.bounds.y,g=d.wrapper.bounds.bottomRight.x-u,m=d.wrapper.bounds.bottomRight.y-f;new _(u,f,g,m).containsPoint(this.currentPosition)&&(n.offsetX=e.offsetX,n.offsetY=e.offsetY,n.width=e.width,n.height=e.height,n.rotateAngle=e.rotateAngle)}else n.offsetX=e.offsetX,n.offsetY=e.offsetY,n&&n.shape&&"UmlClassifier"!==n.shape.type&&("Bpmn"!==n.shape.type||"Bpmn"===n.shape.type&&"TextAnnotation"!==n.shape.shape)&&(n.width=e.width,n.height=e.height),n.rotateAngle=e.rotateAngle;var v=void 0;if(c&&c.container&&"Stack"===c.container.type&&(this.diagram.startGroupAction(),o=!0),!l&&c&&c.container&&"Stack"===c.container.type&&"Drag"===this.action){var y=c.wrapper.children.indexOf(n.wrapper);if(v={targetIndex:void 0,target:void 0,sourceIndex:y,source:uc(n)},y>-1){var b=c.children;b.splice(b.indexOf(n.id),1),this.diagram.nameTable[n.id].parentId="",t=!0,c.wrapper.children.splice(y,1)}}if(function(e,t,i,n){var r=e,o=i.nameTable[r.parentId],a=i.nameTable[r.parentId];if(t&&a&&a.container&&"Stack"===a.container.type&&t.container&&"Stack"===t.container.type&&a.id!==t.parentId){var s=a.wrapper.children.indexOf(r.wrapper);s>-1&&(i.nameTable[r.id].parentId=t.id,a.wrapper.children.splice(s,1))}if(t&&t.parentId&&r.parentId&&"Drag"===n&&a.container&&"Stack"===a.container.type){var l=o.wrapper.children.indexOf(t.wrapper),c=o.wrapper.children.indexOf(r.wrapper),d={targetIndex:l,target:t,sourceIndex:c,source:e};o.wrapper.children.splice(c,1),o.wrapper.children.splice(l,0,r.wrapper);var h={type:"StackChildPositionChanged",redoObject:{targetIndex:c,target:t,sourceIndex:l,source:e},undoObject:d,category:"Internal"};i.commandHandler.addHistoryEntry(h)}}(n,l,this.diagram,this.action),(c=qo(this.diagram,n)?this.diagram.nameTable[n.parentId]:this.diagram.nameTable[n.parentId]||n)&&c.container&&"Canvas"===c.container.type&&(c.wrapper.maxWidth=c.maxWidth=c.wrapper.actualSize.width,c.wrapper.maxHeight=c.maxHeight=c.wrapper.actualSize.height,r=!0),qo(this.diagram,n,!0)&&c&&"Canvas"===c.container.type?Uo(this.diagram,n):a=this.updateContainerPropertiesExtend(c,n,i,e,a),this.diagram.lineRoutingModule&&this.diagram.constraints&ae.LineRouting&&!qo(this.diagram,n,!0)&&(n.children&&(this.diagram.realActions|=fe.EnableGroupAction),this.diagram.nodePropertyChange(n,{},{width:n.width,height:n.height,offsetX:n.offsetX,offsetY:n.offsetY}),n.children&&(this.diagram.realActions&=~fe.EnableGroupAction)),n.shape.lanes&&this.updateLaneChildNode(n),r&&(c.maxWidth=c.wrapper.maxWidth=void 0,c.maxHeight=c.wrapper.maxHeight=void 0),t){this.diagram.nodePropertyChange(c,{},{offsetX:c.offsetX,offsetY:c.offsetY,width:c.width,height:c.height,rotateAngle:c.rotateAngle});var w={redoObject:{sourceIndex:void 0,source:v.source},type:"StackChildPositionChanged",undoObject:v,category:"Internal"};this.diagram.diagramActions&pe.UndoRedo||this.diagram.addHistoryEntry(w)}n&&n.container&&("Stack"===n.container.type||"Canvas"===n.container.type&&""===n.parentId)&&(n&&n.shape&&"UmlClassifier"===n.shape.type&&(n.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(n,{},{offsetX:n.offsetX,offsetY:n.offsetY,width:n.width,height:n.height,rotateAngle:n.rotateAngle}),n&&n.shape&&"UmlClassifier"===n.shape.type&&(n.wrapper.measureChildren=!1))}ca(i,this.diagram),a.hasStack=o}}return n&&(n.isPhase||n.isLane||n.shape&&"SwimLane"===n.shape.type)&&this.diagram.updateDiagramElementQuad(),a},e.prototype.updateLaneChildNode=function(e){for(var t=0;t<e.shape.lanes.length;t++)if(e.shape.lanes[t].children&&e.shape.lanes[t].children.length>0)for(var i=0;i<e.shape.lanes[t].children.length;i++){var n=e.shape.lanes[t].children[i].id,r=this.diagram.nameTable[n];r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY}},e.prototype.updateContainerPropertiesExtend=function(e,t,i,n,r){if("ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction||"SwimLane"===t.shape.type){var o=uc(t),a=!1;if(e&&e.container&&"Grid"===e.container.type){var s="SwimLane"===e.shape.type,l=s?e.wrapper.children[0]:e.wrapper,c=s?e.shape.padding:void 0,d=e.wrapper.bounds.x,h=e.wrapper.bounds.y;if(void 0!==t.columnIndex&&"Horizontal"===e.container.orientation&&(s&&t.isPhase||!s&&1===t.rowIndex)||"Vertical"===e.container.orientation&&(!s&&t.rowIndex>0&&t.columnIndex>0||s&&t.isLane)){if("Horizontal"===e.container.orientation&&t.isPhase&&t.wrapper.width>t.maxWidth&&(t.maxWidth=t.wrapper.width,t.wrapper.maxWidth=t.wrapper.width),ha(this.diagram,t,e,n),l.updateColumnWidth(t.columnIndex,n.width,!0,c),t.isPhase){var p=e.shape.phases[t.columnIndex].header.id,u=this.diagram.nameTable[p];u.maxWidth<n.width&&(u.maxWidth=n.width,u.wrapper.maxWidth=n.width)}"SwimLane"===e.shape.type&&(e.width=e.width?l.width:e.width,ga(this.diagram,e),e.wrapper.width=e.width,i=ia(this.diagram,l,t.rowIndex))}else void 0!==t.rowIndex&&(a=!0,ha(this.diagram,t,e,n),l.updateRowHeight(t.rowIndex,n.height,!0,c),"SwimLane"===e.shape.type&&(e.height=e.height?l.height:e.height,e.wrapper.height=e.height,i=ia(this.diagram,l,t.rowIndex)));"SwimLane"===e.shape.type&&(r.isPreventHistory=!0),this.diagram.nodePropertyChange(e,{},{offsetX:e.offsetX,offsetY:e.offsetY,rotateAngle:e.rotateAngle}),this.diagram.drag(e,d-e.wrapper.bounds.x,h-e.wrapper.bounds.y)}else t&&t.shape&&"UmlClassifier"===t.shape.type&&(t.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(t,{},{offsetX:t.offsetX,offsetY:t.offsetY,width:t.width,height:t.height,rotateAngle:t.rotateAngle}),t.wrapper.measureChildren=!1;if(t.wrapper.measure(new P(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize),"ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction){var f={category:"Internal",type:a?"RowHeightChanged":"ColumnWidthChanged",undoObject:o,redoObject:uc(t)};this.diagram.addHistoryEntry(f)}}return ca(i,this.diagram),r},e.prototype.addUmlNode=function(){var e=this.diagram.selectedItems.nodes[0],t=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x+20,y:this.currentPosition.y}),i=this.diagram.findObjectUnderMouse(t,this.action,this.inAction);if(i||(t=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),i=this.diagram.findObjectUnderMouse(t,this.action,this.inAction)),e&&e.container&&"Stack"===e.container.type&&i&&i.parentId&&i.parentId===e.id){var n=i,r=_l(this.diagram.element.id);if(r.getElementById(r.id+"_stack_highlighter")){var o=e.wrapper.children.indexOf(i.wrapper)+1;this.diagram.enableServerDataBinding(!1);var a=new Pl(this.diagram,"nodes",{style:{fill:e.style.fill,strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor},annotations:i.annotations,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(ne.Default|ne.HideThumbs)&~(ne.Rotate|ne.Drag|ne.Resize),minHeight:25},!0);a.annotations[0].content=" + Name : Type";n.id.split("_");a.id=lc()+a.id,a.parentId=e.id,a.zIndex=-1,a.umlIndex=o,this.diagram.startGroupAction();e.wrapper.children.indexOf(a.wrapper);this.diagram.enableServerDataBinding(!0),this.diagram.add(a),this.diagram.updateConnectorEdges(e),this.diagram.clearSelection(),this.diagram.select([this.diagram.nameTable[a.id]]),this.diagram.endGroupAction(),this.diagram.startTextEdit()}}},e}(),Md=function(){function e(){}return e.prototype.findObjectsUnderMouse=function(e,t,i,n,r){var o,a,s,l,c=[];n&&n instanceof Dl&&n.nodes.length+n.connectors.length===1&&(n=n.nodes[0]||n.connectors[0]).children&&0===n.children.length&&(i.actualObject=n);for(var d,h,p=n&&n instanceof _r&&(n.constraints&te.ConnectToNearByNode||n.constraints&te.ConnectToNearByPort)&&n.connectionPadding||0,u={},f=0,g=t.spatialSearch.findObjects(new _(e.x-50-p,e.y-50-p,100+p,100+p));f<g.length;f++){var m=e;a=(j=g[f]).wrapper.outerBounds;var v=!j.rotateAngle&&a.containsPoint(m,p);if((j!==n||t.currentDrawingObject instanceof _r)&&j instanceof _r?j!==t.currentDrawingObject:j.wrapper.visible)if((S=t.commandHandler.getObjectLayer(j.id))&&!S.lock&&S.visible){if(d=u[S.zIndex]=u[S.zIndex]||[],j.rotateAngle){a=hc(o=j.wrapper);for(var y=0,b=o.children;y<b.length;y++)s=b[y],q(l=W(),-(s.rotateAngle+s.parentTransform),s.offsetX,s.offsetY),m=F(l,e),hc(s).containsPoint(m,p)&&(v=!0)}if((!n||!1===od(t,j))&&((h=j)instanceof _r?h.constraints&te.PointerEvents:h.constraints&ne.PointerEvents)&&(j instanceof _r?Ha(j,e):v)){var w=j instanceof _r&&j.hitPadding||0;this.findElementUnderMouse(j,e,p||w)&&"helper"!==j.id&&xs(j,"zIndex",d)}}}for(var x=0,O=t.layers;x<O.length;x++)for(var S=O[x],C=0,P=c=c.concat(u[S.zIndex]||[]);C<P.length;C++){var j;if("Bpmn"===(j=P[C]).shape.type&&j.processId&&(!(t.eventHandler.tool instanceof md)||t.eventHandler.tool instanceof md&&so(j)))(k=c.indexOf(t.nameTable[j.processId]))>-1&&c.splice(k,1);if("UmlClassifier"===j.shape.type&&j.container&&"Stack"===j.container.type)(k=c.indexOf(t.nameTable[t.nameTable[j.id].wrapper.children[0].id]))>-1&&c.splice(k,1)}for(var I=0;I<c.length;I++){var E=t.nameTable[c[I].parentId];if(E)for(var T=this.findElementUnderMouse(E,e),A=0;A<E.ports.length;A++)if(T.id.match("_"+E.ports[A].id+"$")){var D=E.ports[A];if(wo(D)||bo(D))return c}for(;E;){var k;if(-1===(k=c.indexOf(E)))break;c.splice(k,1),E=t.nameTable[E.parentId]}}if(i&&!i.source)for(I=0;I<c.length;I++){var M=t.nameTable[c[I].parentId];if(M&&"SwimLane"===M.shape.type)for(A=0;A<c.length;A++){c[A]instanceof _r&&c.splice(I,1)}}return c},e.prototype.isTarget=function(e,t,i){var n,r=t.selectedItems.connectors[0];if(!(n="ConnectorSourceEnd"===i?t.nameTable[r.targetID]:n=t.nameTable[r.sourceID])||(n.processId||e.processId)&&n.processId===e.processId||(n.processId!==e.processId&&(e=null),e&&e.parentId&&"UmlClassifier"===t.nameTable[e.parentId].shape.type&&(e=t.nameTable[e.parentId])),"ConnectorSourceEnd"===i&&r.targetID){var o=t.nameTable[r.targetID];if(o&&o.shape&&"TextAnnotation"===o.shape.shape){var a=r.id.split("_");("Bpmn"===o.shape.type&&"Bpmn"!==e.shape.type||a[0]===e.id||"TextAnnotation"===e.shape.shape)&&(e=null),e.parentId&&"UmlClassifier"===t.nameTable[e.parentId].shape.type&&(e=t.nameTable[e.parentId])}}return e},e.prototype.findObjectUnderMouse=function(e,t,i,n,r,o,a){var s,l,c=null;if(0!==t.length)if(a&&a instanceof Dl&&a.nodes.length+a.connectors.length===1&&(a=a.nodes[0]||a.connectors[0]),"ConnectorSourceEnd"===i&&a||"PortDraw"===i||(fo(e)||uo(e))&&Ps(e.drawingObject)===_r)for(var d=e.selectedItems.connectors[0],h=t.length-1;h>=0;h--){l=ms(t[h],!1),s=ms(t[h],!0);var p=e.eventHandler.tool,u=this.findTargetElement(t[h].wrapper,o,void 0);if("Draw"===i&&u&&t[h]instanceof Pl&&!Ds(t[h],u)&&(p&&"ConnectorSourceEnd"===p.endPoint&&!ro(t[h])||p&&"ConnectorTargetEnd"===p.endPoint&&!io(t[h])))return c;if(t[h]instanceof Pl&&(ro(t[h])||oo(l)||io(t[h])||no(s)||"PortDraw"===i&&p instanceof gd&&"ConnectorTargetEnd"==p.endPoint&&(io(t[h])||no(s))))return c=t[h],d&&(c=this.isTarget(c,e,i)),r.actualObject=c,c}else if("ConnectorTargetEnd"===i&&a){for(h=t.length-1;h>=0;h--)if(s=ms(t[h],!0),t[h]instanceof Pl&&(io(t[h])||no(s)))return c=t[h],c=this.isTarget(c,e,i),r.actualObject=c,c}else{if(a&&("Drag"===i||e.eventHandler.tool instanceof md)){var f=0;for(h=0;h<t.length;h++){var g=t[h];a!==g&&(g instanceof _r||!o||g.wrapper.bounds.containsPoint(o))&&so(g)&&(c?(c=f>=g.zIndex?c:g,f=Math.max(f,g.zIndex)):f=(c=g).zIndex)}return c&&"Bpmn"===c.shape.type&&(c=e.selectedItems.nodes.length>0&&"Bpmn"===e.selectedItems.nodes[0].shape.type?c:null),c&&(r.actualObject=c),c}if("Select"!==i&&"Pan"!==i||!e.eventHandler.tool)if("Pan"===i||"LayoutAnimation"===i){for(h=t.length-1;h>=0;h--)if(t[h]instanceof Pl||t[h]instanceof _r){var m=this.findTargetElement(t[h].wrapper,o,void 0);if("Pan"===i||m&&(m.id.match("_icon_content_shape$")||m.id.match("_icon_content_rect$")))return t[h]}}else c=t[t.length-1],r&&c&&(r.actualObject=c);else{for(var h=t.length-1;h>=0;h--)if(t[h]instanceof _r){var v=t[h-1];if(t[h-1]instanceof Pl&&v.ports){var y=this.findTargetElement(v.wrapper,o,void 0);if(y&&(y.id.match("_icon_content_shape$")||y.id.match("_icon_content_rect$")))return v;for(var b=0;b<v.ports.length;b++)if(y&&y.id.match("_"+v.ports[b].id+"$")&&bo(v.ports[b]))return v}}if(c=t[t.length-1],r.actualObject=c,!e.eventHandler.itemClick(c,!0)&&c.parentId)for(var w=c,x=od(e,w);w&&(!od(e,w)||x);)c=w,w=e.nameTable[w.parentId]}}return c},e.prototype.findElementUnderSelectedItem=function(e,t,i){return e instanceof Dl?1!==e.nodes.length||e.connectors&&e.connectors.length?e.nodes&&!e.nodes.length||1!==e.connectors.length?null:this.findElementUnderMouse(e.connectors[0],t):this.findElementUnderMouse(e.nodes[0],t):this.findElementUnderMouse(e,t,i)},e.prototype.findElementUnderMouse=function(e,t,i){return this.findTargetElement(e.wrapper,t,i)},e.prototype.findTargetElement=function(e,t,i){for(var n=e.children.length-1;n>=0;n--){var r=e.children[n];if(r&&r.outerBounds.containsPoint(t,i||0)){if(r instanceof ze){var o=this.findTargetElement(r,t);if(o)return o}if(r.bounds.containsPoint(t,i||0))return r}}return e.bounds.containsPoint(t,i)&&"none"!==e.style.fill?e:null},e}(),Ld=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Rd=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},zd=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n,r)||this;return o.objectZIndex=-1,o.zIndexTable={},o.objects=[],o}return Ld(t,e),Rd([Object(r.q)("")],t.prototype,"id",void 0),Rd([Object(r.q)(!0)],t.prototype,"visible",void 0),Rd([Object(r.q)(!1)],t.prototype,"lock",void 0),Rd([Object(r.q)()],t.prototype,"objects",void 0),Rd([Object(r.q)()],t.prototype,"addInfo",void 0),Rd([Object(r.q)(-1)],t.prototype,"zIndex",void 0),t}(r.d),Nd=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))},Bd=function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},_d=function(){function e(e){this.clipboardData={},this.diagramObject={},this.newSelectedObjects={},this.oldSelectedObjects={},this.connectorsTable=[],this.processTable={},this.deepDiffer=new ld,this.isContainer=!1,this.childTable={},this.parentTable={},this.blazor="Blazor",this.blazorInterop="sfBlazor",this.cloneGroupChildCollection=[],this.diagram=e}return Object.defineProperty(e.prototype,"snappingModule",{get:function(){return this.diagram.snappingModule},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutAnimateModule",{get:function(){return this.diagram.layoutAnimateModule},enumerable:!0,configurable:!0}),e.prototype.startTransaction=function(e){this.state={element:this.diagram.selectedItems,backup:null},e&&this.diagram.protectPropertyChange(!0),Wl(this.diagram.element.id).style.pointerEvents="none"},e.prototype.endTransaction=function(e){this.state=null,e&&this.diagram.protectPropertyChange(!1),Wl(this.diagram.element.id).style.pointerEvents="all"},e.prototype.setFocus=function(){document.getElementById(this.diagram.element.id).focus()},e.prototype.showTooltip=function(e,t,i,n,o){var a=this;if(o&&(this.diagram.tooltipObject.position="BottomCenter",this.diagram.tooltipObject.animation={open:{delay:0,duration:0}},this.diagram.tooltipObject.openDelay=0,this.diagram.tooltipObject.closeDelay=0),this.diagram.selectedItems.setTooltipTemplate){var s=void 0,l=Pc(this.diagram.selectedItems.setTooltipTemplate);l&&(s=l(e,this.diagram)),i=s instanceof HTMLElement?s.cloneNode(!0):s||i}Object(r.I)()&&o&&this.diagram.tooltipObject.close(),e.tooltip&&(this.diagram.tooltipObject.openOn=e.tooltip.openOn),this.diagram.tooltipObject.content=i;var c=Va(this.diagram,{x:t.x,y:t.y},e,"ConnectTool"===n?"Mouse":"Object");this.diagram.tooltipObject.offsetX=c.x+("ConnectTool"===n?10:0),this.diagram.tooltipObject.offsetY=c.y+10,Object(r.I)()?this.diagram.tooltipObject.updateTooltip(this.diagram.element):this.diagram.tooltipObject.dataBind(),o&&setTimeout((function(){a.diagram.tooltipObject.open(a.diagram.element)}),1)},e.prototype.closeTooltip=function(){this.diagram.tooltipObject.close()},e.prototype.canEnableDefaultTooltip=function(){return!!(this.diagram.selectedItems.constraints&$.ToolTip)},e.prototype.updateSelector=function(){this.diagram.updateSelector()},e.prototype.updateConnectorValue=function(e){if(e.cancel){this.enableCloneObject(!0),this.ismouseEvents(!0),this.insertBlazorObject(e.connector);var t={},i={},n=this.diagram.nameTable[e.connector.id],r="ConnectorSourceEnd"===e.connectorEnd?"sourceID":"targetID",o="ConnectorSourceEnd"===e.connectorEnd?"sourcePortID":"targetPortID",a="ConnectorTargetEnd"===e.connectorEnd,s=a?e.newValue.connectorTargetValue:e.newValue.connectorSourceValue,l=a?e.oldValue.connectorTargetValue:e.oldValue.connectorSourceValue;i[r]=s.nodeId,i[o]=s.portId,t[r]=l.nodeId,t[o]=l.portId,e.cancel&&"ConnectorTargetEnd"!==e.connectorEnd&&(n.sourceID=l.nodeId,e.connector.sourcePortID&&(n.sourcePortID=l.portId),this.diagram.connectorPropertyChange(n,i,t)),e.cancel&&"ConnectorTargetEnd"===e.connectorEnd&&(e.connector.targetPortID&&(n.targetPortID=l.portId),n.targetID=l.nodeId,this.diagram.connectorPropertyChange(n,i,t))}},e.prototype.triggerEvent=function(e,t){return Nd(this,void 0,void 0,(function(){return Bd(this,(function(i){switch(i.label){case 0:if(e===ve.drop||e===ve.positionChange||e===ve.connectionChange){if(this.diagram.currentSymbol)return[2];if(e===ve.drop&&(t.source=Ls(this.diagram)),this.diagram.currentDrawingObject&&e!==ve.positionChange)return[2]}return[4,this.diagram.triggerEvent(e,t)];case 1:return[2,i.sent()]}}))}))},e.prototype.dragOverElement=function(e,t){if(this.diagram.currentSymbol){var i={element:Ls(e.source),target:Ls(e.target),mousePosition:Ls(t),diagram:Ls(this.diagram)};this.triggerEvent(ve.dragOver,i)}},e.prototype.disConnect=function(e,t,i){var n,o,a=Object(r.I)(),s={},l={};if(e instanceof Dl?o=e.connectors[0]:e instanceof _r&&this.diagram.currentDrawingObject&&(o=this.diagram.currentDrawingObject),e&&o&&(rd(this.diagram)||this.diagram.currentDrawingObject))if(Object(r.I)()&&this.diagram.insertValue(uc(o),!1),!t||"ConnectorSourceEnd"!==t&&"ConnectorTargetEnd"!==t){if("OrthoThumb"!==t&&"SegmentEnd"!==t&&(o.sourceID||o.targetID)){s={sourceID:o.sourceID,sourcePortID:o.sourcePortID,targetID:o.targetID,targetPortID:o.targetPortID},o.sourceID="",o.sourcePortID="",o.targetID="",o.targetPortID="",l={sourceID:o.sourceID,sourcePortID:o.sourcePortID,targetID:o.targetID,targetPortID:o.targetPortID};var c={connector:Ls(o),oldValue:s,newValue:l,cancel:!1,state:"Changing",connectorEnd:t};Object(r.I)()&&(n=c={connector:Ls(o),oldValue:{connector:Ls(s)},newValue:{connector:Ls(l)},cancel:!1,state:"Changed",connectorEnd:t}),a||this.triggerEvent(ve.connectionChange,c),c.cancel?(o.sourceID=s.sourceID,o.sourcePortID=s.sourcePortID,o.targetID=s.targetID,o.targetPortID=s.targetPortID):(this.diagram.connectorPropertyChange(o,s,l),this.diagram.updateDiagramObject(o),c={connector:o,oldValue:s,newValue:l,cancel:!1,state:"Changed",connectorEnd:t},Object(r.I)()&&(n=c={connector:Ls(o),oldValue:{connector:s},newValue:{connector:l},cancel:!1,state:"Changed",connectorEnd:t}),a||this.triggerEvent(ve.connectionChange,c))}}else{var d="ConnectorSourceEnd"===t?"sourceID":"targetID",h="ConnectorSourceEnd"===t?"sourcePortID":"targetPortID";o[d]&&(s[d]=o[d],o[d]="",l[d]=o[d],(o.sourcePortID||o.targetPortID)&&(s[h]=o[h],o[h]="",l[h]=o[h]),n=this.connectionEventChange(o,s,l,t,i))}return n},e.prototype.connectionEventChange=function(e,t,i,n,o){var a,s,l=Object(r.I)(),c="ConnectorSourceEnd"===n?"sourceID":"targetID",d="ConnectorSourceEnd"===n?"sourcePortID":"targetPortID";if(this.enableCloneObject){var h=uc(a=this.diagram.nameTable[i[c]]);this.diagram.insertValue(h,!0)}var p={cancel:!1,state:"Changing",connectorEnd:n,connector:Ls(e),oldValue:{nodeId:t[c],portId:t[d]},newValue:{nodeId:i[c],portId:i[d]}};if(Object(r.I)()&&(p={connector:Ls(e),cancel:!1,state:"Changing",connectorEnd:n,oldValue:void 0,newValue:void 0},"ConnectorSourceEnd"===n?(p.oldValue={connectorSourceValue:{portId:t[d],nodeId:t[c]}},p.newValue={connectorSourceValue:{nodeId:i[c],portId:i[d]}}):(p.oldValue={connectorTargetValue:{nodeId:t[c],portId:t[d]}},p.newValue={connectorTargetValue:{nodeId:i[c],portId:i[d]}}),s=p),l||this.triggerEvent(ve.connectionChange,p),p.cancel||Object(r.I)()&&o?(e[c]=t[c],e[d]=t[d],i=t):(this.diagram.connectorPropertyChange(e,t,i),this.diagram.updateDiagramObject(e),p={connector:Ls(e),oldValue:{nodeId:t[c],portId:t[d]},newValue:{nodeId:i[c],portId:i[d]},cancel:!1,state:"Changing",connectorEnd:n},Object(r.I)()&&(p={connector:Ls(e),oldValue:void 0,newValue:void 0,cancel:!1,state:"Changing",connectorEnd:n},"ConnectorSourceEnd"===n?(p.newValue={connectorSourceValue:{portId:i[d],nodeId:i[c]}},p.oldValue={connectorSourceValue:{portId:t[d],nodeId:t[c]}}):(p.oldValue={connectorTargetValue:{nodeId:t[c],portId:t[d]}},p.newValue={connectorTargetValue:{portId:i[d],nodeId:i[c]}}),s=p)),this.enableCloneObject&&void 0===a){h=uc(a=this.diagram.nameTable[t[c]]);this.diagram.insertValue(h,!0)}return s},e.prototype.insertBlazorObject=function(e,t){var i,n;if(e instanceof Dl){this.oldSelectedObjects=Ts(this.diagram);for(var r=0;r<e.nodes.length;r++)i=this.diagram.getObject(e.nodes[r].id),this.diagram.insertValue(uc(i),!0);for(r=0;r<e.connectors.length;r++)n=this.diagram.getObject(e.connectors[r].id),this.diagram.insertValue(uc(n),!1)}else e=this.diagram.getObject(e.id),this.diagram.insertValue(uc(e),e instanceof Pl)},e.prototype.updatePropertiesToBlazor=function(e,t){this.enableCloneObject(!1),this.ismouseEvents(!1),this.getBlazorOldValues(e,t),this.updateBlazorSelector()},e.prototype.insertSelectedObjects=function(){this.oldSelectedObjects=Ts(this.diagram)},e.prototype.findTarget=function(e,t,i,n){if(t instanceof Pl){if(e&&e.id===t.id+"_content")return t;if(i&&"Bpmn"===t.shape.type&&(!Object(r.I)()&&"Activity"===t.shape.shape||Object(r.I)()&&"Activity"===t.shape.bpmnShape)&&"Transaction"===t.shape.activity.subProcess.type){var o=t.shape.activity.subProcess.transaction;if(o.success.visible&&0===e.id.indexOf(t.id+"_success"))return o.success;if(o.cancel.visible&&0===e.id.indexOf(t.id+"_cancel"))return o.cancel;if(o.failure.visible&&0===e.id.indexOf(t.id+"_failure"))return o.failure}if(e instanceof Ue)for(var a=0;a<t.ports.length;a++){var s=t.ports[a];if(e.id===t.id+"_"+s.id)return s}}if(!n){var l=void 0;for(a=0;a<t.annotations.length;a++)if(l=t.annotations[a],e.id===t.id+"_"+l.id)return l}return t},e.prototype.canDisconnect=function(e,t,i,n){var r;t.source instanceof Dl?r=t.source.connectors[0]:t.source instanceof _r&&this.diagram.currentDrawingObject&&(r=this.diagram.currentDrawingObject);this.findTarget(t.targetWrapper,t.target,"ConnectorSourceEnd"===e,!0);var o="ConnectorSourceEnd"===e?"sourcePortID":"targetPortID";return r["ConnectorSourceEnd"===e?"sourceID":"targetID"]!==n||r[o]!==i},e.prototype.changeAnnotationDrag=function(e){var t;if(e.source&&e.source.connectors&&e.source.connectors.length&&this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(e.source.connectors[0])>-1){e.source instanceof Dl&&(t=e.source.connectors[0]);var i=t.id.split("_"),n=(i[i.length-1],i[i.length-3]||i[0]);if(e.target&&e.target.id!==n&&(!Object(r.I)()&&"TextAnnotation"!==e.target.shape.shape||Object(r.I)()&&"TextAnnotation"!==e.target.shape.bpmnShape)){this.diagram.startGroupAction();var o=this.diagram.nameTable[i[0]],a=this.getAnnotation(o,i[1]),s={id:i[1]+lc(),angle:E.findAngle(t.intermediatePoints[0],t.intermediatePoints[1]),text:a.text,length:E.distancePoints(t.intermediatePoints[0],t.intermediatePoints[1]),shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:a.nodeId},l=new ul(e.target.shape,"annotations",s,!0);this.diagram.bpmnModule.checkAndRemoveAnnotations(this.diagram.nameTable[t.targetID],this.diagram),this.diagram.refreshCanvasLayers(),l.id=i[1],this.diagram.addTextAnnotation(l,e.target),this.diagram.endGroupAction()}else t&&(t.sourceID=n,this.diagram.connectorPropertyChange(t,{},{sourceID:n}),this.diagram.updateDiagramObject(t))}},e.prototype.connect=function(e,t,i){var n,o,a,s,l={},c={};t.source instanceof Dl?a=t.source.connectors[0]:t.source instanceof _r&&this.diagram.currentDrawingObject&&(a=this.diagram.currentDrawingObject);var d=this.findTarget(t.targetWrapper||t.sourceWrapper,t.target||t.actualObject,"ConnectorSourceEnd"===e,!0),h="ConnectorSourceEnd"===e?"sourceID":"targetID",p="ConnectorSourceEnd"===e?"sourcePortID":"targetPortID";if(d instanceof Pl)c[h]=a[h],a[h]=d.id,l[h]=a[h],c[p]=a[p],s=this.connectionEventChange(a,c,l,e,i);else{n=a[h],o=a[p],a[p]=d.id,a[h]=t.target&&t.target.id||t.actualObject.id,l[h]=a[h],l[p]=a[p];var u={connector:Ls(a),oldValue:{nodeId:n,portId:o},newValue:{nodeId:l[h],portId:l[p]},cancel:!1,state:"Changing",connectorEnd:e};Object(r.I)()&&(u={connector:Ls(a),oldValue:void 0,newValue:void 0,cancel:!1,state:"Changing",connectorEnd:e},"ConnectorSourceEnd"===e?(u.oldValue={connectorSourceValue:{portId:c[p],nodeId:c[h]}},u.newValue={connectorSourceValue:{portId:l[p],nodeId:l[h]}}):(u.newValue={connectorTargetValue:{portId:l[p],nodeId:l[h]}},u.oldValue={connectorTargetValue:{portId:c[p],nodeId:c[h]}}),s=u),this.triggerEvent(ve.connectionChange,u),u.cancel||Object(r.I)()&&i?(a[h]=n,a[p]=o,l[h]=n,l[p]=o):(this.diagram.connectorPropertyChange(a,c,l),this.diagram.updateDiagramObject(a),u={connector:Ls(a),oldValue:{nodeId:n,portId:o},newValue:{nodeId:l[h],portId:l[p]},cancel:!1,state:"Changing",connectorEnd:e},Object(r.I)()&&(u={newValue:void 0,connector:Ls(a),oldValue:void 0,cancel:!1,state:"Changing",connectorEnd:e},"ConnectorSourceEnd"===e?(u.oldValue={connectorSourceValue:{portId:c[p],nodeId:c[h]}},u.newValue={connectorTargetValue:{portId:l[p],nodeId:l[h]}}):(u.oldValue={connectorTargetValue:{portId:c[p],nodeId:c[h]}},u.newValue={connectorTargetValue:{portId:l[p],nodeId:l[h]}})))}return this.renderHighlighter(t,void 0,"ConnectorSourceEnd"===e),s},e.prototype.cut=function(){this.clipboardData.pasteIndex=0,this.diagram.undoRedoModule&&this.diagram.historyManager.startGroupAction(),this.clipboardData.clipObject=this.copyObjects(),this.diagram.undoRedoModule&&this.diagram.historyManager.endGroupAction(),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()},e.prototype.UpdateBlazorDiagramModelLayers=function(e,t){var i=Ls(e);if(window&&window.Blazor){var n={methodName:"UpdateBlazorDiagramModelLayers",diagramobj:JSON.stringify(i),isRemove:t};window.sfBlazor.updateBlazorProperties(n,this.diagram)}},e.prototype.addLayer=function(e,t,i){void 0===i&&(i=!0),e.id=e.id||lc(),e.zIndex=this.diagram.layers.length,this.diagram.enableServerDataBinding(!1),e=new zd(this.diagram,"layers",e,!0),this.diagram.enableServerDataBinding(!0),e.objectZIndex=-1,e.zIndexTable={},this.diagram.layers.push(e),i&&this.UpdateBlazorDiagramModelLayers(e,!1),this.diagram.layerZIndexTable[e.zIndex]=e.id,this.diagram.activeLayer=e;e.objects;if(t)for(var n=0;n<t.length;n++)this.diagram.add(t[n])},e.prototype.getObjectLayer=function(e){for(var t=this.diagram.layers,i=0;i<t.length;i++){if(t[i].objects.indexOf(e)>-1)return t[i]}return this.diagram.activeLayer},e.prototype.getLayer=function(e){for(var t=this.diagram.layers,i=0;i<t.length;i++)if(t[i].id===e)return t[i]},e.prototype.removeLayer=function(e,t){void 0===t&&(t=!0);var i=this.getLayer(e);if(i){for(var n=this.diagram.layers.indexOf(i),r=i.objects,o=r.length-1;o>=0;o--)this.diagram.unSelect(this.diagram.nameTable[r[o]]),this.diagram.remove(this.diagram.nameTable[r[o]]),"default_layer"!==i.id&&this.diagram.activeLayer.id===e&&(this.diagram.activeLayer=this.diagram.layers[this.diagram.layers.length-1]);t&&this.UpdateBlazorDiagramModelLayers(this.diagram.layers[n],!0),delete this.diagram.layerZIndexTable[i.zIndex],this.diagram.layers.splice(n,1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()}},e.prototype.moveObjects=function(e,t){var i,n=this.getLayer(t)||this.diagram.activeLayer;this.diagram.setActiveLayer(n.id);for(var r=0,o=e;r<o.length;r++){var a=o[r];this.getObjectLayer(a).objects.indexOf(a)>-1&&(i=this.diagram.nameTable[a],this.diagram.unSelect(i),this.diagram.remove(this.diagram.nameTable[a]),this.diagram.add(i))}},e.prototype.cloneLayer=function(e){this.diagram.layers;var t=this.getLayer(e);if(t){var i=[],n={id:e+"_"+lc(),objects:[],visible:!0,lock:!1};this.addLayer(n,null,!0),n.zIndex=this.diagram.layers.length-1;i.length;for(var r=0,o=t.objects;r<o.length;r++){var a=o[r];i.push(this.diagram.nameTable[a])}this.paste(i)}},e.prototype.copy=function(){return this.clipboardData.pasteIndex=1,this.clipboardData.clipObject=this.copyObjects(),this.clipboardData.clipObject},e.prototype.copyObjects=function(){var e=[],t=[];if(this.clipboardData.childTable={},this.diagram.selectedItems.connectors.length>0){e=this.diagram.selectedItems.connectors;for(var i=0;i<e.length;i++){var n=void 0;n=this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(e[i])>-1?uc(this.diagram.nameTable[e[i].targetID]):uc(e[i]),t.push(n)}}if(this.diagram.selectedItems.nodes.length>0){e=e.concat(this.diagram.selectedItems.nodes);for(i=0;i<this.diagram.selectedItems.nodes.length;i++)if(!e[i].isPhase){var r=uc(this.diagram.selectedItems.nodes[i]);r.wrapper&&r.offsetX!==r.wrapper.offsetX&&(r.offsetX=r.wrapper.offsetX),r.wrapper&&r.offsetY!==r.wrapper.offsetY&&(r.offsetY=r.wrapper.offsetY);this.copyProcesses(r),t.push(uc(r));var o=W();if(q(o,-r.rotateAngle,r.offsetX,r.offsetY),r.children){for(var a=this.clipboardData.childTable,s=void 0,l=this.getAllDescendants(r,[],!0),c=0;c<l.length;c++){var d=a[(s=this.diagram.nameTable[l[c].id]).id]=uc(s),h=F(o,{x:d.wrapper.offsetX,y:d.wrapper.offsetY});s instanceof Pl&&(d.offsetX=h.x,d.offsetY=h.y,d.rotateAngle-=r.rotateAngle)}this.clipboardData.childTable=a}if("SwimLane"===r.shape.type){var p=this.diagram.getObject(this.diagram.selectedItems.nodes[i].id),u=(a=this.clipboardData.childTable,ia(this.diagram,p.wrapper.children[0]));for(c=0;c<u.length;c++){var f=this.diagram.getObject(u[c]);a[f.id]=uc(f)}}if(r&&r.isLane){a=this.clipboardData.childTable,p=this.diagram.getObject(r.parentId);var g=Ta(r,this.diagram);a[r.id]=uc(g),a[r.id].width=p.wrapper.actualSize.width}}}if(0===this.clipboardData.pasteIndex){this.startGroupAction();for(var m=0,v=e;m<v.length;m++){var y=v[m];this.diagram.nameTable[y.id]&&(this.diagram.bpmnModule&&this.diagram.bpmnModule.textAnnotationConnectors.indexOf(y)>-1?this.diagram.remove(this.diagram.nameTable[y.targetID]):this.diagram.remove(y))}this.endGroupAction()}return this.sortByZIndex(t,"zIndex"),t},e.prototype.copyProcesses=function(e){if("Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0){for(var t=0,i=e.shape.activity.subProcess.processes;t<i.length;t++){var n=i[t];this.processTable[n]=uc(this.diagram.nameTable[n]),this.processTable[n].shape.activity.subProcess.processes&&this.processTable[n].shape.activity.subProcess.processes.length>0&&this.copyProcesses(this.processTable[n])}this.clipboardData.processTable=this.processTable}},e.prototype.group=function(){this.oldSelectedObjects=Ts(this.diagram);var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|pe.Group;var t,i=[],n={};n.id="group"+lc(),(n=new Pl(this.diagram,"nodes",n,!0)).children=[],i=(i=this.diagram.selectedItems.nodes).concat(this.diagram.selectedItems.connectors);for(var r=0;r<i.length;r++)i[r].parentId||n.children.push(i[r].id);(t=this.diagram.add(n))&&this.select(t);var o={type:"Group",undoObject:n,redoObject:n,category:"Internal"};this.addHistoryEntry(o),this.diagram.diagramActions=this.diagram.diagramActions&~pe.Group,this.diagram.protectPropertyChange(e),this.updateBlazorSelector()},e.prototype.unGroup=function(e){var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|pe.Group;var i=[];e?i.push(e):i=this.diagram.selectedItems.nodes,this.diagram.startGroupAction();for(var n=0;n<i.length;n++){for(var o=i[n],a=uc(o),s=[],l=0;l<o.children.length;l++)s.push(o.children[l]);if(o.children){o.ports&&o.ports.length>0&&this.diagram.removePorts(o,o.ports),o.annotations&&o.annotations.length>0&&(!Object(r.I)()||Object(r.I)()&&""!==o.annotations[0].content)&&this.diagram.removeLabels(o,o.annotations);for(var c=this.diagram.nameTable[o.parentId],d=o.children.length-1;d>=0;d--)this.diagram.nameTable[o.children[d]].parentId="",this.diagram.deleteChild(this.diagram.nameTable[o.children[d]],o),o.parentId&&o.children[d]&&this.diagram.addChild(c,o.children[d]);this.resetDependentConnectors(o.inEdges,!0),this.resetDependentConnectors(o.outEdges,!1);var h={type:"UnGroup",undoObject:a,redoObject:a,category:"Internal"};this.diagram.diagramActions&pe.UndoRedo||this.addHistoryEntry(h),o.parentId&&this.diagram.deleteChild(o,c)}this.diagram.removeNode(o,s),this.clearSelection()}this.diagram.endGroupAction(),this.diagram.diagramActions=this.diagram.diagramActions&~pe.Group,this.diagram.protectPropertyChange(t)},e.prototype.resetDependentConnectors=function(e,t){for(var i=0;i<e.length;i++){var n=this.diagram.nameTable[e[i]],r=uc(n),o=void 0;t?(n.targetID="",n.targetPortID="",o={targetID:n.targetID,targetPortID:n.targetPortID}):(n.sourceID="",n.sourcePortID="",o={sourceID:n.sourceID,sourcePortID:n.sourcePortID}),this.diagram.connectorPropertyChange(n,{},o);var a={type:"ConnectionChanged",undoObject:{connectors:[r],nodes:[]},redoObject:{connectors:[uc(n)],nodes:[]},category:"Internal"};this.diagram.diagramActions&pe.UndoRedo||this.addHistoryEntry(a)}},e.prototype.paste=function(e){if(e||this.clipboardData.clipObject){this.diagram.protectPropertyChange(!0);var t=e?this.getNewObject(e):this.clipboardData.clipObject;if(t){var i=1!==t.length,n=!1,o={},a={};0!==this.clipboardData.pasteIndex&&this.clearSelection(),this.diagram.undoRedoModule&&(n=!0,this.diagram.historyManager.startGroupAction());for(var s=0,l=t;s<l.length;s++){o[(h=l[s]).id]=h}var c=[];i&&(this.diagram.isServerUpdate=!0);for(var d=0;d<t.length;d++){var h=t[d];if(Ps(h)===_r){var p=uc(h),u=p.sourceID;p.sourceID="",o[u]&&a[u]&&(p.sourceID=a[u]),u=p.targetID,p.targetID="",o[u]&&a[u]&&(p.targetID=a[u]);var f=this.cloneConnector(p,i);c.push(f),a[h.id]=f.id}else{var g=this.cloneNode(h,i);if(Object(r.I)()&&g&&g.children&&g.children.length>0?(c=c.concat(this.cloneGroupChildCollection),this.cloneGroupChildCollection=[]):c.push(g),g){a[h.id]=g.id;var m=h.inEdges;if(m)for(var v=0,y=m;v<y.length;v++){if(o[x=y[v]]&&a[x])(O=this.diagram.nameTable[a[x]]).targetID=a[h.id],this.diagram.connectorPropertyChange(O,{targetID:"",targetPortID:""},{targetID:O.targetID,targetPortID:O.targetPortID})}if(m=h.outEdges)for(var b=0,w=m;b<w.length;b++){var x,O;if(o[x=w[b]]&&a[x])(O=this.diagram.nameTable[a[x]]).sourceID=a[h.id],this.diagram.connectorPropertyChange(O,{sourceID:"",sourcePortID:""},{sourceID:O.sourceID,sourcePortID:O.sourcePortID})}}}}i&&(this.diagram.isServerUpdate=!1,this.diagram.UpdateBlazorDiagramModelCollection(t[0],c),this.getBlazorOldValues(),this.diagram.select(c,!0)),!0===n&&(this.diagram.historyManager.endGroupAction(),n=!1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.clipboardData.pasteIndex++,this.diagram.protectPropertyChange(!1)}}},e.prototype.getNewObject=function(e){var t,i=[];this.clipboardData.pasteIndex=1;for(var n=0;n<e.length;n++)t=uc(e[n]),i.push(t);return i},e.prototype.cloneConnector=function(e,t){var i,n=uc(e);return this.translateObject(n),n.zIndex=-1,i=this.diagram.add(n),this.diagram.isServerUpdate||this.selectObjects([i],t),i},e.prototype.cloneNode=function(e,t,i,n){var o,a,s={},l=uc(e),c=this.diagram.nameTable[e.parentId];if(e.shape&&"Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length&&(a=l.shape.activity.subProcess.processes,l.zIndex=-1,l.shape.activity.subProcess.processes=void 0),e.shape&&"SwimLane"===e.shape.type)xa(e,this.diagram,this.clipboardData);else if(c&&"SwimLane"===c.shape.type)xa(uc(c),this.diagram,this.clipboardData,e,!0);else if(!e.children||!e.children.length||i&&i.length)if(e.shape&&(!Object(r.I)()&&"TextAnnotation"===e.shape.shape||Object(r.I)()&&"TextAnnotation"===e.shape.bpmnShape)&&-1!==e.id.indexOf("_textannotation_")&&this.diagram.nameTable[e.id])for(var d=e.id.split("_textannotation_"),h=void 0,p=this.diagram.nameTable[e.id],u=0;u<p.inEdges.length;u++){var f=this.diagram.nameTable[p.inEdges[u]];if(f){h=this.diagram.nameTable[f.sourceID];var g=this.getAnnotation(h,d[1]),m={id:d[1]+lc(),angle:g.angle,text:g.text,length:g.length,shape:{shape:"TextAnnotation",type:"Bpmn"},nodeId:g.nodeId};this.diagram.addTextAnnotation(m,h)}}else this.translateObject(l,n),l.zIndex=-1,i&&(l.children=i),o=this.diagram.add(l);else o=this.cloneGroup(e,t);for(var v=0,y=Object.keys(s);v<y.length;v++){var b=y[v];this.diagram.add(s[b])}return a&&a.length&&(o.shape.activity.subProcess.processes=a,this.cloneSubProcesses(o)),o&&!this.diagram.isServerUpdate&&this.selectObjects([o],t),o},e.prototype.getAnnotation=function(e,t){var i=e.shape.annotations;if(i&&i.length)for(var n=0;n<=i.length;n++)if(i[n].id===t)return i[n]},e.prototype.cloneSubProcesses=function(e){var t=[],i={};if("Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length)for(var n=e.shape.activity.subProcess.processes,r=0;r<n.length;r++){for(var o=this.diagram.nameTable[n[r]]||this.clipboardData.processTable[n[r]],a=0,s=o.outEdges;a<s.length;a++){var l=s[a];t.indexOf(l)<0&&t.push(l)}for(var c=0,d=o.inEdges;c<d.length;c++){l=d[c];t.indexOf(l)<0&&t.push(l)}var h=uc(this.clipboardData.processTable[n[r]]);h.processId=e.id;var p=this.cloneNode(h,!1);i[n[r]]=p.id,n[r]=p.id,this.diagram.addProcess(p,e.id);for(var u=0,f=t;u<f.length;u++){var g=f[u],m=uc(this.diagram.nameTable[g]||this.diagram.connectorTable[g]);i[m.sourceID]&&i[m.targetID]&&(m.zIndex=-1,m.id+=lc(),m.sourceID=i[m.sourceID],m.targetID=i[m.targetID],t.splice(t.indexOf(g),1),this.diagram.add(m))}}},e.prototype.cloneGroup=function(e,t){var i,n=[],r=[],o=[],a=[];r=r.concat(e.children);var s=lc(),l=[];if(this.diagram.blazorActions|=Z.GroupClipboardInProcess,this.clipboardData.childTable||e.children.length>0)for(var c=0;c<r.length;c++){var d=void 0;(d=this.clipboardData.childTable?this.clipboardData.childTable[r[c]]:this.diagram.nameTable[r[c]]).parentId="",d&&(Ps(d)===_r?o.push(d):(i=this.cloneNode(d,t,void 0,s),a.push(d.id),n.push(i.id),l.push(i)))}for(var h=0;h<o.length;h++){if(o[h].sourceID||o[h].targetID)for(var p=0;p<a.length;p++)o[h].sourceID===a[p]&&(o[h].sourceID+=s),o[h].targetID===a[p]&&(o[h].targetID+=s);i=this.cloneConnector(o[h],t),n.push(i.id),l.push(i)}var u=this.cloneNode(e,t,n);return l.push(u),u&&u.container&&u.shape&&"UmlClassifier"===u.shape.type&&(this.diagram.updateDiagramObject(u),u.wrapper.measure(new P)),this.diagram.blazorActions&=~Z.GroupClipboardInProcess,this.diagram.isServerUpdate?this.cloneGroupChildCollection=l:this.diagram.UpdateBlazorDiagramModelCollection(void 0,l,void 0,!0),u},e.prototype.translateObject=function(e,t){e.id+=t||lc();var i=10*this.clipboardData.pasteIndex;if(Ps(e)===_r){if(e.sourcePoint={x:e.sourcePoint.x+i,y:e.sourcePoint.y+i},e.targetPoint={x:e.targetPoint.x+i,y:e.targetPoint.y+i},"Bezier"===e.type)for(var n=e.segments,r=0;r<n.length;r++)E.isEmptyPoint(n[r].point1)||(n[r].point1={x:n[r].point1.x+i,y:n[r].point1.y+i}),E.isEmptyPoint(n[r].point2)||(n[r].point2={x:n[r].point2.x+i,y:n[r].point2.y+i});if(("Straight"===e.type||"Bezier"===e.type)&&e.segments&&e.segments.length>0)for(n=e.segments,r=0;r<n.length-1;r++)n[r].point.x+=i,n[r].point.y+=i}else e.offsetX+=i,e.offsetY+=i},e.prototype.drawObject=function(e){var t,i,n;Object(r.I)()&&(t=this.diagram.getProtectPropertyChangeValue(),this.diagram.protectPropertyChange(!0)),e&&e.shape&&"Text"===e.shape.type&&(e.width=this.diagram.drawingObject.width?this.diagram.drawingObject.width:50,e.height=this.diagram.drawingObject.height?this.diagram.drawingObject.height:20),n=uc(this.diagram.drawingObject);for(var o=0,a=Object.keys(e);o<a.length;o++){var s=a[o];n[s]=e[s]}return Ps(this.diagram.drawingObject)===Pl?(i=new Pl(this.diagram,"nodes",n,!0)).id=(this.diagram.drawingObject.id||"node")+lc():(i=new _r(this.diagram,"connectors",n,!0)).id=(this.diagram.drawingObject.id||"connector")+lc(),Object(r.I)()&&_a(i,n,Ps(this.diagram.drawingObject)===Pl?this.diagram.nodeDefaults:this.diagram.connectorDefaults),this.diagram.initObject(i),this.diagram.updateDiagramObject(i),this.diagram.currentDrawingObject=i,Object(r.I)()&&this.diagram.protectPropertyChange(t),i},e.prototype.addObjectToDiagram=function(e){var t;this.diagram.removeFromAQuad(e),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[e.id]),delete this.diagram.nameTable[e.id],t=this.diagram.add(e),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.selectObjects([t]),e&&!uo(this.diagram)&&(this.diagram.tool&=~se.DrawOnce,this.diagram.currentDrawingObject=void 0)},e.prototype.enableServerDataBinding=function(e){this.diagram.enableServerDataBinding(e)},e.prototype.addText=function(e,t){var i=this.diagram.findElementUnderMouse(e,t);this.diagram.startTextEdit(e,i instanceof Be?i.id.split("_")[1]:void 0)},e.prototype.updateArgsObject=function(e,t,i){if(e)for(var n=0;n<e.length;n++)Ps(e[n])===_r?i.connectorCollection.push(e[n].id):i.nodeCollection.push(e[n].id)},e.prototype.updateSelectionChangeEventArgs=function(e,t,i){if(Object(r.I)()){var n=(e={cause:this.diagram.diagramActions,newValue:{},oldValue:{},state:e.state,type:e.type,cancel:!1}).oldValue,o=e.newValue;return n.connectors=[],n.nodes=[],o.connectors=[],o.nodes=[],n.nodeCollection=[],n.connectorCollection=[],o.nodeCollection=[],o.connectorCollection=[],this.updateArgsObject(this.getSelectedObject(),e,o),this.updateArgsObject(i,e,n),e}return e},e.prototype.isUserHandle=function(e){var t=this.diagram.selectedItems;if(t.wrapper&&ps(t.constraints,"UserHandle"))for(var i=0,n=t.userHandles;i<n.length;i++){var r=n[i];if(r.visible)if(id(e,ds(t,r,this.diagram.scroller.transform),r.size/(2*this.diagram.scroller.transform.scale)))return!0}return!1},e.prototype.selectObjects=function(e,t,i){return Nd(this,void 0,void 0,(function(){var n,o,a,s,l,c,d,h,p,u;return Bd(this,(function(f){switch(f.label){case 0:if(n={oldValue:i||this.getSelectedObject(),newValue:e,cause:this.diagram.diagramActions,state:"Changing",type:"Addition",cancel:!1},this.diagram.enableServerDataBinding(!1),!0,Object(r.I)()?this.oldSelectedObjects=Ts(this.diagram):this.diagram.triggerEvent(ve.selectionChange,n),o=ho(this.diagram),(a=co(this.diagram))||o){if(!o&&(e.length>1||t&&1===e.length)){if(1!==e.length)return[2];this.clearSelection()}if(!a&&1===e.length&&(!t||!nd(this.diagram)))return this.clearSelection(),[2]}if(n.cancel)return[3,5];for(u=0;u<e.length;u++)if(s=e[u])if(!0,nd(this.diagram)){if((u>0||t)&&s.children&&!s.parentId)for(l=0;l<this.diagram.selectedItems.nodes.length;l++)(c=this.diagram.nameTable[this.diagram.selectedItems.nodes[l].parentId])&&(c=this.findParent(c))&&s.id===c.id&&this.selectGroup(s);this.selectProcesses(s),this.selectBpmnSubProcesses(s)&&this.select(s,u>0||t,!0)}else this.select(s,u>0||t,!0);return n={oldValue:i||[],newValue:this.getSelectedObject(),cause:this.diagram.diagramActions,state:"Changed",type:"Addition",cancel:!1},this.diagram.renderSelector(t||e&&e.length>1),this.updateBlazorSelectorModel(i),Object(r.I)()&&this.diagram.selectionChange&&(n=this.updateSelectionChangeEventArgs(n,e,i||[]),this.updateBlazorSelector()),Object(r.I)()?[3,1]:(this.diagram.triggerEvent(ve.selectionChange,n),[3,4]);case 1:return d=void 0,window&&window[this.blazor]&&this.diagram.selectionChange?(h={EventName:"selectionChange",args:JSON.stringify(n)},[4,window[this.blazorInterop].updateBlazorDiagramEvents(h,this.diagram)]):[3,3];case 2:d=f.sent(),f.label=3;case 3:if(d&&d.cancel&&(p=[],d.oldValue.nodes.length>0&&(p=d.oldValue.nodes),d.oldValue.connectors.length>0&&(p=p.concat(d.oldValue.connectors)),p))if(p.length>0)for(u=0;u<p.length;u++)this.select(this.diagram.nameTable[p[u].id],0!==u&&p.length>1);else this.clearSelection();f.label=4;case 4:this.diagram.enableServerDataBinding(!0),this.updateBlazorSelector(),f.label=5;case 5:return[2]}}))}))},e.prototype.updateBlazorSelector=function(){if(Object(r.I)()&&this.oldSelectedObjects){this.newSelectedObjects=Ts(this.diagram);var e=this.deepDiffer.map(uc(this.newSelectedObjects),this.oldSelectedObjects),t=this.deepDiffer.frameObject({},e),i=this.deepDiffer.removeEmptyValues(t);i.nodes=[];for(var n=0;n<this.diagram.selectedItems.nodes.length;n++)i.nodes.push(this.diagram.selectedItems.nodes[n].id);i.connectors=[];for(n=0;n<this.diagram.selectedItems.connectors.length;n++)i.connectors.push(this.diagram.selectedItems.connectors[n].id);if(window&&window.Blazor){var o={methodName:"UpdateBlazorProperties",diagramobj:{selectedItems:i}};window.sfBlazor.updateBlazorProperties(o,this.diagram)}this.oldSelectedObjects=void 0,this.newSelectedObjects=void 0}},e.prototype.findParent=function(e){return e.parentId&&(e=this.diagram.nameTable[e.parentId],this.findParent(e)),e},e.prototype.selectProcesses=function(e){if(this.hasProcesses(e))for(var t=e.shape.activity.subProcess.processes,i=0;i<t.length;i++){var n=this.diagram.nameTable[t[i]];this.hasProcesses(n)&&this.selectObjects([n],!0),this.unSelect(n)}},e.prototype.selectGroup=function(e){for(var t=0;t<e.children.length;t++){var i=this.diagram.nameTable[e.children[t]];i.children&&this.selectGroup(i),this.unSelect(this.diagram.nameTable[e.children[t]])}},e.prototype.selectBpmnSubProcesses=function(e){var t,i=!0;if(e.processId)i=!od(this.diagram,this.diagram.nameTable[e.processId])&&this.selectBpmnSubProcesses(this.diagram.nameTable[e.processId]);else if(e instanceof _r){if(e.sourceID&&this.diagram.nameTable[e.sourceID]&&this.diagram.nameTable[e.sourceID].processId&&(t=this.diagram.nameTable[e.sourceID].processId),e.targetID&&this.diagram.nameTable[e.targetID]&&this.diagram.nameTable[e.targetID].processId&&(t=this.diagram.nameTable[e.targetID].processId),t){if(od(this.diagram,this.diagram.nameTable[t]))return!1;i=this.selectBpmnSubProcesses(this.diagram.nameTable[t])}}else e.parentId&&this.diagram.nameTable[e.parentId]&&"UmlClassifier"===this.diagram.nameTable[e.parentId].shape.type&&od(this.diagram,this.diagram.nameTable[e.parentId])&&(i=!1);return i},e.prototype.hasProcesses=function(e){return!!(e&&"Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0)},e.prototype.select=function(e,t,i){var n=this.getObjectLayer(e.id);if(Zr(e)&&!(e instanceof Dl)&&!od(this.diagram,e)&&n&&!n.lock&&n.visible&&e.wrapper.visible){(t=!!nd(this.diagram)&&t)||this.clearSelection(),this.diagram.enableServerDataBinding(!1);var r=this.diagram.selectedItems;if(e instanceof Pl)if(e.isHeader){var o=this.diagram.nameTable[e.parentId];r.nodes.push(o)}else r.nodes.push(e);else r.connectors.push(e);if(t)r.wrapper.rotateAngle=r.rotateAngle=0,r.wrapper.children.push(e.wrapper);else if(r.init(this.diagram),1===r.nodes.length&&0===r.connectors.length){var a=Oa(this.diagram,r);a&&(r.wrapper.children[0]=a),r.rotateAngle=r.nodes[0].rotateAngle,r.wrapper.rotateAngle=r.nodes[0].rotateAngle,r.wrapper.pivot=r.nodes[0].pivot}i||this.diagram.renderSelector(t),this.diagram.enableServerDataBinding(!0)}},e.prototype.getObjectCollectionId=function(e,t){for(var i=[],n=0,r=e?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;!t&&n<r.length;)i[n]=r[n].id,n++;return i},e.prototype.updateBlazorSelectorModel=function(e,t){if(window&&window.sfBlazor){for(var i=0,n=[];e&&i<e.length;)n[i]=e[i].id,i++;i=0;var r=Ls({nodes:this.getObjectCollectionId(!0,t),connectors:this.getObjectCollectionId(!1,t)});window.sfBlazor.updateDiagramCollection&&window.sfBlazor.updateDiagramCollection.call(this.diagram,"selectedItems",r,n,!1,!0)}},e.prototype.labelSelect=function(e,t){this.oldSelectedObjects=Ts(this.diagram);var i=this.diagram.selectedItems,n=this.diagram.allowServerDataBinding;this.diagram.allowServerDataBinding=!1,i.nodes=i.connectors=[],this.diagram.allowServerDataBinding=n,e instanceof Pl?i.nodes[0]=e:i.connectors[0]=e,i.annotation=this.findTarget(t,e),i.init(this.diagram),this.diagram.renderSelector(!1),this.updateBlazorSelector()},e.prototype.unSelect=function(e){var t=[];t.push(e);var i={oldValue:t,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1};if(this.diagram.currentSymbol||Object(r.I)()||this.diagram.triggerEvent(ve.selectionChange,i),od(this.diagram,e)){var n=this.diagram.selectedItems,o=void 0;if(e instanceof Pl?(o=n.nodes.indexOf(e,0),n.nodes.splice(o,1)):(o=n.connectors.indexOf(e,0),n.connectors.splice(o,1)),i={oldValue:t,newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},this.updateBlazorSelectorModel(t),!(i={oldValue:Ls(t),newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:i.cancel}).cancel&&(o=n.wrapper.children.indexOf(e.wrapper,0),n.wrapper.children.splice(o,1),this.diagram.updateSelector(),!this.diagram.currentSymbol))if(Object(r.I)()){if(i=this.updateSelectionChangeEventArgs(i,[],t),this.updateBlazorSelector(),window&&window[this.blazor]&&this.diagram.selectionChange){var a={EventName:"selectionChange",args:JSON.stringify(i)};window[this.blazorInterop].updateBlazorDiagramEvents(a,this.diagram)}}else this.diagram.triggerEvent(ve.selectionChange,i)}},e.prototype.getChildElements=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];n.children&&n.children.length>0?t.concat(this.getChildElements(n.children)):(t.push(n.id),n instanceof Be&&t.push(n.id+"_text"))}return t},e.prototype.moveSvgNode=function(e,t){var i=Nl(t+"_groupElement",this.diagram.element.id),n=Nl(e+"_groupElement",this.diagram.element.id);i.parentNode.insertBefore(n,i)},e.prototype.sendLayerBackward=function(e){var t=this.getLayer(e);if(t&&0!==t.zIndex){var i=t.zIndex;if("SVG"===this.diagram.mode){var n=t.objects,r=this.getLayer(this.diagram.layerZIndexTable[i-1]).objects[0];if(r)for(var o=0,a=n;o<a.length;o++){var s=a[o];this.moveSvgNode(s,r)}}var l=this.getLayer(this.diagram.layerZIndexTable[i-1]);l.zIndex=l.zIndex+1,t.zIndex=t.zIndex-1;var c=this.diagram.layerZIndexTable[i];this.diagram.layerZIndexTable[i]=this.diagram.layerZIndexTable[i-1],this.diagram.layerZIndexTable[i-1]=c,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},e.prototype.bringLayerForward=function(e){var t=this.getLayer(e);if(t&&t.zIndex<this.diagram.layers.length-1){var i=t.zIndex,n=this.getLayer(this.diagram.layerZIndexTable[i+1]);if("SVG"===this.diagram.mode)for(var r=t.objects[0],o=0,a=n.objects;o<a.length;o++){var s=a[o];s&&this.moveSvgNode(s,r)}n.zIndex=n.zIndex-1,t.zIndex=t.zIndex+1;var l=this.diagram.layerZIndexTable[i];this.diagram.layerZIndexTable[i]=this.diagram.layerZIndexTable[i+1],this.diagram.layerZIndexTable[i+1]=l,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},e.prototype.sendToBack=function(e){if(this.diagram.protectPropertyChange(!0),nd(this.diagram)||e){var t=e&&e.id;t=t||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id);var i=this.diagram.nameTable[t].zIndex,n=this.diagram.layers.indexOf(this.getObjectLayer(t)),o=this.diagram.layers[n].zIndexTable,a=uc(this.diagram.selectedItems);if(1!==this.diagram.nodes.length&&(void 0===this.diagram.nameTable[t].children||this.checkObjectBehind(t,o,i))){for(var s=i;s>0;s--)o[s]&&(o[s-1]?(o[s]=o[s-1],this.diagram.nameTable[o[s]].zIndex=s):(o[s-1]=o[s],this.diagram.nameTable[o[s-1]].zIndex=s,delete o[s]));if(o[0]=this.diagram.nameTable[t].id,this.diagram.nameTable[t].zIndex=0,"SVG"===this.diagram.mode){for(var l=o[s=1];!l&&s<i;)l=o[++s];l=this.diagram.nameTable[l].parentId?this.checkParentExist(l):l,this.moveSvgNode(t,l),this.updateNativeNodeIndex(t)}else this.diagram.refreshCanvasLayers();var c={type:"SendToBack",category:"Internal",undoObject:a,redoObject:uc(this.diagram.selectedItems)};this.diagram.diagramActions&pe.UndoRedo||this.addHistoryEntry(c)}}this.diagram.protectPropertyChange(!1),Object(r.I)()&&this.getZIndexObjects()},e.prototype.getZIndexObjects=function(){var e,t,i=[];for(e=0;e<this.diagram.nodes.length;e++)i.push(this.diagram.nodes[e]);for(t=0;t<this.diagram.connectors.length;t++)i.push(this.diagram.connectors[t]);this.updateBlazorZIndex(i)},e.prototype.updateBlazorZIndex=function(e){var t,i,n=[],r=[];if(e&&e.length>0)for(i=0;i<e.length;i++){var o=e[i];o instanceof Pl?n.push(this.getBlazorObject(o)):o instanceof _r&&r.push(this.getBlazorObject(o))}if(t={nodes:n,connectors:r},window&&window.Blazor){var a={methodName:"UpdateBlazorProperties",diagramobj:t};window.sfBlazor.updateBlazorProperties(a,this.diagram)}},e.prototype.getBlazorObject=function(e){return{sfIndex:cc(this.diagram,e.id),zIndex:e.zIndex}},e.prototype.checkParentExist=function(e){for(var t=e;this.diagram.nameTable[t].parentId;)t=this.diagram.nameTable[t].parentId;return t},e.prototype.checkObjectBehind=function(e,t,i){for(var n=0;n<i;n++){var r=t[n];if(e!==this.diagram.nameTable[r].parentId)return!0}return!1},e.prototype.bringToFront=function(e){if(this.diagram.protectPropertyChange(!0),nd(this.diagram)||e){var t=e&&e.id;t=t||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id);for(var i=this.diagram.layers.indexOf(this.getObjectLayer(t)),n=this.diagram.layers[i].zIndexTable,o=uc(this.diagram.selectedItems),a=Number(Object.keys(n).sort((function(e,t){return Number(e)-Number(t)})).reverse()[0]),s=this.diagram.nameTable[t].zIndex,l=[],c=0;c<=a;c++)l.push(n[c]);for(c=s;c<a;c++)n[c]&&(n[c+1]?(n[c]=n[c+1],this.diagram.nameTable[n[c]].zIndex=c):(n[c+1]=n[c],this.diagram.nameTable[n[c+1]].zIndex=c,delete n[c]));if(n[a]=this.diagram.nameTable[t].id,this.diagram.nameTable[t].zIndex=a,"SVG"===this.diagram.mode){var d=this.diagram.diagramLayer,h=(this.getChildElements(this.diagram.nameTable[t].wrapper.children),Nl(t+"_groupElement",this.diagram.element.id)),p=this.diagram.selectedItems.nodes;if(p.length>0&&("Native"===p[0].shape.type||"HTML"===p[0].shape.type)){h.parentNode.removeChild(h);for(var u=0;u<this.diagram.views.length;u++){var f=(h=Nl(t+("HTML"===p[0].shape.type?"_html_element":"_content_groupElement"),this.diagram.views[u])).parentNode.lastChild;f.parentNode.insertBefore(h,f.nextSibling)}var g=Gl(this.diagram.element.id);this.diagram.diagramRenderer.renderElement(this.diagram.nameTable[t].wrapper,d,g)}else{var m=this.getObjectLayer(t);for(c=0;c<m.objects.length;c++)m.objects[c]!==t&&this.diagram.nameTable[m.objects[c]].parentId!==t&&void 0!==m.objects[c]&&l.indexOf(t)<l.indexOf(m.objects[c])&&""===this.diagram.nameTable[m.objects[c]].parentId&&(this.moveSvgNode(m.objects[c],t),this.updateNativeNodeIndex(t))}}else this.diagram.refreshCanvasLayers();var v={type:"BringToFront",category:"Internal",undoObject:o,redoObject:uc(this.diagram.selectedItems)};this.diagram.diagramActions&pe.UndoRedo||this.addHistoryEntry(v)}this.diagram.protectPropertyChange(!1),Object(r.I)()&&this.getZIndexObjects()},e.prototype.sortByZIndex=function(e,t){var i=t||"zIndex";return e=e.sort((function(e,t){return e[i]-t[i]}))},e.prototype.orderCommands=function(e,t,i){var n=t.nodes;if(n=n.concat(t.connectors),e)"SendBackward"===i?this.sendBackward(n[0]):"SendForward"===i?this.sendForward(n[0]):"BringToFront"===i?this.bringToFront(n[0]):"SendToBack"===i&&this.sendToBack(n[0]);else{var r=n[0].zIndex,o=this.diagram.nameTable[n[0].id].zIndex,a=n[0],s=this.getObjectLayer(a.id),l=s.zIndex,c=s.zIndexTable;if("SendBackward"===i||"SendForward"===i)for(var d=0;d<n.length;d++){var h=n[d],p=this.diagram.layers.indexOf(this.getObjectLayer(h.id));this.diagram.nameTable[n[d].id].zIndex=h.zIndex,this.diagram.layers[p].zIndexTable[h.zIndex]=h.id}else if("BringToFront"===i)for(var u=o;u>r;u--)c[u]&&(c[u-1]?(c[u]=c[u-1],this.diagram.nameTable[c[u]].zIndex=u):(c[u-1]=c[u],this.diagram.nameTable[c[u-1]].zIndex=u,delete c[u]));else if("SendToBack"===i)for(u=o;u<r;u++)c[u]&&(c[u+1]?(c[u]=c[u+1],this.diagram.nameTable[c[u]].zIndex=u):(c[u+1]=c[u],this.diagram.nameTable[c[u+1]].zIndex=u,delete c[u]));if("BringToFront"===i||"SendToBack"===i)this.diagram.nameTable[n[0].id].zIndex=a.zIndex,this.diagram.layers[l].zIndexTable[a.zIndex]=a.id;if("SVG"===this.diagram.mode){if("SendBackward"===i)this.moveObject(n[1].id,n[0].id);else if("SendForward"===i)this.moveObject(n[0].id,n[1].id);else if("BringToFront"===i)this.moveObject(n[0].id,c[n[0].zIndex+1]);else if("SendToBack"===i){var f=this.getObjectLayer(n[0].id);for(d=0;d<=n[0].zIndex;d++)f.objects[d]!==n[0].id&&(this.moveSvgNode(f.objects[d],n[0].id),this.updateNativeNodeIndex(n[0].id))}}else this.diagram.refreshCanvasLayers()}},e.prototype.moveObject=function(e,t){t&&(this.moveSvgNode(e,t),this.updateNativeNodeIndex(e,t))},e.prototype.sendForward=function(e){if(this.diagram.protectPropertyChange(!0),nd(this.diagram)||e){var t=e&&e.id;t=t||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id);var i=this.diagram.layers.indexOf(this.getObjectLayer(t)),n=this.diagram.layers[i].zIndexTable,o=(Object.keys(n).length,this.diagram.nameTable[t]),a=[],s=this.diagram.spatialSearch.findObjects(o.wrapper.bounds);s.length>2&&(s=this.sortByZIndex(s));for(var l=0,c=s;l<c.length;l++){var d=c[l];if(o.id!==d.id)if(i===this.getObjectLayer(d.id).zIndex&&Number(this.diagram.nameTable[t].zIndex)<Number(d.zIndex)&&o.wrapper.bounds.intersects(d.wrapper.bounds)){a.push(d);break}}if(a.length>0){var h=a[0].zIndex,p=o.zIndex,u=n[h],f=uc(this.diagram.selectedItems);this.diagram.nameTable[u]instanceof Pl?f.nodes.push(uc(this.diagram.nameTable[u])):f.connectors.push(uc(this.diagram.nameTable[u])),this.diagram.layers[0].zIndexTable[h]=o.id,this.diagram.nameTable[n[h]].zIndex=h,this.diagram.layers[0].zIndexTable[p]=a[0].id,this.diagram.nameTable[n[p]].zIndex=p,"SVG"===this.diagram.mode?(this.moveSvgNode(n[Number(a[0].zIndex)],t),this.updateNativeNodeIndex(n[Number(a[0].zIndex)],t)):this.diagram.refreshCanvasLayers();var g=uc(this.diagram.selectedItems);this.diagram.nameTable[u]instanceof Pl?g.nodes.push(uc(this.diagram.nameTable[u])):g.connectors.push(uc(this.diagram.nameTable[u]));var m={type:"SendForward",category:"Internal",undoObject:f,redoObject:g};this.diagram.diagramActions&pe.UndoRedo||this.addHistoryEntry(m)}if(Object(r.I)()){var v=[];v.push(o),v.push(a[a.length-1]),this.updateBlazorZIndex(v)}}this.diagram.protectPropertyChange(!1)},e.prototype.sendBackward=function(e){if(this.diagram.protectPropertyChange(!0),nd(this.diagram)||e){var t=e&&e.id;t=t||(this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes[0].id:this.diagram.selectedItems.connectors[0].id);var i=this.diagram.layers.indexOf(this.getObjectLayer(t)),n=this.diagram.layers[i].zIndexTable,o=(Object.keys(n).length,this.diagram.nameTable[t]),a=[],s=this.diagram.spatialSearch.findObjects(o.wrapper.bounds);s.length>2&&(s=this.sortByZIndex(s));for(var l=0,c=s;l<c.length;l++){var d=c[l];if(o.id!==d.id)i===this.getObjectLayer(d.id).zIndex&&Number(this.diagram.nameTable[t].zIndex)>Number(d.zIndex)&&o.wrapper.bounds.intersects(d.wrapper.bounds)&&a.push(d)}if(a.length>0){var h=a[a.length-1].zIndex,p=o.zIndex,u=n[h],f=uc(this.diagram.selectedItems);if(this.diagram.nameTable[u]instanceof Pl?f.nodes.push(uc(this.diagram.nameTable[u])):f.connectors.push(uc(this.diagram.nameTable[u])),n[h]=o.id,this.diagram.nameTable[n[h]].zIndex=h,n[p]=a[a.length-1].id,this.diagram.nameTable[n[p]].zIndex=p,"SVG"===this.diagram.mode){if(!(o.children&&o.children.length>0)&&(this.moveSvgNode(t,n[a[a.length-1].zIndex]),this.updateNativeNodeIndex(t,n[a[a.length-1].zIndex]),Object(r.I)())){var g=[];g.push(o),g.push(a[a.length-1]),this.updateBlazorZIndex(g)}}else this.diagram.refreshCanvasLayers();var m=uc(this.diagram.selectedItems);this.diagram.nameTable[u]instanceof Pl?m.nodes.push(uc(this.diagram.nameTable[u])):m.connectors.push(uc(this.diagram.nameTable[u]));var v={type:"SendBackward",category:"Internal",undoObject:f,redoObject:m};this.diagram.diagramActions&pe.UndoRedo||this.addHistoryEntry(v)}}this.diagram.protectPropertyChange(!1)},e.prototype.updateNativeNodeIndex=function(e,t){for(var i=this.diagram.selectedItems.nodes[0]||this.diagram.getObject(t),n=0;n<this.diagram.views.length;n++)if(i&&("HTML"===i.shape.type||"Native"===i.shape.type)){var r="HTML"===i.shape.type?"_html_element":"_content_groupElement",o=Nl(e+r,this.diagram.views[n]),a=t?Nl(t+r,this.diagram.views[n]):o.parentElement.firstChild;o.parentNode.id===a.parentNode.id&&a.parentNode.insertBefore(o,a)}},e.prototype.initSelectorWrapper=function(){var e=this.diagram.selectedItems;e.init(this.diagram),1===e.nodes.length&&0===e.connectors.length&&(e.rotateAngle=e.nodes[0].rotateAngle,e.wrapper.rotateAngle=e.nodes[0].rotateAngle,e.wrapper.pivot=e.nodes[0].pivot)},e.prototype.doRubberBandSelection=function(e){this.clearSelectionRectangle();var t=[],i=[];t=this.diagram.getNodesConnectors(t),(i="CompleteIntersect"===this.diagram.selectedItems.rubberBandSelectionMode?function(e,t){for(var i=[],n=0;n<t.length;n++){var r=t[n];e.containsRect(r.wrapper.bounds)&&i.push(r)}return i}(e,t):this.diagram.spatialSearch.findObjects(e)).length&&this.selectObjects(i,!0)},e.prototype.clearSelectionRectangle=function(){var e=_l(this.diagram.element.id).getElementById(this.diagram.element.id+"_diagramAdorner_selected_region");e&&Object(r.P)(e)},e.prototype.dragConnectorEnds=function(e,t,i,n,r,o){var a,s,l,c=!1;return t instanceof Dl?a=t.connectors[0]:t instanceof _r&&this.diagram.currentDrawingObject&&(this.clearSelection(),a=this.diagram.currentDrawingObject),"BezierSourceThumb"!==e&&"BezierTargetThumb"!==e||(c=!0),"ConnectorSourceEnd"===e||"BezierSourceThumb"===e?(s=i.x-(c?n.bezierPoint1.x:a.sourcePoint.x),l=i.y-(c?n.bezierPoint1.y:a.sourcePoint.y),this.dragSourceEnd(a,s,l,null,i,e,void 0,r,o,void 0,n)):(s=i.x-(c?n.bezierPoint2.x:a.targetPoint.x),l=i.y-(c?n.bezierPoint2.y:a.targetPoint.y),this.dragTargetEnd(a,s,l,null,i,e,void 0,n))},e.prototype.getSelectedObject=function(){var e=this.diagram.selectedItems;return e.nodes.concat(e.connectors)},e.prototype.updateBlazorProperties=function(e){if(e){if(window&&window.Blazor&&"{}"!==JSON.stringify(this.deepDiffer.diagramObject)){t={methodName:"UpdateBlazorProperties",diagramobj:this.deepDiffer.diagramObject};window.sfBlazor.updateBlazorProperties(t,this.diagram)}}else if(window&&window.Blazor){var t={methodName:"UpdateBlazorProperties",diagramobj:this.diagramObject};window.sfBlazor.updateBlazorProperties(t,this.diagram)}this.deepDiffer.newNodeObject=[],this.deepDiffer.newConnectorObject=[],this.diagramObject=[],this.diagram.oldNodeObjects=[],this.diagram.oldConnectorObjects=[]},e.prototype.enableCloneObject=function(e){this.diagram.lineRoutingModule&&this.diagram.constraints&ae.LineRouting||(this.diagram.canEnableBlazorObject=e)},e.prototype.ismouseEvents=function(e){this.diagram.blazorActions=e?this.diagram.addConstraints(this.diagram.blazorActions,Z.interaction):this.diagram.removeConstraints(this.diagram.blazorActions,Z.interaction)},e.prototype.updateLayerObject=function(e,t){if(Object(r.I)()){var i;i=this.deepDiffer.getLayerObject(e,t,this.diagram),this.diagramObject=i,this.updateBlazorProperties()}},e.prototype.getDiagramOldValues=function(e,t){for(var i={},n=0;n<t.length;n++)i[t[n]]=uc(this.diagram[t[n]]);var r=uc(i),o=this.deepDiffer.map(r,e),a=this.deepDiffer.frameObject({},o),s=this.deepDiffer.removeEmptyValues(a);s=this.deepDiffer.changeSegments(s,r),this.diagramObject=s,this.diagram.blazorActions&Z.ClearObject||this.updateBlazorProperties()},e.prototype.getBlazorOldValues=function(e,t){if(Object(r.I)()){for(var i=this.diagram.oldNodeObjects,n=0;n<i.length;n++)i[n].id&&(this.diagram.oldNodeObjects[n]instanceof Pl&&(this.diagram.oldNodeObjects[n]=Ls(this.diagram.oldNodeObjects[n])),this.deepDiffer.getDifferenceValues(this.diagram.nameTable[i[n].id],e,t,this.diagram));var o=this.diagram.oldConnectorObjects;for(n=0;n<o.length;n++)o[n].id&&(this.diagram.oldConnectorObjects[n]instanceof _r&&(this.diagram.oldConnectorObjects[n]=Ls(this.diagram.oldConnectorObjects[n])),this.deepDiffer.getDifferenceValues(this.diagram.nameTable[o[n].id],e,t,this.diagram));(i.length>0||o.length>0)&&this.updateBlazorProperties(!0)}},e.prototype.getObjectChanges=function(e,t,i){for(var n=0;n<e.length;n++){var r=this.deepDiffer.map(t[n],e[n]),o=this.deepDiffer.frameObject({},r),a=this.deepDiffer.removeEmptyValues(o);a.children&&(a.children=uc(t[n]).children),(a=this.deepDiffer.changeSegments(a,t[n])).sfIndex=cc(this.diagram,t[n].id),i.push(a)}},e.prototype.clearSelection=function(e,t){return Nd(this,void 0,void 0,(function(){var i,n,o,a,s,l,c,d;return Bd(this,(function(h){switch(h.label){case 0:return i=this.diagram.allowServerDataBinding,this.diagram.enableServerDataBinding(!1),nd(this.diagram)?(n=this.diagram.selectedItems,o=this.getSelectedObject(),this.diagram.currentSymbol&&(this.diagram.previousSelectedObject=o),a={oldValue:o,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1},this.updateBlazorSelectorModel(o,!0),e&&(Object(r.I)()?this.oldSelectedObjects=uc(n):this.diagram.triggerEvent(ve.selectionChange,a)),a.cancel?[3,4]:(n.offsetX=0,n.offsetY=0,n.width=0,n.height=0,n.rotateAngle=0,n.nodes=[],n.connectors=[],n.wrapper=null,n.annotation=void 0,this.diagram.clearSelectorLayer(),e?(a={oldValue:Ls(o),newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},Object(r.I)()&&(a=this.updateSelectionChangeEventArgs(a,[],o),this.updateBlazorSelector()),Object(r.I)()?[3,1]:(this.diagram.triggerEvent(ve.selectionChange,a),[3,4])):[3,4])):[3,5];case 1:return s=void 0,window&&window[this.blazor]&&this.diagram.selectionChange?(l={EventName:"selectionChange",args:JSON.stringify(a)},[4,window[this.blazorInterop].updateBlazorDiagramEvents(l,this.diagram)]):[3,3];case 2:s=h.sent(),h.label=3;case 3:if(s&&s.cancel&&!t&&(c=[],s.oldValue.nodes.length>0&&(c=s.oldValue.nodes),s.oldValue.connectors.length>0&&(c=c.concat(s.oldValue.connectors)),c))for(d=0;d<c.length;d++)this.select(this.diagram.nameTable[c[d].id],0!=d&&c.length>1);h.label=4;case 4:this.updateBlazorSelector(),this.diagram.enableServerDataBinding(i),h.label=5;case 5:return[2]}}))}))},e.prototype.clearSelectedItems=function(){var e=this.diagram.selectedItems.nodes?this.diagram.selectedItems.nodes.length:0,t=this.diagram.selectedItems.connectors?this.diagram.selectedItems.connectors.length:0;this.clearSelection(e+t>0)},e.prototype.removeStackHighlighter=function(){var e=_l(this.diagram.element.id),t=e.getElementById(e.id+"_stack_highlighter");t&&t.parentNode.removeChild(t)},e.prototype.renderStackHighlighter=function(e,t){var i,n,r,o=this.diagram.selectedItems.nodes[0];if(!t){var a=this.diagram.findObjectsUnderMouse(e.position);if((t=this.diagram.findObjectUnderMouse(a,"Drag",!0))&&!(t.isLane||t.isPhase||t.isHeader))for(var s=0;s<a.length;s++){var l=this.diagram.nameTable[a[s].id];(l.isLane||l.isPhase||l.isHeader)&&(t=l,this.diagram.parentObject=t)}}o&&t&&t.isLane&&o.shape&&!o.shape.isPhase&&(n=this.diagram.nameTable[t.parentId],this.diagram.currentSymbol&&"SwimLane"===n.shape.type&&(i=!0),(o&&!o.parentId&&"SwimLane"!==o.shape.type||o&&o.parentId&&this.diagram.nameTable[o.parentId]&&this.diagram.nameTable[o.parentId].isLane&&o.parentId!==t.parentId&&o.parentId!==t.id)&&(r=this.diagram.selectedItems,(c=Oa(this.diagram,r,t.id,!0))&&(r.wrapper.children[0]=c),this.diagram.renderSelector(!1,!0),r.wrapper.children[0]=r.nodes[0].wrapper));o&&t&&t.parentId&&o.shape&&o.shape.isPhase&&("SwimLane"===this.diagram.nameTable[t.parentId].shape.type&&(this.diagram.selectedItems.wrapper.children[0]=this.diagram.nameTable[t.parentId].wrapper,this.diagram.renderSelector(!1,!0)));if(i&&this.diagram.currentSymbol.shape.isLane||o&&t&&o.parentId&&t.parentId&&!o.isPhase&&o.parentId===t.parentId&&o.id!==t.id&&n&&n.container&&("Stack"===n.container.type||"Grid"===n.container.type)){var c=void 0,d="Vertical"===n.container.orientation,h="Stack"===n.container?d:!d;"Grid"===n.container.type&&t.isLane&&(!this.diagram.currentSymbol&&"Horizontal"===n.shape.orientation&&t.rowIndex!==o.rowIndex||"Vertical"===n.shape.orientation&&t.columnIndex!==o.columnIndex||this.diagram.currentSymbol&&this.diagram.currentSymbol.shape.orientation===n.container.orientation)&&(r=this.diagram.selectedItems,(o.isLane&&Aa(o,this.diagram)||!o.isLane)&&(c=Oa(this.diagram,r,t.id,i)));var p="Stack"===n.container.type?t.wrapper:c;p&&Zo(p,h,e.position,this.diagram,!1,!0)}},e.prototype.insertBlazorConnector=function(e){if(e instanceof Dl)for(var t=0;t<e.connectors.length;t++)this.diagram.insertBlazorConnector(e.connectors[t]);else this.diagram.insertBlazorConnector(e)},e.prototype.drag=function(e,t,i){var n;if(Jr(e)&&this.checkBoundaryConstraints(t,i,e.wrapper.bounds)&&yo(this.diagram))if(e instanceof Pl){var r={offsetX:e.offsetX,offsetY:e.offsetY};if(e.offsetX+=t,e.offsetY+=i,e.children&&!e.container){qo(this.diagram,e,!0)||(this.diagram.diagramActions=this.diagram.diagramActions|pe.isGroupDragging);for(var o=this.getAllDescendants(e,[]),a=0;a<o.length;a++)n=this.diagram.nameTable[o[a].id],this.drag(n,t,i);this.updateInnerParentProperties(e),this.diagram.diagramActions=this.diagram.diagramActions&~pe.isGroupDragging}if(qo(this.diagram,e,!0)?Uo(this.diagram,e):(e&&e.shape&&"UmlClassifier"===e.shape.type&&(e.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(e,r,{offsetX:e.offsetX,offsetY:e.offsetY},void 0,void 0,!1),e.wrapper.measureChildren=!1),"SwimLane"===e.shape.type&&!this.diagram.currentSymbol){var s=e.wrapper.children[0];ca(ia(this.diagram,s),this.diagram)}}else{var l=e,c=(r={sourcePoint:l.sourcePoint,targetPoint:l.targetPoint},"Bezier"===l.type),d=!1;if(l.sourceWrapper?d=!0:this.dragSourceEnd(l,t,i,!0,null,"",c),l.targetWrapper?d=!0:this.dragTargetEnd(l,t,i,!0,null,"",c),!d){this.dragControlPoint(l,t,i,!0);var h={sourcePoint:l.sourcePoint,targetPoint:l.targetPoint};this.diagram.connectorPropertyChange(l,r,h)}}},e.prototype.connectorSegmentChange=function(e,t,i){var n,r,o=!0;if(!1===t.equals(t,e.wrapper.bounds)&&e.outEdges.length>0)for(var a=0;a<e.outEdges.length;a++){var s=this.diagram.nameTable[e.outEdges[a]];if(o=""!==s.targetID?!this.isSelected(this.diagram.nameTable[s.targetID]):!this.isSelected(this.diagram.nameTable[s.id]),"Orthogonal"===s.type&&s.segments&&s.segments.length>1)if(i){var l=s.segments[0],c=s.segments[1],d=Rt(Pt(e.wrapper,e.wrapper.corners,e.wrapper.bounds),l.direction),h=qt({corners:void 0,point:d=Nt(s,s.sourceWrapper,d,{x:s.sourceWrapper.offsetX,y:s.sourceWrapper.offsetY},!1),margin:void 0,direction:l.direction},{corners:void 0,point:c.points[1],margin:void 0,direction:void 0});l.length=E.distancePoints(h[0],h[1]),c.direction&&c.length&&(c.length=E.distancePoints(h[1],h[2]))}else if(o){switch(s.segments[0].direction){case"Bottom":n=e.wrapper.bounds.bottomCenter.x-t.bottomCenter.x,r=e.wrapper.bounds.bottomCenter.y-t.bottomCenter.y;break;case"Top":n=e.wrapper.bounds.topCenter.x-t.topCenter.x,r=e.wrapper.bounds.topCenter.y-t.topCenter.y;break;case"Left":n=e.wrapper.bounds.middleLeft.x-t.middleLeft.x,r=e.wrapper.bounds.middleLeft.y-t.middleLeft.y;break;case"Right":n=e.wrapper.bounds.middleRight.x-t.middleRight.x,r=e.wrapper.bounds.middleRight.y-t.middleRight.y}this.dragSourceEnd(s,n,r,!0,null,"ConnectorSourceEnd",void 0,void 0,void 0,!(e.parentId&&this.diagram.diagramActions&pe.isGroupDragging))}}},e.prototype.updateEndPoint=function(e,t){e.sourcePoint,e.targetPoint,e.sourceID&&e.sourceID,e.targetID&&e.targetID,e.sourcePortID&&e.sourcePortID,e.targetPortID&&e.targetPortID,e.segments&&e.segments;var i={sourcePoint:e.sourcePoint,targetPoint:e.targetPoint};e.sourceID&&(i.sourceID=e.sourceID),e.targetID&&(i.targetID=e.targetID),e.sourcePortID&&(i.sourcePortID=e.sourcePortID),e.targetPortID&&(i.targetPortID=e.targetPortID),e.segments&&(i.segments=e.segments),this.diagram.connectorPropertyChange(e,t||{},i),this.diagram.updateSelector()},e.prototype.dragSourceEnd=function(e,t,i,n,r,o,a,s,l,c,d){var h=this.diagram.nameTable[e.id],p={},u=this.checkBoundaryConstraints(t,i,h.wrapper.bounds);if(Qr(h)&&u&&"BezierSourceThumb"!==o&&yo(this.diagram)&&(p={sourcePoint:h.sourcePoint},h.sourcePoint.x+=t,h.sourcePoint.y+=i,"ConnectorSourceEnd"===o&&"Orthogonal"===h.type&&this.changeSegmentLength(h,s,l,c),"Bpmn"===h.shape.type&&"Default"===h.shape.sequence&&this.updatePathElementOffset(h)),"Bezier"===h.type)if(p={sourcePoint:h.sourcePoint},d)this.translateBezierPoints(e,""===o?"ConnectorSourceEnd":o,t,i,d,r,!a);else for(var f=0;f<e.segments.length;f++)this.translateBezierPoints(e,""===o?"ConnectorSourceEnd":o,t,i,e.segments[f],r,!a);return n||this.updateEndPoint(h,p),this.diagram.realActions&fe.AnimationClick||this.diagram.refreshCanvasLayers(),u},e.prototype.updatePathElementOffset=function(e){e.wrapper.children.splice(3,1);var t=new Ue,i=e.intermediatePoints;t=As(i,e),e.wrapper.children.splice(3,0,t)},e.prototype.changeSegmentLength=function(e,t,i,n){if(e.segments&&null!==e.segments[0].direction&&(!t&&""===e.sourceID||n)){var r=e.segments[0],o=e.segments[1],a=this.diagram.nameTable[e.sourceID],s=void 0;if(r.points[0]=e.sourcePoint,"Top"===r.direction||"Bottom"===r.direction?(r.points[r.points.length-1].x=e.sourcePoint.x,o.points[0].y=r.points[r.points.length-1].y):(r.points[r.points.length-1].y=e.sourcePoint.y,o.points[0].x=r.points[r.points.length-1].x),r.direction&&(r.length||0===r.length)&&(r.length=E.distancePoints(r.points[0],r.points[r.points.length-1])),o.direction&&(o.length||0===o.length)&&(o.length=E.distancePoints(r.points[r.points.length-1],o.points[o.points.length-1]),o.direction=E.direction(r.points[r.points.length-1],o.points[o.points.length-1])),""!==e.sourcePortID&&r.length<10)if(e.segments.length>2){var l=e.segments[2],c=E.direction(l.points[0],l.points[1]);r.direction===Jt(c)?("Right"===r.direction?l.points[0].x=r.points[r.points.length-1].x=a.wrapper.corners.middleRight.x+20:"Left"===r.direction?l.points[0].x=r.points[r.points.length-1].x=a.wrapper.corners.middleLeft.x-20:"Top"===r.direction?l.points[0].y=r.points[r.points.length-1].y=a.wrapper.corners.topCenter.y-20:l.points[0].y=r.points[r.points.length-1].y=a.wrapper.corners.bottomCenter.y+20,l.direction&&l.length&&(l.length=E.distancePoints(l.points[0],l.points[l.points.length-1])),r.length=E.distancePoints(r.points[0],r.points[r.points.length-1])):r.direction===c&&l.direction&&l.length?("Top"===r.direction||"Bottom"===r.direction?(l.points[0]=r.points[0],l.points[l.points.length-1].x=l.points[0].x):(l.points[0]=r.points[0],l.points[l.points.length-1].y=l.points[0].y),l.length=E.distancePoints(l.points[0],l.points[l.points.length-1]),e.segments.splice(0,2)):r.length=20}else r.length=20;else if(r.length<1)if(""!==e.sourceID){if("Right"===o.direction?(s=a.wrapper.corners.middleRight,o.points[o.points.length-1].y=s.y):"Left"===o.direction?(s=a.wrapper.corners.middleLeft,o.points[o.points.length-1].y=s.y):"Top"===o.direction?(s=a.wrapper.corners.topCenter,o.points[o.points.length-1].x=s.x):(s=a.wrapper.corners.bottomCenter,o.points[o.points.length-1].x=s.x),o.length=E.distancePoints(s,o.points[o.points.length-1]),e.segments.length>2)(l=e.segments[2]).direction&&l.length&&(l.length=E.distancePoints(o.points[o.points.length-1],l.points[l.points.length-1]));e.segments.splice(0,1)}else e.segments.splice(0,1)}else t&&!i&&e.sourceID!==t.id&&e.segments&&null!==e.segments[0].direction&&t&&t instanceof Pl&&this.changeSourceEndToNode(e,t),t&&i&&e.sourcePortID!==i&&e.segments&&null!==e.segments[0].direction&&t&&t instanceof Pl&&this.changeSourceEndToPort(e,t,i)},e.prototype.changeSourceEndToPort=function(e,t,i){var n=this.diagram.getWrapper(t.wrapper,i),r={x:n.offsetX,y:n.offsetY},o=Gt(r,hc(t.wrapper),t.wrapper.bounds),a=e.segments[0],s=e.segments[1];if(a.direction!==o){var l=[],c={};if(a.direction===Jt(o)){c={};var d=void 0;"Top"===o||"Bottom"===o?(d="Top"===o?{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(a.points[0].y-r.y)}:{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(r.y-a.points[0].y)},c=a.points[0].x>r.x?{type:"Orthogonal",isTerminal:!0,direction:"Right",length:a.points[0].x-r.x}:{type:"Orthogonal",isTerminal:!0,direction:"Left",length:r.x-a.points[0].x}):(d="Right"===o?{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(a.points[0].x-r.x)}:{type:"Orthogonal",isTerminal:!0,direction:o,length:Math.abs(r.x-a.points[0].x)},c=a.points[0].y>r.y?{type:"Orthogonal",direction:"Top",isTerminal:!0,length:a.points[0].y-r.y}:{type:"Orthogonal",direction:"Bottom",isTerminal:!0,length:r.y-a.points[0].y}),l.push(new Er(e,"segments",d,!0)),l.push(new Er(e,"segments",c,!0))}else c={type:"Orthogonal",direction:o,length:20,isTerminal:!0},l.push(new Er(e,"segments",c,!0));a.direction!==Jt(o)&&("Top"===o||"Bottom"===o?(a.points[0].x=r.x,a.points[0].y=a.points[a.points.length-1].y="Top"===o?r.y-20:r.y+20):(a.points[0].y=r.y,a.points[0].x=a.points[a.points.length-1].x="Right"===o?r.x+20:r.x-20),a.length=E.distancePoints(a.points[0],a.points[a.points.length-1]),s.length=E.distancePoints(a.points[a.points.length-1],s.points[s.points.length-1])),e.segments=l.concat(e.segments)}else a.points[0]=r,"Top"===o||"Bottom"===o?a.points[a.points.length-1].x=r.x:a.points[a.points.length-1].y=r.y,a.length=E.distancePoints(a.points[0],a.points[a.points.length-1]),s.length=E.distancePoints(a.points[a.points.length-1],s.points[s.points.length-1])},e.prototype.removeTerminalSegment=function(e,t){for(var i=0;i<e.segments.length-2;i++){var n=e.segments[0];n.isTerminal&&(t?n.isTerminal=!1:(e.segments.splice(i,1),i--))}},e.prototype.changeSourceEndToNode=function(e,t){this.removeTerminalSegment(e);var i,n,r=t.wrapper.children[0].corners,o=e.segments[0],a=e.segments[1],s=[];if("Right"===o.direction||"Left"===o.direction)if(i="Left"===o.direction?r.middleLeft:r.middleRight,o.length>r.width||"Left"===o.direction&&i.x>=o.points[0].x||"Right"===o.direction&&i.x<=o.points[0].x)o.points[0].y=o.points[o.points.length-1].y=i.y,o.points[0].x=i.x,o.length=E.distancePoints(o.points[0],o.points[o.points.length-1]),a.length=E.distancePoints(o.points[o.points.length-1],a.points[a.points.length-1]);else{var l=void 0;n="Bottom"===(l=a.direction?a.direction:E.direction(a.points[0],a.points[a.points.length-1]))?r.bottomCenter:r.topCenter,a.length&&a.direction&&(a.length="Top"===l?o.points[o.points.length-1].y-(n.y+20):n.y+20-o.points[o.points.length-1].y),o.length=o.points[o.points.length-1].x-n.x,o.direction=o.length>0?"Right":"Left";var c={type:"Orthogonal",direction:l,length:20};s.push(new Er(e,"segments",c,!0)),e.segments=s.concat(e.segments)}else if(i="Bottom"===o.direction?r.bottomCenter:r.topCenter,o.length>r.height||"Top"===o.direction&&i.y>=o.points[0].y||"Bottom"===o.direction&&i.y<=o.points[0].y)o.points[0].x=o.points[o.points.length-1].x=i.x,o.points[0].y=i.y,o.length=E.distancePoints(o.points[0],o.points[o.points.length-1]),a.length=E.distancePoints(o.points[o.points.length-1],a.points[a.points.length-1]);else{n="Left"===a.direction?r.middleLeft:r.middleRight;l=void 0;l=a.direction?a.direction:E.direction(a.points[0],a.points[a.points.length-1]),a.length&&a.direction&&(a.length="Left"===l?o.points[o.points.length-1].x-(n.x+20):n.x+20-o.points[o.points.length-1].x),o.length=o.points[o.points.length-1].y-n.y,o.direction=o.length>0?"Bottom":"Top";c={type:"Orthogonal",direction:l,length:20};s.push(new Er(e,"segments",c,!0)),e.segments=s.concat(e.segments)}},e.prototype.translateBezierPoints=function(e,t,i,n,r,o,a){var s=e.segments.indexOf(r),l=e.segments[s];l&&("BezierSourceThumb"===t&&(l.vector1.angle||l.vector1.distance)?l.vector1={distance:e.distance(e.sourcePoint,o),angle:E.findAngle(e.sourcePoint,o)}:"BezierTargetThumb"===t&&(l.vector2.angle||l.vector2.distance)?l.vector2={distance:e.distance(e.targetPoint,o),angle:E.findAngle(e.targetPoint,o)}:("ConnectorSourceEnd"===t&&!e.sourceID||"ConnectorTargetEnd"===t&&!e.targetID)&&a&&Dr(l.vector1)&&Dr(l.vector2)?(E.isEmptyPoint(l.point1)&&(l.bezierPoint1=kr(e.sourcePoint,e.targetPoint)),E.isEmptyPoint(l.point2)&&(l.bezierPoint2=kr(e.targetPoint,e.sourcePoint))):"BezierSourceThumb"===t||"ConnectorSourceEnd"===t&&!a&&Dr(l.vector1)?(l.bezierPoint1.x+=i,l.bezierPoint1.y+=n,E.isEmptyPoint(l.point1)&&!a||(l.point1={x:l.bezierPoint1.x,y:l.bezierPoint1.y})):("BezierTargetThumb"===t||"ConnectorTargetEnd"===t&&!a&&Dr(l.vector2))&&(l.bezierPoint2.x+=i,l.bezierPoint2.y+=n,E.isEmptyPoint(l.point2)&&!a||(l.point2={x:l.bezierPoint2.x,y:l.bezierPoint2.y})))},e.prototype.dragTargetEnd=function(e,t,i,n,r,o,a,s){var l,c=this.diagram.nameTable[e.id],d=this.checkBoundaryConstraints(t,i,c.wrapper.bounds);if($r(c)&&"BezierTargetThumb"!==o&&d&&yo(this.diagram)){if(l={targetPoint:c.targetPoint},c.targetPoint.x+=t,c.targetPoint.y+=i,"ConnectorTargetEnd"===o&&"Orthogonal"===c.type&&c.segments&&c.segments.length>0){var h=c.segments[c.segments.length-2];h&&2===c.segments[c.segments.length-1].points.length&&("Left"===h.direction||"Right"===h.direction?h.points[h.points.length-1].x=c.targetPoint.x:h.points[h.points.length-1].y=c.targetPoint.y,h.length=E.distancePoints(h.points[0],h.points[h.points.length-1]),h.direction=E.direction(h.points[0],h.points[h.points.length-1]))}"Bpmn"===c.shape.type&&"Default"===c.shape.sequence&&this.updatePathElementOffset(c)}if("Bezier"===c.type)if(l={targetPoint:c.targetPoint},s)this.translateBezierPoints(e,""===o?"ConnectorTargetEnd":o,t,i,s,r,!a);else for(var p=0;p<e.segments.length;p++)this.translateBezierPoints(e,""===o?"ConnectorTargetEnd":o,t,i,e.segments[p],r,!a);return n||this.updateEndPoint(c,l),this.diagram.realActions&fe.AnimationClick||this.diagram.refreshCanvasLayers(),d},e.prototype.dragControlPoint=function(e,t,i,n,r){var o=this.diagram.nameTable[e.id];if(("Straight"===o.type||"Bezier"===o.type)&&o.segments.length>0){if(void 0!==r&&o.segments[r])o.segments[r].point.x+=t,o.segments[r].point.y+=i;else for(var a=0;a<o.segments.length-1;a++)o.segments[a].point.x+=t,o.segments[a].point.y+=i;n||this.updateEndPoint(o)}return!0},e.prototype.rotatePropertyChnage=function(e){var t=this.diagram.selectedItems,i=[];i=(i=i.concat(t.nodes)).concat(t.connectors);var n={x:t.offsetX,y:t.offsetY};this.rotateObjects(t,i,e-t.rotateAngle,n),t.wrapper.rotateAngle=t.rotateAngle=e,this.diagram.updateSelector()},e.prototype.rotateObjects=function(e,t,i,n,r){n=n||{};var o=W();q(o,i,n.x,n.y);for(var a=0,s=t;a<s.length;a++){var l=s[a];if(l instanceof Pl){if(eo(l)&&yo(this.diagram)){if(!1!==r||e!==l){({rotateAngle:l.rotateAngle}),l.rotateAngle+=i,l.rotateAngle=(l.rotateAngle+360)%360;var c=F(o,{x:l.offsetX,y:l.offsetY});l.offsetX=c.x,l.offsetY=c.y,this.diagram.nodePropertyChange(l,{},{offsetX:l.offsetX,offsetY:l.offsetY,rotateAngle:l.rotateAngle})}if(l.processId){var d=this.diagram.nameTable[l.processId],h=this.diagram.bpmnModule.getChildrenBound(d,l.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(h,l,this.diagram)}l.children&&l.children.length&&!l.container&&this.getChildren(l,t)}}else this.rotatePoints(l,i,n||{x:l.wrapper.offsetX,y:l.wrapper.offsetY});this.diagram.updateDiagramObject(l)}this.diagram.refreshCanvasLayers(),this.diagram.updateSelector()},e.prototype.snapConnectorEnd=function(e){return this.diagram.snapSettings.constraints&Q.SnapToLines&&this.snappingModule&&this.diagram.snappingModule.snapConnectorEnd(e),e},e.prototype.snapAngle=function(e){return this.diagram.snapSettings.constraints&Q.SnapToLines&&this.snappingModule?this.snappingModule.snapAngle(this.diagram,e):0},e.prototype.rotatePoints=function(e,t,i){if(!e.sourceWrapper||!e.targetWrapper){var n=W();q(n,t,i.x,i.y),e.sourcePoint=F(n,e.sourcePoint),e.targetPoint=F(n,e.targetPoint),"Bpmn"===e.shape.type&&"Default"===e.shape.sequence&&this.updatePathElementOffset(e);var r={sourcePoint:e.sourcePoint,targetPoint:e.targetPoint};this.diagram.connectorPropertyChange(e,{},r)}},e.prototype.updateInnerParentProperties=function(e){var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);for(var i=this.getAllDescendants(e,[],!1,!0),n=0;n<i.length;n++){var r=this.diagram.nameTable[i[n].id];r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY,r.width=r.wrapper.width,r.height=r.wrapper.height}this.diagram.protectPropertyChange(t)},e.prototype.scale=function(e,t,i,n,r,o){var a=this.diagram.nameTable[e.id],s=a,l=a.wrapper;r||(r=e);var c=r.wrapper,d=function(e,t,i,n,r,o,a,s){var l={x:0,y:0},c=W();switch(q(c,r,o,a),s.x){case 0:switch(s.y){case 0:l=F(c,{x:e,y:t});break;case.5:l=F(c,{x:e,y:t+n/2});break;case 1:l=F(c,{x:e,y:t+n})}break;case.5:switch(s.y){case 0:l=F(c,{x:e+i/2,y:t});break;case.5:l=F(c,{x:e+i/2,y:t+n/2});break;case 1:l=F(c,{x:e+i/2,y:t+n})}break;case 1:switch(s.y){case 0:l=F(c,{x:e+i,y:t});break;case.5:l=F(c,{x:e+i,y:t+n/2});break;case 1:l=F(c,{x:e+i,y:t+n})}}return{x:l.x,y:l.y}}(c.offsetX-c.actualSize.width*c.pivot.x,c.offsetY-c.actualSize.height*c.pivot.y,c.actualSize.width,c.actualSize.height,c.rotateAngle,c.offsetX,c.offsetY,n);if(void 0!==l.actualSize.width&&void 0!==l.actualSize.height&&yo(this.diagram)){if(s.children&&!s.container){for(var h=0,p=this.getAllDescendants(s,[]);h<p.length;h++){var u=p[h];this.scaleObject(t,i,d,u,l,r)}e.wrapper.measure(new P),e.wrapper.arrange(e.wrapper.desiredSize),this.diagram.updateGroupOffset(a),this.updateInnerParentProperties(s)}else this.scaleObject(t,i,d,a,l,r);var f=pc(e.wrapper);if(!this.checkBoundaryConstraints(void 0,void 0,f)&&o)return this.scale(e,1/t,1/i,n,void 0,!0),!1;this.diagram.updateDiagramObject(e)}return!0},e.prototype.getAllDescendants=function(e,t,i,n){for(var r=e,o=[],a=0;a<r.children.length;a++)(e=this.diagram.nameTable[r.children[a]])&&(e.children?(i&&t.push(e),n&&o.push(e),t=this.getAllDescendants(e,t)):t.push(e));return n?o:t},e.prototype.getChildren=function(e,t){var i=e;if(e.children)for(var n=0;n<i.children.length;n++)e=this.diagram.nameTable[i.children[n]],t.push(e);return t},e.prototype.cloneChild=function(e){return this.diagram.nameTable[e]},e.prototype.scaleObject=function(e,t,i,n,r,o){t=t<0?1:t;var a={};if(1!==(e=e<0?1:e)||1!==t){var s=void 0,l=void 0;if(n instanceof Pl){var c=n,d=void 0,h=void 0;a={width:n.wrapper.actualSize.width,height:n.wrapper.actualSize.height,offsetX:n.wrapper.offsetX,offsetY:n.wrapper.offsetY,margin:{top:c.margin.top,left:c.margin.left}},"Bpmn"===c.shape.type&&c.shape.activity.subProcess.processes&&c.shape.activity.subProcess.processes.length>0&&(h=this.diagram.bpmnModule.getChildrenBound(c,c.id,this.diagram),d=c.wrapper.bounds.containsRect(h)),s=c.wrapper.actualSize.width*e,l=c.wrapper.actualSize.height*t,void 0!==c.maxWidth&&0!==c.maxWidth&&(s=Math.min(c.maxWidth,s)),void 0!==c.minWidth&&0!==c.minWidth&&(s=Math.max(c.minWidth,s)),void 0!==c.maxHeight&&0!==c.maxHeight&&(l=Math.min(c.maxHeight,l)),void 0!==c.minHeight&&0!==c.minHeight&&(l=Math.max(c.minHeight,l)),d&&(s=Math.max(s,h.right-c.wrapper.bounds.x),l=Math.max(l,h.bottom-c.wrapper.bounds.y)),e=s/c.actualSize.width,t=l/c.actualSize.height}var p,u=W();if(o||(o=n),q(u,-(p=o.wrapper).rotateAngle,i.x,i.y),U(u,e,t,i.x,i.y),q(u,p.rotateAngle,i.x,i.y),n instanceof Pl){var f,g,m=F(u,{x:(c=n).wrapper.offsetX,y:c.wrapper.offsetY}),v=c.wrapper.offsetX-c.wrapper.actualSize.width*c.pivot.x,y=c.wrapper.offsetY-c.wrapper.actualSize.height*c.pivot.y;if(s>0)if(c.processId){var b=this.diagram.nameTable[c.processId];(!b.maxWidth||c.margin.left+s<b.maxWidth)&&(c.width=s,c.offsetX=m.x)}else c.width=s,c.offsetX=m.x;if(l>0)if(c.processId){var w=this.diagram.nameTable[c.processId];(!w.maxHeight||c.margin.top+l<w.maxHeight)&&(c.height=l,c.offsetY=m.y)}else c.height=l,c.offsetY=m.y;f=c.wrapper.offsetX-c.wrapper.actualSize.width*c.pivot.x,g=c.wrapper.offsetY-c.wrapper.actualSize.height*c.pivot.y,this.diagram.nameTable[c.processId]&&(c.margin.top+(g-y)<=0||c.margin.left+(f-v)<=0)?this.diagram.nodePropertyChange(n,{},{margin:{top:c.margin.top,left:c.margin.left}}):qo(this.diagram,n,!0)?Uo(this.diagram,n):this.diagram.nodePropertyChange(n,a,{width:c.width,height:c.height,offsetX:c.offsetX,offsetY:c.offsetY,margin:{top:c.margin.top+(g-y),left:c.margin.left+(f-v)}})}else{var x=n,O={sourcePoint:x.sourcePoint,targetPoint:x.targetPoint};x.sourceWrapper&&x.targetWrapper||this.scaleConnector(x,u,O)}var S=this.diagram.nameTable[n.processId];if(S){S.wrapper.bounds,n.wrapper.bounds,h=this.diagram.bpmnModule.getChildrenBound(S,n.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(h,n,this.diagram)}}},e.prototype.scaleConnector=function(e,t,i){e.sourcePoint=F(t,e.sourcePoint),e.targetPoint=F(t,e.targetPoint),"Bpmn"===e.shape.type&&"Default"===e.shape.sequence&&this.updatePathElementOffset(e);var n={sourcePoint:e.sourcePoint,targetPoint:e.targetPoint};this.diagram.connectorPropertyChange(e,i,n)},e.prototype.portDrag=function(e,t,i,n){var r,o,a=this.findTarget(t,e),s=pc(e.wrapper);a&&wo(a,this.diagram)&&(r=this.getPortChanges(e,a),a.offset.x+=i/s.width,a.offset.y+=n/s.height,o=this.getPortChanges(e,a),this.diagram.nodePropertyChange(e,r,o),this.diagram.updateDiagramObject(e))},e.prototype.labelDrag=function(e,t,i,n){var r,o,a;a=this.findTarget(t,e);var s=hc(e.wrapper);r=this.getAnnotationChanges(e,a),a instanceof nt?(a.offset.x+=i/s.width,a.offset.y+=n/s.height):(this.updatePathAnnotationOffset(e,a,i,n),a instanceof rt&&(a.alignment="Center")),o=this.getAnnotationChanges(e,a),e instanceof Pl?this.diagram.nodePropertyChange(e,r,o):this.diagram.connectorPropertyChange(e,r,o),this.diagram.updateDiagramObject(e),od(this.diagram,a,!1,t)||this.labelSelect(e,t)},e.prototype.updatePathAnnotationOffset=function(e,t,i,n,r,o){var a,s,l,c,d=this.diagram.getWrapper(e.wrapper,t.id),h=d.offsetX,p=d.offsetY,u=e.intermediatePoints,f=0,g=r||{x:h+i,y:p+n},m=this.getInterceptWithSegment(g,u),v=u[u.length-1];if(l=E.getLengthFromListOfPoints(u),m.length>0){if(t.dragLimit.top||t.dragLimit.bottom||t.dragLimit.left||t.dragLimit.right){var y={minDistance:null};v=this.getRelativeOffset(g,u,y);var b={minDistance:null};if(c=this.getRelativeOffset(g,m,b),null!=y&&b.minDistance<y.minDistance)v=c;else v=Za(e.intermediatePoints,t).point}else v=c=m[m.length-1];if(v){var w=void 0;for(w=0;w<u.length;w++){if(null!=s){if(_.toBounds([s,u[w]]).containsPoint(v)){f+=E.findLength(s,v);break}f+=E.findLength(s,u[w])}s=u[w]}a={x:f/l,y:0}}this.updateLabelMargin(e,t,a,g,o,i,n)}else this.updateLabelMargin(e,t,null,g,o,i,n)},e.prototype.getRelativeOffset=function(e,t,i){var n,r,o,a;for(a=0;a<t.length;a++)o=t[a],r=Math.round(Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2))),null!==i.minDistance&&Math.min(Math.abs(i.minDistance),Math.abs(r))!==Math.abs(r)||(n=o,i.minDistance=r);return n},e.prototype.dragLimitValue=function(e,t,i,n){var r=!1,o=!1;return i.x>=t.x-e.dragLimit.left-n.width/2&&i.x<=t.x+e.dragLimit.right+n.width/2&&(r=!0),i.y>=t.y-e.dragLimit.top-n.height/2&&i.y<=t.y+e.dragLimit.bottom+n.height/2&&(o=!0),{x:r,y:o}},e.prototype.updateLabelMargin=function(e,t,i,n,r,o,a){if(i=i||{x:t.offset,y:0},t&&i&&i.x>0&&i.x<1){var s,l=E.getLengthFromListOfPoints(e.intermediatePoints);s=this.getPointAtLength(l*i.x,e.intermediatePoints,0);var c=this.diagram.scrollSettings.currentZoom,d=t.dragLimit;if(d.top||d.bottom||d.left||d.right){this.diagram.getWrapper(e.wrapper,t.id);var h=new _(0,0,0,0),p=this.diagram.getWrapper(e.wrapper,t.id);h.x=p.offsetX/c+o,h.y=p.offsetY/c+a,h.width=p.bounds.width/c,h.height=p.bounds.height/c;var u=new _(s.x-(d.left||0)-h.width/2,s.y-(d.top||0)-h.height/2,(d.left||0)+(d.right||0)+h.width,(d.top||0)+(d.bottom||0)+h.height);if(u.containsPoint(n))n=n;else for(var f=[s,n],g=0,m=this.boundsInterSects(f,u,!1);g<m.length;g++){n=m[g]}var v=this.dragLimitValue(t,s,n,h);t.margin={left:v.x?n.x-s.x:t.margin.left,top:v.y?n.y-s.y:t.margin.top,right:0,bottom:0}}else t.margin={left:n.x-s.x,top:n.y-s.y,right:0,bottom:0};t.offset=i.x,r&&(t.width=r.width,t.height=r.height)}},e.prototype.boundsInterSects=function(e,t,i){var n;if(t){var r=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height},{x:t.x,y:t.y}];n=this.intersect(e,r,i)}return n},e.prototype.intersect=function(e,t,i){for(var n=[],r=0;r<e.length-1;r++)for(var o=0;o<t.length-1;o++){var a=Fa(e[r],e[r+1],t[o],t[o+1]);0!==a.x&&0!==a.y&&n.push(a)}return n},e.prototype.getPointAtLength=function(e,t,i){for(var n,r,o=0,a={x:0,y:0},s=0;s<t.length;s++)if(r=t[s],n){var l=E.findLength(n,r),c=void 0,d=void 0,h=void 0,p=void 0;if(o+l>=e){c=e-o,d=E.findAngle(n,r),h=c*Math.cos(d*Math.PI/180),p=c*Math.sin(d*Math.PI/180),a={x:n.x+h,y:n.y+p},d;break}o+=l,n=r}else n=r;return a},e.prototype.getInterceptWithSegment=function(e,t){var i,n,r,o=[],a=[],s=[];r=E.findLength({x:0,y:0},{x:this.diagram.scroller.viewPortWidth,y:this.diagram.scroller.viewPortHeight});for(var l=1;l<t.length;l++){s=[t[l-1],t[l]],a=[],n=Math.round(E.findAngle(s[0],s[1])%360),i=Math.round(E.findAngle(s[1],s[0])%360);var c=n>0&&n<=90||n>180&&n<=270?90:-90;a.push(E.transform(e,n+c,r)),a.push(E.transform(e,i+c,r));var d=Wa({x1:s[0].x,y1:s[0].y,x2:s[1].x,y2:s[1].y},{x1:a[0].x,y1:a[0].y,x2:a[1].x,y2:a[1].y});d.enabled&&o.push(d.intersectPt)}return o},e.prototype.getAnnotationChanges=function(e,t){var i={};return i[vs(e,t.id,!0)]={width:t.width,height:t.height,offset:e instanceof Pl?{x:t.offset.x,y:t.offset.y}:t.offset,rotateAngle:t.rotateAngle,margin:{left:t.margin.left,right:t.margin.right,top:t.margin.top,bottom:t.margin.bottom},horizontalAlignment:t.horizontalAlignment,verticalAlignment:t.verticalAlignment,alignment:e instanceof _r?t.alignment:void 0},{annotations:i}},e.prototype.getPortChanges=function(e,t){var i={};return i[vs(e,t.id,!1)]={offset:t.offset},{ports:i}},e.prototype.labelRotate=function(e,t,i,n){var r,o;r=this.getAnnotationChanges(e,t);W(),t.rotateAngle;var a=this.diagram.getWrapper(e.wrapper,t.id),s=Lt({x:a.offsetX,y:a.offsetY},i)+90,l=this.snapAngle(s);(s=0!==l?l:s,t instanceof rt&&t.segmentAngle)&&(s-=Ga(e.intermediatePoints,t,e.wrapper.bounds).angle);s=(s+360)%360,t.rotateAngle+=s-(t.rotateAngle+a.parentTransform),t.margin.bottom+="Top"===a.verticalAlignment?-t.height/2:"Bottom"===a.verticalAlignment?t.height/2:0,t.margin.right+="Left"===a.horizontalAlignment?-t.width/2:"Right"===a.horizontalAlignment?t.width/2:0,t instanceof rt?t.alignment="Center":t.horizontalAlignment=t.verticalAlignment="Center",n.wrapper.rotateAngle=n.rotateAngle=t.rotateAngle,o=this.getAnnotationChanges(e,t),e instanceof Pl?this.diagram.nodePropertyChange(e,r,o):this.diagram.connectorPropertyChange(e,r,o),this.diagram.updateDiagramObject(e)},e.prototype.labelResize=function(e,t,i,n,r,o){var a,s,l;a=this.getAnnotationChanges(e,t);var c=o.wrapper.children[0];if(i&&1!==i||n&&1!==n){var d=W(),h=W();q(d,-e.rotateAngle,e.offsetX,e.offsetY),q(h,-(l=(c.rotateAngle+(e instanceof Pl?e.rotateAngle:0)+360)%360),r.x,r.y),U(h,i,n,r.x,r.y),q(h,l,r.x,r.y);var p=F(h,{x:c.offsetX,y:c.offsetY}),u=c.actualSize.height*n,f=c.actualSize.width*i,g=this.findTarget(c,e);if(g instanceof rt)this.updatePathAnnotationOffset(e,t,0,0,p,new P(f,u));else{var m=hc(e.wrapper);(p=F(d,p)).x=p.x-c.margin.left+c.margin.right,p.y=p.y-c.margin.top+c.margin.bottom,p.y+="Top"===g.verticalAlignment?-u/2:"Bottom"===g.verticalAlignment?u/2:0,p.x+="Left"===g.horizontalAlignment?-f/2:"Right"===g.horizontalAlignment?f/2:0;var v=m.width/(p.x-m.x),y=m.height/(p.y-m.y);f>1&&(g.width=f,g.offset.x=1/v),u>1&&(g.height=u,g.offset.y=1/y)}}t instanceof rt&&(t.alignment="Center"),s=this.getAnnotationChanges(e,t),e instanceof Pl?this.diagram.nodePropertyChange(e,a,s):this.diagram.connectorPropertyChange(e,a,s),this.diagram.updateDiagramObject(e)},e.prototype.getSubProcess=function(e){var t,i={nodes:[],connectors:[]};return e instanceof Pl?t=e.processId:e&&e.nodes&&e.nodes.length&&e.nodes[0].processId&&(t=e.nodes[0].processId),t?(i.nodes.push(uc(this.diagram.nameTable[t])),i):i},e.prototype.checkBoundaryConstraints=function(e,t,i){var n=this.diagram.pageSettings,r=this.diagram.pageSettings.boundaryConstraints,o=this.diagram.scroller;if("Page"===r||"Diagram"===r){var a=i?void 0:this.diagram.selectedItems.wrapper.bounds,s="Page"===r?n.width:o.viewPortWidth,l="Page"===r?n.height:o.viewPortHeight,c=i,d=(i?c.right:a.right)+(e||0),h=(i?c.left:a.left)+(e||0),p=(i?c.top:a.top)+(t||0),u=(i?c.bottom:a.bottom)+(t||0);return d<=s&&h>=0&&u<=l&&p>=0}return!0},e.prototype.dragSelectedObjects=function(e,t){var i=this.diagram.selectedItems;if(this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=i.offsetX,this.state.backup.offsetY=i.offsetY),i=Fo(this.diagram,i)||i,this.checkBoundaryConstraints(e,t)){this.diagram.diagramActions=this.diagram.diagramActions|pe.PreventZIndexOnDragging|pe.DragUsingMouse;var n=this.diagram.selectedObject.actualObject;return(n&&n instanceof Pl&&n.isLane&&Aa(n,this.diagram)||!n||!n.isLane)&&this.diagram.drag(i,e,t),this.diagram.diagramActions=this.diagram.diagramActions&~(pe.PreventZIndexOnDragging|pe.DragUsingMouse),this.diagram.refreshCanvasLayers(),!0}return!1},e.prototype.scaleSelectedItems=function(e,t,i){var n=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=n.offsetX,this.state.backup.offsetY=n.offsetY,this.state.backup.width=n.width,this.state.backup.height=n.height,this.state.backup.pivot=i),n=Fo(this.diagram,n)||n,this.diagram.scale(n,e,t,i)},e.prototype.rotateSelectedItems=function(e){var t=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.angle=t.rotateAngle),t=Fo(this.diagram,t)||t,this.diagram.rotate(t,e)},e.prototype.hasSelection=function(){return nd(this.diagram)},e.prototype.isSelected=function(e){return od(this.diagram,e)},e.prototype.initExpand=function(e){var t=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);var i=e.target||e.source,n={isExpanded:i.isExpanded};i.isExpanded=!i.isExpanded,this.diagram.preventNodesUpdate=!0,this.diagram.diagramActions|=pe.PreventIconsUpdate,this.diagram.nodePropertyChange(i,n,{isExpanded:i.isExpanded}),this.diagram.diagramActions=this.diagram.diagramActions&~pe.PreventIconsUpdate,this.diagram.preventNodesUpdate=!1;for(var r=0,o=this.diagram.views;r<o.length;r++){var a=o[r],s=this.diagram.views[a];s instanceof ih||this.diagram.refreshCanvasDiagramLayer(s)}this.diagram.protectPropertyChange(t)},e.prototype.expandNode=function(e,t){var i,n=this.diagram.preventNodesUpdate,r=e.isExpanded;this.diagram.preventNodesUpdate=!0,this.diagram.preventConnectorsUpdate=!0,this.expandCollapse(e,r,this.diagram),e.isExpanded=r;var o=this.diagram.layout.fixedNode;if(this.diagram.layout.fixedNode=e.id,this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&this.diagram.organizationalChartModule&&(this.diagram.organizationalChartModule.isAnimation=!0),this.diagram.blazorActions|=Z.expandNode,i=this.diagram.doLayout(),this.diagram.blazorActions&=~Z.expandNode,this.diagram.preventNodesUpdate=n,this.diagram.preventConnectorsUpdate=!1,this.diagram.layoutAnimateModule&&this.diagram.organizationalChartModule)this.diagram.allowServerDataBinding=!1,this.layoutAnimateModule.expand(this.diagram.layout.enableAnimation,i,e,this.diagram),this.diagram.allowServerDataBinding=!0;else{var a={element:Ls(uc(e)),state:!!e.isExpanded};this.triggerEvent(ve.expandStateChange,a),this.diagram.lineRoutingModule&&this.diagram.constraints&ae.LineRouting&&this.diagram.resetSegments()}return this.diagram.layout.fixedNode=""===o?"":this.diagram.layout.fixedNode,i},e.prototype.getparentexpand=function(e,t,i,n){for(var r,o=0;o<e.inEdges.length;o++){var a=t.nameTable[e.inEdges[o]],s=t.nameTable[a.sourceID];if(s.isExpanded&&!i&&s.id!==n.sourceID&&a.visible)return!1;r=!0}return r},e.prototype.expandCollapse=function(e,t,i){for(var n=0;n<e.outEdges.length;n++){var r=i.nameTable[e.outEdges[n]],o=i.nameTable[r.targetID],a=this.getparentexpand(o,i,t,r);r.visible=t;var s={visible:o.visible,style:{opacity:o.wrapper.style.opacity}},l={visible:o.visible,style:{opacity:o.wrapper.style.opacity}};a&&(o.isExpanded&&this.expandCollapse(o,t,i),o.visible=t,o.style.opacity=this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&t?.1:o.style.opacity,i.nodePropertyChange(o,s,l)),i.connectorPropertyChange(r,s,l)}},e.prototype.updateNodeDimension=function(e,t){e instanceof Pl&&(e.offsetX=t.x+t.width/2,e.offsetY=t.y+t.height/2,e.width=t.width,e.height=t.height,e.wrapper.children[0].canMeasurePath=!0,this.diagram.nodePropertyChange(e,{},{width:t.width,height:t.height,offsetX:e.offsetX,offsetY:e.offsetY}),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer())},e.prototype.updateConnectorPoints=function(e,t){e instanceof _r&&(this.diagram.connectorPropertyChange(e,{},{targetPoint:e.targetPoint}),this.diagram.updateDiagramObject(e))},e.prototype.updateSelectedNodeProperties=function(e){if(this.diagram.lineRoutingModule&&this.diagram.constraints&ae.LineRouting){var t=[],i=[],n=[],o=[],a=[],s=[];this.diagram.protectPropertyChange(!0);var l=[],c=[],d=this.diagram.selectedObject.actualObject,h=this.diagram.selectedObject.helperObject;if(h&&d){var p=h.offsetX-d.offsetX,u=h.offsetY-d.offsetY,f=h.width-d.width,g=h.height-d.height,m=h.rotateAngle-d.rotateAngle;if(this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>0&&(this.diagram.selectedItems.wrapper.rotateAngle=this.diagram.selectedItems.rotateAngle=h.rotateAngle),d instanceof Pl&&"SwimLane"!==d.shape.type&&!d.isLane&&!d.isPhase&&!d.isHeader)d.offsetX===d.wrapper.offsetX&&d.offsetY===d.wrapper.offsetY&&d.width===d.wrapper.width&&d.height===d.wrapper.height&&d.rotateAngle===d.wrapper.rotateAngle||(Object(r.I)()&&t.push(uc(d,void 0,void 0,!0)),d.offsetX+=p,d.offsetY+=u,d.width+=f,d.height+=g,d.rotateAngle+=m,this.diagram.nodePropertyChange(d,{},{offsetX:d.offsetX,offsetY:d.offsetY,width:d.width,height:d.height,rotateAngle:d.rotateAngle}),Object(r.I)()&&n.push(uc(d,void 0,void 0,!0))),l=this.diagram.spatialSearch.findObjects(d.wrapper.outerBounds);else if(d instanceof Dl)for(var v=0;v<d.nodes.length;v++){var y=d.nodes[v];y instanceof Pl&&"SwimLane"!==y.shape.type&&!y.isLane&&!y.isPhase&&!y.isHeader&&(y.offsetX+=p,y.offsetY+=u,y.width+=f,y.height+=g,y.rotateAngle+=m,this.diagram.nodePropertyChange(y,{},{offsetX:y.offsetX,offsetY:y.offsetY,width:y.width,height:y.height,rotateAngle:y.rotateAngle}),l=l.concat(this.diagram.spatialSearch.findObjects(d.wrapper.outerBounds)))}}else e instanceof _r?l.push(e):e instanceof Dl&&e.connectors.length&&(l=l.concat(e.connectors));for(v=0;v<l.length;v++)l[v]instanceof _r&&-1===c.indexOf(l[v].id)&&c.push(l[v].id);this.diagram.lineRoutingModule.renderVirtualRegion(this.diagram,!0);for(v=0;v<c.length;v++){var b=this.diagram.nameTable[c[v]];b instanceof _r&&"Orthogonal"===b.type&&(Object(r.I)()&&i.push(uc(b,void 0,void 0,!0)),this.diagram.lineRoutingModule.refreshConnectorSegments(this.diagram,b,!0),Object(r.I)()&&o.push(uc(b,void 0,void 0,!0)))}if(this.updateSelector(),Object(r.I)()){this.getObjectChanges(t,n,a),this.getObjectChanges(i,o,s);var w={nodes:a,connectors:s};if(window&&window.Blazor&&s.length+a.length){var x={methodName:"UpdateBlazorProperties",diagramobj:w};window.sfBlazor.updateBlazorProperties(x,this.diagram)}}this.diagram.protectPropertyChange(!1)}},e.prototype.drawSelectionRectangle=function(e,t,i,n){this.diagram.drawSelectionRectangle(e,t,i,n)},e.prototype.startGroupAction=function(){this.diagram.startGroupAction()},e.prototype.endGroupAction=function(){this.diagram.endGroupAction()},e.prototype.removeChildFromBPmn=function(e,t,i){var n=this.diagram.nameTable[e.id]||e.nodes[0];if(i&&n&&n.processId&&n.processId===i.wrapper.id){var r=uc(n);r.processId=n.processId,this.diagram.startGroupAction();for(var o=[],a=(o=o.concat(n.outEdges,n.inEdges)).length-1;a>=0;a--){var s=this.diagram.nameTable[o[a]];s&&this.diagram.remove(s)}var l=void 0;(l=this.diagram.nameTable[n.processId].shape.activity.subProcess.processes||[]).splice(l.indexOf(n.id),1),this.diagram.bpmnModule.removeChildFromBPMN(this.diagram.nameTable[n.processId].wrapper,n.id),this.diagram.nameTable[n.id].processId="",n.offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY;var c={type:"PositionChanged",redoObject:{nodes:[uc(n)]},undoObject:{nodes:[r]},category:"Internal"};this.addHistoryEntry(c),this.diagram.endGroupAction()}},e.prototype.isDroppable=function(e,t){var i=this.diagram.nameTable[e.id]||e.nodes[0];return!!i&&(!!(!Object(r.I)()&&"TextAnnotation"===i.shape.shape||Object(r.I)()&&"TextAnnotation"===i.shape.bpmnShape)||(!i||"Bpmn"!==i.shape.type||!(i.processId===t.id||i.id===t.processId||"Bpmn"===t.shape.type&&t.shape.activity.subProcess.collapsed)))},e.prototype.renderHighlighter=function(e,t,i){new _;if(e.target instanceof Pl||t&&e.source instanceof Pl){var n=t?e.source:e.target,r=t?e.sourceWrapper:e.targetWrapper,o=this.findTarget(r,n,i,!0),a=void 0;if(o instanceof cl)for(var s=o.id,l=e.target,c=0,d=l.wrapper.children[0].children[0].children[2].children;c<d.length;c++){var h=d[c];if(h.id===l.id+"_"+s){a=h.children[0];break}}else a=o instanceof Pl?o.wrapper:t?e.sourceWrapper:e.targetWrapper;this.diagram.renderHighlighter(a)}},e.prototype.mouseOver=function(e,t,i){return!0},e.prototype.snapPoint=function(e,t,i,n){var r,o=this.diagram.selectedItems,a=t.x<e.x,s=t.y<e.y,l=r={x:i,y:n};return this.snappingModule&&(l=this.diagram.snappingModule.snapPoint(this.diagram,o,a,s,r,e,t)),l},e.prototype.removeSnap=function(){this.diagram.snapSettings.constraints&Q.SnapToObject&&this.snappingModule&&this.snappingModule.removeGuidelines(this.diagram)},e.prototype.dropAnnotation=function(e,t){var i=e instanceof Pl?e:e.nodes[0];if(this.diagram.bpmnModule&&"Bpmn"===t.shape.type&&(!Object(r.I)()&&"TextAnnotation"===i.shape.shape||Object(r.I)()&&"TextAnnotation"===i.shape.bpmnShape)){i.hasTarget=t.id,i.shape.annotation.nodeId=t.id,this.diagram.currentSymbol||(this.diagram.addTextAnnotation(i.shape.annotation,t),i.shape.annotation.nodeId="",this.diagram.remove(i)),this.diagram.refreshDiagramLayer()}},e.prototype.drop=function(e,t,i){this.diagram.bpmnModule&&(this.diagram.bpmnModule.dropBPMNchild(t,e instanceof Pl?e:e.nodes[0],this.diagram),this.diagram.refreshDiagramLayer())},e.prototype.addHistoryEntry=function(e){this.diagram.addHistoryEntry(e)},e.prototype.align=function(e,t,i){if(e.length>0){var n=0;e[0]=this.diagram.nameTable[e[0].id]||e[0];var r="Object"===i?pc(e[0].wrapper):this.diagram.selectedItems.wrapper.bounds,o={nodes:[],connectors:[]},a={nodes:[],connectors:[]};for(n="Object"===i?n+1:n;n<e.length;n++){var s=0,l=0;e[n]=this.diagram.nameTable[e[n].id]||e[n];var c=pc(e[n].wrapper);"Left"===t?s=r.left+c.width/2-c.center.x:"Right"===t?s=r.right-c.width/2-c.center.x:"Top"===t?l=r.top+c.height/2-c.center.y:"Bottom"===t?l=r.bottom-c.height/2-c.center.y:"Center"===t?s=r.center.x-c.center.x:"Middle"===t&&(l=r.center.y-c.center.y),o=this.storeObject(o,e[n]),this.drag(e[n],s,l),this.diagram.updateSelector(),a=this.storeObject(a,e[n])}o=uc(o),a=uc(a);var d={type:"Align",category:"Internal",undoObject:uc(o),redoObject:uc(a)};this.addHistoryEntry(d)}},e.prototype.distribute=function(e,t){if(e.length>0){var i=0,n=(new _,0),r=0,o=0,a=0,s=0,l=0,c=0,d={nodes:[],connectors:[]},h={nodes:[],connectors:[]};for(i=0;i<e.length;i++)e[i]=this.diagram.nameTable[e[i].id]||e[i];for(e=function(e,t){var i,n=0,r=0;for(n=0;n<e.length;n++){var o=pc(e[n].wrapper);for(r=0;r<e.length;r++){var a=pc(e[r].wrapper);"Top"===t||"Bottom"===t||"BottomToTop"===t||"Middle"===t?o.center.y>a.center.y&&(i=e[n],e[n]=e[r],e[r]=i):o.center.x>a.center.x&&(i=e[n],e[n]=e[r],e[r]=i)}}return e}(e,t),i=1;i<e.length;i++)n=n+e[i].wrapper.bounds.topRight.x-e[i-1].wrapper.bounds.topRight.x,r=r+e[i].wrapper.bounds.topLeft.x-e[i-1].wrapper.bounds.topLeft.x,o=o+e[i].wrapper.bounds.topRight.y-e[i-1].wrapper.bounds.topRight.y,a=a+e[i].wrapper.bounds.bottomRight.y-e[i-1].wrapper.bounds.bottomRight.y,s=s+e[i].wrapper.bounds.center.x-e[i-1].wrapper.bounds.center.x,l=l+e[i].wrapper.bounds.center.y-e[i-1].wrapper.bounds.center.y,c=c+e[i].wrapper.bounds.topRight.y-e[i-1].wrapper.bounds.bottomRight.y;for(i=1;i<e.length-1;i++){var p=0,u=0,f=pc(e[i-1].wrapper),g=pc(e[i].wrapper);"RightToLeft"===t||"Center"===t?p=f.center.x-g.center.x+s/(e.length-1):"Right"===t?p=f.topRight.x-g.topRight.x+n/(e.length-1):"Left"===t?p=f.topLeft.x-g.topLeft.x+r/(e.length-1):"Middle"===t?u=f.center.y-g.center.y+l/(e.length-1):"Top"===t?u=f.topRight.y-g.topRight.y+o/(e.length-1):"Bottom"===t?u=f.bottomRight.y-g.bottomRight.y+a/(e.length-1):"BottomToTop"===t&&(u=f.bottomRight.y-g.topRight.y+c/(e.length-1)),d=this.storeObject(d,e[i]),this.drag(e[i],p,u),this.diagram.updateSelector(),h=this.storeObject(h,e[i])}d=uc(d),h=uc(h);var m={type:"Distribute",category:"Internal",undoObject:uc(d),redoObject:uc(h)};this.addHistoryEntry(m)}},e.prototype.sameSize=function(e,t){if(e.length>0){var i,n=0;i={x:.5,y:.5},e[0]=this.diagram.nameTable[e[0].id]||e[0];var r=pc(e[0].wrapper),o={nodes:[],connectors:[]},a={nodes:[],connectors:[]};for(n=1;n<e.length;n++){e[n]=this.diagram.nameTable[e[n].id]||e[0];var s=pc(e[n].wrapper),l=1,c=1;"Width"===t?l=r.width/s.width:"Height"===t?c=r.height/s.height:"Size"===t&&(l=r.width/s.width,c=r.height/s.height),o=this.storeObject(o,e[n]),this.scale(e[n],l,c,i),a=this.storeObject(a,e[n])}this.diagram.updateSelector(),o=uc(o),a=uc(a);var d={type:"Sizing",category:"Internal",undoObject:uc(o),redoObject:uc(a)};this.addHistoryEntry(d)}},e.prototype.storeObject=function(e,t){return t instanceof Pl?e.nodes.push(uc(t)):e.connectors.push(uc(t)),e},e.prototype.updatePanState=function(e){if(e)this.diagram.realActions=this.diagram.realActions|fe.PanInProgress;else{this.diagram.dataBind();var t=this.diagram.scrollSettings;this.diagram.realActions=this.diagram.realActions&~fe.PanInProgress;var i={VerticalOffset:t.verticalOffset,HorizontalOffset:t.horizontalOffset,ViewportHeight:t.viewPortHeight,ViewportWidth:t.viewPortWidth,CurrentZoom:t.currentZoom},n={oldValue:i,newValue:i,source:this.diagram,panState:"Completed"};this.triggerEvent(ve.scrollChange,n)}},e.prototype.dataBinding=function(){this.diagram.dataBind()},e.prototype.setBlazorDiagramProps=function(e){this.diagram.setBlazorDiagramProps(e)},e.prototype.scroll=function(e,t,i){var n=this.diagram.constraints&ae.PanX,o=function(e){return e.constraints&ae.PanY}(this.diagram);Object(r.I)()?(this.diagram.setCursor("grabbing"),this.diagram.scroller.zoom(1,(e=n?e:0)*this.diagram.scroller.currentZoom,(t=o?t:0)*this.diagram.scroller.currentZoom,i)):this.diagram.pan((e=n?e:0)*this.diagram.scroller.currentZoom,(t=o?t:0)*this.diagram.scroller.currentZoom,i)},e.prototype.drawHighlighter=function(e){this.diagram.renderHighlighter(e.wrapper)},e.prototype.removeHighlighter=function(){this.diagram.clearHighlighter()},e.prototype.renderContainerHelper=function(e){return Fo(this.diagram,e)},e.prototype.isParentAsContainer=function(e,t){return qo(this.diagram,e,t)},e.prototype.dropChildToContainer=function(e,t){Yo(this.diagram,e,t)},e.prototype.checkSelection=function(e,t){var i;if(1===e.nodes.length&&0===e.connectors.length)if(qo(this.diagram,e.nodes[0],!0)){i="SwimLane"===e.nodes[0].shape?e.nodes[0]:this.diagram.nameTable[e.nodes[0].parentId];var n=e.nodes[0];if("SwimLane"===i.shape.type){var r="Horizontal"===i.shape.orientation;(n.isPhase&&(r&&"ResizeSouth"===t||!r&&"ResizeEast"===t)||n.isLane&&(r&&"ResizeEast"===t||!r&&"ResizeSouth"===t))&&wa(this.diagram,i,t)}else if("Grid"===i.container.type)if("Horizontal"===i.container.orientation&&1===n.rowIndex||"Vertical"===i.container.orientation&&n.rowIndex>0&&n.columnIndex>0){if("ResizeSouth"===t)for(var o=0;o<this.diagram.nodes.length;o++){if((a=this.diagram.nodes[o]).rowIndex===i.rows.length-1&&0===a.columnIndex){this.select(a);break}}}else if("ResizeEast"===t)for(o=0;o<this.diagram.nodes.length;o++){var a;if(1===(a=this.diagram.nodes[o]).rowIndex&&a.columnIndex===i.columns.length-1){this.select(a);break}}}else wa(this.diagram,e.nodes[0],t)},e.prototype.zoom=function(e,t,i,n){this.diagram.scroller.zoom(e,t*this.diagram.scroller.currentZoom,i*this.diagram.scroller.currentZoom,n)},e}(),Hd=function(){function e(e){this.transform={tx:0,ty:0,scale:1},this.oldCollectionObjects=[],this.removeCollection=[],this.vPortWidth=0,this.vPortHeight=0,this.currentZoomFActor=1,this.hOffset=0,this.vOffset=0,this.scrolled=!1,this.hScrollSize=0,this.vScrollSize=0,this.diagram=e,this.objects=[],this.transform=e.scroller?e.scroller.transform:{tx:0,ty:0,scale:1},this.vPortWidth=e.scrollSettings.viewPortWidth,this.vPortHeight=e.scrollSettings.viewPortHeight,this.currentZoomFActor=e.scrollSettings.currentZoom,this.hOffset=e.scrollSettings.horizontalOffset,this.vOffset=e.scrollSettings.verticalOffset}return Object.defineProperty(e.prototype,"viewPortHeight",{get:function(){return this.vPortHeight},set:function(e){this.vPortHeight=e,this.diagram.scrollSettings.viewPortHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentZoom",{get:function(){return this.currentZoomFActor},set:function(e){this.currentZoomFActor=e,this.diagram.scrollSettings.currentZoom=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewPortWidth",{get:function(){return this.vPortWidth},set:function(e){this.vPortWidth=e,this.diagram.scrollSettings.viewPortWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalOffset",{get:function(){return this.hOffset},set:function(e){this.hOffset=e,Math.abs(this.hOffset-this.diagram.scrollSettings.horizontalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|fe.hScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.horizontalOffset=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalOffset",{get:function(){return this.vOffset},set:function(e){this.vOffset=e,Math.abs(this.vOffset-this.diagram.scrollSettings.verticalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|fe.vScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.verticalOffset=e},enumerable:!0,configurable:!0}),e.prototype.updateScrollOffsets=function(e,t){var i,n,r=this.getPageBounds(void 0,void 0,!0);r.x*=this.currentZoom,r.y*=this.currentZoom,r.width*=this.currentZoom,r.height*=this.currentZoom,i=Math.max(0,e-r.left),n=Math.max(0,t-r.top),void 0!==e&&void 0!==t?(this.horizontalOffset=i,this.verticalOffset=n,this.diagram.setOffset(i,n)):this.diagram.setOffset(-this.horizontalOffset-r.x,-this.verticalOffset-r.y),this.transform={tx:Math.max(this.horizontalOffset,-r.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-r.top)/this.currentZoom,scale:this.currentZoom}},e.prototype.setScrollOffset=function(e,t){this.scrolled=!1;var i=this.getPageBounds(void 0,void 0,!0);i.x*=this.currentZoom,i.y*=this.currentZoom,i.width*=this.currentZoom,i.height*=this.currentZoom;var n=-i.left,r=-i.top,o=!1,a=this.viewPortWidth*this.currentZoom,s=this.viewPortHeight*this.currentZoom,l=n-e;if(l!==this.horizontalOffset){n<this.horizontalOffset&&(this.horizontalOffset>l?this.horizontalOffset-=e:this.horizontalOffset=l,o=!0);var c=Math.max(i.right+this.vScrollSize,a);if(!o&&c<-l+this.viewPortWidth){var d=-l+a-this.vScrollSize,h=-this.horizontalOffset+a-this.vScrollSize;d<h||d-i.right>d-h?this.horizontalOffset=l:this.horizontalOffset=-(i.right+this.vScrollSize-a),o=!0}o||(this.horizontalOffset=n-e)}o=!1;var p=r-t;if(p!==this.verticalOffset){r<this.verticalOffset&&(this.verticalOffset>p?this.verticalOffset-=t:this.verticalOffset=p,o=!0);var u=Math.max(i.bottom+this.hScrollSize,s);if(!o&&u<-p+s){var f=-p+s-this.hScrollSize,g=-this.verticalOffset+s-this.hScrollSize;f<g||f-i.bottom>f-g?this.verticalOffset=p:this.verticalOffset=-(i.bottom+this.hScrollSize-s),o=!0}o||(this.verticalOffset=r-t)}this.transform={tx:Math.max(this.horizontalOffset,-i.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-i.top)/this.currentZoom,scale:this.currentZoom},this.setSize()},e.prototype.getObjects=function(e,t){for(var i=[],n=0;n<e.length;n++){for(var r=!1,o=0;o<t.length;o++)if(e[n]===t[o]){r=!0;break}r||i.push(e[n])}return i},e.prototype.virtualizeElements=function(){for(var e=this.viewPortWidth/this.currentZoom,t=this.viewPortHeight/this.currentZoom,i=this.diagram.spatialSearch.findObjects(new _(-this.horizontalOffset/this.currentZoom,-this.verticalOffset/this.currentZoom,e,t)),n=[],r=0;r<i.length;r++)n.push(i[r].id);var o=this.getObjects(n,this.oldCollectionObjects);0===this.oldCollectionObjects.length&&(this.oldCollectionObjects=n);var a=this.getObjects(this.oldCollectionObjects,n);this.diagram.updateVirtualObjects(o,!1,a),this.oldCollectionObjects=n},e.prototype.setSize=function(e){var t=this.getPageBounds(void 0,void 0,!0);t.x*=this.currentZoom,t.y*=this.currentZoom,t.width*=this.currentZoom,t.height*=this.currentZoom;var i=Math.min(t.x,-this.horizontalOffset),n=Math.min(t.y,-this.verticalOffset),r=(this.horizontalOffset,this.viewPortWidth,t.right,this.verticalOffset,this.viewPortHeight,t.bottom,this.scrollerWidth),o=this.scrollerWidth;-this.verticalOffset<=t.y&&-this.verticalOffset+this.viewPortHeight>=t.bottom&&(o=0),-this.horizontalOffset<=t.x&&-this.horizontalOffset+this.viewPortWidth>=t.right&&(r=0),this.hScrollSize=r,this.vScrollSize=o;var a=this.diagramWidth,s=this.diagramHeight;this.diagramWidth=Math.max(t.right,-this.horizontalOffset+this.viewPortWidth-o)-i,this.diagramHeight=Math.max(t.bottom,-this.verticalOffset+this.viewPortHeight-r)-n,a===this.diagramWidth&&s===this.diagramHeight||"Diagram"===this.diagram.scrollSettings.scrollLimit||this.diagram.setSize(this.diagramWidth,this.diagramHeight),"Diagram"===this.diagram.scrollSettings.scrollLimit&&(a===this.diagramWidth&&s===this.diagramHeight&&1===this.currentZoom||this.diagram.diagramActions&&e&&(!this.diagram.diagramActions||!e||0===this.verticalOffset&&this.verticalOffset!==e.y||0===this.horizontalOffset&&this.horizontalOffset!==e.x)?e&&a===this.diagramWidth&&s===this.diagramHeight&&(this.diagram.diagramCanvas.scrollHeight>this.viewPortHeight&&e.y<0&&this.horizontalOffset===e.x&&0===this.verticalOffset||this.diagram.diagramCanvas.scrollWidth>this.viewPortWidth&&e.x<0&&this.verticalOffset===e.y&&0===this.horizontalOffset)&&(this.verticalOffset=e.y,this.horizontalOffset=e.x,this.transform={tx:Math.max(e.x,-t.left)/this.currentZoom,ty:Math.max(e.y,-t.top)/this.currentZoom,scale:this.currentZoom}):(this.diagram.scrollActions&ge.Interaction&&e&&(this.transform={tx:Math.max(e.x,-t.left/this.currentZoom)/this.currentZoom,ty:Math.max(e.y,-t.top/this.currentZoom)/this.currentZoom,scale:this.currentZoom},this.horizontalOffset=e.x,this.verticalOffset=e.y),this.diagram.setSize(this.diagramWidth,this.diagramHeight),this.diagram.scrollActions&ge.PropertyChange||!e||(this.horizontalOffset=e.x,this.verticalOffset=e.y,this.transform={tx:Math.max(e.x,-t.left)/this.currentZoom,ty:Math.max(e.y,-t.top)/this.currentZoom,scale:this.currentZoom}))),this.diagram.transformLayers(),this.diagram.element.style.overflow="hidden"},e.prototype.setViewPortSize=function(e,t){this.viewPortWidth=e,this.viewPortHeight=t},e.prototype.getPageBounds=function(e,t,i){var n,r=new _;if("Content"!==t&&null!==this.diagram.pageSettings.width&&null!==this.diagram.pageSettings.height){var o=this.diagram.pageSettings.width,a=this.diagram.pageSettings.height,s=0,l=0;if(this.diagram.pageSettings.multiplePage){if((r=this.diagram.spatialSearch.getPageBounds(0,0)).right>o)o*=c=Math.ceil(r.right/o);if(r.bottom>a)a*=c=Math.ceil(r.bottom/a);if(r.left<0&&Math.abs(r.left)>s){var c=Math.ceil(Math.abs(r.left)/this.diagram.pageSettings.width);s=this.diagram.pageSettings.width*c}if(r.top<0&&Math.abs(r.top)>l){c=Math.ceil(Math.abs(r.top)/this.diagram.pageSettings.height);l=this.diagram.pageSettings.height*c}}n=new _(-s,-l,o+s,a+l)}else{var d=e?void 0:0;n=this.diagram.spatialSearch.getPageBounds(d,d)}if(i){var h=this.diagram.scrollSettings.padding;n.x-=h.left,n.y-=h.top,n.width+=h.left+h.right,n.height+=h.top+h.bottom}return n},e.prototype.getPageBreak=function(e){for(var t=0,i=0,n=-1,r=[],o=0,a=0,s=0,l=0,c=this.diagram.pageSettings.margin.left,d=this.diagram.pageSettings.margin.right,h=this.diagram.pageSettings.margin.top,p=this.diagram.pageSettings.margin.bottom,u=1,f=1,g={x1:o,y1:s,x2:a,y2:l};e.width>t;)(t+=this.diagram.pageSettings.width?this.diagram.pageSettings.width:e.width)===this.diagram.pageSettings.width&&(g={x1:e.left+c,y1:e.top+h,x2:e.left+c,y2:e.bottom-p},r[++n]=g),t<e.width&&(g={x1:o=e.topLeft.x+this.diagram.pageSettings.width*u,y1:s=e.topLeft.y+h,x2:a=e.bottomLeft.x+this.diagram.pageSettings.width*u,y2:l=e.bottomLeft.y-p},r[++n]=g,u++),e.width===t&&(g={x1:e.right-d,y1:e.top+h,x2:e.right-d,y2:e.bottom-p},r[++n]=g);for(;e.height>i;)(i+=this.diagram.pageSettings.height?this.diagram.pageSettings.height:e.height)===this.diagram.pageSettings.height&&(g={x1:e.left+c,y1:e.top+h,x2:e.right-d,y2:e.top+h},r[++n]=g),i<e.height&&(g={x1:o=e.topLeft.x+c,y1:s=e.topLeft.y+this.diagram.pageSettings.height*f,x2:a=e.topRight.x-d,y2:l=e.topRight.y+this.diagram.pageSettings.height*f},r[++n]=g,f++),e.height===i&&(g={x1:e.left+c,y1:e.bottom-p,x2:e.right-d,y2:e.bottom-p},r[++n]=g);return r},e.prototype.zoom=function(e,t,i,n){if(this.diagram.constraints&ae.Zoom&&1!==e||function(e){return e.constraints&ae.Pan}(this.diagram)&&1===e){var r=W();if(U(r,this.currentZoom,this.currentZoom),V(r,this.horizontalOffset,this.verticalOffset),n=F(r,n=n||{x:(this.viewPortWidth/2-this.horizontalOffset)/this.currentZoom,y:(this.viewPortHeight/2-this.verticalOffset)/this.currentZoom}),this.currentZoom*e>=this.diagram.scrollSettings.minZoom&&this.currentZoom*e<=this.diagram.scrollSettings.maxZoom){this.currentZoom*=e;var o=this.getPageBounds(void 0,void 0,!0);o.x*=this.currentZoom,o.y*=this.currentZoom;var a=W();U(a,e,e,n.x,n.y),V(a,t||0,i||0),Y(r,a);var s=F(r,{x:0,y:0});1===e&&(s=this.applyScrollLimit(s.x,s.y)),!(this.diagram.scrollActions&ge.PropertyChange)&&this.diagram.scrollActions&ge.Interaction&&"Diagram"===this.diagram.scrollSettings.scrollLimit||(this.transform={tx:Math.max(s.x,-o.left)/this.currentZoom,ty:Math.max(s.y,-o.top)/this.currentZoom,scale:this.currentZoom},this.horizontalOffset=s.x,this.verticalOffset=s.y),this.setSize(s),"SVG"!==this.diagram.mode&&lo(this.diagram)&&this.diagram.scroller.virtualizeElements(),"SVG"===this.diagram.mode||lo(this.diagram)||this.diagram.refreshDiagramLayer(),this.diagram.setOffset(-this.horizontalOffset-o.x,-this.verticalOffset-o.y),Ur(this.diagram)}}},e.prototype.fitToPage=function(e){var t=(e=e||{}).mode,i=e.region,n=e.margin||{},r=e.canZoomIn,o=e.customBounds;n.bottom=n.bottom||25,n.top=n.top||25,n.left=n.left||25,n.right=n.right||25;var a,s=o,l=-this.horizontalOffset,c=-this.verticalOffset;if("PageSettings"===(i=i||"PageSettings")&&this.diagram.pageSettings.width&&this.diagram.pageSettings.height||this.diagram.nodes.length>0||this.diagram.connectors.length>0){t=t||"Page","CustomBounds"!==i&&(s=this.getPageBounds(!0,i,!0));var d={x:0,y:0};d.x=(this.viewPortWidth-(n.left+n.right))/s.width,d.y=(this.viewPortHeight-(n.top+n.bottom))/s.height,!r&&s.width-this.horizontalOffset<this.viewPortWidth&&s.height-this.verticalOffset<this.viewPortHeight&&(d.x=Math.min(this.currentZoom,d.x),d.y=Math.min(this.currentZoom,d.y));var h=void 0,p=void 0,u=void 0;switch(t){case"Width":a=(h=d.x)/this.currentZoom,l+=(p=(this.viewPortWidth-s.width*h)/2-s.x*h)+(n.left-n.right)/2*h,c-=-this.verticalOffset*a,c="CustomBounds"!==i?c:c-this.verticalOffset*a;break;case"Height":a=(h=d.y)/this.currentZoom,p=(this.viewPortWidth-s.width*h)/2-s.x*h,u=(this.viewPortHeight-s.height*h)/2-s.y*h,l+=p+(n.left-n.right)/2*h,c+=u+(n.top-n.bottom)/2*h;break;case"Page":a=(h=Math.min(d.x,d.y))/this.currentZoom,p=(this.viewPortWidth-s.width*h)/2-s.x*h,u=(this.viewPortHeight-s.height*h)/2-s.y*h,l+=p+(n.left-n.right)/2*h,c+=u+(n.top-n.bottom)/2*h}this.zoom(a,l,c,{x:0,y:0})}else a=1/this.currentZoom,this.zoom(a,l,c,{x:0,y:0})},e.prototype.bringIntoView=function(e){var t=0,i=0,n=this.currentZoom,r=e,o=-this.horizontalOffset,a=-this.verticalOffset;r=new _(r.x*n,r.y*n,r.width*n,r.height*n),new _(o,a,this.viewPortWidth,this.viewPortHeight).containsRect(r)||(r.right>-o+this.viewPortWidth&&(t=r.right-this.viewPortWidth),r.x<-o&&(t=r.x),r.bottom>-a+this.viewPortHeight&&(i=r.bottom-this.viewPortHeight),r.y<-a&&(i=r.y),this.zoom(1,-this.horizontalOffset-t,-this.verticalOffset-i,null))},e.prototype.bringToCenter=function(e){var t=this.currentZoom,i=new _(e.x*t,e.y*t,e.width*t,e.height*t),n=i.x+i.width/2-this.viewPortWidth/2,r=i.y+i.height/2-this.viewPortHeight/2;this.zoom(1,-this.horizontalOffset-n,-this.verticalOffset-r,null)},e.prototype.applyScrollLimit=function(e,t){if("Infinity"!==this.diagram.scrollSettings.scrollLimit){var i=void 0;if("Limited"===this.diagram.scrollSettings.scrollLimit){var n=this.diagram.scrollSettings.scrollableArea;i=new _(n.x,n.y,n.width,n.height)}(i=i||this.getPageBounds(!0)).x*=this.currentZoom,i.y*=this.currentZoom,i.width*=this.currentZoom,i.height*=this.currentZoom,e*=-1,t*=-1;var r=Math.max(i.right,this.viewPortWidth);if(!(e<=i.x&&(e+this.viewPortWidth>=i.right||e>=i.right-this.viewPortWidth)||e>=i.x&&e+this.viewPortWidth<=r))if(e>=i.x)e=Math.max(i.x,Math.min(e,e-(e+this.viewPortWidth-this.vScrollSize-r)));else{var o=i.right-this.viewPortWidth;e=Math.min(o,i.x)}var a=Math.max(i.bottom,this.viewPortHeight);if(!(t<=i.y&&t+this.viewPortHeight>=i.bottom||t>=i.y&&t+this.viewPortHeight<=a))if(t>=i.y)t=Math.max(i.y,Math.min(t,t-(t+this.viewPortHeight-this.hScrollSize-a)));else{o=i.bottom-this.viewPortHeight;t=Math.min(i.y,o)}e*=-1,t*=-1}return{x:e,y:t}},e}(),Wd=function(){function e(e,t,i,n,r){this.objects=[],this.left=e,this.top=t,this.width=i,this.height=n,this.spatialSearch=r}return e.prototype.findQuads=function(e,t){null!=this.first&&this.first.isIntersect(e)&&this.first.findQuads(e,t),null!=this.second&&this.second.isIntersect(e)&&this.second.findQuads(e,t),null!=this.third&&this.third.isIntersect(e)&&this.third.findQuads(e,t),null!=this.fourth&&this.fourth.isIntersect(e)&&this.fourth.findQuads(e,t),this.objects.length>0&&t.push(this)},e.prototype.isIntersect=function(e){return!(this.left+this.width<e.left||this.top+this.height<e.top||this.left>e.right||this.top>e.bottom)},e.prototype.selectQuad=function(){for(var e,t=null,i=this;null!=i;)e=i.getQuad(t),i=e.source,t=e.target||t;return t},e.prototype.getQuad=function(t){var i=this.width/2,n=this.height/2;if(i>=1e3&&n>=1e3){var r=this.left+i,o=this.top+n;if(this.spatialSearch.childRight<=r){if(this.spatialSearch.childBottom<=o){if(!this.first)(a=new e(this.left,this.top,i,n,this.spatialSearch)).parent=this,this.first=a;return{source:this.first}}if(this.spatialSearch.childTop>=o){if(!this.third)(a=new e(this.left,o,i,n,this.spatialSearch)).parent=this,this.third=a;return{source:this.third}}}else if(this.spatialSearch.childLeft>=r){if(this.spatialSearch.childBottom<=o){if(!this.second)(a=new e(r,this.top,i,n,this.spatialSearch)).parent=this,this.second=a;return{source:this.second}}if(this.spatialSearch.childTop>=o){var a;if(!this.fourth)(a=new e(r,o,i,n,this.spatialSearch)).parent=this,this.fourth=a;return{source:this.fourth}}}}return this,this.objects.push(this.spatialSearch.childNode),{target:this}},e.prototype.isContained=function(){return this.spatialSearch.childLeft>=this.left&&this.spatialSearch.childRight<=this.left+this.width&&this.spatialSearch.childTop>=this.top&&this.spatialSearch.childBottom<=this.top+this.height},e.prototype.addIntoAQuad=function(e){var t={};this.spatialSearch.setCurrentNode(e);for(var i=null;!t.isAdded;)i=(t=this.spatialSearch.parentQuad.add(i)).quad;return i},e.prototype.add=function(t){if(t=null,this.isContained())return{isAdded:!0,quad:t=this.selectQuad()};var i=void 0,n=0===this.objects.length&&!this.first&&!this.second&&!this.third&&!this.fourth,r=2*this.width,o=2*this.height;return this.spatialSearch.childLeft<this.left?this.spatialSearch.childTop<this.top?(i=new e(this.left-this.width,this.top-this.height,r,o,this.spatialSearch),n||(i.fourth=this)):(i=new e(this.left-this.width,this.top,r,o,this.spatialSearch),n||(i.second=this)):this.spatialSearch.childTop<this.top?(i=new e(this.left,this.top-this.height,r,o,this.spatialSearch),n||(i.third=this)):(i=new e(this.left,this.top,r,o,this.spatialSearch),n||(i.first=this)),this.parent=i,this.spatialSearch.parentQuad=i,{isAdded:!1,quad:t}},e}(),Fd=function(){function e(e){this.quadSize=500,this.objectTable=e,this.parentQuad=new Wd(0,0,2*this.quadSize,2*this.quadSize,this),this.pageLeft=Number.MAX_VALUE,this.pageRight=-Number.MAX_VALUE,this.pageTop=Number.MAX_VALUE,this.pageBottom=-Number.MAX_VALUE,this.quadTable={}}return e.prototype.removeFromAQuad=function(e){if(this.quadTable[e.id]){var t=this.quadTable[e.id],i=this.objectIndex(t.objects,e);-1!==i&&(t.objects.splice(i,1),this.update(t),delete this.quadTable[e.id])}},e.prototype.update=function(e){if(e.parent&&0===e.objects.length&&e.first&&e.second&&e.third&&e.fourth){var t=e.parent;t.first===e?t.first=null:t.second===e?t.second=null:t.third===e?t.third=null:t.fourth===e&&(t.fourth=null),this.update(e.parent)}else e!==this.parentQuad||e.first||e.second||e.third||e.fourth||(e.left=0,e.width=1e3,e.top=0,e.height=1e3)},e.prototype.addIntoAQuad=function(e){var t=this.parentQuad.addIntoAQuad(e);this.quadTable[e.id]=t},e.prototype.objectIndex=function(e,t){for(var i=0;i<e.length;i++)if(e[i].id===t.id)return i;return-1},e.prototype.updateQuad=function(e){this.setCurrentNode(e);var t=e.outerBounds;if(isNaN(t.x)||isNaN(t.y)||isNaN(t.width)||isNaN(t.height))return!1;this.quadTable[e.id]?this.quadTable[e.id].isContained()||(this.removeFromAQuad(e),this.addIntoAQuad(e)):this.addIntoAQuad(e);if(!this.isWithinPageBounds(t)||this.leftElement===e||this.topElement===e||this.rightElement===e||this.bottomElement===e){var i=!1;return this.pageLeft===this.childLeft&&e===this.leftElement||(this.pageLeft>=this.childLeft?(this.pageLeft=this.childLeft,this.leftElement=e,i=!0):e===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.findLeft(this.parentQuad),i=!0)),this.pageTop===this.childTop&&e===this.topElement||(this.pageTop>=this.childTop?(this.pageTop=this.childTop,this.topElement=e,i=!0):e===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.findTop(this.parentQuad),i=!0)),this.pageBottom===this.childBottom&&e===this.bottomElement||(this.pageBottom<=this.childBottom?(i=!0,this.pageBottom=this.childBottom,this.bottomElement=e):e===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.findBottom(this.parentQuad),i=!0)),this.pageRight===this.childRight&&e===this.rightElement||(this.pageRight<=this.childRight?(this.pageRight=this.childRight,this.rightElement=e,i=!0):e===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.findRight(this.parentQuad),i=!0)),i}return this.setCurrentNode(null),!1},e.prototype.isWithinPageBounds=function(e){return e.left>=this.pageLeft&&e.right<=this.pageRight&&e.top>=this.pageTop&&e.bottom<=this.pageBottom},e.prototype.findQuads=function(e){var t=[];return this.parentQuad.findQuads(e,t),t},e.prototype.findObjects=function(e){for(var t=[],i=0,n=this.findQuads(e);i<n.length;i++)for(var r=0,o=n[i].objects;r<o.length;r++){var a=o[r];a.outerBounds.intersects(e)&&t.push(this.objectTable[a.id])}return t},e.prototype.updateBounds=function(e){var t=!1;return e===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.topElement=null,this.findTop(this.parentQuad),t=!0),e===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.leftElement=null,this.findLeft(this.parentQuad),t=!0),e===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.rightElement=null,this.findRight(this.parentQuad),t=!0),e===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.bottomElement=null,this.findBottom(this.parentQuad),t=!0),t},e.prototype.findBottom=function(e){e.third||e.fourth?(e.third&&this.findBottom(e.third),e.fourth&&this.findBottom(e.fourth)):(e.second&&this.findBottom(e.second),e.first&&this.findBottom(e.first));for(var t=0,i=e.objects;t<i.length;t++){var n=i[t];this.pageBottom<=n.outerBounds.bottom&&(this.pageBottom=n.outerBounds.bottom,this.bottomElement=n)}},e.prototype.findRight=function(e){e.second||e.fourth?(e.second&&this.findRight(e.second),e.fourth&&this.findRight(e.fourth)):(e.first&&this.findRight(e.first),e.third&&this.findRight(e.third));for(var t=0,i=e.objects;t<i.length;t++){var n=i[t];this.pageRight<=n.outerBounds.right&&(this.pageRight=n.outerBounds.right,this.rightElement=n)}},e.prototype.findLeft=function(e){e.first||e.third?(e.first&&this.findLeft(e.first),e.third&&this.findLeft(e.third)):(e.second&&this.findLeft(e.second),e.fourth&&this.findLeft(e.fourth));for(var t=0,i=e.objects;t<i.length;t++){var n=i[t];this.pageLeft>=n.outerBounds.left&&(this.pageLeft=n.outerBounds.left,this.leftElement=n)}},e.prototype.findTop=function(e){e.first||e.second?(e.first&&this.findTop(e.first),e.second&&this.findTop(e.second)):(e.third&&this.findTop(e.third),e.fourth&&this.findTop(e.fourth));for(var t=0,i=e.objects;t<i.length;t++){var n=i[t];this.pageTop>=n.outerBounds.top&&(this.pageTop=n.outerBounds.top,this.topElement=n)}},e.prototype.setCurrentNode=function(e){if(this.childNode=e,e){var t=e.outerBounds;this.childLeft=Number(t.left),this.childTop=Number(t.top),this.childRight=Number(t.right),this.childBottom=Number(t.bottom)}else this.childLeft=Number.MAX_VALUE,this.childTop=Number.MAX_VALUE,this.childRight=-Number.MAX_VALUE,this.childBottom=-Number.MAX_VALUE},e.prototype.getPageBounds=function(e,t){if(this.pageLeft===Number.MAX_VALUE)return new _(0,0,0,0);var i=void 0!==e?Math.min(this.pageLeft,0):this.pageLeft,n=void 0!==t?Math.min(this.pageTop,0):this.pageTop;return new _(Math.round(i),Math.round(n),Math.round(this.pageRight-i),Math.round(this.pageBottom-n))},e.prototype.getQuad=function(e){return this.quadTable[e.id]},e}(),qd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ud=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Vd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qd(t,e),Ud([Object(r.q)(!1)],t.prototype,"preventDefaults",void 0),t}(r.d),Yd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xd=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Gd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yd(t,e),Xd([Object(r.q)("")],t.prototype,"action",void 0),Xd([Object(r.q)("")],t.prototype,"cursor",void 0),t}(r.d),Zd=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Jd=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Qd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zd(t,e),Jd([Object(r.q)(!0)],t.prototype,"inversedAlignment",void 0),t}(r.d),$d=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kd=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},eh=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))},th=function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ih=function(e){function t(t,i){var n,o,a=e.call(this,t,i)||this;a.version=17.1,a.checkMenu=!1,a.isServerUpdate=!1,a.oldNodeObjects=[],a.oldDiagramObject={},a.oldConnectorObjects=[],a.canEnableBlazorObject=!1,a.connectorTable={},a.groupTable={},a.scrollActions=ge.None,a.blazorActions=Z.Default,a.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0},a.textEditing=!1,a.isTriggerEvent=!1,a.preventNodesUpdate=!1,a.preventConnectorsUpdate=!1,a.callBlazorModel=!0,a.selectionConnectorsList=[],a.deleteVirtualObject=!1,a.changedConnectorCollection=[],a.changedNodesCollection=[],a.previousNodeCollection=[],a.previousConnectorCollection=[],a.crudDeleteNodes=[],a.blazorAddorRemoveCollection=[],a.blazorRemoveIndexCollection=[],a.diagramid=88123,a.selectedObject={helperObject:void 0,actualObject:void 0},a.renderTimer=null;var s=Object(r.I)()&&window&&window.Blazor&&!a.dataSourceSettings.dataSource;a.ignoreCollectionWatch=!0;for(var l=0;t&&t.nodes&&l<t.nodes.length;l++)n=t.nodes[l],o=a.nodes[l],n.children&&n.children.length>0&&(n.style&&n.style.fill||(o.style.fill="transparent"),n.style&&n.style.strokeColor||(o.style.strokeColor="transparent")),n.shape&&"UmlActivity"===n.shape.type&&Ra(n,o),n.shape&&"SwimLane"===n.shape.type&&ka(n,o),s&&a.previousNodeCollection.push(uc(o,void 0,void 0,!0)),a.nodeDefaults&&_a(o,n,a.nodeDefaults),a.updateAnnotationText(o.annotations);if(t&&t.connectors)for(l=0;t&&t.connectors&&l<t.connectors.length;l++)n=t.connectors[l],o=a.connectors[l],s&&a.previousConnectorCollection.push(uc(o,void 0,void 0,!0)),a.connectorDefaults&&_a(o,n,a.connectorDefaults),a.updateAnnotationText(o.annotations);for(l=0;t&&t.connectors&&l<t.connectors.length;l++){var c=t.connectors[l],d=a.connectors[l];if(c.shape&&"None"!==c.shape.type&&za(c,d),Object(r.I)()){var h=uc(a.bulkChanges);a.enableServerDataBinding(!0),a.protectPropertyChange(!0);for(var p=Object.keys(h),u=0;u<p.length;u++){var f=p[u],g=f.split("-");g&&g[0]&&("nodes"===g[0]&&(h[f].sfIndex=Number(g[1]),a.changedNodesCollection.push(h[f])),"connectors"===g[0]&&(h[f].sfIndex=Number(g[1]),a.changedConnectorCollection.push(h[f])))}}}return a}return $d(t,e),t.prototype.updateAnnotationText=function(e){if(Object(r.I)()&&e.length>0)for(var t=0;e&&t<e.length;t++){var i=e[t];i.content=i.content.split("\\n").join("\n")}},t.prototype.callFromServer=function(e){if("getParentID"===e.methodName){var t=e.id;return this.nameTable[t].parentId}if("getEdges"===e.methodName){var i=e.outEdge;t=e.id;return i?this.nameTable[t].outEdges:this.nameTable[t].inEdges}if("updateDiagramObjects"===e.methodName){var n=e.obj;if(this.isServerUpdate=!0,e.IsAdding){this.add.apply(this,n)}else{this.remove.apply(this,n)}this.isServerUpdate=!1}else if("invokeLoadDiagramMethod"===e.methodName){this.loadDiagram(e.data)}},t.prototype.clearCollection=function(e){for(var t,i=[],n=0,r=Object.keys(this.nameTable);n<r.length;n++){var o=r[n];(t=this.nameTable[o])&&(e&&t instanceof _r||!e&&t instanceof Pl)&&i.push(t)}this.clearObjects(i)},t.prototype.onPropertyChanged=function(i,n){var o,a,s=!0,l=!1,c=!1;if(this.diagramActions&pe.Render){for(var d=0,h=Object.keys(i);d<h.length;d++){switch(h[d]){case"width":case"height":this.element.style.width=this.getSizeValue(this.width),this.element.style.height=this.getSizeValue(this.height),this.eventHandler.updateViewPortSize(this.element);for(var p=0,u=this.views;p<u.length;p++){var f=u[p];(B=this.views[f])instanceof t||B.updateView(B)}break;case"nodes":if(i.nodes.length>0&&0===n.nodes.length)this.clearCollection(),c=!0;else{for(var g=0,m=Object.keys(i.nodes);g<m.length;g++){var v=m[g],y=Number(v),b=this.nodes[y],w=i.nodes[y];l=l||void 0!==w.excludeFromLayout,this.nodePropertyChange(b,n.nodes[y],w,void 0,!0,!0);var x={element:Ls(b),cause:this.diagramActions,oldValue:Ls(n.nodes[y]),newValue:Ls(i.nodes[y])};Object(r.I)()&&(x.element={node:Ls(b)},x.oldValue={node:Ls(a)},x.newValue={node:Ls(o)}),this.triggerEvent(ve.propertyChange,x),s&&(s=!1)}"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"connectors":if(i.connectors.length>0&&0===n.connectors.length)this.clearCollection(!0),c=!0;else{for(var O=0,S=Object.keys(i.connectors);O<S.length;O++){v=S[O],y=Number(v),b=this.connectors[y];(w=i.connectors[y])&&(w.sourceDecorator||w.targetDecorator)&&(this.diagramActions|=pe.DecoratorPropertyChange),this.connectorPropertyChange(b,n.connectors[y],w,!0,!0),w&&(w.sourceDecorator||w.targetDecorator)&&(this.diagramActions=this.diagramActions&~pe.DecoratorPropertyChange);x={element:Ls(b),cause:this.diagramActions,oldValue:Ls(n.connectors[y]),newValue:Ls(i.connectors[y])};Object(r.I)()&&(x.element={connector:Ls(b)},x.oldValue={connector:Ls(a)},x.newValue={connector:Ls(o)}),this.triggerEvent(ve.propertyChange,x),b&&b.parentId&&"UmlClassifier"===this.nameTable[b.parentId].shape.type&&this.updateConnectorEdges(this.nameTable[b.parentId]||b),s&&(s=!1)}this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"bridgeDirection":this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer();break;case"backgroundColor":this.intOffPageBackground();break;case"pageSettings":this.validatePageSize(),this.updatePage();break;case"selectedItems":if(i.selectedItems.userHandles&&this.selectedItems.wrapper&&this.selectedItems.userHandles&&this.selectedItems.userHandles.length>0){this.renderSelector(!0);break}if(i.selectedItems.constraints){this.renderSelector(!0);break}break;case"snapSettings":this.updateSnapSettings(i);break;case"commandManager":this.initCommands();break;case"layout":l=!0;break;case"dataSourceSettings":this.clear(),this.initObjects(),"None"===this.layout.type?c=!0:l=!0;break;case"tooltip":$n(this);break;case"rulerSettings":this.updateRulerSettings(i);break;case"layers":this.updateLayer(i);break;case"scrollSettings":this.scrollActions|=ge.PropertyChange,this.updateScrollSettings(i),this.scrollActions&=~ge.PropertyChange;break;case"locale":i.locale!==n.locale&&(this.realActions|=fe.PreventDataInit,e.prototype.refresh.call(this),this.realActions&=~fe.PreventDataInit);break;case"contextMenuSettings":if(void 0!==i.contextMenuSettings.showCustomMenuOnly&&(this.contextMenuSettings.showCustomMenuOnly=i.contextMenuSettings.showCustomMenuOnly),void 0!==i.contextMenuSettings.show&&(this.contextMenuSettings.show=i.contextMenuSettings.show),i.contextMenuSettings.items)for(var C=i.contextMenuSettings.items,P=0,j=Object.keys(C);P<j.length;P++){v=j[P],y=Number(v);this.contextMenuSettings.items[y]=C[y]}break;case"serializationSettings":void 0!==i.serializationSettings.preventDefaults&&(this.serializationSettings.preventDefaults=i.serializationSettings.preventDefaults)}}if(l&&!c){if(n.layout&&"DifferentPoint"===n.layout.connectionPointOrigin&&"SamePoint"===i.layout.connectionPointOrigin){for(var I=0;I<this.nodes.length;I++){var E=this.nodes[I];if(E.ports&&E.ports.length>0){for(var T=[],A=E.ports.length-1;A>=0;A--)"LineDistribution"===E.ports[A].id.split("_")[1]&&T.push(E.ports[A]);this.removePorts(E,T)}}for(A=0;A<this.connectors.length;A++){var D=this.connectors[A],k=D.sourcePortID,M=D.targetPortID;D.segments;D.sourcePortID="",D.targetPortID="",D.sourcePortWrapper=void 0,D.targetPortWrapper=void 0,D.segments=[],this.connectorPropertyChange(D,{sourcePortID:k,targetPortID:M},{sourcePortID:"",targetPortID:""})}}this.doLayout(),this.renderReactTemplates()}if(s&&this.propertyChange){x={element:Ls(this),cause:this.diagramActions,oldValue:Ls(n),newValue:Ls(i)};Object(r.I)()&&(x.element={diagram:Ls(this)},x.oldValue={diagram:Ls(a)},x.newValue={diagram:Ls(o)}),this.triggerEvent(ve.propertyChange,x)}if(!c&&this.canLogChange()&&this.modelChanged(i,n)){var L={type:"PropertyChanged",undoObject:n,redoObject:i,category:"Internal"};this.historyManager&&this.addHistoryEntry(L)}this.resetDiagramActions(),c&&(this.initObjects(!0),this.refreshDiagramLayer(),l&&this.doLayout());var R=1===Object.keys(i).length&&void 0!==i.scrollSettings;if(!c)for(var z=0,N=this.views;z<N.length;z++){var B=N[z];(f=this.views[B])instanceof t||(i.scrollSettings&&i.scrollSettings.currentZoom!=n.scrollSettings.currentZoom&&f.updateHtmlLayer(f),R||this.refreshCanvasDiagramLayer(f))}this.resetTemplate()}},t.prototype.updateSnapSettings=function(e){(void 0!==e.snapSettings.constraints||e.snapSettings.horizontalGridlines||e.snapSettings.verticalGridlines||e.snapSettings.gridType)&&this.diagramRenderer.updateGrid(this.snapSettings,Ul(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},t.prototype.updateRulerSettings=function(e){void 0!==e.rulerSettings.dynamicGrid&&this.diagramRenderer.updateGrid(this.snapSettings,Ul(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),void 0!==e.rulerSettings.showRulers?(this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):void 0===e.rulerSettings.horizontalRuler&&void 0===e.rulerSettings.verticalRuler||(void 0!==e.rulerSettings.horizontalRuler.thickness||void 0!==e.rulerSettings.verticalRuler.thickness?(Vr(this),this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):Ur(this)),this.diagramRenderer.updateGrid(this.snapSettings,Ul(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.preRender=function(){this.initializePrivateVariables(),this.isProtectedOnChange=!0,this.serviceLocator=new Rc,this.initializeServices(),this.setCulture();window.measureElement&&(window.measureElement=null),this.initDiagram(),this.initViews(),this.unWireEvents(),this.wireEvents(),this.element.classList.add("e-diagram")},t.prototype.initializePrivateVariables=function(){if(""===this.element.id){var e=document.getElementsByClassName("e-diagram").length;this.element.id="diagram_"+this.diagramid+"_"+e}this.defaultLocale={Copy:"Copy",Cut:"Cut",Paste:"Paste",Undo:"Undo",Redo:"Redo",SelectAll:"Select All",Grouping:"Grouping",Group:"Group",UnGroup:"Un Group",Order:"Order",BringToFront:"Bring To Front",MoveForward:"Move Forward",SendToBack:"Send To Back",SendBackward:"Send Backward"},this.layerZIndex=-1,this.layerZIndexTable={},this.nameTable={},this.pathTable={},this.groupTable={},this.commands={},this.isLoading||(this.views=[]),this.commandHandler=new _d(this),this.eventHandler=new kd(this,this.commandHandler),this.spatialSearch=new Fd(this.nameTable),this.scroller=new Hd(this)},t.prototype.initializeServices=function(){this.serviceLocator.register("localization",this.localeObj=new r.o(this.getModuleName(),this.defaultLocale,this.locale))},t.prototype.setCulture=function(){this.localeObj=new r.o(this.getModuleName(),this.defaultLocale,this.locale)},t.prototype.render=function(){this.refreshing&&this.dataSourceSettings.dataSource&&!this.isLoading&&(this.nodes=[],this.connectors=[]),this.ignoreCollectionWatch=!0;window.domTable={};var e=[];if(Object(r.I)()){for(var t=[],i=[],n=0;n<this.changedNodesCollection.length;n++)t.push(this.commandHandler.deepDiffer.removeEmptyValues(this.changedNodesCollection[n]));for(n=0;n<this.changedConnectorCollection.length;n++)i.push(this.commandHandler.deepDiffer.removeEmptyValues(this.changedConnectorCollection[n]));var o="sfBlazor",a="Blazor",s={nodes:t,connectors:i};if(window&&window[a]&&!this.dataSourceSettings.dataSource&&(t.length>0||i.length>0)){var l={methodName:"UpdateBlazorProperties",diagramobj:s};window[o].updateBlazorProperties(l,this)}}this.dataSourceSettings.crudAction.read&&this.renderInitialCrud(),this.initHistory(),this.diagramRenderer=new Ec(this.element.id,new Ic,"SVG"===this.mode),this.initLayers(),this.initializeDiagramLayers(),this.diagramRenderer.setLayers(),this.initObjects(!0);var c=!1;if(Object(r.I)()&&!this.dataSourceSettings.dataSource&&"None"!==this.layout.type){for(var d=0,h=this.nodes;d<h.length;d++){l=h[d];this.insertValue(uc(l),!0)}for(var p=0,u=this.connectors;p<u.length;p++){l=u[p];this.insertValue(uc(l),!1)}c=!0}if(this.doLayout(),c&&this.commandHandler.getBlazorOldValues(),this.lineRoutingModule){var f=[],g=[],m=[];if(Object(r.I)())for(var v=0,y=this.connectors;v<y.length;v++){l=y[v];f.push(uc(l,void 0,void 0,!0))}if(this.lineRoutingModule.lineRouting(this),Object(r.I)()){for(var b=0,w=this.connectors;b<w.length;b++){l=w[b];g.push(uc(l,void 0,void 0,!0))}if(this.commandHandler.getObjectChanges(f,g,m),!(this.blazorActions&Z.ClearObject)){o="sfBlazor",a="Blazor",s={nodes:[],connectors:m};if(window&&window[a]){l={methodName:"UpdateBlazorProperties",diagramobj:s};window[o].updateBlazorProperties(l,this)}}}}this.validatePageSize(),this.renderPageBreaks(),this.diagramRenderer.renderSvgGridlines(this.snapSettings,Ul(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.commandHandler.initSelectorWrapper(),this.notify("initial-load",{}),this.trigger("load"),this.scroller.setSize(),this.scroller.updateScrollOffsets(),this.refreshDiagramLayer(),(this.scrollSettings.verticalOffset>0||this.scrollSettings.horizontalOffset>0)&&this.updateScrollOffset(),r.c.isDevice&&(this.tool=se.ZoomPan|se.SingleSelect),this.notify("initial-end",{}),this.isProtectedOnChange=!1,this.tooltipObject=$n(this),this.diagramActions=pe.Render;var x=this.nodes;for(n=0;n<x.length;n++)x[n].isExpanded||e.push(x[n]);if(e.length)for(n=e.length-1;n>=0;n--)this.commandHandler.expandNode(e[n],this);this.initCommands();var O=document.getElementsByClassName(this.element.id+"_hiddenUserHandleTemplate");!function(e,t,i,n){var o,a,s,l,c,d=document.getElementById(n).ej2_instances[0];if(e&&t){o=dc(e);for(var h=0,p=i.userHandles;h<p.length;h++)if(a=p[h],o){for(s=o(uc(a),d,"userHandleTemplate_"+a.name,void 0,void 0,!1),l=0;l<s.length;l++)(c=Zl("div",{style:"height: 100%; width: 100%; pointer-events: all",id:a.name+"_template_hiddenUserHandle"})).appendChild(s[l]);t[0].appendChild(c)}}else if(Object(r.I)())for(var u=void 0,f=0,g=i.userHandles;f<g.length;f++)if(!(a=g[f]).pathData&&!a.content&&!a.source){for(l=0,u=(s=Object(r.z)(a.content))(Ls(a),d,"userHandleTemplate","diagramsf_userHandle_template");l<u.length;l++)(c=Zl("div",{style:"height: 100%; width: 100%; pointer-events: all",id:a.name+"_template_hiddenUserHandle"})).appendChild(u[l]);t[0].appendChild(c)}}(this.userHandleTemplate,O,this.selectedItems,this.element.id),this.updateTemplate(),this.isLoading=!1,this.renderComplete(),this.updateFitToPage(),this.refreshing&&this.renderReactTemplates()},t.prototype.updateFitToPage=function(){this.pageSettings&&this.pageSettings.fitOptions&&this.pageSettings.fitOptions.canFit&&this.fitToPage(this.pageSettings.fitOptions)},t.prototype.updateTemplate=function(){for(var e,t,i,n=0;n<this.nodes.length;n++)if("HTML"===(e=this.nodes[n]).shape.type||"Native"===e.shape.type){Object(r.Y)("diagramsf_node_template","NodeTemplate",this,!1);break}for(n=0;n<this.nodes.length;n++)if((t=(e=this.nodes[n]).annotations[0])&&"Template"===t.annotationType){Object(r.Y)("diagramsf_annotation_template","AnnotationTemplate",this,!1);break}for(n=0;n<this.connectors.length;n++)if((i=this.connectors[n].annotations[0])&&"Template"===i.annotationType){Object(r.Y)("diagramsf_annotation_template","AnnotationTemplate",this,!1);break}for(n=0;n<this.selectedItems.userHandles.length;n++)if(this.selectedItems.userHandles[n].template){Object(r.Y)("diagramsf_userHandle_template","UserHandleTemplate",this,!1);break}},t.prototype.resetTemplate=function(){for(var e,t,i,n=0;n<this.nodes.length;n++)if("HTML"===(e=this.nodes[n]).shape.type&&e.shape.content instanceof HTMLElement){Object(r.R)("diagramsf_node_template","NodeTemplate");break}for(n=0;n<this.nodes.length;n++)if((t=(e=this.nodes[n]).annotations[0])&&"Template"===t.annotationType&&t.content instanceof HTMLElement){Object(r.R)("diagramsf_annotation_template","AnnotationTemplate");break}for(n=0;n<this.connectors.length;n++)if((i=this.connectors[n].annotations[0])&&"Template"===i.annotationType&&i.content instanceof HTMLElement){Object(r.R)("diagramsf_annotation_template","AnnotationTemplate");break}for(n=0;n<this.selectedItems.userHandles.length;n++)if(this.selectedItems.userHandles[n].template){Object(r.Y)("diagramsf_userHandle_template","UserHandleTemplate",this,!1);break}},t.prototype.renderInitialCrud=function(){var e,t=this;t.dataSourceSettings.crudAction.read&&((e=new r.a(t.dataSourceSettings.crudAction.read,"GET",!1)).onSuccess=function(e){t.dataSourceSettings.dataManager?t.dataSourceSettings.dataManager=JSON.parse(e):t.dataSourceSettings.dataSource=JSON.parse(e),t.dataBind()},e.send().then());t.dataSourceSettings.connectionDataSource.crudAction.read&&((e=new r.a(t.dataSourceSettings.connectionDataSource.crudAction.read,"GET",!1)).onSuccess=function(e){t.dataSourceSettings.connectionDataSource.dataManager=JSON.parse(e),t.dataBind()},e.send().then())},t.prototype.getModuleName=function(){return"diagram"},t.prototype.getClassName=function(){return"Diagram"},t.prototype.requiredModules=function(){var e=[];return e.push({member:"Bpmn",args:[]}),e.push({member:"Bridging",args:[]}),e.push({member:"ConnectorEditingTool",args:[]}),Object(r.I)()&&e.push({member:"BlazorTooltip",args:[]}),this.constraints&ae.UndoRedo&&e.push({member:"UndoRedo",args:[]}),("OrganizationalChart"===this.layout.type||"HierarchicalTree"===this.layout.type||this.layout.enableAnimation)&&e.push({member:"LayoutAnimate",args:[]}),this.snapSettings.constraints&&e.push({member:"Snapping",args:[this]}),e.push({member:"PrintandExport",args:[this]}),this.contextMenuSettings.show&&e.push({member:"contextMenu",args:[this,this.serviceLocator]}),"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type||e.push({member:"OrganizationalChart",args:[this]}),"ComplexHierarchicalTree"===this.layout.type&&e.push({member:"ComplexHierarchicalTree",args:[]}),"MindMap"===this.layout.type&&e.push({member:"MindMapChart",args:[]}),"RadialTree"===this.layout.type&&e.push({member:"RadialTree",args:[]}),"SymmetricalLayout"===this.layout.type&&e.push({member:"SymmetricalLayout",args:[]}),(this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource||this.dataSourceSettings.crudAction.read||this.dataSourceSettings.connectionDataSource.crudAction.read)&&e.push({member:"DataBinding",args:[]}),this.constraints&ae.LineRouting&&e.push({member:"LineRouting",args:[]}),(this.layout&&"DifferentPoint"===this.layout.connectionPointOrigin||"Linear"===this.layout.arrangement)&&e.push({member:"LineDistribution",args:[]}),e},t.prototype.removeUserHandlesTemplate=function(){if(this.selectedItems.userHandles.length)for(var e=0;e<this.selectedItems.userHandles.length;e++)for(var t=0,i=this.views;t<i.length;t++){var n=i[t];ec(this.selectedItems.userHandles[e].name+"_template_hiddenUserHandle",n)}},t.prototype.destroy=function(){if(clearInterval(this.renderTimer),this.renderTimer=null,this.hRuler&&this.vRuler&&(this.hRuler.destroy(),this.vRuler.destroy()),this.tooltipObject.destroy(),this.droppable.destroy(),this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this),this.removeUserHandlesTemplate(),this.clearTemplate(),document.getElementById(this.element.id)){this.element.classList.remove("e-diagram");for(var t=document.getElementsByClassName("e-diagram-tooltip");t.length>0;)t[0].parentNode.removeChild(t[0]);var i=document.getElementById(this.element.id+"content");i&&this.element.removeChild(i);if(window.measureElement){window.measureElement.usageCount-=1;window.measureElementCount--,0===window.measureElementCount&&(window.measureElement.parentNode.removeChild(window.measureElement),window.measureElement=null)}}window.domTable={};for(var n=0;n<this.layers.length;n++){this.layers[n].zIndexTable={}}this.diagramActions=void 0},t.prototype.wireEvents=function(){var e=r.c.touchStartEvent,t=r.c.touchEndEvent,i=r.c.touchMoveEvent,n=r.c.isPointer?"pointerleave":"mouseleave",o=r.c.isPointer,a="mozilla"===r.c.info.name?o?"mousewheel":"DOMMouseScroll":"mousewheel";r.m.add(this.diagramCanvas,e,this.eventHandler.mouseDown,this.eventHandler),r.m.add(this.diagramCanvas,i,this.eventHandler.mouseMove,this.eventHandler),r.m.add(this.diagramCanvas,t,this.eventHandler.mouseUp,this.eventHandler),r.m.add(this.diagramCanvas,n,this.eventHandler.mouseLeave,this.eventHandler),r.m.add(this.diagramCanvas,"keydown",this.eventHandler.keyDown,this.eventHandler),r.m.add(this.diagramCanvas,"keyup",this.eventHandler.keyUp,this.eventHandler),r.m.add(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick,this.eventHandler),r.m.add(this.diagramCanvas,"scroll",this.eventHandler.scrolled,this.eventHandler),r.m.add(this.diagramCanvas,a,this.eventHandler.mouseWheel,this.eventHandler),r.m.add(window,"resize",this.eventHandler.windowResize,this.eventHandler),this.initDroppables()},t.prototype.unWireEvents=function(){var e=r.c.touchStartEvent,t=r.c.touchMoveEvent,i=r.c.isPointer?"pointerleave":"mouseleave",n=r.c.isPointer,o="mozilla"===r.c.info.name?n?"mousewheel":"DOMMouseScroll":"mousewheel",a=r.c.touchEndEvent;r.m.remove(this.diagramCanvas,e,this.eventHandler.mouseDown),r.m.remove(this.diagramCanvas,t,this.eventHandler.mouseMove),r.m.remove(this.diagramCanvas,a,this.eventHandler.mouseUp),r.m.remove(this.diagramCanvas,i,this.eventHandler.mouseLeave),r.m.remove(this.diagramCanvas,"keydown",this.eventHandler.keyDown),r.m.remove(this.diagramCanvas,"keyup",this.eventHandler.keyUp),r.m.remove(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick),r.m.remove(this.diagramCanvas,"scroll",this.eventHandler.scrolled),r.m.remove(this.diagramCanvas,o,this.eventHandler.mouseWheel),r.m.remove(window,"resize",this.eventHandler.windowResize)},t.prototype.select=function(e,t){if(Object(r.I)()){for(var i=0;i<e.length;i++)e[i]=this.nameTable[e[i].id];e=this.nameTable[e.id]||e}null!=e&&this.commandHandler.selectObjects(e,t)},t.prototype.selectAll=function(){var e;e=this.getObjectsOfLayer(this.activeLayer.objects),this.select(e)},t.prototype.unSelect=function(e){Object(r.I)()&&(this.commandHandler.oldSelectedObjects=uc(this.selectedItems),e=this.nameTable[e.id]||e),e&&od(this,e)&&(this.commandHandler.unSelect(e),this.commandHandler.updateBlazorSelector())},t.prototype.clearSelection=function(){this.commandHandler.clearSelection(!0)},t.prototype.updateViewPort=function(){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.eventHandler.updateViewPortSize(this.element),this.updateBlazorDiagramProperties(e,!0)},t.prototype.cutCommand=function(){this.cut()},t.prototype.cut=function(){this.commandHandler.cut()},t.prototype.addProcess=function(e,t){this.bpmnModule&&this.bpmnModule.addProcess(e,t,this)},t.prototype.removeProcess=function(e){this.bpmnModule&&this.bpmnModule.removeProcess(e,this)},t.prototype.pasteCommand=function(){this.paste()},t.prototype.paste=function(e){this.commandHandler.paste(e)},t.prototype.fitToPage=function(e){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.scroller.fitToPage(e),this.updateBlazorDiagramProperties(t,!0)},t.prototype.bringIntoView=function(e){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.scroller.bringIntoView(e),this.updateBlazorDiagramProperties(t,!0)},t.prototype.bringToCenter=function(e){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.scroller.bringToCenter(e),this.updateBlazorDiagramProperties(t,!0)},t.prototype.copyCommand=function(){this.copy()},t.prototype.copy=function(){return this.commandHandler.copy()},t.prototype.group=function(){this.callBlazorModel=!1,this.insertBlazorDiagramObjects(this.selectedItems),this.commandHandler.group(),this.callBlazorModel=!0,this.commandHandler.getBlazorOldValues()},t.prototype.unGroup=function(){this.callBlazorModel=!1,this.insertBlazorDiagramObjects(this.selectedItems),this.commandHandler.unGroup(),this.callBlazorModel=!0,this.commandHandler.getBlazorOldValues()},t.prototype.sendToBack=function(){this.commandHandler.sendToBack()},t.prototype.setActiveLayer=function(e){var t=this.commandHandler.getLayer(e);this.activeLayer=t},t.prototype.addLayer=function(e,t){this.commandHandler.addLayer(e,t)},t.prototype.addDiagramLayer=function(e,t){this.commandHandler.addLayer(e,t,!1)},t.prototype.removeLayer=function(e){this.commandHandler.removeLayer(e,Object(r.I)())},t.prototype.removeDiagramLayer=function(e){this.commandHandler.removeLayer(e,!1)},t.prototype.moveObjects=function(e,t){var i=uc(this.layers);this.enableServerDataBinding(!1),this.commandHandler.moveObjects(e,t);var n=this.commandHandler.deepDiffer.map(i,uc(this.layers)),r=this.commandHandler.deepDiffer.frameObject({},n);this.oldDiagramObject={layers:r},this.commandHandler.updateBlazorProperties()},t.prototype.layerObjectUpdate=function(){if(Object(r.I)()){this.enableServerDataBinding(!1),this.oldDiagramObject.layers=[];for(var e=0;e<this.layers.length;e++){var t=uc(this.layers[e]);t.sfIndex=this.layers[e].zIndex,this.oldDiagramObject.layers.push(t)}}},t.prototype.sendLayerBackward=function(e){this.layerObjectUpdate(),this.commandHandler.sendLayerBackward(e),this.commandHandler.updateLayerObject(this.oldDiagramObject,!0)},t.prototype.bringLayerForward=function(e){this.layerObjectUpdate(),this.commandHandler.bringLayerForward(e),this.commandHandler.updateLayerObject(this.oldDiagramObject)},t.prototype.cloneLayer=function(e){this.commandHandler.cloneLayer(e)},t.prototype.bringToFront=function(){this.commandHandler.bringToFront()},t.prototype.moveForward=function(){this.commandHandler.sendForward()},t.prototype.sendBackward=function(){this.commandHandler.sendBackward()},t.prototype.getObject=function(e){return this.nameTable[e]},t.prototype.getNodeObject=function(e){return uc(this.nameTable[e])},t.prototype.getConnectorObject=function(e){return uc(this.nameTable[e])},t.prototype.getActiveLayer=function(){return this.activeLayer},t.prototype.nudgeCommand=function(e,t,i){"object"!==typeof e&&(this.selectedItems.nodes.length||this.selectedItems.connectors.length)>0&&this.nudge(e)},t.prototype.nudge=function(e,t,i){var n=0,r=0;"Left"===e||"Right"===e?n=("Left"===e?-1:1)*(t||1):r=("Up"===e?-1:1)*(i||1);var o=this.selectedItems,a=this.selectedItems.wrapper.children[0];if(a instanceof Be)this.commandHandler.labelDrag(o.nodes[0],a,n,r);else{var s=uc(this.selectedItems);this.protectPropertyChange(!0),this.drag(o,n,r),this.protectPropertyChange(!1);var l={type:"PositionChanged",redoObject:uc(this.selectedItems),undoObject:s,category:"Internal"};this.addHistoryEntry(l)}this.refreshCanvasLayers()},t.prototype.insertBlazorDiagramObjects=function(e){if(Object(r.I)()&&!(this.blazorActions&Z.interaction)){if(this.enableServerDataBinding(!1),e instanceof Dl){for(var t=0;t<e.nodes.length;t++)this.insertBlazorDiagramObjects(e.nodes[t]);for(t=0;t<e.connectors.length;t++)this.insertBlazorDiagramObjects(e.connectors[t])}if(!(e instanceof Dl)){var i;if(e&&e.children&&e.children.length>0)for(t=0;t<e.children.length;t++)this.insertBlazorDiagramObjects(this.nameTable[e.children[t]]);i=uc(this.nameTable[e.id]),this.insertValue(i,!(Ps(e)===_r))}}},t.prototype.drag=function(e,t,i){if((this.insertBlazorDiagramObjects(e),Object(r.I)()&&e.id&&(e=this.nameTable[e.id]||e),this.bpmnModule&&e instanceof Pl)&&this.bpmnModule.updateAnnotationDrag(e,this,t,i))return;if(e instanceof Dl){if(this.preventConnectorsUpdate=!0,e.nodes&&e.nodes.length){for(var n=0,o=e.nodes;n<o.length;n++){var a=o[n];if(this.callBlazorModel=!1,this.drag(a,t,i),a.parentId){var s=this.nameTable[a.parentId];if(s.isLane)Go(s,this.nameTable[s.parentId],a,this)}}this.callBlazorModel=!0}if(e.connectors&&e.connectors.length){this.callBlazorModel=!1;for(var l=0,c=e.connectors;l<c.length;l++){var d=c[l];this.drag(d,t,i),-1===this.selectionConnectorsList.indexOf(d)&&this.selectionConnectorsList.push(d)}this.callBlazorModel=!0}this.updateSelector(),this.diagramActions&pe.DragUsingMouse&&this.updatePage()}else e instanceof Pl&&this.bpmnModule&&this.bpmnModule.updateAnnotationDrag(e,this,t,i),this.commandHandler.drag(e,t,i);if(e instanceof Dl){this.preventConnectorsUpdate=!1;for(var h=0,p=this.selectionConnectorsList;h<p.length;h++){var u=p[h];this.updateConnectorProperties(this.nameTable[u.id]),"Bpmn"===u.shape.type&&"Default"===u.shape.sequence&&this.commandHandler.updatePathElementOffset(u)}this.selectionConnectorsList=[]}this.diagramActions&pe.ToolAction||this.diagramActions&pe.DragUsingMouse||this.updateSelector(),!this.callBlazorModel||this.blazorActions&Z.interaction||this.blazorActions&Z.GroupClipboardInProcess||this.commandHandler.getBlazorOldValues()},t.prototype.disableStackContainerPadding=function(e,t){if(e instanceof Ws&&(e.considerPadding=t),e.children)for(var i=0,n=e.children;i<n.length;i++){var r=n[i];this.disableStackContainerPadding(r,!1)}},t.prototype.scale=function(e,t,i,n){this.disableStackContainerPadding(e.wrapper,!1),this.insertBlazorDiagramObjects(e);var r=!0;if(e.id&&(e=this.nameTable[e.id]||e),e instanceof Dl){if(e.nodes&&e.nodes.length){this.callBlazorModel=!1;for(var o=0,a=e.nodes;o<a.length;o++){var s=a[o];r=this.commandHandler.scale(s,t,i,n,e),this.commandHandler.checkBoundaryConstraints(void 0,void 0,e.wrapper.bounds)||this.commandHandler.scale(s,1/t,1/i,n,e)}this.callBlazorModel=!0}if(e.connectors&&e.connectors.length){this.callBlazorModel=!1;for(var l=0,c=e.connectors;l<c.length;l++){var d=c[l];this.commandHandler.scale(d,t,i,n,e),this.commandHandler.checkBoundaryConstraints(void 0,void 0,e.wrapper.bounds)||this.commandHandler.scale(d,1/t,1/i,n,e)}this.callBlazorModel=!0}this.updateSelector(),this.refreshCanvasLayers()}else this.commandHandler.scale(e,t,i,n,e.children?e:void 0);return!this.callBlazorModel||this.blazorActions&Z.interaction||this.blazorActions&Z.GroupClipboardInProcess||this.commandHandler.getBlazorOldValues(),this.disableStackContainerPadding(e.wrapper,!0),r},t.prototype.rotate=function(e,t,i){var n;if(this.insertBlazorDiagramObjects(e),e.id&&(e=this.nameTable[e.id]||e),e)if(i=i||{x:e.wrapper.offsetX,y:e.wrapper.offsetY},e instanceof Dl){this.callBlazorModel=!1,e.rotateAngle+=t,e.wrapper.rotateAngle+=t;var r=pc(e.wrapper);if(!(n=this.commandHandler.checkBoundaryConstraints(void 0,void 0,r)))return e.rotateAngle-=t,e.wrapper.rotateAngle-=t,n;var o=[];o=(o=o.concat(e.nodes)).concat(e.connectors),this.commandHandler.rotateObjects(e,o,t,i),this.callBlazorModel=!0}else this.commandHandler.rotateObjects(e,[e],t,i);return!this.callBlazorModel||this.blazorActions&Z.interaction||this.commandHandler.getBlazorOldValues(),n},t.prototype.dragSourceEnd=function(e,t,i){this.insertBlazorDiagramObjects(e),this.commandHandler.dragSourceEnd(e,t,i),this.callBlazorModel&&this.commandHandler.getBlazorOldValues()},t.prototype.dragTargetEnd=function(e,t,i){this.insertBlazorDiagramObjects(e),this.commandHandler.dragTargetEnd(e,t,i),this.callBlazorModel&&this.commandHandler.getBlazorOldValues()},t.prototype.findObjectsUnderMouse=function(e,t){return this.eventHandler.findObjectsUnderMouse(e,t)},t.prototype.findObjectUnderMouse=function(e,t,i){return this.eventHandler.findObjectUnderMouse(e,t,i)},t.prototype.findTargetObjectUnderMouse=function(e,t,i,n,r){return this.eventHandler.findTargetUnderMouse(e,t,i,n,r)},t.prototype.findElementUnderMouse=function(e,t,i){return this.eventHandler.findElementUnderMouse(e,t,i)},t.prototype.findActionToBeDone=function(e,t,i,n){return this.eventHandler.findActionToBeDone(e,t,i,n)},t.prototype.getTool=function(e){var t,i=Pc(this.getCustomTool);return i&&(t=i(e))?t:this.eventHandler.getTool(e)},t.prototype.getCursor=function(e,t){var i,n=Pc(this.getCustomCursor);if(n&&(i=n(e,t)))return i;if(this.customCursor.length)for(var r=0;r<this.customCursor.length;r++)if(this.customCursor[r].action===e)return this.customCursor[r].cursor;return this.eventHandler.getCursor(e)},t.prototype.initHistory=function(){this.undoRedoModule&&this.undoRedoModule.initHistory(this)},t.prototype.addHistoryEntry=function(e){if(this.undoRedoModule&&this.constraints&ae.UndoRedo&&!this.currentSymbol){if(e.undoObject&&"helper"===e.undoObject.id)return;this.undoRedoModule.addHistoryEntry(e,this),"StartGroup"!==e.type&&"EndGroup"!==e.type&&this.historyChangeTrigger(e,"CustomAction")}},t.prototype.addCustomHistoryEntry=function(e){Object(r.I)()&&this.undoRedoModule&&this.constraints&ae.UndoRedo&&(e.type=void 0,e.category="External",this.undoRedoModule.addHistoryEntry(e,this))},t.prototype.historyChangeTrigger=function(e,t){var i={},n=[];if("Internal"===e.category){switch(e&&e.redoObject&&e.redoObject.nodes instanceof Array&&e.redoObject.connectors instanceof Array?n=e.redoObject.nodes.concat(e.redoObject.connectors):e.redoObject&&n.push(e.redoObject),i.type=e.type,Object(r.I)()&&(i.entryType=e.type),e.type){case"PositionChanged":i.oldValue={offsetX:e.undoObject.offsetX,offsetY:e.undoObject.offsetY},i.newValue={offsetX:e.redoObject.offsetX,offsetY:e.redoObject.offsetY};break;case"RotationChanged":i.oldValue={rotateAngle:e.undoObject.rotateAngle},i.newValue={rotateAngle:e.redoObject.rotateAngle};break;case"SizeChanged":i.oldValue={offsetX:e.undoObject.offsetX,offsetY:e.undoObject.offsetY,width:e.undoObject.width,height:e.undoObject.height},i.newValue={offsetX:e.redoObject.offsetX,offsetY:e.redoObject.offsetY,width:e.redoObject.width,height:e.redoObject.height};break;case"CollectionChanged":i[e.changeType]=n;break;case"ConnectionChanged":i.oldValue={offsetX:e.undoObject.offsetX,offsetY:e.undoObject.offsetY},i.newValue={offsetX:e.redoObject.offsetX,offsetY:e.redoObject.offsetY}}var o=void 0;if(o={cause:e.category,source:Ls(n),change:Ls(i),action:t},Object(r.I)()){var a=(o={cause:e.category,change:Ls(i),source:{connectors:void 0,nodes:void 0},action:t}).source;a.connectors=[],a.nodes=[];for(var s=void 0,l=0;l<n.length;l++)s=Ls(n[l]),Ps(n[l])===_r?a.connectors.push(s):a.nodes.push(s);o.source=a}n.length&&this.triggerEvent(ve.historyChange,o)}},t.prototype.startGroupAction=function(){this.diagramActions&pe.UndoRedo||this.addHistoryEntry({type:"StartGroup",category:"Internal"})},t.prototype.endGroupAction=function(){this.diagramActions&pe.UndoRedo||this.addHistoryEntry({type:"EndGroup",category:"Internal"})},t.prototype.undo=function(){this.canEnableBlazorObject=!0,this.callBlazorModel=!1,this.undoRedoModule&&this.constraints&ae.UndoRedo&&this.undoRedoModule.undo(this),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},t.prototype.redo=function(){this.canEnableBlazorObject=!0,this.callBlazorModel=!1,this.undoRedoModule&&this.constraints&ae.UndoRedo&&this.undoRedoModule.redo(this),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},t.prototype.getBlazorDiagramObjects=function(e){if(e)for(var t=0;t<e.length;t++)this.insertBlazorDiagramObjects(e[t]);else this.insertBlazorDiagramObjects(this.selectedItems);this.callBlazorModel=!1,this.canEnableBlazorObject=!0},t.prototype.align=function(e,t,i){this.getBlazorDiagramObjects(t),t||(t=(t=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|pe.PublicMethod,this.commandHandler.align(t,e,i||"Object"),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},t.prototype.distribute=function(e,t){this.getBlazorDiagramObjects(t),t||(t=(t=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|pe.PublicMethod,this.commandHandler.distribute(t,e),this.commandHandler.getBlazorOldValues(),this.canEnableBlazorObject=!1,this.callBlazorModel=!0},t.prototype.sameSize=function(e,t){this.getBlazorDiagramObjects(t),t||(t=(t=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|pe.PublicMethod,this.commandHandler.sameSize(t,e),this.commandHandler.getBlazorOldValues(),this.canEnableBlazorObject=!1,this.callBlazorModel=!0},t.prototype.updateBlazorDiagramProperties=function(e,t){if(Object(r.I)()&&!t){this.enableServerDataBinding(!1);for(var i=0;i<e.length;i++)this.oldDiagramObject[e[i]]=uc(this[e[i]])}t&&this.commandHandler.getDiagramOldValues(this.oldDiagramObject,e)},t.prototype.getZoomingAttribute=function(){var e=[];return e.push("scrollSettings"),e.push("snapSettings"),e},t.prototype.zoom=function(e,t){var i=this.getZoomingAttribute();this.updateBlazorDiagramProperties(i),this.scroller.zoom(e,0,0,t),this.blazorActions&Z.interaction||this.updateBlazorDiagramProperties(i,!0)},t.prototype.zoomTo=function(e){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t);var i=e.zoomFactor?e.zoomFactor:.2;i="ZoomOut"===e.type?1/(1+i):1+i,this.scroller.zoom(i,0,0,e.focusPoint),this.updateBlazorDiagramProperties(t,!0)},t.prototype.pan=function(e,t,i){var n=this.getZoomingAttribute();this.updateBlazorDiagramProperties(n),this.setCursor("grabbing"),this.scroller.zoom(1,e,t,i),this.updateBlazorDiagramProperties(n,!0)},t.prototype.reset=function(){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.scroller.zoom(1/this.scroller.currentZoom,-this.scroller.horizontalOffset,-this.scroller.verticalOffset,{x:0,y:0}),this.updateBlazorDiagramProperties(e,!0)},t.prototype.resetSegments=function(){var e=[],t=[],i=[];if(Object(r.I)())for(var n=0,o=this.connectors;n<o.length;n++){var a=o[n];e.push(uc(a,void 0,void 0,!0))}if(this.constraints&ae.LineRouting&&this.lineRoutingModule)this.lineRoutingModule.lineRouting(this);else{this.protectPropertyChange(!0);for(var s=void 0,l=0;l<this.connectors.length;l++)(s=this.connectors[l]).segments=[],this.connectorPropertyChange(s,{},{segments:s.segments});this.protectPropertyChange(!1)}if(Object(r.I)()){for(var c=0,d=this.connectors;c<d.length;c++){a=d[c];t.push(uc(a,void 0,void 0,!0))}this.commandHandler.getObjectChanges(e,t,i);var h={nodes:[],connectors:i};if(window&&window.Blazor){a={methodName:"UpdateBlazorProperties",diagramobj:h};window.sfBlazor.updateBlazorProperties(a,this)}}},t.prototype.setBlazorDiagramProps=function(e){var t=this.getZoomingAttribute();e?this.updateBlazorDiagramProperties(t):this.updateBlazorDiagramProperties(t,!0)},t.prototype.triggerEvent=function(e,t){return eh(this,void 0,void 0,(function(){var i;return th(this,(function(n){switch(n.label){case 0:return t&&this.updateEventValue(t),[4,this.trigger(ve[e],t)];case 1:return i=n.sent(),Object(r.I)()&&"string"===typeof i&&(i=JSON.parse(i)),[2,i]}}))}))},t.prototype.updateEventValue=function(e){var t=e.element;e.element&&t instanceof Dl&&t.nodes.length+t.connectors.length===1&&(e.element=1===t.nodes.length?t.nodes[0]:t.connectors[0])},t.prototype.addNodeToLane=function(e,t,i){if(this.nameTable[t]){var n=this.nameTable[t];if(this.protectPropertyChange(!0),this.undoRedoModule&&this.historyManager.startGroupAction(),this.nameTable[e.id]||(e.offsetX=n.wrapper.bounds.width+n.wrapper.bounds.x,e.offsetY=n.wrapper.bounds.height+n.wrapper.bounds.y,e=this.add(e)),e.parentId="",n.shape.phases.length)for(var r=0;r<n.shape.phases.length;r++){l=t+i+r;if(this.nameTable[l]&&this.nameTable[l].isLane){var o=this.nameTable[l].wrapper.bounds,a={x:o.x+(o.x-n.wrapper.bounds.x+e.margin.left+e.wrapper.bounds.width/2),y:o.y+n.wrapper.bounds.y-e.margin.top};if("Horizontal"===n.shape.orientation)a.y=o.y;else{a.x=o.x;var s=this.nameTable[l].parentId+n.shape.lanes[0].id+"_0_header";a.y=o.y+(n.wrapper.bounds.y-this.nameTable[s].wrapper.bounds.height+e.margin.top+e.wrapper.bounds.height/2)}if(o.containsPoint(a)||l===t+i+(n.shape.phases.length-1)){Yo(this,this.nameTable[l],e,void 0,!0),Go(this.nameTable[l],n,e,this);break}}}else{var l=t+i+"0";this.nameTable[l]&&(Yo(this,this.nameTable[l],e,void 0,!0),Go(this.nameTable[l],n,e,this))}this.undoRedoModule&&this.historyManager.endGroupAction(),this.protectPropertyChange(!1)}this.updateDiagramElementQuad()},t.prototype.showTooltip=function(e){e&&e.id&&!e.wrapper&&(e=this.nameTable[e.id]);var t=pc(e.wrapper),i={x:0,y:0},n=e.tooltip.content?e.tooltip.content:"X:"+Math.round(t.x)+" Y:"+Math.round(t.y);e&&"Custom"===e.tooltip.openOn&&(i=e instanceof Pl?{x:e.offsetX+e.width/2,y:e.offsetY+e.height/2}:{x:e.targetPoint.x,y:e.targetPoint.x},this.commandHandler.showTooltip(e,i,n,"SelectTool",!0))},t.prototype.hideTooltip=function(e){e&&"Custom"===e.tooltip.openOn&&this.tooltipObject.close()},t.prototype.addNode=function(e,t){return this.add(e,t)},t.prototype.addChildToGroup=function(e,t){var i=this.allowServerDataBinding;this.enableServerDataBinding(!1);var n=this.isProtectedOnChange;this.protectPropertyChange(!0),e=this.getObject(e.id),Object(r.I)()&&this.insertValue(e,!0);var o=!(this.diagramActions&pe.UndoRedo)&&!(this.diagramActions&pe.Group)&&!(this.diagramActions&pe.PreventHistory);o&&this.startGroupAction();var a=this.addChild(e,t);if(o){var s={};s[a]=uc(this.getObject(a));var l={type:"AddChildToGroupNode",changeType:"Insert",undoObject:uc(e),redoObject:uc(e),category:"Internal",objectId:a,childTable:s};this.addHistoryEntry(l),this.endGroupAction()}this.protectPropertyChange(n),this.enableServerDataBinding(i),this.updateSelector(),Object(r.I)()&&o&&this.commandHandler.getBlazorOldValues()},t.prototype.getHistoryStack=function(e){var t,i=[];if(t=e?this.historyManager.undoStack:this.historyManager.redoStack,void 0!==this.historyManager.stackLimit){for(var n=t.length-1;n>=0;n--)if(i.push(t[n]),i.length>this.historyManager.stackLimit)return i}else i=t;return i},t.prototype.getEdges=function(e){return e.outEdge?this.nameTable[e.id].outEdges:this.nameTable[e.id].inEdges},t.prototype.getParentId=function(e){return this.nameTable[e].parentId},t.prototype.addConnector=function(e){return this.add(e)},t.prototype.UpdateBlazorDiagramModelCollection=function(e,t,i,n){if(!(this.blazorActions&Z.ClearObject)){if(window&&window.Blazor){var r=void 0,o=[],a=[],s=[],l=[];if(n&&!t)for(var c=0;c<this.blazorAddorRemoveCollection.length;c++)s.push(Ps(this.blazorAddorRemoveCollection[c])===_r?"Connector":"Node"),r=Ls(this.blazorAddorRemoveCollection[c]),a.push(r),l=this.blazorRemoveIndexCollection;else if(!this.isServerUpdate||i){this.isServerUpdate=!0;var d=Ls(e),h=void 0,p=[];if(!t){p=i||this.commandHandler.getChildren(e,[]);for(c=0;c<p.length;c++)d=Ls(p[c]),a.push(d),h=Ps(p[c])===_r?this.connectors.indexOf(p[c]):this.nodes.indexOf(p[c]),l.push(h),s.push(Ps(p[c])===_r?"Connector":"Node");i||(a.push(Ls(e)),l.push(this.nodes.indexOf(e)),s.push(Ps(e)===_r?"Connector":"Node"))}if(t&&t.length>0)for(c=0;c<t.length;c++){d=Ls(t[c]),t[c]instanceof Pl?a.push(d):o.push(d),s.push(Ps(t[c])===_r?"Connector":"Node")}this.isServerUpdate=!1}var u={methodName:"UpdateBlazorDiagramObjects",diagramobj:{nodeObj:JSON.stringify(a),ObjectType:s,removalIndex:t?void 0:l,isMultipleObjects:!0,annotationIndex:void 0,connectorObj:JSON.stringify(o)}};window.sfBlazor.updateBlazorProperties(u,this),n&&!t&&(this.blazorAddorRemoveCollection=[],this.blazorRemoveIndexCollection=[])}}},t.prototype.UpdateBlazorDiagramModel=function(e,t,i,n){if(!(this.blazorActions&Z.GroupClipboardInProcess)){if(window&&window.Blazor&&!this.isServerUpdate&&!(this.diagramActions&pe.Clear)){var r=Ls(e),o={methodName:"UpdateBlazorDiagramObjects",diagramobj:{nodeObj:JSON.stringify(r),ObjectType:t,removalIndex:i,isMultipleObjects:!1,annotationIndex:n,connectorObj:void 0}};window.sfBlazor.updateBlazorProperties(o,this)}}},t.prototype.UpdateBlazorLabelOrPortObjects=function(e,t,i,n){if(window&&window.Blazor&&e.length>0&&!this.isServerUpdate&&!(this.diagramActions&pe.Clear)){for(var r=[],o=[],a=[],s=0;s<e.length;s++)r.push(Ls(e[s])),o.push(t),a.push(n);var l={methodName:"UpdateBlazorDiagramObjects",diagramobj:{nodeObj:JSON.stringify(r),ObjectType:o,removalIndex:i,isMultipleObjects:!0,annotationIndex:a,connectorObj:null,portIndex:"Port"===t?a:[]}};window.sfBlazor.updateBlazorProperties(l,this)}},t.prototype.addBlazorDiagramObjects=function(){var e=[],t=[];if(this.dataBindingModule&&!(this.realActions&fe.PreventDataInit)){for(var i=0;i<this.nodes.length;i++)e.push(uc(this.nodes[i],void 0,void 0,!0));for(i=0;i<this.connectors.length;i++)t.push(uc(this.connectors[i],void 0,void 0,!0))}if(window&&window.Blazor){var n={methodName:"AddBlazorObjects",diagramobj:{nodeObj:JSON.stringify(e),isConnector:!1}};window.sfBlazor.updateBlazorProperties(n,this),n={methodName:"AddBlazorObjects",diagramobj:{nodeObj:JSON.stringify(t),isConnector:!0}},window.sfBlazor.updateBlazorProperties(n,this)}},t.prototype.removeNodeEdges=function(e,t,i){var n=this.nameTable[e],r=i?n.outEdges:n.inEdges;if(r.length>0)for(var o=0;o<r.length;o++)r[o]===t&&r.splice(o,1)},t.prototype.insertBlazorConnector=function(e){Object(r.I)()&&e instanceof _r&&(e.sourceID&&this.nameTable[e.sourceID]&&this.insertValue(uc(this.nameTable[e.sourceID]),!0),e.targetID&&this.nameTable[e.targetID]&&this.insertValue(uc(this.nameTable[e.targetID]),!0))},t.prototype.add=function(e,i){var n,o=this.isProtectedOnChange;if(this.protectPropertyChange(!0),e){var a=void 0;a={element:e=uc(e),cause:this.diagramActions,state:"Changing",type:"Addition",cancel:!1},this.parentObject&&(a.parentId=this.parentObject.id),Object(r.I)()&&(a=Cs(a,e,"Changing","Addition")),"helper"===e.id||this.diagramActions&pe.PreventCollectionChangeOnDragOver||this.triggerEvent(ve.collectionChange,a),a.cancel&&this.drawingObject&&(this.removeElements(a.element),this.tooltipObject.close(),Ps(a.element)===_r&&(a.element.sourceID&&this.removeNodeEdges(a.element.sourceID,a.element.id,!0),a.element.targetID&&this.removeNodeEdges(a.element.targetID,a.element.id,!1))),this.diagramActions=this.diagramActions|pe.PublicMethod,e.id=e.id||lc();var s=this.activeLayer;if(!a.cancel&&!s.lock){if(s.objects.indexOf(e.id)<0&&!s.lock&&(s.visible||(s.visible=!0,this.dataBind()),s.objects.push(e.id)),Ps(e)===_r)(n=new _r(this,"connectors",e,!0)).status="New",_a(n,e,this.connectorDefaults),this.connectors.push(n),this.initObject(n),Object(r.I)()&&(this.blazorActions&Z.GroupingInProgress?this.blazorAddorRemoveCollection.push(n):this.blazorAddorRemoveCollection.length>0?(this.isServerUpdate=!1,this.blazorAddorRemoveCollection.push(n),this.UpdateBlazorDiagramModelCollection(void 0,this.blazorAddorRemoveCollection,void 0,!0),this.blazorAddorRemoveCollection=[],this.commandHandler.getBlazorOldValues()):this.isServerUpdate||this.blazorActions&Z.GroupClipboardInProcess||(this.UpdateBlazorDiagramModel(n,"Connector"),this.commandHandler.getBlazorOldValues())),!1===e.visible&&this.updateElementVisibility(n.wrapper,n,e.visible),this.updateEdges(n),this.insertBlazorConnector(n);else{if(_a(n=new Pl(this,"nodes",e,!0),e,this.nodeDefaults),n.parentId=e.parentId,n.umlIndex=e.umlIndex,n.status="New",this.nodes.push(n),this.initObject(n,s,void 0,i),Object(r.I)()&&(this.blazorActions&Z.GroupingInProgress?this.blazorAddorRemoveCollection.push(n):this.blazorAddorRemoveCollection.length>0?(this.blazorAddorRemoveCollection.push(n),this.isServerUpdate=!1,this.UpdateBlazorDiagramModelCollection(void 0,this.blazorAddorRemoveCollection,void 0,!0),this.commandHandler.getBlazorOldValues(),this.blazorAddorRemoveCollection=[]):this.isServerUpdate||this.blazorActions&Z.GroupClipboardInProcess||(this.UpdateBlazorDiagramModel(n,"Node"),this.commandHandler.getBlazorOldValues())),this.updateTemplate(),this.bpmnModule){if(n.shape.annotations&&0!==n.shape.annotations.length)for(var l=0,c=this.bpmnModule.getTextAnnotationConn(n);l<c.length;l++){var d=c[l];this.initConnectors(d,s,!1)}n.shape.activity&&n.shape.activity.subProcess.processes&&n.shape.activity.subProcess.processes.length&&this.bpmnModule.updateDocks(n,this)}if(this.lineRoutingModule&&this.constraints&ae.LineRouting)for(var h=this.spatialSearch.findObjects(n.wrapper.outerBounds),p=0;p<h.length;p++){var u=h[p];u instanceof _r&&this.connectorPropertyChange(u,{},{sourceID:u.sourceID,targetID:u.targetID,sourcePortID:u.sourcePortID,targetPortID:u.targetPortID,sourcePoint:u.sourcePoint,targetPoint:u.targetPoint})}if(n.umlIndex>-1&&e.parentId&&this.nameTable[e.parentId]&&"UmlClassifier"===this.nameTable[e.parentId].shape.type){var f=this.nameTable[e.parentId];f.children.splice(n.umlIndex,0,n.id),f.wrapper.children.splice(n.umlIndex,0,n.wrapper),f.wrapper.measure(new P),f.wrapper.arrange(f.wrapper.desiredSize),this.updateDiagramObject(f)}}if(a={element:n,cause:this.diagramActions,state:"Changed",type:"Addition",cancel:!1},this.parentObject&&(a.parentId=this.parentObject.id),Object(r.I)()&&(a=Cs(a,e,"Changed","Addition")),"helper"===e.id||this.diagramActions&pe.PreventCollectionChangeOnDragOver||this.triggerEvent(ve.collectionChange,a),!(this.diagramActions&pe.UndoRedo)&&!(this.diagramActions&pe.Group)&&!(this.diagramActions&pe.PreventHistory)){var g={type:"CollectionChanged",changeType:"Insert",undoObject:uc(e),redoObject:uc(e),category:"Internal"};this.addHistoryEntry(g)}this.parentObject=void 0,"SVG"===this.mode&&(this.updateSvgNodes(n),this.updateTextElementValue(n),this.updateDiagramObject(n),n.shape.activity&&n.shape.activity.subProcess.processes&&n.shape.activity.subProcess.processes.length&&this.updateProcesses(n),this.updateBridging())}}this.protectPropertyChange(o),this.resetDiagramActions(pe.PublicMethod),n&&this.layers.length>1&&this.moveNode(n);for(var m=0,v=this.views;m<v.length;m++){var y=v[m],b=this.views[y];b instanceof t||this.refreshCanvasDiagramLayer(b)}return this.renderReactTemplates(),n},t.prototype.updateSvgNodes=function(e){if(e.children)for(var t=0,i=e.children;t<i.length;t++){var n=i[t];if(this.nameTable[n]&&this.nameTable[n].parentId){var r=Nl(n+"_groupElement",this.element.id);r&&r.parentNode.removeChild(r)}}},t.prototype.updateProcesses=function(e){if(this.bpmnModule&&e&&e.shape&&e.shape.activity&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length){var t=e.shape.activity.subProcess.processes;this.moveSvgNode(e.id);for(var i=0,n=t;i<n.length;i++){var r=n[i];this.moveSvgNode(r);for(var o=[],a=(o=o.concat(this.nameTable[r].outEdges,this.nameTable[r].inEdges)).length-1;a>=0;a--)this.moveSvgNode(o[a])}for(var s=0,l=t;s<l.length;s++){r=l[s];this.nameTable[r].shape.activity.subProcess.processes&&this.nameTable[r].shape.activity.subProcess.processes.length&&this.updateProcesses(this.nameTable[r])}}else this.moveSvgNode(e.id)},t.prototype.moveSvgNode=function(e){var t=Nl(e+"_groupElement",this.element.id),i=t.parentElement;t.parentNode.removeChild(t),i.appendChild(t)},t.prototype.addTextAnnotation=function(e,t){if(this.bpmnModule){var i=this.bpmnModule.addAnnotation(t,e,this);if(this.initConnectors(i,this.commandHandler.getObjectLayer(t.id),!1),this.updateDiagramObject(t),!(this.diagramActions&pe.UndoRedo)&&!(this.diagramActions&pe.Group)){var n={type:"CollectionChanged",changeType:"Insert",undoObject:uc(e),redoObject:uc(e),category:"Internal"};this.addHistoryEntry(n)}}},t.prototype.spliceConnectorEdges=function(e,t){var i,n,r=[];if(i=t?this.nameTable[e.sourceID]:this.nameTable[e.targetID]){for(var o=(r=t?i.outEdges:i.inEdges).length-1;o>=0;o--)r[o]===e.id&&r.splice(o,1);for(var a=0;i.ports&&a<i.ports.length;a++)n=!t,this.removePortEdges(i,i.ports[a].id,e.id,n)}},t.prototype.removeDependentConnector=function(e){for(var t,i=[],n=(i=i.concat(e.outEdges,e.inEdges)).length-1;n>=0;n--)(t=this.nameTable[i[n]])&&(this.connectorTable[t.id]=uc(t),this.remove(t))},t.prototype.removeObjectsFromLayer=function(e){if(e.children)for(var t=0;t<e.children.length;t++){var i=this.nameTable[e.children[t]];i&&this.removeObjectsFromLayer(i)}var n=this.layers.indexOf(this.commandHandler.getObjectLayer(e.id)),r=this.layers[n].objects.indexOf(e.id);r>-1&&(od(this,e)&&this.unSelect(e),this.layers[n].objects.splice(r,1),delete this.layers[n].zIndexTable[this.nameTable[e.id].zIndex])},t.prototype.removeElements=function(e){if("SVG"===this.mode||"Canvas"===this.mode&&"Native"===e.shape.type){var t=Nl(e.id+"_groupElement",this.element.id),i=e;if(i.ports&&i.ports.length>0)for(var n=0;n<i.ports.length;n++){var r=i.ports[n],o=Nl(i.id+"_"+r.id+"_groupElement",this.element.id);o&&o.parentNode.removeChild(o)}t&&t.parentNode.removeChild(t)}this.refreshCanvasLayers();var a,s=e.wrapper.children;if(s)for(n=0;n<s.length;n++){if(s[n]instanceof Ge||s[n].id&&s[n].id.indexOf("icon_content")>0){s[n].id.indexOf("icon_content")>0&&"SVG"===this.mode&&((a=Nl(s[n].id+"_shape_groupElement",this.element.id))&&a.parentNode.removeChild(a),(a=Nl(s[n].id+"_rect_groupElement",this.element.id))&&a.parentNode.removeChild(a));for(var l=0,c=this.views;l<c.length;l++){var d=c[l];ec(s[n].id+"_groupElement",d);var h=this.scroller.removeCollection.indexOf(e.id);this.scroller.removeCollection.splice(h,1)}}else if(s[n]instanceof dr)for(var p=0,u=this.views;p<u.length;p++){d=u[p];ec(e.id+"_html_element",d),ec(s[n].id+"_html_element",d),this.clearTemplate(["nodeTemplate_"+e.id]),s[n].annotationId&&this.clearTemplate(["annotationTemplate_"+e.id+s[n].annotationId])}ss(s[n].id)}},t.prototype.removeCommand=function(){this.remove()},t.prototype.remove=function(e){var t,i=[];i=i.concat(this.selectedItems.nodes,this.selectedItems.connectors);var n=!1;if(e){if(e=this.nameTable[e.id],this.insertBlazorConnector(e),e&&e.shape&&"SwimLane"===e.shape.type&&function(e,t){var i,n,r,o,a,s,l=t.wrapper.children[0].rows;for(n=0;n<l.length;n++)for(r=0;r<l[n].cells.length;r++){if((a=Ca(l[n].cells[r]))&&a.children)for(o=a.children.length-1;o>=0;o--)a.children[o].children&&(s=e.nameTable[a.children[o].id])&&(s.isLane?Pa(e,s):(e.removeDependentConnector(s),e.diagramActions|=pe.PreventHistory,s.constraints&ne.Delete?e.remove(s):Wo(e,s,{},!1),e.diagramActions&=~pe.PreventHistory));a&&(i=e.nameTable[a.id])&&Pa(e,i)}}(this,e),e&&(function(e){return e instanceof _r?e.constraints&te.Delete:e.constraints&ne.Delete}(e)||this.diagramActions&pe.Clear)&&(t={element:e,cause:this.diagramActions,state:"Changing",type:"Removal",cancel:!1},Object(r.I)()&&(t=Cs(t,e,"Changing","Removal")),this.diagramActions&pe.Clear||"helper"===e.id||this.triggerEvent(ve.collectionChange,t),!t.cancel)){if(this.bpmnModule&&this.bpmnModule.checkAndRemoveAnnotations(e,this))return void this.refreshCanvasLayers();if(!(this.diagramActions&pe.UndoRedo)&&!(this.diagramActions&pe.PreventHistory)&&(e instanceof Pl||e instanceof _r)){var o={type:"CollectionChanged",changeType:"Remove",undoObject:uc(e),redoObject:uc(e),category:"Internal"};this.diagramActions&pe.Clear||e.children&&!e.isLane&&!e.isPhase&&e.children.length>0&&this.undoRedoModule&&"None"===this.layout.type&&(this.historyManager.startGroupAction(),n=!0),e instanceof Pl&&this.removeDependentConnector(e),e.isLane||e.isPhase||this.diagramActions&pe.Clear||this.isStackChild(e)||this.addHistoryEntry(o)}!e.children||e.isLane||e.isPhase||Object(r.I)()&&this.diagramActions&pe.UndoRedo||this.deleteGroup(e),e.parentId&&(this.deleteChild(e),this.nameTable[e.parentId]&&"UmlClassifier"===this.nameTable[e.parentId].shape.type&&(this.updateDiagramObject(this.nameTable[e.parentId]),this.updateConnectorEdges(this.nameTable[e.parentId])));var a=void 0;this.diagramActions=this.diagramActions|pe.PublicMethod;var s=this.nameTable[e.id];if(s instanceof Pl){if("Bpmn"===s.shape.type&&this.bpmnModule&&this.bpmnModule.removeBpmnProcesses(s,this),s.isLane||s.isPhase||"SwimLane"===s.shape.type){(l=s.isLane||s.isPhase?this.nameTable[s.parentId]:this.nameTable[s.id]).wrapper.children[0];s.isLane?ja(this,s,l):s.isPhase&&Ea(this,s,l)}a=this.nodes.indexOf(s),Object(r.I)()&&"helper"!==e.id&&(this.blazorActions&Z.GroupingInProgress?(this.blazorRemoveIndexCollection.splice(0,0,a),this.blazorAddorRemoveCollection.splice(0,0,e)):this.blazorAddorRemoveCollection.length>0?(this.commandHandler.getBlazorOldValues(),this.blazorRemoveIndexCollection.splice(0,0,a),this.blazorAddorRemoveCollection.splice(0,0,e),this.UpdateBlazorDiagramModelCollection(void 0,void 0,void 0,!0)):this.isServerUpdate||this.blazorActions&Z.GroupClipboardInProcess||this.UpdateBlazorDiagramModel(e,"Node",a)),-1!==a&&(this.crudDeleteNodes.push(this.nameTable[s.id]),this.nodes.splice(a,1),this.updateNodeEdges(s))}else a=this.connectors.indexOf(s),Object(r.I)()&&(this.blazorActions&Z.GroupingInProgress?(this.blazorAddorRemoveCollection.splice(0,0,e),this.blazorRemoveIndexCollection.splice(0,0,a)):this.blazorAddorRemoveCollection.length>0?(this.commandHandler.getBlazorOldValues(),this.blazorAddorRemoveCollection.splice(0,0,e),this.blazorRemoveIndexCollection.splice(0,0,a),this.UpdateBlazorDiagramModelCollection(void 0,void 0,void 0,!0)):this.isServerUpdate||this.blazorActions&Z.GroupClipboardInProcess||this.UpdateBlazorDiagramModel(e,"Connector",a)),-1!==a&&(this.crudDeleteNodes.push(this.nameTable[s.id]),this.connectors.splice(a,1)),this.updateEdges(s),this.spliceConnectorEdges(e,!0),this.spliceConnectorEdges(e,!1);if(this.isServerUpdate||this.blazorActions&Z.GroupClipboardInProcess||this.commandHandler.getBlazorOldValues(),n&&this.historyManager.endGroupAction(),od(this,s)&&this.unSelect(s),!s.isPhase){if(this.removeObjectsFromLayer(e),this.currentDrawingObject&&(this.currentDrawingObject.wrapper=void 0),delete this.nameTable[e.id],i.length>0&&i[0].id===s.id&&s.parentId){var l,c=this.nameTable[s.parentId];if(c&&c.isLane&&"SwimLane"===this.nameTable[c.parentId].shape.type)Sa(this,l=this.nameTable[c.parentId],c,s)}this.removeElements(s),this.updateBridging(),"SVG"!==this.mode&&this.refreshDiagramLayer(),this.diagramActions&pe.Clear||(this.removeFromAQuad(s),t={element:e,cause:this.diagramActions,state:"Changed",type:"Removal",cancel:!1},Object(r.I)()&&(t=Cs(t,e,"Changed","Removal")),"helper"!==e.id&&this.triggerEvent(ve.collectionChange,t),this.resetTool())}}}else if(i.length>0){this.undoRedoModule&&(this.historyManager.startGroupAction(),this.blazorActions|=Z.GroupingInProgress,n=!0),Object(r.I)()&&i.length>1&&this.clearSelection();for(var d=0;d<i.length;d++){i[d];if(this.nameTable[i[d].id]){if(i[d]instanceof _r&&this.bpmnModule&&this.bpmnModule.textAnnotationConnectors.indexOf(i[d])>-1)return void this.remove(this.nameTable[i[d].targetID]);Object(r.I)()&&(!this.isServerUpdate&&i&&i.length>1&&(this.isServerUpdate=!0),i[d].parentId&&this.insertBlazorDiagramObjects(this.nameTable[i[d].parentId])),this.remove(i[d]),Object(r.I)()&&i[d].parentId&&(this.commandHandler.getBlazorOldValues(),this.isServerUpdate=!1)}}n&&(this.blazorActions&=~Z.GroupingInProgress,this.isServerUpdate=!0,this.commandHandler.getBlazorOldValues(),this.UpdateBlazorDiagramModelCollection(void 0,void 0,void 0,!0),this.historyManager.endGroupAction(),this.isServerUpdate=!1),this.clearSelection()}if(this.tooltipObject.close(),Object(r.I)()&&i&&i.length>0){for(var h=!0,p=0;p<i.length;p++)this.nameTable[i[p].id]&&(h=!1);h&&(this.isServerUpdate=!1)}},t.prototype.isStackChild=function(e){var t,i=this.nameTable[e.parentId];if(e&&e.parentId&&i.container&&"Stack"===i.container.type&&"UmlClassifier"!==this.nameTable[e.parentId].shape.type){t=!0;var n={type:"StackChildPositionChanged",redoObject:{sourceIndex:void 0,source:e,target:void 0,targetIndex:void 0},undoObject:{sourceIndex:i.wrapper.children.indexOf(e.wrapper),source:e,target:void 0,targetIndex:void 0},category:"Internal"};this.diagramActions&pe.UndoRedo||this.addHistoryEntry(n)}return t},t.prototype.deleteChild=function(e,t){var i;if(t=t?this.nameTable[t.id]:this.nameTable[e.parentId],i="string"===typeof e?e:e.id,t&&t.children){for(var n=0;n<t.children.length;n++)if(t.children[n]===i){t.children.splice(n,1);for(var r=0;r<t.wrapper.children.length;r++)t.wrapper.children[r].id===i&&t.wrapper.children.splice(r,1)}t.wrapper.measure(new P),t.wrapper.arrange(t.wrapper.desiredSize)}},t.prototype.addChild=function(e,t,i){var n,r=this.nameTable[e.id];if(r.children||(r.children=[]),r.children&&("string"===typeof t?this.nameTable[t]&&(n=t):(n=t.id=t.id||lc(),this.add(t)),n&&(!t.umlIndex||-1===t.umlIndex))){var o=this.nameTable[n];o.parentId=r.id,r.container&&"Stack"===r.container.type&&this.updateStackProperty(r,o),i?(r.children.splice(i,0,n),r.wrapper.children.splice(i,0,o.wrapper)):(r.children.push(n),r.wrapper.children.push(o.wrapper)),r.wrapper.measure(new P),r.wrapper.arrange(r.wrapper.desiredSize),r.isLane||(this.nameTable[e.id].width=r.wrapper.actualSize.width,this.nameTable[e.id].height=r.wrapper.actualSize.height,this.nameTable[e.id].offsetX=r.wrapper.offsetX,this.nameTable[e.id].offsetY=r.wrapper.offsetY),void 0!==r.container&&(o.offsetX=o.wrapper.offsetX,o.offsetY=o.wrapper.offsetY),(!r.parentId||this.nameTable[r.parentId]&&"SwimLane"!==this.nameTable[r.parentId].shape.type)&&this.updateDiagramObject(r)}return n},t.prototype.clear=function(){this.clearObjects()},t.prototype.clearObjects=function(e){var t=[];t=e||(t=t.concat(this.nodes)).concat(this.connectors),this.diagramActions=this.diagramActions|pe.Clear;for(var i=0,n=t;i<n.length;i++){var r=n[i];this.nameTable[r.id]&&this.remove(r)}this.diagramActions=this.diagramActions&~pe.Clear,this.spatialSearch=new Fd(this.nameTable),this.initHistory()},t.prototype.startEditCommad=function(){var e,t=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:void 0;if(t&&t instanceof Pl)if(t.isLane&&t.parentId)for(var i=this.nameTable[t.parentId],n=i.shape.lanes,r=t.id.slice(i.id.length),o=r.substring(0,r.length-1),a=0;a<n.length;a++)t.isLane&&o===n[a].id&&(e=this.nameTable[n[a].header.id]);else if("SwimLane"===t.shape.type&&t.shape.header&&t.shape.hasHeader){var s=t.wrapper.children[0].rows[0].cells[0].children[0].id;e=this.nameTable[s]}this.startTextEdit(e)},t.prototype.startTextEdit=function(e,t){if(!po(this)&&!ho(this)||co(this)){this.textEditing=!0;var i=this.scroller.transform,n=vo(this)?i.scale:1,o=void 0,a=void 0,s=void 0,l=void 0,c=void 0;if(e||(e=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:this.selectedItems.connectors[0]),e){if(Object(r.I)()){var d=uc(e);d.annotations.length>0&&this.insertValue(d,e instanceof Pl),e=this.nameTable[e.id]||e}e.shape&&"UmlClassifier"===e.shape.type&&(e=this.nameTable[e.children[0]]);var h=!1;if(this.bpmnModule&&(c=this.bpmnModule.getTextAnnotationWrapper(e,t))&&(e=this.nameTable[e.id.split("_textannotation_")[0]]),c?h=!0:("Text"!==e.shape.type&&0===e.annotations.length&&(e.constraints&ne.ReadOnly||(this.activeLabel.isGroup=!0,this.startGroupAction(),this.addLabels(e,[{id:lc(),content:""}]))),!t&&("Text"!==e.shape.type&&e.annotations.length>0||"Text"===e.shape.type)&&(t="Text"===e.shape.type?e.wrapper.children[0].id.split("_")[1]:e.annotations[0].id),t&&(c=this.getWrapper(e.wrapper,t))),e&&c&&!(c instanceof dr)&&(!function(e,t){var i;return i=t instanceof _r?te.ReadOnly:ne.ReadOnly,"Text"===t.shape.type?t.constraints&ne.ReadOnly:t.constraints&i?e.constraints&ie.InheritReadOnly?1:0:e.constraints&ie.ReadOnly?1:0}(c,e)||h)){var p=c.style,u=void 0;u=90>(u=c.bounds.width<e.wrapper.bounds.width?c.bounds.width:e.wrapper.bounds.width)?90:u;var f=document.getElementById(this.element.id+"_editTextBoxDiv"),g=document.getElementById(this.element.id+"_editBox");o=g?g.value:c.content,this.activeLabel.text=o,f||g||(f=Zl("div",{}),g=Zl("textarea",{}),this.diagramCanvas.appendChild(f),f.appendChild(g),g.appendChild(document.createTextNode(o))),(a=Ll(c.style,o,void 0,void 0,u)).isEmpty()&&(a="Text"!==e.shape.type?new P(fs(e,c.id.split(e.id+"_")[1]).width||50,c.style.fontSize):new P(e.width>50?50:e.width,c.style.fontSize)),e.parentId&&"UmlClassifier"===this.nameTable[e.parentId].shape.type?(a.width=e.wrapper.bounds.width-20,s=(e.wrapper.bounds.center.x+i.tx)*i.scale-a.width/2*n-2.5,l=(e.wrapper.bounds.center.y+i.ty)*i.scale-a.height/2*n-3,c.style.textAlign="Left"):(a.width=Math.max(a.width,50),s=(c.bounds.center.x+i.tx)*i.scale-a.width/2*n-2.5,l=(c.bounds.center.y+i.ty)*i.scale-a.height/2*n-3),rc(f,{id:this.element.id+"_editTextBoxDiv",style:"position: absolute;left:"+s+"px;top:"+l+"px;width:"+(a.width+1)*n+"px;height:"+a.height*n+"px; containerName:"+e.id+";"}),rc(g,{id:this.element.id+"_editBox",style:"width:"+(a.width+1)*n+"px;height:"+a.height*n+"px;resize: none;outline: none;overflow: hidden;;font-family:"+p.fontFamily+";font-size:"+p.fontSize*n+"px;text-align:"+c.style.textAlign.toLocaleLowerCase()+";",class:"e-diagram-text-edit"}),g.style.fontWeight=p.bold?"bold":"",g.style.fontStyle=p.italic?"italic":"",g.style.lineHeight=(1.2*p.fontSize+"px;").toString(),g.style.textDecoration=p.textDecoration?p.textDecoration:"",this.activeLabel.parentId=e.id,this.activeLabel.id=t,c.visible=!1,this.updateDiagramObject(e),this.diagramActions=this.diagramActions|pe.TextEdit,this.isTriggerEvent||(r.m.add(g,"input",this.eventHandler.inputChange,this.eventHandler),r.m.add(g,"focusout",this.focusOutEdit,this),g.select())}}}},t.prototype.updateConnectorfixedUserHandles=function(e){if(e.fixedUserHandles.length)for(var t=void 0,i=0,n=e.fixedUserHandles;i<n.length;i++){var r=n[i];t=this.getWrapper(e.wrapper,r.id),e.updateAnnotation(r,e.intermediatePoints,e.wrapper.bounds,t)}e.wrapper.measure(new P(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize)},t.prototype.updateNodeExpand=function(e,t){for(var i=0;i<e.outEdges.length;i++){var n=this.nameTable[e.outEdges[i]],r=this.nameTable[n.targetID];n.visible=t,t||(this.updateElementVisibility(n.wrapper,n,!1),r.isExpanded=t),this.updateNodeExpand(r,r.isExpanded),r.visible=t,t||this.updateElementVisibility(r.wrapper,r,!1)}},t.prototype.updateConnectorAnnotation=function(e){if(e.annotations.length)for(var t=void 0,i=0,n=e.annotations;i<n.length;i++){var r=n[i];t=this.getWrapper(e.wrapper,r.id),e.updateAnnotation(r,e.intermediatePoints,e.wrapper.bounds,t,this.diagramActions&pe.Interactions)}e.wrapper.measure(new P(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize)},t.prototype.removeChildrenFromLayout=function(e){for(var t,i=[],n=0;n<e.length;n++)(t=e[n]).parentId||t.processId||i.push(t);return i},t.prototype.doLayout=function(){var e,t=!1,i="ComplexHierarchicalTree"==this.layout.type||"HierarchicalTree"===this.layout.type,n=this.isProtectedOnChange;this.protectPropertyChange(!0);var o=this.removeChildrenFromLayout(this.nodes),a={x:this.scroller.viewPortWidth,y:this.scroller.viewPortHeight};if("None"!==this.layout.type){if(("DifferentPoint"===this.layout.connectionPointOrigin&&this.lineDistributionModule&&i||"Linear"===this.layout.arrangement)&&this.lineDistributionModule.initLineDistribution(this.layout,this),this.organizationalChartModule)e=this.organizationalChartModule.updateLayout(o,this.nameTable,this.layout,a,this.dataSourceSettings.id,this.diagramActions),t=!0,this.layoutAnimateModule&&e.rootNode&&!this.diagramActions&&this.updateNodeExpand(e.rootNode,e.rootNode.isExpanded);else if(this.mindMapChartModule)o&&o.length>0&&this.mindMapChartModule.updateLayout(o,this.nameTable,this.layout,a,this.dataSourceSettings.id,this.dataSourceSettings.root),t=!0;else if(this.radialTreeModule)this.radialTreeModule.updateLayout(o,this.nameTable,this.layout,a),t=!0;else if(this.symmetricalLayoutModule)this.symmetricalLayoutModule.maxIteration=this.layout.maxIteration,this.symmetricalLayoutModule.springLength=this.layout.springLength,this.symmetricalLayoutModule.springFactor=this.layout.springFactor,this.symmetricalLayoutModule.updateLayout(o,this.connectors,this.symmetricalLayoutModule,this.nameTable,this.layout,a),t=!0;else if(this.complexHierarchicalTreeModule){var s=this.complexHierarchicalTreeModule.getLayoutNodesCollection(this.nodes);s.length>0&&this.complexHierarchicalTreeModule.doLayout(s,this.nameTable,this.layout,a,this.lineDistributionModule),t=!0}if(t){this.preventDiagramUpdate=!0;var l={},c=o;Object(r.I)()&&this.updateTemplate();for(var d=0,h=c;d<h.length;d++){var p=h[d];if(this.preventNodesUpdate||this.diagramActions&&this.diagramActions&pe.PreventIconsUpdate||(this.updateIcon(p),this.updateDefaultLayoutIcons(p)),this.preventNodesUpdate=!0,this.nodePropertyChange(p,{},{offsetX:p.offsetX,offsetY:p.offsetY},!0),this.preventNodesUpdate=!1,p.wrapper.measure(new P(p.wrapper.width,p.wrapper.height)),p.wrapper.arrange(p.wrapper.desiredSize),this.updateDiagramObject(p,!0),p.inEdges.length>0)for(var u=0;u<p.inEdges.length;u++){l[(y=this.nameTable[p.inEdges[u]]).id]=y}if(p.outEdges.length>0)for(var f=0;f<p.outEdges.length;f++){var g=this.nameTable[p.outEdges[f]];l[g.id]=g}}for(var m=0,v=Object.keys(l);m<v.length;m++){var y;cs(y=l[v[m]],this.getPoints(y)),"Bpmn"===y.shape.type&&"Default"===y.shape.sequence&&this.commandHandler.updatePathElementOffset(y),y.wrapper.measure(new P(void 0,void 0)),y.wrapper.arrange(y.wrapper.desiredSize),this.updateConnectorAnnotation(y),this.updateConnectorfixedUserHandles(y),this.updateQuad(y),this.updateDiagramObject(y,!0)}"DifferentPoint"===this.layout.connectionPointOrigin&&this.lineDistributionModule&&i&&this.lineDistributionModule.distributeLines(this.layout,this),this.preventDiagramUpdate=!1,this.updatePage(),this.diagramActions&pe.Render&&"Canvas"!==this.mode||this.refreshDiagramLayer()}n||this.protectPropertyChange(n)}return t&&this.updateDiagramElementQuad(),this.blazorActions&Z.expandNode?e:!Object(r.I)()||null},t.prototype.saveDiagram=function(){return $a(this)},t.prototype.loadDiagram=function(e){return ts(e,this)},t.prototype.getDiagramContent=function(e){return this.printandExportModule?this.printandExportModule.getDiagramContent(e):""},t.prototype.exportImage=function(e,t){this.printandExportModule&&this.printandExportModule.exportImages(e,t)},t.prototype.printImage=function(e,t){this.printandExportModule&&(t.printOptions=!0,this.printandExportModule.exportImages(e,t))},t.prototype.setStackLimit=function(e){this.undoRedoModule&&e&&(this.historyManager.stackLimit=e,this.undoRedoModule.applyLimit(this.historyManager.currentEntry,e,this,!0))},t.prototype.clearHistory=function(){this.undoRedoModule&&this.undoRedoModule.clearHistory(this)},t.prototype.getDiagramBounds=function(){if(this.printandExportModule){var e=this.printandExportModule.getDiagramBounds("",{});return e.width=e.width>this.scrollSettings.viewPortWidth?e.width+(e.x>0?e.x:0):this.scrollSettings.viewPortWidth,e.height=e.height>this.scrollSettings.viewPortHeight?e.height+(e.y>0?e.y:0):this.scrollSettings.viewPortHeight,e.x=e.x>0?0:e.x,e.y=e.y>0?0:e.y,e}return new _},t.prototype.exportDiagram=function(e){return this.printandExportModule?this.printandExportModule.exportDiagram(e):""},t.prototype.print=function(e){this.printandExportModule&&this.printandExportModule.print(e)},t.prototype.addPorts=function(e,t){this.protectPropertyChange(!0);var i,n=[],o=!0;Object(r.I)()&&null!==e&&e.ports.length>0&&!(this.diagramActions&pe.UndoRedo)&&(-1!==Number(vs(e,t[0].id,!1))&&(o=!1));e=this.nameTable[e.id]||e,t.length>1&&this.startGroupAction();for(var a=0;a<t.length;a++){if(i=new $e(e,"ports",t[a],!0),e.ports.push(i),Object(r.I)()&&o&&n.push(i),e.children){var s=e.wrapper;e.initPort(this.getDescription,e.wrapper.children[s.children.length-1],i)}else{e.wrapper.children.push(e.initPortWrapper(e.ports[e.ports.length-1]))}if(!(this.diagramActions&pe.UndoRedo)&&!(this.diagramActions&pe.Group)){var l={type:"PortCollectionChanged",changeType:"Insert",undoObject:uc(i),redoObject:uc(e),category:"Internal"};this.addHistoryEntry(l)}}t.length>1&&this.endGroupAction(),Object(r.I)()&&o&&this.UpdateBlazorLabelOrPortObjects(n,"Port",void 0,this.nodes.indexOf(e)),e.wrapper.measure(new P(e.width,e.height)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateDiagramObject(e),this.protectPropertyChange(!1)},t.prototype.addConstraints=function(e,t){return e|t},t.prototype.removeConstraints=function(e,t){return e&~t},t.prototype.addNodeLabels=function(e,t){this.addLabels(e,t)},t.prototype.addConnectorLabels=function(e,t){this.addLabels(e,t)},t.prototype.addLabels=function(e,t){this.protectPropertyChange(!0);var i=!0,n=[];Object(r.I)()&&null!=e&&e.annotations.length>0&&!(this.diagramActions&pe.UndoRedo)&&(-1!==Number(vs(e,t[0].id,!0))&&(i=!1));var o,a=(e=this.nameTable[e.id]||e).wrapper;t.length>1&&this.startGroupAction();for(var s=0;s<t.length;s++){if(e instanceof Pl)if(o=new nt(e,"annotations",t[s],!0),e.annotations.push(o),Object(r.I)()&&i&&n.push(o),e.children)for(var l=e,c=0;c<l.wrapper.children.length;c++){if(l.wrapper.children[c].id===l.id+"group_container")l.wrapper.children[c].children.push(e.initAnnotationWrapper(e.annotations[e.annotations.length-1],this.element.id))}else a.children.push(e.initAnnotationWrapper(e.annotations[e.annotations.length-1],this.element.id));else if(e instanceof _r){o=new rt(e,"annotations",t[s],!0),e.annotations.push(o),Object(r.I)()&&i&&n.push(o);var d=a.children[0],h=new _(d.offsetX-d.width/2,d.offsetY-d.height/2,d.width,d.height);a.children.push(e.getAnnotationElement(e.annotations[e.annotations.length-1],e.intermediatePoints,h,this.getDescription,this.element.id))}if(!(this.diagramActions&pe.UndoRedo)&&!(this.diagramActions&pe.Group)){var p={type:"LabelCollectionChanged",changeType:"Insert",undoObject:uc(o),redoObject:uc(e),category:"Internal"};this.addHistoryEntry(p)}}t.length>1&&this.endGroupAction(),Object(r.I)()&&i&&this.UpdateBlazorLabelOrPortObjects(n,e instanceof Pl?"NodeAnnotation":"ConnectorAnnotation",void 0,e instanceof Pl?this.nodes.indexOf(e):this.connectors.indexOf(e)),e.wrapper.measure(new P(a.width,a.height)),e.wrapper.arrange(a.desiredSize),this.updateDiagramObject(e),this.protectPropertyChange(!1)},t.prototype.addLanes=function(e,t,i){e=this.nameTable[e.id]||e;for(var n=0;n<t.length;n++)ma(this,e,t[n],i),void 0!==i&&(i+=1);this.updateDiagramElementQuad()},t.prototype.addPhases=function(e,t){e=this.nameTable[e.id]||e;for(var i=0;i<t.length;i++)ya(this,e,t[i]);this.updateDiagramElementQuad()},t.prototype.removeLane=function(e,t){ja(this,void 0,e,t),this.updateDiagramElementQuad()},t.prototype.removePhase=function(e,t){Ea(this,void 0,e,t),this.updateDiagramElementQuad()},t.prototype.removelabelExtension=function(e,t,i,n){for(var r=0;r<n.children.length;r++){var o=n.children[r];if((o instanceof Be||o instanceof dr)&&o.id.match("_"+t[i].id+"$")){for(var a=0;a<e.annotations.length;a++)if(o.id.match("_"+e.annotations[a].id+"$")){if(!(this.diagramActions&pe.UndoRedo)){var s={type:"LabelCollectionChanged",changeType:"Remove",undoObject:uc(e.annotations[a]),redoObject:uc(e),category:"Internal"};this.addHistoryEntry(s)}e.annotations.splice(a,1)}if(n.children.splice(r,1),"SVG"===this.mode){var l=Nl(o.id,this.element.id);if(l){var c=Nl(o.id,this.element.id);c.parentNode.removeChild(c)}Nl(o.id+"_text",this.element.id)&&(l=Nl(o.id+"_text",this.element.id)).parentNode.removeChild(l);var d=Nl(o.id+"_html_element",this.element.id);d&&d.parentNode.removeChild(d)}else this.refreshCanvasLayers()}}},t.prototype.removeLabels=function(e,t){var i=!0;!Object(r.I)()||null===e||this.diagramActions&pe.UndoRedo||-1===(s=e.annotations.length>0?Number(vs(e,t[0].id,!0)):-1)&&(i=!1);if(e=this.nameTable[e.id]||e,Object(r.I)()&&i){for(var n=[],o=[],a=0;a<t.length;a++){var s=Number(vs(e,t[a].id,!0));o.push(s),n.push(t[a])}this.UpdateBlazorLabelOrPortObjects(n,e instanceof Pl?"NodeAnnotation":"ConnectorAnnotation",o,e instanceof Pl?this.nodes.indexOf(e):this.connectors.indexOf(e))}t.length>1&&this.startGroupAction();for(a=t.length-1;a>=0;a--)if(e.children&&e.children.length>0)for(var l=0;l<e.wrapper.children.length;l++)this.removelabelExtension(e,t,a,e.wrapper.children[l]);else this.removelabelExtension(e,t,a,e.wrapper);t.length>1&&this.endGroupAction()},t.prototype.removePortsExtenion=function(e,t,i,n){for(var r=0;r<n.children.length;r++){var o=n.children[r];if(o instanceof Ue&&o.id.match("_"+t[i].id+"$")){for(var a=0;a<e.ports.length;a++)if(o.id.match("_"+e.ports[a].id+"$")){if(!(this.diagramActions&pe.UndoRedo)){var s={type:"PortCollectionChanged",changeType:"Remove",undoObject:uc(e.ports[a]),redoObject:uc(e),category:"Internal"};this.addHistoryEntry(s)}e.ports.splice(a,1)}if(n.children.splice(r,1),"SVG"===this.mode){var l=Nl(o.id,this.element.id);l.parentNode.removeChild(l)}else this.refreshCanvasLayers()}}},t.prototype.removePorts=function(e,t){var i=!0;!Object(r.I)()||null===e||this.diagramActions&pe.UndoRedo||-1===(s=e.ports.length>0?Number(vs(e,t[0].id,!1)):-1)&&(i=!1);if(e=this.nameTable[e.id]||e,Object(r.I)()&&i){for(var n=[],o=[],a=t.length-1;a>=0;a--){var s=Number(vs(e,t[a].id,!1));n.push(s),o.push(t[a])}this.UpdateBlazorLabelOrPortObjects(o,"Port",n,this.nodes.indexOf(e))}t.length>1&&this.startGroupAction();for(a=t.length-1;a>=0;a--)if(e.children&&e.children.length>0)for(var l=0;l<e.wrapper.children.length;l++)this.removePortsExtenion(e,t,a,e.wrapper.children[l]);else this.removePortsExtenion(e,t,a,e.wrapper);t.length>1&&this.endGroupAction()},t.prototype.getSizeValue=function(e,t){var i;if(i=e.toString().indexOf("px")>0?e.toString():e.toString().indexOf("%")>0?void 0!==t?"100%":e.toString():e.toString()+"px",t){Yr(this);i="calc("+i+" - "+t+"px)"}return i},t.prototype.renderRulers=function(){this.rulerSettings.showRulers?(!function(e){var t=Yr(e),i=Zl("div",{id:e.element.id+"_overlapRuler",style:"height:"+t.height+"px;width:"+t.width+"px;position:absolute;left:0;top:0",class:"e-ruler-overlap"});e.element.insertBefore(i,e.element.firstChild)}(this),qr(this,!0),qr(this,!1)):Vr(this)},t.prototype.intOffPageBackground=function(){var e=new P;e=Yr(this);var t=document.getElementById(this.element.id+"content"),i=this.getSizeValue(this.width,e.width),n=this.getSizeValue(this.height,e.height),r=this.rulerSettings.showRulers?"width:"+i+"; height:"+n+";top:"+e.height+"px;left:"+e.width+"px;overflow: scroll;position:absolute;overflow:auto;":"width:"+i+"; height:"+n+";position:absolute; left:0px;  top:0px;overflow: auto;",o={id:this.element.id+"content",tabindex:"0",style:r};t?(this.diagramCanvas=t,nc(this.diagramCanvas,r)):(this.diagramCanvas=Zl("div",o),this.element.appendChild(this.diagramCanvas)),this.diagramCanvas.style.background=this.backgroundColor},t.prototype.initDiagram=function(){this.intOffPageBackground(),rc(this.element,{style:"width:"+this.getSizeValue(this.width)+"; height:"+this.getSizeValue(this.height)+";position:relative;overflow:hidden;"})},t.prototype.renderHiddenUserHandleTemplateLayer=function(e){var t;t=Zl("div",{class:this.element.id+"_hiddenUserHandleTemplate",style:"width:"+e.width+"px; height:"+e.height+"px;visibility:hidden ;  overflow: hidden;"}),this.element.appendChild(t)},t.prototype.renderBackgroundLayer=function(e,t){var i=this.createSvg(this.element.id+"_backgroundLayer_svg",e.width,e.height);nc(i,t);var n=Jl("g",{id:this.element.id+"_backgroundImageLayer",class:"e-background-image-layer"});i.appendChild(n);var r=Jl("g",{id:this.element.id+"_backgroundLayer",class:"e-background-layer"});i.appendChild(r),this.diagramCanvas.appendChild(i)},t.prototype.renderGridLayer=function(e,t){var i=this.createSvg(this.element.id+"_gridline_svg",e.width,e.height);i.setAttribute("class","e-grid-layer");var n=Jl("g",{id:this.element.id+"_gridline",width:"100%",height:"100%"}),r=Jl("rect",{id:this.element.id+"_grid_rect",x:"0",y:"0",width:"100%",height:"100%"});Rs()?r.setAttribute("fill","url("+location.protocol+"//"+location.host+location.pathname+"#"+this.element.id+"_pattern)"):r.setAttribute("fill","url(#"+this.element.id+"_pattern)"),n.appendChild(r),i.appendChild(n),this.diagramCanvas.appendChild(i),ic(i,{style:t})},t.prototype.renderDiagramLayer=function(e,t){var i={id:this.element.id+"_diagramLayer_div",style:"width:"+e.width+"px; height:"+e.height+"px;"+t};if(this.diagramLayerDiv=Zl("div",i),"SVG"===this.mode){var n=this.createSvg(this.element.id+"_diagramLayer_svg",e.width,e.height);n.style["pointer-events"]="none",n.setAttribute("class","e-diagram-layer");var r=Jl("g",{id:this.element.id+"_diagramLayer"}),o=Jl("g",{});this.diagramLayer=r,n.style["pointer-events"]="all",o.appendChild(r),n.appendChild(o),this.diagramLayerDiv.appendChild(n)}else this.diagramLayer=jc.createCanvas(this.element.id+"_diagram",e.width,e.height),nc(this.diagramLayer,"position:absolute;left:0px;top:0px;"),this.diagramLayerDiv.appendChild(this.diagramLayer);this.diagramCanvas.appendChild(this.diagramLayerDiv)},t.prototype.initLayers=function(){var e="position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",t=document.getElementById(this.element.id).getBoundingClientRect(),i=function(){var e=Zl("div",{style:"visibility:hidden; width: 100px"});document.body.appendChild(e);var t=e.getBoundingClientRect().width;e.style.overflow="scroll";var i=Zl("div",{style:"width:100%"});e.appendChild(i);var n=i.getBoundingClientRect().width;return e.parentNode.removeChild(e),t-n}();this.scroller.scrollerWidth=i,this.scroller.setViewPortSize(t.width,t.height),this.renderRulers();window.measureElement&&(window.measureElement=null,document.getElementById("measureElement").remove());oc(),this.renderBackgroundLayer(t,e),this.renderGridLayer(t,e),this.renderDiagramLayer(t,e),this.renderHTMLLayer(t,e),this.renderPortsExpandLayer(t,e),this.renderNativeLayer(t,e),this.renderAdornerLayer(t,e),this.renderHiddenUserHandleTemplateLayer(t)},t.prototype.renderAdornerLayer=function(e,t){var i=Zl("div",{id:this.element.id+"_diagramAdornerLayer",style:"width:"+e.width+"px;height:"+e.height+"px;"+t}),n=Zl("div",{id:this.element.id+"_diagramUserHandleLayer",style:"width:"+e.width+"px;height:"+e.height+"px;"+t});n.setAttribute("class","e-userHandle-layer"),i.appendChild(n);var r=this.createSvg(this.element.id+"_diagramAdorner_svg",e.width,e.height);r.setAttribute("class","e-adorner-layer"),r.style["pointer-events"]="none",this.adornerLayer=Jl("g",{id:this.element.id+"_diagramAdorner"}),this.adornerLayer.style[" pointer-events"]="all",r.appendChild(this.adornerLayer),i.appendChild(r),this.diagramCanvas.appendChild(i);var o=Jl("g",{id:this.element.id+"_SelectorElement"});this.adornerLayer.appendChild(o),ic(r,{style:"pointer-events:none;"})},t.prototype.renderPortsExpandLayer=function(e,t){var i=this.createSvg(this.element.id+"_diagramPorts_svg",e.width,e.height);i.setAttribute("class","e-ports-expand-layer");var n=Jl("g",{id:this.element.id+"_diagramPorts",class:"e-ports-layer",style:"pointer-events: all;"});i.appendChild(n);var r=Jl("g",{id:this.element.id+"_diagramExpander",class:"e-expand-layer",style:"pointer-events: all;"});i.appendChild(r),this.diagramCanvas.appendChild(i),ic(i,{style:t})},t.prototype.renderHTMLLayer=function(e,t){this.htmlLayer=Zl("div",{id:this.element.id+"_htmlLayer",style:"width:"+e.width+"px; height:"+e.height+"px;position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",class:"e-html-layer"});var i=Zl("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;pointer-events:all;"});this.htmlLayer.appendChild(i),this.diagramCanvas.appendChild(this.htmlLayer)},t.prototype.renderNativeLayer=function(e,t){var i=this.createSvg(this.element.id+"_nativeLayer_svg",e.width,e.height),n=Jl("g",{id:this.element.id+"_nativeLayer",style:"pointer-events:all;"});i.appendChild(n),this.diagramLayerDiv.appendChild(i),ic(i,{class:"e-native-layer",style:t})},t.prototype.createSvg=function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return ic(n,{id:e,width:t,height:i}),n},t.prototype.updateBazorShape=function(){for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e];switch(t.shape.type){case"Bpmn":t.shape.bpmnShape=t.shape.shape?t.shape.shape:t.shape.bpmnShape;break;case"UmlActivity":t.shape.umlActivityShape=t.shape.shape?t.shape.shape:t.shape.umlActivityShape;break;case"Flow":t.shape.flowShape=t.shape.shape?t.shape.shape:t.shape.flowShape;break;case"Basic":t.shape.basicShape=t.shape.shape?t.shape.shape:t.shape.basicShape;break;case"Text":t.shape.textContent=t.shape.content?t.shape.content:t.shape.textContent}}},t.prototype.initObjects=function(e){this.updateBazorShape(),this.isLoading||this.initData(),this.initLayerObjects(),this.updateBridging(e)},t.prototype.initLayerObjects=function(){var e=this.layers.length>1,t=[],i=window&&window.Blazor&&!this.dataSourceSettings.dataSource,n={},o={},a=[],s=[],l=[],c=[],d=[],h=[],p=[];Object(r.I)()&&i&&(s=this.previousNodeCollection,l=this.previousConnectorCollection);for(var u=0,f=this.nodes;u<f.length;u++){(P=f[u]).id=P.id||lc(),this.addToLayer(P,e),n[P.id]=P}for(var g=0,m=this.connectors;g<m.length;g++){(P=m[g]).id=P.id||lc(),this.addToLayer(P,e),n[P.id]=P}for(var v=0,y=this.layers;v<y.length;v++){for(var b=0,w=(A=y[v]).objects;b<w.length;b++){if(n[P=w[b]])if(n[P]instanceof _r)if((M=n[P]).sourceID&&M.targetID){var x=n[M.sourceID],O=n[M.targetID];x&&x.wrapper&&O&&O.wrapper?this.initConnectors(n[P],A):t.push(n[P])}else this.initConnectors(n[P],A);else n[P].children?a.push(P):n[P].shape instanceof fl&&n[P].shape.activity.subProcess.processes&&n[P].shape.activity.subProcess.processes.length>0?o[n[P].id]=P:this.initNodes(n[P],A)}if(this.bpmnModule)for(var S=0,C=this.bpmnModule.textAnnotationConnectors;S<C.length;S++){var P=C[S];this.initConnectors(P,A,!1)}}for(var j=0,I=Object.keys(o);j<I.length;j++){P=I[j];this.initObject(n[P]),this.bpmnModule.updateDocks(n[P],this)}for(var E=0,T=this.alignGroup(a,n);E<T.length;E++){P=T[E];var A=this.commandHandler.getObjectLayer(P);this.initNodes(n[P],A)}for(var D=0,k=t;D<k.length;D++){var M=k[D];A=this.commandHandler.getObjectLayer(M.id);this.initConnectors(M,A)}if(Object(r.I)()&&i){for(var L=0,R=this.nodes;L<R.length;L++){P=R[L];c.push(uc(P,void 0,void 0,!0))}for(var z=0,N=this.connectors;z<N.length;z++){P=N[z];d.push(uc(P,void 0,void 0,!0))}if(this.commandHandler.getObjectChanges(s,c,h),this.commandHandler.getObjectChanges(l,d,p),!(this.blazorActions&Z.ClearObject)){P={methodName:"UpdateBlazorProperties",diagramobj:{nodes:h,connectors:p}};window.sfBlazor.updateBlazorProperties(P,this)}}},t.prototype.alignGroup=function(e,t){var i,n,r,o,a=[],s=[];for(r=0;r<e.length;r++){var l=void 0;if((n=t[i=e[r]])&&n.children.length)for(o=0;o<n.children.length;o++)l=n.children[o],e.indexOf(l)>-1&&-1===a.indexOf(l)&&-1===s.indexOf(l)&&a.splice(0,0,l);-1===a.indexOf(i)&&s.push(i)}return a=a.concat(s)},t.prototype.addToLayer=function(e,t){var i;t&&(i=this.commandHandler.getObjectLayer(e.id)),t&&i||-1===this.activeLayer.objects.indexOf(e.id)&&this.activeLayer.objects.push(e.id),this.setZIndex(i||this.activeLayer,e)},t.prototype.updateLayer=function(e){for(var t=0,i=Object.keys(e.layers);t<i.length;t++){for(var n=i[t],r=0,o=this.layers[n].objects;r<o.length;r++){var a=o[r],s=this.nameTable[a];void 0!==e.layers[n].visible?this.updateElementVisibility(s.wrapper,s,e.layers[n].visible):!0===e.layers[n].lock&&this.unSelect(s)}void 0!==e.layers[n].lock&&(this.layers[n].lock=e.layers[n].lock)}"SVG"!==this.mode&&this.refreshDiagramLayer()},t.prototype.updateScrollSettings=function(e){var t=-this.scroller.horizontalOffset+e.scrollSettings.horizontalOffset||0,i=this.scroller.verticalOffset-e.scrollSettings.verticalOffset||0,n={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom};0===t&&0===i||this.pan(t,i);var o={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom},a="Start";this.realActions&fe.PanInProgress&&(a="Progress");var s={oldValue:n,newValue:o,source:this,panState:a};Object(r.I)()&&this.scrollChange&&(s={oldValue:n,newValue:o,sourceId:this.element.id,panState:a}),this.triggerEvent(ve.scrollChange,s),this.commandHandler.updatePanState(!0),"Canvas"===this.mode&&this.constraints&ae.Virtualization&&this.refreshDiagramLayer()},t.prototype.initData=function(){var e=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource;if(this.dataBindingModule&&!(this.realActions&fe.PreventDataInit))if(e&&this.dataSourceSettings.connectionDataSource.dataManager){var t=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource;this.nodes=this.generateData(t,!0),this.connectors=this.generateData(this.dataSourceSettings.connectionDataSource.dataManager,!1)}else e&&e.dataSource&&(e.dataSource.url||"BlazorAdaptor"===e.adaptorName&&!e.dataSource.url)?this.dataBindingModule.initSource(this.dataSourceSettings,this):this.dataBindingModule.initData(this.dataSourceSettings,this)},t.prototype.generateData=function(e,t){var i,n=[];for(i=0;i<e.length;i++){var r=e[i],o=t?this.makeData(r,!0):this.makeData(r,!1);!o||!o.id||Da(n,o.id)&&Da(n,o.id)||n.push(o)}return n},t.prototype.makeData=function(e,t){var i,n=t?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource,r={};if(r.id=e[n.id]?e[n.id]:lc(),n.sourceID&&(r.sourceID=e[n.sourceID]),n.targetID&&(r.targetID=e[n.targetID]),e[n.sourcePointX]&&e[n.sourcePointY]&&(r.sourcePoint={x:Number(e[n.sourcePointX]),y:Number(e[n.sourcePointY])}),e[n.targetPointX]&&e[n.targetPointY]&&(r.targetPoint={x:Number(e[n.targetPointX]),y:Number(e[n.targetPointY])}),n.crudAction.customFields&&n.crudAction.customFields.length>0)for(i=0;i<n.crudAction.customFields.length;i++)r[n.crudAction.customFields[i]]=e[n.crudAction.customFields[i]];return r},t.prototype.initNodes=function(e,t){this.preventDiagramUpdate=!0,this.initObject(e,t),this.preventDiagramUpdate=!1},t.prototype.initConnectors=function(e,t,i){this.preventDiagramUpdate=!0,this.initObject(e,t,i),this.updateEdges(e),this.preventDiagramUpdate=!1},t.prototype.setZIndex=function(e,t){var i=e;if(-1===t.zIndex){for(;i.zIndexTable[i.objectZIndex+1];)e.objectZIndex++;t.zIndex=++i.objectZIndex}else{var n=t.zIndex;if(i.zIndexTable[n])for(var r=Object.keys(i.zIndexTable).length,o=0;o<r;o++){if(o===n){for(var a=r;a>n;a--)i.zIndexTable[a]=i.zIndexTable[a-1],this.nameTable[i.zIndexTable[a]]&&(this.nameTable[i.zIndexTable[a]].zIndex=a);i.zIndexTable[o]=t.id}0}}},t.prototype.initializeDiagramLayers=function(){this.layers;for(var e=0;e<this.layers.length;e++)if(-1!==this.layers[e].zIndex){var t=this.layers[e];this.layers[e]=this.layers[this.layers[e].zIndex],this.layers[t.zIndex]=t}for(var i=0,n=this.layers;i<n.length;i++){var r=n[i];r.zIndex=-1!==r.zIndex?r.zIndex:this.layers.indexOf(r),this.layerZIndexTable[r.zIndex]=r.id}for(e=0;e<this.layers.length;e++)for(var o=e+1;o<this.layers.length;o++)if(this.layers[e].zIndex>this.layers[o].zIndex){t=this.layers[e];this.layers[e]=this.layers[o],this.layers[o]=t}if(0===this.layers.length){this.commandHandler.addLayer({id:"default_layer",visible:!0,lock:!1,objects:[],zIndex:0,objectZIndex:-1,zIndexTable:{}},null,!0)}this.setActiveLayer(this.layers[this.layers.length-1].id)},t.prototype.resetTool=function(){this.eventHandler.resetTool()},t.prototype.initObjectExtend=function(e,t,i){if(i){var n=this.commandHandler.checkBoundaryConstraints(void 0,void 0,e.wrapper.bounds);if(t.zIndexTable[e.zIndex]=e.id,!n){for(var r=e instanceof Pl?this.nodes:this.connectors,o=0;o<=r.length;o++)r[o]&&e.id===r[o].id&&r.splice(o,1);delete t.zIndexTable[e.zIndex]}}},t.prototype.initObject=function(e,t,i,n){if(void 0===i&&(i=!0),void 0!==e){if(i&&(t||(this.addToLayer(e,!1),t=this.activeLayer),(e instanceof Pl||e instanceof _r)&&this.setZIndex(t,e)),e instanceof Pl){if(i){if("helper"!==e.id)if(o=Pc(this.getNodeDefaults)){if((a=o(e,this))&&a.ports)for(var r=0;r<a.ports.length;r++)a.ports[r].inEdges=[],a.ports[r].outEdges=[];a&&a!==e&&gc(a,e)}this.initNode(e,this.element.id)}}else if(e instanceof _r){var o,a;if(o=Pc(this.getConnectorDefaults))(a=o(e,this))&&a!==e&&gc(a,e),e.segments.length&&e.type!==e.segments[0].type&&(e.segments=[]);var s=this.nameTable[e.sourceID],l=this.nameTable[e.targetID],c=this.getConnectedPort(s,e,!0),d=this.getConnectedPort(l,e),h=this.findInOutConnectPorts(s,!1),p=this.findInOutConnectPorts(l,!0);if((void 0!==s&&ro(s)||""!==e.sourcePortID&&oo(h))&&(e.sourceWrapper=this.getEndNodeWrapper(s,e,!0),e.sourcePortID&&c&&c.constraints&&!(c.constraints&ye.None)&&c.constraints&ye.OutConnect&&(e.sourcePortWrapper=this.getWrapper(s.wrapper,e.sourcePortID))),(void 0!==l&&io(l)||""!==e.targetPortID&&no(p))&&(e.targetWrapper=this.getEndNodeWrapper(l,e,!1),e.targetPortID&&d&&d.constraints&&!(d.constraints&ye.None)&&d.constraints&ye.InConnect&&(e.targetPortWrapper=this.getWrapper(l.wrapper,e.targetPortID))),!i){var u=e.getConnectorPoints(e.type);cs(e,u)}i&&e.init(this);for(var f=0;f<e.wrapper.children.length;f++)this.pathTable[e.wrapper.children[f].data]&&(e.wrapper.children[f].absoluteBounds=this.pathTable[e.wrapper.children[f].data].absoluteBounds);e.wrapper.measure(new P(void 0,void 0)),e.wrapper.arrange(e.wrapper.desiredSize),e instanceof _r&&"Bezier"===e.type&&(this.updateConnectorAnnotation(e),this.updateConnectorfixedUserHandles(e));for(var g=0;g<e.wrapper.children.length;g++)this.pathTable[e.wrapper.children[g].data]={},this.pathTable[e.wrapper.children[g].data].absoluteBounds=e.wrapper.children[g].absoluteBounds}if(e instanceof Pl&&e.children&&e.container)for(r=0;r<e.children.length;r++)this.nameTable[e.children[r]].offsetX=this.nameTable[e.children[r]].wrapper.offsetX,this.nameTable[e.children[r]].offsetY=this.nameTable[e.children[r]].wrapper.offsetY;if(this.bpmnModule&&e instanceof Pl&&"Bpmn"===e.shape.type&&e.shape.annotations.length>0&&this.bpmnModule.updateQuad(e,this),this.initObjectExtend(e,t,i),this.nameTable[e.id]=e,e instanceof Pl&&e.children){this.preventNodesUpdate=!0,this.preventConnectorsUpdate=!0,n||e.container||this.updateGroupOffset(e,!0),this.groupTable[e.id]=e.children;for(r=0;r<e.children.length;r++){var m=this.nameTable[e.children[r]];m&&(m.parentId=e.id)}this.isLoading||!e.rotateAngle||e.container||this.commandHandler.rotateObjects(e,[e],e.rotateAngle,{x:e.offsetX,y:e.offsetY},!1),this.preventNodesUpdate=!1,this.preventConnectorsUpdate=!1}void 0===this.enterObject&&this.updateQuad(e)}!1===e.visible&&this.updateElementVisibility(e.wrapper,e,!1)},t.prototype.getConnectedPort=function(e,t,i){if(e&&e.ports)for(var n=0,r=e.ports;n<r.length;n++){var o=r[n];if(o.id===t.sourcePortID&&i)return o;if(o.id===t.targetPortID&&!i)return o}return null},t.prototype.scaleObject=function(e,t,i){var n=i?e.wrapper.actualSize.width:e.wrapper.actualSize.height,r=i?1+(t-n)/n:1,o=i?1:1+(t-n)/n;e.offsetX,e.offsetY;this.realActions|=fe.PreventDrag,this.scale(e,r,o,{x:.5,y:.5}),this.realActions&=~fe.PreventDrag},t.prototype.updateDefaultLayoutIcons=function(e){"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type&&"ComplexHierarchicalTree"!==this.layout.type||(this.updateDefaultLayoutIcon(e,e.expandIcon),this.updateDefaultLayoutIcon(e,e.collapseIcon))},t.prototype.updateDefaultLayoutIcon=function(e,t){if("None"!==t.shape&&"Auto"===t.horizontalAlignment&&"Auto"===t.verticalAlignment&&.5===t.offset.x&&1===t.offset.y){var i=this.getWrapper(e.wrapper,"icon_content"),n=void 0,r=void 0;"TopToBottom"===this.layout.orientation||"BottomToTop"===this.layout.orientation?(n=.5,r="TopToBottom"===this.layout.orientation?1:0):"RightToLeft"!==this.layout.orientation&&"LeftToRight"!==this.layout.orientation||(n="LeftToRight"===this.layout.orientation?1:0,r=.5),i.setOffsetWithRespectToBounds(n,r,"Fraction"),i.horizontalAlignment="Center",i.verticalAlignment="Center",e.wrapper.measure(new P(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize)}},t.prototype.updateGroupOffset=function(e,t){var i=!1;if(e.children&&e.children.length>0&&!e.container||e.processId){var n=this.nameTable[e.id];if(!(this.realActions&fe.PreventScale)&&!(this.realActions&fe.PreventDrag)){if(!n.offsetX||!(this.realActions&fe.EnableGroupAction)&&(this.diagramActions&pe.UndoRedo||this.diagramActions&pe.ToolAction||this.diagramActions&pe.PublicMethod))Object(r.I)()&&(this.insertValue(uc(n),!0),i=!0),n.offsetX=e.wrapper.offsetX;else{this.realActions|=fe.PreventScale;var o=n.offsetX-e.wrapper.offsetX;n.offsetX=e.wrapper.offsetX;var a=n.offsetY-e.wrapper.offsetY;n.offsetY=e.wrapper.offsetY,"None"===e.flip&&this.drag(n,o,a),this.realActions&=~fe.PreventScale}if(!n.offsetY||!(this.realActions&fe.EnableGroupAction)&&(this.diagramActions&pe.UndoRedo||this.diagramActions&pe.ToolAction||this.diagramActions&pe.PublicMethod))Object(r.I)()&&(this.insertValue(uc(n),!0),i=!0),n.offsetY=e.wrapper.offsetY;else{this.realActions|=fe.PreventScale;a=n.offsetY-e.wrapper.offsetY;n.offsetY=e.wrapper.offsetY,"None"===e.flip&&this.drag(n,0,a),this.realActions&=~fe.PreventScale}this.diagramActions&&(Object(r.I)()&&(this.insertValue(uc(n),!0),i=!0),n.width=e.wrapper.actualSize.width,n.height=e.wrapper.actualSize.height)}}t&&e.children&&e.children.length>0&&(void 0!==this.nameTable[e.id].width?this.scaleObject(e,this.nameTable[e.id].width,!0):(Object(r.I)()&&(this.insertValue(uc(this.nameTable[e.id]),!0),i=!0),this.nameTable[e.id].width=e.wrapper.actualSize.width),void 0!==this.nameTable[e.id].height?this.scaleObject(e,this.nameTable[e.id].height,!1):(Object(r.I)()&&(this.insertValue(uc(this.nameTable[e.id]),!0),i=!0),this.nameTable[e.id].height=e.wrapper.actualSize.height)),!i||this.diagramActions&pe.UndoRedo||this.diagramActions&pe.ToolAction||this.diagramActions&pe.PublicMethod||this.commandHandler.getBlazorOldValues()},t.prototype.initNode=function(e,t,i){var n,r,o=e.initContainer(),a=new He;if(this.diagramSettings.inversedAlignment||(o.inversedAlignment=!1),o.children||(o.children=[]),e.children){if(o.measureChildren=!1,e.container&&"Grid"===e.container.type)for(var s=0;s<e.children.length;s++){var l=new He,c=this.nameTable[e.children[s]];l.children=[],l.children.push(c.wrapper),c&&o.addObject(c.wrapper,c.rowIndex,c.columnIndex,c.rowSpan,c.columnSpan)}else for(s=0;s<e.children.length;s++)if(this.nameTable[e.children[s]]){c=this.nameTable[e.children[s]];this.updateStackProperty(e,c,s),o.children.push(c.wrapper),o.elementActions=o.elementActions|re.ElementIsGroup,c.wrapper.flip="None"===c.wrapper.flip?e.wrapper.flip:c.wrapper.flip}a.id=e.id+"group_container",a.style.fill="none",a.style.strokeColor="none",a.horizontalAlignment="Stretch",a.verticalAlignment="Stretch",o.style=e.style,a.children=[],a.preventContainer=!0,e.container&&(a.relativeMode="Object"),e.container&&"Grid"===e.container.type||o.children.push(a)}else{var d=Pc(this.setNodeTemplate);d&&"helper"!==e.id&&(n=d(e,this)),n||(n=e.init(this)),o.children.push(n)}r=Pc(this.getDescription),(e.children?o:n).description=r||(e.annotations.length?e.annotations[0].content:e.id);var h=e.children?a:o;e.initAnnotations(this.getDescription,h,this.element.id,!!lo(this),this.annotationTemplate),e.initPorts(this.getDescription,h),e.initIcons(this.getDescription,this.layout,h,t);for(s=0;e.fixedUserHandles,s<e.fixedUserHandles.length;s++){var p=e.initfixedUserHandles(e.fixedUserHandles[s]);h.children.push(p)}"SwimLane"===e.shape.type&&e.wrapper&&e.wrapper.children.length>0&&e.wrapper.children[0]instanceof Ro?(na(e),oa(this,e),this.updateDiagramElementQuad()):(o.measure(new P(e.width,e.height),e.id,this.onLoadImageSize.bind(this)),o instanceof Ro?o.arrange(o.desiredSize,!0):o.arrange(o.desiredSize)),"None"!==e.wrapper.flip&&e.wrapper.elementActions&re.ElementIsGroup&&Es(e.wrapper,e.wrapper.offsetX,e.wrapper.offsetY,this,e.wrapper.flip),e instanceof Pl&&e.container&&(e.width<o.outerBounds.width||e.height<o.outerBounds.height)&&o.bounds.x<=o.outerBounds.x&&o.bounds.y<=o.outerBounds.y&&(e.width=o.width=o.outerBounds.width,e.height=o.height=o.outerBounds.height,o.measure(new P(e.width,e.height)),o.arrange(o.desiredSize)),e.container&&"Grid"===e.container.type&&e.children&&e.children.length>0&&this.updateChildPosition(e)},t.prototype.updateDiagramElementQuad=function(){for(var e=0;e<this.nodes.length;e++)this.nodes[e].wrapper&&this.nodes[e].wrapper instanceof ze&&this.updateQuad(this.nodes[e])},t.prototype.onLoadImageSize=function(e,t){var i=this.getObject(e),n=document.getElementById(e+"sf-imageNode");n&&n.parentNode.removeChild(n),this.nodePropertyChange(i,{},{width:t.width,height:t.height});var r={element:uc(i),size:t};this.triggerEvent(ve.onImageLoad,r)},t.prototype.updateChildPosition=function(e){for(var t=0;t<e.children.length;t++){var i=this.getObject(e.children[t]);i.offsetX=i.wrapper.offsetX,i.offsetY=i.wrapper.offsetY,i.children&&i.children.length>0&&this.updateChildPosition(i)}},t.prototype.canExecute=function(){return!0},t.prototype.updateStackProperty=function(e,t,i){e.container&&"Stack"===e.container.type&&(t.width||(t.wrapper.horizontalAlignment="Stretch",t.horizontalAlignment="Stretch"),t.height||(t.verticalAlignment="Stretch",t.wrapper.verticalAlignment="Stretch"),i&&"UmlClassifier"===e.shape.type&&(t.umlIndex=i))},t.prototype.initViews=function(){this.isLoading||(this.views.push(this.element.id),this.views[this.element.id]=this)},t.prototype.initCommands=function(){var e=this.commandManager.commands,t={copy:{execute:this.copyCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:he.C,keyModifiers:de.Control}},paste:{execute:this.pasteCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:he.V,keyModifiers:de.Control}},cut:{execute:this.cutCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:he.X,keyModifiers:de.Control}},delete:{execute:this.removeCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:he.Delete}},selectAll:{execute:this.selectAll.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:he.A,keyModifiers:de.Control}},undo:{execute:this.undo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:he.Z,keyModifiers:de.Control}},redo:{execute:this.redo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:he.Y,keyModifiers:de.Control}},nudgeUp:{execute:this.nudgeCommand.bind(this,"Up"),canExecute:this.canExecute.bind(this),gesture:{key:he.Up},parameter:"up"},nudgeRight:{execute:this.nudgeCommand.bind(this,"Right"),canExecute:this.canExecute.bind(this),gesture:{key:he.Right},parameter:"right"},nudgeDown:{execute:this.nudgeCommand.bind(this,"Down"),canExecute:this.canExecute.bind(this),gesture:{key:he.Down},parameter:"down"},nudgeLeft:{execute:this.nudgeCommand.bind(this,"Left"),canExecute:this.canExecute.bind(this),gesture:{key:he.Left},parameter:"left"},startEdit:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:he.F2}},endEdit:{execute:this.endEditCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:he.Escape}},focusToNextItem:{canExecute:this.canExecute.bind(this),gesture:{key:he.Tab}},focusToPreviousItem:{canExecute:this.canExecute.bind(this),gesture:{key:he.Tab,keyModifiers:de.Control}},selectFocusedItem:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:he.Enter}}};this.initCommandManager(e,t)},t.prototype.overrideCommands=function(e,t){for(var i,n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];if(i=t[o],e.gesture.key===i.gesture.key&&e.gesture.keyModifiers===i.gesture.keyModifiers){delete t[o];break}}},t.prototype.initCommandManager=function(e,t){var i=0;if(e)for(i=0;i<e.length;i++)t[e[i].name]&&e[i]?(e[i].canExecute&&(t[e[i].name].canExecute=e[i].canExecute),e[i].execute&&(t[e[i].name].execute=e[i].execute),(e[i].gesture.key||e[i].gesture.keyModifiers)&&(t[e[i].name].gesture=e[i].gesture),""!==e[i].parameter&&(t[e[i].name].parameter=e[i].parameter)):(this.overrideCommands(e[i],t),t[e[i].name]={execute:e[i].execute,canExecute:e[i].canExecute,gesture:e[i].gesture,parameter:e[i].parameter});this.commands=t},t.prototype.updateNodeEdges=function(e){for(var t=0,i=e.inEdges;t<i.length;t++){var n=i[t];this.nameTable[n]&&(this.nameTable[n].targetID="")}for(var r=0,o=e.outEdges;r<o.length;r++){n=o[r];this.nameTable[n]&&(this.nameTable[n].sourceID="")}e.inEdges=[],e.outEdges=[]},t.prototype.updateIconVisibility=function(e,t){for(var i=0;i<e.wrapper.children.length;i++){var n=e.wrapper.children[i];if(n.id){var r=n.id.split(e.id)[1];r&&r.match("^_icon")&&(n.visible=t,this.updateDiagramContainerVisibility(n,t))}}},t.prototype.updateEdges=function(e){var t;void 0!==e.sourceID&&""!==e.sourceID&&((t=this.nameTable[e.sourceID])&&t.outEdges&&0===t.outEdges.length&&(t.outEdges=[]),t&&t.outEdges&&-1===t.outEdges.indexOf(e.id)&&t.outEdges.push(e.id),this.updatePortEdges(t,e,!1));if(void 0!==e.targetID&&""!==e.targetID&&((t=this.nameTable[e.targetID])&&t.inEdges&&0===t.inEdges.length&&(t.inEdges=[]),t&&t.inEdges&&-1===t.inEdges.indexOf(e.id)&&t.inEdges.push(e.id),this.updatePortEdges(t,e,!0),t&&t.visible&&t.outEdges)){var i=0!==t.outEdges.length;this.updateIconVisibility(t,i)}},t.prototype.updatePortEdges=function(e,t,i){if(e)for(var n=0;n<e.ports.length;n++){var r=e.ports[n],o=i?t.targetPortID:t.sourcePortID;if(r.id===o){var a=i?r.inEdges:r.outEdges;-1===a.indexOf(t.id)&&a.push(t.id)}}},t.prototype.refreshDiagram=function(){if(this.initLayerObjects(),this.doLayout(),this.updateBridging(),this.scroller.setSize(),this.addBlazorDiagramObjects(),Object(r.I)()&&this.layout&&this.layout.layoutInfo&&this.layout.layoutInfo.isRootInverse&&this.nodes.length>2){var e=this.nodes[0];if(e.outEdges.length>1)for(var t=this.isProtectedOnChange,i=1;i<e.outEdges.length;i++){var n=this.nameTable[e.outEdges[i]],o=this.allowServerDataBinding;this.protectPropertyChange(!1),this.enableServerDataBinding(!1),this.preventDiagramUpdate=!0,"Left"===this.getObject(n.targetID).data.Branch&&(n.sourcePortID=e.ports[1].id),this.dataBind(),this.preventDiagramUpdate=!1,this.enableServerDataBinding(o),this.protectPropertyChange(t)}}if(Object(r.I)())for(var a=void 0,s=0,l=this.views;s<l.length;s++){var c=l[s];(a=this.views[c]).renderDocument&&(a.renderDocument(a),a.diagramRenderer.setLayers(),a.updateView(a),this.renderNodes(a))}this.updateFitToPage()},t.prototype.updateCanupdateStyle=function(e,t){for(var i=0;i<e.length;i++)e[i].children&&this.updateCanupdateStyle(e[i].children,t),e[i].canApplyStyle=t},t.prototype.getZindexPosition=function(e,t){var i,n=[],r=void 0;if(n=(n=n.concat(this.nodes)).concat(this.connectors),-1!==e.zIndex)for(var o=0;o<n.length;o++)if(n[o].zIndex>e.zIndex){"HTML"!==e.shape.type&&"Native"!==e.shape.type||(i="HTML"===e.shape.type?"html":"native"),r=Bl(t,n[o].id,i);break}return r},t.prototype.updateDiagramObject=function(e,t,i){for(var n,r=0,o=this.views;r<o.length;r++){var a=o[r];if(n=this.views[a],this.diagramActions&&"SVG"===n.mode){var s=void 0;if(this.layers.length>1&&(s=this.commandHandler.getObjectLayer(e.id)),void 0===s||s&&s.visible||i){var l=Gl(this.element.id);window.domTable[n.element.id+"_diagramLayer"]||(window.domTable[n.element.id+"_diagramLayer"]=document.getElementById(n.element.id+"_diagramLayer"));var c=window.domTable[n.element.id+"_diagramLayer"];this.diagramActions&pe.Interactions&&this.updateCanupdateStyle(e.wrapper.children,!0),this.diagramRenderer.updateNode(e.wrapper,c,l,void 0,t?void 0:this.getZindexPosition(e,n.element.id)),this.updateCanupdateStyle(e.wrapper.children,!0)}}}},t.prototype.updateGridContainer=function(e){for(var t,i=Gl(this.element.id),n=0,r=this.views;n<r.length;n++){var o=r[n];if("SVG"===(t=this.views[o]).mode&&this.diagramActions){var a=document.getElementById(t.element.id+"_diagramLayer");this.diagramRenderer.updateNode(e,a,i,void 0)}else this.refreshCanvasDiagramLayer(t)}},t.prototype.getObjectsOfLayer=function(e){for(var t=[],i=0,n=e;i<n.length;i++){var r=n[i];this.nameTable[r]&&t.push(this.nameTable[r])}return t},t.prototype.refreshDiagramLayer=function(){for(var e,t=0,i=this.views;t<i.length;t++){var n=i[t];switch((e=this.views[n]).mode){case"SVG":this.refreshSvgDiagramLayer(e);break;case"Canvas":this.refreshCanvasLayers(e)}}},t.prototype.refreshCanvasLayers=function(e){if(e)this.refreshCanvasDiagramLayer(e);else for(var t=0,i=this.views;t<i.length;t++){var n=i[t],r=this.views[n];this.refreshCanvasDiagramLayer(r)}},t.prototype.renderBasicElement=function(e){for(var t=Gl(e.element.id),i=0;i<this.basicElements.length;i++){var n=this.basicElements[i];n instanceof ze&&(n.prevRotateAngle=0),n.measure(new P(n.width,n.height)),n.arrange(n.desiredSize),e.diagramRenderer.renderElement(n,e.diagramLayer,t)}},t.prototype.refreshElements=function(e){if(!this.isDestroyed){this.clearCanvas(e),e instanceof t&&(e.diagramLayer.getContext("2d").setTransform(e.scroller.currentZoom,0,0,e.scroller.currentZoom,0,0),e.diagramLayer.getContext("2d").scale(1.5,1.5));var i=Gl(e.element.id);this.spatialSearch.getPageBounds();this.renderDiagramElements(e.diagramLayer,e.diagramRenderer,i);for(var n=0;n<this.basicElements.length;n++){var r=this.basicElements[n];r.measure(new P(r.width,r.height)),r.arrange(r.desiredSize),e.diagramRenderer.renderElement(r,e.diagramLayer,i)}e instanceof t&&(e.diagramLayer.style.transform="scale("+2/3+")",e.diagramLayer.style.transformOrigin="0 0"),this.renderTimer=null}},t.prototype.refreshCanvasDiagramLayer=function(e){var t=this;"SVG"===e.mode||this.isDestroyed||(this.basicElements.length>0&&this.renderBasicElement(e),!this.diagramActions||0===(this.diagramActions&pe.Render)||pe.ToolAction&this.diagramActions||lo(this)||1!==this.scroller.currentZoom?this.refreshElements(e):this.renderTimer||(this.renderTimer=setTimeout((function(){t.refreshElements(e)}),40)))},t.prototype.updatePortVisibility=function(e,t,i){var n,r=!this.drawingObject||!this.drawingObject.shape;if(e instanceof Pl&&r&&Jr(e)){for(var o=e.ports,a=!1,s=0;s<o.length;s++)n=this.getWrapper(e.wrapper,o[s].id),(t&J.Hover||t&J.Connect)&&us(o[s],t)&&(n.visible=!i,a=!0);a&&this.updateDiagramObject(e)}},t.prototype.refreshSvgDiagramLayer=function(e){var t,i=document.getElementById(e.element.id+"_diagramLayer"),n=Gl(e.element.id);if(lo(this))this.scroller.virtualizeElements();else{for(var r=0;r<this.basicElements.length;r++)(t=this.basicElements[r]).measure(new P(t.width,t.height)),t.arrange(t.desiredSize,!(this.diagramActions&pe.Render)),this.diagramRenderer.renderElement(t,i,n);this.renderDiagramElements(i,this.diagramRenderer,n)}},t.prototype.removeVirtualObjects=function(e){if(this.deleteVirtualObject){for(var t=0;t<this.scroller.removeCollection.length;t++){var i=this.nameTable[this.scroller.removeCollection[t]];this.removeElements(i)}this.deleteVirtualObject=!1}clearInterval(e)},t.prototype.updateTextElementValue=function(e){for(var t=0;t<e.wrapper.children.length;t++){var i=e.wrapper.children[t];i instanceof Be&&(i.canMeasure=!0,i.measure(new P(e.width,e.height)),i.arrange(i.desiredSize))}},t.prototype.updateVirtualObjects=function(e,t,i){var n=document.getElementById(this.element.id+"_diagramLayer"),r=Gl(this.element.id);if("SVG"===this.mode){for(var o=0;o<e.length;o++){var a=this.scroller.removeCollection.indexOf(e[o]);a>=0&&this.scroller.removeCollection.splice(a,1);var s=this.nameTable[e[o]];this.updateTextElementValue(s),this.diagramRenderer.renderElement(s.wrapper,n,r,void 0,void 0,void 0,void 0,s.zIndex)}for(var l=0;l<i.length;l++)this.scroller.removeCollection.push(i[l]);1!==this.scroller.currentZoom&&this.eventHandler.updateVirtualization()}else this.diagramActions&&this.refreshDiagramLayer()},t.prototype.renderDiagramElements=function(e,t,i,n,r,o){void 0===n&&(n=!0);var a=this.scroller.getPageBounds();a.x*=this.scroller.currentZoom,a.y*=this.scroller.currentZoom,a.width*=this.scroller.currentZoom,a.height*=this.scroller.currentZoom;for(var s=-this.scroller.horizontalOffset-a.x,l=-this.scroller.verticalOffset-a.y,c=0,d=Object.keys(this.layerZIndexTable);c<d.length;c++){var h=d[c],p=this.commandHandler.getLayer(this.layerZIndexTable[h]),u=void 0,f=void 0;"Canvas"===this.mode&&lo(this)&&!this.diagramActions&&this.scroller.virtualizeElements();for(var g="Canvas"===this.mode&&lo(this)&&this.scroller.oldCollectionObjects.length>0?this.scroller.oldCollectionObjects:void 0,m=0,v=Object.keys(g||p.zIndexTable);m<v.length;m++){var y=v[m],b=g?this.nameTable[g[y]]:this.nameTable[p.zIndexTable[y]];if(b&&!b.parentId&&p.visible&&(!b.processId||this.refreshing)){var w={tx:this.scroller.transform.tx,ty:this.scroller.transform.ty,scale:this.scroller.transform.scale};if(lo(this)){if(this.scroller.currentZoom<1){if(a.x<0||this.scroller.horizontalOffset<0){var x=this.scroller.verticalOffset<0?this.scroller.verticalOffset:0;u=(s>0?s:0)+"px",f=(this.realActions&fe.vScrollbarMoved?0:-x)+"px"}else u="0px",f="0px";this.realActions&fe.hScrollbarMoved&&(this.realActions=this.realActions&~fe.hScrollbarMoved),this.realActions&fe.vScrollbarMoved&&(this.realActions=this.realActions&~fe.vScrollbarMoved)}else u=(a.x<0?s:-this.scroller.horizontalOffset)+"px",f=(a.y<0?l:-this.scroller.verticalOffset)+"px";this.diagramLayer.style.left=u,this.diagramLayer.style.top=f,w.tx=this.scroller.horizontalOffset/w.scale,w.ty=this.scroller.verticalOffset/w.scale}var O=!0;if(r&&(O=!1),this.updateTextElementValue(b),this.refreshing&&b.shape.activity&&b.shape.activity.subProcess&&b.shape.activity.subProcess.processes){for(var S=0;S<b.shape.activity.subProcess.processes.length;S++){var C=b.shape.activity.subProcess.processes[S];b.wrapper.children.push(this.nameTable[C].wrapper)}b.wrapper.measure(new P(b.wrapper.bounds.width,b.wrapper.bounds.height)),b.wrapper.arrange(b.wrapper.desiredSize)}t.renderElement(b.wrapper,e,i,!t.isSvgMode&&n?w:void 0,void 0,void 0,O&&(!this.diagramActions||o))}}}},t.prototype.updateBridging=function(e){if(this.bridgingModule)for(var t=0;t<this.connectors.length;t++){var i=this.connectors[t];this.bridgingModule.updateBridging(i,this);var n=this.connectors[t].wrapper;if(n){var r=n.children[0],o=r.data;i.getSegmentElement(i,r,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0),r.data!==o&&(n.measure(new P),n.arrange(n.desiredSize),"SVG"!==this.mode||e||this.updateDiagramObject(i))}}},t.prototype.setCursor=function(e){this.diagramRenderer.setCursor(this.diagramCanvas,e)},t.prototype.clearCanvas=function(e){var t,i;(t=e.contentWidth||e.diagramLayer.width/this.scroller.currentZoom,i=e.contentHeight||e.diagramLayer.height/this.scroller.currentZoom,"SVG"!==e.mode)&&jc.getContext(e.diagramLayer).clearRect(0,0,t,i)},t.prototype.updateScrollOffset=function(){this.scroller.setScrollOffset(this.diagramCanvas.scrollLeft,this.diagramCanvas.scrollTop),Ur(this),lo(this)&&this.scroller.virtualizeElements()},t.prototype.setOffset=function(e,t){window.domTable[this.element.id+"content"]||(window.domTable[this.element.id+"content"]=document.getElementById(this.element.id+"content"));var i=window.domTable[this.element.id+"content"];i&&(i.scrollLeft=e,i.scrollTop=t)},t.prototype.setSize=function(e,t){if(this.diagramLayer&&!this.preventDiagramUpdate){var i=Yr(this);e-=i.width,t-=i.height;var n=this.spatialSearch.getPageBounds();n.x*=this.scroller.currentZoom,n.y*=this.scroller.currentZoom,n.width*=this.scroller.currentZoom,n.height*=this.scroller.currentZoom;var r="SVG"===this.mode?1:1.5,o="SVG"===this.mode?zl(this.element.id):this.diagramLayer,a="Canvas"===this.mode&&this.constraints&ae.Virtualization?this.scroller.viewPortWidth:e,s="Canvas"===this.mode&&this.constraints&ae.Virtualization?this.scroller.viewPortHeight:t;o.setAttribute("width",(r*a).toString()),o.setAttribute("height",(r*s).toString());var l=document.getElementById(this.element.id+"_diagramUserHandleLayer");l&&(l.style.width=e+"px",l.style.height=t+"px");var c={width:e.toString(),height:t.toString()};this.diagramLayerDiv.style.width=e+"px",this.diagramLayerDiv.style.height=t+"px",ic(ql(this.element.id),c),ic(Nl(this.element.id).getElementsByClassName("e-ports-expand-layer")[0],c);var d=_l(this.element.id);ic(d,c),d.parentNode.style.width=e+"px",d.parentNode.style.height=t+"px";var h=Ul(this.element.id);ic(h,c),this.diagramRenderer.updateGrid(this.snapSettings,h,this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),ic(Vl(this.element.id),c),this.htmlLayer.style.width=e+"px",this.htmlLayer.style.height=t+"px","SVG"===this.mode||lo(this)||this.refreshDiagramLayer(),"SVG"===this.mode&&lo(this)&&this.scroller.virtualizeElements()}},t.prototype.transformLayers=function(){var e=this.spatialSearch.getPageBounds();e.x*=this.scroller.currentZoom,e.y*=this.scroller.currentZoom,e.width*=this.scroller.currentZoom,e.height*=this.scroller.currentZoom,this.diagramRenderer.updateGrid(this.snapSettings,Ul(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.diagramRenderer.transformLayers(this.scroller.transform,"SVG"===this.mode),this.diagramActions&pe.DragUsingMouse||this.updateSelector(),this.renderPageBreaks(e)},t.prototype.removePageBreaks=function(){if(this.diagramLayer){var e=Yl(this.element.id);if(e&&e.childNodes)for(var t=e.childNodes.length,i=0;i<t;i++)e.removeChild(e.childNodes[0])}},t.prototype.renderPageBreaks=function(e){this.removePageBreaks();var t=Yl(this.element.id);if(t){var i=0;e=this.scroller.getPageBounds(!0);var n=(this.scroller.transform.tx+e.x)*this.scroller.currentZoom,r=(this.scroller.transform.ty+e.y)*this.scroller.currentZoom,o=e.height*this.scroller.currentZoom,a=e.width*this.scroller.currentZoom;Ec.renderSvgBackGroundImage(this.pageSettings.background,this.element,n,r,a,o);var s={id:t.id+"rect",x:n,y:r,height:o,width:a,angle:0,stroke:"",strokeWidth:1,fill:this.pageSettings.background.color,opacity:1,pivotX:0,pivotY:0,visible:!0,dashArray:"0"};if(this.diagramRenderer.drawRect(t,s),this.pageSettings.showPageBreaks){var l=this.scroller.getPageBreak(e);for(i=0;i<l.length;i++)this.diagramRenderer.drawLine(t,{class:"e-diagram-page-break",fill:"none",stroke:"#aaaaaa",strokeWidth:1,dashArray:"10 10",opacity:2,x:0,y:0,width:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,startPoint:{x:(l[i].x1+this.scroller.transform.tx)*this.scroller.currentZoom,y:(l[i].y1+this.scroller.transform.ty)*this.scroller.currentZoom},endPoint:{x:(l[i].x2+this.scroller.transform.tx)*this.scroller.currentZoom,y:(l[i].y2+this.scroller.transform.ty)*this.scroller.currentZoom},id:l[i].y1===l[i].y2?"HorizontalLines":"VerticalLines"})}}},t.prototype.validatePageSize=function(){var e=0;"Portrait"===this.pageSettings.orientation?this.pageSettings.width>this.pageSettings.height&&(e=this.pageSettings.height,this.pageSettings.height=this.pageSettings.width,this.pageSettings.width=e):this.pageSettings.height>this.pageSettings.width&&(e=this.pageSettings.width,this.pageSettings.width=this.pageSettings.height,this.pageSettings.height=e)},t.prototype.setOverview=function(e,t){if(e)e&&(this.views.push(e.id),this.views[e.id]=e,e.renderDocument(e),e.diagramRenderer.setLayers(),e.updateView(e),this.renderNodes(e));else{for(var i=0;i<this.views.length;i++)this.views[i]===t&&(e=this.views[t]);this.views[t]=void 0;var n=this.views.indexOf(t);this.views.splice(n,1)}},t.prototype.renderNodes=function(e){if(e){var t=new Ec(e.id,new Ic,!1),i=document.getElementById(e.element.id+"_diagramLayer"),n=Gl(e.element.id);this.renderDiagramElements(i,e.diagramRenderer||t,n,void 0,void 0,!0)}},t.prototype.updateThumbConstraints=function(e,t,i){for(var n=e.length,r=0;r<n;r++){var o=e[r],a=!1,s=!1,l=t.thumbsConstraints;o instanceof Pl?(a="Bpmn"===o.shape.type&&"Activity"===o.shape.shape&&!1===o.shape.activity.subProcess.collapsed||"TextAnnotation"===o.shape.shape,s="Bpmn"===o.shape.type&&"TextAnnotation"===o.shape.shape,eo(o)&&l&oe.Rotate&&!a||(l&=~oe.Rotate),ao(o,"SouthEast")&&l&oe.ResizeSouthEast&&!s||(l&=~oe.ResizeSouthEast),ao(o,"NorthWest")&&l&oe.ResizeNorthWest&&!s||(l&=~oe.ResizeNorthWest),ao(o,"East")&&l&oe.ResizeEast&&!s||(l&=~oe.ResizeEast),ao(o,"West")&&l&oe.ResizeWest&&!s||(l&=~oe.ResizeWest),ao(o,"North")&&l&oe.ResizeNorth&&!s||(l&=~oe.ResizeNorth),ao(o,"South")&&l&oe.ResizeSouth&&!s||(l&=~oe.ResizeSouth),ao(o,"NorthEast")&&l&oe.ResizeNorthEast&&!s||(l&=~oe.ResizeNorthEast),ao(o,"SouthWest")&&l&oe.ResizeSouthWest&&!s||(l&=~oe.ResizeSouthWest)):o instanceof _r?(i||(l|=oe.Default),Qr(o)?l|=oe.ConnectorSource:l&=~oe.ConnectorSource,$r(o)?l|=oe.ConnectorTarget:l&=~oe.ConnectorTarget):(i||(l|=oe.Default),ao(o)||(l&=~(oe.ResizeSouthEast|oe.ResizeSouthWest|oe.ResizeSouth|oe.ResizeEast|oe.ResizeWest|oe.ResizeNorth|oe.ResizeNorthEast|oe.ResizeNorthWest)),eo(o)||(l&=~oe.Rotate)),t.thumbsConstraints=l}},t.prototype.renderSelector=function(e,t){var i=this.isProtectedOnChange;Object(r.I)()&&(this.isProtectedOnChange=!0);var n,o=new P,a=this.selectedItems,s=(a.constraints,this.diagramRenderer.rendererActions),l=document.getElementsByClassName("blazor-inner-template");if(this.diagramRenderer.rendererActions=this.currentSymbol?this.addConstraints(s,ue.DrawSelectorBorder):this.removeConstraints(s,ue.DrawSelectorBorder),this.clearSelectorLayer(),this.commandHandler.hasSelection()){if(1===a.nodes.length&&0===a.connectors.length&&(a.rotateAngle=a.nodes[0].rotateAngle,a.pivot=a.nodes[0].pivot),a.wrapper.measure(o),a.wrapper.arrange(a.wrapper.desiredSize),a.width=a.wrapper.actualSize.width,a.height=a.wrapper.actualSize.height,a.offsetX=a.wrapper.offsetX,a.offsetY=a.wrapper.offsetY,0!==a.rotateAngle){for(var c=0,d=a.nodes;c<d.length;c++){var h=d[c];h.offsetX=h.wrapper.offsetX,h.offsetY=h.wrapper.offsetY}for(var p=0,u=a.connectors;p<u.length;p++)u[p]}var f;this.spatialSearch.getPageBounds();f=Hl(this.element.id);var g;if(g=Fl(this.element.id),a.thumbsConstraints=oe.Default,a.annotation?this.updateThumbConstraints([a.annotation],a):(this.updateThumbConstraints(a.nodes,a),this.updateThumbConstraints(a.connectors,a,!0)),a.annotation)this.renderSelectorForAnnotation(a,f);else if(a.nodes.length+a.connectors.length===1){if(a.nodes[0]instanceof Pl){var m=a.nodes[0];qo(this,m)&&(t||"UmlClassifier"===m.shape.type||m.parentId&&this.nameTable[m.parentId]&&"UmlClassifier"===this.nameTable[m.parentId].shape.type||((!m.container||"Canvas"!==m.container.type&&"Grid"!==m.container.type)&&(a.nodes[0].constraints&=~(ne.Rotate|ne.HideThumbs)),a.thumbsConstraints&=~oe.Rotate));var v=!!t||!!(m.constraints&ne.HideThumbs),y=!!("SwimLane"===m.shape.type||m.isLane||m.isPhase||t);this.diagramRenderer.renderResizeHandle(a.wrapper.children[0],f,a.thumbsConstraints,this.scroller.currentZoom,a.constraints,this.scroller.transform,void 0,Jr(m),v,y)}else if(a.connectors[0]instanceof _r&&xo(this.diagramRenderer.rendererActions)){var b=a.connectors[0];this.diagramRenderer.renderEndPointHandle(b,f,a.thumbsConstraints,a.constraints,this.scroller.transform,void 0!==b.sourceWrapper,void 0!==b.targetWrapper,!(!this.connectorEditingToolModule||!Kr(b)))}}else this.diagramRenderer.renderResizeHandle(a.wrapper,f,a.thumbsConstraints,this.scroller.currentZoom,a.constraints,this.scroller.transform,void 0,Jr(a));if(!a.annotation&&!this.currentSymbol&&(this.diagramRenderer.renderUserHandler(a,f,this.scroller.transform,g),Object(r.I)()&&l.length>0))for(n=0;n<this.selectedItems.userHandles.length;n++){var w=this.selectedItems.userHandles[n];document.getElementById(w.name+"_html_element").style.display="block"}}this.isProtectedOnChange=i},t.prototype.updateSelector=function(){var e=this.allowServerDataBinding;this.enableServerDataBinding(!1);var t,i=new P,n=this.selectedItems,o=n.constraints,a=document.getElementsByClassName("blazor-inner-template");if(this.diagramActions&pe.ToolAction||1!==this.selectedItems.nodes.length||(this.selectedItems.rotateAngle=this.selectedItems.nodes[0].rotateAngle,this.selectedItems.wrapper.rotateAngle=this.selectedItems.nodes[0].rotateAngle),void 0!==this.selectedItems&&(this.clearSelectorLayer(),null!==n.wrapper&&n.wrapper.children&&n.wrapper.children.length)){if(n.wrapper.measure(i),n.wrapper.arrange(n.wrapper.desiredSize),0!==n.rotateAngle||n.rotateAngle!==n.wrapper.prevRotateAngle)for(var s=0,l=n.nodes;s<l.length;s++){var c=l[s];c.offsetX=c.wrapper.offsetX,c.offsetY=c.wrapper.offsetY}n.width=n.wrapper.actualSize.width,n.height=n.wrapper.actualSize.height,n.offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY;var d;d=Hl(this.element.id);var h;h=Fl(this.element.id);var p=this.eventHandler.canHideResizers();if(n.thumbsConstraints=oe.Default,n.annotation?this.updateThumbConstraints([n.annotation],n):(this.updateThumbConstraints(n.nodes,n),this.updateThumbConstraints(n.connectors,n,!0)),this.selectedItems.constraints&$.UserHandle&&!n.annotation&&!this.currentSymbol&&(this.diagramRenderer.renderUserHandler(n,d,this.scroller.transform,h),Object(r.I)()&&a.length>0))for(t=0;t<this.selectedItems.userHandles.length;t++){var u=this.selectedItems.userHandles[t];document.getElementById(u.name+"_html_element").style.display="block"}if(n.annotation)this.renderSelectorForAnnotation(n,d);else if(n.nodes.length+n.connectors.length===1){if(n.connectors[0]instanceof _r&&xo(this.diagramRenderer.rendererActions)){var f=n.connectors[0];this.diagramRenderer.renderEndPointHandle(f,d,n.thumbsConstraints,o,this.scroller.transform,void 0!==f.sourceWrapper,void 0!==f.targetWrapper,!(!this.connectorEditingToolModule||!Kr(f)))}else if(n.nodes[0]instanceof Pl){var g=n.nodes[0];qo(this,n.nodes[0])&&("UmlClassifier"===g.shape.type||g.parentId&&this.nameTable[g.parentId]&&"UmlClassifier"===this.nameTable[g.parentId].shape.type||((!g.container||"Canvas"!==g.container.type&&"Grid"!==g.container.type)&&(n.nodes[0].constraints&=~(ne.HideThumbs|ne.Rotate)),n.thumbsConstraints&=~oe.Rotate));var m=!("SwimLane"!==g.shape.type&&!g.isLane&&!g.isPhase);this.diagramRenderer.renderResizeHandle(n.wrapper.children[0],d,n.thumbsConstraints,this.scroller.currentZoom,n.constraints,this.scroller.transform,p,Jr(n.nodes[0]),!!(n.nodes[0].constraints&ne.HideThumbs),m)}}else this.diagramActions&pe.Interactions&&(this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions|ue.PreventRenderSelector),this.diagramRenderer.renderResizeHandle(n.wrapper,d,n.thumbsConstraints,this.scroller.currentZoom,n.constraints,this.scroller.transform,p,Jr(n)),this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions&~ue.PreventRenderSelector}this.enableServerDataBinding(e)},t.prototype.renderSelectorForAnnotation=function(e,t){this.diagramRenderer.renderResizeHandle(e.wrapper.children[0],t,e.thumbsConstraints,this.scroller.currentZoom,e.constraints,this.scroller.transform,void 0,Jr(e.annotation))},t.prototype.drawSelectionRectangle=function(e,t,i,n){this.clearSelectorLayer(),this.diagramRenderer.drawSelectionRectangle(e,t,i,n,this.adornerLayer,this.scroller.transform)},t.prototype.renderHighlighter=function(e){var t=_l(this.element.id);this.diagramRenderer.renderHighlighter(e,t,this.scroller.transform)},t.prototype.clearHighlighter=function(){var e=_l(this.element.id),t=e.getElementById(e.id+"_highlighter");t&&t.parentNode.removeChild(t)},t.prototype.getNodesConnectors=function(e){for(var t=0;t<this.nodes.length;t++){var i=this.nodes[t];e.push(i)}for(t=0;t<this.connectors.length;t++){var n=this.connectors[t];e.push(n)}return e},t.prototype.clearSelectorLayer=function(){var e,t=_l(this.element.id),i=document.getElementsByClassName("blazor-inner-template");if(this.currentSymbol){var n=t.getElementById("borderRect_symbol");n&&n.parentNode.removeChild(n)}else{var o=t.getElementById(this.adornerLayer.id+"_selected_region");o&&o.parentNode.removeChild(o),this.clearHighlighter();for(var a=Hl(this.element.id).childNodes,s=void 0,l=a.length;l>0;l--)(s=a[l-1]).parentNode.removeChild(s);if(Object(r.I)()&&!(this.diagramActions&pe.DragUsingMouse)&&i.length>0)for(e=0;e<this.selectedItems.userHandles.length;e++){var c=this.selectedItems.userHandles[e];document.getElementById(c.name+"_html_element").style.display="none"}else if(!Object(r.I)()){var d=Fl(this.element.id).childNodes;for(e=d.length;e>0;e--)d[e-1].parentNode.removeChild(d[e-1])}}},t.prototype.getWrapper=function(e,t){var i;t=e.id+"_"+t;for(var n=e instanceof He?e:this.getPortContainer(this.nameTable[e.id]),r=0;r<n.children.length;r++)t===n.children[r].id&&(i=n.children[r]);return i},t.prototype.getEndNodeWrapper=function(e,t,i){if("Bpmn"===e.shape.type&&e.wrapper.children[0]instanceof He){if(!Object(r.I)()&&"Activity"===e.shape.shape||Object(r.I)()&&"Activity"===e.shadow.bpmnShape){if(i&&"Transaction"===e.shape.activity.subProcess.type&&t.sourcePortID){var n=t.sourcePortID,o=e.wrapper.children[0].children[0].children[2];if(o.children)for(var a=0,s=o.children;a<s.length;a++){var l=s[a];if(l.visible&&l.id===e.id+"_"+n)return l.children[0]}}return e.wrapper.children[0].children[0].children[0]}return e.wrapper.children[0].children[0]}return this.containsMargin(e.wrapper.children[0])||e.children?e.wrapper:e.wrapper.children[0]},t.prototype.containsMargin=function(e){return e.margin&&(0!==e.margin.left||0!==e.margin.top||0!==e.margin.right||0!==e.margin.bottom)},t.prototype.focusOutEdit=function(){this.endEdit()},t.prototype.endEditCommand=function(){this.endEdit(),this.textEditing=!1},t.prototype.endEdit=function(){return eh(this,void 0,void 0,(function(){var e,t,i,n,o,a,s,l,c,d,h,p,u,f,g,m,v,y,b,w,x,O,S,C,P,j;return th(this,(function(I){switch(I.label){case 0:return this.diagramActions&pe.TextEdit?(e="Blazor",t="sfBlazor",i=void 0,n=void 0,o={},this.enableServerDataBinding(!1),Object(r.I)()&&(this.canEnableBlazorObject=!0),a=document.getElementById(this.element.id+"_editBox"),Object(r.I)()&&a||!Object(r.I)()?(s=a.value,r.m.remove(a,"input",this.eventHandler.inputChange),r.m.remove(a,"focusout",this.focusOutEdit),l=document.getElementById(this.element.id+"_editTextBoxDiv"),c=void 0,c=this.nameTable[this.activeLabel.parentId],d=fs(c,this.activeLabel.id),h={oldValue:this.activeLabel.text,newValue:s,cancel:!1,element:c,annotation:d},Object(r.I)()&&this.textEdit&&(h=this.getBlazorTextEditArgs(h)),p=!1,l.parentNode.removeChild(l),u=void 0,this.bpmnModule?(c=this.bpmnModule.isBpmnTextAnnotation(this.activeLabel,this),u=this.bpmnModule.getTextAnnotationWrapper(c,this.activeLabel.id),(p=!!c)?l.textContent===s&&s===this.activeLabel.text?[3,5]:Object(r.I)()?this.textEdit&&window&&window[e]?(m={EventName:"textEdit",args:JSON.stringify(h)},[4,window[t].updateBlazorDiagramEvents(m,this)]):[3,2]:[3,3]:[3,5]):[3,5]):[3,11]):[3,11];case 1:h=I.sent()||h,I.label=2;case 2:return[3,4];case 3:this.triggerEvent(ve.textEdit,h),I.label=4;case 4:h.cancel||this.bpmnModule.updateTextAnnotationContent(c,this.activeLabel,s,this),I.label=5;case 5:return p?[3,10]:(c=this.nameTable[this.activeLabel.parentId],!(f=fs(c,this.activeLabel.id))||f instanceof il?i=Object(r.I)()&&"Text"===c.shape.type?{shape:{textContent:c.shape.content}}:{shape:{content:c.shape.content}}:(v=vs(c,f.id,!0),o[v]={content:f.content},i={annotations:o}),(g=this.eventHandler.isAddTextNode(c,!0))||l.textContent===s&&s===this.activeLabel.text?[3,9]:Object(r.I)()?window&&window[e]&&this.textEdit?(m={EventName:"textEdit",args:JSON.stringify(h)},[4,window[t].updateBlazorDiagramEvents(m,this)]):[3,7]:[3,8]);case 6:h=I.sent()||h,I.label=7;case 7:return[3,9];case 8:this.triggerEvent(ve.textEdit,h),I.label=9;case 9:u||(u=this.getWrapper(c.wrapper,this.activeLabel.id)),f.content===s||h.cancel||(c.parentId&&"UmlClassifier"===this.nameTable[c.parentId].shape.type&&-1===s.indexOf("+")&&-1===s.indexOf("-")&&-1===s.indexOf("#")&&-1===s.indexOf("~")&&-1===c.id.indexOf("_umlClass_header")&&(s=" + "+s),(c.isLane||c.isPhase)&&this.protectPropertyChange(!0),f instanceof il?n=Object(r.I)()&&"Text"===c.shape.type?{shape:{textContent:s}}:{shape:{content:s}}:(v=vs(c,f.id,!0),(y={})[v]={content:s},n={annotations:y}),(b=this.getIndex(c,c.id))&&((w={})[b]=i,(x={})[b]=n,Ps(c)===Pl?this.onPropertyChanged({nodes:x},{nodes:w}):this.onPropertyChanged({connectors:x},{connectors:w})),this.protectPropertyChange(!0),Object(r.I)()&&"Text"===c.shape.type?c.shape.textContent=s:f.content=s,this.protectPropertyChange(!1),this.updateSelector(),(c.isLane||c.isPhase)&&this.protectPropertyChange(!1)),g&&(this.removeObjectsFromLayer(c),this.removeFromAQuad(c),delete this.nameTable[this.activeLabel.parentId],""!==s&&(this.clearSelection(),O=uc(c),c=this.add(O),this.updateDiagramObject(c),this.commandHandler.oldSelectedObjects=Ts(this),this.commandHandler.select(this.nameTable[c.id]),this.commandHandler.updateBlazorSelector())),I.label=10;case 10:if(this.selectedItems.nodes.length){if(S=this.nameTable[this.activeLabel.parentId],(C=this.nameTable[S.parentId])&&"SwimLane"===C.shape.type||"SwimLane"===S.shape.type)if("LaneHeaderParent","PhaseHeaderParent","SwimLane"===S.shape.type&&(C=this.nameTable[this.activeLabel.parentId],S=c),S.isLane||S.isPhase)for(P=S.isLane?C.shape.lanes:C.shape.phases,j=0;j<P.length;j++)P[j].id===(S.LaneHeaderParent||S.PhaseHeaderParent)&&(P[j].header.annotation.content=S.annotations[0].content);else S.isHeader&&C.shape.hasHeader&&(C.shape.header.annotation.content=S.annotations[0].content);this.dataBind()}u.visible=!0,this.updateDiagramObject(c),this.diagramActions=this.diagramActions&~pe.TextEdit,this.activeLabel.isGroup&&this.endGroupAction(),this.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0},this.commandHandler.getBlazorOldValues(),Object(r.I)()&&(this.canEnableBlazorObject=!1),this.enableServerDataBinding(!0),I.label=11;case 11:return[2]}}))}))},t.prototype.getIndex=function(e,t){for(var i=Ps(e)===Pl?this.nodes:this.connectors,n=0;n<i.length;n++)if(i[n].id.toString()===t.toString())return n.toString();return null},t.prototype.getBlazorTextEditArgs=function(e){var t=Ps(e.element)===_r?{connectorId:e.element.id}:{nodeId:e.element.id},i={};return Ps(e.element)===Pl&&"Text"===e.element.shape.type?i.textNode=e.element.shape:i.annotationId=e.element.annotations[0].id,e={oldValue:e.oldValue,newValue:e.newValue,cancel:e.cancel,element:t,annotation:i}},t.prototype.canLogChange=function(){return!(!(this.diagramActions&pe.Render)||this.diagramActions&pe.ToolAction||this.diagramActions&pe.UndoRedo||this.diagramActions&pe.PublicMethod)},t.prototype.modelChanged=function(e,t){return!!(e.connectors||t.connectors||e.nodes||t.connectors||e.pageSettings||t.pageSettings||e.bridgeDirection||t.bridgeDirection)},t.prototype.resetDiagramActions=function(e){var t=!!e;this.diagramActions&pe.UndoRedo&&(!t||e===pe.UndoRedo)&&(this.diagramActions=this.diagramActions&~pe.UndoRedo),this.diagramActions&pe.PublicMethod&&(!t||e===pe.PublicMethod)&&(this.diagramActions=this.diagramActions&~pe.PublicMethod)},t.prototype.removeNode=function(e,t){this.removeObjectsFromLayer(e),this.removeFromAQuad(this.nameTable[e.id]);var i=document.getElementById(e.id+"_groupElement");if(delete this.nameTable[e.id],e.children&&delete this.groupTable[e.id],Object(r.I)())for(var n=0;n<this.nodes.length;n++)e.id===this.nodes[n].id&&this.UpdateBlazorDiagramModel(e,"Node",n);if(this.nodes.splice(this.nodes.indexOf(e),1),i.children&&i.children.length>0)for(var o=void 0,a=i.children.length-1;a>=0;a--){var s=i.children[a];t.length>0&&-1!==t.indexOf(s.id.split("_")[0])&&(o?i.parentNode.insertBefore(s,o):i.parentNode.insertBefore(s,i),o=s)}i&&i.parentNode.removeChild(i)},t.prototype.deleteGroup=function(e){var t=[];e.children&&(t=this.commandHandler.getChildren(e,[])),this.UpdateBlazorDiagramModelCollection(e);for(var i=0,n=t;i<n.length;i++){var r=n[i];this.nameTable[r.id]&&this.remove(r)}},t.prototype.updateObject=function(e,t,i){if(!(this.diagramActions&pe.ToolAction)){var n=e.wrapper.children[0].bounds;if(!this.commandHandler.checkBoundaryConstraints(void 0,void 0,n))if(e instanceof Pl){for(var r=t,o=0,a=Object.keys(i);o<a.length;o++){switch(c=a[o]){case"width":e.width=r.width;break;case"height":e.height=r.height;break;case"offsetX":e.offsetX=r.offsetX;break;case"offsetY":e.offsetY=r.offsetY;break;case"rotateAngle":e.rotateAngle=r.rotateAngle}}this.nodePropertyChange(e,i,t)}else{for(var s=0,l=Object.keys(i);s<l.length;s++){var c=l[s],d=t,h=e.sourcePoint,p=e.targetPoint;switch(c){case"sourcePoint":h.x=d.sourcePoint.x||h.x,h.y=d.sourcePoint.y||h.y;break;case"targetPoint":p.x=d.targetPoint.x||p.x,p.y=d.targetPoint.y||p.y}}this.connectorPropertyChange(e,i,t)}}},t.prototype.nodePropertyChangeExtend=function(e,t,i,n){return void 0!==i.style&&"Bpmn"!==e.shape.type&&(is(i.style,e.wrapper.children[0]),n=!0),void 0!==i.shadow&&(this.updateShadow(e.shadow,i.shadow),n=!0),void 0!==i.constraints&&(t.constraints&ne.Select&&!(i.constraints&ne.Select)&&od(this,e)?this.clearSelection():(this.updateThumbConstraints(this.selectedItems.nodes,this.selectedItems),this.updateSelector(),n=!0)),this.swimLaneNodePropertyChange(e,t,i,n),n},t.prototype.swimLaneNodePropertyChange=function(e,t,i,n){if("SwimLane"===e.shape.type&&!this.currentSymbol){if(t.shape){var r=i.shape,o=e.shape,a="Horizontal"===o.orientation,s=o.padding,l=t.shape,c=e.wrapper.children[0],d=void 0,h=void 0,p=void 0;if(l.lanes||l.phases){if(l.lanes)for(var u=0,f=Object.keys(r.lanes);u<f.length;u++){var g=f[u],m=Number(g),v=l.lanes[m],y=void 0,b=r.lanes[m];if(b&&b.header&&(p=o.lanes[m].header.id,d=v.header,h=b.header,this.nodePropertyChange(this.nameTable[p],d,h)),v.children)for(var w=0,x=Object.keys(v.children);w<x.length;w++){var O=x[w];p=o.lanes[m].children[Number(O)].id;var S=this.nameTable[p];d=v.children[Number(O)],h=b.children[Number(O)],this.nodePropertyChange(S,d,h)}v.width&&!a&&(y=o.phases&&o.phaseSize?m+1:m,c.updateColumnWidth(y,b.width,!0,s),this.updateDiagramElementQuad()),v.height&&a&&(y=o.header&&o.hasHeader?m+1:m,y+=o.phases&&o.phaseSize?1:0,c.updateRowHeight(y,b.height,!0,s),this.updateDiagramElementQuad())}if(r.phases)for(var C=0,P=Object.keys(r.phases);C<P.length;C++){var j=P[C],I=(m=Number(j),r.phases[m]),E=void 0,T=o.header&&o.hasHeader?1:0;if(I&&I.header&&(p=o.phases[m].header.id,d=l.phases[m].header,h=I.header,this.nodePropertyChange(this.nameTable[p],d,h)),I.offset){if(0===m)E=I.offset;else{var A=o.phases[m-1];(E=I.offset-A.offset)<=0&&(E=I.offset)}a?(c.updateColumnWidth(m,E,!0,s),fa(e,this,c.rows[T].cells[m],m)):c.updateRowHeight(T+m,E,!0,s)}}}if(void 0!==r.phaseSize&&o.phases.length)if(0===r.phaseSize||0===l.phaseSize)if(l.phaseSize)a?(c.removeRow(o.header&&o.hasHeader?1:0),e.height=e.wrapper.height=c.height):(o.header&&o.hasHeader&&(c.rows[0].cells[1].children=c.rows[0].cells[0].children,c.rows[0].cells[1].columnSpan=c.rows[0].cells[0].columnSpan-1,c.rows[0].cells[0].children=[]),c.removeColumn(0));else{if(a){var D=new zo;D.height=r.phaseSize,c.addRow(o.header&&o.hasHeader?1:0,D,!0),e.height=e.wrapper.height+=r.phaseSize}else{var k=new No;k.width=r.phaseSize,c.addColumn(0,k,!0),o.header&&o.hasHeader&&(c.rows[0].cells[0].children=c.rows[0].cells[1].children,c.rows[0].cells[1].children=[],c.rows[0].cells[1].columnSpan=1,c.rows[0].cells[1].minWidth=void 0,c.rows[0].cells[0].columnSpan=o.lanes.length+1)}for(var M=0;M<o.phases.length;M++)""===o.phases[M].id&&(o.phases[M].id=lc()),$o(c,this,e,o.header&&o.hasHeader?1:0,a,M)}else a?c.updateRowHeight(o.header&&o.hasHeader?1:0,r.phaseSize,!1):c.updateColumnWidth(0,r.phaseSize,!1);if(o.header&&o.hasHeader&&l.header){var L=c.rows[0].cells[0].children[0].id,R=this.nameTable[L];this.nodePropertyChange(R,l.header,r.header)}e.height=e.wrapper.height=c.height,e.width=e.wrapper.width=c.width}else if(t.constraints){var z=t.constraints&ne.Select,N=i.constraints&ne.Select;if(z!==N){r=e.shape;(R=this.nameTable[e.id+r.header.id]).constraints=N?R.constraints|ne.Select:R.constraints&~ne.Select;var B=void 0;if(r.phaseSize>0)for(var _=0;_<r.phases.length;_++)(B=this.nameTable[e.id+r.phases[_].id+"_header"]).constraints=N?B.constraints|ne.Select:B.constraints&~ne.Select;var H=void 0,W=void 0,F=r.phases.length||1;for(_=0;_<r.lanes.length;_++)for(var q=0;q<F;q++)(H=this.nameTable[e.id+r.lanes[_].id+q]).constraints=N?H.constraints|ne.Select:H.constraints&~ne.Select,0===q&&((W=this.nameTable[e.id+r.lanes[_].id+"_"+q+"_header"]).constraints=N?W.constraints|ne.Select:W.constraints&~ne.Select)}}n=!0}return n},t.prototype.insertValue=function(e,t){if(!(this.blazorActions&Z.GroupClipboardInProcess)){for(var i=void 0,n=t?this.oldNodeObjects:this.oldConnectorObjects,r=0;r<n.length;r++)n[r].id===e.id&&(i=!0);i||(t?this.oldNodeObjects.push(e):this.oldConnectorObjects.push(e))}},t.prototype.nodePropertyChange=function(e,t,i,n,o,a){if(this.canEnableBlazorObject&&"helper"!=e.id){var s=uc(e);this.insertValue(s,!0)}var l,c=e.wrapper.outerBounds,d=e.wrapper.bounds,h=!1;if(void 0!==i.width&&(e.children?e.container?e.wrapper.width=i.width:this.scaleObject(e,i.width,!0):(e.wrapper.children[0].width=i.width,l=!0,h=!0)),void 0!==i.height&&(e.children?e.container?e.wrapper.height=i.height:this.scaleObject(e,i.height,!1):(e.wrapper.children[0].height=i.height,l=!0,h=!0)),l=this.nodePropertyChangeExtend(e,t,i,l),void 0!==i.constraints&&to(t)!==to(i)&&(e.wrapper.children[0].shadow=to(e)?e.shadow:null),void 0!==i.offsetX){if("None"!==e.wrapper.flip){if(e.offsetX!==e.wrapper.offsetX&&void 0!==t.offsetX){var p=i.offsetX-t.offsetX;e.wrapper.offsetX=e.wrapper.offsetX+p,this.updateFlipOffset(e.wrapper,p,0,e.wrapper.flip)}}else e.wrapper.offsetX=i.offsetX;l=!0,h=!0}if(void 0!==i.offsetY){if("None"!==e.wrapper.flip){if(e.offsetY!==e.wrapper.offsetY&&void 0!==t.offsetY){var u=i.offsetY-t.offsetY;e.wrapper.offsetY=e.wrapper.offsetY+u,this.updateFlipOffset(e.wrapper,0,u,e.wrapper.flip)}}else e.wrapper.offsetY=i.offsetY;l=!0,h=!0}if(void 0!==i.pivot&&(e.wrapper.pivot=i.pivot,l=!0),void 0!==i.minWidth&&(e.wrapper.minWidth=e.wrapper.children[0].minWidth=i.minWidth,l=!0,h=!0),void 0!==i.minHeight&&(e.wrapper.minHeight=e.wrapper.children[0].minHeight=i.minHeight,l=!0,h=!0),void 0!==i.maxWidth&&(e.wrapper.maxWidth=i.maxWidth,l=!0,h=!0),void 0!==i.maxHeight&&(e.wrapper.maxHeight=i.maxHeight,l=!0,h=!0),void 0!==i.flip)if(e.wrapper.flip=i.flip,l=!0,h=!0,e.wrapper.elementActions&re.ElementIsGroup){if(Es(e.wrapper,e.offsetX,e.offsetY,this,i.flip),e&&e.children)for(var f=0,g=e.children;f<g.length;f++){var m=g[f],v=this.nameTable[m];v.wrapper.flip=i.flip,this.updatePorts(v,i.flip)}}else e.wrapper.children[0].flip=i.flip,this.updatePorts(e,i.flip);if(void 0!==i.rotateAngle&&e.constraints&ne.Rotate&&(e.children&&o&&this.commandHandler.rotateObjects(e,[e],e.rotateAngle-e.wrapper.rotateAngle,{x:e.offsetX,y:e.offsetY},!1),e.wrapper.rotateAngle=i.rotateAngle,l=!0,h=!0),void 0!==i.backgroundColor&&(e.wrapper.style.fill=i.backgroundColor),void 0!==i.visible&&this.updateElementVisibility(e.wrapper,e,e.visible),void 0!==i.shape&&"Bpmn"!==e.shape.type&&(l=!0,os(i,e,t,this),h=!0),i.margin&&(l=!0,this.updateMargin(e,i),h=!0),((void 0!==i.shape&&void 0===i.shape.type||void 0!==i.width||void 0!==i.height||void 0!==i.style)&&"Bpmn"===e.shape.type&&this.bpmnModule||Object(r.I)()&&i&&i.shape&&"Bpmn"===i.shape.type)&&(l=!0,h=!0,this.bpmnModule.updateBPMN(i,t,e,this)),"UmlActivity"===e.shape.type&&(!Object(r.I)()&&"FinalNode"===e.shape.shape||Object(r.I)()&&"FinalNode"===e.shape.umlActivityShape)&&(l=!0,h=!0,this.updateUMLActivity(i,t,e,this)),(e.shape&&"UmlClassifier"===e.shape.type||e.parentId&&this.nameTable[e.parentId]&&"UmlClassifier"===this.nameTable[e.parentId].shape.type)&&(l=!0,h=!0),void 0!==i.ports)for(var y=0,b=Object.keys(i.ports);y<b.length;y++){var w=b[y],x=Number(w);l=!0;var O=i.ports[w],S=e.ports[x];this.updatePort(O,S,e.wrapper),h=!0}if(void 0!==i.annotation||void 0!==i.annotations||void 0!==i.width)for(var C=0,j=Object.keys(i.annotations||e.annotations);C<j.length;C++){w=j[C],x=Number(w);l=!0;O=void 0;O=i.annotation?i.annotation:i.annotations?i.annotations[w]:e.annotations;var I=e.annotations[x];if(I){var E=!!e.width;this.updateAnnotation(O,I,e.wrapper,e,E);var T=this.nameTable[e.parentId];if(T&&"SwimLane"===T.shape.type){if(e.isLane||e.isPhase)for(var A=e.isLane?T.shape.lanes:T.shape.phases,D=0;D<A.length;D++)if(A[D].id===(e.LaneHeaderParent||e.PhaseHeaderParent)){A[D].header.annotation.content=e.annotations[0].content,A[D].header.annotation.style=e.annotations[0].style;break}}}}if(void 0===i.expandIcon&&void 0===i.collapseIcon&&void 0===i.isExpanded||(this.updateIcon(e),this.updateDefaultLayoutIcons(e),void 0!==i.isExpanded&&this.commandHandler.expandNode(e,this),l=!0),void 0!==i.fixedUserHandles){x=void 0,O=void 0;for(var k=void 0,M=0,L=Object.keys(i.fixedUserHandles);M<L.length;M++){w=L[M];x=Number(w),l=!0,i.fixedUserHandles[x]&&(O=i.fixedUserHandles[x]),(k=e.fixedUserHandles[x])&&this.updateNodefixedUserHandle(O,k,e.wrapper,e)}}if(void 0!==i.tooltip&&this.updateTooltip(e,i),l){if(void 0!==this.bpmnModule&&this.bpmnModule.updateTextAnnotationProp(e,{offsetX:t.offsetX||e.offsetX,offsetY:t.offsetY||e.offsetY},this),this.checkSelectedItem(e)&&e.wrapper.children[0]instanceof Be&&e.wrapper.children[0].refreshTextElement(),e.wrapper.measure(new P(e.wrapper.bounds.width,e.wrapper.bounds.height),e.id,this.onLoadImageSize.bind(this)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateObject(e,t,i),"SwimLane"===e.shape.type&&!this.currentSymbol&&!(this.diagramActions&pe.ToolAction)){ga(this,e);var R=e.wrapper.children[0],z=e.shape,N=R.columnDefinitions().length;if("Horizontal"===z.orientation){x=z.header&&z.hasHeader?1:0;fa(e,this,R.rows[x].cells[N-1],N-1)}e.wrapper.measure(new P(e.wrapper.bounds.width,e.wrapper.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize)}if(this.diagramActions&pe.ToolAction&&!(this.diagramActions&pe.UndoRedo)||this.checkSelectedItem(e)&&this.updateSelector(),!1===c.equals(c,e.wrapper.outerBounds)&&this.updateQuad(e),n?e&&e.visible&&e.outEdges&&this.updateIconVisibility(e,0!==e.outEdges.length):this.commandHandler.connectorSegmentChange(e,d,void 0!==i.rotateAngle),void 0!==this.bpmnModule&&this.bpmnModule.updateDocks(e,this),this.updateGroupOffset(e),e.parentId&&this.nameTable[e.parentId]){var B=this.nameTable[e.parentId];B.wrapper.measure(new P(B.wrapper.width,e.wrapper.height)),B.wrapper.arrange(B.wrapper.desiredSize),B.offsetX=B.wrapper.offsetX,B.offsetY=B.wrapper.offsetY}if(!1===d.equals(d,e.wrapper.bounds)&&(this.updateGroupSize(e),e.children&&this.updateGroupOffset(e)),"SwimLane"===e.shape.type&&!this.currentSymbol&&this.diagramActions&pe.Render)ca(ia(this,e.wrapper.children[0]),this);if(!this.preventNodesUpdate&&((!lo(this)||lo(this)&&this.scroller.oldCollectionObjects.indexOf(e.id)>-1)&&(this.diagramActions&pe.PreventZIndexOnDragging?this.updateDiagramObject(e,!0):this.updateDiagramObject(e)),!n&&h&&(this.lineRoutingModule&&this.diagramActions&&this.constraints&ae.LineRouting&&"helper"!==e.id&&(this.diagramActions&pe.ToolAction||this.lineRoutingModule.renderVirtualRegion(this,!0)),this.updateConnectorEdges(e),"helper"!==e.id&&!(this.diagramActions&pe.ToolAction))))for(var _=this.spatialSearch.findObjects(e.wrapper.outerBounds),H=0;H<_.length;H++){var W=_[H];W instanceof _r&&this.connectorPropertyChange(_[H],{},{sourceID:W.sourceID,targetID:W.targetID,sourcePortID:W.sourcePortID,targetPortID:W.targetPortID,sourcePoint:W.sourcePoint,targetPoint:W.targetPoint})}"New"!==e.status&&this.diagramActions&&(e.status="Update")}if(!a){var F=e,q={element:F,cause:this.diagramActions,oldValue:t,newValue:i};Object(r.I)()&&this.propertyChange&&(q.element={node:Ls(F)},q.oldValue={node:Ls(t)},q.newValue={node:Ls(i)}),this.triggerEvent(ve.propertyChange,q)}},t.prototype.updatePorts=function(e,t){if(e&&e.ports.length>0)for(var i=0,n=Object.keys(e.ports);i<n.length;i++){var r=n[i],o=Number(r),a=e.ports[o],s=this.getWrapper(e.wrapper,a.id);(s=Is(s,t,a)).relativeMode="Point",s.measure(new P(s.width,s.height)),s.arrange(s.desiredSize)}},t.prototype.updateFlipOffset=function(e,t,i,n){if(e.hasChildren())for(var r=0,o=e.children;r<o.length;r++){var a=o[r];"Horizontal"!==n&&"Both"!==n||(a.flipOffset.x=a.flipOffset.x+t),"Vertical"!==n&&"Both"!==n||(a.flipOffset.y=a.flipOffset.y+i),(a instanceof He||a instanceof ze)&&this.updateFlipOffset(a,t,i,n)}},t.prototype.updateUMLActivity=function(e,t,i,n){if(void 0!==e.width||void 0!==e.height){var r=i.wrapper.children[0].children[0];r.width=e.width,r.height=e.height;var o=i.wrapper.children[0].children[1];o.width=e.width/1.5,o.height=e.height/1.5}},t.prototype.updateConnectorProperties=function(e){if(this.preventConnectorsUpdate){-1===this.selectionConnectorsList.indexOf(e)&&this.selectionConnectorsList.push(e)}else{var t={sourcePoint:e.sourcePoint,targetPoint:e.targetPoint,sourceID:e.sourceID,targetID:e.targetID,sourcePortID:e.sourcePortID,targetPortID:e.targetPortID};this.connectorPropertyChange(e,{},t,void 0,!0)}},t.prototype.updateConnectorEdges=function(e){if(e.inEdges.length>0)for(var t=0;t<e.inEdges.length;t++)this.updateConnectorProperties(this.nameTable[e.inEdges[t]]);if(e.outEdges.length>0)for(var i=0;i<e.outEdges.length;i++)this.updateConnectorProperties(this.nameTable[e.outEdges[i]]);e.parentId&&this.nameTable[e.parentId]&&this.updateConnectorEdges(this.nameTable[e.parentId])},t.prototype.connectorProprtyChangeExtend=function(e,t,i,n){return void 0!==i.type&&i.type!==t.type&&e.segments.length>0&&void 0===i.segments&&(e.segments=[]),void 0!==i.shape&&void 0!==e.shape&&e.shape&&"Bpmn"===e.shape.type&&this.bpmnModule&&this.bpmnModule.updateBPMNConnector(e,t,i,this),void 0!==e.constraints?(this.updateThumbConstraints(this.selectedItems.connectors,this.selectedItems),!0):n},t.prototype.connectorPropertyChange=function(e,t,i,n,r){if(this.canEnableBlazorObject){var o=uc(e);this.insertValue(o,!1)}var a,s,l,c,d,h=e.wrapper.bounds,p=!1,u=[];if(p=this.connectorProprtyChangeExtend(e,t,i,p),void 0!==i.visible&&this.updateElementVisibility(e.wrapper,e,e.visible),void 0!==i.sourcePoint||void 0!==i.targetPoint||void 0!==i.sourceID||void 0!==i.targetID||void 0!==i.targetPadding||void 0!==i.sourcePortID||void 0!==i.targetPortID||void 0!==i.sourcePadding||void 0!==i.type||void 0!==i.segments||void 0!==i.flip){if(void 0!==i.sourceID&&i.sourceID!==t.sourceID||i.sourcePortID){var f=this.nameTable[e.sourceID];if(s=this.findInOutConnectPorts(f,!1),(!f||ro(f)||""!==e.sourcePortID&&oo(s))&&(e.sourceWrapper=f?this.getEndNodeWrapper(f,e,!0):void 0,e.sourcePortID&&void 0===i.sourcePortID&&(e.sourcePortWrapper=f?this.getWrapper(f.wrapper,e.sourcePortID):void 0),this.removePortEdges(this.nameTable[t.sourceID]||f,t.sourcePortID||e.sourcePortID,e.id,!1)),void 0!==i.sourceID&&void 0!==t.sourceID&&""!==t.sourceID){var g=this.nameTable[t.sourceID];void 0!==g&&g.outEdges&&-1!==g.outEdges.indexOf(e.id)&&ls(g.outEdges,e.id)}this.updateEdges(e)}if(void 0!==i.targetID&&i.targetID!==t.targetID){var m=this.nameTable[i.targetID];if(a=this.findInOutConnectPorts(m,!0),(!m||io(m)||""!==e.targetPortID&&no(a))&&(e.targetWrapper=m?this.getEndNodeWrapper(m,e,!1):void 0,e.targetPortID&&void 0===i.targetPortID&&(e.targetPortWrapper=m?this.getWrapper(m.wrapper,e.targetPortID):void 0),this.removePortEdges(this.nameTable[t.targetID]||m,t.targetPortID||e.targetPortID,e.id,!0)),void 0!==t&&void 0!==t.targetID&&""!==t.targetID){var v=this.nameTable[t.targetID];void 0!==v&&v.inEdges&&-1!==v.inEdges.indexOf(e.id)&&ls(v.inEdges,e.id)}this.updateEdges(e)}if(void 0!==i.sourcePortID&&i.sourcePortID!==t.sourcePortID)e.sourceID&&this.nameTable[e.sourceID]&&(l=this.nameTable[e.sourceID].wrapper),!(f=this.nameTable[e.sourceID])||ro(f)||""!==e.sourcePortID&&oo(s)?e.sourcePortWrapper=l?this.getWrapper(l,i.sourcePortID):void 0:""!==e.sourcePortID||ro(f)||(e.sourcePortWrapper=void 0);if(void 0!==i.targetPortID&&i.targetPortID!==t.targetPortID){m=this.nameTable[e.targetID];e.targetID&&this.nameTable[e.targetID]&&(c=this.nameTable[e.targetID].wrapper),!m||io(m)||""!==e.targetPortID&&no(a)?e.targetPortWrapper=c?this.getWrapper(c,i.targetPortID):void 0:""!==e.targetPortID||io(m)||(e.targetPortWrapper=void 0)}void 0!==i.flip&&(e.flip=i.flip,js(e)),"Orthogonal"===e.type&&this.lineRoutingModule&&this.diagramActions&&this.constraints&ae.LineRouting&&!(this.diagramActions&pe.ToolAction)&&(this.lineRoutingModule.renderVirtualRegion(this,!0),this.lineRoutingModule.refreshConnectorSegments(this,e,!1)),u=this.getPoints(e)}void 0!==i.style&&is(i.style,e.wrapper.children[0]),(u.length>0||void 0!==i.sourceDecorator||void 0!==i.targetDecorator&&(-1!==(d=Object.keys(i.targetDecorator)).indexOf("shape")||-1!==d.indexOf("pathData")||-1!==d.indexOf("width")||-1!==d.indexOf("height"))||void 0!==i.cornerRadius)&&(cs(e,u.length>0?u:e.intermediatePoints,this.diagramActions),void 0!==i.type&&(p=!0),u.length>0&&(e.wrapper.measure(new P(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateConnectorAnnotation(e),this.updateConnectorfixedUserHandles(e),this.updateObject(e,t,i))),(i.sourcePoint||i.targetPoint||i.segments)&&this.diagramActions===pe.Render&&(p=!0),"Bpmn"===e.shape.type&&"Default"===e.shape.sequence&&this.commandHandler.updatePathElementOffset(e),n||this.updateBridging(),this.updateAnnotations(i,e),this.updatefixedUserHandle(i,e),e.wrapper.measure(new P(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize),!1===h.equals(h,e.wrapper.bounds)&&(this.updateQuad(e),this.updateGroupSize(e)),!0!==p||!this.checkSelectedItem(e)||this.diagramActions&pe.ToolAction&&!(this.diagramActions&pe.UndoRedo)||this.updateSelector(),this.preventConnectorsUpdate||(!lo(this)||lo(this)&&this.scroller.oldCollectionObjects.indexOf(e.id)>-1)&&(this.diagramActions&pe.PreventZIndexOnDragging?this.updateDiagramObject(e,!0):this.updateDiagramObject(e)),this.diagramActions&&"New"!==e.status&&(e.status="Update"),this.triggerPropertyChange(r,e,t,i)},t.prototype.removePortEdges=function(e,t,i,n){if(e)for(var r=0;r<e.ports.length;r++){var o=e.ports[r];if(o.id===t)ls(n?o.inEdges:o.outEdges,i)}},t.prototype.getpropertyChangeArgs=function(e,t,i,n){return n.element={connector:Ls(e)},n.oldValue={connector:Ls(t)},n.newValue={connector:Ls(i)},n},t.prototype.triggerPropertyChange=function(e,t,i,n){if(!e){var o=t,a={element:Ls(o),cause:this.diagramActions,oldValue:Ls(i),newValue:Ls(n)};Object(r.I)()&&(a=this.getpropertyChangeArgs(o,i,n,a)),this.triggerEvent(ve.propertyChange,a)}},t.prototype.findInOutConnectPorts=function(e,t){var i={};return e&&(i=ms(e,t)),i},t.prototype.getPoints=function(e,t){var i=!!this.lineDistributionModule;return e.getConnectorPoints(e.type,t,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0,i)},t.prototype.updateNodeProperty=function(e,t,i){if(void 0===t)this.updateElementVisibility(e,this.nameTable[e.id],t);else{e.style.opacity=i;for(var n=0;n<e.children.length;n++)e.children[n]instanceof ze&&this.updateNodeProperty(e.children[n],void 0,i),e.children[n].style.opacity=i}},t.prototype.checkSelectedItem=function(e){var t=this.selectedItems,i=!1,n=[];return(n=n.concat(t.nodes,t.connectors)).length>0&&e.id===n[n.length-1].id&&(i=!0),i},t.prototype.updateDiagramContainerVisibility=function(e,t){if(e instanceof ze)for(var i=0;i<e.children.length;i++)this.updateDiagramContainerVisibility(e.children[i],t);e.visible=t},t.prototype.updateElementVisibility=function(e,t,i){if(void 0!==i){if(e.visible=i,t instanceof Pl){if(t.children)for(var n=0,r=t.children;n<r.length;n++){var o=r[n];this.updateElementVisibility(this.nameTable[o].wrapper,this.nameTable[o],i)}else e.children[0].visible=i,this.updateDiagramContainerVisibility(e.children[0],i),"Bpmn"===t.shape.type&&this.bpmnModule&&this.bpmnModule.updateElementVisibility(t,i,this);if(t.ports)for(var a=0,s=t.ports;a<s.length;a++){var l=s[a];if(l.visibility&J.Visible)(g=this.getWrapper(e,l.id)).visible=i}if(t.annotations)for(var c=0,d=t.annotations;c<d.length;c++){var h=d[c];(g=this.getWrapper(e,h.id)).visible=i}}else for(var p=0;p<3;p++)e.children[p].visible=i;if(t.annotations)for(var u=0,f=t.annotations;u<f.length;u++){h=f[u];(g=this.getWrapper(e,h.id)).visible=i}if(t.expandIcon||t.collapseIcon){var g;if(g=this.getWrapper(e,"icon_content")){for(p=0;p<g.children.length;p++)g.children[p].visible=i;g.visible=i}t&&t.visible&&t.outEdges&&this.updateIconVisibility(t,0!==t.outEdges.length)}!1===i&&this.unSelect(this.nameTable[e.id]),(t instanceof Pl&&!this.preventNodesUpdate||t instanceof _r&&!this.preventConnectorsUpdate)&&this.diagramActions&&this.updateDiagramObject(this.nameTable[e.id],void 0,!0)}},t.prototype.updateAnnotations=function(e,t){if(void 0!==e.annotations)for(var i=0,n=Object.keys(e.annotations);i<n.length;i++){var r=n[i],o=Number(r),a=e.annotations[r],s=t.annotations[o];this.updateAnnotation(a,s,t.wrapper,t)}},t.prototype.updatefixedUserHandle=function(e,t){if(void 0!==e.fixedUserHandles)for(var i=void 0,n=void 0,r=void 0,o=0,a=Object.keys(e.fixedUserHandles);o<a.length;o++){var s=a[o];i=Number(s),n=e.fixedUserHandles[s],r=t.fixedUserHandles[i],this.updateConnectorfixedUserHandle(n,r,t.wrapper,t)}},t.prototype.updateConnectorfixedUserHandle=function(e,t,i,n,r){var o,a=!1;void 0!==(o=this.getWrapper(i,t.id))&&(void 0!==e.width&&(o.width=e.width,a=!0),void 0!==e.height&&(o.height=e.height,a=!0),t instanceof gr&&void 0!==e.offset&&n.updateAnnotation(t,n.intermediatePoints,n.wrapper.bounds,o),t instanceof gr&&e.displacement&&(void 0===e.displacement.x&&void 0===e.displacement.y||(a=!0)),void 0!==e.fill&&(o.style.fill=e.fill),void 0!==e.handleStrokeColor&&(o.style.strokeColor=e.handleStrokeColor),void 0!==e.handleStrokeWidth&&(o.style.strokeWidth=e.handleStrokeWidth),void 0!==e.visibility&&(o.visible=e.visibility),void 0!==e.cornerRadius&&(o.cornerRadius=e.cornerRadius),this.updatefixedUserHandleContent(e,a,o,n,t,i),!0===a&&(o.measure(new P(o.width,o.height)),o.arrange(o.desiredSize)))},t.prototype.updateAnnotation=function(e,t,i,n,r){var o,a=!1;if(void 0!==(o=this.getWrapper(i,t.id))){if(void 0!==e.width&&void 0!==e.height&&(o.width=e.width,o.height=e.height,a=!0),void 0!==e.rotateAngle&&(o.rotateAngle=e.rotateAngle),!r||o instanceof dr||o.refreshTextElement(),t instanceof rt&&void 0!==e.segmentAngle&&(o.rotateAngle=t.rotateAngle),t instanceof nt&&void 0!==e.offset){var s=e.offset;a=!0;var l=void 0!==s.x?s.x:t.offset.x,c=void 0!==s.y?s.y:t.offset.y;o.setOffsetWithRespectToBounds(l,c,"Fraction"),o.relativeMode="Point"}else t instanceof rt&&(void 0!==e.offset||void 0!==e.segmentAngle)&&n.updateAnnotation(t,n.intermediatePoints,n.wrapper.bounds,o);if(t instanceof rt&&e.displacement&&(void 0===e.displacement.x&&void 0===e.displacement.y||(a=!0)),void 0!==e.margin&&(a=!0,void 0!==e.margin.bottom&&(o.margin.bottom=e.margin.bottom),void 0!==e.margin.top&&(o.margin.top=e.margin.top),void 0!==e.margin.left&&(o.margin.left=e.margin.left),void 0!==e.margin.right&&(o.margin.right=e.margin.right)),(a||r)&&(o.width=t.width||n.width,t.template&&(o.width=o.width||o.actualSize.width,o.height=t.height||n.height||o.actualSize.height)),void 0!==e.horizontalAlignment&&(o.horizontalAlignment=e.horizontalAlignment,a=!0),void 0!==e.verticalAlignment&&(o.verticalAlignment=e.verticalAlignment,a=!0),void 0!==e.visibility&&(o.visible=!(!i.visible||!e.visibility)),void 0!==e.constraints){o.constraints&ie.Select&&!(e.constraints&ie.Select)&&od(this,n,!1,o),o.constraints=e.constraints}void 0!==e.style&&is(e.style,o),void 0!==e.hyperlink&&function(e,t,i){for(var n=t,r=n.hyperlink,o=0,a=Object.keys(e);o<a.length;o++)switch(a[o]){case"color":n.style.color=r.color=e.color;break;case"content":n.content=r.content=e.content||r.link;break;case"link":var s=i.style;n.style.color=e.link?r.color:s.color,n.style.textDecoration=e.link?r.textDecoration:i.style.textDecoration,n.content=e.link?r.content||e.link:i.content,r.link=e.link;break;case"textDecoration":n.style.textDecoration=r.textDecoration=e.textDecoration}}(e.hyperlink,o,t),this.updateAnnotationContent(e,a,o,n,t,i),!0===a&&(o.measure(new P(o.width,o.height)),o.arrange(o.desiredSize)),o instanceof dr||o.refreshTextElement()}},t.prototype.updatefixedUserHandleContent=function(e,t,i,n,r,o){void 0!==e&&this.updateConnectorfixedUserHandleWrapper(i,n,r,o)},t.prototype.updateConnectorfixedUserHandleWrapper=function(e,t,i,n){for(var r=0,o=this.views;r<o.length;r++){var a=o[r];ec(e.id+"_groupElement",a),ec(e.id+"_html_element",a)}if(t instanceof _r){var s=t.wrapper.children[0],l=new _(s.offsetX-s.width/2,s.offsetY-s.height/2,s.width,s.height);e=t.getfixedUserHandle(t.fixedUserHandles[t.fixedUserHandles.length-1],t.intermediatePoints,l)}for(var c=0;c<n.children.length;c++)e.id===n.children[c].id&&n.children.splice(c,1,e)},t.prototype.updateAnnotationContent=function(e,t,i,n,o,a){void 0!==e.content&&(i&&(!0,"UmlActivity"===n.shape.type&&(Object(r.I)()&&"StructuredNode"===n.shape.umlActivityShape||!Object(r.I)()&&"StructuredNode"===n.shape.shape)?i.content="<<"+e.content+">>":i.content=e.content),i instanceof dr&&this.updateAnnotationWrapper(i,n,o,a)),void 0!==e.template&&(i.content=e.template,this.updateAnnotationWrapper(i,n,o,a))},t.prototype.updateAnnotationWrapper=function(e,t,i,n){for(var r=0,o=this.views;r<o.length;r++){var a=o[r];ec(e.id+"_groupElement",a),ec(e.id+"_html_element",a)}if(t instanceof Pl)e=t.initAnnotationWrapper(i,this.element.id);else if(t instanceof _r){var s=t.wrapper.children[0],l=new _(s.offsetX-s.width/2,s.offsetY-s.height/2,s.width,s.height);e=t.getAnnotationElement(t.annotations[t.annotations.length-1],t.intermediatePoints,l,this.getDescription,this.element.id)}for(var c=0;c<n.children.length;c++)e.id===n.children[c].id&&n.children.splice(c,1,e)},t.prototype.updateNodefixedUserHandle=function(e,t,i,n){var r,o=!1;if(void 0!==(r=this.getWrapper(i,t.id))){if(void 0!==e.width&&(r.actualSize.width=e.width,o=!0),void 0!==e.height&&(r.height=e.height,o=!0),t instanceof fr&&void 0!==e.offset){var a=e.offset;o=!0;var s=void 0!==a.x?a.x:t.offset.x,l=void 0!==a.y?a.y:t.offset.y;r.setOffsetWithRespectToBounds(s,l,"Fraction"),r.relativeMode="Point"}void 0!==e.margin&&(o=!0,void 0!==e.margin.bottom&&(r.margin.bottom=e.margin.bottom),void 0!==e.margin.top&&(r.margin.top=e.margin.top),void 0!==e.margin.left&&(r.margin.left=e.margin.left),void 0!==e.margin.right&&(r.margin.right=e.margin.right)),void 0!==e.visibility&&(r.visible=e.visibility),void 0!==e.fill&&(r.style.fill=e.fill),void 0!==e.handleStrokeColor&&(r.style.strokeColor=e.handleStrokeColor),void 0!==e.handleStrokeWidth&&(r.style.strokeWidth=e.handleStrokeWidth),void 0!==e.cornerRadius&&(r.cornerRadius=e.cornerRadius),this.updatefixedUserHandleWrapper(r,n,t,i),!0===o&&(r.measure(new P(r.width,r.height)),r.arrange(r.desiredSize))}},t.prototype.updatefixedUserHandleWrapper=function(e,t,i,n){for(var r=0,o=this.views;r<o.length;r++){var a=o[r];ec(e.id+"_groupElement",a),ec(e.id+"_html_element",a)}t instanceof Pl&&(e=t.initfixedUserHandles(i));for(var s=0;s<n.children.length;s++)e.id===n.children[s].id&&n.children.splice(s,1,e)},t.prototype.updatePort=function(e,t,i){var n,r=!1;if(void 0!==(n=this.getWrapper(i,t.id))){if(void 0!==e.offset){r=!0;var o=void 0!==e.offset.x?e.offset.x:t.offset.x,a=void 0!==e.offset.y?e.offset.y:t.offset.y;n.setOffsetWithRespectToBounds(o,a,"Fraction"),n.relativeMode="Point"}if(void 0!==e.width&&(r=!0,n.width=e.width),void 0!==e.height&&(r=!0,n.height=e.height),void 0!==e.visibility&&(n.visible=!(!i.visible||!us(t,J.Visible))),void 0!==e.margin&&(r=!0,void 0!==e.margin.bottom&&(n.margin.bottom=e.margin.bottom),void 0!==e.margin.top&&(n.margin.top=e.margin.top),void 0!==e.margin.right&&(n.margin.right=e.margin.right),void 0!==e.margin.left&&(n.margin.left=e.margin.left)),void 0!==e.horizontalAlignment&&(r=!0,n.horizontalAlignment=e.horizontalAlignment),void 0!==e.verticalAlignment&&(r=!0,n.verticalAlignment=e.verticalAlignment),void 0!==e.style&&(void 0!==e.style.fill&&(n.style.fill=e.style.fill),void 0!==e.style.opacity&&(n.style.opacity=e.style.opacity),void 0!==e.style.strokeColor&&(n.style.strokeColor=e.style.strokeColor),void 0!==e.style.strokeWidth&&(n.style.strokeWidth=e.style.strokeWidth),void 0!==e.style.strokeDashArray&&(n.style.strokeDashArray=e.style.strokeDashArray)),void 0!==e.shape&&n){var s=ot(e.shape);n.data=s,n.canMeasurePath=!0}void 0!==e.pathData&&(n.data=String(e.pathData),r=!0),!0===r&&(n.measure(new P(n.width,n.height)),n.arrange(n.desiredSize))}},t.prototype.updateIcon=function(e){var t=this.getWrapper(e.wrapper,"icon_content"),i=this.diagramActions&pe.Render?this.element.id:void 0;if(t){if("SVG"===this.mode){var n=Nl(e.wrapper.id+"_icon_content",i);if(n){var r=Nl(n.id+"_rect",i),o=Nl(n.id+"_shape",i),a=Nl(o.id+"_native_element",i);a&&a.parentNode.removeChild(a),o.parentNode.removeChild(o),r.parentNode.removeChild(r),n.parentNode.removeChild(n)}}var s=e.wrapper.children.indexOf(t);e.wrapper.children.splice(s,1)}var l=this.getPortContainer(e);e.initIcons(this.getDescription,this.layout,l,this.element.id)},t.prototype.getPortContainer=function(e){if(e.children)for(var t=0;t<e.wrapper.children.length;t++)if(e.wrapper.children[t].id===e.id+"group_container")return e.wrapper.children[t];return e.wrapper},t.prototype.updateTooltip=function(e,t){void 0!==t.tooltip.content&&(e.tooltip.content=t.tooltip.content),void 0!==t.tooltip.position&&(e.tooltip.position=t.tooltip.position),void 0!==t.tooltip.height&&(e.tooltip.height=t.tooltip.height),void 0!==t.tooltip.width&&(e.tooltip.width=t.tooltip.width),void 0!==t.tooltip.showTipPointer&&(e.tooltip.showTipPointer=t.tooltip.showTipPointer),void 0!==t.tooltip.relativeMode&&(e.tooltip.relativeMode=t.tooltip.relativeMode)},t.prototype.updateQuad=function(e){this.spatialSearch.updateQuad(e.wrapper)&&!this.preventDiagramUpdate&&this.updatePage()},t.prototype.removeFromAQuad=function(e){if(e.children)for(var t=void 0,i=e.children,n=0;n<i.length;n++)(t=this.nameTable[i[n]])&&this.removeFromAQuad(t);this.spatialSearch.removeFromAQuad(e.wrapper),this.spatialSearch.updateBounds(e.wrapper)&&!this.preventDiagramUpdate&&this.updatePage()},t.prototype.updateGroupSize=function(e){var t;e.parentId&&(t=this.nameTable[e.parentId])&&(t.parentId?this.updateGroupSize(t):(t.wrapper.measure(new P),t.wrapper.arrange(t.wrapper.desiredSize),this.updateGroupOffset(t),this.updateDiagramObject(t)))},t.prototype.updatePage=function(){if(this.diagramActions&pe.Render&&!(this.diagramActions&pe.DragUsingMouse)){this.scroller.updateScrollOffsets(),this.scroller.setSize();for(var e=0,i=this.views;e<i.length;e++){var n=i[e],r=this.views[n];r instanceof t||r.updateView(r)}}this.diagramActions&pe.DragUsingMouse&&this.renderPageBreaks()},t.prototype.protectPropertyChange=function(e){this.isProtectedOnChange=e},t.prototype.getProtectPropertyChangeValue=function(){return this.isProtectedOnChange},t.prototype.enableServerDataBinding=function(e){Object(r.I)()&&(this.allowServerDataBinding=e,e&&(this.bulkChanges={}))},t.prototype.updateShadow=function(e,t){void 0!==t.angle&&(e.angle=t.angle),void 0!==t.color&&(e.color=t.color),void 0!==t.distance&&(e.distance=t.distance),void 0!==t.opacity&&(e.opacity=t.opacity)},t.prototype.updateMargin=function(e,t){void 0!==t.margin.top&&(e.margin.top=t.margin.top),void 0!==t.margin.bottom&&(e.margin.bottom=t.margin.bottom),void 0!==t.margin.left&&(e.margin.left=t.margin.left),void 0!==t.margin.right&&(e.margin.right=t.margin.right)},t.prototype.initDroppables=function(){var e,t,i=this,n={},o={};this.droppable=new r.k(this.element),this.droppable.over=function(a){if(i.currentSymbol)a.event.touches&&a.event.touches.length&&i.eventHandler.mouseMove(a.event,a.event.touches);else{var s=null;if(!a.dragData&&"drag"===a.name){var l=document.getElementsByClassName("e-dragclone")[0];l&&(s=l)}if(a.dragData||s){var c=void 0,d=void 0;document.getElementById(i.element.id+"content").focus();var h=i.eventHandler.getMousePosition(a.event),p=void 0,u=s||a.dragData.helper,f=u.getAttribute("paletteId"),g=void 0,m=void 0,v=void 0,y=void 0;if(f){var b=document.getElementById(f).ej2_instances[0];i.droppable.sourceElement=b;if(b){var w=b.selectedSymbols;i.allowServerDataBinding=!1,p=uc(b.selectedSymbols),n=b.childTable;var x=w.wrapper.children[0].children[0];if(y=function(e,t,i){var n,r;return n=zs(e,t,i,"width"),r=zs(e,t,i,"height"),new P(n,r)}(b,p,x),b.selectedSymbols instanceof Pl){"TextAnnotation"===w.shape.shape?(p.offsetX=h.x+11+y.width*p.pivot.x,p.offsetY=h.y+11+y.height*p.pivot.y):(p.offsetX=h.x+5+y.width*p.pivot.x,p.offsetY=h.y+y.height*p.pivot.y);var O=new Pl(i,"nodes",p,!0);"Bpmn"===O.shape.type&&O.shape.activity.subProcess.processes&&O.shape.activity.subProcess.processes.length&&(O.shape.activity.subProcess.processes=[]),g=O.dragSize,m=O.previewSize,v=b.symbolDragSize;var S=b.symbolPreview;if(O.width=g.width||v.width||m.width||S.width||O.width,O.height=g.height||v.height||m.height||S.height||O.height,"SwimLane"===O.shape.type){if(i.diagramActions|=pe.PreventHistory,O.shape.isLane){O.children=[],e={id:"header"+lc()},"Horizontal"===O.shape.orientation?(e.width=O.shape.lanes[0].header.width,e.height=O.shape.lanes[0].height):(e.width=O.shape.lanes[0].width,e.height=O.shape.lanes[0].header.height),e.style=O.shape.lanes[0].header.style,e.offsetX=h.x+5+e.width/2,e.offsetY=h.y+e.height/2,i.diagramActions|=pe.PreventCollectionChangeOnDragOver,e=i.add(e),t={id:"body"+lc()},"Horizontal"===O.shape.orientation?(t.width=O.shape.lanes[0].width-e.width,t.height=O.shape.lanes[0].height,t.offsetX=h.x+5+(O.shape.lanes[0].header.width+t.width/2),t.offsetY=h.y+t.height/2):(t.width=O.shape.lanes[0].width,t.height=O.shape.lanes[0].height-e.height,t.offsetX=h.x+5+t.width/2,t.offsetY=h.y+(O.shape.lanes[0].header.height+t.height/2)),t.style=O.shape.lanes[0].style,t=i.add(t);var C={id:"group"+lc(),children:[e.id,t.id]};C.shape=O.shape,C.width=O.shape.lanes[0].width,C.height=O.shape.lanes[0].height,C.previewSize=O.previewSize,C.dragSize=O.dragSize,C.addInfo=O.addInfo,O=i.add(C),i.diagramActions&=~pe.PreventCollectionChangeOnDragOver}i.diagramActions&=~pe.PreventHistory}if(O.shape.isPhase&&((d="Horizontal"===O.shape.orientation)?(O.offsetX=h.x+5+(O.width||x.actualSize.width)/2,O.offsetY=h.y,O.shape.data="M20,"+O.height/2+" L"+(O.width-20)+","+O.height/2+"z",O.height=1):(O.offsetX=h.x+5,O.offsetY=h.y+(O.height||x.actualSize.height)/2,O.shape.data="M"+O.width/2+",20 L"+O.width/2+","+(O.height-20)+"z",O.width=1)),c=O,p.children){var j=p;o=i.getChildren(j,{},n),ws(j,-j.offsetX,-j.offsetY,o,!0,i)}}else if(b.selectedSymbols instanceof _r){c=new _r(i,"connectors",p,!0);var I=_.toBounds([c.sourcePoint,c.targetPoint]),E=h.x-I.left,T=h.y-I.top;c.sourcePoint.x+=E,c.sourcePoint.y+=T,c.targetPoint.x+=E,c.targetPoint.y+=T}c.shape.isLane||(c.id+=lc());var A={source:b,element:c,cancel:!1,diagram:i};if(Object(r.I)()&&(A=i.getBlazorDragEventArgs(A)),i.enterObject=c,i.enterTable=o,i.triggerEvent(ve.dragEnter,A),c instanceof Pl&&"SwimLane"===c.shape.type&&c.shape.isLane){var D,k,M=A.element,L=M.shape.lanes[0];d="Horizontal"===M.shape.orientation,D=i.nameTable[c.children[0]],k=i.nameTable[c.children[1]],g=c.dragSize,m=c.previewSize,v=b.symbolDragSize,L.width=g.width||v.width||m.width||L.width,L.height=g.height||v.height||m.height||L.height,d?(e.width=L.header.width,e.height=L.height,t.width=L.width-e.width,t.height=L.height,t.offsetX=h.x+5+(L.header.width+k.width/2),t.offsetY=h.y+k.height/2):(e.width=L.width,e.height=L.header.height,t.width=L.width,t.height=L.height-e.height,t.offsetX=h.x+5+k.width/2,t.offsetY=h.y+(L.header.height+k.height/2)),e.offsetX=h.x+5+D.width/2,e.offsetY=h.y+D.height/2,c.width=L.width,c.height=L.height}c instanceof Pl&&c.shape.isPhase&&(d?c.height=1:c.width=1),i.activeLayer.lock||A.cancel||(i.preventDiagramUpdate=!0,c.children&&i.findChild(c,o),i.preventDiagramUpdate=!0,-1!==c.zIndex&&(c.zIndex=-1),i.initObject(c,void 0,void 0,!0),i.currentSymbol=c,"SVG"!==i.mode&&i.refreshDiagramLayer(),i.commandHandler.oldSelectedObjects=Ts(i),i.commandHandler.select(c),i.commandHandler.updateBlazorSelector(),i.eventHandler.mouseDown(a.event),i.eventHandler.mouseMove(a.event,a),i.preventDiagramUpdate=!1,i.updatePage(),u.style.opacity="0"),delete i.enterObject,delete i.enterTable}i.droppable.selectedSymbols=u,i.allowServerDataBinding=!0}}}},this.droppable.drop=function(e){return eh(i,void 0,void 0,(function(){var t,i,n,o,a,s,l,c,d,h;return th(this,(function(p){switch(p.label){case 0:return this.allowServerDataBinding=!1,t="sourceElement",this.currentSymbol?(n=!1,a=void 0,a=this.currentSymbol instanceof _r,e.event.touches&&this.eventHandler.mouseUp(e.event),s=void 0,void 0,void 0,c=void 0,c={source:this.droppable[t],element:this.currentSymbol,target:this.eventHandler.hoverNode||this.eventHandler.lastObjectUnderMouse||this,cancel:!1,position:{x:this.currentSymbol.wrapper.offsetX,y:this.currentSymbol.wrapper.offsetY}},Object(r.I)()?(c={source:Ls(this.droppable[t]),element:Ps(this.currentSymbol)===_r?{connector:Ls(this.currentSymbol)}:{node:Ls(this.currentSymbol)},cancel:!1,target:{},position:{x:this.currentSymbol.wrapper.offsetX,y:this.currentSymbol.wrapper.offsetY}},this.getDropEventArgs(c),[4,this.triggerEvent(ve.drop,c)]):[3,2]):[3,4];case 1:return c=p.sent()||c,[3,3];case 2:this.triggerEvent(ve.drop,c),p.label=3;case 3:return d=void 0,h="id",(d=uc(this.currentSymbol)).hasTarget=this.currentSymbol.hasTarget,this.removeFromAQuad(this.currentSymbol),this.removeObjectsFromLayer(this.nameTable[this.currentSymbol.id]),this.removeElements(this.currentSymbol),(this.currentSymbol.shape.isLane||this.currentSymbol.shape.isPhase)&&this.removeChildInNodes(this.currentSymbol),c.cancel&&Ja(this.currentSymbol,this),this.currentSymbol.shape.isPhase&&(n=!0,o=this.currentSymbol.shape.orientation),delete this.nameTable[this.currentSymbol.id],this.currentSymbol=null,this.protectPropertyChange(!0),c.cancel?this.clearSelectorLayer():(this.startGroupAction(),d&&(d.shape.isLane||n)&&(n&&(d.shape.isPhase=n,d.shape.orientation=o),this.eventHandler.addSwimLaneObject(d)),"Bpmn"===d.shape.type&&d.shape.annotation&&d.hasTarget&&(l=d.shape.annotation.nodeId,d.shape.annotation.id=d.id,this.addTextAnnotation(d.shape.annotation,this.nameTable[l]),d.nodeId=""),d.shape.isLane||n||(d.children&&this.addChildNodes(d),c.target&&c.target instanceof Pl&&!a&&qo(this,c.target)&&so(c.target)?Yo(this,c.target,d):i=this.add(d,!0),(d||i)&&co(this)&&this.select([this.nameTable[d[h]]]))),this.protectPropertyChange(!1),s=this.nameTable[d[h]],d.hasTarget&&(d.nodeId=d.hasTarget,this.remove(d)),this.bpmnModule&&s instanceof Pl&&d.processId&&(s.processId=d.processId,this.bpmnModule.dropBPMNchild(this.nameTable[s.processId],s,this)),this.endGroupAction(),"SVG"!==this.mode&&this.refreshDiagramLayer(),delete this.droppable[t],[3,5];case 4:c={source:Ls(e.droppedElement),element:void 0,target:Ls(this.eventHandler.hoverNode||this.eventHandler.lastObjectUnderMouse||this),cancel:!1,position:void 0},Object(r.I)()&&(c={source:Ls(e.droppedElement),element:void 0,cancel:!1,position:void 0,target:{}},this.getDropEventArgs(c)),this.triggerEvent(ve.drop,c),d=void 0,h="id",p.label=5;case 5:return"selectedSymbols",this.droppable.selectedSymbols&&Object(r.P)(this.droppable.selectedSymbols),this.allowServerDataBinding=!0,[2]}}))}))},this.droppable.out=function(e){if(i.currentSymbol&&!i.eventHandler.focus){i.unSelect(i.currentSymbol),i.removeFromAQuad(i.currentSymbol),"SVG"!==i.mode&&"Native"===i.currentSymbol.shape.type&&i.removeElements(i.currentSymbol),i.removeObjectsFromLayer(i.nameTable[i.currentSymbol.id]),delete i.nameTable[i.currentSymbol.id];var t={element:Ls(i.currentSymbol),diagram:i};Object(r.I)()&&(t=i.getBlazorDragLeaveEventArgs(t)),i.triggerEvent(ve.dragLeave,t),"SVG"!==i.mode?i.refreshDiagramLayer():i.removeElements(i.currentSymbol),i.currentSymbol=null;i.droppable.selectedSymbols.style.opacity="1";delete i.droppable.sourceElement,i.diagramRenderer.rendererActions=i.removeConstraints(i.diagramRenderer.rendererActions,ue.DrawSelectorBorder),i.previousSelectedObject&&i.select(i.previousSelectedObject,i.previousSelectedObject.length>1),i.previousSelectedObject=null}}},t.prototype.getBlazorDragLeaveEventArgs=function(e){return e={diagramId:this.element.id,element:Ps(e.element)===_r?{connector:Ls(e.element)}:{node:Ls(e.element)}}},t.prototype.getDropEventArgs=function(e){if(this.eventHandler.lastObjectUnderMouse||this.eventHandler.hoverNode){var t=this.eventHandler.lastObjectUnderMouse||this.eventHandler.hoverNode;e.target=Ps(t)===_r?{connector:Ls(t)}:{node:Ls(t)}}else e.target.diagramId=this.element.id},t.prototype.removeChildInNodes=function(e){if(e){if(e.children)for(var t=0;t<e.children.length;t++)this.removeChildInNodes(this.nameTable[e.children[t]]);var i=this.nodes.indexOf(e);-1!==i&&this.nodes.splice(i,1)}},t.prototype.getBlazorDragEventArgs=function(e){return e={source:Ls(e.source),element:Ps(e.element)===_r?{connector:Ls(e.element)}:{node:Ls(e.element)},cancel:e.cancel,diagramId:this.element.id}},t.prototype.findChild=function(e,t){for(var i,n,r=0;r<e.children.length;r++)(i=t[e.children[r]])&&(i.children&&this.findChild(i,t),i.id=i.id+lc(),t[i.id]=i,e.children[r]=i.id,n=new Pl(this,"nodes",i,!0),this.initObject(n,void 0,void 0,!0))},t.prototype.getChildren=function(e,t,i){for(var n,r=0;r<e.children.length;r++)(n=i[e.children[r]])&&(n.children&&(t=this.getChildren(n,t,i)),t[n.id]=uc(n));return t},t.prototype.addChildNodes=function(e){for(var t,i=0;i<e.children.length;i++)(t=this.nameTable[e.children[i]])&&(t.children&&this.addChildNodes(t),this.add(t,!0))},t.prototype.moveNode=function(e){for(var t,i=this.commandHandler.getObjectLayer(e.id),n=i.zIndex,r=i.objects.length,o=0;o<this.layers.length;o++)n===this.layers[o].zIndex&&(t=this.layers[o+1]);if(r>1)this.commandHandler.moveSvgNode(e.id,i.objects[r-2]),this.commandHandler.moveSvgNode(i.objects[r-2],e.id);else if(t){var a=this.commandHandler.getLayer(this.layerZIndexTable[t.zIndex]).objects[0];a?(this.commandHandler.moveSvgNode(e.id,a),this.commandHandler.updateNativeNodeIndex(e.id,a)):this.moveObjectsUp(e,i)}else this.moveObjectsUp(e,i)},t.prototype.moveObjectsUp=function(e,t){for(var i,n=this.layers.length-1;n>=0;n--)if(i=this.layers[n],t.id!==i.id){var r=this.commandHandler.getLayer(this.layerZIndexTable[i.zIndex]).objects[i.objects.length-1];if(r){this.commandHandler.moveSvgNode(e.id,r),this.commandHandler.moveSvgNode(r,e.id);break}}},t.prototype.insertData=function(e){return this.crudOperation(e,"create",this.getNewUpdateNodes("New"))},t.prototype.updateData=function(e){return this.crudOperation(e,"update",this.getNewUpdateNodes("Update"))},t.prototype.removeData=function(e){return this.crudOperation(e,"destroy",this.getDeletedNodes())},t.prototype.crudOperation=function(e,t,i){if(e){var n=this.parameterMap(e,!(e instanceof _r));if(n){var r=e instanceof _r?this.dataSourceSettings.connectionDataSource.crudAction[t]:this.dataSourceSettings.crudAction[t];this.raiseAjaxPost(JSON.stringify(n),r)}return n}var o=i;return this.processCrudCollection(o,this.dataSourceSettings.crudAction[t],this.dataSourceSettings.connectionDataSource.crudAction[t]),o},t.prototype.processCrudCollection=function(e,t,i){if(e.nodes){var n=[],r=void 0;for(r=0;r<e.nodes.length;r++)n.push(this.parameterMap(e.nodes[r],!0));n&&n.length>0&&this.raiseAjaxPost(JSON.stringify(n),t)}if(e.connectors){n=[],r=void 0;for(r=0;r<e.connectors.length;r++)n.push(this.parameterMap(e.connectors[r],!1));n&&n.length>0&&this.raiseAjaxPost(JSON.stringify(n),i)}},t.prototype.parameterMap=function(e,t){var i,n={},r=t?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource;if(r.id&&(n[r.id]=e.id),r.sourcePointX&&r.sourcePointY&&(n[r.sourcePointX]=e.sourcePoint.x,n[r.sourcePointY]=e.sourcePoint.y),r.targetPointX&&r.targetPointY&&(n[r.targetPointX]=e.targetPoint.x,n[r.targetPointY]=e.targetPoint.y),r.sourceID&&(n[r.sourceID]=e.sourceID),r.targetID&&(n[r.targetID]=e.targetID),r.crudAction&&r.crudAction.customFields&&r.crudAction.customFields.length>0)for(i=0;i<r.crudAction.customFields.length;i++)n[r.crudAction.customFields[i]]=e[r.crudAction.customFields[i]];return n},t.prototype.getNewUpdateNodes=function(e){var t=[],i=[];for(var n in this.nameTable){var r=this.nameTable[n];r.status==e&&(r&&r instanceof _r?(r.status="None",i.push(r)):(r.status="None",t.push(r)))}return{nodes:t,connectors:i}},t.prototype.getDeletedNodes=function(){var e,t=[],i=[];for(e=0;e<this.crudDeleteNodes.length;e++){var n=this.crudDeleteNodes[e];n&&n.segments?i.push(n):n&&t.push(n)}return this.crudDeleteNodes=[],{nodes:t,connectors:i}},t.prototype.raiseAjaxPost=function(e,t){var i=new r.a(t,"POST",!0,"application/json"),n=JSON.stringify(JSON.parse(e));i.send(n).then(),i.onSuccess=function(e){}},t.prototype.getHiddenItems=function(e){if(this.contextMenuModule){this.contextMenuModule.hiddenItems=[];for(var t=0,i=e.items;t<i.length;t++){var n=i[t];if(this.contextMenuModule.ensureItems(n,e.event),n.items&&n.items.length)for(var r=0,o=n.items;r<o.length;r++){var a=o[r];this.contextMenuModule.ensureItems(a,e.event)}}return this.contextMenuModule.hiddenItems}return[]},Kd([Object(r.q)("100%")],t.prototype,"width",void 0),Kd([Object(r.q)("SVG")],t.prototype,"mode",void 0),Kd([Object(r.q)("100%")],t.prototype,"height",void 0),Kd([Object(r.g)({},Mo)],t.prototype,"contextMenuSettings",void 0),Kd([Object(r.q)(ae.Default)],t.prototype,"constraints",void 0),Kd([Object(r.q)(se.Default)],t.prototype,"tool",void 0),Kd([Object(r.q)("Top")],t.prototype,"bridgeDirection",void 0),Kd([Object(r.q)("transparent")],t.prototype,"backgroundColor",void 0),Kd([Object(r.g)({},_c)],t.prototype,"snapSettings",void 0),Kd([Object(r.g)({},qc)],t.prototype,"rulerSettings",void 0),Kd([Object(r.g)({},Mc)],t.prototype,"pageSettings",void 0),Kd([Object(r.g)({},Vd)],t.prototype,"serializationSettings",void 0),Kd([Object(r.e)([],Pl)],t.prototype,"nodes",void 0),Kd([Object(r.q)()],t.prototype,"drawingObject",void 0),Kd([Object(r.e)([],_r)],t.prototype,"connectors",void 0),Kd([Object(r.q)([])],t.prototype,"basicElements",void 0),Kd([Object(r.g)({},Qn)],t.prototype,"tooltip",void 0),Kd([Object(r.g)({},Qc)],t.prototype,"dataSourceSettings",void 0),Kd([Object(r.q)()],t.prototype,"addInfo",void 0),Kd([Object(r.q)()],t.prototype,"historyManager",void 0),Kd([Object(r.q)()],t.prototype,"nodeTemplate",void 0),Kd([Object(r.q)()],t.prototype,"annotationTemplate",void 0),Kd([Object(r.q)()],t.prototype,"userHandleTemplate",void 0),Kd([Object(r.q)()],t.prototype,"getNodeDefaults",void 0),Kd([Object(r.q)()],t.prototype,"nodeDefaults",void 0),Kd([Object(r.q)()],t.prototype,"getConnectorDefaults",void 0),Kd([Object(r.q)()],t.prototype,"connectorDefaults",void 0),Kd([Object(r.q)()],t.prototype,"setNodeTemplate",void 0),Kd([Object(r.q)()],t.prototype,"getDescription",void 0),Kd([Object(r.q)()],t.prototype,"getCustomProperty",void 0),Kd([Object(r.q)()],t.prototype,"getCustomTool",void 0),Kd([Object(r.q)()],t.prototype,"getCustomCursor",void 0),Kd([Object(r.e)([],Gd)],t.prototype,"customCursor",void 0),Kd([Object(r.q)()],t.prototype,"updateSelection",void 0),Kd([Object(r.g)({},Qd)],t.prototype,"diagramSettings",void 0),Kd([Object(r.g)({},Dl)],t.prototype,"selectedItems",void 0),Kd([Object(r.g)({},Lc)],t.prototype,"scrollSettings",void 0),Kd([Object(r.g)({},ed)],t.prototype,"layout",void 0),Kd([Object(r.g)({},ko)],t.prototype,"commandManager",void 0),Kd([Object(r.l)()],t.prototype,"dataLoaded",void 0),Kd([Object(r.l)()],t.prototype,"dragEnter",void 0),Kd([Object(r.l)()],t.prototype,"dragLeave",void 0),Kd([Object(r.l)()],t.prototype,"dragOver",void 0),Kd([Object(r.l)()],t.prototype,"click",void 0),Kd([Object(r.l)()],t.prototype,"historyChange",void 0),Kd([Object(r.l)()],t.prototype,"historyStateChange",void 0),Kd([Object(r.l)()],t.prototype,"doubleClick",void 0),Kd([Object(r.l)()],t.prototype,"textEdit",void 0),Kd([Object(r.l)()],t.prototype,"scrollChange",void 0),Kd([Object(r.l)()],t.prototype,"selectionChange",void 0),Kd([Object(r.l)()],t.prototype,"sizeChange",void 0),Kd([Object(r.l)()],t.prototype,"connectionChange",void 0),Kd([Object(r.l)()],t.prototype,"sourcePointChange",void 0),Kd([Object(r.l)()],t.prototype,"targetPointChange",void 0),Kd([Object(r.l)()],t.prototype,"propertyChange",void 0),Kd([Object(r.l)()],t.prototype,"positionChange",void 0),Kd([Object(r.l)()],t.prototype,"keyUp",void 0),Kd([Object(r.l)()],t.prototype,"keyDown",void 0),Kd([Object(r.l)()],t.prototype,"animationComplete",void 0),Kd([Object(r.l)()],t.prototype,"rotateChange",void 0),Kd([Object(r.l)()],t.prototype,"collectionChange",void 0),Kd([Object(r.l)()],t.prototype,"fixedUserHandleClick",void 0),Kd([Object(r.l)()],t.prototype,"onUserHandleMouseDown",void 0),Kd([Object(r.l)()],t.prototype,"onUserHandleMouseUp",void 0),Kd([Object(r.l)()],t.prototype,"onUserHandleMouseEnter",void 0),Kd([Object(r.l)()],t.prototype,"onUserHandleMouseLeave",void 0),Kd([Object(r.l)()],t.prototype,"segmentCollectionChange",void 0),Kd([Object(r.l)()],t.prototype,"onImageLoad",void 0),Kd([Object(r.l)()],t.prototype,"expandStateChange",void 0),Kd([Object(r.l)()],t.prototype,"created",void 0),Kd([Object(r.l)()],t.prototype,"mouseEnter",void 0),Kd([Object(r.l)()],t.prototype,"mouseLeave",void 0),Kd([Object(r.l)()],t.prototype,"mouseOver",void 0),Kd([Object(r.l)()],t.prototype,"contextMenuOpen",void 0),Kd([Object(r.l)()],t.prototype,"contextMenuBeforeItemRender",void 0),Kd([Object(r.l)()],t.prototype,"contextMenuClick",void 0),Kd([Object(r.l)()],t.prototype,"commandExecute",void 0),Kd([Object(r.e)([],zd)],t.prototype,"layers",void 0),Kd([Object(r.l)()],t.prototype,"drop",void 0),t}(r.i),nh=(function(){function e(e){this.diagram=e}e.prototype.exportDiagram=function(e){var t,i,n,o,a="data",s=[],l=e.margin||{},c=e&&e.region?e.region:"Content";o=e&&e.mode?e.mode:"Download";var d=this.getDiagramBounds(c,e);e.bounds&&(i=!0,d.x=e.bounds.x?e.bounds.x:d.x,d.y=e.bounds.y?e.bounds.y:d.y,d.width=e.bounds.width||d.width,d.height=e.bounds.height||d.height),l={top:void 0!==l.top?l.top:25,bottom:void 0!==l.bottom?l.bottom:25,right:void 0!==l.right?l.right:25,left:void 0!==l.left?l.left:25};this.diagram.nodes;"PageSettings"!==c&&(d.x-=l.left,d.y-=l.top,d.width+=l.left+l.right,d.height+=l.top+l.bottom);var h=e.fileName||"diagram";if("SVG"!==e.format){if(null!==(a=this.setCanvas(e,d,l,o,i,c,h)))return a}else{t=e.format,e.bounds=d,e.margin=l;var p=n=this.diagramAsSvg(e,l);if("Data"===o)return Object(r.I)()&&"SVG"===e.format?(new XMLSerializer).serializeToString(p):n;var u=(new XMLSerializer).serializeToString(p);s.push(u)}if("Download"===o&&null!==a)for(var f=0;f<s.length;f++){var g=new Blob([s[f]],{type:"application/octet-stream"});if("msie"===r.c.info.name)window.navigator.msSaveOrOpenBlob(g,h+"."+t);else{var m=Zl("a",{download:h+"."+t}),v=URL.createObjectURL(g);m.href=v;var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),m.dispatchEvent(y)}}return null},e.prototype.setCanvas=function(e,t,i,n,r,o,a){var s;e.bounds=t,e.region=o;this.setScaleValueforCanvas(e,t);var l,c=this.diagramAsCanvas({bounds:t,margin:i,region:o,scaleX:e.scaleX,scaleY:e.scaleY,scaleOffsetX:e.scaleOffsetX,scaleOffsetY:e.scaleOffsetY},r);return l=s="JPG"===e.format?c.toDataURL("image/jpeg"):c.toDataURL(),"Data"===n?s:(this.canvasMultiplePage(e,c,i,l,a),null)},e.prototype.canvasMultiplePage=function(e,t,i,n,r){var o=this,a=[],s=e.format||"JPG";if(e.multiplePage){if(e.pageHeight=e.pageHeight?e.pageHeight:this.diagram.pageSettings.height,e.pageWidth=e.pageWidth?e.pageWidth:this.diagram.pageSettings.width,e.pageHeight=e.pageHeight?e.pageHeight:t.width,e.pageWidth=e.pageWidth?e.pageWidth:t.height,i=e.margin||{},e.pageOrientation&&("Landscape"===e.pageOrientation&&e.pageHeight>e.pageWidth||"Portrait"===e.pageOrientation&&e.pageWidth>e.pageHeight)){var l=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=l}e.margin={top:isNaN(i.top)?0:i.top,bottom:isNaN(i.bottom)?0:i.bottom,left:isNaN(i.left)?0:i.left,right:isNaN(i.right)?0:i.right};var c=Zl("img",{id:this.diagram.element.id+"_printImage",src:n});c.onload=function(){a=o.getMultipleImage(c,e,!0),o.exportImage(a,r,s,n)}}else a=[n],this.exportImage(a,r,s,n)},e.prototype.exportImage=function(e,t,i,n){for(var o=[],a=e instanceof HTMLElement?0:e.length,s=0;s<a;s++){for(var l=e[s].replace(/^data:[a-z]*;,/,"").split(","),c=atob(l[1]),d=new ArrayBuffer(c.length),h=new Uint8Array(d),p=0;p<c.length;p++)h[p]=c.charCodeAt(p);o.push(d)}for(var u=function(e){var n=new Blob([o[e]],{type:"application/octet-stream"});if("msie"===r.c.info.name)window.navigator.msSaveOrOpenBlob(n,t+"."+i);else{var a=Zl("a",{download:t+"."+i}),s=URL.createObjectURL(n);a.href=s;var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),setTimeout((function(){a.dispatchEvent(l)}),5*(e+1))}},f=0;f<o.length;f++)u(f)},e.prototype.getObjectsBound=function(e){for(var t,i=0,n=this.diagram.nodes;i<n.length;i++){var r=n[i];r.visible&&(("SVG"===e.format||r instanceof Ge||r instanceof dr)&&("SVG"!==e.format||r instanceof dr)||(t=t?t.uniteRect(r.wrapper.outerBounds):r.wrapper.outerBounds))}for(var o=0,a=this.diagram.connectors;o<a.length;o++){var s=a[o];s.visible&&(t=t?t.uniteRect(s.wrapper.outerBounds):s.wrapper.outerBounds)}return t||new _(0,0,0,0)},e.prototype.getDiagramBounds=function(e,t){var i=this.getObjectsBound(t),n=i.left,r=i.top,o=i.right-i.left,a=i.bottom-i.top;"Content"!==e&&(this.diagram.pageSettings&&this.diagram.pageSettings.multiplePage?(n=i.left,r=i.top,this.diagram.pageSettings.width&&(n=Math.floor(n/this.diagram.pageSettings.width)*this.diagram.pageSettings.width,o=Math.ceil(i.right/this.diagram.pageSettings.width)*this.diagram.pageSettings.width-n),this.diagram.pageSettings.height&&(r=Math.floor(r/this.diagram.pageSettings.height)*this.diagram.pageSettings.height,a=Math.ceil(i.bottom/this.diagram.pageSettings.height)*this.diagram.pageSettings.height-r),0===i.width&&null!==this.diagram.pageSettings.width&&(o=this.diagram.pageSettings.width),0===i.height&&null!==this.diagram.pageSettings.height&&(a=this.diagram.pageSettings.height)):(this.diagram.pageSettings.width&&(n=0,o=this.diagram.pageSettings.width),this.diagram.pageSettings.height&&(r=0,a=this.diagram.pageSettings.height)));var s=new _;return s.x=n,s.y=r,s.width=o,s.height=a,s},e.prototype.setScaleValueforCanvas=function(e,t){e.scaleX=1,e.scaleY=1,e.scaleOffsetX=0,e.scaleOffsetY=0,e.pageHeight=e.pageHeight||this.diagram.pageSettings.height,e.pageWidth=e.pageWidth||this.diagram.pageSettings.width;var i=e.pageOrientation||this.diagram.pageSettings.orientation;if(i||(i="Portrait"),"Portrait"===i){if(e.pageWidth>e.pageHeight){var n=e.pageHeight;e.pageHeight=e.pageWidth,e.pageWidth=n}}else if(e.pageHeight>e.pageWidth){n=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=n}e.pageWidth&&e.pageHeight&&!e.multiplePage&&(e.stretch="Meet");var r=e.pageHeight||t.height,o=e.pageWidth||t.width;"Stretch"!==e.stretch&&"Meet"!==e.stretch&&"Slice"!==e.stretch||(e.scaleX=o/t.width,e.scaleY=r/t.height,"Meet"===e.stretch?(e.scaleX=e.scaleY=Math.min(e.scaleX,e.scaleY),e.scaleOffsetY=(e.pageHeight-t.height*e.scaleX)/2,e.scaleOffsetX=(e.pageWidth-t.width*e.scaleX)/2):"Slice"===e.stretch&&(e.scaleX=e.scaleY=Math.max(e.scaleX,e.scaleY)),t.width=o,t.height=r),t.x*=e.scaleX,t.y*=e.scaleY},e.prototype.diagramAsSvg=function(e,t){var i=this.diagram.createSvg(this.diagram.element.id+"_diagram_svg",e.bounds.width,e.bounds.height);document.body.appendChild(i);var n=Jl("g",{id:this.diagram.element.id+"_pageBackground"}),r=e&&e.region?e.region:"Content",o=this.getDiagramBounds(r,e),a=o.x,s=o.y,l=o.width,c=o.height;i.appendChild(n);var d={x:String(a),y:String(s),width:String(l),height:String(c)};ic(n,d),this.setTransform(n,e.bounds,t);var h=document.getElementById(this.diagram.element.id+"gradient_pattern");h&&i.appendChild(h),d={x:String(a),y:String(s),width:String(l+t.left+t.right),height:String(c+t.top+t.bottom)};var p=document.getElementById(this.diagram.element.id+"_backgroundImageLayer").cloneNode(!0);ic(p,d),i.appendChild(p),this.setTransform(p,o,t);var u=document.getElementById(this.diagram.element.id+"_backgroundLayerrect").cloneNode(!0);if(ic(u,d),i.appendChild(u),this.setTransform(u,o,t),"SVG"===this.diagram.mode){var f=void 0,g=void 0,m=zl(this.diagram.element.id);for(i.appendChild(m.getElementById(this.diagram.diagramLayer.id).cloneNode(!0)),g=0;g<i.childNodes.length;g++)(f=i.childNodes[g]).id===this.diagram.element.id+"_diagramLayer"&&this.setTransform(f,o,t)}else{n=Jl("g",{id:this.diagram.element.id+"_diagramLayer"}),i.appendChild(n),this.setTransform(n,e.bounds,t);var v=new Ec("",null,!0),y=Gl(this.diagram.element.id);this.diagram.renderDiagramElements(i,v,y,!1)}return document.body.removeChild(i),i},e.prototype.setTransform=function(e,t,i){e.setAttribute("transform","translate("+(-t.x+i.left)+", "+(-t.y+i.top)+")")},e.prototype.diagramAsCanvas=function(e,t){var i=e.bounds,n=e.margin,r=e&&e.region?e.region:"Content",o=this.getDiagramBounds(r,e),a=this.diagram.pageSettings.background.color,s=jc.createCanvas(this.diagram.element.id+"_diagram",e.bounds.width,e.bounds.height),l=s.getContext("2d");l.translate(-i.x,-i.y),l.save(),l.fillStyle="transparent"===this.diagram.pageSettings.background.color?"white":this.diagram.pageSettings.background.color,i="Content"===r?o:i,l.fillRect(i.x,i.y,i.width,i.height);var c=this.diagram.pageSettings.background;if(c&&c.source){o=this.getDiagramBounds(r,e);var d=new Image;d.src=c.source;var h=o.width/d.width,p=o.height/d.height,u=o.x,f=o.y,g=o.width,m=o.height,v=this.isImageExportable(c);if("None"!==c.scale&&"None"!==c.align){var y="Meet"===c.scale?Math.min(h,p):Math.max(h,p);g=y*d.width,m=y*d.height,c.align.indexOf("xmid")>-1?u+=(o.width-g)/2:c.align.indexOf("xmax")>-1&&(u=u+o.width-g),c.align.indexOf("ymid")>-1?f+=(o.height-m)/2:c.align.indexOf("ymax")>-1&&(f=f+o.height-m),"none"!==this.diagram.pageSettings.background.color&&"transparent"!==this.diagram.pageSettings.background.color||(l.fillStyle="white",l.fillRect(o.x*e.scaleX,o.y*e.scaleY,o.width*e.scaleX,o.height*e.scaleY)),v&&l.drawImage(d,u,f,y*d.width,y*d.height)}else v&&l.drawImage(d,u,f,o.width,o.height)}else l.fillStyle="transparent"===a?"white":a,l.fillRect(o.x*e.scaleX-n.left,o.y*e.scaleY-n.top,o.width*e.scaleX+n.left+n.right,e.scaleY*o.height+n.top+n.bottom);var b=this.diagram.pageSettings.background.color,w=this.diagram.pageSettings.width;w&&(l.strokeStyle="none"===b?"transparent":b,l.lineWidth=w,l.strokeRect(o.x*e.scaleX,o.y*e.scaleY,o.width*e.scaleX,o.height*e.scaleY)),l.restore();var x=Gl(this.diagram.element.id),O=new Ec("",null,!1);return this.updateObjectValue(e.scaleX,e.scaleOffsetX,e.scaleOffsetY,!0),this.diagram.renderDiagramElements(s,O,x,!1,!0),this.updateObjectValue(e.scaleX,e.scaleOffsetX,e.scaleOffsetY,!1),s},e.prototype.updateWrapper=function(e,t,i,n,r){if(e&&e.length>0)for(var o=0;o<e.length;o++)e[o].children&&this.updateWrapper(e[o].children,t,i,n,r),e[o].exportScaleValue.x=t,e[o].exportScaleValue.y=t,e[o].exportScaleOffset.x=i,e[o].exportScaleOffset.y=n,e[o].isExport=r},e.prototype.updateObjectValue=function(e,t,i,n){for(var r,o=0;o<this.diagram.nodes.length;o++)r=this.diagram.nodes[o].wrapper,this.updateWrapper(r.children,e,t,i,n),r.exportScaleValue.x=e,r.exportScaleValue.y=e,r.exportScaleOffset.x=t,r.exportScaleOffset.y=i,r.isExport=n;for(var a=0;a<this.diagram.connectors.length;a++){r=this.diagram.connectors[a].wrapper;for(var s=0;s<r.children.length;s++)r.children[s].isExport=n,n&&(r.children[s].exportScaleValue.x=e,r.children[s].exportScaleValue.y=e,r.children[s].exportScaleOffset.x=t,r.children[s].exportScaleOffset.y=i)}},e.prototype.isImageExportable=function(e){var t,i=!0;if(e.source)try{var n=(t=jc.createCanvas(this.diagram.element.id+"temp_canvas",100,100)).getContext("2d");n.save();var r=new Image;r.src=e.source,n.drawImage(r,0,0,100,100),n.restore(),t.toDataURL()}catch(o){i=!1}return i},e.prototype.getPrintCanvasStyle=function(e,t){var i=0,n=0,r=new P;if(i=e.width,n=e.height,(t.pageHeight||t.pageWidth)&&(n=t.pageHeight?t.pageHeight:n,i=t.pageWidth?t.pageWidth:i),t.pageOrientation&&("Landscape"===t.pageOrientation&&n>i||"Portrait"===t.pageOrientation&&i>n)){var o=i;i=n,n=o}return r.height=n,r.width=i,r},e.prototype.getMultipleImage=function(e,t,i){var n,r,o=[],a=Zl("div",{}),s=this.getPrintCanvasStyle(e,t),l=t.margin,c=l.left,d=l.top,h=l.right,p=l.bottom,u=0;n=s.width+u,r=s.height+0;var f=0,g=0;if(t&&t.multiplePage){a.style.height="auto",a.style.width="auto";var m=e.height,v=e.width,y=0,b=0,w=void 0,x=0,O=0,S=void 0,C=void 0;do{do{x=s.width,O=s.height,f+s.width>=v&&(x=v-f),g+s.height>=m&&(O=m-g),(S=(C=jc.createCanvas(this.diagram.element.id+"_multiplePrint",s.width,s.height)).getContext("2d")).drawImage(e,u+f+c,0+g+d,x-h-c,O-p-d,0+c,0+d,x-h-c,O-p-d),f+s.width>=v&&(f-=f-v),w=C.toDataURL(),S.restore(),f+=n,i?o.push(w):this.printImage(a,w,y+""+b,n+"px;",r+"px;"),y++}while(f<v);b++,y=u=f=0,g+s.height>=m&&(g-=g-m),g+=r}while(g<m)}else{var P,j,I=this.getPrintCanvasStyle(e,t);P=I.width,j=I.height;S=void 0,C=void 0,w=void 0;(S=(C=jc.createCanvas(this.diagram.element.id+"_diagram",P,j)).getContext("2d")).drawImage(e,0+c,0+d,e.width-(h+c),e.height-(d+p),0+c,0+d,P-(h+c),j-(d+p)),w=C.toDataURL(),S.restore(),i?o.push(w):this.printImage(a,w,0)}return i?o:a},e.prototype.printImage=function(e,t,i,n,r){var o={class:"e-diagram-print-page",style:"width:"+n+"height:"+r},a=Zl("img",o),s=Zl("div",o);rc(a,o={id:this.diagram.element.id+"_multiplePrint_img"+i,style:"float:left",src:t}),s.appendChild(a),e.appendChild(s)},e.prototype.print=function(e){e.mode="Data";var t=this.exportDiagram(e);this.printImages(t,e)},e.prototype.printImages=function(e,t){var i=this,n={id:this.diagram.element.id+"_printImage",src:e};t.margin={top:0,bottom:0,right:0,left:0};var r=Zl("img",n);r.onload=function(){var e=i.getMultipleImage(r,t),n=window.open("");null!=n&&e instanceof HTMLElement&&(n.document.write("<html><head><style> body{margin:0px;}  @media print { .e-diagram-print-page{page-break-after: left; }.e-diagram-print-page:last-child {page-break-after: avoid;}}</style><title></title></head>"),n.document.write('<BODY onload="setTimeout(function(){window.print();}, 100)">'),n.document.write("<center>"+e.innerHTML+"</center>"),n.document.close())}},e.prototype.getDiagramContent=function(e){var t=document.getElementById(this.diagram.element.id+"content"),i=t.scrollLeft,n=t.scrollTop,r=this.diagram.scrollSettings.currentZoom,o=this.diagram.scroller.horizontalOffset,a=this.diagram.scroller.verticalOffset,s=Number(String(this.diagram.width).split("px")[0]),l=Number(String(this.diagram.height).split("px")[0]),c=this.getDiagramBounds("",{});this.diagram.scroller.zoom(1/r);var d,h;d=c.x,h=c.y,this.diagram.scroller.transform={tx:-d,ty:-h,scale:this.diagram.scroller.currentZoom},this.diagram.scroller.horizontalOffset=-d,this.diagram.scroller.verticalOffset=-h,this.diagram.scroller.setSize(),this.diagram.setSize(c.width,c.height);var p=this.diagram.snapSettings.constraints;this.diagram.snapSettings.constraints=this.diagram.snapSettings.constraints&~Q.ShowLines,this.diagram.dataBind(),this.diagram.clearSelection(),e=e||document.styleSheets;for(var u="",f=0;f<e.length;f++)(e[f].href||"string"===typeof e[f])&&(u+="<link href='"+(e[f].href||e[f])+"' rel='stylesheet' />");var g=document.getElementById(this.diagram.element.id+"content").innerHTML;return g=(g=u+"<body style=\"margin: 0px; padding: 0px\"><div style='margin-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;'>"+g+"</div></body>").replace(/ transform: t/g," -webkit-transform: t"),this.diagram.setSize(s,l),this.diagram.scroller.zoom(r/this.diagram.scrollSettings.currentZoom),this.diagram.snapSettings.constraints=p,this.diagram.dataBind(),i||n?this.diagram.setOffset(i,n):(this.diagram.scroller.transform={tx:o/this.diagram.scroller.currentZoom,ty:a/this.diagram.scroller.currentZoom,scale:this.diagram.scroller.currentZoom},this.diagram.scroller.horizontalOffset=o,this.diagram.scroller.verticalOffset=a),this.diagram.renderSelector(!1),Rs()?g.replace("url("+location.protocol+"//"+location.host+location.pathname+"#diagram_pattern ","url(#diagram_pattern)"):g},e.prototype.exportImages=function(e,t){var i=this,n=t&&t.region?t.region:"Content",r=t.margin||{};r={top:isNaN(r.top)?0:r.top,bottom:isNaN(r.bottom)?0:r.bottom,left:isNaN(r.left)?0:r.left,right:isNaN(r.right)?0:r.right};var o=this.getDiagramBounds(n,{});t.bounds&&(o.x=isNaN(t.bounds.x)?o.x:t.bounds.x,o.y=isNaN(t.bounds.y)?o.y:t.bounds.y,o.width=t.bounds.width||o.width,o.height=t.bounds.height||o.height);var a=document.createElement("img");rc(a,{src:e});var s=this;a.onload=function(){var n=jc.createCanvas(s.diagram.element.id+"innerImage",o.width+(r.left+r.right),o.height+(r.top+r.bottom)),l=n.getContext("2d");if(l.fillStyle=s.diagram.pageSettings.background.color,l.fillRect(0,0,o.width+(r.left+r.right),o.height+(r.top+r.bottom)),l.drawImage(a,0,0,o.width,o.height,r.left,r.top,o.width,o.height),e=n.toDataURL(),t.printOptions)s.printImages(e,t);else{l.restore();var c=t.fileName||"diagram";i.canvasMultiplePage(t,n,r,e,c)}}},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"PrintandExport"}}(),i(23)),rh=i(4),oh=function(){function e(){this.dataTable={}}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"DataBinding"},e.prototype.initData=function(e,t){var i,n=e.dataManager||e.dataSource||{};(i=n.data||n.json||(n.dataSource?n.dataSource.json:void 0))&&0===i.length&&n.dataSource.data&&(i=n.dataSource.data),i&&i.length&&(this.applyDataSource(e,i,t),t.trigger("dataLoaded",{diagram:Ls(t)}))},e.prototype.initSource=function(e,t){var i,n=this,r=e,o=e;if(r.dataManager instanceof nh.a||r.dataSource instanceof nh.a){var a=(o.dataManager||o.dataSource).defaultQuery||new rh.b;(e.dataManager||e.dataSource).executeQuery(a).then((function(r){i=r.result,t.isDestroyed||(t.protectPropertyChange(!0),n.applyDataSource(e,i,t),t.refreshDiagram(),t.protectPropertyChange(!1),t.trigger("dataLoaded",{diagram:Ls(t)}))}))}},e.prototype.applyDataSource=function(e,t,i){var n,r,o;this.dataTable={};var a,s,l=[],c=[];if(void 0!==t){for(var d=0;d<t.length;d++)void 0===(n=t[d])[e.parentId]||null===n[e.parentId]||"object"!==typeof n[e.parentId]?void 0!==l[n[e.parentId]]?l[n[e.parentId]].items.push(n):l[n[e.parentId]]={items:[n]}:l=this.updateMultipleRootNodes(n,l,e,t),e.root===n[e.id]&&(r={items:[n]});if(r)c.push(r);else for(var h=0,p=Object.keys(l);h<p.length;h++){var u=p[h];u&&"undefined"!==u&&"''"!==u&&"null"!==u||c.push(l[u])}for(var f=0;f<c.length;f++)for(var g=0;g<c[f].items.length;g++)a=c[f].items[g],o=this.applyNodeTemplate(e,a,i),i.nodes.push(o),this.dataTable[a[e.id]]=o,void 0!==(s=l[o.data[e.id]])&&this.renderChildNodes(e,s,o.id,l,i)}this.dataTable=null},e.prototype.updateMultipleRootNodes=function(e,t,i,n){for(var r,o=e[i.parentId],a=0;a<o.length;a++)t[r=o[a]]?t[r].items.push(e):t[r]={items:[e]};return t},e.prototype.applyNodeTemplate=function(e,t,i){var n={id:lc(),data:t},r=Pc(e.doBinding);r&&r(n,t,i);var o=new Pl(i,"nodes",n,!0);if(_a(o,n,i.nodeDefaults),e.dataMapSettings)for(var a=void 0,s=[],l=[],c=0;c<e.dataMapSettings.length;c++){if(-1!==e.dataMapSettings[c].property.indexOf(".")){l=this.splitString(e.dataMapSettings[c].property);for(var d=0;d<l.length;d++)-1!==l[d].indexOf("[")&&(a=l[d].indexOf("["),s=l[d].split("["));if(a)if(l[2])o[s[0]][l[0].charAt(a+1)][l[1]][l[2]]=t[e.dataMapSettings[c].field];else{var h=t[e.dataMapSettings[c].field];o[s[0]][l[0].charAt(a+1)][l[1]]=h}else l[2]?o[l[0]][l[1]][l[2]]=t[e.dataMapSettings[c].field]:o[l[0]][l[1]]=t[e.dataMapSettings[c].field]}else{var p=e.dataMapSettings[c].property;o[p=p.charAt(0).toLowerCase()+p.slice(1)]=t[e.dataMapSettings[c].field]}a=0,s=[],l=[]}return this.collectionContains(o,i,e.id,e.parentId)?this.dataTable[t[e.id]]:o},e.prototype.splitString=function(e){var t=[];t=e.split(".");for(var i=0;i<t.length;i++)t[i]=t[i].charAt(0).toLowerCase()+t[i].slice(1);return t},e.prototype.renderChildNodes=function(e,t,i,n,r){for(var o,a,s,l=0;l<t.items.length;l++){o=t.items[l],s=this.applyNodeTemplate(e,o,r);var c=!1;this.collectionContains(s,r,e.id,e.parentId)?c=!0:(this.dataTable[o[e.id]]=s,r.nodes.push(s)),this.containsConnector(r,i,s.id)||r.connectors.push(this.applyConnectorTemplate(i,s.id,r)),c||void 0!==(a=n[s.data[e.id]])&&this.renderChildNodes(e,a,s.id,n,r)}},e.prototype.containsConnector=function(e,t,i){if(""!==t&&""!==i)for(var n=0;n<e.connectors.length;n++){var r=e.connectors[n];if(void 0!==r&&r.sourceID===t&&r.targetID===i)return!0}return!1},e.prototype.collectionContains=function(e,t,i,n){var r=this.dataTable[e.data[i]];return void 0!==r&&r.data[i]===e.data[i]&&r.data[n]===e.data[n]},e.prototype.applyConnectorTemplate=function(e,t,i){var n={id:lc(),sourceID:e,targetID:t},r=new _r(i,"connectors",n,!0);return _a(r,n,i.connectorDefaults),r},e}(),ah={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};function sh(e,t){var i={};if(Object(r.J)(e)||"string"===typeof e||"number"===typeof e||!Object(r.J)(e.isHeader))return e;for(var n=0,o=Object.keys(t);n<o.length;n++){var a=t[o[n]],s=Object(r.J)(a)||"string"!==typeof a?void 0:Object(r.H)(a,e);Object(r.J)(s)||(i[a]=s)}return i}!function(e){e.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},i={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:e.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function n(e,t,i,n,r){return w(e,o(e,t,i,n,r),null,n)}function o(e,t,n,o,a){var s=[],l=Object(r.C)({},i,o);ah=v(l.moduleName);for(var c=f(),d=0;d<t.length;d++)if(!Object(r.J)(t[d])){var h=void 0;if(l.itemCreating&&"function"===typeof l.itemCreating){var p={dataSource:t,curData:t[d],text:t[d],options:l};l.itemCreating(p)}if(h=n?m(e,t[d],void 0,null,null,[],null,c,d,o):b(e,t[d],void 0,null,null,o,a),l.itemCreated&&"function"===typeof l.itemCreated){p={dataSource:t,curData:t[d],text:t[d],item:h,options:l};l.itemCreated(p)}s.push(h)}return s}function a(n,o,a,s,l,c){var d=Object(r.C)({},i,a);ah=v(d.moduleName);var u,y=Object(r.C)({},e.defaultMappedFields,d.fields),w=Object(r.C)({},t,d.ariaAttributes),x=[];s&&(w.level=s);var O,S,C=[];o&&o.length&&!Object(r.J)(h(o).item)&&!h(o).item.hasOwnProperty(y.id)&&(u=f());for(var P=0;P<o.length;P++){var j=sh(o[P],y);if(!Object(r.J)(o[P])){if(d.itemCreating&&"function"===typeof d.itemCreating){var I={dataSource:o,curData:o[P],text:j[y.text],options:d,fields:y};d.itemCreating(I)}var E=o[P];d.itemCreating&&"function"===typeof d.itemCreating&&(j=sh(o[P],y)),j.hasOwnProperty(y.id)&&!Object(r.J)(j[y.id])&&(u=j[y.id]);var T=[];if(d.showCheckBox&&(d.itemNavigable&&(j[y.url]||j[y.urlAttributes])?x.push(n("input",{className:ah.check,attrs:{type:"checkbox"}})):T.push(n("input",{className:ah.check,attrs:{type:"checkbox"}}))),!0===l)d.showIcon&&j.hasOwnProperty(y.iconCss)&&!Object(r.J)(j[y.iconCss])&&T.push(n("span",{className:ah.icon+" "+j[y.iconCss]})),S=(O=m(n,E,j,y,d.itemClass,T,!(!E.hasOwnProperty("isHeader")||!E.isHeader),u,P,a)).querySelector("."+ah.anchorWrap),d.itemNavigable&&x.length&&Object(r.O)(x,O.firstElementChild);else{if((O=b(n,E,j,y,d.itemClass,a,c)).classList.add(ah.level+"-"+w.level),O.setAttribute("aria-level",w.level.toString()),S=O.querySelector("."+ah.anchorWrap),j.hasOwnProperty(y.tooltip)&&O.setAttribute("title",j[y.tooltip]),j.hasOwnProperty(y.htmlAttributes)&&j[y.htmlAttributes]&&p(O,j[y.htmlAttributes]),j.hasOwnProperty(y.enabled)&&!1===j[y.enabled]&&O.classList.add(ah.disabled),j.hasOwnProperty(y.isVisible)&&!1===j[y.isVisible]&&(O.style.display="none"),j.hasOwnProperty(y.imageUrl)&&!Object(r.J)(j[y.imageUrl])&&!d.template){var A={src:j[y.imageUrl]};Object(r.N)(A,j[y.imageAttributes]);var D=n("img",{className:ah.image,attrs:A});S?S.insertAdjacentElement("afterbegin",D):Object(r.O)([D],O.firstElementChild)}if(d.showIcon&&j.hasOwnProperty(y.iconCss)&&!Object(r.J)(j[y.iconCss])&&!d.template){var k;k=n("div",{className:ah.icon+" "+j[y.iconCss]}),S?S.insertAdjacentElement("afterbegin",k):Object(r.O)([k],O.firstElementChild)}T.length&&Object(r.O)(T,O.firstElementChild),d.itemNavigable&&x.length&&Object(r.O)(x,O.firstElementChild),g(n,j,y,o,d,O,w.level)}if(S&&Object(r.t)([O],[ah.navigable]),d.itemCreated&&"function"===typeof d.itemCreated){I={dataSource:o,curData:o[P],text:j[y.text],item:O,options:d,fields:y};d.itemCreated(I)}x=[],C.push(O)}}return C}function s(e,t,n,o,s,l){var c=Object(r.C)({},i,n);return w(e,a(e,t,n,o,s,l),c.listClass,n)}function l(e,t){if(t&&e){return Array.prototype.slice.call(t).indexOf(e)}}function c(e,t,i){if(void 0===i&&(i=new rh.b),"Ascending"===e)i.sortBy(t,"ascending",!0);else if("Descending"===e)i.sortBy(t,"descending",!0);else for(var n=0;n<i.queries.length;n++)"onSortBy"===i.queries[n].fn&&i.queries.splice(n,1);return i}function d(e,t){return new nh.a(e).executeLocal(t)}function h(e){for(var t={typeof:null,item:null},i=0;i<e.length;i++)if(!Object(r.J)(e[i]))return{typeof:typeof e[i],item:e[i]};return t}function p(e,t){var i={};Object(r.N)(i,t),i.class&&(Object(r.t)([e],i.class.split(" ")),delete i.class),Object(r.v)(e,i)}function u(e){for(var t={},i=e.attributes,n=0;n<i.length;n++)t[i[n].nodeName]=i[n].nodeValue;return t}function f(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function g(e,t,i,n,o,a,l){var c=t[i.child]||[],d=t[i.hasChildren];if(c.length&&(d=!0,a.classList.add(ah.hasChild),o.processSubChild)){var h=s(e,c,o,++l);a.appendChild(h)}o.expandCollapse&&d&&!o.template&&(a.firstElementChild.classList.add(ah.iconWrapper),("Left"===o.expandIconPosition?r.O:r.u)([e("div",{className:"e-icons "+o.expandIconClass})],a.querySelector("."+ah.textContent)))}function m(e,n,o,a,s,l,c,d,h,u){var f,g,m=Object(r.C)({},i,u),v=Object(r.C)({},t,m.ariaAttributes),b=n,w=n;"string"!==typeof n&&"number"!==typeof n&&"boolean"!==typeof n&&(f=n,b="boolean"===typeof o[a.text]||"number"===typeof o[a.text]?o[a.text]:o[a.text]||"",w=o[a.value]),g=Object(r.J)(f)||Object(r.J)(o[a.id])||""===o[a.id]?d+"-"+h:d;var x=e("li",{className:(!0===c?ah.group:ah.li)+" "+(Object(r.J)(s)?"":s),id:g,attrs:""!==v.groupItemRole&&""!==v.itemRole?{role:!0===c?v.groupItemRole:v.itemRole}:{}});return f&&o.hasOwnProperty(a.enabled)&&"false"===o[a.enabled].toString()&&x.classList.add(ah.disabled),c?x.innerText=b:(x.setAttribute("data-value",Object(r.J)(w)?"null":w),x.setAttribute("role","option"),f&&o.hasOwnProperty(a.htmlAttributes)&&o[a.htmlAttributes]&&p(x,o[a.htmlAttributes]),l.length&&!m.itemNavigable&&Object(r.u)(l,x),f&&(o[a.url]||o[a.urlAttributes]&&o[a.urlAttributes].href)?x.appendChild(y(e,f,a,b,l,m.itemNavigable)):(l.length&&m.itemNavigable&&Object(r.u)(l,x),x.appendChild(document.createTextNode(b)))),x}function v(e){return{li:"e-"+e+"-item",ul:"e-"+e+"-parent e-ul",group:"e-"+e+"-group-item",icon:"e-"+e+"-icon",text:"e-"+e+"-text",check:"e-"+e+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+e+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+e+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function y(e,t,i,n,o,a){var s,l=sh(t,i),c={href:l[i.url]};if(l.hasOwnProperty(i.urlAttributes)&&l[i.urlAttributes]&&(Object(r.N)(c,l[i.urlAttributes]),c.href=l[i.url]?l[i.url]:l[i.urlAttributes].href),a){s=e("a",{className:ah.text+" "+ah.url});var d=e("div",{className:ah.anchorWrap});o&&o.length&&Object(r.u)(o,d),d.appendChild(document.createTextNode(n)),Object(r.u)([d],s)}else s=e("a",{className:ah.text+" "+ah.url,innerHTML:n});return p(s,c),s}function b(e,n,o,a,s,l,c){var d,h,p,u=Object(r.C)({},i,l),g=Object(r.C)({},t,u.ariaAttributes),m=n;"string"!==typeof n&&"number"!==typeof n&&(p=n,m=o[a.text]||"",d=Object(r.J)(o._id)?o[a.id]:o._id,h=!(!n.hasOwnProperty("isHeader")||!n.isHeader)),l&&l.enableHtmlSanitizer&&(m=m);var v=e("li",{className:(!0===h?ah.group:ah.li)+" "+(Object(r.J)(s)?"":s),attrs:""!==g.groupItemRole&&""!==g.itemRole?{role:!0===h?g.groupItemRole:g.itemRole}:{}});Object(r.J)(d)?v.setAttribute("data-uid",f()):v.setAttribute("data-uid",d);var b="BlazId";if(l&&l.removeBlazorID&&"object"===typeof n&&n.hasOwnProperty(b)&&delete n.BlazId,h&&l&&l.groupTemplate)(w=Object(r.z)(l.groupTemplate)(n,c,"groupTemplate",u.groupTemplateID,!!u.isStringTemplate,null,v))&&Object(r.u)(w,v);else if(!h&&l&&l.template){var w;(w=Object(r.z)(l.template)(n,c,"template",u.templateID,!!u.isStringTemplate,null,v))&&Object(r.u)(w,v)}else{var x=e("div",{className:ah.textContent,attrs:""!==g.wrapperRole?{role:g.wrapperRole}:{}});if(p&&(o[a.url]||o[a.urlAttributes]&&o[a.urlAttributes].href))x.appendChild(y(e,p,a,m,null,u.itemNavigable));else{var O=e("span",{className:ah.text,attrs:""!==g.itemText?{role:g.itemText}:{}});l&&l.enableHtmlSanitizer?O.innerText=m:O.innerHTML=m,x.appendChild(O)}v.appendChild(x)}return v}function w(e,n,o,a){var s=Object(r.C)({},i,a),l=Object(r.C)({},t,s.ariaAttributes),c=e("ul",{className:(ah=v(s.moduleName)).ul+" "+(Object(r.J)(o)?"":o),attrs:""!==l.listRole?{role:l.listRole}:{}});return Object(r.u)(n,c),c}e.createList=function(e,o,a,l,c){var d=Object(r.C)({},i,a),p=Object(r.C)({},t,d.ariaAttributes),u=h(o).typeof;return"string"===u||"number"===u?n(e,o,l,a,c):s(e,o,a,p.level,l,c)},e.createListFromArray=n,e.createListItemFromArray=o,e.createListItemFromJson=a,e.createListFromJson=s,e.getSiblingLI=function(e,t,n){if(ah=v(i.moduleName),e&&e.length){var o,a,s=Array.prototype.slice.call(e);for(o=s[(a=t?l(t,s):!0===n?s.length:-1)+(!0===n?-1:1)];o&&(!Object(r.M)(o)||o.classList.contains(ah.disabled));)o=s[a+=!0===n?-1:1];return o}},e.indexOf=l,e.groupDataSource=function(t,i,n){void 0===n&&(n="None");var o=Object(r.C)({},e.defaultMappedFields,i),a=(new rh.b).group(o.groupBy),s=d(t,a=c(n,"key",a));t=[];for(var l=0;l<s.length;l++){var h=s[l].items,p={};p[o.text]=s[l].key,p.isHeader=!0;var u=o.text;"id"===u&&(p[u="text"]=s[l].key),p._id="group-list-item-"+(s[l].key?s[l].key.toString().trim():"undefined"),p.items=h,t.push(p);for(var f=0;f<h.length;f++)t.push(h[f])}return t},e.addSorting=c,e.getDataSource=d,e.createJsonFromElement=function t(n,o){var a=Object(r.C)({},i,o),s=Object(r.C)({},e.defaultMappedFields,a.fields),l=n.cloneNode(!0),c=[];l.classList.add("json-parent");var d=l.querySelectorAll(".json-parent>li");l.classList.remove("json-parent");for(var h=0;h<d.length;h++){for(var p=d[h],g=p.querySelector("a"),m=p.querySelector("ul"),v={},y=g?g.childNodes:p.childNodes,b=Object.keys(y),w=0;w<y.length;w++)y[Number(b[w])].hasChildNodes()||(v[s.text]=y[Number(b[w])].textContent);var x=u(p);x.id?(v[s.id]=x.id,delete x.id):v[s.id]=f(),Object.keys(x).length&&(v[s.htmlAttributes]=x),g&&(x=u(g),Object.keys(x).length&&(v[s.urlAttributes]=x)),m&&(v[s.child]=t(m,o)),c.push(v)}return c},e.renderContentTemplate=function(t,n,o,a,s,l){for(var c,d=t("ul",{className:(ah=v(i.moduleName)).ul,attrs:{role:"presentation"}}),h=Object(r.C)({},i,s),p=Object(r.C)({},e.defaultMappedFields,a),u=Object(r.z)(n),g=[],m=f(),y=0;y<o.length;y++){var b=sh(o[y],p),w=o[y],x=w.isHeader;if(c="string"===typeof o[y]||"number"===typeof o[y]?w:b[p.value],h.itemCreating&&"function"===typeof h.itemCreating){var O={dataSource:o,curData:w,text:c,options:h,fields:p};h.itemCreating(O)}h.itemCreating&&"function"===typeof h.itemCreating&&(b=sh(o[y],p),c="string"===typeof o[y]||"number"===typeof o[y]?w:b[p.value]);var S=t("li",{id:m+"-"+y,className:x?ah.group:ah.li,attrs:{role:"presentation"}});if(x)"string"===typeof o[y]||"number"===typeof o[y]?S.innerText=w:S.innerText=b[p.text];else{var C,P=x?h.groupTemplateID:h.templateID;if(x)(C=u(w,l,"headerTemplate",P,!!h.isStringTemplate,null,S))&&Object(r.u)(C,S);else(C=u(w,l,"template",P,!!h.isStringTemplate,null,S))&&Object(r.u)(C,S);S.setAttribute("data-value",Object(r.J)(c)?"null":c),S.setAttribute("role","option")}if(h.itemCreated&&"function"===typeof h.itemCreated){O={dataSource:o,curData:w,text:c,item:S,options:h,fields:p};h.itemCreated(O)}g.push(S)}return Object(r.u)(g,d),d},e.renderGroupTemplate=function(t,n,o,a,s,l){for(var c=Object(r.z)(t),d=Object(r.C)({},e.defaultMappedFields,o),h=Object(r.C)({},i,s),p=d.groupBy,u=0,f=a;u<f.length;u++){var g=f[u],m={};m[p]=g.textContent,g.innerHTML="";var v=c(m,l,"groupTemplate",h.groupTemplateID,!!h.isStringTemplate,null,g);v&&Object(r.u)(v,g)}return a},e.generateId=f,e.generateUL=w,e.generateIcon=function(e,t,n,o){var a=Object(r.C)({},i,o);return ah=v(a.moduleName),("Left"===a.expandIconPosition?r.O:r.u)([e("div",{className:"e-icons "+a.expandIconClass+" "+(Object(r.J)(n)?"":n)})],t.querySelector("."+ah.textContent)),t}}(ad||(ad={}));var lh=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ch=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},dh="e-rtl",hh="e-overlay",ph="e-nav-right-arrow",uh="e-nav-left-arrow",fh="e-scroll-nav",gh="e-scroll-device",mh="e-scroll-overlay",vh="e-scroll-right-overlay",yh="e-scroll-left-overlay",bh=function(e){function t(t,i){return e.call(this,t,i)||this}return lh(t,e),t.prototype.preRender=function(){this.browser=r.c.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=r.c.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=Object(r.G)("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(dh)},t.prototype.render=function(){this.touchModule=new r.s(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),r.m.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(gh),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){Object(r.J)(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,r=[].slice.call(i.children);n<r.length;n++){var o=r[n];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove(gh);var i=Object(r.U)(".e-"+t.id+"_nav."+fh,t),n=Object(r.U)("."+mh,t);[].slice.call(n).forEach((function(e){Object(r.B)(e)}));for(var o=0,a=[].slice.call(this.scrollItems.children);o<a.length;o++){var s=a[o];t.appendChild(s)}this.uniqueId&&this.element.removeAttribute("id"),Object(r.B)(this.scrollEle),i.length>0&&(Object(r.B)(i[0]),Object(r.J)(i[1])||Object(r.B)(i[1])),r.m.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=Object(r.U)(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add(hh):this.element.classList.remove(hh),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))},t.prototype.createOverlay=function(e){var t=e.id.concat("_nav"),i=this.createElement("div",{className:mh+" "+vh}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),r=this.createElement("div",{id:t.concat("_right"),className:n}),o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});r.appendChild(o);var a=this.createElement("div",{className:mh+" "+yh});this.ieCheck&&r.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(r),e.insertBefore(a,e.firstChild),this.eventBinding([r])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),n=this.createElement("div",{id:t.concat("_right"),className:i});n.setAttribute("aria-disabled","false");var r=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-left-nav"),a=this.createElement("div",{id:t.concat("_left"),className:o+" "+hh});a.setAttribute("aria-disabled","true");var s=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});a.appendChild(s),n.appendChild(r),e.appendChild(n),e.insertBefore(a,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),a.classList.add("e-ie-align")),this.eventBinding([n,a])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach((function(e){new r.s(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),r.m.add(e,"click",t.clickEventHandler,t)}))},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,fh)?i.firstElementChild:i;this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){var n=this.scrollEle,r=this.element,o=t.classList;o.contains(fh)&&(o=t.querySelector(".e-nav-arrow").classList),this.contains(r,dh)&&this.browserCheck&&(e=-e);n.scrollLeft;!this.contains(r,dh)||this.browserCheck||this.ieCheck?o.contains(ph)?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i):o.contains(uh)?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var n=.5;!function r(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Left"===e.swipeDirection?i.scrollLeft+=t*o:"Right"===e.swipeDirection&&(i.scrollLeft-=t*o),n-=.5,window.requestAnimationFrame(r))}()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(Object(r.U)("."+mh,this.element)).forEach((function(t){e-=t.offsetWidth}));!function i(){var r,o;n.contains(n.element,dh)&&n.browserCheck?(r=-e,o=-10):(r=e,o=10),r<10?window.cancelAnimationFrame(o):(n.scrollUpdating(o,t),e-=o,window.requestAnimationFrame(i))}()}},t.prototype.touchHandler=function(e){var t,i=this.scrollEle;t=e.distanceX,this.ieCheck&&this.contains(this.element,dh)&&(t=-t),"Left"===e.scrollDirection?i.scrollLeft=i.scrollLeft+t:"Right"===e.scrollDirection&&(i.scrollLeft=i.scrollLeft-t)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(Object(r.J)(e)?t:e).querySelector(".e-nav-arrow");Object(r.J)(e)?Object(r.x)(i,[ph],[uh]):Object(r.x)(i,[uh],[ph])}else e.classList.add(hh),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove(hh),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollHandler=function(e){var t=e.target,i=t.offsetWidth,n=this.element,r=this.element.querySelector(".e-scroll-left-nav"),o=this.element.querySelector(".e-scroll-right-nav"),a=this.element.querySelector("."+yh),s=this.element.querySelector("."+vh),l=t.scrollLeft;if(l<=0&&(l=-l),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(a=this.element.querySelector("."+vh),s=this.element.querySelector("."+yh)),a.style.width=l<40?l+"px":"40px",t.scrollWidth-Math.ceil(i+l)<40?s.style.width=t.scrollWidth-Math.ceil(i+l)+"px":s.style.width="40px"),0===l)!this.contains(n,dh)||this.browserCheck||this.ieCheck?this.arrowDisabling(r,o):this.arrowDisabling(o,r);else if(Math.ceil(i+l+.1)>=t.scrollWidth)!this.contains(n,dh)||this.browserCheck||this.ieCheck?this.arrowDisabling(o,r):this.arrowDisabling(r,o);else{var c=this.element.querySelector(".e-scroll-nav.e-overlay");c&&(c.classList.remove(hh),c.setAttribute("aria-disabled","false"),c.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(dh):this.element.classList.remove(dh)}}},ch([Object(r.q)(null)],t.prototype,"scrollStep",void 0),t=ch([r.p],t)}(r.i),wh=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xh=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Oh="e-rtl",Sh="e-overlay",Ch="e-nav-up-arrow",Ph="e-nav-down-arrow",jh="e-scroll-nav",Ih="e-scroll-device",Eh="e-scroll-up-overlay",Th="e-scroll-down-overlay",Ah=function(e){function t(t,i){return e.call(this,t,i)||this}return wh(t,e),t.prototype.preRender=function(){this.browser=r.c.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=r.c.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=Object(r.G)("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(Oh)},t.prototype.render=function(){this.touchModule=new r.s(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),r.m.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add(Ih),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),r.m.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){Object(r.J)(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=Object(r.A)("div",{className:"e-vscroll-content"}),t=Object(r.A)("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,o=[].slice.call(i.children);n<o.length;n++){var a=o[n];e.appendChild(a)}t.appendChild(e),i.appendChild(t),t.style.overflowY="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",Object(r.Q)([this.element],["e-vscroll",Ih]);var i=Object(r.U)(".e-"+t.id+"_nav."+jh,t),n=Object(r.U)(".e-scroll-overlay",t);[].slice.call(n).forEach((function(e){Object(r.B)(e)}));for(var o=0,a=[].slice.call(this.scrollItems.children);o<a.length;o++){var s=a[o];t.appendChild(s)}this.uniqueId&&this.element.removeAttribute("id"),Object(r.B)(this.scrollEle),i.length>0&&(Object(r.B)(i[0]),Object(r.J)(i[1])||Object(r.B)(i[1])),r.m.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=Object(r.U)(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add(Sh):this.element.classList.remove(Sh),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))},t.prototype.createOverlayElement=function(e){var t=e.id.concat("_nav"),i=Object(r.A)("div",{className:"e-scroll-overlay "+Th}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),o=Object(r.A)("div",{id:t.concat("down"),className:n}),a=Object(r.A)("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});o.appendChild(a);var s=Object(r.A)("div",{className:"e-scroll-overlay "+Eh});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(o),e.insertBefore(s,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),n=Object(r.A)("div",{id:t.concat("_down"),className:i});n.setAttribute("aria-disabled","false");var o=Object(r.A)("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),a="e-"+e.id.concat("_nav e-scroll-nav e-scroll-up-nav"),s=Object(r.A)("div",{id:t.concat("_up"),className:a+" "+Sh});s.setAttribute("aria-disabled","true");var l=Object(r.A)("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});s.appendChild(l),n.appendChild(o),n.setAttribute("tabindex","0"),e.appendChild(n),e.insertBefore(s,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),s.classList.add("e-ie-align")),this.eventBinding([n,s])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach((function(e){new r.s(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),r.m.add(e,"click",t.clickEventHandler,t)}))},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,jh)?i.firstElementChild:i;this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){this.element;var n=t.classList;n.contains(jh)&&(n=t.querySelector(".e-nav-arrow").classList),n.contains(Ph)?this.frameScrollRequest(e,"add",i):n.contains(Ch)&&this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var n=.5;!function r(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Up"===e.swipeDirection?i.scrollTop+=t*o:"Down"===e.swipeDirection&&(i.scrollTop-=t*o),n-=.02,window.requestAnimationFrame(r))}()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(Object(r.U)(".e-scroll-overlay",this.element)).forEach((function(t){e-=t.offsetHeight}));!function i(){e<10?window.cancelAnimationFrame(10):(n.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(i))}()}},t.prototype.touchHandler=function(e){var t,i=this.scrollEle;t=e.distanceY,"Up"===e.scrollDirection?i.scrollTop=i.scrollTop+t:"Down"===e.scrollDirection&&(i.scrollTop=i.scrollTop-t)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(Object(r.J)(e)?t:e).querySelector(".e-nav-arrow");Object(r.J)(e)?Object(r.x)(i,[Ph],[Ch]):Object(r.x)(i,[Ch],[Ph])}else e.classList.add(Sh),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove(Sh),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var t=e.target,i=t.offsetHeight,n=(this.element,this.element.querySelector(".e-scroll-up-nav")),r=this.element.querySelector(".e-scroll-down-nav"),o=this.element.querySelector("."+Eh),a=this.element.querySelector("."+Th),s=t.scrollTop;if(s<=0&&(s=-s),this.isDevice&&(o.style.height=s<40?s+"px":"40px",t.scrollHeight-Math.ceil(i+s)<40?a.style.height=t.scrollHeight-Math.ceil(i+s)+"px":a.style.height="40px"),0===s)this.arrowDisabling(n,r);else if(Math.ceil(i+s+.1)>=t.scrollHeight)this.arrowDisabling(r,n);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove(Sh),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(Oh):this.element.classList.remove(Oh)}}},xh([Object(r.q)(null)],t.prototype,"scrollStep",void 0),t=xh([r.p],t)}(r.i);function Dh(e,t,i,n,o,a){var s,l;if("vscroll"===n?(s=a||t.offsetHeight,l=i.offsetHeight):(s=t.offsetWidth,l=i.offsetWidth),s<l){var c=e("div",{className:"e-menu-"+n});t.appendChild(c),c.appendChild(i),a?(c.style.overflow="hidden",c.style.height=a+"px"):(c.style.maxHeight=t.style.maxHeight,t.style.overflow="hidden");return"vscroll"===n?new Ah({enableRtl:o},c).scrollStep=Object(r.T)(".e-"+n+"-bar",t).offsetHeight/2:new bh({enableRtl:o},c).scrollStep=Object(r.T)(".e-"+n+"-bar",t).offsetWidth,c}return i}function kh(e,t,i){if(e){var n=Object(r.T)(".e-menu-parent",t);n?i&&i!==n||(e.destroy(),t.parentElement.appendChild(n),Object(r.B)(t)):(e.destroy(),Object(r.B)(t))}}var Mh=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Lh=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Rh="enter",zh="escape",Nh="e-focused",Bh="e-menu-header",_h="e-selected",Hh="e-separator",Wh="uparrow",Fh="downarrow",qh="leftarrow",Uh="rightarrow",Vh="home",Yh="end",Xh="e-caret",Gh="e-menu-item",Zh="e-disabled",Jh="e-menu-hide",Qh="e-icons",$h="e-rtl",Kh="e-menu-popup",ep="Template",tp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),Lh([Object(r.q)("id")],t.prototype,"itemId",void 0),Lh([Object(r.q)("parentId")],t.prototype,"parentId",void 0),Lh([Object(r.q)("text")],t.prototype,"text",void 0),Lh([Object(r.q)("iconCss")],t.prototype,"iconCss",void 0),Lh([Object(r.q)("url")],t.prototype,"url",void 0),Lh([Object(r.q)("separator")],t.prototype,"separator",void 0),Lh([Object(r.q)("items")],t.prototype,"children",void 0),t}(r.d),ip=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),Lh([Object(r.q)(null)],t.prototype,"iconCss",void 0),Lh([Object(r.q)("")],t.prototype,"id",void 0),Lh([Object(r.q)(!1)],t.prototype,"separator",void 0),Lh([Object(r.e)([],t)],t.prototype,"items",void 0),Lh([Object(r.q)("")],t.prototype,"text",void 0),Lh([Object(r.q)("")],t.prototype,"url",void 0),t}(r.d),np=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mh(t,e),Lh([Object(r.q)("SlideDown")],t.prototype,"effect",void 0),Lh([Object(r.q)(400)],t.prototype,"duration",void 0),Lh([Object(r.q)("ease")],t.prototype,"easing",void 0),t}(r.d),rp=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.navIdx=[],n.animation=new r.b({}),n.isTapHold=!1,n.tempItem=[],n}return Mh(t,e),t.prototype.preRender=function(){if(!this.isMenu){var e=void 0;if("EJS-CONTEXTMENU"===this.element.tagName){e=this.createElement("ul",{id:Object(r.G)(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});var t=Object(r.H)("ej2_instances",this.element);Object(r.Q)([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=e,Object(r.X)("ej2_instances",t,this.element)}else{e=this.createElement("ul",{id:Object(r.G)(this.getModuleName())}),Object(r.u)([].slice.call(this.element.cloneNode(!0).children),e);var i=this.element.nextElementSibling;i?this.element.parentElement.insertBefore(e,i):this.element.parentElement.appendChild(e),this.clonedElement=e}this.clonedElement.style.display="none"}if("EJS-MENU"===this.element.tagName){for(var n=this.element,o=Object(r.H)("ej2_instances",n),a=(e=this.createElement("ul"),this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"})),s=0,l=n.attributes.length;s<l;s++)e.setAttribute(n.attributes[s].nodeName,n.attributes[s].nodeValue);n.parentNode.insertBefore(a,n),Object(r.B)(n),n=e,a.appendChild(n),Object(r.X)("ej2_instances",o,n),this.clonedElement=a,this.element=n,this.element.id||(this.element.id=Object(r.G)(this.getModuleName()))}},t.prototype.render=function(){if(this.initialize(),this.renderItems(),this.isMenu&&this.template&&Object(r.I)()){var e=this.element.id+ep;Object(r.R)(e,ep),Object.keys(r.w).length&&Object(r.C)(this.tempItem,r.w[e],[],!0),Object(r.Y)(e,ep,this)}this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=this.getWrapper();e||(e=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(e,this.element):document.body.appendChild(e)),this.cssClass&&Object(r.t)([e],this.cssClass.split(" ")),this.enableRtl&&e.classList.add($h),e.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(e))},t.prototype.renderItems=function(){if(!this.items.length){var e=ad.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:e},!0),Object(r.I)()?this.element=this.removeChildElement(this.element):this.element.innerHTML=""}var t=this.createItems(this.items);if(Object(r.u)(Array.prototype.slice.call(t.children),this.element),this.element.classList.add("e-menu-parent"),this.isMenu&&(!this.hamburgerMode&&this.element.classList.contains("e-vertical")&&this.setBlankIconStyle(this.element),this.enableScrolling)){var i=this.getWrapper();this.element.classList.contains("e-vertical")?Dh(this.createElement,i,this.element,"vscroll",this.enableRtl):Dh(this.createElement,i,this.element,"hscroll",this.enableRtl)}},t.prototype.wireEvents=function(){var e=this.getWrapper();if(this.target){for(var t=void 0,i=Object(r.U)(this.target),n=0,o=i.length;n<o;n++)t=i[n],this.isMenu?r.m.add(t,"click",this.menuHeaderClickHandler,this):r.c.isIos?new r.s(t,{tapHold:this.touchHandler.bind(this)}):r.m.add(t,"contextmenu",this.cmenuHandler,this);if(this.targetElement=t,!this.isMenu){r.m.add(this.targetElement,"scroll",this.scrollHandler,this);for(var a=0,s=_i(this.targetElement);a<s.length;a++){var l=s[a];r.m.add(l,"scroll",this.scrollHandler,this)}}}r.c.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),r.m.add(this.isMenu?document:e,"mouseover",this.delegateMoverHandler,this),r.m.add(document,"mousedown",this.delegateMouseDownHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),r.m.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(e),this.rippleFn=Object(r.S)(e,{selector:"."+Gh})},t.prototype.wireKeyboardEvent=function(e){var t={downarrow:Fh,uparrow:Wh,enter:Rh,leftarrow:qh,rightarrow:Uh,escape:zh};this.isMenu&&(t.home=Vh,t.end=Yh),new r.n(e,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:t})},t.prototype.mouseDownHandler=function(e){Object(r.y)(e.target,".e-"+this.getModuleName()+"-wrapper")===this.getWrapper()||Object(r.y)(e.target,".e-"+this.getModuleName()+"-popup")||this.closeMenu(this.isMenu?null:this.navIdx.length,e)},t.prototype.keyBoardHandler=function(e){var t="",i=e.target,n=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(e.preventDefault(),this.enableScrolling&&13===e.keyCode&&i.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([Nh,_h],[Object(r.y)(i,".e-"+this.getModuleName()+"-wrapper")]),n)switch(e.action){case Uh:t=Uh,e.action=Fh;break;case qh:t=qh,e.action=Wh;break;case Fh:t=Fh,e.action=Uh;break;case Wh:t=Wh,e.action=""}else if(this.enableRtl)switch(e.action){case qh:n=!0,t=qh,e.action=Uh;break;case Uh:n=!0,t=Uh,e.action=qh}switch(e.action){case Fh:case Wh:case Yh:case Vh:this.upDownKeyHandler(e);break;case Uh:this.rightEnterKeyHandler(e);break;case qh:this.leftEscKeyHandler(e);break;case Rh:this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):this.rightEnterKeyHandler(e);break;case zh:this.leftEscKeyHandler(e)}n&&(e.action=t)},t.prototype.upDownKeyHandler=function(e){var t=this.getUlByNavIdx(),i=e.action===Fh||e.action===Vh?0:t.childElementCount-1,n=i,r=this.getLIByClass(t,Nh);r&&(e.action!==Yh&&e.action!==Vh&&(n=this.getIdx(t,r)),r.classList.remove(Nh),e.action!==Yh&&e.action!==Vh&&(e.action===Fh?n++:n--,n===(e.action===Fh?t.childElementCount:-1)&&(n=i)));var o=t.children[n];n=this.isValidLI(o,n,e.action),t.children[n].classList.add(Nh),t.children[n].focus()},t.prototype.isValidLI=function(e,t,i){this.getWrapper();var n=this.getUlByNavIdx();return(e.classList.contains(Hh)||e.classList.contains(Zh)||e.classList.contains(Jh))&&(i===Fh||i===Uh?t++:t--),((e=n.children[t]).classList.contains(Hh)||e.classList.contains(Zh)||e.classList.contains(Jh))&&(t=this.isValidLI(e,t,i)),t},t.prototype.getUlByNavIdx=function(e){if(void 0===e&&(e=this.navIdx.length),this.isMenu){var t=[this.getWrapper()].concat([].slice.call(Object(r.U)("."+Kh)))[e];return Object(r.J)(t)?null:Object(r.T)(".e-menu-parent",t)}return this.getWrapper().children[e]},t.prototype.rightEnterKeyHandler=function(e){var t,i=this.getUlByNavIdx(),n=this.getLIByClass(i,Nh);if(n){var r=this.getIdx(i,n),o=this.navIdx.concat(r),a=this.getItem(o);a.items.length?(this.navIdx.push(r),this.keyType="right",this.action=e.action,this.openMenu(n,a,-1,-1,e)):e.action===Rh&&(this.isMenu&&0===this.navIdx.length?this.removeLIStateByClass([_h],[this.getWrapper()]):n.classList.remove(Nh),n.classList.add(_h),t={element:n,item:a,event:e},this.trigger("select",t),this.closeMenu(null,e))}},t.prototype.leftEscKeyHandler=function(e){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,e)):e.action===zh&&this.closeMenu(null,e)},t.prototype.scrollHandler=function(e){this.closeMenu(null,e)},t.prototype.touchHandler=function(e){this.isTapHold=!0,this.cmenuHandler(e.originalEvent)},t.prototype.cmenuHandler=function(e){e.preventDefault(),this.isCMenu=!0,this.pageX=e.changedTouches?e.changedTouches[0].pageX+1:e.pageX+1,this.pageY=e.changedTouches?e.changedTouches[0].pageY+1:e.pageY+1,this.closeMenu(null,e),this.isCMenu&&(this.canOpen(e.target)&&this.openMenu(null,null,this.pageY,this.pageX,e),this.isCMenu=!1)},t.prototype.closeMenu=function(e,t,i){var n=this;if(void 0===e&&(e=0),void 0===t&&(t=null),this.isMenuVisible()){var o,a,s,l=void 0,c=void 0,d=this.getWrapper(),h=this.getPopups(),p=!1,u=this.isMenu?h.length+1:d.childElementCount;if(o=this.isMenu&&1!==u?Object(r.T)(".e-ul",h[u-2]):Object(r.U)(".e-menu-parent",d)[u-1],this.isMenu&&o.classList.contains("e-menu")&&((l=this.getLIByClass(o,_h))&&l.classList.remove(_h),p=!0),!p){var f=t&&t.target&&this.getLI(t.target);a=this.navIdx.length?this.getItem(this.navIdx):null,s=a?a.items:this.items,c={element:o,parentItem:this.isMenu&&Object(r.I)()?this.getMenuItemModel(a,e):a,items:s,event:t,cancel:!1},this.trigger("beforeClose",c,(function(l){var c,d,h,p,u,g,m="",v=!l.cancel;(v||n.isCMenu)&&(n.isMenu?(c=Object(r.y)(o,"."+Kh),n.hamburgerMode&&(c.parentElement.style.minHeight="",Object(r.y)(o,".e-menu-item").setAttribute("aria-expanded","false")),n.unWireKeyboardEvent(c),kh(Object(r.E)(c.children[0],Ah),c.children[0]),(h=Object(r.E)(c,Bi)).hide(),m=c.id,h.destroy(),Object(r.B)(c)):n.toggleAnimation(o,!1),d={element:o,parentItem:a,items:s},n.trigger("onClose",d),n.navIdx.pop()),n.updateReactTemplate();var y=n.getWrapper()&&n.getUlByNavIdx();n.isCMenu&&(n.canOpen(t.target)&&n.openMenu(null,null,n.pageY,n.pageX,t),n.isCMenu=!1),n.isMenu&&y&&m.length&&(p=new RegExp("(.*)-ej2menu-"+n.element.id+"-popup").exec(m)[1],u=y.querySelector('[id="'+p+'"]'),g=f&&y.querySelector('[id="'+f.id+'"]'));var b=f&&f.querySelectorAll(".e-menu-item");if(v&&n.hamburgerMode&&e&&!b.length)n.afterCloseMenu(t);else if(v&&!n.hamburgerMode&&n.navIdx.length&&u&&!g){var w=t?Object(r.y)(t.target,".e-menu-wrapper"):null;w?(w=w.querySelector(".e-menu-item"))&&n.getIndex(w.id,!0).length<=n.navIdx.length&&n.closeMenu(n.navIdx[n.navIdx.length-1],t,!0):n.closeMenu(n.navIdx[n.navIdx.length-1],t)}else if(v&&!i&&!e&&(n.hamburgerMode&&n.navIdx.length||1===n.navIdx.length))n.closeMenu(null,t);else if(v&&Object(r.J)(e)&&n.navIdx.length)n.closeMenu(null,t);else if(!v||n.isMenu||e||0!==n.navIdx.length||n.isMenusClosed)if(v&&n.isMenu&&t&&t.target&&0!==n.navIdx.length&&Object(r.y)(t.target,".e-menu-parent.e-control"))n.closeMenu(0,t);else if(!v||"right"!==n.keyType&&"click"!==n.keyType){var x=n.getUlByNavIdx(),O=n.getLIByClass(x,_h);if(O&&(O.setAttribute("aria-expanded","false"),O.classList.remove(_h),f&&(O.classList.add(Nh),O.focus())),!v&&n.hamburgerMode&&f&&"false"===f.getAttribute("aria-expanded")&&"true"===f.getAttribute("aria-haspopup")){Object(r.y)(f,".e-menu-parent.e-control")?n.navIdx=[]:n.navIdx.pop(),n.navIdx.push(n.cliIdx);var S=n.getItem(n.navIdx);f.setAttribute("aria-expanded","true"),n.openMenu(f,S,-1,-1,t)}}else n.afterCloseMenu(t);else n.isMenusClosed=!0,n.closeMenu(0,t);n.removeStateWrapper()}))}}},t.prototype.updateReactTemplate=function(){if(this.isReact&&this.template&&0===this.navIdx.length){var e=this.portals.splice(0,this.items.length);this.clearTemplate(["template"]),this.portals=e,this.renderReactTemplates()}},t.prototype.getMenuItemModel=function(e,t){if(Object(r.J)(e))return null;Object(r.J)(t)&&(t=0);var i=this.getFields(t);return{text:e[i.text],id:e[i.id],items:e[i.child],separator:e[i.separator],iconCss:e[i.iconCss],url:e[i.url]}},t.prototype.getPopups=function(){var e=this,t=[];return[].slice.call(document.querySelectorAll("."+Kh)).forEach((function(i){e.getIndex(i.querySelector("."+Gh).id,!0).length&&t.push(i)})),t},t.prototype.isMenuVisible=function(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&Object(r.M)(this.element).valueOf()},t.prototype.canOpen=function(e){var t=!0;if(this.filter){t=!1;for(var i=this.filter.split(" "),n=0,o=i.length;n<o;n++)if(Object(r.y)(e,"."+i[n])){t=!0;break}}return t},t.prototype.openMenu=function(e,t,i,n,o,a){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=null),void 0===a&&(a=this.targetElement);var s=this.getWrapper();this.lItem=e;var l=""!==this.element.id?this.element.id:"menu";if(this.isMenusClosed=!1,Object(r.J)(i)&&(i=-1),Object(r.J)(n)&&(n=-1),e){if(this.uList=this.createItems(t[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&r.c.isDevice){s.lastChild.style.display="none";var c={text:t[this.getField("text")].toString(),iconCss:Qh+" e-previous"},d=new ip(this.items[0],"items",c,!0),h=this.createItems([d]).children[0];h.classList.add(Bh),this.uList.insertBefore(h,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper "+Kh,id:e.id+"-ej2menu-"+l+"-popup"}),this.hamburgerMode?(i=e.offsetHeight,e.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||1!==this.navIdx.length,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,e,this.isNestedOrVertical),this.template&&this.renderReactTemplates(),this.hamburgerMode?this.calculateIndentSize(this.uList,e):(this.cssClass&&Object(r.t)([this.popupWrapper],this.cssClass.split(" ")),this.popupObj.hide()),this.triggerBeforeOpen(e,this.uList,t,o,0,0,"menu")):(this.uList.style.zIndex=this.element.style.zIndex,s.appendChild(this.uList),this.triggerBeforeOpen(e,this.uList,t,o,i,n,"none"))}else this.uList=this.element,this.uList.style.zIndex=Hi(a||this.element).toString(),this.triggerBeforeOpen(e,this.uList,t,o,i,n,"none");if(this.isMenu&&this.template&&Object(r.I)()){var p=this.element.id+ep;if(Object.keys(r.w).length){var u=r.w[p];this.tempItem=this.tempItem.concat(u),r.w[p]=this.tempItem}Object(r.Y)(p,ep,this)}},t.prototype.calculateIndentSize=function(e,t){var i=getComputedStyle(t),n=parseInt(i.textIndent,10);this.navIdx.length<2&&!t.classList.contains("e-blankicon")?n*=2:n+=n/4,e.style.textIndent=n+"px";var r=e.querySelectorAll(".e-blankicon");if(r&&r.length)for(var o=e.querySelector(".e-menu-icon"),a=getComputedStyle(o),s=parseInt(a.marginRight,10)+o.offsetWidth+n,l=0;l<r.length;l++)r[l].style.textIndent=s+"px"},t.prototype.generatePopup=function(e,t,i,n){var o=this,a=new Bi(e,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:i,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:n||this.enableRtl?"none":"flip",Y:"fit"},position:n&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:t,open:function(){var e=Object(r.T)(".e-menu-vscroll",a.element);e&&(e.style.height="inherit",e.style.maxHeight="");var t=Object(r.T)(".e-ul",a.element);a.element.style.maxHeight="",t.focus(),o.triggerOpen(t)}});return a},t.prototype.createHeaderContainer=function(e){e=e||this.getWrapper();var t=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),i=this.enableHtmlSanitizer?r.r.sanitize(this.title):this.title,n=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:i}),o=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});t.appendChild(n),t.appendChild(o),e.insertBefore(t,this.element)},t.prototype.openHamburgerMenu=function(e){if(this.hamburgerMode){this.triggerBeforeOpen(null,this.element,null,e,0,0,"hamburger")}},t.prototype.closeHamburgerMenu=function(e){var t=this;if(this.hamburgerMode){var i;i={element:this.element,parentItem:null,event:e,items:this.items,cancel:!1},this.trigger("beforeClose",i,(function(i){i.cancel||(t.closeMenu(null,e),t.element.classList.add("e-hide-menu"),t.trigger("onClose",{element:t.element,parentItem:null,items:t.items}))}))}},t.prototype.callFit=function(e,t,i,n,r){return hi(e,null,{X:t,Y:i},{top:n,left:r})},t.prototype.triggerBeforeOpen=function(e,t,i,n,o,a,s){var l,c=this,d=(this.getIndex(e?e.id:null,!0),e?i[this.getField("children",this.navIdx.length-1)]:this.items),h={element:t,items:d,parentItem:this.isMenu&&Object(r.I)()?this.getMenuItemModel(i,this.navIdx.length-1):i,event:n,cancel:!1,top:o,left:a},p=s;this.trigger("beforeOpen",h,(function(o){switch(p){case"menu":if(c.hamburgerMode||(c.top=o.top,c.left=o.left),c.popupWrapper.style.display="block",c.hamburgerMode||(c.popupWrapper.style.maxHeight=c.popupWrapper.getBoundingClientRect().height+"px",c.enableScrolling&&Dh(c.createElement,c.popupWrapper,c.uList,"vscroll",c.enableRtl),c.checkScrollOffset(n)),c.hamburgerMode||c.left||c.top)c.popupObj.collision={X:"none",Y:"none"};else{if(c.popupObj.refreshPosition(c.lItem,!0),c.left=parseInt(c.popupWrapper.style.left,10),c.top=parseInt(c.popupWrapper.style.top,10),c.enableRtl&&(c.left=c.isNestedOrVertical?c.left-c.popupWrapper.offsetWidth-c.lItem.parentElement.offsetWidth+2:c.left-c.popupWrapper.offsetWidth+c.lItem.offsetWidth),l=pi(c.popupWrapper,null,c.left,c.top),(c.isNestedOrVertical||c.enableRtl)&&(l.indexOf("right")>-1||l.indexOf("left")>-1)){c.popupObj.collision.X="none";var a=Object(r.y)(c.lItem,".e-"+c.getModuleName()+"-wrapper").offsetWidth;c.left=c.enableRtl?ei(c.lItem,c.isNestedOrVertical?"right":"left","top").left:c.left-c.popupWrapper.offsetWidth-a+2}((l=pi(c.popupWrapper,null,c.left,c.top)).indexOf("left")>-1||l.indexOf("right")>-1)&&(c.left=c.callFit(c.popupWrapper,!0,!1,c.top,c.left).left),c.popupWrapper.style.left=c.left+"px"}c.popupWrapper.style.display="";break;case"none":c.top=o.top,c.left=o.left;break;case"hamburger":o.cancel||(c.element.classList.remove("e-hide-menu"),c.triggerOpen(c.element))}if("hamburger"!==p)if(o.cancel)c.isMenu?(c.popupObj.destroy(),Object(r.B)(c.popupWrapper)):t.className.indexOf("e-ul")>-1&&Object(r.B)(t),c.navIdx.pop();else if(c.isMenu)if(c.hamburgerMode)c.popupWrapper.style.top=c.top+"px",c.popupWrapper.style.left="0px",c.toggleAnimation(c.popupWrapper);else{c.setBlankIconStyle(c.popupWrapper),c.wireKeyboardEvent(c.popupWrapper),Object(r.S)(c.popupWrapper,{selector:"."+Gh}),c.popupWrapper.style.left=c.left+"px",c.popupWrapper.style.top=c.top+"px";var s="None"!==c.animationSettings.effect?{name:c.animationSettings.effect,duration:c.animationSettings.duration,timingFunction:c.animationSettings.easing}:null;c.popupObj.show(s,c.lItem)}else c.setBlankIconStyle(c.uList),c.setPosition(c.lItem,c.uList,c.top,c.left),c.toggleAnimation(c.uList);if("right"===c.keyType){var d=c.getUlByNavIdx();e.classList.remove(Nh);var h;if(c.isMenu&&1===c.navIdx.length&&c.removeLIStateByClass([_h],[c.getWrapper()]),e.classList.add(_h),c.action===Rh){var u={element:e,item:i,event:n};c.trigger("select",u)}e.focus(),d=c.getUlByNavIdx(),h=c.isValidLI(d.children[0],0,c.action),d.children[h].classList.add(Nh),d.children[h].focus()}}))},t.prototype.setBlankIconStyle=function(e){var t=[].slice.call(e.getElementsByClassName("e-blankicon"));if(t.length){var i=e.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)"),n=i.querySelector(".e-menu-icon");if(n){var r=this.enableRtl?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"},o=getComputedStyle(n),a=parseInt(o.fontSize,10);parseInt(o.width,10)&&parseInt(o.width,10)>a&&(a=parseInt(o.width,10));var s=a+parseInt(o[r.margin],10)+parseInt(getComputedStyle(i)[r.padding],10)+"px";t.forEach((function(e){e.style[r.padding]=s}))}}},t.prototype.checkScrollOffset=function(e){var t=this.getWrapper();if(t.children[0].classList.contains("e-menu-hscroll")&&1===this.navIdx.length){var i,n,o=Object(r.J)(e)?this.element:Object(r.y)(e.target,"."+Gh),a=Object(r.T)(".e-hscroll-bar",t);a.scrollLeft>o.offsetLeft&&(a.scrollLeft-=a.scrollLeft-o.offsetLeft),(i=a.scrollLeft+a.offsetWidth)<(n=o.offsetLeft+o.offsetWidth)&&(a.scrollLeft+=n-i)}},t.prototype.setPosition=function(e,t,i,n){var o="px";if(this.toggleVisiblity(t),t===this.element||n>-1&&i>-1){if((l=pi(t,null,n,i)).indexOf("right")>-1&&(n-=t.offsetWidth),l.indexOf("bottom")>-1)if((i=(s=this.callFit(t,!1,!0,i,n)).top-20)<0){var a=pageYOffset+document.documentElement.clientHeight-t.getBoundingClientRect().height;a>-1&&(i=a)}if((l=pi(t,null,n,i)).indexOf("left")>-1)n=(s=this.callFit(t,!0,!1,i,n)).left}else if(r.c.isDevice)i=Number(this.element.style.top.replace(o,"")),n=Number(this.element.style.left.replace(o,""));else{var s;i=(s=ei(e,this.enableRtl?"left":"right","top")).top,n=s.left;var l,c=(l=pi(t,null,this.enableRtl?n-t.offsetWidth:n,i)).indexOf("left")>-1||l.indexOf("right")>-1;c&&(n=(s=ei(e,this.enableRtl?"right":"left","top")).left),(this.enableRtl||c)&&(n=this.enableRtl&&c?n:n-t.offsetWidth),l.indexOf("bottom")>-1&&(i=(s=this.callFit(t,!1,!0,i,n)).top)}this.toggleVisiblity(t,!1),t.style.top=i+o,t.style.left=n+o},t.prototype.toggleVisiblity=function(e,t){void 0===t&&(t=!0),e.style.visibility=t?"hidden":"",e.style.display=t?"block":"none"},t.prototype.createItems=function(e){var t=this,i=this.navIdx?this.navIdx.length:0,n=this.getFields(i);if(Object(r.I)()&&this.template&&e.length&&e[0].properties){var o=[];e.forEach((function(e,t){o.push({}),o[t][n.text]=e[n.text],e[n.id]||(e[n.id]=Object(r.G)("menuitem")),o[t][n.id]=e[n.id],o[t][n.iconCss]=e[n.iconCss],o[t][n.url]=e[n.url],o[t][n.child]=e[n.child],o[t][n.separator]=e[n.separator]})),e=o}var a=this.hasField(e,this.getField("iconCss",i)),s={showIcon:a,moduleName:"menu",fields:n,template:this.template,itemNavigable:!0,itemCreating:function(e){e.curData[e.fields[n.id]]||(e.curData[e.fields[n.id]]=Object(r.G)("menuitem")),e.curData.htmlAttributes={role:"menuitem",tabindex:"-1"},t.isMenu&&!e.curData[t.getField("separator",i)]&&(e.curData.htmlAttributes["aria-label"]=e.curData[e.fields.text]),""===e.curData[e.fields[n.iconCss]]&&(e.curData[e.fields[n.iconCss]]=null)},itemCreated:function(e){if(e.curData[t.getField("separator",i)]&&(e.item.classList.add(Hh),e.item.removeAttribute("role")),!a||e.curData[e.fields.iconCss]||e.curData[t.getField("separator",i)]||e.item.classList.add("e-blankicon"),e.curData[e.fields.child]&&e.curData[e.fields.child].length){var n=t.createElement("span",{className:Qh+" "+Xh});e.item.appendChild(n),e.item.setAttribute("aria-haspopup","true"),e.item.setAttribute("aria-expanded","false"),t.isMenu||e.item.removeAttribute("role"),e.item.classList.add("e-menu-caret-icon")}t.isMenu&&t.template&&(e.item.setAttribute("id",e.curData[e.fields.id].toString()),e.item.removeAttribute("data-uid"),e.item.classList.contains("e-level-1")&&e.item.classList.remove("e-level-1"),e.item.classList.contains("e-has-child")&&e.item.classList.remove("e-has-child"));var r={item:e.curData,element:e.item};t.trigger("beforeItemRender",r)}};this.setProperties({items:this.items},!0),this.isMenu&&(s.templateID=this.element.id+ep);var l=ad.createList(this.createElement,e,s,!this.template,this);return l.setAttribute("tabindex","0"),this.isMenu&&l.setAttribute("role","menu"),l},t.prototype.moverHandler=function(e){var t=e.target;this.liTrgt=t;var i=this.getLI(t),n=i?Object(r.y)(i,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),o=this.getWrapper(),a=new RegExp("-ej2menu-(.*)-popup"),s=!1;if(n){if((""!==n.id?a.exec(n.id)[1]:n.querySelector("ul").id)!==this.element.id){if(this.removeLIStateByClass([Nh,_h],[this.getWrapper()]),!this.navIdx.length)return;s=!0}i&&Object(r.y)(i,".e-"+this.getModuleName()+"-wrapper")&&!s?(this.removeLIStateByClass([Nh],this.isMenu?[n].concat(this.getPopups()):[n]),this.removeLIStateByClass([Nh],this.isMenu?[o].concat(this.getPopups()):[o]),i.classList.add(Nh),this.showItemOnClick||this.clickHandler(e)):this.isMenu&&this.showItemOnClick&&!s&&this.removeLIStateByClass([Nh],[n].concat(this.getPopups())),this.isMenu&&(this.showItemOnClick||t.parentElement===n||Object(r.y)(t,".e-"+this.getModuleName()+"-popup")||i&&(!i||this.getIndex(i.id,!0).length)?s&&!this.showItemOnClick&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e)):(this.removeLIStateByClass([Nh],[n]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,e))),this.isClosed||this.removeStateWrapper(),this.isClosed=!1)}},t.prototype.removeStateWrapper=function(){if(this.liTrgt){var e=Object(r.y)(this.liTrgt,".e-menu-vscroll");"DIV"===this.liTrgt.tagName&&e&&this.removeLIStateByClass([Nh,_h],[e])}},t.prototype.removeLIStateByClass=function(e,t){for(var i,n=function(n){e.forEach((function(e){(i=Object(r.T)("."+e,t[n]))&&i.classList.remove(e)}))},o=0;o<t.length;o++)n(o)},t.prototype.getField=function(e,t){void 0===t&&(t=0);var i=this.fields[e];return"string"===typeof i?i:i[t]?i[t].toString():i[i.length-1].toString()},t.prototype.getFields=function(e){return void 0===e&&(e=0),{id:this.getField("itemId",e),iconCss:this.getField("iconCss",e),text:this.getField("text",e),url:this.getField("url",e),child:this.getField("children",e),separator:this.getField("separator",e)}},t.prototype.hasField=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i][t])return!0;return!1},t.prototype.menuHeaderClickHandler=function(e){Object(r.y)(e.target,".e-menu-wrapper").querySelector("ul.e-menu-parent").id===this.element.id&&(this.element.classList.contains("e-hide-menu")?this.openHamburgerMenu(e):this.closeHamburgerMenu(e))},t.prototype.clickHandler=function(e){if(this.isTapHold)this.isTapHold=!1;else{var t=this.getWrapper(),i=e.target,n=this.cli=this.getLI(i),o=new RegExp("-ej2menu-(.*)-popup"),a=n?Object(r.y)(n,".e-"+this.getModuleName()+"-wrapper"):null,s=n&&a&&(this.isMenu?this.getIndex(n.id,!0).length>0:t.firstElementChild.id===a.firstElementChild.id);if(r.c.isDevice&&this.isMenu&&(this.removeLIStateByClass([Nh],[t].concat(this.getPopups())),this.mouseDownHandler(e)),n&&a&&this.isMenu){var l=a.id?o.exec(a.id)[1]:a.querySelector(".e-menu-parent").id;if(this.element.id!==l)return}if(s&&"click"===e.type&&!n.classList.contains(Bh)){this.setLISelected(n);var c=this.getIndex(n.id,!0),d={element:n,item:this.getItem(c),event:e};this.trigger("select",d)}if(s&&("mouseover"===e.type||r.c.isDevice||this.showItemOnClick)){var h=void 0;if(n.classList.contains(Bh))h=t.children[this.navIdx.length-1],this.toggleAnimation(h),(u=this.getLIByClass(h,_h))&&u.classList.remove(_h),Object(r.B)(n.parentNode),this.navIdx.pop();else if(!n.classList.contains(Hh)){this.showSubMenu=!0;var p=n.parentNode;if(this.cliIdx=this.getIdx(p,n),this.isMenu||!r.c.isDevice){var u,f=this.isMenu?Array.prototype.indexOf.call([t].concat(this.getPopups()),Object(r.y)(p,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(t,p);if(this.navIdx[f]===this.cliIdx&&(this.showSubMenu=!1),f!==this.navIdx.length&&("mouseover"!==e.type||this.showSubMenu))(u=this.getLIByClass(p,_h))&&u.classList.remove(_h),this.isClosed=!0,this.keyType="click",this.showItemOnClick&&this.setLISelected(n),this.closeMenu(f+1,e),this.showItemOnClick&&this.setLISelected(n)}this.isClosed||this.afterCloseMenu(e),this.isClosed=!1}}else if(this.isMenu&&"DIV"===i.tagName&&this.navIdx.length&&Object(r.y)(i,".e-menu-vscroll")){var g=Object(r.y)(i,"."+Kh),m=Array.prototype.indexOf.call(this.getPopups(),g)+1;m<this.navIdx.length&&(this.closeMenu(m+1,e),g&&this.removeLIStateByClass([Nh,_h],[g]))}else this.isMenu&&this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(e):"UL"===i.tagName&&(this.isMenu?!i.parentElement.classList.contains("e-menu-wrapper")||this.getIndex(i.querySelector("."+Gh).id,!0).length:i.parentElement===t)||(n||this.removeLIStateByClass([_h],[t]),n&&n.querySelector("."+Xh)||this.closeMenu(null,e))}},t.prototype.afterCloseMenu=function(e){var t;if(this.showSubMenu){t=this.showItemOnClick&&0===this.navIdx.length?Object(r.y)(e.target,".e-menu-parent.e-control"):Object(r.y)(this.element,".e-menu-parent.e-control");var i=this.navIdx.concat(this.cliIdx),n=this.getItem(i);if(n&&n[this.getField("children",i.length-1)]&&n[this.getField("children",i.length-1)].length?(("mouseover"===e.type||r.c.isDevice&&this.isMenu)&&this.setLISelected(this.cli),(!this.hamburgerMode&&t||this.hamburgerMode&&"false"===this.cli.getAttribute("aria-expanded"))&&(this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,n,null,null,e))):"mouseover"!==e.type&&this.closeMenu(null,e),!t){var o=this.getUlByNavIdx(),a=this.getLIByClass(o,_h);a&&(a.setAttribute("aria-expanded","false"),a.classList.remove(_h))}}this.keyType=""},t.prototype.setLISelected=function(e){var t=this.getLIByClass(e.parentElement,_h);t&&t.classList.remove(_h),this.isMenu||e.classList.remove(Nh),e.classList.add(_h)},t.prototype.getLIByClass=function(e,t){for(var i=0,n=e.children.length;i<n;i++)if(e.children[i].classList.contains(t))return e.children[i];return null},t.prototype.getItemIndex=function(e,t){var i;i="string"===typeof e?e:e.id;var n=!1!==t;return this.getIndex(i,n)},t.prototype.setItem=function(e,t,i){var n=t||e.id,r=!1!==i,o=this.getIndex(n,r),a=this.getItem(o);a.iconCss=e.iconCss,a.id=e.id,a.text=e.text,a.url=e.url,a.separator=e.separator,a.items=e.items},t.prototype.getItem=function(e){var t=(e=e.slice()).pop();return this.getItems(e)[t]},t.prototype.getItems=function(e){for(var t=this.items,i=0;i<e.length;i++)t=t[e[i]][this.getField("children",i)];return t},t.prototype.setItems=function(e,t){var i=this.getItems(t);i.splice(0,i.length);for(var n=0;n<e.length;n++)i.splice(n,0,e[n])},t.prototype.getIdx=function(e,t,i){void 0===i&&(i=!0);var n=Array.prototype.indexOf.call(e.querySelectorAll("li"),t);return n=this.isMenu&&this.template&&Object(r.I)()?Array.prototype.indexOf.call(e.querySelectorAll(t.tagName),t):Array.prototype.indexOf.call(e.children,t),i&&e.children[0].classList.contains(Bh)&&n--,n},t.prototype.getLI=function(e){return"LI"===e.tagName&&e.classList.contains("e-menu-item")?e:Object(r.y)(e,"li.e-menu-item")},t.prototype.updateItemsByNavIdx=function(){for(var e=this.items,t=0,i=0;i<this.navIdx.length&&(e=e[i].items);i++){t++;var n=this.getUlByNavIdx(t);if(!n)break;this.updateItem(n,e)}},t.prototype.removeChildElement=function(e){for(;e.firstElementChild;)e.removeChild(e.firstElementChild);return e},t.prototype.onPropertyChanged=function(e,t){for(var i=this,n=this.getWrapper(),o=function(o){switch(o){case"cssClass":t.cssClass&&Object(r.Q)([n],t.cssClass.split(" ")),e.cssClass&&Object(r.t)([n],e.cssClass.split(" "));break;case"enableRtl":n.classList.toggle($h);break;case"showItemOnClick":a.unWireEvents(),a.showItemOnClick=e.showItemOnClick,a.wireEvents();break;case"enableScrolling":if(e.enableScrolling){var s;a.element.classList.contains("e-vertical")?Dh(a.createElement,n,a.element,"vscroll",a.enableRtl):Dh(a.createElement,n,a.element,"hscroll",a.enableRtl),a.getPopups().forEach((function(e){s=Object(r.T)(".e-ul",e),Dh(i.createElement,e,s,"vscroll",i.enableRtl)}))}else{var l=n.children[0];a.element.classList.contains("e-vertical")?kh(Object(r.E)(l,Ah),l):kh(Object(r.E)(l,bh),l),n.style.overflow="",n.appendChild(a.element),a.getPopups().forEach((function(e){l=e.children[0],kh(Object(r.E)(l,Ah),l),e.style.overflow=""}))}break;case"items":var c=void 0,d=void 0,h=void 0;if(Object.keys(t.items).length){var p=Object.keys(e.items);for(u=0;u<p.length;u++)(d=a.getChangedItemIndex(e,[],Number(p[u]))).length<=a.getWrapper().children.length&&(c=d.pop(),h=a.getItems(d),a.insertAfter([h[c]],h[c].text),a.removeItem(h,d,c),a.setItems(h,d)),d.length=0}else{a.updateItem(a.element,a.items);for(var u=1,f=n.childElementCount;u<f;u++)Object(r.B)(n.lastElementChild);a.isMenu&&Object(r.I)()?a.updateItemsByNavIdx():a.navIdx=[]}}},a=this,s=0,l=Object.keys(e);s<l.length;s++){o(l[s])}},t.prototype.updateItem=function(e,t){Object(r.I)()?e=this.removeChildElement(e):e.innerHTML="",[].slice.call(this.createItems(t).children).forEach((function(t){e.appendChild(t)}))},t.prototype.getChangedItemIndex=function(e,t,i){t.push(i);var n=Object.keys(e.items[i]).pop();if("items"===n){var r=e.items[i],o=Object.keys(r.items).pop();o&&this.getChangedItemIndex(r,t,Number(o))}else"isParentArray"===n&&t.length>1&&t.pop();return t},t.prototype.removeItem=function(e,t,i){e.splice(i,1);var n=this.getWrapper().children;t.length<n.length&&Object(r.B)(n[t.length].children[i])},t.prototype.unWireEvents=function(e){void 0===e&&(e=this.target);var t=this.getWrapper();if(e){for(var i=void 0,n=void 0,o=Object(r.U)(e),a=0,s=o.length;a<s;a++)i=o[a],this.isMenu?r.m.remove(i,"click",this.menuHeaderClickHandler):r.c.isIos?(n=Object(r.E)(i,r.s))&&n.destroy():r.m.remove(i,"contextmenu",this.cmenuHandler);if(!this.isMenu){r.m.remove(this.targetElement,"scroll",this.scrollHandler);for(var l=0,c=_i(this.targetElement);l<c.length;l++){var d=c[l];r.m.remove(d,"scroll",this.scrollHandler)}}}r.c.isDevice||(r.m.remove(this.isMenu?document:t,"mouseover",this.delegateMoverHandler),r.m.remove(document,"mousedown",this.delegateMouseDownHandler)),r.m.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(t),this.rippleFn()},t.prototype.unWireKeyboardEvent=function(e){var t=Object(r.E)(e,r.n);t&&t.destroy()},t.prototype.toggleAnimation=function(e,t){var i,n,r=this;void 0===t&&(t=!0),"None"!==this.animationSettings.effect&&t?this.animation.animate(e,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:function(e){r.hamburgerMode?(n=e.element.parentElement,e.element.style.position="absolute",i=n.offsetHeight,e.element.style.maxHeight=e.element.offsetHeight+"px",n.style.maxHeight=""):(e.element.style.display="block",e.element.style.maxHeight=e.element.getBoundingClientRect().height+"px")},progress:function(e){r.hamburgerMode&&(n.style.minHeight=i+e.element.offsetHeight+"px")},end:function(e){r.hamburgerMode?(e.element.style.position="",e.element.style.maxHeight="",n.style.minHeight="",e.element.style.top="0px",e.element.children[0].focus(),r.triggerOpen(e.element.children[0])):r.end(e.element,t)}}):this.end(e,t)},t.prototype.triggerOpen=function(e){var t=this.navIdx.length?this.getItem(this.navIdx):null,i={element:e,parentItem:t,items:t?t.items:this.items};this.trigger("onOpen",i)},t.prototype.end=function(e,t){if(t)if(e.style.display="block",e.style.maxHeight="",this.triggerOpen(e),e.querySelector("."+Nh))e.querySelector("."+Nh).focus();else{var i=void 0;(i=this.getWrapper().children[this.getIdx(this.getWrapper(),e)-1])?i.querySelector("."+_h).focus():this.element.focus()}else if(e===this.element){var n=this.getLIByClass(this.element,Nh);n&&n.classList.remove(Nh);var o=this.getLIByClass(this.element,_h);o&&o.classList.remove(_h),e.style.display="none"}else Object(r.B)(e)},t.prototype.getPersistData=function(){return""},t.prototype.getWrapper=function(){return Object(r.y)(this.element,".e-"+this.getModuleName()+"-wrapper")},t.prototype.getIndex=function(e,t,i,n,r,o){var a;void 0===i&&(i=this.items),void 0===n&&(n=[]),void 0===r&&(r=!1),void 0===o&&(o=0),o=r?o+1:0;for(var s=0,l=i.length;s<l;s++){if(a=i[s],(t?a[this.getField("itemId",o)]:a[this.getField("text",o)])===e){n.push(s);break}if(a[this.getField("children",o)]&&a[this.getField("children",o)].length){if(-1!==(n=this.getIndex(e,t,a[this.getField("children",o)],n,!0,o))[n.length-1]){n.unshift(s);break}s!==l-1&&n.pop()}else s===l-1&&n.push(-1)}return r||-1!==n[0]?n:[]},t.prototype.enableItems=function(e,t,i){var n,o,a;void 0===t&&(t=!0);for(var s,l=Zh,c=0;c<e.length;c++){if(a=this.getIndex(e[c],i),this.navIdx.length){if(1!==a.length){s=!1;for(var d=0,h=a.length-1;d<h;d++)if(a[d]!==this.navIdx[d]){s=!0;break}if(s)continue}}else if(1!==a.length)continue;o=a.pop(),(n=this.getUlByNavIdx(a.length))&&(t?this.isMenu?(n.children[o].classList.remove(l),n.children[o].removeAttribute("aria-disabled")):r.c.isDevice&&!n.classList.contains("e-contextmenu")?n.children[o+1].classList.remove(l):n.children[o].classList.remove(l):this.isMenu?(n.children[o].classList.add(l),n.children[o].setAttribute("aria-disabled","true")):r.c.isDevice&&!n.classList.contains("e-contextmenu")?n.children[o+1].classList.add(l):n.children[o].classList.add(l))}},t.prototype.showItems=function(e,t){this.showHideItems(e,!1,t)},t.prototype.hideItems=function(e,t){this.showHideItems(e,!0,t)},t.prototype.showHideItems=function(e,t,i){for(var n,o,a,s=0;s<e.length;s++)o=(a=this.getIndex(e[s],i)).pop(),(n=this.getUlByNavIdx(a.length))&&(t?r.c.isDevice&&!n.classList.contains("e-contextmenu")?n.children[o+1].classList.add(Jh):n.children[o].classList.add(Jh):r.c.isDevice&&!n.classList.contains("e-contextmenu")?n.children[o+1].classList.remove(Jh):n.children[o].classList.remove(Jh))},t.prototype.removeItems=function(e,t){for(var i,n,r,o=0;o<e.length;o++)i=(n=this.getIndex(e[o],t)).pop(),r=this.getItems(n),this.removeItem(r,n,i)},t.prototype.insertAfter=function(e,t,i){this.insertItems(e,t,i)},t.prototype.insertBefore=function(e,t,i){this.insertItems(e,t,i,!1)},t.prototype.insertItems=function(e,t,i,n){var o,a,s,l,c;void 0===n&&(n=!0);for(var d=0;d<e.length;d++){a=(s=this.getIndex(t,i)).pop(),l=this.getItems(s),c=new ip(l[0],"items",e[d],!0),l.splice(n?a+1:a,0,c);var h=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(s.length<h.length){a=n?a+1:a,this.hasField(l,this.getField("iconCss",s.length-1)),o=this.createItems(l).children[a];var p=this.isMenu?Object(r.T)(".e-menu-parent",h[s.length]):h[s.length];p.insertBefore(o,p.children[a])}}},t.prototype.removeAttributes=function(){var e=this;["top","left","display","z-index"].forEach((function(t){e.element.style.removeProperty(t)})),["role","tabindex","class","style"].forEach((function(t){"class"===t&&e.element.classList.contains("e-menu-parent")&&e.element.classList.remove("e-menu-parent"),-1!==["class","style"].indexOf(t)&&e.element.getAttribute(t)||e.element.removeAttribute(t),e.isMenu&&"class"===t&&e.element.classList.contains("e-vertical")&&e.element.classList.remove("e-vertical")}))},t.prototype.destroy=function(){var t=this.getWrapper();if(t){if(this.unWireEvents(),this.isMenu)this.closeMenu(),Object(r.I)()?this.element=this.removeChildElement(this.element):this.element.innerHTML="",this.removeAttributes(),t.parentNode.insertBefore(this.element,t);else{if(this.clonedElement.style.display="","EJS-CONTEXTMENU"===this.clonedElement.tagName)Object(r.t)([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&"LI"===this.clonedElement.children[0].tagName&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){var i=this.clonedElement.nextElementSibling;i&&i!==t?this.clonedElement.parentElement.insertBefore(this.element,i):this.clonedElement.parentElement.appendChild(this.element),Object(r.I)()?this.element=this.removeChildElement(this.element):this.element.innerHTML="",Object(r.u)([].slice.call(this.clonedElement.children),this.element),Object(r.B)(this.clonedElement),this.removeAttributes()}this.clonedElement=null}this.isMenu&&this.clonedElement?(Object(r.B)(this.element),t.style.display="",t.classList.remove("e-"+this.getModuleName()+"-wrapper"),t.removeAttribute("data-ripple")):Object(r.B)(t),e.prototype.destroy.call(this),this.template&&this.clearTemplate(["template"])}},Lh([Object(r.l)()],t.prototype,"beforeItemRender",void 0),Lh([Object(r.l)()],t.prototype,"beforeOpen",void 0),Lh([Object(r.l)()],t.prototype,"onOpen",void 0),Lh([Object(r.l)()],t.prototype,"beforeClose",void 0),Lh([Object(r.l)()],t.prototype,"onClose",void 0),Lh([Object(r.l)()],t.prototype,"select",void 0),Lh([Object(r.l)()],t.prototype,"created",void 0),Lh([Object(r.q)("")],t.prototype,"cssClass",void 0),Lh([Object(r.q)(!1)],t.prototype,"showItemOnClick",void 0),Lh([Object(r.q)("")],t.prototype,"target",void 0),Lh([Object(r.q)("")],t.prototype,"filter",void 0),Lh([Object(r.q)(null)],t.prototype,"template",void 0),Lh([Object(r.q)(!1)],t.prototype,"enableScrolling",void 0),Lh([Object(r.q)(!1)],t.prototype,"enableHtmlSanitizer",void 0),Lh([Object(r.g)({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},tp)],t.prototype,"fields",void 0),Lh([Object(r.e)([],ip)],t.prototype,"items",void 0),Lh([Object(r.g)({duration:400,easing:"ease",effect:"SlideDown"},np)],t.prototype,"animationSettings",void 0),t=Lh([r.p],t)}(r.i),op=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ap=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},sp=function(e){function t(t,i){return e.call(this,t,i)||this}return op(t,e),t.prototype.preRender=function(){this.isMenu=!1,this.element.id=this.element.id||Object(r.G)("ej2-contextmenu"),e.prototype.preRender.call(this)},t.prototype.initialize=function(){e.prototype.initialize.call(this),Object(r.v)(this.element,{role:"context menu",tabindex:"0"}),this.element.style.zIndex=Hi(this.element).toString()},t.prototype.open=function(t,i,n){e.prototype.openMenu.call(this,null,null,t,i,null,n)},t.prototype.close=function(){e.prototype.closeMenu.call(this)},t.prototype.onPropertyChanged=function(t,i){e.prototype.onPropertyChanged.call(this,t,i);for(var n=0,r=Object.keys(t);n<r.length;n++){switch(r[n]){case"filter":this.close(),this.filter=t.filter;break;case"target":this.unWireEvents(i.target),this.wireEvents()}}},t.prototype.getModuleName=function(){return"contextmenu"},ap([Object(r.q)("")],t.prototype,"target",void 0),ap([Object(r.q)("")],t.prototype,"filter",void 0),ap([Object(r.e)([],ip)],t.prototype,"items",void 0),t=ap([r.p],t)}(rp),lp=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i((function(t){t(e.value)})).then(a,s)}l((n=n.apply(e,t||[])).next())}))},cp=function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},dp=".e-diagramcontent",hp="e-copy",pp="e-paste",up="e-undo",fp="e-redo",gp="e-cut",mp="e-group",vp="e-ungroup",yp="e-bringfront",bp="e-sendback",wp="e-bringforward",xp="e-sendbackward",Op="e-order";(function(){function e(e,t){this.defaultItems={},this.disableItems=[],this.hiddenItems=[],this.localeText=this.setLocaleKey(),this.parent=e,this.serviceLocator=t,this.addEventListener()}e.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on("initial-load",this.render,this)},e.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off("initial-load",this.render)},e.prototype.render=function(){if(this.l10n=this.serviceLocator.getService("localization"),!Object(r.I)()){this.element=Zl("ul",{id:this.parent.element.id+"_contextMenu"}),this.parent.element.appendChild(this.element);var e="#"+this.parent.element.id;this.contextMenu=new sp({items:this.getMenuItems(),enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,target:e,select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),beforeItemRender:this.BeforeItemRender.bind(this),onClose:this.contextMenuOnClose.bind(this),cssClass:"e-diagram-menu",animationSettings:{effect:"None"}}),this.contextMenu.appendTo(this.element)}},e.prototype.getMenuItems=function(){var e=[],t=[],i=[];if(!this.parent.contextMenuSettings.showCustomMenuOnly){for(var n=0,r=this.getDefaultItems();n<r.length;n++){var o=r[n];-1!==o.toLocaleLowerCase().indexOf("group")?"grouping"!==o.toLocaleLowerCase()&&i.push(this.buildDefaultItems(o)):-1!==o.toLocaleLowerCase().indexOf("order")?"order"!==o.toLocaleLowerCase()&&t.push(this.buildDefaultItems(o)):e.push(this.buildDefaultItems(o))}var a;if(i.length>0)(a=this.buildDefaultItems("grouping")).items=i,e.push(a);if(t.length>0)(a=this.buildDefaultItems("order")).items=t,e.push(a)}if(this.parent.contextMenuSettings.items)for(var s=0,l=this.parent.contextMenuSettings.items;s<l.length;s++){var c=l[s];e.push(c)}return e},e.prototype.contextMenuOpen=function(){this.isOpen=!0},e.prototype.BeforeItemRender=function(e){this.parent.trigger("contextMenuBeforeItemRender",e)},e.prototype.contextMenuItemClick=function(e){document.getElementById(this.parent.element.id+"content").focus(),this.parent.trigger("contextMenuClick",e);var t=this.getKeyFromId(e.item.id);if(!e.cancel)switch(t){case"cut":this.parent.cut();break;case"copy":this.parent.copy();break;case"undo":this.parent.undo();break;case"redo":this.parent.redo();break;case"paste":this.parent.paste();break;case"selectAll":this.parent.selectAll();break;case"group":this.parent.group();break;case"unGroup":this.parent.unGroup();break;case"bringToFrontOrder":this.parent.bringToFront();break;case"moveForwardOrder":this.parent.moveForward();break;case"sendToBackOrder":this.parent.sendToBack();break;case"sendBackwardOrder":this.parent.sendBackward()}},e.prototype.contextMenuOnClose=function(e){e.items.length>0&&e.items[0].parentObj instanceof sp&&this.updateItemStatus()},e.prototype.getLocaleText=function(e){return this.l10n.getConstant(this.localeText[e])},e.prototype.updateItemStatus=function(){this.contextMenu.showItems(this.hiddenItems,!0),this.contextMenu.enableItems(this.disableItems,!1,!0),this.hiddenItems=[],this.disableItems=[],this.isOpen=!1},e.prototype.ensureItems=function(e,t){var i=this.getKeyFromId(e.id);this.defaultItems[i];-1!==this.getDefaultItems().indexOf(i)&&e.target&&(t||this.parent.checkMenu)&&!this.ensureTarget(e)&&this.hiddenItems.push(e.id)},e.prototype.updateItems=function(){for(var e=!0,t=0;t<this.parent.contextMenuSettings.items.length;t++){for(var i=this.parent.contextMenuSettings.items[t],n=0;n<this.contextMenu.items.length;n++)this.contextMenu.items[n].text===this.parent.contextMenuSettings.items[t].text&&(e=!1);e&&this.contextMenu.insertAfter([i],this.contextMenu.items[this.contextMenu.items.length-1].text)}},e.prototype.contextMenuBeforeOpen=function(e){return lp(this,void 0,void 0,(function(){var t,i,n,o,a,s,l,c,d,h;return cp(this,(function(p){switch(p.label){case 0:for(this.parent.checkMenu||-1===window.navigator.userAgent.indexOf("Linux")&&-1===window.navigator.userAgent.indexOf("X11")||(this.parent.checkMenu=e.cancel=!0),this.parent.checkMenu&&(this.hiddenItems=[]),(t=e).hiddenItems=[],i=0,n=e.items;i<n.length;i++)if(h=n[i],this.ensureItems(h,e.event),h.items.length)for(o=0,a=h.items;o<a.length;o++)s=a[o],this.ensureItems(s,e.event);return this.eventArgs=e.event,Object(r.I)()?[4,this.parent.trigger(Me,t)]:[3,2];case 1:return"string"===typeof(t=p.sent()||t)&&(t=JSON.parse(t)),[3,3];case 2:this.parent.trigger(Me,t),p.label=3;case 3:for(l=!0,!this.parent.contextMenuSettings.showCustomMenuOnly&&this.parent.contextMenuSettings.items&&(this.updateItems(),this.contextMenu.refresh()),this.hiddenItems=this.hiddenItems.concat(t.hiddenItems),this.contextMenu.enableItems(this.disableItems,!1,!0),c=this,d=0;d<e.items.length;d++)h=e.items[d],c.hiddenItems.indexOf(h.id)>-1&&c.contextMenu.hideItems([h.id],!0);for(d=0;d<c.contextMenu.items.length;d++)h=c.contextMenu.items[d],-1===c.hiddenItems.indexOf(h.id)&&(l=!1,c.contextMenu.showItems([h.id],!0));return l&&(t.cancel=l,this.hiddenItems=[]),this.parent.selectedItems.nodes.length&&this.parent.selectedItems.nodes[0].isPhase&&(e.cancel=!0),[2]}}))}))},e.prototype.ensureTarget=function(e){var t=this.parent.selectedItems.nodes.length+this.parent.selectedItems.connectors.length,i=!1;switch(this.getKeyFromId(e.id)){case"undo":i=!(!this.parent.historyManager||!this.parent.historyManager.canUndo);break;case"redo":i=!(!this.parent.historyManager||!this.parent.historyManager.canRedo);break;case"paste":i=!!this.parent.commandHandler.clipboardData.clipObject;break;case"selectAll":i=!!(this.parent.nodes.length+this.parent.connectors.length);break;case"grouping":i=!!(t>1||this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"group":i=t>1;break;case"unGroup":i=!!(this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"cut":case"copy":case"order":case"bringToFrontOrder":case"moveForwardOrder":case"sendToBackOrder":case"sendBackwardOrder":i=!!t}return i},e.prototype.destroy=function(){Object(r.I)()||(this.contextMenu.destroy(),Object(r.P)(this.element)),this.removeEventListener()},e.prototype.getModuleName=function(){return"contextMenu"},e.prototype.generateID=function(e){return this.parent.element.id+"_contextMenu_"+e},e.prototype.getKeyFromId=function(e){return e.replace(this.parent.element.id+"_contextMenu_","")},e.prototype.buildDefaultItems=function(e){var t;switch(e){case"copy":t={target:dp,iconCss:hp};break;case"cut":t={target:dp,iconCss:gp};break;case"paste":t={target:dp,iconCss:pp};break;case"undo":t={target:dp,iconCss:up};break;case"redo":t={target:dp,iconCss:fp};break;case"grouping":t={target:dp};break;case"group":t={target:dp,iconCss:mp};break;case"unGroup":t={target:dp,iconCss:vp};break;case"order":t={target:dp,iconCss:Op};break;case"bringToFrontOrder":t={target:dp,iconCss:yp};break;case"moveForwardOrder":t={target:dp,iconCss:wp};break;case"sendToBackOrder":t={target:dp,iconCss:bp};break;case"sendBackwardOrder":t={target:dp,iconCss:xp};break;case"selectAll":t={target:dp}}return this.defaultItems[e]={text:this.getLocaleText(e),id:this.generateID(e),target:t.target,iconCss:t.iconCss?"e-icons "+t.iconCss:""},this.defaultItems[e]},e.prototype.getDefaultItems=function(){return["copy","cut","paste","undo","redo","selectAll","grouping","group","unGroup","order","bringToFrontOrder","moveForwardOrder","sendToBackOrder","sendBackwardOrder"]},e.prototype.setLocaleKey=function(){return{copy:"Copy",cut:"Cut",paste:"Paste",undo:"Undo",redo:"Redo",selectAll:"SelectAll",grouping:"Grouping",group:"Group",unGroup:"UnGroup",order:"Order",bringToFrontOrder:"BringToFront",moveForwardOrder:"MoveForward",sendToBackOrder:"SendToBack",sendBackwardOrder:"SendBackward"}}})(),function(){function e(){this.annotationObjects={}}Object.defineProperty(e.prototype,"textAnnotationConnectors",{get:function(){for(var e=[],t=0,i=Object.keys(this.annotationObjects);t<i.length;t++)for(var n=i[t],r=this.annotationObjects[n],o=0,a=Object.keys(r);o<a.length;o++){var s=a[o];e.push(r[s].connector)}return e},enumerable:!0,configurable:!0}),e.prototype.getTextAnnotationConn=function(e){var t=[];if("Bpmn"===e.shape.type&&0!==e.shape.annotations.length)for(var i=this.annotationObjects[e.id],n=0,r=Object.keys(i);n<r.length;n++){var o=r[n];t.push(i[o].connector)}return t},e.prototype.getSize=function(e,t){var i=new P(e.width,e.height);if(void 0===i.width||void 0===i.height){if(t instanceof Ue||(i.width=i.width||50,i.height=i.height||50),t.actualSize.width&&t.actualSize.height)return t.actualSize;t.measure(new P),i.width=i.width||t.desiredSize.width,i.height=i.height||t.desiredSize.height,void 0!==e.maxWidth&&(i.width=Math.min(i.width,e.maxWidth)),void 0!==e.maxHeight&&(i.height=Math.min(i.height,e.maxHeight)),void 0!==e.minWidth&&(i.width=Math.max(i.width,e.minWidth)),void 0!==e.minHeight&&(i.height=Math.max(i.height,e.minHeight))}return i},e.prototype.initBPMNContent=function(e,t,i){var n=(Object(r.I)(),t.shape),o=Object(r.I)()?t.shape.bpmnShape:t.shape.shape;if("Event"===o&&(e=this.getBPMNEventShape(t,n.event)),"Gateway"===o&&(e=this.getBPMNGatewayShape(t)),"DataObject"===o&&(e=this.getBPMNDataObjectShape(t)),"Message"!==o&&"DataSource"!==o||(e=this.getBPMNShapes(t)),"Activity"===o&&(e=this.getBPMNActivityShape(t)),"TextAnnotation"===o&&(e=this.renderBPMNTextAnnotation(i,t,e)),n.annotations.length>0){for(var a=0;a<n.annotations.length&&n.annotations[a].text;a++)e.children.push(this.getBPMNTextAnnotation(t,i,n.annotations[a],e));e.style.strokeDashArray="2 2 6 2"}return e},e.prototype.getBPMNShapes=function(e){var t=new Ue;this.setStyle(t,e),0!==(e.constraints&ne.Shadow)&&(t.shadow=e.shadow);var i=Sp(Object(r.I)()?e.shape.bpmnShape:e.shape.shape);return t.data=i,t.id=e.id+"_"+(Object(r.I)()?e.shape.bpmnShape:e.shape.shape),void 0!==e.width&&void 0!==e.height&&(t.width=e.width,t.height=e.height),t},e.prototype.getBPMNGatewayShape=function(e){var t=new He,i=new Ue;i.id=e.id+"_0_gateway",i.offsetX=e.offsetX,i.offsetY=e.offsetY,i.data="M 40 20 L 20 40 L 0 20 L 20 0 L 40 20 Z",this.setStyle(i,e);var n=new Ue;n.id=e.id+"_1_gatewayType",n.style.opacity=e.style.opacity,n.style.strokeColor=e.style.strokeColor,n.horizontalAlignment="Center",n.verticalAlignment="Center",n.relativeMode="Object";var r,o=e.shape.gateway;r=Pp(o.type),"EventBased"===o.type||"ExclusiveEventBased"===o.type||"ParallelEventBased"===o.type?n.style.fill="white":n.style.fill="black",n.data=r,t.style.fill="transparent",t.style.strokeColor="transparent",t.style.strokeWidth=0,t.children=[i,n];var a=this.getSize(e,i);return this.setSizeForBPMNGateway(e.shape.gateway,t,a.width,a.height),t},e.prototype.getBPMNDataObjectShape=function(e){var t=new He,i=e.shape.dataObject,n=new Ue;n.id=e.id+"_0_dataobj",n.data="M29.904,5 L7.853,5 L7.853,45 L42.147,45 L42.147,17.242,L29.932,5,L29.932,17.242,L42.147,17.242";var r=this.getSize(e,n);n.width=r.width,n.height=r.height,this.setStyle(n,e);var o=new Ue;o.id=e.id+"_1_type",o.width=25,o.height=20,o.margin.left=5,o.margin.top=5,o.data="M 3 9.4 l 6 0 v 2.4 l 3.6 -4 L 9 4 v 2.5 H 3 V 9.4 Z",o.style.opacity=e.style.opacity;var a=new Ue;switch(a.id=e.id+"_2_collection",a.width=7.5,a.height=15,a.style.fill="black",a.visible=!0,a.horizontalAlignment="Center",a.verticalAlignment="Bottom",a.relativeMode="Object",a.style.opacity=e.style.opacity,a.data="M 0 0 L 0.1 0 L 0.1 2 L 0 2 Z M 0.4 0 L 0.6 0 L 0.6 2 L0.4 2 Z M 0.9 0 L 1 0 L 1 2 L 0.9 2 Z",i.type){case"None":o.visible=!1;break;case"Input":o.style.fill="white";break;case"Output":o.style.fill="black"}return!1===i.collection&&(a.visible=!1),t.style.fill="transparent",t.style.strokeColor="transparent",t.style.strokeWidth=0,t.children=[n,o,a],t},e.prototype.getBPMNTaskShape=function(e){var t=e.shape.activity.task,i=new He,n=new Le;n.cornerRadius=10;var r=this.getSize(e,n);n.id=e.id+"_0_task",n.width=r.width,n.height=r.height,this.setStyle(n,e),void 0!==t.call&&!0===t.call&&(n.style.strokeWidth=4),i.width=r.width,i.height=r.height;var o,a=this.getTaskChildCount(e),s=12*a,l=r.width/2-s;o=1===a?l+8:l+8*(a-1);var c,d=new Ue;if("Receive"===t.type||"Send"===t.type?(d.width=18,d.height=16):(d.width=20,d.height=20),d.id=e.id+"_1_tasktType",d.margin.left=5,d.margin.top=5,c=jp(t.type),d.data=c,d.style.fill="transparent",d.style.opacity=e.style.opacity,i.style.fill="transparent",i.style.strokeColor="transparent",i.style.strokeWidth=0,i.children=[n,d],"Service"===t.type){var h=new Ue;h.id=e.id+"_1_taskTypeService",h.data=c,h.margin.left=d.margin.left+9,h.margin.top=d.margin.top+9,h.style.fill="white",h.style.opacity=e.style.opacity,i.children.push(h)}var p,u=t.loop,f=new Ue;p=Ip(u),f.data=p,f.style.fill="black",f.visible="None"!==u,1===a&&(o=l+9),f.margin.left=o,!0===f.visible&&(o+=20),f.width=12,f.height=12,f.margin.bottom=5,f.id=e.id+"_2_loop",f.horizontalAlignment="Left",f.verticalAlignment="Bottom",f.setOffsetWithRespectToBounds(0,1,"Fraction"),f.relativeMode="Point",f.style.fill="transparent",d.style.opacity=e.style.opacity,i.children.push(f);var g=new Ue;return g=this.getBPMNCompensationShape(e,g),!0===t.compensation?g.visible=!0:g.visible=!1,1===a&&(o=l+9),g.margin.left=o-3,o+=18,i.children.push(g),i},e.prototype.getBPMNEventShape=function(e,t,i,n){var o,a,s,l,c=new He;n=n||e.id;var d="M164.1884,84.6909000000001C156.2414,84.6909000000001,149.7764,78.2259000000001,149.7764,70.2769000000001C149.7764,62.3279000000001,156.2414,55.8629000000001,164.1884,55.8629000000001C172.1354,55.8629000000001,178.6024,62.3279000000001,178.6024,70.2769000000001C178.6024,78.2259000000001,172.1354,84.6909000000001,164.1884,84.6909000000001",h=e.shape.event;if((!Object(r.I)()&&"Event"===e.shape.shape||Object(r.I)()&&"Event"===e.shape.bpmnShape)&&(o=h.event,a=h.trigger),s=t.width,l=t.height,i)s=s||20,l=l||20;else if(void 0===t.width||void 0===t.height){var p=new Ue;p.data=d;var u=this.getSize(e,p);s=u.width,l=u.height}var f=e.shape.activity;if(!Object(r.I)()&&"Activity"===e.shape.shape||Object(r.I)()&&"Activity"===e.shape.bpmnShape){f.subProcess;o=t.event,a=t.trigger}var g=new Ue;g.data=d,g.id=n+"_0_event",g.width=s,g.height=l,g.horizontalAlignment="Center",g.verticalAlignment="Center",g.relativeMode="Object",this.setStyle(g,e);var m=new Ue;m.data=d,m.id=n+"_1_event",m.style.gradient=e.style.gradient,m.horizontalAlignment="Center",m.verticalAlignment="Center",m.relativeMode="Object",m.style.strokeColor=e.style.strokeColor,m.style.opacity=e.style.opacity;var v=new Ue,y=Cp(a);switch(v.data=y,v.id=n+"_2_trigger",v.horizontalAlignment="Center",v.verticalAlignment="Center",v.relativeMode="Object",v.style.strokeColor=e.style.strokeColor,v.style.opacity=e.style.opacity,o){case"Start":m.visible=!1;break;case"NonInterruptingStart":g.style.strokeDashArray="2 3",m.visible=!1;break;case"Intermediate":g.style.fill="white",g.style.gradient=null;break;case"NonInterruptingIntermediate":g.style.fill="white",g.style.gradient=null,g.style.strokeDashArray="2 3",m.style.strokeDashArray="2 3";break;case"ThrowingIntermediate":case"End":g.style.fill="End"!==o?"white":"black",g.style.gradient=null,v.style.fill="black",v.style.strokeColor="white"}return c.style.fill="transparent",c.style.strokeColor="transparent",c.style.strokeWidth=0,c.children=[g,m,v],this.setSizeForBPMNEvents(h,c,s,l),c},e.prototype.setEventVisibility=function(e,t){var i=e.shape.event.event,n=t[0],r=t[1];t[2];switch(i){case"Start":r.visible=!1;break;case"NonInterruptingStart":n.style.strokeDashArray="2 3",r.visible=!1}},e.prototype.setSubProcessVisibility=function(e){var t=e.shape.activity.subProcess,i=t.events.length,n="Transaction"===e.shape.activity.subProcess.type?2:0,r=e.wrapper.children[0].children[0];if(!1===t.adhoc&&(r.children[3+n+i].visible=!1),!1===t.compensation&&(r.children[4+n+i].visible=!1),i>0)for(var o=0;o<i;o++)this.setEventVisibility(e,r.children[2+o].children)},e.prototype.getBPMNSubProcessShape=function(e){var t,i,n,r=new He,o=new Ue,a=(new He,new Ue),s=e.shape.activity,l=s.subProcess,c=this.getSubprocessChildCount(e),d=new Le;d.id=e.id+"_0_Subprocess",d.style.fill="transparent",d.cornerRadius=10;var h=this.getSize(e,d);d.width=h.width,d.height=h.height,r.children=[d],"Transaction"===s.subProcess.type&&this.getBPMNSubProcessTransaction(e,e.shape,r);var p=12*c,u=h.width/2;n=1===c?u-6:u-p/2-4*(c-1)/2,this.setStyle(d,e),0!==(e.constraints&ne.Shadow)&&(r.shadow=e.shadow);var f=new Ue;if(f.id=e.id+"_0_collapsed",f.width=12,f.height=12,f.style.fill="black",f.style.strokeColor=e.style.strokeColor,f.margin.bottom=5,f.horizontalAlignment="Left",f.verticalAlignment="Bottom",f.setOffsetWithRespectToBounds(0,1,"Fraction"),f.relativeMode="Point",f.data=Sp("collapsedShape"),f.margin.left=n,!0!==l.collapsed||l.processes?f.visible=!1:f.visible=!0,!0===f.visible&&(n+=18),r.children.push(f),"Event"===l.type){d.style.strokeWidth=1,d.style.strokeDashArray="2 2",t=l.events;for(var g=0;g<t.length;g++)i=t[g],this.getBPMNSubEvent(i,e,r)}1===c&&(n=u+8),(a=this.getBPMNSubProcessLoopShape(e)).margin.left=n,!0===a.visible&&(n+=16),r.children.push(a),d.id=e.id+"_boundary","Default"===l.boundary&&(d.style.strokeWidth=1,d.style.strokeDashArray="1 0"),"Call"===l.boundary&&(d.style.strokeWidth=4,d.style.strokeDashArray="1 0"),"Event"===l.boundary&&(d.style.strokeWidth=1,d.style.strokeDashArray="2 2"),1===c&&(n=u+8),(o=this.getBPMNAdhocShape(e,o,l)).margin.left=n,!0===o.visible&&(n+=16),r.children.push(o);var m=new Ue;return!0===l.compensation?m.visible=!0:m.visible=!1,1===c&&(n=u+8),(m=this.getBPMNCompensationShape(e,m)).margin.left=n,!0===m.visible&&(n+=16),r.children.push(m),r.style.strokeColor="transparent",r.style.strokeWidth=0,r.style.fill="transparent",r},e.prototype.getBPMNSubEvent=function(e,t,i,n){var r;i.children=i.children||[],r=this.getBPMNEventShape(t,e,!0,n),this.getBPMNSubprocessEvent(t,r,e),r.id=n||t.id+"_subprocessEvents",r.width=e.width||20,r.height=e.height||20,r.setOffsetWithRespectToBounds(e.offset.x,e.offset.y,"Fraction"),r.relativeMode="Point",r.margin=e.margin,r.horizontalAlignment=e.horizontalAlignment,r.verticalAlignment=e.verticalAlignment,r.style.fill="transparent",r.style.strokeColor="transparent",r.style.strokeWidth=0,i.children.push(r)},e.prototype.getBPMNSubProcessTransaction=function(e,t,i){var n=i.children[0].width,r=i.children[0].height,o=new Le;o.margin={left:3,right:0,top:3,bottom:0},o.id=e.id+"_0_Subprocess_innnerRect",o.cornerRadius=10,o.width=n-6,o.height=r-6,i.children.push(o);var a=new He;a.id=e.id+"_transaction_events",a.style.gradient=e.style.gradient;var s=t.activity.subProcess.transaction;this.getBPMNSubEvent(s.success,e,a,e.id+"_success"),this.getBPMNSubEvent(s.cancel,e,a,e.id+"_cancel"),this.getBPMNSubEvent(s.failure,e,a,e.id+"_failure"),this.updateDiagramContainerVisibility(a.children[0],s.success.visible),this.updateDiagramContainerVisibility(a.children[1],s.cancel.visible),this.updateDiagramContainerVisibility(a.children[2],s.failure.visible),a.float=!0,a.width=n,a.height=r,a.style.fill=a.style.strokeColor="transparent",i.children.push(a)},e.prototype.getBPMNSubProcessLoopShape=function(e){var t,i,n=e.shape.activity,r=new Ue;return i=Ip(t=n.subProcess.loop),r.visible="None"!==t,r.id=e.id+"_loop",r.data=i,r.style.fill="black",r.width=12,r.height=12,r.horizontalAlignment="Left",r.verticalAlignment="Bottom",r.setOffsetWithRespectToBounds(0,1,"Fraction"),r.relativeMode="Point",r.margin.bottom=5,r.style.fill="transparent",r.style.strokeColor=e.style.strokeColor,r},e.prototype.drag=function(e,t,i,n){var r=n.nameTable[e.processId];e.margin.top+i>=0&&n.nodePropertyChange(e,{},{margin:{top:e.margin.top+i}}),e.margin.left+t>=0&&n.nodePropertyChange(e,{},{margin:{left:e.margin.left+t}});var o=this.getChildrenBound(r,e.id,n);this.updateSubProcessess(o,e,n),r.wrapper.measure(new P(void 0,void 0)),r.wrapper.arrange(r.wrapper.desiredSize),n.refreshCanvasLayers(),n.updateSelector(),this.updateDocks(e,n)},e.prototype.dropBPMNchild=function(e,t,i){if(t&&"Bpmn"===t.shape.type&&"Bpmn"===e.shape.type&&(!Object(r.I)()&&"TextAnnotation"!==t.shape.shape||Object(r.I)()&&"TextAnnotation"!==t.shape.bpmnShape)){var n=i.nameTable[e.id].shape.activity.subProcess;if(i.currentSymbol&&"Bpmn"===e.shape.type&&!n.collapsed)return void(t.processId=e.id);if(n.processes=n.processes||[],n.processes&&-1===n.processes.indexOf(t.id)&&!n.collapsed){n.processes.push(t.id);var o=uc(t),a=i.nameTable[t.id].wrapper,s=i.nameTable[e.id].wrapper;a.margin.top=a.offsetY-a.actualSize.height/2-(e.offsetY-e.actualSize.height/2),a.margin.left=a.offsetX-a.actualSize.width/2-(e.offsetX-e.actualSize.width/2),a.margin.top=a.margin.top<0?0:a.margin.top,a.margin.left=a.margin.left<0?0:a.margin.left,i.nameTable[t.id].processId=e.id,s.children.push(i.nameTable[t.id].wrapper);var l=this.getChildrenBound(e,t.id,i);this.updateSubProcessess(l,t,i),s.measure(new P(void 0,void 0)),s.arrange(s.desiredSize),i.refreshCanvasLayers(),i.updateSelector();for(var c=[],d=(c=c.concat(t.outEdges,t.inEdges)).length-1;d>=0;d--)-1===i.bpmnModule.textAnnotationConnectors.indexOf(i.nameTable[c[d]])&&i.remove(i.nameTable[c[d]]);var h={type:"PositionChanged",undoObject:{nodes:[o]},redoObject:{nodes:[uc(t)]},category:"Internal"};i.addHistoryEntry(h),"SVG"===i.mode&&t.zIndex<e.zIndex&&(i.updateProcesses(t),this.updateSubprocessNodeIndex(t,i,e)),this.updateDocks(t,i)}}},e.prototype.updateIndex=function(e,t){var i;i=t;var n=e.getIndex(i,i.id);e.nodes.splice(Number(n),1),i.zIndex=e.nodes[e.nodes.length-1].zIndex+1,e.nodes.push(i)},e.prototype.updateSubprocessNodeIndex=function(e,t,i){if(e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0)for(var n=0;n<e.shape.activity.subProcess.processes.length;n++){this.updateIndex(t,e);var r=e.shape.activity.subProcess.processes[n];if(t.nameTable[r].shape.activity.subProcess.processes.length>0)this.updateSubprocessNodeIndex(t.nameTable[r],t,i);else{var o=t.nameTable[e.shape.activity.subProcess.processes[n]];this.updateIndex(t,o)}}else this.updateIndex(t,e)},e.prototype.updateDocks=function(e,t){if("Bpmn"===e.shape.type&&e.shape.activity.subProcess.processes&&!e.shape.activity.subProcess.collapsed)for(var i=0,n=e.shape.activity.subProcess.processes;i<n.length;i++){var r=n[i],o=t.nameTable[r];o&&(t.updateConnectorEdges(o),o.wrapper.measure(new P(o.wrapper.width,o.wrapper.height)),o.wrapper.arrange(o.wrapper.desiredSize),o.shape.activity.subProcess.processes&&o.shape.activity.subProcess.processes.length&&this.updateDocks(o,t))}},e.prototype.removeBpmnProcesses=function(e,t){var i=t.nameTable[e.processId];if("Bpmn"===e.shape.type&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0)for(var n=(r=e.shape.activity.subProcess.processes).length-1;n>=0;n--)t.remove(t.nameTable[r[n]]);if(i){t.removeDependentConnector(e);var r=i.shape.activity.subProcess.processes;this.removeChildFromBPMN(i.wrapper,e.id);var o=r.indexOf(e.id);r.splice(o,1)}},e.prototype.removeChildFromBPMN=function(e,t){for(var i=0,n=e.children;i<n.length;i++){var r=n[i];r.id===t?e.children.splice(e.children.indexOf(r),1):r.children&&this.removeChildFromBPMN(r,t)}},e.prototype.removeProcess=function(e,t){var i=t.nameTable[e];if(i){var n=t.nameTable[i.processId];if(n&&"Bpmn"===n.shape.type){var r=n.shape.activity.subProcess.processes;t.removeDependentConnector(i),this.removeChildFromBPMN(n.wrapper,e);var o=r.indexOf(e);r.splice(o,1),i.processId="",t.refreshDiagramLayer(),t.updateSelector()}}},e.prototype.addProcess=function(e,t,i){var n;e.id=e.id||lc(),n=e.id;var r=i.nameTable[n];r||i.add(e),e.processId=t;var o=i.nameTable[t],a=o.shape.activity.subProcess;if(r&&o&&"Bpmn"===o.shape.type&&"Bpmn"===r.shape.type&&a.processes){r.processId=t;var s=o.shape.activity.subProcess.processes;if(s.indexOf(n)<0&&s.push(n),o.wrapper.children.push(r.wrapper),o.wrapper.measure(new P),o.wrapper.arrange(o.wrapper.desiredSize),i.bpmnModule.updateDocks(o,i),i.refreshDiagramLayer(),"SVG"===i.mode&&r.shape&&r.shape.activity&&!r.shape.activity.subProcess.processes)Nl(t+"_groupElement").appendChild(Nl(e.id+"_groupElement"))}},e.prototype.getChildrenBound=function(e,t,i){var n,r=e.shape.activity.subProcess.processes;if(r&&r.length)for(var o=0,a=r;o<a.length;o++){var s=a[o];t!==s&&(n=n?i.nameTable[s].wrapper.bounds.uniteRect(n):i.nameTable[s].wrapper.bounds)}return n||i.nameTable[t].wrapper.bounds},e.prototype.updateSubProcessess=function(e,t,i){var n,r,o,a,s=i.nameTable[t.processId],l={x:.5,y:.5};s.wrapper.bounds.left+t.margin.left+t.width>s.wrapper.bounds.right&&(o=!0),s.wrapper.bounds.top+t.margin.top+t.height>s.wrapper.bounds.bottom&&(a=!0),o&&(l.x=0),a&&(l.y=0);var c=s.wrapper.actualSize;o&&(n=(t.wrapper.margin.left+t.wrapper.bounds.width)/c.width),a&&(r=(t.wrapper.margin.top+t.wrapper.bounds.height)/c.height),(n>0||r>0)&&i.commandHandler.scale(i.nameTable[t.processId],n||1,r||1,l)},e.prototype.getBPMNCompensationShape=function(e,t){return t.id=e.id+"_0_compensation",t.width=12,t.height=12,t.margin.bottom=5,t.style.fill="transparent",t.style.strokeColor=e.style.strokeColor,t.horizontalAlignment="Left",t.verticalAlignment="Bottom",t.relativeMode="Object",t.data="M 22.462 18.754 l -6.79 3.92 l 6.79 3.92 V 22.89 l 6.415 3.705 v -7.841 l -6.415 3.705 V 18.754 Z M 28.331 19.701 v 5.947 l -5.149 -2.973 L 28.331 19.701 Z M 21.916 25.647 l -5.15 -2.973 l 5.15 -2.973 V 25.647 Z M 22.275 12.674 c -5.513 0 -9.999 4.486 -9.999 9.999 c 0 5.514 4.486 10.001 9.999 10.001 c 5.514 0 9.999 -4.486 9.999 -10.001 C 32.274 17.16 27.789 12.674 22.275 12.674 Z M 22.275 32.127  c -5.212 0 -9.453 -4.241 -9.453 -9.454 c 0 -5.212 4.241 -9.453 9.453 -9.453 c 5.212 0 9.453 4.241 9.453 9.453 C 31.728 27.887 27.487 32.127 22.275 32.127 Z",t},e.prototype.getBPMNActivityShape=function(e){var t,i=new He,n=e.shape.activity,r=n.activity,o=n.subProcess;n.activity;return"Task"===r&&(t=this.getBPMNTaskShape(e)),"SubProcess"===r&&o&&(t=this.getBPMNSubProcessShape(e)),t.id=r+e.id,i.children=[t],i.style.fill="transparent",i.style.strokeColor="transparent",i.style.strokeWidth=0,i},e.prototype.getBPMNSubprocessEvent=function(e,t,i){var n,r;if(0!==i.annotations.length)for(var o=0;o<i.annotations.length;o++){var a=i.annotations[o];(n=e.initAnnotationWrapper(a)).width=i.width,n.height=i.height,t.children.push(n)}if(0!==i.ports.length)for(o=0;o<i.ports.length;o++){var s=i.ports[o];r=e.initPortWrapper(s),t.children.push(r)}},e.prototype.getBPMNAdhocShape=function(e,t,i){return t.id=e.id+"_0_adhoc",t.width=12,t.height=8,t.style.fill="black",t.style.strokeColor=e.style.strokeColor,t.margin.bottom=5,t.horizontalAlignment="Left",t.verticalAlignment="Bottom",t.relativeMode="Object",t.data="M 49.832 76.811 v -2.906 c 0 0 0.466 -1.469 1.931 -1.5 c 1.465 -0.031 2.331 1.219 2.897 1.688 s 1.06 0.75 1.526 0.75 c 0.466 0 1.548 -0.521 1.682 -1.208 s 0.083 3.083 0.083 3.083 s -0.76 0.969 -1.859 0.969 c -1.066 0 -1.865 -0.625 -2.464 -1.438 s -1.359 -0.998 -2.064 -0.906 C 50.598 75.467 49.832 76.811 49.832 76.811 Z",i&&!0===i.adhoc?t.visible=!0:t.visible=!1,t},e.prototype.getBPMNTextAnnotation=function(e,t,i,n){i.id=i.id||lc(),i.nodeId=e.id;var r=new He,o=new Ue,a=new Be;o.id=e.id+"_"+i.id+"_path",o.width=i.width,o.height=i.height,o.relativeMode="Object",a.id=e.id+"_"+i.id+"_text",a.content=i.text;var s=e.style;a.style={fontSize:s.fontSize,italic:s.italic,gradient:null,opacity:s.opacity,bold:s.bold,textWrapping:s.textWrapping,color:s.color,fill:"white",fontFamily:s.fontFamily,whiteSpace:s.whiteSpace,textOverflow:"Wrap",strokeColor:"none",strokeWidth:0,strokeDashArray:s.strokeDashArray,textAlign:s.textAlign,textDecoration:s.textDecoration},a.horizontalAlignment="Center",a.verticalAlignment="Center",a.relativeMode="Object",a.margin={left:5,right:5,top:5,bottom:5},r.offsetX=e.offsetX+i.length*Math.cos(i.angle*(Math.PI/180)),r.offsetY=e.offsetY+i.length*Math.sin(i.angle*(Math.PI/180)),r.float=!0,r.transform=le.Self,r.id=e.id+"_textannotation_"+i.id,r.style.strokeColor="transparent",r.margin={left:10,right:10,top:10,bottom:10},r.relativeMode="Object",r.rotateAngle=0,r.children=[o,a];var l=new Pl(e.shape,"annotations",{id:r.id,shape:{type:"Bpmn",shape:"TextAnnotation"}},!0);l.ports=[{id:o.id+"_port",shape:"Square",offset:{x:0,y:.5}}],l.offsetX=r.offsetX,l.offsetY=r.offsetY,l.text=i.text,l.angle=i.angle,l.length=i.length,l.width=i.width,l.height=i.height,l.wrapper=r,r.children.push(l.initPortWrapper(l.ports[0]));var c=new _(0,0,0,0),d=e.width||e.minWidth||0,h=e.height||e.minHeight||0;void 0!==d&&void 0!==h&&(c=new _(e.offsetX-d/2,e.offsetY-h/2,d,h)),this.setAnnotationPath(c,r,{x:l.offsetX,y:l.offsetY},l,i.length,i.angle);var p={id:e.id+"_"+i.id+"_connector",constraints:te.Default&~(te.DragTargetEnd|te.Drag),sourceID:e.id,targetID:r.id,targetDecorator:{shape:"None"}},u=new _r(e.shape,"annotations",p,!0);u.targetPortID=l.ports[0].id,u.init(t),u.wrapper.float=!1,u.wrapper.transform=le.Self,n.children.push(u.wrapper),u.zIndex=1e4;var f=this.annotationObjects[e.id];f||(f={}),f[i.id]||(f[i.id]={});return f[i.id].node=l,f[i.id].connector=u,this.annotationObjects[e.id]=f,t.initObject(l,void 0,!1),l.zIndex=1e4,r},e.prototype.renderBPMNTextAnnotation=function(e,t,i){t.id=t.id||lc();var n=new He,r=new Ue,o=new Be;r.id="_"+t.id+"_path",r.width=t.width,r.height=t.height,r.relativeMode="Object",o.id=t.id+"_text",o.content=t.shape.annotation.text;var a=t.style;o.style={fontSize:a.fontSize,italic:a.italic,gradient:null,opacity:a.opacity,bold:a.bold,textWrapping:a.textWrapping,color:a.color,fill:"white",fontFamily:a.fontFamily,whiteSpace:a.whiteSpace,textOverflow:"Wrap",strokeColor:"none",strokeWidth:0,strokeDashArray:a.strokeDashArray,textAlign:a.textAlign,textDecoration:a.textDecoration},o.horizontalAlignment="Left",o.verticalAlignment="Center",o.relativeMode="Object",o.margin={left:5,right:5,top:5,bottom:5},n.offsetX=t.offsetX+t.shape.annotation.length*Math.cos(t.shape.annotation.angle*(Math.PI/180)),n.offsetY=t.offsetY+t.shape.annotation.length*Math.sin(t.shape.annotation.angle*(Math.PI/180)),n.float=!0,n.id=t.id+"_textannotation_"+t.id,n.style.strokeColor="transparent",n.margin={left:10,right:10,top:10,bottom:10},n.relativeMode="Object",n.rotateAngle=0,n.children=[r,o];var s=new Pl(t.shape,"annotations",{id:n.id,shape:{type:"Bpmn",shape:"TextAnnotation"}},!0);s.ports=[{id:r.id+"_port",shape:"Square",offset:{x:0,y:.5}}],s.offsetX=n.offsetX,s.offsetY=n.offsetY,s.shape&&s.shape.annotation&&(s.text=t.shape.annotation.text,s.angle=t.shape.annotation.angle,s.length=t.shape.annotation.length),s.width=t.width,s.height=t.height,s.wrapper=n,n.children.push(s.initPortWrapper(s.ports[0]));var l=new _(0,0,0,0),c=t.width||0,d=t.height||0;return void 0!==c&&void 0!==d&&(l=new _(t.offsetX-c/2,t.offsetY-d/2,c,d)),this.setAnnotationPath(l,n,{x:s.offsetX,y:s.offsetY},s,t.length,t.angle),n},e.prototype.getTextAnnotationWrapper=function(e,t){if(e&&"Bpmn"===e.shape.type){if("TextAnnotation"===(Object(r.I)()?e.shape.bpmnShape:e.shape.shape))return e.wrapper.children[1];if(this.annotationObjects[e.id]&&this.annotationObjects[e.id][t]){var i=this.annotationObjects[e.id][t].node;return this.getTextAnnotationWrapper(i,t)}}return null},e.prototype.addAnnotation=function(e,t,i){var n=e.wrapper.children[0],r=e.shape;t.nodeId=e.id;var o=new ul(r,"annotations",t,!0);return r.annotations.push(o),n.children.push(this.getBPMNTextAnnotation(e,i,t,n)),e.wrapper.measure(new P),e.wrapper.arrange(e.wrapper.desiredSize),this.annotationObjects[e.id][t.id].connector},e.prototype.clearAnnotations=function(e,t){var i=e.shape;if(i.annotations.length)for(var n=i.annotations.length-1;n>=0;n--){var r=i.annotations[n];this.removeAnnotationObjects(e,r,t)}delete this.annotationObjects[e.id]},e.prototype.checkAndRemoveAnnotations=function(e,t){if("Bpmn"===e.shape.type)if(!Object(r.I)()&&"TextAnnotation"===e.shape.shape||Object(r.I)()&&"TextAnnotation"===e.shape.bpmnShape)for(var i=e.id.split("_"),n=i[i.length-1],o=i[i.length-3]||i[0],a=t.nameTable[o],s=a.shape,l=0,c=s.annotations;l<c.length;l++){var d=c[l];if(d.id===n)if(-1!==s.annotations.indexOf(d))return t.removeDependentConnector(e),this.removeAnnotationObjects(a,d,t),!0}else e.shape.annotations&&e.shape.annotations.length&&this.clearAnnotations(e,t);return!1},e.prototype.removeAnnotationObjects=function(e,t,i){var n=e.shape,r=n.annotations.indexOf(t);if(-1!==r){if(!(i.diagramActions&pe.UndoRedo)&&!(i.diagramActions&pe.Group)){var o={type:"CollectionChanged",changeType:"Remove",undoObject:uc(t),redoObject:uc(t),category:"Internal"};i.addHistoryEntry(o)}n.annotations.splice(r,1);var a=this.annotationObjects[e.id];if(a&&a[t.id]){var s=a[t.id].node,l=a[t.id].connector;i.removeElements(s),i.removeElements(l);var c=e.wrapper.children[0];r=c.children.indexOf(s.wrapper),c.children.splice(r,1),r=c.children.indexOf(l.wrapper),c.children.splice(r,1),i.removeFromAQuad(s),i.removeFromAQuad(l),delete i.nameTable[s.id],delete i.nameTable[l.id],delete a[t.id]}}},e.prototype.setAnnotationPath=function(e,t,i,n,r,o){var a,s,l=this.getAnnotationPathAngle(i,e),c="",d=t.children[0],h=t.children[2],p=t.children[1];d.horizontalAlignment="Stretch",d.verticalAlignment="Stretch",p.margin.left=p.margin.right=5,p.margin.top=p.margin.bottom=5,0===l?(c="M10,20 L0,20 L0,0 L10,0",d.width=10,d.horizontalAlignment="Left",h.setOffsetWithRespectToBounds(0,.5,"Fraction"),p.margin.top=p.margin.bottom=10,a=e.middleRight,s={x1:e.right,y1:e.top,x2:e.right,y2:e.bottom}):180===l?(c="M0,0 L10,0 L10,20 L0,20",d.width=10,d.horizontalAlignment="Right",h.setOffsetWithRespectToBounds(1,.5,"Fraction"),p.margin.top=p.margin.bottom=10,a=e.middleLeft,s={x1:e.left,y1:e.top,x2:e.left,y2:e.bottom}):90===l?(c="M20,10 L20,0 L0,0 L0,10",d.height=10,d.verticalAlignment="Top",h.setOffsetWithRespectToBounds(.5,0,"Fraction"),p.margin.left=p.margin.right=10,a=e.bottomCenter,s={x1:e.right,y1:e.bottom,x2:e.left,y2:e.bottom}):(c="M0,0 L0,10 L20,10 L20,0",d.height=10,d.verticalAlignment="Bottom",h.setOffsetWithRespectToBounds(.5,1,"Fraction"),p.margin.left=p.margin.right=10,a=e.topCenter,s={x1:e.right,y1:e.top,x2:e.left,y2:e.top});var u=e.center;a=_t(s,[u,E.transform(i,o,Math.max(e.width,e.height))],0,u),d.data=c,void 0!==r&&void 0!==o&&(a=E.transform(a,o,r),t.offsetX=n.offsetX=a.x,t.offsetY=n.offsetY=a.y)},e.prototype.isBpmnTextAnnotation=function(e,t){if(this.annotationObjects){var i=e.parentId,n=e.id,r=t.nameTable[i];return r&&"Bpmn"===r.shape.type&&this.annotationObjects[i]&&this.annotationObjects[i][n]?r:null}return null},e.prototype.updateTextAnnotationContent=function(e,t,i,n){var r=t.parentId,o=t.id;if(this.annotationObjects[r]&&this.annotationObjects[r][o])for(var a=0,s=e.shape.annotations;a<s.length;a++){var l=s[a];if(l.id===o){l.text=i;var c=this.annotationObjects[r][o].node.wrapper.children[1];c.content=i,c.visible=!0,e.wrapper.measure(new P),e.wrapper.arrange(e.wrapper.desiredSize)}}},e.prototype.updateQuad=function(e,t){var i,n=e.shape.annotations;if(n&&n.length>0)for(var r=0;r<n.length;r++)i=this.annotationObjects[e.id][n[r].id].node,t.updateQuad(i)},e.prototype.updateTextAnnotationProp=function(e,t,i){if("Bpmn"===e.shape.type){var n=e.shape.annotations;if(n&&n.length>0)for(var r=0;r<e.wrapper.children[0].children.length;r++)for(var o=0;o<n.length;o++){var a=e.wrapper.children[0].children[r].id.split("_");if(a[a.length-1]===n[o].id){var s=this.annotationObjects[e.id][n[o].id].node,l=this.annotationObjects[e.id][n[o].id].connector,c=(Gt(l.targetPoint,e.wrapper.bounds,e.wrapper.bounds),l.sourcePoint);c={x:l.sourcePoint.x+e.offsetX-t.offsetX,y:l.sourcePoint.y+e.offsetY-t.offsetY},c=E.transform(c,n[o].angle,n[o].length),e.wrapper.children[0].children[r].offsetX=s.offsetX=c.x,e.wrapper.children[0].children[r].offsetY=s.offsetY=c.y,i.updateQuad(s)}}}},e.prototype.getSubprocessChildCount=function(e){var t,i=0,n=e.shape.activity.subProcess;return void 0!==(t=n.loop)&&"None"!==t&&i++,void 0!==n.compensation&&!0===n.compensation&&i++,void 0!==n.collapsed&&!0===n.collapsed&&i++,void 0!==n.adhoc&&!0===n.adhoc&&i++,i},e.prototype.getTaskChildCount=function(e){var t=0,i=e.shape.activity.task;return void 0!==i.compensation&&!0===i.compensation&&t++,void 0!==i.loop&&"None"!==i.loop&&t++,t},e.prototype.setStyle=function(e,t){e.style.fill=t.style.fill,e.style.strokeColor=t.style.strokeColor,e.style.strokeWidth=t.style.strokeWidth,e.style.strokeDashArray=t.style.strokeDashArray,e.style.opacity=t.style.opacity,e.style.gradient=t.style.gradient,0!==(t.constraints&ne.Shadow)&&(e.shadow=t.shadow)},e.prototype.updateBPMN=function(e,t,i,n){var o=e.shape||{},a=i.wrapper.children[0],s=i.shape.shape||i.shape.bpmnShape,l=void 0!==e.width||void 0!==e.height;if((Object(r.I)()&&"Gateway"===o.bpmnShape||"Gateway"===o.shape)&&o.gateway)i.wrapper.children[0]=this.getBPMNGatewayShape(i);else if((Object(r.I)()&&"DataObject"===o.bpmnShape||"DataObject"===o.shape)&&o.dataObject)i.wrapper.children[0]=this.getBPMNDataObjectShape(i);else if((Object(r.I)()&&"Activity"===o.bpmnShape||"Activity"===o.shape)&&o.activity)i.wrapper.children[0]=this.getBPMNActivityShape(i);else if((Object(r.I)()&&"Event"===o.bpmnShape||"Event"===i.shape.bpmnShape||"Event"===o.shape)&&o.event){var c=o.event;i.wrapper.children[0]=this.getBPMNEventShape(i,c)}else Object(r.I)()&&"Message"===o.bpmnShape||"Message"===o.shape||Object(r.I)()&&"DataSource"===o.bpmnShape||"DataSource"===o.shape?i.wrapper.children[0]=this.getBPMNShapes(i):void 0!==o.gateway||"Gateway"===s&&l?this.updateBPMNGateway(i,e):void 0!==o.dataObject||"DataObject"===s&&l?this.updateBPMNDataObject(i,e,t):void 0!==o.activity||"Activity"===s&&l?this.updateBPMNActivity(i,e,t,n):(void 0!==o.event||"Event"===s&&l)&&this.updateBPMNEvent(i,e,t);if(i.wrapper.children[0].id=i.wrapper.children[0].id||a.id,e.style&&(is(e.style,a instanceof ze?!Object(r.I)()&&"Activity"===i.shape.shape||Object(r.I)()&&"Activity"===i.shape.bpmnShape?a.children[0].children[0]:a.children[0]:a),e.style&&e.style.strokeColor&&a.children.length>0))if((!Object(r.I)()&&"Activity"===i.shape.shape||Object(r.I)()&&"Activity"===i.shape.bpmnShape)&&"SubProcess"===i.shape.activity.activity){var d=a.children[0];this.updateBPMNStyle(d,e.style.strokeColor)}else(!Object(r.I)()&&"Gateway"===i.shape.shape||Object(r.I)()&&"Gateway"===i.shape.bpmnShape||!Object(r.I)()&&"Event"===i.shape.shape||Object(r.I)()&&"Event"===i.shape.bpmnShape)&&this.updateBPMNStyle(a,e.style.strokeColor)},e.prototype.updateBPMNStyle=function(e,t){for(var i=0;i<e.children.length;i++){is({strokeColor:t},e.children[i])}},e.prototype.updateBPMNGateway=function(e,t){var i=e.shape,n=e.wrapper.children[0];if(i){is(e.style,n.children[0]);var r=Pp(i.gateway.type);n.children[1].data=r}void 0===t.width&&void 0===t.height||this.setSizeForBPMNGateway(e.shape.gateway,n,t.width||e.width,t.height||e.height)},e.prototype.updateBPMNDataObject=function(e,t,i){var n=t.shape,r=e.wrapper.children[0];if(n){var o=r.children[1],a=r.children[2];if(void 0!==t.style&&(is(t.style,r.children[0]),o.style.opacity=e.style.opacity,a.style.opacity=e.style.opacity),n.dataObject){switch(n.dataObject.type){case"None":o.visible=!1;break;case"Input":o.style.fill="white";break;case"Output":o.style.fill="black"}"None"===i.shape.dataObject.type&&(o.visible=!0),void 0!==t.shape.dataObject.collection&&(a.visible=n.dataObject.collection)}}void 0===t.width&&void 0===t.height||this.setSizeForBPMNDataObjects(e.shape.dataObject,r,t.width||e.width,t.height||e.height)},e.prototype.getEvent=function(e,t,i,n,r,o){switch(i){case"Start":r.visible=!1,n.style.strokeDashArray="",o.style.fill="white",o.style.strokeColor="black",n.style.fill="white";break;case"NonInterruptingStart":n.style.strokeDashArray="2 3",o.style.fill="white",n.style.fill="white",o.style.strokeColor="black",r.visible=!1;break;case"Intermediate":n.style.strokeDashArray="",n.style.fill="white",r.style.strokeDashArray="",n.style.gradient=null,o.style.fill="white",o.style.strokeColor="black",this.updateEventVisibility(t,r);break;case"NonInterruptingIntermediate":n.style.fill="white",n.style.gradient=null,o.style.fill="white",o.style.strokeColor="black",n.style.strokeDashArray="2 3",r.style.strokeDashArray="2 3",this.updateEventVisibility(t,r);break;case"ThrowingIntermediate":case"End":n.style.fill="End"!==i?"white":"black",n.style.strokeDashArray="",r.style.strokeDashArray="",n.style.gradient=null,o.style.fill="black",this.updateEventVisibility(t,r),o.style.strokeColor=e.style.fill}},e.prototype.updateEventVisibility=function(e,t){e.shape.activity&&e.shape.activity.subProcess&&e.shape.activity.subProcess.events&&void 0!==e.shape.activity.subProcess.events[0]&&void 0!==e.shape.activity.subProcess.events[0].event?"NonInterruptingStart"!==e.shape.activity.subProcess.events[0].event&&"Start"!==e.shape.activity.subProcess.events[0].event||(t.visible=!0):void 0!==e.shape.event&&("NonInterruptingStart"!==e.shape.event.event&&"Start"!==e.shape.event.event||(t.visible=!0))},e.prototype.updateBPMNEvent=function(e,t,i){var n,r=t.shape,o=e.wrapper.children[0];if(r){var a,s=o.children[0],l=o.children[1],c=o.children[2];void 0!==t.style&&(is(e.style,o.children[0]),void 0===t.style.opacity&&void 0===t.style.strokeColor||(l.style.opacity=e.style.opacity,l.style.strokeColor=e.style.strokeColor)),a=r.event.event,n=r.event.trigger,void 0!==a&&this.getEvent(e,i,a,s,l,c),void 0!==n&&this.updateBPMNEventTrigger(e,t)}void 0===t.width&&void 0===t.height&&void 0===n||this.setSizeForBPMNEvents(e.shape.event,o,t.width||e.width,t.height||e.height)},e.prototype.updateBPMNEventTrigger=function(e,t){var i=e.shape,n=e.wrapper.children[0].children[2];n.canMeasurePath=!0,!t.style||void 0===t.style.strokeColor&&void 0===t.style.opacity||is(e.style,n);var r=Cp(i.event.trigger);n.data=r},e.prototype.updateBPMNActivity=function(e,t,i,n){var r=t.shape,o=e.wrapper.children[0],a=this.getSize(e,o.children[0].children[0]);if(r){var s=i.shape.activity.activity,l=e.shape.activity.activity;if("SubProcess"!==s&&"Task"!==s||"SubProcess"!==l&&"Task"!==l){if("Task"===l&&void 0!==r.activity.task){this.updateBPMNActivityTask(e,t);var c=this.getTaskChildCount(e),d=void 0,h=12*c,p=a.width/2-h;d=1===c?p+8:p+8*(c-1),void 0!==r.activity.task.loop&&this.updateBPMNActivityTaskLoop(e,t,d,c,p,2)}"SubProcess"===l&&void 0!==r.activity.subProcess&&this.updateBPMNActivitySubProcess(e,t,i,n)}else n.removeElements(e),e.wrapper.children[0]=this.getBPMNActivityShape(e);this.setSizeForBPMNActivity(e.shape.activity,o,t.width||a.width,t.height||a.height,e)}void 0===t.width&&void 0===t.height||this.setSizeForBPMNActivity(e.shape.activity,o,t.width||a.width,t.height||a.height,e)},e.prototype.updateBPMNActivityTask=function(e,t){for(var i=t.shape,n=e.wrapper.children[0].children[0],r=i.activity.task,o=0;o<n.children.length;o++){if(n.children[o].id===e.id+"_1_taskTypeService")n.children.splice(o,1),(s=document.getElementById(e.id+"_1_taskTypeService")).parentNode.removeChild(s)}if("Receive"===r.type||"Send"===r.type?n.children[1].height=14:n.children[1].height=20,void 0!==r.type){var a=jp(r.type);if(n.children[1].data=a,"Service"===r.type){for(o=0;o<n.children.length;o++){var s;if(n.children[o].id===e.id+"_1_tasktType")n.children.splice(o,1),(s=document.getElementById(e.id+"_1_tasktType")).parentNode.removeChild(s)}var l=new Ue;l.id=e.id+"_1_tasktType",l.margin.left=5,l.margin.top=5,l.data=a,l.style.fill="transparent",l.style.opacity=e.style.opacity,l.width=20,l.height=20,n.children.splice(1,0,l);var c=new Ue;c.id=e.id+"_1_taskTypeService",c.data=a,c.margin.left=n.children[1].margin.left+9,c.margin.top=n.children[1].margin.top+9,c.style.fill="white",c.style.opacity=e.style.opacity,n.children.splice(2,0,c)}}void 0!==i.activity.task.call&&(!1!==i.activity.task.call?n.children[0].style.strokeWidth=4:n.children[0].style.strokeWidth=1),void 0!==i.activity.task.compensation&&(!0===i.activity.task.compensation?n.children[3].visible=!0:n.children[3].visible=!1)},e.prototype.updateBPMNActivityTaskLoop=function(e,t,i,n,r,o){var a,s,l=t.shape,c=e.wrapper.children[0].children[0],d=l.activity,h=0;if(void 0!==d.subProcess){var p=d.subProcess;h="Transaction"===d.subProcess.type?2:0,s=Ip(a=p.loop),c.children[2+h].data=s,c.children[2+h].visible="None"!==a}else void 0!==d.task&&void 0!==d.task.loop&&(s=Ip(d.task.loop),c.children[2].data=s,c.children[2].visible="None"!==d.task.loop);this.updateChildMargin(c,n,r,i,o+h)},e.prototype.updateChildMargin=function(e,t,i,n,r){if(1===t)for(var o=r;o<e.children.length;o++)2!==o&&!0===e.children[o].visible&&(e.children[o].margin.left=n,n=i+8);else{n=i+8*(t-1);for(o=r;o<e.children.length;o++)2!==o&&!0===e.children[o].visible&&(e.children[o].margin.left=n,n+=20)}},e.prototype.updateBPMNActivitySubProcess=function(e,t,i,n){var r,o=t.shape,a=e.wrapper.children[0],s=this.getSize(e,a.children[0].children[0]),l=o.activity.subProcess,c=this.getSubprocessChildCount(e),d=12*c,h=s.width/2-d;r=1===c?h+8:h+8*(c-1),is(e.style,a.children[0].children[0]),void 0!==l.events&&this.updateBPMNSubProcessEvent(e,t,i,n),void 0!==l.adhoc&&this.updateBPMNSubProcessAdhoc(e,i,l,r,c,h),void 0!==l.boundary&&this.updateBPMNSubProcessBoundary(e,l),void 0!==l.collapsed&&this.updateBPMNSubProcessCollapsed(e,i,l,r,c,h,n),void 0!==l.compensation&&this.updateBPMNSubProcessCompensation(e,i,l,r,c,h),void 0!==l.loop&&this.updateBPMNSubProcessLoop(e,i,l,r,c,h),void 0!==l.transaction&&this.updateBPMNSubProcessTransaction(e,t,i,n)},e.prototype.updateBPMNSubProcessEvent=function(e,t,i,n){for(var r=t.shape,o=e.wrapper.children[0],a=o.children[0],s=(o.children[0].children.length,r.activity.subProcess),l=0,c=Object.keys(s.events);l<c.length;l++){var d=c[l],h=Number(d),p=a.children[h+2],u=e.shape.activity.subProcess.events[h];this.updateBPMNSubEvent(e,s.events[h],u,p,t,i,n)}},e.prototype.updateBPMNSubEvent=function(e,t,i,n,r,o,a){var s,l,c=e.wrapper.children[0],d=r.shape,h=n.children[0],p=n.children[1],u=n.children[2];if(r.style&&(void 0===r.style.strokeColor&&void 0===r.style.opacity||(c.children[0].children[1].style.strokeColor=r.style.strokeColor,c.children[0].children[1].style.opacity=r.style.opacity)),void 0!==d.activity.subProcess&&(s=t.event,l=t.trigger),void 0!==s&&this.getEvent(r,o,s,h,p,u),void 0!==l){r.style&&is(r.style,c.children[0]);var f=Cp(l);n.children[2].data=f}if(void 0===t.height&&void 0===t.width||this.getEventSize(t,n),void 0!==t.id&&(n.id=t.id),void 0!==t.margin&&(n.margin=t.margin),void 0!==t.horizontalAlignment&&(n.horizontalAlignment=t.horizontalAlignment),void 0!==t.verticalAlignment&&(n.verticalAlignment=t.verticalAlignment),void 0!==t.offset&&(n.setOffsetWithRespectToBounds(i.offset.x,i.offset.y,"Fraction"),n.relativeMode="Point"),void 0!==t.annotations){var g=void 0,m=c.children[0].children[2];n.children[3]&&n.children.length>3&&(g=n.children[3],a.updateAnnotation(t.annotations[0],g,m))}if(void 0!==t.ports){var v=void 0,y=c.children[0].children[2];n.children[4]&&n.children.length>4&&(v=n.children[4],a.updatePort(t.ports[0],v,y))}void 0!==t.visible&&this.updateDiagramContainerVisibility(n,t.visible)},e.prototype.updateBPMNSubProcessTransaction=function(e,t,i,n){var r,o=t.shape.activity.subProcess.transaction,a=e.wrapper.children[0].children[0].children[2];void 0!==o.success&&(r=e.shape.activity.subProcess.transaction.success,this.updateBPMNSubEvent(e,o.success,r,a.children[0],t,i,n)),void 0!==o.cancel&&(r=e.shape.activity.subProcess.transaction.cancel,this.updateBPMNSubEvent(e,o.cancel,r,a.children[1],t,i,n)),void 0!==o.failure&&(r=e.shape.activity.subProcess.transaction.failure,this.updateBPMNSubEvent(e,o.failure,r,a.children[2],t,i,n));for(var s=0,l=e.outEdges;s<l.length;s++){var c=l[s],d=n.nameTable[c];switch(d.sourcePortID){case"success":o.success&&void 0!==o.success.visible&&n.connectorPropertyChange(d,{},{sourcePortID:"success"});break;case"cancel":o.cancel&&void 0!==o.cancel.visible&&n.connectorPropertyChange(d,{},{sourcePortID:"cancel"});break;case"failure":o.failure&&void 0!==o.failure.visible&&n.connectorPropertyChange(d,{},{sourcePortID:"failure"})}}},e.prototype.getEventSize=function(e,t){void 0!==e.height&&(t.height=e.height,t.children[0].height=e.height,t.children[1].height=.85*e.height,t.children[2].height=.54*e.height),void 0!==e.width&&(t.width=e.width,t.children[0].width=e.width,t.children[1].width=.85*e.width,t.children[2].width=.54*e.width)},e.prototype.updateBPMNSubProcessAdhoc=function(e,t,i,n,r,o){e.shape;var a=e.wrapper.children[0].children[0],s="Transaction"===e.shape.activity.subProcess.type?2:0;!1===i.adhoc?a.children[3+s].visible=!1:a.children[3+s].visible=!0,this.updateChildMargin(a,r,o,n,3+s)},e.prototype.updateBPMNSubProcessBoundary=function(e,t){e.shape;var i=e.wrapper.children[0].children[0].children[0];"Default"===t.boundary&&(i.style.strokeWidth=1,i.style.strokeDashArray="1 0"),"Call"===t.boundary&&(i.style.strokeWidth=4,i.style.strokeDashArray="1 0"),"Event"===t.boundary&&(i.style.strokeWidth=1,i.style.strokeDashArray="2 2")},e.prototype.updateElementVisibility=function(e,t,i){if(e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0)for(var n=e.shape.activity.subProcess.processes,o=n.length-1;o>=0;o--){var a=i.nameTable[n[o]];a.visible=t,i.updateElementVisibility(a.wrapper,a,t),t&&((!Object(r.I)()&&"Event"===a.shape.shape||Object(r.I)()&&"Event"===a.shape.bpmnShape)&&this.setEventVisibility(a,a.wrapper.children[0].children),"SubProcess"===a.shape.activity.activity&&this.setSubProcessVisibility(a));for(var s=a.inEdges.concat(a.outEdges),l=s.length-1;l>=0;l--){var c=i.nameTable[s[l]];c.visible=t,i.updateElementVisibility(c.wrapper,c,t)}}t&&((!Object(r.I)()&&"Event"===e.shape.shape||Object(r.I)()&&"Event"===e.shape.bpmnShape)&&this.setEventVisibility(e,e.wrapper.children[0].children),"SubProcess"===e.shape.activity.activity&&this.setSubProcessVisibility(e),"Task"===e.shape.activity.activity&&(!Object(r.I)()&&"Activity"===e.shape.shape||Object(r.I)()&&"Activity"===e.shape.bpmnShape)&&"None"===e.shape.activity.subProcess.loop&&(e.wrapper.children[0].children[0].children[3].visible=!1))},e.prototype.updateBPMNSubProcessCollapsed=function(e,t,i,n,r,o,a){var s=e.shape.activity.subProcess.events.length,l=e.wrapper.children[0].children[0],c="Transaction"===e.shape.activity.subProcess.type?3:1;!1===i.collapsed?(this.updateElementVisibility(e,!0,a),l.children[c+s].visible=!1):(this.updateElementVisibility(e,!1,a),l.children[c+s].visible=!0),this.updateChildMargin(l,r,o,n,3+s)},e.prototype.updateBPMNSubProcessCompensation=function(e,t,i,n,r,o){var a=e.wrapper.children[0].children[0],s="Transaction"===e.shape.activity.subProcess.type?2:0;!1===i.compensation?a.children[4+s].visible=!1:a.children[4+s].visible=!0,this.updateChildMargin(a,r,o,n,4+s)},e.prototype.updateBPMNSubProcessLoop=function(e,t,i,n,r,o){this.updateBPMNActivityTaskLoop(e,e,n,r,o,1)},e.prototype.updateBPMNConnector=function(e,t,i,n){var r=i.shape;return void 0!==r.sequence&&(e=this.getSequence(e,t,i,n)),void 0!==r.association&&(e=this.getAssociation(e,t,i,n)),void 0!==r.message&&(e=this.getMessage(e,t,i,n)),e},e.prototype.getSequence=function(e,t,i,n){if("Normal"===i.shape.sequence&&(n.connectorPropertyChange(e,t,{type:"Straight",targetDecorator:{shape:"Arrow",style:{fill:"black"}}}),e.wrapper.children[3].visible=!1),"Default"===i.shape.sequence){n.connectorPropertyChange(e,t,{type:"Straight",targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"None"}});var r=new Ue,o=(new Ue,void 0);r=e.getSegmentElement(e,r);for(var a=e.intermediatePoints,s=0;s<a.length-1;s++)length+=e.distance(a[s],a[s+1]),o=e.findPath(a[s],a[s+1]);e.wrapper.children[3].data=o[0],e.wrapper.children[3].id=e.id+"_"+i.shape.sequence,e.wrapper.children[3].offsetX=o[1].x,e.wrapper.children[3].offsetY=o[1].y,e.wrapper.children[3].rotateAngle=45,e.wrapper.children[3].transform=le.Self}return"Conditional"===i.shape.sequence&&(n.connectorPropertyChange(e,t,{type:"Straight",targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"Diamond",width:20,height:10,style:{fill:"white"}}}),e.wrapper.children[3].visible=!1),e},e.prototype.getAssociation=function(e,t,i,n){return"Default"===i.shape.association&&n.connectorPropertyChange(e,t,{type:"Straight",style:{strokeDashArray:"None"},targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"None"}}),"Directional"===i.shape.association&&n.connectorPropertyChange(e,t,{type:"Straight",style:{strokeDashArray:"2 2"},targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"None"}}),"BiDirectional"===i.shape.association&&n.connectorPropertyChange(e,t,{type:"Straight",style:{strokeDashArray:"2 2"},targetDecorator:{shape:"Arrow",style:{fill:"black"}},sourceDecorator:{shape:"Arrow",width:5,height:10,style:{fill:"white"}}}),e},e.prototype.getMessage=function(e,t,i,n){var r,o;if("Default"===t.shape.message){if(void 0!==i.shape.message){if("InitiatingMessage"===i.shape.message||"NonInitiatingMessage"===i.shape.message){var a=new Ue;a=e.getSegmentElement(e,a);for(var s=e.intermediatePoints,l=0;l<s.length-1;l++){length+=e.distance(s[l],s[l+1]);var c=.5*length;length>=c&&(r=Lt(s[l],s[l+1]),o=E.transform(s[l],r,c))}}e.wrapper.children[3].id=e.id+"_"+i.shape.message,e.wrapper.children[3].width=25,e.wrapper.children[3].height=15,e.wrapper.children[3].data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",e.wrapper.children[3].horizontalAlignment="Center",e.wrapper.children[3].verticalAlignment="Center",e.wrapper.children[3].transform=le.Self,e.wrapper.children[3].style.fill="NonInitiatingMessage"===i.shape.message?"lightgrey":"white",e.wrapper.children[3].offsetX=o.x,e.wrapper.children[3].offsetY=o.y}}else"NonInitiatingMessage"===t.shape.message&&"InitiatingMessage"===t.shape.message||("Default"!==i.shape.message?e.wrapper.children[3].style.fill="NonInitiatingMessage"===i.shape.message?"lightgrey":"white":e.wrapper.children[3].visible=!1);return e},e.prototype.setSizeForBPMNEvents=function(e,t,i,n){t.children[0].width=i,t.children[0].height=n;var r=t.children[1];r.width=.85*i,r.height=.85*n;var o=t.children[2];"Message"===e.trigger?(o.width=.54*i,o.height=.4*n):(o.width=.5*i,o.height=.5*n)},e.prototype.updateAnnotationDrag=function(e,t,i,n){var r=e.id.split("_");if("textannotation"===r[1])for(var o=void 0,a=0;a<e.inEdges.length;a++){var s=t.nameTable[e.inEdges[a]];s&&(o=t.nameTable[s.sourceID]);var l={x:e.offsetX+i,y:e.offsetY+n},c=s.sourcePoint,d=E.findLength(l,c),h=E.findAngle(c,l);if(o.shape.annotations)for(var p=0;p<o.shape.annotations.length;p++)if(o.shape.annotations[p].id===r[r.length-1])return o.shape.annotations[p].length=d,o.shape.annotations[p].angle=h,this.setAnnotationPath(o.wrapper.bounds,e.wrapper,l,e),!1}return!!e.processId&&(this.drag(e,i,n,t),!0)},e.prototype.getAnnotationPathAngle=function(e,t){var i=0;switch(Gt(e,t,t)){case"Right":i=0;break;case"Left":i=180;break;case"Bottom":i=90;break;case"Top":i=270}return i},e.prototype.setSizeForBPMNGateway=function(e,t,i,n){t.children[0].width=i,t.children[0].height=n,t.children[1].width=.45*i,t.children[1].height=.45*n},e.prototype.setSizeForBPMNDataObjects=function(e,t,i,n){t.children[0].width=i,t.children[0].height=n},e.prototype.setSizeForBPMNActivity=function(e,t,i,n,r){t.children[0].width=i,t.children[0].height=n,t.children[0].children[0].width=i,t.children[0].children[0].height=n,"Transaction"===e.subProcess.type&&(t.children[0].children[1].width=Math.max(i-6,1),t.children[0].children[1].height=Math.max(n-6,1),t.children[0].children[2].width=i,t.children[0].children[2].height=n);var o,a,s=new Le,l=this.getSize(r,s),c=12*(a="Task"===e.activity?this.getTaskChildCount(r):this.getSubprocessChildCount(r)),d=(i||l.width)/2;o=1===a?d-6:d-c/2-4*(a-1)/2;for(var h=0;h<t.children[0].children.length;h++)t.children[0].children[h].visible&&(t.children[0].children[h].id.indexOf("_loop")>-1||t.children[0].children[h].id.indexOf("_0_compensation")>-1||t.children[0].children[h].id.indexOf("_0_adhoc")>-1||t.children[0].children[h].id.indexOf("_0_collapsed")>-1)&&(t.children[0].children[h].margin.left=o,o+=t.children[0].children[h].actualSize.width+4)},e.prototype.updateDiagramContainerVisibility=function(e,t){if(e instanceof ze)for(var i=0;i<e.children.length;i++)this.updateDiagramContainerVisibility(e.children[i],t);e.visible=t},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"Bpmn"}}();function Sp(e){return Ep[e.toString()]}function Cp(e){return Tp[e.toString()]}function Pp(e){return Ap[e.toString()]}function jp(e){return Dp[e.toString()]}function Ip(e){return kp[e.toString()]}var Ep={Event:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Message:"M0,0L19.8,12.8L40,0L0,0L0,25.5L40,25.5L40,0z",DataSource:"M 0 10.6 c 0 5.9 16.8 10.6 37.5 10.6 S 75 16.4 75 10.6 v 0 v 68.9 v -0.1 C 75 85.3 58.2 90 37.5 90 S 0 85.3 0 79.4 l 0 0.1 V 56 V 40.6 L 0 10.6 C 0 4.7 16.8 0 37.5 0 S 75 4.7 75 10.6 S 58.2 21.2 37.5 21.2S 0 16.5 0 10.6 l 0 6.7 v -0.2 c 0 5.9 16.8 10.6 37.5 10.6 S 75 22.9 75 17.1 v 6.8 v -0.1 c 0 5.9 -16.8 10.6 -37.5 10.6 S 0 29.6 0 23.8",SubProcess:"M100,100 h200 a20,20 0 0 1 20,20 v200 a20,20 0 0 1 -20,20 h-200 a20,20 0 0 1 -20,-20 v-200 a20,20 0 0 1 20,-20 z",collapsedShape:"M 8.13789 15 H 0 V 0 H 8.13789 V 15 Z M 0.625991 13.75 H 7.51189 V 1.25 H 0.625991 V 13.75 Z M 2.18095 7.03125 L 5.95631 7.03125 L 5.95631 7.46875 L 2.18095 7.46875 Z M 3.8342 3.73 L 4.30369 3.73 L 4.30369 11.2687 L 3.8342 11.2687 Z"},Tp={Message:"M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",Timer:"M40,20c0,8.654-5.496,16.024-13.189,18.81C24.685,39.58,22.392,40,20,40C8.954,40,0,31.046,0,20S8.954,0,20,0S40,8.954,40,20z M20,0 L20,2.583 L20,5.283 M10.027,2.681L11.659,5.507 L12.669,7.257 M2.731,9.989 L6.014,11.885 L7.307,12.631 M0.067,19.967 L2.667,19.967 L5.35,19.967M2.748,29.939 L5.731,28.217 L7.323,27.298 M10.056,37.236 L11.292,35.095 L12.698,32.66 M20.033,39.9 L20.033,36.417 L20.033,34.617M30.006,37.219 L28.893,35.292 L27.364,32.643 M37.302,29.911 L34.608,28.355 L32.727,27.269M39.967,19.933 L37.417,19.933 L34.683,19.933 M37.286,9.961 L34.583,11.521 L32.71,12.602 M29.977,2.664 L28.653,4.957 L27.336,7.24 M22.104,8.5 L19.688,20 L24.75,20 L31.604,20 L24.75,20 L19.688,20z",Error:"M 23.77 18.527 l -7.107 27.396 l 8.507 -17.247 L 36.94 40.073 l 6.394 -25.997 l -8.497 15.754 L 23.77 18.527 Z",Escalation:"M 30.001 8.098 L 11.842 43.543 l 18.159 -18.882 l 18.162 18.882 L 30.001 8.098 Z ",Cancel:"M 3.5 16 L 0 12.6 L 4.6 8 L 0 3.5 L 3.4 0 L 8 4.6 l 4.5 -4.5 L 16 3.5 L 11.5 8 l 4.5 4.5 l -3.4 3.5 L 8 11.4 L 3.5 16 Z",Compensation:"M 25.7086 0 L 0 25 L 25.7086 50 V 26.3752 L 50 50 V 0 L 25.7086 23.6248 V 0 Z ",Conditional:"M 0 0 H 16 V 16 H 0 z M 1.14 3.2 H 14.85 M 1.14 6.4 H 14.85 M 1.14 9.6 H 14.85 M 1.14 12.8 H 14.85",Link:"M 32.014 19.258 v 5.992 H 9.373 v 9.504 h 22.641 v 5.988 L 50.622 30 L 32.014 19.258 Z",Signal:"M 50 50 H 0 L 25.0025 0 L 50 50 Z",Terminate:"M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",Multiple:"M 17.784 48.889 H 42.21 l 7.548 -23.23 L 29.997 11.303 L 10.236 25.658 L 17.784 48.889 Z",Parallel:"M 27.276 49.986 h 5.58 v -17.15 h 17.146 V 27.17 h -17.15 l 0.004 -17.15 h -5.58 l -0.004 17.15 H 9.994 v 5.666 h 17.278 L 27.276 49.986 Z"},Ap={None:"",Exclusive:"M 11.196 29.009 l 6.36 -9.712 l -5.764 -8.899 h 4.393 l 3.732 5.979 l 3.656 -5.979 h 4.354 l -5.789 9.039l 6.36 9.572 h -4.532 l -4.126 -6.437 l -4.139 6.437 H 11.196 Z",Inclusive:"M 20.323 31.333 c -6.625 0 -12.015 -5.39 -12.015 -12.015 s 5.39 -12.015 12.015 -12.015 s 12.016 5.39 12.016 12.015 S 26.948 31.333 20.323 31.333 Z M 20.323 9.303 c -5.522 0 -10.015 4.493 -10.015 10.015 s 4.492 10.015 10.015 10.015 s 10.016 -4.493 10.016 -10.015 S 25.846 9.303 20.323 9.303 Z",Parallel:"M 18.394 29.542 v -8.833 H 9.626 v -3.691 h 8.768 V 8.251 h 3.734 v 8.767 h 8.768 v 3.691 h -8.768 v 8.833 H 18.394 Z",Complex:"M29.198,19.063L23.089,19.063L27.794,14.358L26.38,12.944L21.223,18.101L21.223,10.443L19.223,10.443L19.223,17.976L14.022,12.776L12.608,14.19L17.48,19.063L10.365,19.063L10.365,21.063L18.261,21.063L12.392,26.932L13.806,28.346L19.223,22.929L19.223,30.225L21.223,30.225L21.223,22.805L25.925,27.507L27.339,26.093L22.309,21.063L29.198,21.063z",EventBased:"M 20.322 29.874 c -5.444 0 -9.873 -4.43 -9.873 -9.874 s 4.429 -9.874 9.873 -9.874 s 9.874 4.429 9.874 9.874 S 25.767 29.874 20.322 29.874 Z M 20.322 32.891 c -7.107 0 -12.89 -5.783 -12.89 -12.891 c 0 -7.107 5.782 -12.89 12.89 -12.89 c 7.108 0 12.891 5.783 12.891 12.89 C 33.213 27.108 27.431 32.891 20.322 32.891 Z M 24.191 25.386 h -7.984 l -2.469 -7.595 l 6.461 -4.693 l 6.461 4.693 L 24.191 25.386 Z",ExclusiveEventBased:"M 30 15 C 30 23.28 23.28 30 15 30 S 0 23.28 0 15 S 6.72 0 15 0 S 30 6.72 30 15 z M 15 5 L 5 12.5 L 8 22.5 H 22 L 25 12.5 z",ParallelEventBased:"M 35 17.5 C 35 27.16 27.16 35 17.5 35 S 0 27.16 0 17.5 S 7.84 0 17.5 0 S 35 7.84 35 17.5 z M 14.58 5.83 V 14.58 H 5.83 V 20.42 H 14.58 V 29.17 H 20.42 V 20.42 H 29.17 V 14.58 H 20.42 V 5.83 z"},Dp={None:"",Service:"M 32.699 20.187 v -4.005 h -3.32 c -0.125 -0.43 -0.292 -0.83 -0.488 -1.21 l 2.373 -2.375 l -2.833 -2.83 l -2.333 2.333 c -0.44 -0.253 -0.9 -0.448 -1.387 -0.595 v -3.32 h -4.003 v 3.32 c -0.46 0.137 -0.890.322 -1.3 0.537 l -2.285 -2.275 l -2.833 2.83 l 2.285 2.278 c -0.235 0.42 -0.41 0.847 -0.547 1.307 h -3.33 v 4.005 h 3.33 c 0.148 0.488 0.343 0.955 0.588 1.395 l -2.325 2.325 l 2.822 2.832 l 2.373 -2.382 c 0.392 0.205 0.792 0.37 1.212 0.497 v 3.33 h 4.003 v -3.33 c 0.46 -0.138 0.89 -0.323 1.3 -0.547 l 2.43 2.432 l 2.822 -2.832 l -2.42 -2.422 c 0.222 -0.41 0.4 -0.85 0.535-1.297 H 32.699 Z M 22.699 21.987 c -2.1 0 -3.803 -1.703 -3.803 -3.803 c 0 -2.1 1.703 -3.803 3.803 -3.803 c 2.1 0 3.803 1.703 3.803 3.803 C 26.502 20.285 24.8 21.987 22.699 21.987 Z",Receive:"M 12.217 12.134 v 13.334 h 20 V 12.134 H 12.217 Z M 30.44 13.007 l -8.223 5.35 l -8.223 -5.35 H 30.44 Z M 13.09 24.594 V 13.459 l 9.127 5.94 l 9.127 -5.94 v 11.135 H 13.09 Z",Send:"M 45.7256 3.16055 L 25 23.4017 L 4.27442 3.16055 H 45.7256 Z M 47.8963 46.8413 H 2.10375 V 4.80813 L 25 27.1709 L 47.8963 4.80813 V 46.8413 Z",InstantiatingReceive:"M 16.306 17.39 v 8.79 h 13.198 v -8.79 H 16.306 Z M 28.375 17.946 l -5.47 3.558 l -5.47 -3.558 H 28.375 Z M 28.948 25.625 H 16.861 v -7.389 l 6.043 3.931 l 6.043 -3.931 V 25.625 Z M 22.905 11.785c -5.514 0 -9.999 4.486 -9.999 10 c 0 5.514 4.485 10 9.999 10 s 9.999 -4.486 9.999 -10 C 32.904 16.272 28.419 11.785 22.905 11.785 Z M 22.905 31.239 c -5.212 0 -9.453 -4.241 -9.453 -9.454c 0 -5.212 4.241 -9.453 9.453 -9.453 s 9.452 4.241 9.452 9.453 C 32.357 26.998 28.117 31.239 22.905 31.239 Z",Manual:"M 13.183 15.325 h 2.911 c 0.105 0 0.207 -0.043 0.281 -0.117 c 0.078 -0.074 0.117 -0.176 0.117 -0.281c 0 -0.753 0.718 -1.362 1.596 -1.362 h 2.579 c -0.117 0.227 -0.191 0.48 -0.195 0.757 c 0 0.433 0.168 0.851 0.46 1.144 c 0.008 0.004 0.015 0.011 0.019 0.015 c -0.289 0.285 -0.475 0.691 -0.479 1.148 c 0 0.433 0.168 0.846 0.46 1.139 c 0.011 0.012 0.023 0.02 0.035 0.032 c -0.301 0.281 -0.491 0.694 -0.495 1.155 c 0 0.432 0.168 0.847 0.46 1.143c 0.265 0.266 0.612 0.414 0.975 0.414 h 0.839 c 0.027 0.004 0.051 0.012 0.074 0.012 h 8.443 c 0.352 0 0.636 0.344 0.636 0.761 c 0 0.414 -0.285 0.753 -0.636 0.753 h -6.687 c -0.019 0 -0.035 -0.008 -0.051 -0.008h -2.27 c -0.121 -0.835 -0.667 -1.187 -1.795 -1.187 h -2.158 c -0.223 0 -0.402 0.18 -0.402 0.403c 0 0.219 0.179 0.398 0.402 0.398 h 2.158 c 0.972 0 1.019 0.203 1.019 0.784 c 0 0.219 0.179 0.399 0.402 0.399 c 0.008 0 0.016 -0.004 0.027 -0.004 c 0.028 0.004 0.055 0.016 0.082 0.016 h 2.56 c 0.34 0.015 0.616 0.343 0.616 0.752c 0 0.418 -0.285 0.757 -0.636 0.761 h -0.004 h -6.442 c -0.878 0 -1.595 -0.639 -1.595 -1.427 v -0.683 c 0 -0.109 -0.043 -0.211 -0.114 -0.285 c -0.078 -0.074 -0.179 -0.117 -0.285 -0.117 h -0.004 l -2.989 0.027 c -0.223 0 -0.398 0.184 -0.398 0.402 c 0 0.219 0.179 0.395 0.398 0.395 h 0.004 l 2.591 -0.02 v 0.282 c 0 1.229 1.073 2.223 2.391 2.223 h 3.895 c 0.004 0 0.007 0.004 0.011 0.004 h 2.536 c 0.792 0 1.436 -0.698 1.436 -1.561 c 0 -0.273 -0.07 -0.53 -0.188 -0.752 h 5.49 c 0.792 0 1.436 -0.695 1.436 -1.553 c 0 -0.858 -0.644 -1.557 -1.436 -1.557h -3.566 c 0.121 -0.226 0.199 -0.487 0.199 -0.768 c 0 -0.468 -0.195 -0.882 -0.495 -1.167c 0.301 -0.285 0.495 -0.698 0.495 -1.163 c 0 -0.456 -0.191 -0.866 -0.483 -1.152 c 0.293 -0.285 0.483 -0.694 0.483 -1.151c 0 -0.858 -0.647 -1.557 -1.439 -1.557 h -8.373 c -1.167 0 -2.142 0.757 -2.352 1.76 l -2.548 -0.004 c -0.219 0 -0.399 0.18 -0.399 0.403 C 12.784 15.145 12.964 15.325 13.183 15.325 L 13.183 15.325 Z M 21.907 19.707 c -0.191 0 -0.328 -0.094 -0.41 -0.176 c -0.144 -0.145 -0.226 -0.355 -0.226 -0.577 c 0.003 -0.418 0.289 -0.753 0.643 -0.753 h 4.468 c 0.008 0 0.015 -0.004 0.027 -0.008 h 0.051 c 0.351 0 0.636 0.344 0.636 0.761 c 0 0.414 -0.286 0.753 -0.636 0.753 H 21.907 Z M 27.097 16.629 c 0 0.414 -0.286 0.753 -0.64 0.753 h -4.464 c -0.004 0 -0.004 0 -0.004 0 h -0.082c -0.191 0 -0.328 -0.098 -0.414 -0.18 c -0.14 -0.145 -0.222 -0.352 -0.222 -0.573 c 0 -0.413 0.285 -0.749 0.631 -0.753h 3.434 c 0 0 0 0 0.004 0 h 1.116 c 0.008 0 0.012 -0.004 0.02 -0.004 C 26.819 15.887 27.097 16.215 27.097 16.629L 27.097 16.629 Z M 27.097 14.322 c 0 0.41 -0.278 0.737 -0.62 0.749 c -0.008 0 -0.012 0 -0.016 0 h -3.637 c -0.008 0 -0.015 0.004 -0.023 0.004 h -0.886 c -0.004 0 -0.008 0 -0.012 0 c -0.187 0 -0.324 -0.094 -0.406 -0.176c -0.144 -0.144 -0.226 -0.355 -0.226 -0.577 c 0.003 -0.414 0.293 -0.753 0.643 -0.753 h 4.468 c 0.008 0 0.015 -0.004 0.027 -0.004 h 0.051 C 26.811 13.565 27.097 13.905 27.097 14.322 L 27.097 14.322 Z M 27.097 14.322",BusinessRule:"M 32.844 13.245 h -0.089 v 0 H 13.764 v -0.015 h -1.009 v 16.989 h 0.095 v 0.011 h 19.716 v -0.011 h 0.278 V 13.245 Z M 31.844 14.229 v 4.185 h -18.08 v -4.185 H 31.844 Z M 18.168 25.306 v 3.938 h -4.404 v -3.938 H 18.168 Z M 13.764 24.322 v -4.923 h 4.404 v 4.923 H 13.764 Z M 19.177 25.306 h 12.667 v 3.938 H 19.177 V 25.306 Z M 19.177 24.322v -4.923 h 12.667 v 4.923 H 19.177 Z",User:"M 21.762 21.935 c 2.584 0 4.687 -2.561 4.687 -5.703 c 0 -3.147 -2.103 -5.703 -4.687 -5.703 c -1.279 0 -2.475 0.61-3.363 1.721 c -0.855 1.071 -1.327 2.484 -1.324 3.983 C 17.075 19.374 19.178 21.935 21.762 21.935 L 21.762 21.935 ZM 21.762 11.779 c 1.894 0 3.436 1.995 3.436 4.452 c 0 2.453 -1.541 4.452 -3.436 4.452 c -1.895 0 -3.44 -1.999 -3.44 -4.452C 18.323 13.774 19.864 11.779 21.762 11.779 L 21.762 11.779 Z M 25.699 21.309 c -0.348 0 -0.626 0.277 -0.626 0.626 c 0 0.344 0.277 0.622 0.626 0.622 c 2.136 0 3.875 1.74 3.875 3.879 c 0 0.272 -0.227 0.498 -0.501 0.498 H 14.447 c -0.274 0 -0.497 -0.223 -0.497 -0.498 c 0 -2.139 1.736 -3.879 3.872 -3.879 c 0.344 0 0.625 -0.277 0.625 -0.622 c 0 -0.348 -0.28 -0.626-0.625 -0.626 c -2.826 0 -5.124 2.297 -5.124 5.126 c 0 0.965 0.784 1.749 1.748 1.749 h 14.626 c 0.964 0 1.748 -0.7841.748 -1.749 C 30.822 23.606 28.524 21.309 25.699 21.309 L 25.699 21.309 Z M 22.217 9.832 c 0.448 -0.263 0.924 -0.396 1.419 -0.396 c 1.895 0 3.436 1.995 3.436 4.452 c 0 0.439 -0.048 0.873 -0.143 1.284 c -0.08 0.336 0.128 0.672 0.464 0.751 c 0.048 0.012 0.098 0.019 0.143 0.019 c 0.284 0 0.541 -0.195 0.608 -0.483 c 0.119 -0.506 0.18 -1.034 0.18 -1.571c 0 -3.147 -2.102 -5.703 -4.687 -5.703 c -0.711 0 -1.419 0.198 -2.054 0.573 c -0.296 0.174 -0.397 0.559 -0.219 0.855C 21.536 9.911 21.921 10.009 22.217 9.832 L 22.217 9.832 Z M 27.697 18.81 c -0.345 0 -0.626 0.277 -0.626 0.622 c 0 0.348 0.281 0.626 0.626 0.626 c 2.137 0 3.75 1.782 3.75 3.918 c 0 0.07 -0.013 0.141 -0.043 0.205 c -0.14 0.314 0.0030.684 0.318 0.823 c 0.082 0.037 0.167 0.055 0.253 0.055 c 0.241 0 0.466 -0.141 0.57 -0.373 c 0.101 -0.226 0.153 -0.464 0.153-0.714 C 32.699 21.15 30.523 18.81 27.697 18.81 L 27.697 18.81 Z M 27.697 18.81",Script:"M 22.453 15.04 c 0 0 -1.194 -3.741 2.548 -3.774 c 0 0 2.497 0.126 1.766 4.321 c -0.008 0.043 -0.015 0.086 -0.024 0.13c -0.806 4.323 -2.516 8.42 -3.193 10.581 h 3.904 c 0 0 0.983 4.581 -2.549 4.968 H 13.292 c 0 0 -3.097 -1.42 -1.517 -5.323 l 3 -10.839 H 11.84 c 0 0 -1.129 -2.902 1.709 -3.806 l 11.425 -0.032 l -0.73 0.355 l -1.193 1.726 L 22.453 15.04 Z M 22.409 12.597 c 0 0 -0.242 0.483 -0.278 0.98 h -9.098 c 0 0 -0.06 -0.871 0.714 -1.041 L 22.409 12.597 Z M 26.341 27.734c 0 0 -0.13 2.678 -2.226 1.871 c 0 0 -0.823 -0.565 -0.758 -1.855 L 26.341 27.734 Z M 22.905 15.008 c 0 0 0.653 -0.258 0.709-1.501 c 0 0 0.145 -1.144 1.483 -0.693 c 0 0 0.808 0.355 0.259 2.404 c 0 0 -2.226 8.5 -3.032 10.339 c 0 0 -1.064 2.646 0.096 4.226 h -8.581 c 0 0 -1.806 -0.452 -0.741 -3.613 c 0 0 2.935 -9.549 3.193 -11.162 L 22.905 15.008 Z"},kp={None:"",Standard:"M 52.002 73.379 c -2.494 -2.536 -6.55 -2.534 -9.043 0 c -1.208 1.228 -1.874 2.861 -1.874 4.598 c 0 1.225 0.337 2.395 0.957 3.411 l -1.167 1.186 l 2.071 0.458 l 2.071 0.458 l -0.45 -2.106 l -0.45 -2.106 l -1.292 1.314c -1.119 -2.065 -0.842 -4.709 0.877 -6.458 c 2.084 -2.119 5.475 -2.117 7.557 0 c 2.083 2.119 2.083 5.565 0 7.685c -0.976 0.992 -2.272 1.557 -3.65 1.59 l 0.025 1.068 c 1.65 -0.041 3.2 -0.716 4.368 -1.903 c 1.208 -1.228 1.874 -2.861 1.874 -4.597 C 53.875 76.24 53.209 74.607 52.002 73.379 Z",ParallelMultiInstance:"M 51.5,69.5 L52.5,69.5 L52.5,84.5 L51.5 84.5 Z M 46.5,69.5 L47.5,69.5 L47.5,84.5 L46.5 84.5 Z M 41.5,69.5 L42.5,69.5 L42.5,84.5 L41.5 84.5 Z  ",SequenceMultiInstance:"M 40.375,71.5 L 55.375,71.5 L 55.375,72.5 L 40.375,72.5 Z M 40.375,76.5 L 55.375,76.5 L 55.375,77.5 L 40.375,77.5 Z M 40.375,76.5 L 55.375,76.5 L 55.375,77.5 L 40.375,77.5 Z M 40.375,81.5 L 55.375,81.5L 55.375,82.5 L 40.375,82.5 Z"},Mp=(function(){function e(){}e.prototype.updateBridging=function(e,t){var i,n=[];if(e.bridges=[],function(e,t){return e.constraints&te.Bridging?e.constraints&te.Bridging:e.constraints&te.InheritBridging?t.constraints&ae.Bridging:0}(e,t)){var r=this.getPoints(e);i=_.toBounds(r);for(var o=e.bridgeSpace,a=t.bridgeDirection,s=-1,l=t.connectors,c=0;c<l.length;c++){var d=l[c];if(e&&d&&e.id!==d.id){var h=this.getPoints(d),p=_.toBounds(h);if(this.intersectsRect(i,p)){var u=this.intersect(r,h,!1,a,!0);if(u.length>0)for(var f=0;f<u.length;f++){var g=0,m=0,v=0,y=0,b=this.getLengthAtFractionPoint(e,u[f]);if(-1!==b.pointIndex){m=b.lengthFractionIndex,g=b.fullLength,v=b.segmentIndex,y=b.pointIndex;var w=this.getPointAtLength(m-o/2,r),x=this.getPointAtLength(m+o/2,r);(m+o/2)/g,this.isEmptyPoint(x)&&(x=w);var O,S=void 0;O=e.sourcePoint,S="Straight"===e.type?e.targetPoint:e.intermediatePoints[y];var C=this.angleCalculation(O,S);if(n.length){var P;P=e.sourcePoint;var j=Math.abs(this.lengthCalculation(P,x)),I=-1;s=-1;for(var E=0;E<n[v].bridges.length;E++){s++;var T=n[v].bridges[E];if(j<Math.abs(this.lengthCalculation(P,T.endPoint))){I=s;break}}if(I>=0){var A=void 0;(A=this.createSegment(w,x,C,a,y,e,t)).target=d.id,n[v].bridges.splice(I,0,A),n[v].bridges.join(),n[v].bridgeStartPoint.splice(I,0,w),n[v].bridgeStartPoint.join(),n[v].segmentIndex=v}else{A=void 0;(A=this.createSegment(w,x,C,a,y,e,t)).target=d.id,n[v].bridges.push(A),n[v].bridgeStartPoint.push(w),n[v].segmentIndex=v}}else if(!isNaN(w.x)&&!isNaN(w.y)&&!this.isEmptyPoint(x)){var D=void 0,k={bridges:[],bridgeStartPoint:[],segmentIndex:v};(D=this.createSegment(w,x,C,a,y,e,t)).target=d.id;var M=[];M.push(w),[].push(x),n[v]=k,n[v].bridges.push(D),n[v].bridgeStartPoint=M,n[v].segmentIndex=v}}}}}}0!==n.length&&this.firstBridge(n,e,o)}},e.prototype.firstBridge=function(e,t,i){for(var n=0;n<e.length;n++){for(var r=e[n],o=1;o<r.bridges.length;o++)if(E.findLength(r.bridges[o].endPoint,r.bridges[o-1].endPoint)<i){r.bridges[o-1].endPoint=r.bridges[o].endPoint;var a=r.bridges[o-1],s=this.createBridgeSegment(a.startPoint,a.endPoint,a.angle,i,a.sweep);r.bridges[o-1].path=s,r.bridges.splice(o,1),r.bridgeStartPoint.splice(o,1),o--}t.sourcePoint;for(var l=0;l<r.bridges.length;l++){(a=r.bridges[l]).endPoint,t.bridges.push(a)}}},e.prototype.createSegment=function(e,t,i,n,r,o,a){var s,l,c={angle:0,endPoint:{x:0,y:0},target:"",path:"",segmentPointIndex:-1,startPoint:{x:0,y:0},sweep:1,rendered:!1};return l=this.sweepDirection(i,n,o,a),s=this.createBridgeSegment(e,t,i,o.bridgeSpace,l),c.path=s,c.startPoint=e,c.endPoint=t,c.angle=i,c.segmentPointIndex=r,c.sweep=l,c},e.prototype.createBridgeSegment=function(e,t,i,n,r){return"A "+n/2+" "+n/2+" "+i+" , 1 "+r+" "+t.x+","+t.y},e.prototype.sweepDirection=function(e,t,i,n){var r,o=Math.abs(e);switch(t){case"Top":case"Bottom":r=1,o>=0&&o<=90&&(r=0);break;case"Left":case"Right":r=1,e<0&&e>=-180&&(r=0)}return"Right"!==t&&"Bottom"!==t||(r=0===r?1:0),r},e.prototype.getPointAtLength=function(e,t){for(var i,n=0,r={x:0,y:0},o=0;o<t.length;o++){var a=t[o];if(i){var s=this.lengthCalculation(i,a);if(n+s>e){var l=e-n,c=E.findAngle(i,a),d=l*Math.cos(c*Math.PI/180),h=l*Math.sin(c*Math.PI/180);r={x:i.x+d,y:i.y+h};break}n+=s,i=a}else i=a}return r},e.prototype.getPoints=function(e){var t=[];if(e.intermediatePoints&&("Straight"===e.type||"Orthogonal"===e.type))for(var i=0;i<e.intermediatePoints.length;i++)t.push(e.intermediatePoints[i]);return t},e.prototype.intersectsRect=function(e,t){return t.x<e.x+e.width&&e.x<t.x+t.width&&t.y<e.y+e.height&&e.y<t.y+t.height},e.prototype.intersect=function(e,t,i,n,r){i&&t.length>=2&&(t.splice(0,1),t.splice(0,1));for(var o=[],a=0;a<e.length-1;a++){var s=this.inter1(e[a],e[a+1],t,r,n);if(s.length>0)for(var l=0;l<s.length;l++)o.push(s[l]);i&&t.length>=1&&t.splice(0,1)}return o},e.prototype.inter1=function(e,t,i,n,r){for(var o=[],a=0;a<i.length-1;a++){var s=Fa(e,t,i[a],i[a+1]);if(!this.isEmptyPoint(s)){var l=this.angleCalculation(e,t),c=this.angleCalculation(i[a],i[a+1]);switch(l=this.checkForHorizontalLine(l),c=this.checkForHorizontalLine(c),r){case"Left":case"Right":l>c&&o.push(s);break;case"Top":case"Bottom":l<c&&o.push(s)}l===c&&n&&o.push(s)}}return o},e.prototype.checkForHorizontalLine=function(e){var t=Math.abs(e);return t>90?180-t:t},e.prototype.isEmptyPoint=function(e){return 0===e.x&&0===e.y},e.prototype.getLengthAtFractionPoint=function(e,t){for(var i=100,n=-1,r=0,o=-1,a=0,s=0,l=e.sourcePoint,c=l,d=[],h=0;h<e.intermediatePoints.length;h++){var p=e.intermediatePoints[h];d.push(p)}for(var u=0;u<d.length;u++){var f=d[u],g=this.getSlope(f,l,t,e);g<i&&(i=g,s=r+this.lengthCalculation(t,c),o=a,n=u),r+=E.findLength(f,l),l=f,c=f}return a++,{lengthFractionIndex:s,fullLength:r,segmentIndex:o,pointIndex:n}},e.prototype.getSlope=function(e,t,i,n){var r=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y),a=(i.y-e.y)/(t.y-e.y),s=(i.x-e.x)/(t.x-e.x);if(!isFinite(a)||!isFinite(s)||isNaN(a)||isNaN(s)){if(e.x===t.x){if(e.y===t.y)return 1e4;if(e.y>i.y&&i.y>t.y||e.y<i.y&&i.y<t.y)return Math.abs(e.x-i.x)}else if(e.y===t.y&&(e.x>i.x&&i.x>t.x||e.x<i.x&&i.x<t.x))return Math.abs(e.y-i.y)}else if((e.x>=i.x&&i.x>=t.x||e.x<=i.x&&i.x<=t.x||r<3)&&(e.y>=i.y&&i.y>=t.y||e.y<=i.y&&i.y<=t.y||o<3))return Math.abs(a-s);return 1e4},e.prototype.angleCalculation=function(e,t){var i=e.x-t.x,n=e.y-t.y;return Math.atan2(n,i)*(180/Math.PI)},e.prototype.lengthCalculation=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"Bridging"}}(),function(){function e(e){this.line=[],this.diagram=e}e.prototype.canSnap=function(){return 0!==(this.diagram.snapSettings.constraints&(Q.SnapToObject|Q.SnapToLines))},e.prototype.snapPoint=function(e,t,i,n,r,o,a){var s=this.diagram.snapSettings,l=this.diagram.scroller.currentZoom,c={x:0,y:0},d=pc(t.wrapper),h={snapped:!1,offset:0},p={snapped:!1,offset:0};if(this.diagram.snapSettings.constraints&Q.SnapToObject){var u=void 0;(u=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id","_SnappingLines"),u.setAttribute("shapeRendering","crispEdges"),this.getAdornerLayerSvg().appendChild(u),this.snapObject(e,t,u,h,p,r,o===a)}var f=d.x+r.x,g=d.y+r.y,m=d.x+d.width+r.x,v=d.y+d.height+r.y,y=s.verticalGridlines.scaledIntervals,b=this.round(m,y,l),w=this.round(f,y,l);y=s.horizontalGridlines.scaledIntervals;var x=this.round(g,y,l),O=this.round(v,y,l),S=d.x+d.width,C=d.y+d.height;return h.snapped?this.diagram.snapSettings.constraints&Q.SnapToObject?c.x=h.offset:c.x=a.x-o.x:this.diagram.snapSettings.constraints&Q.SnapToVerticalLines?Math.abs(r.x)>=1&&(i?Math.abs(b-S)>Math.abs(w-d.x)?c.x+=w-d.x:c.x+=b-S:Math.abs(b-S)<Math.abs(w-d.x)?c.x+=b-S:c.x+=w-d.x):c.x=a.x-o.x,p.snapped?c.y=p.offset:this.diagram.snapSettings.constraints&Q.SnapToHorizontalLines?Math.abs(r.y)>=1&&(n?Math.abs(O-C)>Math.abs(x-d.y)?c.y+=x-d.y:c.y+=O-C:Math.abs(O-C)<Math.abs(x-d.y)?c.y+=O-C:c.y+=x-d.y):c.y=a.y-o.y,c},e.prototype.round=function(e,t,i){i=1===i?Math.pow(2,Math.floor(Math.log(i)/Math.log(2))):i;var n=0,r=0;for(r=0;r<t.length;r++)n+=t[r];var o=e%(n/=i),a=Math.floor(Math.abs(e)/n)*n;if(a!==e)if(e>=0)for(r=0;r<t.length;r++){if(o<=t[r]/i)return a+(o<t[r]/(2*i)?0:t[r]/i);a+=t[r]/i,o-=t[r]/i}else for(a*=-1,r=t.length-1;r>=0;r--){if(Math.abs(o)<=t[r]/i)return a-(Math.abs(o)<t[r]/(2*i)?0:t[r]/i);a-=t[r]/i,o+=t[r]/i}return e},e.prototype.snapObject=function(e,t,i,n,r,o,a){var s,l,c,d=null,h=this.diagram.scroller,p=this.diagram.snapSettings,u=[],f=[],g=[],m=[],v=pc(t.wrapper),y=e.scroller.currentZoom,b=-h.horizontalOffset,w=-h.verticalOffset,x=p.snapObjectDistance/y,O=new _(0,0,h.viewPortWidth,h.viewPortHeight),S=new _(b/y,v.y-x-5,O.width/y,v.height+2*x+10),C=new _(v.x-x-5,w/y,v.width+2*x+10,O.height/y);O=new _(b/y,w/y,O.width/y,O.height/y);var P,j,I,E=this.findNodes(e.spatialSearch,t,C,O),T=e.nameTable;for(P=0;P<E.length;P++)j=E[P],this.canBeTarget(e,j)&&(this.diagram.nameTable[j.id]instanceof _r||!this.canConsider(T,t,j)||((I=j.bounds).height+I.y<o.y+v.y?g.push({obj:j,distance:Math.abs(v.y+o.y-I.y-I.height)}):I.y>v.y+o.y+v.height&&m.push({obj:j,distance:Math.abs(v.y+o.y+v.height-I.y)}),(null==d||d>Math.abs(I.y-v.y-o.y))&&(Math.abs(I.x+I.width/2-(v.x+v.width/2+o.x))<=x?(l=this.createSnapObject(I,v,"centerX"),d=Math.abs(I.y-v.y)):Math.abs(I.x+I.width-(v.x+v.width+o.x))<=x?(l=this.createSnapObject(I,v,"right"),d=Math.abs(I.y-v.y)):Math.abs(I.x-(v.x+o.x))<=x?(l=this.createSnapObject(I,v,"left"),d=Math.abs(I.y-v.y)):Math.abs(I.x-(v.x+v.width+o.x))<=x?(l=this.createSnapObject(I,v,"rightLeft"),d=Math.abs(I.y-v.y)):Math.abs(I.x+I.width-(v.x+o.x))<=x&&(l=this.createSnapObject(I,v,"leftRight"),d=Math.abs(I.y-v.y)))));E=this.findNodes(e.spatialSearch,t,S,O);for(var A=0;A<E.length;A++)j=E[A],this.canBeTarget(e,j)&&(this.diagram.nameTable[j.id]instanceof _r||!this.canConsider(T,t,j)||((I=j.bounds).x+I.width<v.x+o.x&&(u[u.length]={obj:j,distance:Math.abs(v.x+o.x-I.x-I.width)}),I.x>v.x+o.x+v.width&&(f[f.length]={obj:j,distance:Math.abs(v.x+o.x+v.width-I.x)}),(null==s||s>Math.abs(I.x-v.x-o.x))&&(Math.abs(I.y+I.height/2-(v.y+v.height/2+o.y))<=x?(c=this.createSnapObject(I,v,"centerY"),s=Math.abs(I.x-v.x)):Math.abs(I.y-v.y-o.y)<=x?(c=this.createSnapObject(I,v,"top"),s=Math.abs(I.x-v.x)):Math.abs(I.y+I.height-(v.y+v.height+o.y))<=x?(c=this.createSnapObject(I,v,"bottom"),s=Math.abs(I.x-v.x)):Math.abs(I.y+I.height-v.y-o.y)<=x?(c=this.createSnapObject(I,v,"topBottom"),s=Math.abs(I.x-v.x)):Math.abs(I.y-(v.y+v.height+o.y))<=x&&(c=this.createSnapObject(I,v,"bottomTop"),s=Math.abs(I.x-v.x)))));this.createGuidelines(e,l,c,i,n,r,a),n.snapped||this.createHSpacingLines(e,i,t,u,f,n,r,a,o,x),r.snapped||this.createVSpacingLines(e,i,t,g,m,n,r,a,o,x)},e.prototype.snapConnectorEnd=function(e){var t=this.diagram.snapSettings,i=this.diagram.scroller.currentZoom;return t.constraints&Q.SnapToLines&&(e.x=this.round(e.x,t.verticalGridlines.scaledIntervals,i),e.y=this.round(e.y,t.horizontalGridlines.scaledIntervals,i)),e},e.prototype.canBeTarget=function(e,t){return t=this.diagram.nameTable[t.id],!od(this.diagram,t,!1)},e.prototype.snapSize=function(e,t,i,n,r,o,a,s){var l,c,d,h,p=this.diagram.snapSettings,u=this.diagram.scroller,f=pc(a.wrapper),g=e.nameTable,m=[],v=[],y=e.scroller.currentZoom,b=-u.horizontalOffset,w=-u.verticalOffset,x=p.snapObjectDistance/y,O=new _(0,0,u.viewPortWidth,u.viewPortHeight),S=new _(b/y,(f.y-5)/y,O.width/y,(f.height+10)/y),C=new _((f.x-5)/y,w/y,(f.width+10)/y,O.height/y);O=new _(b/y,w/y,O.width/y,O.height/y);var P,j,I,E=[],T=this.findNodes(e.spatialSearch,a,C,O,E);for(P=0;P<T.length;P++)j=T[P],!this.canConsider(g,a,j)||this.diagram.nameTable[j.id]instanceof _r||(I=j.bounds,(null==l||l>Math.abs(I.y-f.y))&&(t.left?Math.abs(f.x+r-I.x)<=x?(d=this.createSnapObject(I,f,"left"),l=Math.abs(I.y-f.y)):Math.abs(f.x+r-I.x-I.width)<=x&&(d=this.createSnapObject(I,f,"leftRight"),l=Math.abs(I.y-f.y)):t.right&&(Math.abs(f.x+r+f.width-I.x-I.width)<=x?(d=this.createSnapObject(I,f,"right"),l=Math.abs(I.y-f.y)):Math.abs(f.x+r+f.width-I.x)<=x&&(d=this.createSnapObject(I,f,"rightLeft"),l=Math.abs(I.y-f.y)))));T=this.findNodes(e.spatialSearch,a,S,O);for(var A=0;A<T.length;A++){var D=T[A];if(this.canConsider(g,a,D)&&!(this.diagram.nameTable[D.id]instanceof _r)){var k=D.bounds;(null==c||c>Math.abs(k.x-f.x))&&(i.top?Math.abs(f.y+o-k.y)<=x?(h=this.createSnapObject(k,f,"top"),c=Math.abs(k.x-f.x)):Math.abs(f.y+o-k.y-k.height)<=x&&(h=this.createSnapObject(k,f,"topBottom"),c=Math.abs(k.x-f.x)):i.bottom&&(Math.abs(f.y+f.height+o-k.y-k.height)<=x?(h=this.createSnapObject(k,f,"bottom"),c=Math.abs(k.x-f.x)):Math.abs(f.y+f.height+o-k.y)<=x&&(h=this.createSnapObject(k,f,"bottomTop"),c=Math.abs(k.x-f.x))))}}for(P=0;P<E.length;P++)if(j=E[P],this.canConsider(g,a,j)){var M=j.bounds,L=t.left?-r:r,R=Math.abs(f.width+L-M.width),z=void 0;R<=x&&(z=t.left?-M.width+f.width:M.width-f.width,m[m.length]={source:j,difference:R,offset:z}),L=i.top?-o:o;var N=Math.abs(f.height+L-M.height);N<=x&&(z=i.top?-M.height+f.height:M.height-f.height,v[v.length]={source:j,difference:N,offset:z})}if(!e.getTool)this.createGuidelines(e,d,h,n,t,i,s);!t.snapped&&m.length>0&&(t.left||t.right)&&this.addSameWidthLines(e,n,m,t,s,a),!i.snapped&&v.length>0&&(i.top||i.bottom)&&this.addSameHeightLines(e,n,v,i,s,a)},e.prototype.snapTop=function(e,t,i,n,r,o,a,s){var l,c=r;t.top=!0,e.left=e.right=!1;var d=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&Q.SnapToObject&&!o.rotateAngle&&(l=s.y-s.height*o.pivot.y+r-(o.offsetY-o.height*o.pivot.y),this.snapSize(this.diagram,e,t,i,n,l,this.diagram.selectedItems,a)),t.snapped)c=r-l+t.offset;else if(this.diagram.snapSettings.constraints&Q.SnapToHorizontalLines){var h=s.y-s.height*o.pivot.y,p=h+r;c=this.round(p,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,d)-h}return c},e.prototype.snapRight=function(e,t,i,n,r,o,a,s){var l,c=n;e.right=!0,t.top=t.bottom=!1;var d=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&Q.SnapToObject&&!o.rotateAngle&&(l=s.x+s.width*(1-o.pivot.x)+n-(o.offsetX+o.width*(1-o.pivot.x)),this.snapSize(this.diagram,e,t,i,l,r,this.diagram.selectedItems,a)),e.snapped)c=n-l+e.offset;else if(this.diagram.snapSettings.constraints&Q.SnapToVerticalLines){var h=s.x+s.width*(1-o.pivot.x),p=h+n;c=this.round(p,this.diagram.snapSettings.verticalGridlines.scaledIntervals,d)-h}return c},e.prototype.snapLeft=function(e,t,i,n,r,o,a,s){var l=n,c=0;e.left=!0,t.top=t.bottom=!1;var d=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&Q.SnapToObject&&!o.rotateAngle&&(c=s.x-s.width*o.pivot.x+n-(o.offsetX-o.width*o.pivot.x),this.snapSize(this.diagram,e,t,i,c,r,this.diagram.selectedItems,a)),e.snapped)l=n-c+e.offset;else if(this.diagram.snapSettings.constraints&Q.SnapToVerticalLines){var h=s.x-s.width*o.pivot.x,p=h+n;l=this.round(p,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,d)-h}return l},e.prototype.snapBottom=function(e,t,i,n,r,o,a,s){var l=r;t.bottom=!0,e.left=e.right=!1;var c=this.diagram.scroller.currentZoom,d=0;if(this.diagram.snapSettings.constraints&Q.SnapToObject&&!o.rotateAngle&&(d=s.y+s.height*(1-o.pivot.y)+r-(o.offsetY+o.height*(1-o.pivot.y)),this.snapSize(this.diagram,e,t,i,n,d,this.diagram.selectedItems,a)),pc(o instanceof Be||o instanceof dr?o:o.wrapper),t.snapped)l=r-d+t.offset;else if(this.diagram.snapSettings.constraints&Q.SnapToHorizontalLines){var h=s.y+s.height*(1-o.pivot.y),p=h+r;l=this.round(p,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,c)-h}return l},e.prototype.createGuidelines=function(e,t,i,n,r,o,a){return t&&(r.offset=t.offsetX,r.snapped=!0,a||(t.type,this.renderAlignmentLines(t.start,t.end,n,e.scroller.transform))),i&&(o.offset=i.offsetY,o.snapped=!0,a||(i.type,this.renderAlignmentLines(i.start,i.end,n,e.scroller.transform))),n},e.prototype.renderAlignmentLines=function(e,t,i,n){e={x:(e.x+n.tx)*n.scale,y:(e.y+n.ty)*n.scale},t={x:(t.x+n.tx)*n.scale,y:(t.y+n.ty)*n.scale};var r={stroke:"#07EDE1",strokeWidth:1,startPoint:{x:e.x,y:e.y},endPoint:{x:t.x,y:t.y},fill:"#07EDE1",dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:lc()},o=0;for(this.line.push(r),o=0;o<this.line.length;o++)this.diagram.diagramRenderer.drawLine(i,this.line.pop())},e.prototype.createHSpacingLines=function(e,t,i,n,r,o,a,s,l,c){var d=0;this.sortByDistance(n,"distance",!0),this.sortByDistance(r,"distance",!0);var h,p,u,f,g=[],m=pc(i.wrapper);if(n.length>0&&(g[g.length]=n[0],d=(h=n[0].obj.bounds).y,n.length>1?(u=n[1].obj.bounds,f=h.x-u.x-u.width,Math.abs(f-n[0].distance)<=c?d=this.findEquallySpacedNodesAtLeft(n,f,d,g):f=n[0].distance):f=n[0].distance),this.sortByDistance(g,"distance"),g[g.length]={obj:i,distance:0},d=m.y<d||!d?m.y:d,r.length>0){var v=void 0;if(d=(p=r[0].obj.bounds).y<d?p.y:d,r.length>1&&(v=(u=r[1].obj.bounds).x-p.x-p.width),n.length>0)if(Math.abs(r[0].distance-n[0].distance)<=c){var y=Math.abs(r[0].distance-n[0].distance)/2;r[0].distance<n[0].distance?f-=y:f+=y,g[g.length]=r[0]}else 1===n.length&&(h=void 0,g.splice(0,1),g[g.length]=r[0],f=v);else f=v,g[g.length]=r[0];r.length>1&&p.x+p.width<u.x&&(d=this.findEquallySpacedNodesAtRight(r,v,d,g,c))}if(g.length>2){this.addHSpacingLines(e,t,g,s,d);var b=0;s&&(b=l.x),h?o.offset=f-Math.abs(m.x+b-h.x-h.width)+b:p&&(o.offset=Math.abs(m.x+m.width+b-p.x)-f+b),o.snapped=!0}},e.prototype.createVSpacingLines=function(e,t,i,n,r,o,a,s,l,c){var d=0;this.sortByDistance(n,"distance",!0),this.sortByDistance(r,"distance",!0);var h,p,u,f,g,m=[],v=pc(i.wrapper);if(n.length>0&&(m[m.length]=n[0],d=(h=n[0].obj.bounds).x+h.width,n.length>1?(u=n[1].obj.bounds,f=h.y-u.y-u.height,Math.abs(f-n[0].distance)<=c?d=this.findEquallySpacedNodesAtTop(n,f,d,m):f=n[0].distance):f=n[0].distance),this.sortByDistance(m,"distance"),m[m.length]={obj:i,distance:0},d=v.x+v.width>d||!d?v.x+v.width:d,r.length>0){if(d=(p=r[0].obj.bounds).x+p.width>d?p.x+p.width:d,r.length>1&&(g=(u=r[1].obj.bounds).y-p.y-p.height),n.length>0)if(Math.abs(r[0].distance-n[0].distance)<=c){var y=Math.abs(r[0].distance-n[0].distance)/2;r[0].distance<n[0].distance?f-=y:f+=y,m[m.length]=r[0]}else 1===n.length&&(h=void 0,m.splice(0,1),m[m.length]=r[0],f=g);else f=g,m[m.length]=r[0];r.length>1&&u.y>p.y+p.height&&(d=this.findEquallySpacedNodesAtBottom(r,g,d,m,c))}if(m.length>2){this.addVSpacingLines(e,t,m,s,d);var b=0;s&&(b=l.y),h?a.offset=f-Math.abs(v.y+b-h.y-h.height)+b:p&&(a.offset=Math.abs(v.y+v.height+b-p.y)-f+b),a.snapped=!0}},e.prototype.addHSpacingLines=function(e,t,i,n,r){var o,a,s;if(!n)for(o=0;o<i.length-1;o++){var l=i[o].obj instanceof Dl?pc(i[o].obj.wrapper):i[o].obj.bounds,c=i[o+1].obj instanceof Dl?pc(i[o+1].obj.wrapper):i[o+1].obj.bounds;a={x:l.x+l.width,y:r-15},s={x:c.x,y:r-15},this.renderSpacingLines(a,s,t,this.getAdornerLayerSvg(),e.scroller.transform)}},e.prototype.addVSpacingLines=function(e,t,i,n,r){var o,a;if(!n)for(var s=0;s<i.length-1;s++){var l=i[s].obj instanceof Dl?pc(i[s].obj.wrapper):i[s].obj.bounds,c=i[s+1].obj instanceof Dl?pc(i[s+1].obj.wrapper):i[s+1].obj.bounds;o={x:r+15,y:l.y+l.height},a={x:r+15,y:c.y},this.renderSpacingLines(o,a,t,this.getAdornerLayerSvg(),e.scroller.transform)}},e.prototype.addSameWidthLines=function(e,t,i,n,r,o){this.sortByDistance(i,"offset");var a,s,l,c=pc(o.wrapper),d=i[0],h=d.source.bounds,p=[];for(p.push(i[0]),l=1;l<i.length;l++)i[l].source.bounds.width===h.width&&p.push(i[l]);if(!r)for(a={x:c.x+d.offset,y:c.y-15},s={x:c.x+c.width+d.offset,y:c.y-15},this.renderSpacingLines(a,s,t,this.getAdornerLayerSvg(),e.scroller.transform),l=0;l<p.length;l++)a={x:(c=p[l].source.bounds).x,y:c.y-15},s={x:c.x+c.width,y:c.y-15},this.renderSpacingLines(a,s,t,this.getAdornerLayerSvg(),e.scroller.transform);n.offset=d.offset,n.snapped=!0},e.prototype.addSameHeightLines=function(e,t,i,n,r,o){this.sortByDistance(i,"offset");var a,s,l,c=pc(o.wrapper),d=i[0],h=d.source.bounds,p=[];for(p.push(i[0]),l=0;l<i.length;l++)i[l].source.bounds.height===h.height&&p.push(i[l]);if(!r)for(a={x:c.x+c.width+15,y:c.y+d.offset},s={x:c.x+c.width+15,y:c.y+d.offset+c.height},this.renderSpacingLines(a,s,t,this.getAdornerLayerSvg(),e.scroller.transform),l=0;l<p.length;l++)a={x:(c=p[l].source.bounds).x+c.width+15,y:c.y},s={x:c.x+c.width+15,y:c.y+c.height},this.renderSpacingLines(a,s,t,this.getAdornerLayerSvg(),e.scroller.transform);n.offset=d.offset,n.snapped=!0},e.prototype.renderSpacingLines=function(e,t,i,n,r){var o,a,s=new Ue,l={};e={x:(e.x+r.tx)*r.scale,y:(e.y+r.ty)*r.scale},t={x:(t.x+r.tx)*r.scale,y:(t.y+r.ty)*r.scale},e.x===t.x?(o="M"+(e.x-5)+" "+(e.y+5)+"L"+e.x+" "+e.y+"L"+(e.x+5)+" "+(e.y+5)+"zM"+(t.x-5)+" "+(t.y-5)+" L"+t.x+" "+t.y+" L"+(t.x+5)+" "+(t.y-5)+"z",a={startPoint:{x:e.x-8,y:e.y-1},endPoint:{x:e.x+8,y:e.y-1},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:lc()},s.data=o,l.data=s.data,l.angle=0,l.pivotX=0,l.pivotY=0,l.x=0,l.y=0,l.height=0,l.width=1,l.id=lc(),this.diagram.diagramRenderer.drawPath(i,l),this.line.push(a),this.diagram.diagramRenderer.drawLine(i,this.line.pop()),a={startPoint:{x:t.x-8,y:t.y+1},endPoint:{x:t.x+8,y:t.y+1},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:this.getAdornerLayerSvg().id+"spacing"},this.line.push(a),this.diagram.diagramRenderer.drawLine(i,this.line.pop())):(o="M"+(e.x+5)+" "+(e.y+5)+" L"+e.x+" "+e.y+" L"+(e.x+5)+" "+(e.y-5)+"zM"+(t.x-5)+" "+(t.y-5)+" L"+t.x+" "+t.y+" L"+(t.x-5)+" "+(t.y+5)+"z",s.data=o,l.data=o,l.angle=0,l.pivotX=0,l.pivotY=0,l.x=0,l.y=0,l.height=0,l.width=1,l.id=lc(),this.diagram.diagramRenderer.drawPath(i,l),a={visible:!0,opacity:1,id:lc(),startPoint:{x:e.x-1,y:e.y-8},endPoint:{x:e.x-1,y:e.y+8},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"0",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0},this.line.push(a),this.diagram.diagramRenderer.drawLine(i,this.line.pop()),a={width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:lc(),startPoint:{x:t.x+1,y:t.y-8},endPoint:{x:t.x+1,y:t.y+8},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"0"},this.line.push(a),this.diagram.diagramRenderer.drawLine(i,this.line.pop())),a={startPoint:{x:e.x,y:e.y},endPoint:{x:t.x,y:t.y},stroke:"#07EDE1",strokeWidth:1,fill:"#07EDE1",dashArray:"0",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:lc()},this.line.push(a),this.diagram.diagramRenderer.drawLine(i,this.line.pop())},e.prototype.createSnapObject=function(e,t,i){var n;switch(i){case"left":n={start:{x:e.x,y:Math.min(e.y,t.y)},end:{x:e.x,y:Math.max(e.y+e.height,t.y+t.height)},offsetX:e.x-t.x,offsetY:0,type:"sideAlign"};break;case"right":n={type:"sideAlign",start:{x:e.x+e.width,y:Math.min(e.y,t.y)},offsetX:e.x+e.width-t.x-t.width,offsetY:0,end:{x:e.x+e.width,y:Math.max(e.y+e.height,t.y+t.height)}};break;case"top":n={offsetY:e.y-t.y,offsetX:0,type:"sideAlign",start:{x:Math.min(e.x,t.x),y:e.y},end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y}};break;case"bottom":n={type:"sideAlign",offsetY:e.y+e.height-t.y-t.height,offsetX:0,end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y+e.height},start:{x:Math.min(e.x,t.x),y:e.y+e.height}};break;case"topBottom":n={start:{x:Math.min(e.x,t.x),y:e.y+e.height},end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y+e.height},offsetY:e.y+e.height-t.y,offsetX:0,type:"sideAlign"};break;case"bottomTop":n={start:{x:Math.min(e.x,t.x),y:e.y},end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y},offsetY:e.y-t.y-t.height,offsetX:0,type:"sideAlign"};break;case"leftRight":n={start:{x:e.x+e.width,y:Math.min(e.y,t.y)},end:{x:e.x+e.width,y:Math.max(e.y+e.height,t.y+t.height)},offsetX:e.x+e.width-t.x,offsetY:0,type:"sideAlign"};break;case"rightLeft":n={start:{x:e.x,y:Math.min(e.y,t.y)},end:{x:e.x,y:Math.max(e.y+e.height,t.y+t.height)},offsetX:e.x-t.x-t.width,offsetY:0,type:"sideAlign"};break;case"centerX":n={start:{x:e.x+e.width/2,y:Math.min(e.y,t.y)},end:{x:e.x+e.width/2,y:Math.max(e.y+e.height,t.y+t.height)},offsetX:e.x+e.width/2-(t.x+t.width/2),offsetY:0,type:"centerAlign"};break;case"centerY":n={start:{x:Math.min(e.x,t.x),y:e.y+e.height/2},end:{x:Math.max(e.x+e.width,t.x+t.width),y:e.y+e.height/2},offsetY:e.y+e.height/2-(t.y+t.height/2),offsetX:0,type:"centerAlign"}}return n},e.prototype.snapAngle=function(e,t){var i=this.diagram.snapSettings.snapAngle,n=t%(i||0);return n>=i/2?t+i-n:t-n},e.prototype.canConsider=function(e,t,i){return!this.diagram.selectedItems.nodes.length||this.diagram.selectedItems.nodes[0].id!==i.id},e.prototype.findNodes=function(e,t,i,n,r){for(var o,a,s=[],l=e.findQuads(r?n:i),c=0;c<l.length;c++){var d=l[c];if(d.objects.length>0)for(var h=0;h<d.objects.length;h++)o=d.objects[h],this.diagram.nameTable[o.id]instanceof _r||!o.visible||"SwimLane"===this.diagram.nameTable[o.id].shape.type||this.diagram.nameTable[o.id].isLane||this.diagram.nameTable[o.id].isPhase||this.diagram.nameTable[o.id].isHeader||(a=pc(o),-1===s.indexOf(o)&&this.intersectsRect(i,a)&&s.push(o),r&&r.indexOf(o)&&this.intersectsRect(n,a)&&r.push(o))}return s},e.prototype.intersectsRect=function(e,t){return t.x<e.x+e.width&&e.x<t.x+t.width&&t.y<e.y+e.height&&e.y<t.y+t.height},e.prototype.getAdornerLayerSvg=function(){return this.diagram.diagramRenderer.adornerSvgLayer},e.prototype.removeGuidelines=function(e){var t=this.getAdornerLayerSvg().getElementById("_SnappingLines"),i=this.getAdornerLayerSvg().getElementById("pivotLine");t&&t.parentNode.removeChild(t),i&&i.parentNode.removeChild(i)},e.prototype.sortByDistance=function(e,t,i){var n,r,o;if(i)for(n=0;n<e.length;n++)for(r=n+1;r<e.length;r++)e[n][t]>e[r][t]&&(o=e[n],e[n]=e[r],e[r]=o);else for(n=0;n<e.length;n++)for(r=n+1;r<e.length;r++)e[n][t]<e[r][t]&&(o=e[n],e[n]=e[r],e[r]=o)},e.prototype.findEquallySpacedNodesAtLeft=function(e,t,i,n){var r,o,a,s;for(s=1;s<e.length&&(r=e[s-1].obj.bounds,o=e[s].obj.bounds,a=r.x-o.x-o.width,Math.abs(a-t)<=1);s++)n[n.length]=e[s],o.y<i&&(i=o.y);return i},e.prototype.findEquallySpacedNodesAtRight=function(e,t,i,n,r){var o,a,s,l,c=e[0].distance;if(Math.abs(t-c)<=r)for(var d=0;d<e.length-1&&(o=e[d].obj,a=e[d+1].obj.bounds,s=o.bounds,l=a.x-s.x-s.width,Math.abs(l-t)<=1);d++)n[n.length]=e[d+1],s.y<i&&(i=s.y);return i},e.prototype.findEquallySpacedNodesAtTop=function(e,t,i,n){for(var r,o,a,s=1;s<e.length&&(r=e[s-1].obj.bounds,o=e[s].obj.bounds,a=r.y-o.y-o.height,Math.abs(a-t)<=1);s++)n[n.length]=e[s],o.x+o.width>i&&(i=o.x+o.width);return i},e.prototype.findEquallySpacedNodesAtBottom=function(e,t,i,n,r){var o,a,s,l,c=e[0].distance;if(Math.abs(t-c)<=r)for(var d=0;d<e.length-1&&(o=e[d].obj,a=e[d+1].obj.bounds,s=o.bounds,l=a.y-s.y-s.height,Math.abs(l-t)<=1);d++)n[n.length]=e[d+1],s.x+s.width>i&&(i=s.x+s.width);return i},e.prototype.getLayer=function(){var e;return this.diagram.snapSettings.constraints&Q.SnapToObject&&((e=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id","_SnappingLines"),e.setAttribute("shapeRendering","crispEdges"),this.getAdornerLayerSvg().appendChild(e)),e},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"Snapping"}}(),function(){function e(){this.groupUndo=!1,this.childTable=[],this.historyCount=0,this.hasGroup=!1,this.groupCount=0}e.prototype.initHistory=function(e){e.historyManager={canRedo:!1,canUndo:!1,currentEntry:null,push:e.addHistoryEntry.bind(e),undo:Function,redo:Function,startGroupAction:e.startGroupAction.bind(e),endGroupAction:e.endGroupAction.bind(e),canLog:null,undoStack:[],redoStack:[],stackLimit:e.historyManager?e.historyManager.stackLimit:void 0}},e.prototype.addHistoryEntry=function(e,t){var i=null;if(t.historyManager.canLog&&!0===t.historyManager.canLog(e).cancel)return;if(t.historyManager&&t.historyManager.canUndo&&t.historyManager.currentEntry&&((i=t.historyManager.currentEntry).next?i.previous&&(i.next.previous=null,i.next=e,e.previous=i):(i.next=e,e.previous=i)),t.historyManager.currentEntry=e,t.historyManager.stackLimit){if("StartGroup"===e.type||"EndGroup"===e.type){var n="EndGroup"===e.type;this.setEntryLimit(n)}this.hasGroup||0!==this.groupCount||(this.historyCount<t.historyManager.stackLimit?this.historyCount++:this.applyLimit(t.historyManager.currentEntry,t.historyManager.stackLimit,t))}this.getHistoryList(t),t.historyManager.canUndo=!0,t.historyManager.canRedo=!1},e.prototype.applyLimit=function(e,t,i,n){if(e&&e.previous){if("StartGroup"===e.type||"EndGroup"===e.type){var r="StartGroup"===e.type;this.setEntryLimit(r)}this.hasGroup||0!==this.groupCount||t--,0===t?(n&&this.limitHistoryStack(e.previous,i),i.historyManager.stackLimit<this.historyCount&&(this.historyCount=i.historyManager.stackLimit),delete e.previous):e.previous&&this.applyLimit(e.previous,t,i,n)}this.groupCount=0},e.prototype.clearHistory=function(e){var t=e.historyManager;t.currentEntry=void 0,t.canUndo=!1,t.canRedo=!1,this.historyCount=0,this.groupCount=0,e.historyManager.undoStack=[],e.historyManager.redoStack=[]},e.prototype.setEntryLimit=function(e){e?this.groupCount--:this.groupCount++,this.hasGroup=e?!e:e},e.prototype.limitHistoryStack=function(e,t){"StartGroup"!==e.type&&"EndGroup"!==e.type&&(this.removeFromStack(t.historyManager.undoStack,e),this.removeFromStack(t.historyManager.redoStack,e)),e.previous&&this.limitHistoryStack(e.previous,t)},e.prototype.removeFromStack=function(e,t){if(e.length)for(var i=0;i<=e.length;i++)if(e[i].undoObject===t.undoObject&&e[i].redoObject===t.redoObject){e.splice(i,1);break}},e.prototype.undo=function(e){var t=this.getUndoEntry(e),i=0;if(t)if("Internal"===t.category)"EndGroup"===t.type?(i++,this.groupUndo=!0,Object(r.I)()&&(e.blazorActions|=Z.GroupingInProgress)):this.undoEntry(t,e),this.groupUndo&&(this.undoGroupAction(t,e,i),this.groupUndo=!1);else{Object(r.I)()||e.historyManager.undo(t);var n={entryType:"undo",oldValue:t.undoObject,newValue:t.redoObject};Object(r.I)()&&(n={entryType:"undo",oldValue:this.getHistoryChangeEvent(t.undoObject,t.blazorHistoryEntryType),newValue:this.getHistoryChangeEvent(t.redoObject,t.blazorHistoryEntryType)}),e.triggerEvent(ve.historyStateChange,n)}},e.prototype.getHistoryChangeEvent=function(e,t){var i={};switch(t){case"Node":i.node=e;break;case"Connector":i.connector=e;break;case"Selector":i.selector=e;break;case"Diagram":i.diagram=e;break;case"ShapeAnnotation":i.shapeAnnotation=e;break;case"PathAnnotation":i.pathAnnotation=e;break;case"PortObject":i.pointPortModel=e;break;case"Object":i.object=e}return i},e.prototype.getHistoryList=function(e){var t,i,n=[],r=[],o=e.historyManager.currentEntry;for(o=e.historyManager.currentEntry,e.historyManager.canUndo||0===e.historyManager.undoStack.length?this.getHistroyObject(n,o):this.getHistroyObject(r,o);o&&o.previous;)t=o.previous,this.getHistroyObject(n,t),o=o.previous;for(o=e.historyManager.currentEntry;o&&o.next;)i=o.next,this.getHistroyObject(r,i),o=o.next;e.historyManager.undoStack=n,e.historyManager.redoStack=r},e.prototype.getHistroyObject=function(e,t){t&&"StartGroup"!==t.type&&"EndGroup"!==t.type&&e.push({redoObject:t.redoObject?t.redoObject:null,undoObject:t.undoObject?t.undoObject:null,type:t.type?t.type:null,category:t.category?t.category:null})},e.prototype.undoGroupAction=function(e,t,i){for(;0!==i;)this.undoEntry(e,t),"StartGroup"===(e=this.getUndoEntry(t)).type?i--:"EndGroup"===e.type&&i++;i=0},e.prototype.undoEntry=function(e,t){var i,n;if("PropertyChanged"!==e.type&&"CollectionChanged"!==e.type&&"LabelCollectionChanged"!==e.type&&(i=e.undoObject,n=e.undoObject),"StartGroup"!==e.type&&"EndGroup"!==e.type&&t.historyManager.undoStack.length>0){var o=t.historyManager.undoStack.splice(0,1);t.historyManager.redoStack.splice(0,0,o[0]),n=e.undoObject}switch(t.protectPropertyChange(!0),t.diagramActions|=pe.UndoRedo,Object(r.I)()&&e.previous&&"StartGroup"===e.previous.type&&(t.blazorActions&=~Z.GroupingInProgress),e.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(i,t);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(i,t,e);break;case"RotationChanged":this.recordRotationChanged(i,t,e);break;case"ConnectionChanged":this.recordConnectionChanged(i,t);break;case"PropertyChanged":this.recordPropertyChanged(e,t,!1);break;case"CollectionChanged":if(e&&e.next&&"AddChildToGroupNode"===e.next.type&&"Insert"===e.next.changeType){var a=t.getObject(e.next.undoObject.id);t.insertValue(uc(a),!0)}if(e.isUndo=!0,this.recordCollectionChanged(e,t),e.isUndo=!1,e&&e.next&&"AddChildToGroupNode"===e.next.type&&"Insert"===e.next.changeType)(a=t.getObject(e.next.undoObject.id)).wrapper.measure(new P),a.wrapper.arrange(a.wrapper.desiredSize),t.updateDiagramObject(a);break;case"LabelCollectionChanged":e.isUndo=!0,this.recordLabelCollectionChanged(e,t),e.isUndo=!1;break;case"PortCollectionChanged":e.isUndo=!0,this.recordPortCollectionChanged(e,t),e.isUndo=!1;break;case"Group":this.unGroup(e,t);break;case"UnGroup":this.group(e,t);break;case"SegmentChanged":this.recordSegmentChanged(i,t);break;case"PortPositionChanged":this.recordPortChanged(e,t,!1);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(e,t,!1);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(e,t,!1);break;case"StackChildPositionChanged":this.recordStackPositionChanged(e,t,!1);break;case"RowHeightChanged":this.recordGridSizeChanged(e,t,!1,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(e,t,!1,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(e,t,!1);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":e.isUndo=!0,this.recordLaneOrPhaseCollectionChanged(e,t,!1),e.isUndo=!1;break;case"SendToBack":case"SendForward":case"SendBackward":case"BringToFront":this.recordOrderCommandChanged(e,t,!1);break;case"AddChildToGroupNode":this.recordAddChildToGroupNode(e,t,!1)}if(t.diagramActions&=~pe.UndoRedo,t.protectPropertyChange(!1),t.historyChangeTrigger(e,"Undo"),n){var s=this.checkNodeObject(n,t);if(s){var l=Pc(t.updateSelection);l&&l(s,t)}}},e.prototype.checkNodeObject=function(e,t){var i;if(e.id)i=t.nameTable[e.id];else if(e.nodes&&e.nodes.length>0||e.connectors&&e.connectors.length>0)for(var n=0,r=e.nodes.length>0?e.nodes:e.connectors;n<r.length;n++)i=r[n],i=t.nameTable[i.id];else{var o=e.nodes?e.nodes:e.connectors;if(o)for(var a=0,s=Object.keys(o);a<s.length;a++){var l=s[a],c=Number(l);i=e.nodes?t.nodes[c]:t.connectors[c]}}return i},e.prototype.group=function(e,t){t.add(e.undoObject)},e.prototype.unGroup=function(e,t){e.redoObject=uc(e.undoObject);var i=e.undoObject;t.commandHandler.unGroup(i)},e.prototype.ignoreProperty=function(e){return"zIndex"===e||"wrapper"===e||"parentObj"===e||"controlParent"===e},e.prototype.getProperty=function(e,t){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];this.ignoreProperty(r)||(t[r]instanceof Object?this.getProperty(e[r],t[r]):e[r]=t[r])}},e.prototype.recordLaneOrPhaseCollectionChanged=function(e,t,i){var n=e.redoObject,r=e.undoObject;if("Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType))t.remove(n);else if(n.isPhase){var o=t.nameTable[n.parentId];t.addPhases(o,[r])}else{var a=pa(o=t.nameTable[n.parentId],n);t.addLanes(o,[r],a)}t.clearSelection()},e.prototype.recordAnnotationChanged=function(e,t,i){var n=i?e.redoObject:e.undoObject;if(t.canEnableBlazorObject){var r=uc(t.nameTable[n.id]);t.insertValue(r,r instanceof Pl)}var o=fs(n,e.objectId),a=t.commandHandler.getAnnotationChanges(t.nameTable[n.id],o),s=t.nameTable[n.id],l=fs(s,e.objectId);l.offset=o.offset,l.margin=o.margin,l.width=o.width,l.height=o.height,l.rotateAngle=o.rotateAngle,l.margin=o.margin,s instanceof Pl?t.nodePropertyChange(s,{},a):t.connectorPropertyChange(s,{},a)},e.prototype.recordChildCollectionChanged=function(e,t,i){var n=i?e.redoObject:e.undoObject,r=t.nameTable[n.parentId],o=t.nameTable[n.id];r?Yo(t,r,o,!i,"AddNodeToLane"===e.historyAction):(o.parentId&&((r=t.nameTable[o.parentId]).children.splice(r.children.indexOf(o.id),1),r.wrapper.children.splice(r.wrapper.children.indexOf(o.wrapper),1)),""!==n.parentId&&((r=t.nameTable[n.parentId]).children.push(n.id),r.wrapper.children.push(o.wrapper)),o.parentId=n.parentId,t.removeElements(o),t.updateDiagramObject(o))},e.prototype.recordStackPositionChanged=function(e,t,i){var n=i?e.redoObject:e.undoObject;if(n.source){var r=t.nameTable[n.source.parentId];r&&(n.target?(r.wrapper.children.splice(n.targetIndex,1),r.wrapper.children.splice(n.sourceIndex,0,n.source.wrapper)):void 0!==n.sourceIndex?(t.nameTable[n.source.id]||t.add(n.source),r.wrapper.children.splice(n.sourceIndex,0,t.nameTable[n.source.id].wrapper),t.nameTable[n.source.id].parentId=r.id):(r.wrapper.children.splice(r.wrapper.children.indexOf(t.nameTable[n.source.id].wrapper),1),t.nameTable[n.source.id].parentId=""),i&&"UmlClassifier"===r.shape.type&&t.remove(n.source),r.wrapper.measure(new P),r.wrapper.arrange(r.wrapper.desiredSize),t.updateDiagramObject(r),t.updateSelector())}},e.prototype.recordGridSizeChanged=function(e,t,i,n){var r=i?e.redoObject:e.undoObject,o=i?e.undoObject:e.redoObject;if(r.parentId){var a=t.nameTable[r.parentId],s=t.nameTable[r.id],l=a.wrapper.bounds.x,c=a.wrapper.bounds.y;if("SwimLane"===a.shape.type){var d=a.wrapper.children[0],h=a.shape.padding;ha(t,o,a,r),n?(d.updateRowHeight(r.rowIndex,r.wrapper.actualSize.height,!0,h),a.height=a.wrapper.height=d.height):(d.updateColumnWidth(r.columnIndex,r.wrapper.actualSize.width,!0,h),a.width=a.wrapper.width=d.width,r.isPhase&&(s.maxWidth=s.wrapper.maxWidth=r.wrapper.actualSize.width)),na(a);var p=l-a.wrapper.bounds.x,u=c-a.wrapper.bounds.y;t.drag(a,p,u),t.clearSelection(),t.updateDiagramObject(a)}}},e.prototype.recordLanePositionChanged=function(e,t,i){var n=i?e.redoObject:e.undoObject;if(n.source){var r=t.nameTable[n.source.parentId];r&&"SwimLane"===r.shape.type&&(da(t,n.target,n.source),t.clearSelection())}},e.prototype.recordPortChanged=function(e,t,i){var n=i?e.redoObject.nodes[0]:e.undoObject.nodes[0];if(t.canEnableBlazorObject){var r=uc(t.nameTable[n.id]);t.insertValue(r,!0)}var o=gs(n,e.objectId),a=t.commandHandler.getPortChanges(t.nameTable[n.id],o),s=t.nameTable[n.id];gs(s,e.objectId).offset=o.offset,t.nodePropertyChange(s,{},a),s.parentId&&t.updateConnectorEdges(t.nameTable[s.parentId])},e.prototype.recordPropertyChanged=function(e,t,i){var n=e.redoObject,o=e.undoObject;if(Object(r.I)())for(var a=0,s=Object.keys(o);a<s.length;a++){var l=void 0;switch(s[a]){case"nodes":for(var c=0,d=Object.keys(o.nodes);c<d.length;c++){var h=d[c];t.canEnableBlazorObject&&(l=uc(t.nodes[Number(h)]),t.insertValue(l,!0))}break;case"connectors":for(var p=0,u=Object.keys(o.connectors);p<u.length;p++){h=u[p];t.canEnableBlazorObject&&(l=uc(t.connectors[Number(h)]),t.insertValue(l,!1))}}}this.getProperty(t,i?n:o),i?t.onPropertyChanged(n,o):t.onPropertyChanged(o,n),t.diagramActions=t.diagramActions|pe.UndoRedo},e.prototype.recordOrderCommandChanged=function(e,t,i){var n=e.redoObject,r=e.undoObject;t.commandHandler.orderCommands(i,i?n:r,e.type),t.diagramActions=t.diagramActions|pe.UndoRedo},e.prototype.recordAddChildToGroupNode=function(e,t,i){var n=t.nameTable[e.undoObject.id],r=t.nameTable[e.objectId];i&&"Insert"===e.changeType&&t.addChildToGroup(n,r.id)},e.prototype.recordSegmentChanged=function(e,t){var i,n=0;if(e.connectors&&e.connectors.length>0)for(n=0;n<e.connectors.length;n++)i=e.connectors[n],this.segmentChanged(i,t)},e.prototype.segmentChanged=function(e,t){var i=t.nameTable[e.id];i.segments=e.segments,t.commandHandler.updateEndPoint(i)},e.prototype.recordPositionChanged=function(e,t){var i,n,r=0;if(e.nodes&&e.nodes.length>0)for(r=0;r<e.nodes.length;r++)i=e.nodes[r],this.positionChanged(i,t);if(e.connectors&&e.connectors.length>0)for(r=0;r<e.connectors.length;r++)n=e.connectors[r],this.connectionChanged(n,t)},e.prototype.positionChanged=function(e,t){var i=t.nameTable[e.id];if(e.processId&&!i.processId&&t.addProcess(e,e.processId),!e.processId&&i.processId&&t.removeProcess(e.id),i.processId){var n=e.margin.left-i.margin.left,r=e.margin.top-i.margin.top;t.drag(i,n,r)}else{if(i.parentId){var o=t.nameTable[i.parentId];o.isLane&&(e.wrapper.offsetX=e.width/2+(o.wrapper.bounds.x+e.margin.left),e.wrapper.offsetY=e.height/2+(o.wrapper.bounds.y+e.margin.top))}n=e.wrapper.offsetX-i.offsetX,r=e.wrapper.offsetY-i.offsetY;t.drag(i,n,r)}t.bpmnModule&&t.bpmnModule.updateDocks(i,t)},e.prototype.recordSizeChanged=function(e,t,i){var n,r,o=0;if(e&&e.nodes&&e.nodes.length>0)for(o=0;o<e.nodes.length;o++)if((r=e.nodes[o]).children&&!r.container)for(var a=t.commandHandler.getAllDescendants(r,[]),s=0;s<a.length;s++){var l=i.childTable[a[s].id];Ps(l)===Pl?(this.sizeChanged(l,t,i),this.positionChanged(l,t)):this.connectionChanged(l,t,i)}else this.sizeChanged(r,t),this.positionChanged(r,t);if(e&&e.connectors&&e.connectors.length>0){var c=e.connectors;for(o=0;o<c.length;o++)n=c[o],this.connectionChanged(n,t)}},e.prototype.sizeChanged=function(e,t,i){var n=t.nameTable[e.id],r=e.wrapper.actualSize.width/n.wrapper.actualSize.width,o=e.wrapper.actualSize.height/n.wrapper.actualSize.height;i&&i.childTable&&(i.childTable[e.id]=uc(n)),t.scale(n,r,o,{x:e.wrapper.offsetX/n.wrapper.offsetX,y:e.wrapper.offsetY/n.wrapper.offsetY})},e.prototype.recordRotationChanged=function(e,t,i){var n,r,o=0,a=t.selectedItems;if(a.rotateAngle=e.rotateAngle,a&&a.wrapper&&(a.wrapper.rotateAngle=e.rotateAngle),e&&e.nodes&&e.nodes.length>0)for(o=0;o<e.nodes.length;o++)n=e.nodes[o],this.rotationChanged(n,t),this.positionChanged(n,t);if(e&&e.connectors&&e.connectors.length>0)for(o=0;o<e.connectors.length;o++)r=e.connectors[o],this.connectionChanged(r,t)},e.prototype.rotationChanged=function(e,t){var i=t.nameTable[e.id];t.rotate(i,e.rotateAngle-i.rotateAngle)},e.prototype.recordConnectionChanged=function(e,t){var i=e.connectors[0];i.sourceID&&t.nameTable[i.sourceID]&&t.insertValue(t.nameTable[i.sourceID],!0),i.targetID&&t.nameTable[i.targetID]&&t.insertValue(t.nameTable[i.targetID],!0),this.connectionChanged(i,t)},e.prototype.connectionChanged=function(e,t,i){var n,r=t.nameTable[e.id];e.sourcePortID!==r.sourcePortID&&(t.removePortEdges(t.nameTable[r.sourceID],r.sourcePortID,r.id,!1),r.sourcePortID=e.sourcePortID,t.connectorPropertyChange(r,{},{sourcePortID:e.sourcePortID})),e.targetPortID!==r.targetPortID&&(t.removePortEdges(t.nameTable[r.targetID],r.targetPortID,r.id,!0),r.targetPortID=e.targetPortID,t.connectorPropertyChange(r,{},{targetPortID:e.targetPortID})),e.sourceID!==r.sourceID&&(""===e.sourceID?ls((n=t.nameTable[r.sourceID]).outEdges,e.id):((n=t.nameTable[e.sourceID]).outEdges.push(e.id),t.updatePortEdges(n,e,!1)),r.sourceID=e.sourceID,t.connectorPropertyChange(r,{},{sourceID:e.sourceID})),e.targetID!==r.targetID&&(""===e.targetID?ls((n=t.nameTable[r.targetID]).inEdges,e.id):((n=t.nameTable[e.targetID]).inEdges.push(e.id),t.updatePortEdges(n,e,!0)),r.targetID=e.targetID,t.connectorPropertyChange(r,{},{targetID:e.targetID})),i&&i.childTable&&(i.childTable[e.id]=uc(r));var o=e.sourcePoint.x-r.sourcePoint.x,a=e.sourcePoint.y-r.sourcePoint.y;0===o&&0===a||t.dragSourceEnd(r,o,a);var s=e.targetPoint.x-r.targetPoint.x,l=e.targetPoint.y-r.targetPoint.y;0===s&&0===l||t.dragTargetEnd(r,s,l),t.updateSelector(),"SVG"!==t.mode&&t.refreshDiagramLayer()},e.prototype.recordCollectionChanged=function(e,t){var i=e.undoObject;if(e&&e.changeType){if("Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType))i.nodeId?t.remove(t.nameTable[i.nodeId+"_textannotation_"+i.id]):(t.remove(i),t.clearSelectorLayer());else{if(t.clearSelectorLayer(),i.parentId){var n=t.nameTable[i.parentId];n?t.addChild(n,i):t.add(i)}else i.nodeId?t.addTextAnnotation(i,t.nameTable[i.nodeId]):t.nameTable[i.id]||(i&&i.shape&&"SwimLane"===i.shape.type&&e.isUndo&&xa(i,void 0,void 0,void 0,void 0,!0),t.add(i));i.processId&&t.nameTable[i.processId]&&t.addProcess(i,i.processId)}"SVG"!==t.mode&&t.refreshDiagramLayer()}},e.prototype.recordLabelCollectionChanged=function(e,t){var i=e.undoObject,n=e.redoObject,r=t.nameTable[n.id];if(e&&e.changeType){"Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType)?(t.removeLabels(r,[i]),t.clearSelectorLayer()):(t.clearSelectorLayer(),t.addLabels(r,[i])),"SVG"!==t.mode&&t.refreshDiagramLayer()}},e.prototype.recordPortCollectionChanged=function(e,t){var i=e.undoObject,n=e.redoObject,r=t.nameTable[n.id];if(e&&e.changeType){"Remove"===(e.isUndo?"Insert"===e.changeType?"Remove":"Insert":e.changeType)?(t.removePorts(r,[i]),t.clearSelectorLayer()):(t.clearSelectorLayer(),t.addPorts(r,[i])),"SVG"!==t.mode&&t.refreshDiagramLayer()}},e.prototype.redo=function(e){var t=this.getRedoEntry(e),i=0;if(t)if("Internal"===t.category)"StartGroup"===t.type?(i++,this.groupUndo=!0,Object(r.I)()&&(e.blazorActions|=Z.GroupingInProgress)):this.redoEntry(t,e),this.groupUndo&&(this.redoGroupAction(t,e,i),this.groupUndo=!1);else{Object(r.I)()||e.historyManager.redo(t);var n={entryType:"redo",oldValue:t.redoObject,newValue:t.undoObject};Object(r.I)()&&(n={entryType:"redo",oldValue:this.getHistoryChangeEvent(t.redoObject,t.blazorHistoryEntryType),newValue:this.getHistoryChangeEvent(t.undoObject,t.blazorHistoryEntryType)}),e.triggerEvent(ve.historyStateChange,n)}},e.prototype.redoGroupAction=function(e,t,i){for(;0!==i;)this.redoEntry(e,t),"EndGroup"===(e=this.getRedoEntry(t)).type?i--:"StartGroup"===e.type&&i++;i=0},e.prototype.redoEntry=function(e,t){var i,n;if("PropertyChanged"!==e.type&&"CollectionChanged"!==e.type&&(i=e.redoObject,n=e.redoObject),t.diagramActions|=pe.UndoRedo,"StartGroup"!==e.type&&"EndGroup"!==e.type&&t.historyManager.redoStack.length>0){var o=t.historyManager.redoStack.splice(0,1);t.historyManager.undoStack.splice(0,0,o[0]),n=e.redoObject}switch(t.protectPropertyChange(!0),Object(r.I)()&&e.next&&"EndGroup"===e.next.type&&(t.blazorActions&=~Z.GroupingInProgress),e.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(i,t);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(i,t,e);break;case"RotationChanged":this.recordRotationChanged(i,t,e);break;case"ConnectionChanged":this.recordConnectionChanged(i,t);break;case"PropertyChanged":this.recordPropertyChanged(e,t,!0);break;case"CollectionChanged":this.recordCollectionChanged(e,t);break;case"LabelCollectionChanged":this.recordLabelCollectionChanged(e,t);break;case"PortCollectionChanged":this.recordPortCollectionChanged(e,t);break;case"Group":this.group(e,t);break;case"UnGroup":this.unGroup(e,t);break;case"SegmentChanged":this.recordSegmentChanged(i,t);break;case"PortPositionChanged":this.recordPortChanged(e,t,!0);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(e,t,!0);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(e,t,!0);break;case"StackChildPositionChanged":this.recordStackPositionChanged(e,t,!0);break;case"RowHeightChanged":this.recordGridSizeChanged(e,t,!0,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(e,t,!0,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(e,t,!0);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":this.recordLaneOrPhaseCollectionChanged(e,t,!0);break;case"SendToBack":case"SendForward":case"SendBackward":case"BringToFront":this.recordOrderCommandChanged(e,t,!0);break;case"AddChildToGroupNode":this.recordAddChildToGroupNode(e,t,!0)}if(t.protectPropertyChange(!1),t.diagramActions&=~pe.UndoRedo,t.historyChangeTrigger(e,"Redo"),n){var a=this.checkNodeObject(n,t);if(a){var s=Pc(t.updateSelection);s&&s(a,t)}}},e.prototype.getUndoEntry=function(e){var t,i=null,n=e.historyManager;return n.canUndo&&(i=n.currentEntry,(t=n.currentEntry.previous)?(n.currentEntry=t,n.canRedo||(n.canRedo=!0)):(n.canRedo=!0,n.canUndo=!1)),i},e.prototype.getRedoEntry=function(e){var t,i=null,n=e.historyManager;return n.canRedo&&((t=n.currentEntry.previous||n.canUndo?n.currentEntry.next:n.currentEntry)&&(n.currentEntry=t,n.canUndo||(n.canUndo=!0),t.next||(n.canRedo=!1,n.canUndo=!0)),i=n.currentEntry),i},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"UndoRedo"}}(),function(){function e(){this.protectChange=!1}e.prototype.expand=function(e,t,i,n){var r=this,o={},a=0;if(n.realActions=n.realActions|fe.AnimationClick,o[0]=setInterval((function(){return a++,r.layoutAnimation(t,o,6===a,n,i)}),20),i.isExpanded){var s=.2;this.protectChange=n.isProtectedOnChange,n.protectPropertyChange(!1);var l={};if(e){this.updateOpacity(i,s,n);l[0]=setInterval((function(){n.allowServerDataBinding=!1,s<=1?r.updateOpacity(i,s,n):clearInterval(l[0]),s+=.2,n.allowServerDataBinding=!0}),20)}}},e.prototype.layoutAnimation=function(e,t,i,n,r){if(!i)for(var o=0;o<e.objects.length;o++){var a=n.nameTable[e.objects[o].id];a.offsetX+=e.objects[o].differenceX/5,a.offsetY+=e.objects[o].differenceY/5}if(i){clearInterval(t[0]),n.realActions=n.realActions&~fe.AnimationClick,n.refreshCanvasLayers(),n.protectPropertyChange(!0),n.triggerEvent(ve.animationComplete,void 0),n.organizationalChartModule.isAnimation=!1,n.layout.fixedNode="",n.protectPropertyChange(this.protectChange);var s={element:Ls(uc(r)),state:!!r.isExpanded};n.triggerEvent(ve.expandStateChange,s),n.lineRoutingModule&&n.constraints&ae.LineRouting&&n.resetSegments()}},e.prototype.updateOpacity=function(e,t,i){for(var n=0;n<e.outEdges.length;n++){var r=i.nameTable[e.outEdges[n]],o=i.nameTable[r.targetID];r.style.opacity=t;for(var a=0;a<r.wrapper.children.length;a++)r.wrapper.children[a].style.opacity=t,o.style.opacity=t,o.wrapper instanceof ze&&i.updateNodeProperty(o.wrapper,void 0,t);this.updateOpacity(o,t,i)}},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"LayoutAnimate"}}(),function(){function e(){this.size=20,this.intermediatePoints=[],this.gridCollection=[],this.startArray=[],this.targetGridCollection=[],this.sourceGridCollection=[],this.considerWalkable=[]}e.prototype.lineRouting=function(e){var t=e.connectors.length;if(this.renderVirtualRegion(e),t>0)for(var i=0;i<t;i++){var n=e.connectors[i];"Orthogonal"===n.type&&n.visible&&this.refreshConnectorSegments(e,n,!0)}},e.prototype.renderVirtualRegion=function(e,t){var i=this.size;(e.spatialSearch.pageTop<0||e.spatialSearch.pageLeft<0)&&(i=this.size+this.size/2);var n=e.spatialSearch.pageRight+i,r=e.spatialSearch.pageBottom+i,o=e.spatialSearch.pageLeft-i,a=e.spatialSearch.pageTop-i;if(o=o<0?o-20:0,a=a<0?a-20:0,t&&(this.width!==n-o||this.height!==r-a||this.diagramStartX!==o||this.diagramStartY!==a)||void 0===t){this.width=n-o,this.height=r-a,this.diagramStartX=o,this.diagramStartY=a,this.gridCollection=[],this.noOfRows=this.width/this.size,this.noOfCols=this.height/this.size;for(var s=this.size,l=this.diagramStartX<0?this.diagramStartX:0,c=this.diagramStartY<0?this.diagramStartY:0,d=0;d<this.noOfCols;d++){for(var h=0;h<this.noOfRows;h++){0===d&&this.gridCollection.push([0]);var p={x:l,y:c,width:s,height:s,gridX:h,gridY:d,walkable:!0,tested:void 0,nodeId:[]};this.gridCollection[h][d]=p,l+=s}l=this.diagramStartX<0?this.diagramStartX:0,c+=s}}var u=this.findNodes(e.nodes);this.updateNodesInVirtualRegion(u)},e.prototype.findNodes=function(e){for(var t,i=[],n=0;n<e.length;n++)"SwimLane"===(t=e[n]).shape.type||t.isLane||t.isPhase||t.isHeader||!t.visible||i.push(t);return i},e.prototype.updateNodesInVirtualRegion=function(e){for(var t=this.size,i=this.diagramStartX<0?this.diagramStartX:0,n=this.diagramStartY<0?this.diagramStartY:0,r=0;r<this.noOfCols;r++){for(var o=0;o<this.noOfRows;o++){var a=this.gridCollection[o][r],s=new _(i,n,this.size,this.size),l=void 0,c=void 0;for(a.walkable=!0,a.tested=void 0,a.nodeId=[],c=0;c<e.length;c++)e[c].wrapper.bounds&&(l=this.intersectRect(s,e[c].wrapper.bounds)),l&&(a.nodeId.push(e[c].id),a.walkable=!1,""!==e[c].parentId&&(a.parentNodeId=e[c].parentId));i+=t}i=this.diagramStartX<0?this.diagramStartX:0,n+=t}},e.prototype.intersectRect=function(e,t){return!(t.left>=e.right||t.right<=e.left||t.top>=e.bottom||t.bottom<=e.top)},e.prototype.findEndPoint=function(e,t,i){var n,r;if(t&&""!==e.sourcePortID||!t&&""!==e.targetPortID){r=Gt(n=t?{x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY}:{x:e.targetPortWrapper.offsetX,y:e.targetPortWrapper.offsetY},void 0,t?e.sourceWrapper.bounds:e.targetWrapper.bounds);var o=t?e.sourcePortWrapper.bounds:e.targetPortWrapper.bounds;n=i?"Top"===r?{x:o.topCenter.x,y:o.topCenter.y}:"Left"===r?{x:o.middleLeft.x,y:o.middleLeft.y}:"Right"===r?{x:o.middleRight.x,y:o.middleRight.y}:{x:o.bottomCenter.x,y:o.bottomCenter.y}:{x:o.center.x,y:o.center.y}}else n=t&&this.startNode||!t&&this.targetNode?t?{x:this.startNode.wrapper.offsetX,y:this.startNode.wrapper.offsetY}:{x:this.targetNode.wrapper.offsetX,y:this.targetNode.wrapper.offsetY}:t?{x:e.sourcePoint.x,y:e.sourcePoint.y}:{x:e.targetPoint.x,y:e.targetPoint.y};return n},e.prototype.refreshConnectorSegments=function(e,t,i){var n,r,o,a,s,l,c,d,h,p,u,f=t.sourceID,g=t.targetID,m=t.sourcePortID,v=t.targetPortID;if(function(e,t){var i=0;return e.constraints&te.LineRouting?i=e.constraints&te.LineRouting:e.constraints&te.InheritLineRouting&&(i=t.constraints&ae.LineRouting),i}(t,e)){this.startNode=e.nameTable[f],this.targetNode=e.nameTable[g],this.intermediatePoints=[],this.startArray=[],this.targetGridCollection=[],this.sourceGridCollection=[],this.startGrid=void 0,this.targetGrid=void 0;for(var y=0;y<this.noOfCols;y++)for(var b=0;b<this.noOfRows;b++)this.gridCollection[b][y].tested=this.gridCollection[b][y].parent=void 0,this.gridCollection[b][y].previousDistance=this.gridCollection[b][y].afterDistance=void 0,this.gridCollection[b][y].totalDistance=void 0;n=this.findEndPoint(t,!0),r=this.findEndPoint(t,!1);for(y=0;y<this.noOfRows;y++)for(b=0;b<this.noOfCols;b++){o=this.gridCollection[y][b];var w=new _(o.x,o.y,o.width,o.height);if(!w.containsPoint(n)||this.startGrid||-1===o.nodeId.indexOf(f)&&""!==f||(this.startGrid=(m&&this.startGrid,o)),!w.containsPoint(r)||this.targetGrid||-1===o.nodeId.indexOf(g)&&""!==g||(this.targetGrid=(v&&this.targetGrid,o)),!m&&this.startNode){var x=this.startNode.wrapper.bounds;w.containsPoint(x.topCenter)&&!a&&(a=o),w.containsPoint(x.middleLeft)&&!l&&(l=o),w.containsPoint(x.middleRight)&&!c&&(c=o),w.containsPoint(x.bottomCenter)&&!s&&(s=o)}if(!v&&this.targetNode){x=this.targetNode.wrapper.bounds;w.containsPoint(x.topCenter)&&!h&&(h=o),w.containsPoint(x.middleLeft)&&!u&&(u=o),w.containsPoint(x.middleRight)&&!d&&(d=o),w.containsPoint({x:x.bottomCenter.x,y:x.bottomCenter.y})&&!p&&(p=o)}}this.findEdgeBoundary(m,l,c,a,s,!0),this.findEdgeBoundary(v,u,d,h,p,!1),this.startGrid.totalDistance=0,this.startGrid.previousDistance=0,this.intermediatePoints.push({x:this.startGrid.gridX,y:this.startGrid.gridY}),this.startArray.push(this.startGrid),this.checkObstacles(t);e:for(;this.startArray.length>0;){var O=this.startArray.pop();for(y=0;y<this.targetGridCollection.length;y++){var S=this.targetGridCollection[y];if(O.gridX===S.gridX&&O.gridY===S.gridY){if(this.getIntermediatePoints(O),this.updateConnectorSegments(e,this.intermediatePoints,this.gridCollection,t,i)){this.considerWalkable=[];break e}this.targetGridCollection.splice(this.targetGridCollection.indexOf(S),1),O=this.startArray.pop()}}this.findPath(O)}}},e.prototype.findEdgeBoundary=function(e,t,i,n,r,o){var a,s=o?this.sourceGridCollection:this.targetGridCollection;if(!e&&(o?this.startNode:this.targetNode)){for(var l=t.gridX;l<=i.gridX;l++)(1===(a=this.gridCollection[l][t.gridY]).nodeId.length&&(l===t.gridX||l===i.gridX)||l!==t.gridX&&l!==i.gridX)&&s.push(a);for(l=n.gridY;l<=r.gridY;l++)(1===(a=this.gridCollection[n.gridX][l]).nodeId.length&&(l===n.gridY||l===r.gridY)||l!==n.gridY&&l!==r.gridY)&&-1===s.indexOf(a)&&s.push(a)}else s.push(o?this.startGrid:this.targetGrid)},e.prototype.checkObstacles=function(e){var t,i=this.findNearestNeigbours(this.startGrid,this.gridCollection,!0);0===i.length&&(""!==e.sourcePortID?"Top"===(t=Gt({x:e.sourcePortWrapper.offsetX,y:e.sourcePortWrapper.offsetY},void 0,e.sourceWrapper.bounds))?this.resetGridColl(this.startGrid,"top",!0):"Right"===t?this.resetGridColl(this.startGrid,"right",!0):"Bottom"===t?this.resetGridColl(this.startGrid,"bottom",!0):this.resetGridColl(this.startGrid,"left",!0):(this.resetGridColl(this.startGrid,"top",!0),this.resetGridColl(this.startGrid,"right",!0),this.resetGridColl(this.startGrid,"bottom",!0),this.resetGridColl(this.startGrid,"left",!0)));0===(i=this.findNearestNeigbours(this.targetGrid,this.gridCollection,!1)).length&&(""!==e.targetPortID?"Top"===(t=Gt({x:e.targetPortWrapper.offsetX,y:e.targetPortWrapper.offsetY},void 0,e.targetWrapper.bounds))?this.resetGridColl(this.targetGrid,"top",!0):"Right"===t?this.resetGridColl(this.targetGrid,"right",!0):"Bottom"===t?this.resetGridColl(this.targetGrid,"bottom",!0):this.resetGridColl(this.targetGrid,"left",!0):(this.resetGridColl(this.targetGrid,"top",!1),this.resetGridColl(this.targetGrid,"right",!1),this.resetGridColl(this.targetGrid,"bottom",!1),this.resetGridColl(this.targetGrid,"left",!1)))},e.prototype.getIntermediatePoints=function(e){var t;for(this.intermediatePoints=[];e;)this.intermediatePoints.push({x:e.gridX,y:e.gridY}),e=e.parent;this.intermediatePoints.reverse(),this.intermediatePoints[0].x===this.intermediatePoints[1].x?this.intermediatePoints[0].y<this.intermediatePoints[1].y?(t=this.neigbour(this.startGrid,"bottom",void 0,!0),this.intermediatePoints[0].y+=t-1):(t=this.neigbour(this.startGrid,"top",void 0,!0),this.intermediatePoints[0].y-=t-1):this.intermediatePoints[0].x<this.intermediatePoints[1].x?(t=this.neigbour(this.startGrid,"right",void 0,!0),this.intermediatePoints[0].x+=t-1):(t=this.neigbour(this.startGrid,"left",void 0,!0),this.intermediatePoints[0].x-=t-1)},e.prototype.updateConnectorSegments=function(e,t,i,n,r){var o,a,s,l,c,d,h,p,u,f=[],g=[],m=n.targetWrapper,v=n.sourceWrapper,y=this.findEndPoint(n,!0);""===n.targetPortID&&n.targetWrapper||(a=this.findEndPoint(n,!1,!0));for(var b=0;b<t.length;b++)s=(c=i[t[b].x][t[b].y]).x+c.width/2,l=c.y+c.height/2,g.push({x:s,y:l}),b>=1&&(p=g[g.length-2].x!==g[g.length-1].x?g[g.length-2].x>g[g.length-1].x?"Left":"Right":g[g.length-2].y>g[g.length-1].y?"Top":"Bottom"),b>=2&&u===p&&g.splice(g.length-2,1),u=p;for(var w=0;w<g.length-1;w++)g[w].x!==g[w+1].x?(0===w&&""===n.sourcePortID&&v&&(y=g[w].x>g[w+1].x?v.bounds.middleLeft:v.bounds.middleRight),w===g.length-2&&""===n.targetPortID&&m&&(a=g[w].x>g[w+1].x?m.bounds.middleRight:m.bounds.middleLeft),0===w&&y&&(g[w].x=y.x,g[w].y=g[w+1].y=y.y),w===g.length-2&&a&&(a.x-g[w+1].x<0&&Math.abs(a.x-g[w].x)<n.targetDecorator.width+1&&(g[w].x=g[w-1].x-=this.size/2),a.x-g[w+1].x>0&&Math.abs(a.x-g[w].x)<n.targetDecorator.width+1&&(g[w].x=g[w-1].x+=this.size/2),g[w+1].x=a.x,g[w].y=g[w+1].y=a.y)):(0===w&&v&&(y=g[w].y>g[w+1].y?v.bounds.topCenter:v.bounds.bottomCenter),w===g.length-2&&""===n.targetPortID&&m&&(a=g[w].y>g[w+1].y?m.bounds.bottomCenter:m.bounds.topCenter),0===w&&y&&(g[w].y=y.y,g[w].x=g[w+1].x=y.x),w===g.length-2&&a&&(a.y-g[w+1].y<0&&Math.abs(a.y-g[w].y)<n.targetDecorator.height+1&&(g[w].y=g[w-1].y-=this.size/2),a.y-g[w+1].y>0&&Math.abs(a.y-g[w].y)<n.targetDecorator.width+1&&(g[w].y=g[w-1].y+=this.size/2),g[w+1].y=a.y,g[w].x=g[w+1].x=a.x));for(w=0;w<g.length-1;w++)g[w].x!==g[w+1].x?g[w].x>g[w+1].x?(d="Left",h=g[w].x-g[w+1].x):(d="Right",h=g[w+1].x-g[w].x):g[w].y>g[w+1].y?(d="Top",h=g[w].y-g[w+1].y):(d="Bottom",h=g[w+1].y-g[w].y),o={type:"Orthogonal",length:h,direction:d},f.push(o);var x=f[f.length-1];return 1===f.length&&(x.length-=20),x.length<10&&2===f.length&&(f.pop(),f[0].length-=20,x=f[0]),(("Top"===x.direction||"Bottom"===x.direction)&&x.length>n.targetDecorator.height+1||("Right"===x.direction||"Left"===x.direction)&&x.length>n.targetDecorator.width+1)&&(n.segments=f,r&&e.connectorPropertyChange(n,{},{type:"Orthogonal",segments:f}),!0)},e.prototype.findPath=function(e){for(var t,i=[],n=this.findNearestNeigbours(e,this.gridCollection,!0),r=0;r<n.length;r++)if(null!==(t=this.findIntermediatePoints(n[r].gridX,n[r].gridY,e.gridX,e.gridY,this.targetGrid.gridX,this.targetGrid.gridY))){var o=this.gridCollection[t.x][t.y],a=this.octile(Math.abs(t.x-e.gridX),Math.abs(t.y-e.gridY)),s=e.previousDistance+a;o.previousDistance&&!(o.previousDistance>s)||t.x===e.gridX&&t.y===e.gridY||(i.push(t),o.previousDistance=s,o.afterDistance=o.afterDistance||this.manhattan(Math.abs(t.x-this.targetGrid.gridX),Math.abs(t.y-this.targetGrid.gridY)),o.totalDistance=o.previousDistance+o.afterDistance,o.parent=e)}if(i.length>0)for(r=0;r<i.length;r++){o=this.gridCollection[i[r].x][i[r].y];-1===this.startArray.indexOf(o)&&this.startArray.push(o)}this.sorting(this.startArray)},e.prototype.sorting=function(e){for(var t=!1;!t;){t=!0;for(var i=1;i<e.length;i+=1)if(e[i-1].totalDistance<e[i].totalDistance){t=!1;var n=e[i-1];e[i-1]=e[i],e[i]=n}}return e},e.prototype.octile=function(e,t){var i=Math.SQRT2-1;return t>e?i*e+t:i*t+e},e.prototype.manhattan=function(e,t){return e+t},e.prototype.findNearestNeigbours=function(e,t,i){var n=[],r=e.parent;if(r){var o=(e.gridX-r.gridX)/Math.max(Math.abs(e.gridX-r.gridX),1),a=(e.gridY-r.gridY)/Math.max(Math.abs(e.gridY-r.gridY),1);0!==o?(this.isWalkable(e.gridX,e.gridY-1,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX][e.gridY-1])&&n.push(t[e.gridX][e.gridY-1]),this.isWalkable(e.gridX,e.gridY+1,!0)&&this.sourceGridCollection.indexOf(t[e.gridX][e.gridY+1])&&n.push(t[e.gridX][e.gridY+1]),this.isWalkable(e.gridX+o,e.gridY,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX+o][e.gridY])&&n.push(t[e.gridX+o][e.gridY])):0!==a&&(this.isWalkable(e.gridX-1,e.gridY,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX-1][e.gridY])&&n.push(t[e.gridX-1][e.gridY]),this.isWalkable(e.gridX+1,e.gridY,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX+1][e.gridY])&&n.push(t[e.gridX+1][e.gridY]),this.isWalkable(e.gridX,e.gridY+a,!0)&&-1===this.sourceGridCollection.indexOf(t[e.gridX][e.gridY+a])&&n.push(t[e.gridX][e.gridY+a]))}else this.neigbour(e,"top",n,i),this.neigbour(e,"right",n,i),this.neigbour(e,"bottom",n,i),this.neigbour(e,"left",n,i);return n},e.prototype.neigbour=function(e,t,i,n){for(var r,o=1;o>0;){var a="top"===t||"bottom"===t?e.gridX:"left"===t?e.gridX-o:e.gridX+o,s="right"===t||"left"===t?e.gridY:"top"===t?e.gridY-o:e.gridY+o;if((r=this.gridCollection[a][s])&&(n&&-1===this.sourceGridCollection.indexOf(r)||!n&&-1===this.targetGridCollection.indexOf(r)))return i&&this.isWalkable(a,s)&&i.push(r),o;if(!(a>0&&s>0))break;o++}return null},e.prototype.resetGridColl=function(e,t,i){for(var n,r=1;r>0;){var o="top"===t||"bottom"===t?e.gridX:"left"===t?e.gridX-r:e.gridX+r,a="right"===t||"left"===t?e.gridY:"top"===t?e.gridY-r:e.gridY+r;if((n=this.gridCollection[o][a])&&(i&&-1===this.sourceGridCollection.indexOf(n)||!i&&-1===this.targetGridCollection.indexOf(n))){if(this.isWalkable(o,a))break;var s=this.gridCollection[o][a];this.considerWalkable.push(s)}if(!(o>0&&a>0))break;"top"===t||"left"===t?r--:r++}return null},e.prototype.isWalkable=function(e,t,i){if(e>=0&&e<this.noOfRows&&t>=0&&t<this.noOfCols){var n=this.gridCollection[e][t];if(n&&(n.walkable||(1===n.nodeId.length||2===n.nodeId.length&&n.parentNodeId)&&(-1!==this.sourceGridCollection.indexOf(n)||-1!==this.targetGridCollection.indexOf(n)||-1!==this.considerWalkable.indexOf(n)))&&(i&&!n.parent||!i))return!0}return!1},e.prototype.findIntermediatePoints=function(e,t,i,n,r,o){for(var a=e-i,s=t-n,l=e,c=t,d=0;d<this.targetGridCollection.length;d++)if(e===this.targetGridCollection[d].gridX&&t===this.targetGridCollection[d].gridY)return{x:e,y:t};if(!this.isWalkable(e,t))return null;var h=this.gridCollection[e][t];if(h.tested)return{x:e,y:t};if(h.tested=!0,0!==a&&(a=a>0?1:-1,this.isWalkable(l,c-1)&&!this.isWalkable(l-a,c-1)||this.isWalkable(l,c+1)&&!this.isWalkable(l-a,c+1)))return{x:e,y:t};if(0!==s){if(s=s>0?1:-1,this.isWalkable(l-1,c)&&!this.isWalkable(l-1,c-s)||this.isWalkable(l+1,c)&&!this.isWalkable(l+1,c-s))return{x:e,y:t};if(this.findIntermediatePoints(l+1,c,l,c,r,o)||this.findIntermediatePoints(l-1,c,l,c,r,o))return{x:e,y:t}}return this.findIntermediatePoints(l+a,c+s,l,c,r,o)},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"LineRouting"}}(),function(){function e(){}e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"LineDistribution"},e.prototype.initLineDistribution=function(e,t){var i="Bottom";if(this.diagram=t,"DifferentPoint"===t.layout.connectionPointOrigin){var n="Top";"BottomToTop"===e.orientation?(i="Top",n="Bottom"):"RightToLeft"===e.orientation?(i="Left",n="Right"):"LeftToRight"===e.orientation&&(i="Right",n="Left");var r=t.nodes;if(r.length>0)for(var o=0;o<r.length;o++){var a=t.nameTable[r[o].id];this.addDynamicPortandDistrrbuteLine(e,a,i,n,t)}}},e.prototype.getConnectorDirection=function(e,t){return Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?e.x<t.x?"Right":"Left":e.y<t.y?"Bottom":"Top"},e.prototype.ObstacleSegment=function(e){return e.direction=this.getConnectorDirection(e.startpt,e.endpt),e.distance=E.findLength(e.startpt,e.endpt),e.orientation="Left"===e.direction||"Right"===e.direction?"horizontal":"vertical",e.id=e.id,"horizontal"===e.orientation?(e.coord=e.startpt.y,"Left"===e.direction?(e.start=e.endpt.x,e.end=e.startpt.x):(e.start=e.startpt.x,e.end=e.endpt.x)):(e.coord=e.startpt.x,"Top"===e.direction?(e.start=e.endpt.y,e.end=e.startpt.y):(e.start=e.startpt.y,e.end=e.endpt.y)),e},e.prototype.distributeLines=function(e,t){for(var i="LeftToRight"===e.orientation||"RightToLeft"===e.orientation,n="obstaclePointCollection",r=(i?e.horizontalSpacing:e.verticalSpacing)-8-10,o=[],a=[],s=t.connectors,l=0;l<s.length;l++){for(var c=s[l],d=[],h=0;h<c.segments.length;h++)for(var p=c.segments[h],u=0;u<p.points.length;u++){var f=p.points[u];0!==d.length&&E.equals(f,d[d.length-1])||d.push(f)}for(var g=[],m=1;m<d.length;m++){var v=this.ObstacleSegment({startpt:d[m-1],endpt:d[m],id:c.id});g.push(v)}var y={wrapper:c,segments:g},b=[];if(i)for(h=0;h<y.segments.length;h++){"vertical"===(v=y.segments[h]).orientation&&b.push(v)}else for(var h=0;h<y.segments.length;h++){"horizontal"===(v=y.segments[h]).orientation&&b.push(v)}for(m=0;m<b.length;m++){var w=b[m];this.containsValue(o,w.coord)||o.push({key:w.coord,value:[]});var x=void 0;for(u=0;u<o.length;u++){h=o[u].key;if(Number(h)===w.coord){x=u;break}}o[x].value.push(w)}a.push(y)}for(var O=[],S=0;S<o.length;S++){var C=o[S],P=C.value;P.sort();var j=void 0;j=[];x=0;var I=Number.MIN_VALUE;j.push([]);for(var T=0;T<P.length;T++){w=P[T];!(j[x].length>0)||I>=w.start?(j[x].push(w),I=Math.max(I,j[x][j[x].length-1].end)):(x++,j.push([]),j[x].push(w),I=j[x][j[x].length-1].end)}for(T=0;T<j.length;T++){var A=j[T],D=[];for(m=0;m<A.length;m++){(R=A[m]).start&&D.push(R)}var k=i?"Bottom":"Right",M=[];for(m=0;m<D.length;m++){(R=D[m]).direction===k&&M.push(R)}var L=[];for(m=0;m<D.length;m++){var R;(R=D[m]).direction!==k&&L.push(R)}var z=[];if(M.length>0){var N=M[0].start;for(m=0;m<L.length;)L[m].end>N?(z.push(L[m]),L.splice(m,1)):m++}var B=[];B=this.updateSegmentRow(z,B);var _=[];_=[],_=this.updateSegmentRow(L,_),M.reverse(),_=this.updateSegmentRow(M,_),B[B.length-1].length>0||B.splice(B.length-1,1),_[_.length-1].length>0||_.splice(_.length-1,1);var H=[];if(z.length>0&&(D[0].direction===z[0].direction||D[D.length-1].direction===z[z.length-1].direction)){H=_;for(var W=0;W<B.length;W++){var F=B[W];H[H.length]=F}}else{H=B;for(W=0;W<_.length;W++){F=_[W];H[H.length]=F}}if(H.length>1){var q=1;"BottomToTop"!==e.orientation&&"RightToLeft"!==e.orientation||(q=-1);var U=C.key-q*r/2,V=r/H.length;for(l=0;l<H.length;l++){var Y=U+l*V*q;for(W=0;W<H[l].length;W++){(w=H[l][W]).coord=Y,this.containsValue(O,w.coord)||O.push({key:w.coord,value:[]});var X=void 0;for(u=0;u<O.length;u++){if(O[u].key===w.coord){X=u;break}}O[X].value.push(w)}}}}}for(S=0;S<a.length;S++){for(y=a[S],d=[],l=0;l<y.segments.length;l++)0===l?d.push(this.getObstacleStartPoint(y.segments[l])):i?"vertical"===y.segments[l].orientation&&(d[d.length-1]=this.getObstacleStartPoint(y.segments[l])):i||"horizontal"===y.segments[l].orientation&&(d[d.length-1]=this.getObstacleStartPoint(y.segments[l])),d.push(this.getObstacleEndPoint(y.segments[l]));y.wrapper[n]=[];for(m=0;m<d.length;m++){var G=d[m];(0===m||m>0&&!E.equals(G,d[m-1]))&&y.wrapper[n].push(this.getPointvalue(G.x,G.y))}this.resetConnectorPoints(y.wrapper,t)}},e.prototype.inflate=function(e,t,i){return e.x-=t,e.y-=i,e.width+=2*t,e.height+=2*i,e},e.prototype.updateConnectorPoints=function(e,t,i,n,r){var o=n,a="LeftToRight"===r||"RightToLeft"===r,s=e;if(s.length>2){var l=E.transform(s[0],E.findAngle(s[0],s[1]),t),c=E.transform(l,E.findAngle(s[1],s[2]),E.findLength(s[1],s[2]));if(s.splice(1,2,l,c),null!=i){var d=s.length,h=E.transform(s[d-1],E.findAngle(s[d-1],s[d-2]),t);for(s.splice(d-1,0,h);2<s.length-2;)s.splice(2,1);var p=i;this.inflate(o,o.width,o.height);var u=[];u[0]=this.getPointvalue(p.x,o.y),u[1]=this.getPointvalue(p.x,o.y+o.height);var f=[];f[0]=this.getPointvalue(o.x,s[1].y),f[1]=this.getPointvalue(o.x+o.width,s[1].y);var g=[];g[0]=this.getPointvalue(o.x,h.y),g[1]=this.getPointvalue(o.x+o.width,h.y),a&&(u[0]=this.getPointvalue(o.x,p.y),u[1]=this.getPointvalue(o.x+o.width,p.y),f[0]=this.getPointvalue(s[1].x,o.y),f[1]=this.getPointvalue(s[1].x,o.y+o.height),g[0]=this.getPointvalue(h.x,o.y),f[1]=this.getPointvalue(h.x,o.y+o.height));var m=[Fa(u[0],u[1],f[0],f[1])],v=[Fa(u[0],u[1],g[0],g[1])];v.length>0&&s.splice(2,0,v[0]),m.length>0&&s.splice(2,0,m[0])}}for(var y=1;y<s.length-1;)E.equals(s[y-1],s[y])||E.findAngle(s[y-1],s[y])===E.findAngle(s[y],s[y+1])?s.splice(y,1):y++;return s},e.prototype.resetConnectorPoints=function(e,t){var i="obstaclePointCollection";if(e.segments[0].points&&e.segments[0].points.length>0){var n=e;n.sourcePoint=e[i][0],n.targetPoint=e[i][e[i].length-1];var r=void 0;r=[];for(var o=0;o<e[i].length-1;o++){var a=e[i][o],s=e[i][o+1],l=Ms(a,s),c=this.getConnectorDirection(a,s);o===e[i].length-2&&("RightToLeft"===t.layout.orientation&&"Left"===c||"LeftToRight"===t.layout.orientation&&"Right"===c||"TopToBottom"===t.layout.orientation&&"Bottom"===c||"BottomToTop"===t.layout.orientation&&"Top"===c)&&(l/=2);var d=new Er(e,"segments",{type:"Orthogonal"},!0);d.length=l,d.direction=c,r.push(d)}n.segments=r,n.type="Orthogonal",t.connectorPropertyChange(n,{},{type:"Orthogonal",segments:n.segments})}},e.prototype.getObstacleEndPoint=function(e){return"horizontal"===e.orientation?"Left"===e.direction?this.getPointvalue(e.start,e.coord):this.getPointvalue(e.end,e.coord):"Top"===e.direction?this.getPointvalue(e.coord,e.start):this.getPointvalue(e.coord,e.end)},e.prototype.getObstacleStartPoint=function(e){return"horizontal"===e.orientation?"Left"===e.direction?this.getPointvalue(e.end,e.coord):this.getPointvalue(e.start,e.coord):"Top"===e.direction?this.getPointvalue(e.coord,e.end):this.getPointvalue(e.coord,e.start)},e.prototype.updateSegmentRow=function(e,t){var i=0;t.length>0||(t[0]=[]);for(var n=0;n<e.length;n++)for(var r=e[n];i<t.length;){if(i===t.length-1&&(t[i+1]=[]),!(t[i].length>0)||t[i][t[i].length-1].end<r.start){t[i].push(r);break}i++}return t},e.prototype.portOffsetCalculation=function(e,t,i,n){"Top"===i&&(e.offset={x:(n+1)*(1/(t+1)),y:0}),"Bottom"===i&&(e.offset={x:(n+1)*(1/(t+1)),y:1}),"Left"===i&&(e.offset={x:0,y:(n+1)*(1/(t+1))}),"Right"===i&&(e.offset={x:1,y:(n+1)*(1/(t+1))})},e.prototype.addDynamicPortandDistrrbuteLine=function(e,t,i,n,r){if(t.ports&&t.ports.length>0){var o=t.ports;r.removePorts(t,o)}t.ports;var a=t.outEdges,s=t.inEdges;this.initPort(a,r,t,i,!1),this.initPort(s,r,t,n,!0)},e.prototype.initPort=function(e,t,i,n,r){for(var o=0;o<=e.length-1;o++){var a=t.nameTable[e[o]];a.obstaclePointCollection=[];var s=gs(i,r?a.targetPortID:a.sourcePortID),l=n;void 0===s&&((s=new $e(i,"ports","",!0)).id=lc()+"_LineDistribution",r?a.targetPortID=s.id:a.sourcePortID=s.id),this.portOffsetCalculation(s,e.length,l,o),i.ports.push(s);var c=i.initPortWrapper(i.ports[i.ports.length-1]);i.wrapper.children.push(c),t.connectorPropertyChange(a,r?{targetPortID:""}:{sourcePortID:""},r?{targetPortID:s.id}:{sourcePortID:s.id})}},e.prototype.shiftMatrixCells=function(e,t,i,n,r){if(0!==e){for(var o=r.matrix[t.level].value,a=o.indexOf(t),s=a;s<o.length;s++)o[s].offset+=e;if(i)if(t.visitedChildren.length>0)this.shiftMatrixCells(e,t.visitedChildren[0],!0,t,r);else{s=1;for(var l=null;a+s<o.length;){var c=o[a+s];if(null!=n&&this.containsValue(c.visitedParents,n)){if(!(c.visitedChildren.length>0)){s++;continue}l=c}break}null!=l&&this.shiftMatrixCells(e,l.visitedChildren[0],!0,l,r)}}},e.prototype.arrangeMatrix=function(e,t,i){var n=i.model.layout,r="LeftToRight"===n.orientation||"RightToLeft"===n.orientation?n.verticalSpacing:n.horizontalSpacing,o=i.matrix[e.level].value,a=o.indexOf(e);if(e.visitedParents.length>0&&(1===e.visitedParents.length&&(e.initialOffset=e.offset),a+1<o.length&&o[a+1].visitedParents.length>0&&!this.containsValue(e.visitedParents,t)))return e.visitedParents.push(t),void t.ignoredChildren.push(e);if(e.children.length>0){for(var s=0;s<e.children.length;s++){var l=e.children[s];this.containsValue(e.visitedChildren,l)||(this.arrangeMatrix(l,e,i),e.visitedChildren.push(l))}if(e.visitedChildren.length>0){var c=e.visitedChildren.slice();for(s=0;s<e.ignoredChildren.length;s++){e.ignoredChildren[s];c.splice(0,1),e.visitedChildren.splice(0,1)}if(c.length>0){var d=e.visitedChildren[0],h=e.visitedChildren[e.visitedChildren.length-1],p=(d.offset-d.size/2+(h.offset+h.size/2))/2;p<e.offset?this.shiftMatrixCells(e.offset-p,d,!0,e,i):p>e.offset&&this.shiftMatrixCells(p-e.offset,e,!1,null,i)}}}else{var u=e.offset;if(a>0){var f=o[a-1];u=f.offset+f.size/2+r+e.size/2}this.shiftMatrixCells(u-e.offset,e,!1,null,i)}this.containsValue(e.visitedParents,t)||e.visitedParents.push(t)},e.prototype.arrangeElements=function(e,t){var i,n=e.model.layout,r=(i="LeftToRight"===t.orientation||"RightToLeft"===t.orientation)?n.verticalSpacing:n.horizontalSpacing;i?n.horizontalSpacing:n.verticalSpacing;this.groupLayoutCells(e),this.createMatrixCells(e);for(var o=0;o<e.matrix.length;o++)for(var a=e.matrix[o].key,s=e.matrix[a].value,l=1;l<s.length;l++){var c=s[l],d=s[l-1];c.offset+=d.offset+d.size/2+r+c.size/2}for(o=0;o<e.matrix[0].value.length;o++){var h=e.matrix[0].value[o];this.arrangeMatrix(h,null,e)}for(var p=0;p<e.matrix.length;p++){var u=e.matrix[p].value;for(l=0;l<u.length;l++){if((c=u[l]).visitedParents.length>1){var f=c.visitedParents[0],g=c.visitedParents[c.visitedParents.length-1],m=this.findParentVertexCellGroup(f),v=this.findParentVertexCellGroup(g);f!==m&&m.offset<f.offset&&(f=m),g!==v&&v.offset>g.offset&&(g=m);var y=(f.offset+g.offset)/2,b=c.initialOffset,w=c.offset;w!==b&&(y>=b&&y<=w?this.translateMatrixCells(y-c.offset,c):y<b&&this.translateMatrixCells(b-c.offset,c))}}}this.setXYforMatrixCell(e)},e.prototype.findParentVertexCellGroup=function(e){return e.cells[0]?e:e.parents.length>0?this.findParentVertexCellGroup(e.parents[0]):e},e.prototype.setXYforMatrixCell=function(e){for(var t=e.model.layout,i="LeftToRight"===t.orientation||"RightToLeft"===t.orientation,n=i?t.verticalSpacing:t.horizontalSpacing,r=0;r<e.matrix.length;r++)for(var o=e.matrix[r].value,a=0;a<o.length;a++)for(var s=o[a],l=s.offset-s.size/2,c=0;c<s.cells.length;c++){var d=s.cells[c],h=this.getType(d.type);if("internalVertex"===h){var p=d,u=p.cell.geometry.width,f=p.cell.geometry.height;p.cell.geometry=i?new _(e.rowOffset[s.level]-u/2,l,u,f):new _(l,e.rowOffset[s.level]-f/2,u,f),l+=(i?f:u)+n}else if("internalEdge"===h){var g=d,m=s.visitedParents[0];if(m)for(var v=0;v<m.visitedChildren.length;v++){for(var y=m.visitedChildren[v],b=[],w=0;w<y.cells.length;w++){var x=y.cells[w];"internalVertex"===this.getType(x.type)&&b.push(x)}if(b.length>0){!0;break}}for(w=0;w<g.edges.length;w++){var O=g.edges[w],S=this.getPointvalue(l+.5,e.rowOffset[s.level]);if(i&&(S=this.getPointvalue(e.rowOffset[s.level],l+.5)),this.containsValue(this.getEdgeMapper(),O)){var C=void 0;for(v=0;v<this.getEdgeMapper().length;v++)if(this.getEdgeMapper()[v].key===O){C=v;break}this.getEdgeMapper()[C].value.push(S)}l+=6}l+=n}}},e.prototype.getEdgeMapper=function(){return this.edgeMapper},e.prototype.setEdgeMapper=function(e){this.edgeMapper.push(e)},e.prototype.translateMatrixCells=function(e,t){if(0!==e&&(t.offset+=e,t.visitedChildren.length>0))for(var i=0;i<t.visitedChildren.length;i++){var n=t.visitedChildren[i];this.translateMatrixCells(e,n)}},e.prototype.groupLayoutCells=function(e){for(var t=e.model.ranks,i=t.length-1;i>=0;i--){for(var n=[],r=0;r<t[i].length;r++){var o=t[i][r];"internalVertex"===this.getType(o.type)&&n.push(t[i][r])}for(var a=[],s=0;s<t[i].length;s++){o=t[i][s];"internalEdge"===this.getType(o.type)&&a.push(o)}for(;n.length>1;){for(var l=n[0],c=this.selectIds(l.connectsAsTarget,!0),d=this.selectIds(l.connectsAsSource,!1);n.length>1;){var h=n[1],p=this.selectIds(h.connectsAsTarget,!0),u=this.selectIds(h.connectsAsSource,!1),f=this.compareLists(c,p),g=this.compareLists(d,u);if(!f||!g)break;this.updateMutualSharing(n[0],h.id),this.updateMutualSharing(n[1],l.id),n.splice(1,1)}n.splice(0,1)}for(;a.length>1;){var m=a[0],v=m.source,y=m.target;if(null!=v.identicalSibiling){for(var b=[],w=0;w<a.length;w++){var x=a[w];x.target===y&&b.push(x)}for(w=0;w<b.length;w++){var O=b[w];this.containsValue(v.identicalSibiling,O.source.id)&&(O.source.identicalSibiling=null)}m.source.identicalSibiling=null}a.splice(0,1)}}},e.prototype.getType=function(e){return"internalVertex"===e?"internalVertex":"internalEdge"},e.prototype.selectIds=function(e,t){for(var i=[],n=0;n<e.length;n++){var r=e[n];t?i.push(r.source.id):i.push(r.target.id)}return i},e.prototype.compareLists=function(e,t){var i=e.slice(),n=t.slice();if(i.length===n.length){if(0===i.length)return!0;for(var r=!0,o=0;o<n.length;o++)for(var a=n[o],s=o;s<i.length;s++)if(i[s]!==a){r=!1;break}return r}return!1},e.prototype.updateMutualSharing=function(e,t){null!=e.identicalSibiling||(e.identicalSibiling=[]),e.identicalSibiling.push(t)},e.prototype.matrixCellGroup=function(e){return e.level=e.level,e.parents=e.parents,e.children=e.children,e.visitedChildren=e.visitedChildren,e.visitedParents=e.visitedParents,e.ignoredChildren=e.ignoredChildren,e.cells=e.cells,e.offset=e.offset,e.initialOffset=e.initialOffset,e},e.prototype.getPointvalue=function(e,t){return{x:Number(e)||0,y:Number(t)||0}},e.prototype.containsValue=function(e,t){for(var i=0;i<e.length;i++)if(e[i].key===t||e[i]===t)return!0;return!1},e.prototype.createMatrixCells=function(e){for(var t=e.model.layout,i="LeftToRight"===t.orientation||"RightToLeft"===t.orientation,n=i?t.verticalSpacing:t.horizontalSpacing,r=i?t.horizontalSpacing:t.verticalSpacing,o=e.model.ranks,a=[],s=-r,l=o.length-1;l>=0;l--){var c=0,d=o.length-1-l,h=o[l].slice(),p=[];e.matrix.push({key:d,value:p});var u=[];for(a.push({index:d,value:u});h.length>0;){var f=h[0],g=this.matrixCellGroup({level:d,parents:[],children:[],visitedParents:[],visitedChildren:[],ignoredChildren:[],cells:[],size:0,offset:0,initialOffset:0});p.push(g);var m=this.getType(f.type);if("internalVertex"===m){if(g.cells.push(f),null!=f.identicalSibiling)for(var v=0;v<h.length;v++){var y=h[v];if("internalVertex"===this.getType(y.type)&&this.containsValue(f.identicalSibiling,y.id)&&(g.cells.push(y),g.cells.length>f.identicalSibiling.length))break}for(v=0;v<g.cells.length;v++){y=g.cells[v];if("internalVertex"===this.getType(y.type)){var b=y.cell.geometry;if(g.size+=i?b.height:b.width,c=Math.max(c,i?b.width:b.height),u.push({key:y.id,value:g}),y.connectsAsTarget.length>0)for(var w=0;w<y.connectsAsTarget.length;w++){var x=y.connectsAsTarget[w],O=null;if(this.containsValue(a[d-1].value,x.ids)?O=x.ids:this.containsValue(a[d-1].value,x.source.id)&&(O=x.source.id),null!=O){for(var S=a[d-1].value,C=void 0,P=0;P<S.length;P++)if(S[P].key==O){C=S[P].value;break}this.containsValue(g.parents,C)||g.parents.push(C),this.containsValue(C.children,g)||C.children.push(g)}}h.reverse(),h.pop(),h.reverse()}}g.size+=(g.cells.length-1)*n}else if("internalEdge"===m){g.cells.push(f);for(v=0;v<g.cells.length;v++){var j=g.cells[v];if("internalEdge"===this.getType(j.type)&&null!=j.edges){var I=-5;for(w=0;w<j.edges.length;w++){j.edges[w];I+=6}g.size+=I}u.push({key:j.ids,value:g});O=null;if(this.containsValue(a[d-1].value,j.ids)?O=j.ids:this.containsValue(a[d-1].value,j.source.id)&&(O=j.source.id),null!=O){var E=a[d-1].value;for(C=void 0,P=0;P<E.length;P++)if(E[P].key==O){C=E[P].value;break}this.containsValue(g.parents,C)||g.parents.push(C),this.containsValue(C.children,g)||C.children.push(g)}h.reverse(),h.pop(),h.reverse()}g.size+=(g.cells.length-1)*n}}e.rowOffset.push(s+c/2+r),s+=c+r}},e.prototype.updateLayout=function(e,t,i,n,r,o){var a=(e.x-t.width)/2-t.x,s=(e.y-t.height)/2-t.y;a=Math.round(a),s=Math.round(s);for(var l=[],c=new _(t.x+a,t.y+s,t.width,t.height),d=i.margin,h="RightToLeft"===n.orientation||"LeftToRight"===n.orientation?n.horizontalSpacing:n.verticalSpacing,p=0;p<r.length;p++){var u=r[p];if(null!=u.outEdges&&u.outEdges.length>0)for(var f=u.outEdges.length,g=0;g<f;g++){if((D=o[u.outEdges[g]]).pointCollection=[],f>1){for(var m=h/2,v=null,y=void 0,b=this.getEdgeMapper(),w=0;w<b.length;w++)if(b[w].key===D){y=w;break}if(b[y].value.length>0){var x=b[y].value[0],O=x.x+d.left,S=x.y+d.top,C=O,P=S;"BottomToTop"===n.orientation?P=t.height-S:"RightToLeft"===n.orientation&&(C=t.width-O),C+=a,P+=s,v=this.getPointvalue(C,P)}for(var j=[],I=0;I<D.segments.length;I++){var E=D.segments[I].points;for(var T in E)j.push(E[T])}j=this.updateConnectorPoints(j,m,v,c,n.orientation);for(var A=0;A<j.length;A++){E=j[A];D.pointCollection.push(this.getPointvalue(E.x,E.y))}this.resetConnectorPoints(D,this.diagram)}l.push(D)}if(null!=u.inEdges&&u.inEdges.length>1)for(f=u.inEdges.length,b=this.getEdgeMapper(),g=0;g<f;g++){var D=o[u.inEdges[g]];if(this.containsValue(l,D)||(D.pointCollection=[]),f>1){m=h/2,v=null,y=void 0,w=void 0;for(w=0;w<b.length;w++)if(b[w].key===D){y=w;break}if(b[y].value.length>0&&!this.containsValue(l,D)){var k=b[w].value[0],M=k.x+d.left,L=k.y+d.top;C=M,P=L;"BottomToTop"===n.orientation?P=t.height-L:"RightToLeft"===n.orientation&&(C=t.width-M),C+=a,P+=s,v=this.getPointvalue(C,P)}for(j=[],A=0;A<D.segments.length;A++){E=D.segments[A].points;for(var T in E)j.push(E[T])}j.reverse(),(j=this.updateConnectorPoints(j,m,v,c,i.orientation)).reverse(),D.pointCollection=[];for(A=0;A<j.length;A++){E=j[A];D.pointCollection.push(this.getPointvalue(E.x,E.y))}this.resetConnectorPoints(D,this.diagram)}}}}}(),function(){function e(){this.isAnimation=!1}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"OrganizationalChart"},e.prototype.updateLayout=function(e,t,i,n,r,o){var a={type:i.type,nameTable:t,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},orientation:i.orientation,horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,verticalAlignment:i.verticalAlignment,horizontalAlignment:i.horizontalAlignment,fixedNode:i.fixedNode,getLayoutInfo:Pc(i.getLayoutInfo),layoutInfo:i.layoutInfo,margin:i.margin,bounds:i.bounds,objects:[],root:i.root};return this.doLayout(a,e,n,r,o),a},e.prototype.doLayout=function(e,t,i,n,r){var o,a,s=[];for(e.nameTable[e.root]&&e.firstLevelNodes.push(e.nameTable[e.root]),a=0;a<t.length;a++)if(!(o=t[a]).excludeFromLayout&&((e.graphNodes[o.id]=this.setUpLayoutInfo(e,o)).tree.hasSubTree=!1,!e.nameTable[e.root]&&(!o.inEdges||!o.inEdges.length))){o.parentId||o.processId||s.push(o),o.data&&String(o.data[n])===e.root&&e.firstLevelNodes.push(o)}for(0===e.firstLevelNodes.length&&(e.firstLevelNodes=s),a=0;a<e.firstLevelNodes.length;a++){o=e.firstLevelNodes[a];this.updateEdges(e,o,1,r,t)}if(e.firstLevelNodes.length>0){e.rootNode=e.firstLevelNodes[0];var l=0,c=0,d=void 0,h=void 0,p=void 0,u=void 0,f=void 0;for(a=0;a<e.firstLevelNodes.length;a++){f=this.updateTree(e,l,c,e.firstLevelNodes[a],0,e.firstLevelNodes[a-1]);var g=e.graphNodes[e.firstLevelNodes[a].id];f.y=Math.min(f.y,g.y),f.x=Math.min(f.x,g.x),-1!==e.orientation.indexOf("Left")?c=f.right+e.horizontalSpacing:l=f.right+e.horizontalSpacing,0===a?(d=f.x,u=f.y,p=f.right,h=f.bottom):(d=Math.min(d,f.x),u=Math.min(u,f.y),p=Math.max(p,f.right),h=Math.max(h,f.bottom))}for(this.updateAnchor(e,{x:d,y:u,right:p,bottom:h},i),a=0;a<e.firstLevelNodes.length;a++)this.updateNodes(e,e.firstLevelNodes[a],0);for(a=0;a<e.firstLevelNodes.length;a++)this.updateConnectors(e,e.firstLevelNodes[a],1)}},e.prototype.getBounds=function(e){var t=e.offsetX-e.actualSize.width*e.pivot.x,i=e.offsetY-e.actualSize.height*e.pivot.y;return new _(t,i,e.actualSize.width,e.actualSize.height)},e.prototype.updateTree=function(e,t,i,n,r,o,a){var s,l,c,d,h={};if(s=this.getDimensions(e,n,t,i,r),h=e.graphNodes[n.id],e.maxLevel=Math.max(e.maxLevel,r),l=r,(d=this.hasChild(e,n))||h.tree.assistants.length){var p=void 0,u=void 0,f=void 0,g=void 0,m=void 0,v=void 0;v=s.y+s.height+e.verticalSpacing,h.tree.assistants.length&&(l=(c=this.setDepthSpaceForAssitants(e,n,v,s.height,r,e.verticalSpacing)).level,v=c.bottom),h.tree.assistants.length||"Horizontal"===h.tree.orientation||(v=s.y+s.height+e.verticalSpacing/2),h.tree.children.length&&(p="Horizontal"!==h.tree.orientation||"Balanced"===h.tree.type&&1!==h.tree.children.length?"Balanced"===h.tree.type?this.updateHorizontalTreeWithMultipleRows(e,n,o,s.x,v,l):this.updateVerticalTree(e,n,s.x,v,l,a):this.updateHorizontalTree(e,n,o,s.x,v,l)),h.y&&h.y>s.y||(h.y=s.y),h.mid&&(t=h.mid),h.tree.assistants.length&&(m=void 0!==t?t:s.x,g=this.setBreadthSpaceForAssistants(e,n,s,m,v,r),d||(t=((u=p=g).x+u.right)/2-s.width/2,p=u),f=g?g.canMoveBy:void 0),h.x=t,h.translate||(h.treeWidth=p.right-p.x);var y={layout:e,shape:n,shapeBounds:{x:t,y:s.y,right:t+s.width,bottom:s.y+s.height},treeBounds:p,dim:s,level:r};return this.translateSubTree(y,f,void 0!==o,a),h.firstChild&&"string"!==typeof h.firstChild&&(h.firstChild.x+=h.subTreeTranslation),n.treeBounds=p,p}return n.treeBounds=this.updateLeafNode(e,n,o,s,r,a),n.treeBounds},e.prototype.updateLeafNode=function(e,t,i,n,r,o){var a,s=e.graphNodes[t.id];s.x=n.x,s.y&&s.y>n.y||(s.y=n.y,s.maxLevel=Math.max(r,s.maxLevel||0)),a={x:n.x,y:n.y,right:n.x+n.width,bottom:n.y+n.height},s.maxLevel=Math.max(s.maxLevel||0,r);var l={layout:e,shape:t,shapeBounds:a,treeBounds:a,dim:n,level:r};return this.translateSubTree(l,void 0,void 0!==i,o),{x:s.x,y:s.y,right:s.x+n.width,bottom:s.y+n.height}},e.prototype.setUpLayoutInfo=function(e,t){var i={subTreeTranslation:0};return"OrganizationalChart"===e.type?i.tree={orientation:"Vertical",type:"Alternate",offset:20,enableRouting:!0}:i.tree={orientation:"Horizontal",type:"Center",enableRouting:!0},i.tree.children=[],i.tree.assistants=[],i.tree.level=0,i.translate=!0,i},e.prototype.translateSubTree=function(e,t,i,n){var r=e.layout,o=e.shape,a=e.shapeBounds,s=e.treeBounds,l=e.level,c=e.dim,d=r.graphNodes[o.id],h=r.nameTable[d.firstChild?d.firstChild.child:d.tree.children[0]],p=h?r.graphNodes[h.id]:null,u=this.hasChild(r,o),f=this.findIntersectingLevels(r,a,l,d.actualLevel),g=this.findIntersectingLevels(r,s,l,d.actualLevel),m=[];f.length&&d.translate?(d.intersect=f,this.spaceLeftFromPrevSubTree(r,o,a),d.canMoveBy=d.diff,void 0!==t&&(d.canMoveBy=Math.min(t,d.canMoveBy)),h&&void 0!==p.canMoveBy&&(p.canMoveBy>=d.canMoveBy&&(d.translated=!0),d.canMoveBy=Math.min(d.canMoveBy,p.canMoveBy)),i&&(d.x-=d.canMoveBy,d.subTreeTranslation-=d.canMoveBy,u&&(this.shiftSubordinates(r,g,d.canMoveBy),s.x=Math.min(s.x,d.x),s.right=Math.max(s.right,d.x+c.width),s.bottom=Math.max(s.bottom,d.y+c.height),s.x-=d.canMoveBy,s.right-=d.canMoveBy),h&&p.canMoveBy>d.canMoveBy?d.canMoveBy=p.canMoveBy-d.canMoveBy:h&&void 0!==d.canMoveBy&&(d.canMoveBy=0))):(u&&(s.x=Math.min(s.x,a.x),s.right=Math.max(s.right,a.x+c.width),s.bottom=Math.max(s.bottom,d.y+c.height)),d.translate||(d.canMoveBy=0,d.subTreeTranslation=0)),n||(a={x:d.x,y:c.y,right:d.x+c.width,bottom:c.y+c.height},m.push({rBounds:a}),this.updateRearBounds(r,o,m,l))},e.prototype.updateRearBounds=function(e,t,i,n,r){var o,a,s,l,c,d,h=!0,p={};if(t&&(r=(p=e.graphNodes[t.id]).intersect,h=!p.tree.children.length&&!p.tree.assistants.length),l=i[0].rBounds,c=i[i.length-1].rBounds,r&&r.length){for(d=(o=e.levels[r[0]].rBounds).bottom,o.y<l.y&&(o.bottom=l.y,i.splice(0,0,{rBounds:o})),d>c.bottom?i.push({rBounds:{x:o.x,right:o.right,y:l.bottom,bottom:d}}):(o=e.levels[r[r.length-1]].rBounds,h&&o.bottom>c.bottom&&(o.y=c.bottom,i.push({rBounds:o}))),a=r[0],s=i.length-1;s>=0;s--)e.levels.splice(a,0,i[s]);a+=i.length,e.levels.splice(a,r.length)}else for(a=this.findLevel(e,i[i.length-1].rBounds,n),s=i.length-1;s>=0;s--)e.levels.splice(a,0,i[s])},e.prototype.shiftSubordinates=function(e,t,i){var n;if(0!==i)for(n=0;n<t.length;n++)e.levels[t[n]].rBounds&&(e.levels[t[n]].rBounds.x-=i,e.levels[t[n]].rBounds.right-=i)},e.prototype.setDepthSpaceForAssitants=function(e,t,i,n,r,o){var a,s,l,c,d=e.graphNodes[t.id],h={};for(c=i,s=0;s<d.tree.assistants.length;s++)(h=e.graphNodes[d.tree.assistants[s]])&&(h.tree.children=h.tree.assistants=[],h.y=i,a=(l=e.nameTable[d.tree.assistants[s]]).actualSize.height,-1!==e.orientation.indexOf("Left")&&(a=l.actualSize.width),c=i+a+o/2,e.maxLevel=r+1,s%2===1&&s!==d.tree.assistants.length-1&&(i=c,r++));return{level:e.maxLevel,bottom:i+a+o}},e.prototype.setBreadthSpaceForAssistants=function(e,t,i,n,r,o){var a,s,l,c,d,h,p,u={},f=e.graphNodes[t.id],g=o,m={x:0,y:0,right:0,bottom:0};for(c=0;c<f.tree.assistants.length;c++)(u=e.graphNodes[f.tree.assistants[c]])&&(a=(l=e.nameTable[f.tree.assistants[c]]).actualSize.width,-1!==e.orientation.indexOf("Left")&&(a=l.actualSize.height),d=c%2===0?n+i.width/2-20-a:n+i.width/2+20,s=this.updateTree(e,d,u.y,e.nameTable[f.tree.assistants[c]],g+1),this.hasChild(e,t)||(0===c?m=s:this.uniteRects(m,s)),c%2===0&&u.prevBounds&&(h=void 0===h?u.canMoveBy:Math.min(h,u.canMoveBy)),c%2!==1&&c!==f.tree.assistants.length-1||(p=this.findIntersectingLevels(e,s,g+1),this.updateRearBounds(e,null,[{rBounds:s}],g+1,p),g++));return m&&(m.canMoveBy=h),m},e.prototype.getDimensions=function(e,t,i,n,r){var o,a;if(o=t.actualSize.width,a=t.actualSize.height,-1!==e.orientation.indexOf("Left")){if(!r){var s;s=i,i=n,n=s}a=t.actualSize.width,o=t.actualSize.height}return{x:i,y:n,width:o,height:a}},e.prototype.hasChild=function(e,t){var i=e.graphNodes[t.id];return i?i.tree.children&&i.tree.children.length:0},e.prototype.updateHorizontalTree=function(e,t,i,n,r,o){var a;a=this.getDimensions(e,t,n,r,o);var s,l={},c=(l=e.graphNodes[t.id]).tree.type;s=o;var d,h,p,u,f,g,m,v,y,b,w,x,O,S,C,P,j=0;if(j=n,d=r,e.levels.slice(0,e.levels.length),this.hasChild(e,t)){var I;for(I=-1!==e.orientation.indexOf("Left"),S=0;S<l.tree.children.length;S++){if(h=(u=e.nameTable[l.tree.children[S]]).actualSize.width,p=u.actualSize.height,g=I?p:h,m=I?h:p,e.levels[s+1]?e.levels[s+1].rBounds:null,f=this.updateTree(e,j,d,u,s+1,e.nameTable[l.tree.children[S-1]]),C=e.graphNodes[u.id],l.maxLevel=Math.max(l.maxLevel||0,C.maxLevel||0),y={x:C.x,y:C.y,right:C.x+g,bottom:C.y+m},0===S&&(v={x:Math.min(C.x,f.x),y:Math.min(C.y,f.y),right:f.right,bottom:f.bottom},P=C),O?(O.x=y.x,O.y=y.y,y.right>O.right&&(O.right=y.right),O.bottom=y.bottom):O=y,0===S&&(l.firstChild={x:C.x,canMoveBy:C.canMoveBy,child:u.id}),this.hasChild(e,u))if(!l.firstChild||l.firstChild.x>=C.firstChild.x){C.firstChild&&l.firstChild.canMoveBy<C.canMoveBy&&(x=l.firstChild.canMoveBy,C.canMoveBy=x,e.graphNodes[l.firstChild.child].canMoveBy=x,l.firstChild.canMoveBy=x);var E=void 0!==x?x:C.canMoveBy;l.firstChild={x:C.firstChild.x,canMoveBy:E,child:u.id}}else C.firstChild&&C.translated&&l.firstChild.canMoveBy>C.canMoveBy&&(l.firstChild.canMoveBy=e.graphNodes[l.firstChild.child].canMoveBy=C.canMoveBy);b=b?Math.max(C.maxLevel,b):C.maxLevel,this.uniteRects(v,f),j=0!==S&&!this.hasChild(e,u)&&C.subTreeTranslation<0?f.right-C.subTreeTranslation+e.horizontalSpacing:f.right+e.horizontalSpacing}isNaN(w)||(P.canMoveBy=w),l.mid=(P.x+O.right)/2-a.width/2,"Left"===c?l.mid=y.right-a.width:"Right"===c&&(l.mid=n)}return v},e.prototype.updateHorizontalTreeWithMultipleRows=function(e,t,i,n,r,o){var a,s,l,c,d,h,p,u,f,g,m,v=this.getDimensions(e,t,n,r,o),y=e.graphNodes[t.id],b=(y.tree.type,o),w=n,x=r,O=(e.levels.slice(0,e.levels.length),0);if(this.hasChild(e,t)){var S=-1!==e.orientation.indexOf("Left"),C=void 0,P=this.splitChildrenInRows(e,t),j=5===y.tree.children.length&&3===P[0].length;y.tree.children.length>5&&(j=P[0].length===Math.round(y.tree.children.length/2));var I=[],E=[];j?E=P:this.splitRows(P,I,E);var T={leftTree:I,rows:P,rightTree:E,dimensions:v},A=this.updateLeftTree(e,T,t,n,x,b);d=T.bounds;var D=void 0,k=(A||0)+(void 0!==A?e.horizontalSpacing/2:0);void 0!==A&&(y.mid=k-v.width/2,D=A+e.horizontalSpacing),x=r;var M=void 0;for(M=[],f=0;f<E.length;f++)for(w=P[f].length%2===1&&f===E.length-1||j?n:D||n,0!==f&&(x=M[f-1].bottom+e.verticalSpacing),u=0;u<E[f].length;u++)h=(a=e.nameTable[E[f][u]]).actualSize.width,p=a.actualSize.height,c=S?p:h,S?h:p,(s=e.graphNodes[a.id]).actualLevel=b+1+f,0===u&&I[f]&&I[f].length&&(s.translate=!1),j&&1===f&&(0===u&&g+c+e.horizontalSpacing<=m&&(C=!0,w=g-c/2),C&&1===u&&(w=m-c/2)),l=this.updateTree(e,w,x,a,b+1,e.nameTable[E[f][u-1]]),j&&u<=2&&0===f&&1===u&&(g=l.x-e.horizontalSpacing/2,m=l.x+c+e.horizontalSpacing/2),0===u?M[f]={x:l.x,y:l.y,right:l.right,bottom:l.bottom}:this.uniteRects(M[f],l),d||(d={x:M[f].x,y:M[f].y,right:M[f].right,bottom:M[f].bottom}),this.uniteRects(d,M[f]),w=l.right+e.horizontalSpacing,(!y.firstChild||(f===E.length-1&&P[f].length%2===1||j)&&0===u&&void 0!==s.canMoveBy&&O>s.canMoveBy)&&(O=Math.min(O,s.canMoveBy||0),y.firstChild={x:s.x,child:a.id,canMoveBy:s.canMoveBy}),T.leftCenter=g,T.rightCenter=m,T.align=C,T.level=b,T.rightBounds=M,this.alignRowsToCenter(e,f,t,T,D)}return d},e.prototype.updateLeftTree=function(e,t,i,n,r,o){for(var a,s,l,c,d,h=t.leftTree,p=e.graphNodes[i.id],u=[],f=-1!==e.orientation.indexOf("Left"),g=0;g<h.length&&h[g].length;g++){a=n,u[g-1]&&(r=u[g-1].bottom+e.verticalSpacing);for(var m=0;m<h[g].length;m++){var v=e.nameTable[h[g][m]],y=(f?v.actualSize.height:v.actualSize.width,f?v.actualSize.width:v.actualSize.height,e.graphNodes[v.id]);y.actualLevel=o+1+g,c=this.updateTree(e,a,r,v,o+1,e.nameTable[h[g][m-1]]),0===m?u[g]={x:c.x,y:c.y,right:c.right,bottom:c.bottom}:this.uniteRects(u[g],c),0===g&&0===m?(s=y.canMoveBy,p.firstChild={x:y.x,child:v.id,canMoveBy:y.canMoveBy}):0===m&&void 0!==y.canMoveBy&&s>y.canMoveBy&&(s=Math.min(s,y.canMoveBy||0),p.firstChild={x:y.x,child:v.id,canMoveBy:y.canMoveBy}),a=c.right+e.horizontalSpacing}l=0===g?u[g].right:Math.max(l,u[g].right)}for(g=0;g<h.length&&h[g].length;g++){if(l!==u[g].right){var b=l-u[g].right;for(m=0;m<h[g].length;m++){e.nameTable[h[g][m]];e.graphNodes[h[g][m]].x+=b}}0===g?d={x:u[0].x,y:u[0].y,right:u[0].right,bottom:u[0].bottom}:this.uniteRects(d,u[g])}return t.bounds=d,l},e.prototype.alignRowsToCenter=function(e,t,i,n,r){var o,a,s,l=e.graphNodes[i.id],c=n.rows,d=n.rightTree,h=n.leftCenter,p=n.rightCenter,u=n.align,f=n.rightBounds,g=n.dimensions,m=n.level,v=5===l.tree.children.length&&3===c[0].length;if(l.tree.children.length>5&&(v=c[0].length===Math.round(l.tree.children.length/2)),v&&1===t&&(o=f[0].right-f[0].x>=f[1].right-f[1].x?0:1),t===c.length-1&&(c[t].length%2===1||v&&1===t)){a=d[t][Math.floor(d[t].length/2)];var y;y=e.nameTable[a];var b,w=e.graphNodes[a].x,x=e.graphNodes[a].y;b=this.getDimensions(e,y,w,x,m+1),s=void 0,!u&&v?(1===o&&(t=0),s=(f[o].x+f[o].right)/2-(f[t].x+f[t].right)/2,0===t&&(l.mid+=s)):v||void 0===r||(s=r-e.horizontalSpacing/2-(w+b.width/2)),void 0!==s&&this.updateRearBoundsOfTree(e,d[t],s,g),v&&(l.mid=(p+h)/2+(0===t?s:0)-g.width/2),void 0===l.mid&&e.graphNodes[a]&&(l.mid=w),u=!1,t++}},e.prototype.updateRearBoundsOfTree=function(e,t,i,n){for(var r=0;r<t.length;r++){var o=e.graphNodes[t[r]];e.nameTable[t[r]];if(o.x+=i,o.canMoveBy+=i,r===t.length-1){var a={x:o.x,y:o.y,right:o.x+n.width,bottom:o.y+n.height},s=this.findIntersectingLevels(e,a,o.actualLevel);this.updateRearBounds(e,null,[{rBounds:a}],o.actualLevel,s)}}},e.prototype.splitRows=function(e,t,i){for(var n=0;n<e.length;n++){t[n]=[],i[n]=[];var r=void 0;if(r=e[n].length,e[n].length%2!==1){r=Math.ceil(e[n].length/2);for(var o=0;o<r;o++)t[n].push(e[n][o])}for(var a=t[n].length;a<e[n].length;a++)i[n].push(e[n][a])}},e.prototype.updateVerticalTree=function(e,t,i,n,r,o){this.getDimensions(e,t,i,n,r);var a,s,l,c,d,h,p,u,f,g,m,v,y,b,w=e.graphNodes[t.id],x=e.nameTable[w.tree.children[0]],O=-1!==e.orientation.indexOf("Left"),S="Left"===w.tree.type?-1:0,C=i,P=n;m=r;var j,I=[],E=[];for(v=0;v<w.tree.children.length;v++){if("Alternate"===w.tree.type&&(b=v%2===0&&w.tree.children.length>2?"Left":"Right",S=v%2===0&&w.tree.children.length>2?-1:0),C=i+this.findOffset(e,t,w,b),a=e.nameTable[w.tree.children[v]],c=O?a.actualSize.height:a.actualSize.width,d=O?a.actualSize.width:a.actualSize.height,l=this.updateTree(e,C+S*c,P,a,r+1,void 0,!0),u={x:(s=e.graphNodes[a.id]).x,y:s.y,right:s.x+c,bottom:s.y+d},0===v?(this.uniteRects(l,u),p=l):this.uniteRects(p,l),!s.prevBounds||"Alternate"===w.tree.type&&v%2===1&&w.tree.children.length>2||(j=void 0!==j?Math.min(s.canMoveBy,j):s.canMoveBy),w.maxLevel=Math.max(w.maxLevel||0,s.maxLevel||0),"Alternate"===w.tree.type&&w.tree.children.length>2&&v%2===0?(0!==v&&(P=h.bottom+e.verticalSpacing/2),E.push({rBounds:u}),s.levelBounds&&(E=E.concat(s.levelBounds))):(P="Alternate"===w.tree.type&&w.tree.children.length>2?Math.max(l.bottom,h.bottom)+e.verticalSpacing/2:l.bottom+e.verticalSpacing/2,r=w.maxLevel,I.push({rBounds:u}),g?this.uniteRects(g,u):g={x:s.x,y:s.y,right:s.x+c,bottom:s.y+d},s.levelBounds&&(I=I.concat(s.levelBounds))),0===v&&(w.firstChild={x:s.x,canMoveBy:s.canMoveBy,child:a.id}),this.hasChild(e,a))if(!w.firstChild||w.firstChild.x>=s.firstChild.x){if(s.firstChild&&w.firstChild.canMoveBy<s.canMoveBy){var T=w.firstChild.canMoveBy;s.canMoveBy=T,e.graphNodes[w.firstChild.child].canMoveBy=T,w.firstChild.canMoveBy=T}w.firstChild={x:s.firstChild.x,canMoveBy:void 0!==j?j:s.canMoveBy,child:a.id}}else s.firstChild&&s.translated&&w.firstChild.canMoveBy>s.canMoveBy&&(w.firstChild.canMoveBy=e.graphNodes[w.firstChild.child].canMoveBy=s.canMoveBy);h=u}return o?w.levelBounds=I:("Alternate"===w.tree.type&&w.tree.children.length>2&&(f={x:E[0].rBounds.x,y:E[0].rBounds.y,right:E[E.length-1].rBounds.right,bottom:E[E.length-1].rBounds.bottom},y=this.findIntersectingLevels(e,f,m+1),this.updateRearBounds(e,null,E,m+1,y)),y=this.findIntersectingLevels(e,g||p,m+1),this.updateRearBounds(e,null,g?I:[{rBounds:p}],m+1,y)),isNaN(j)||(e.graphNodes[x.id].canMoveBy=j),w.childBounds=p,w.mid=i,p},e.prototype.splitChildrenInRows=function(e,t){var i,n;n=4;var r,o=[];r=(i=e.graphNodes[t.id]).tree.children.length;var a=this.extend(i.tree.children);if(i.tree.rows){var s;s=i.tree.children.length;var l;n=(l=Math.ceil(s/i.tree.rows))%2===0?l:l+1}else 3===i.tree.children.length||4===i.tree.children.length?n=2:5===i.tree.children.length&&(n=3);for(;r>0;)o[o.length]=a.splice(0,n),(r-=n)<n&&(n=r);return o},e.prototype.extend=function(e){var t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i},e.prototype.findOffset=function(e,t,i,n){var r=0,o=-1!==e.orientation.indexOf("Left")?t.actualSize.height:t.actualSize.width,a=n||i.tree.type;switch(r=i.tree.offset||20,"Alternate"===i.tree.type&&r>=e.horizontalSpacing&&(r=e.horizontalSpacing/2),a){case"Left":r=o/2-r;break;case"Right":r+=o/2}return r},e.prototype.uniteRects=function(e,t){e.x=Math.min(e.x,t.x),e.right=Math.max(e.right,t.right),e.bottom=Math.max(e.bottom,t.bottom)},e.prototype.spaceLeftFromPrevSubTree=function(e,t,i){var n,r,o,a,s;for(n=e.graphNodes[t.id],s=e.horizontalSpacing,a=0;a<n.intersect.length;a++)o=e.levels[n.intersect[a]].rBounds,r=i.x-(o.right+s),(void 0===n.diff||r<n.diff)&&(n.diff=r,n.prevBounds=e.levels[n.intersect[a]].rBounds)},e.prototype.findIntersectingLevels=function(e,t,i,n){var r,o,a,s;(r={x:t.x,y:t.y,right:t.right,bottom:t.bottom}).y-=e.verticalSpacing/2,r.bottom+=e.verticalSpacing/2,o=[],s=void 0!==n?n:i,a=e.levels[s]?e.levels[s].rBounds:null;do{if(a&&(r.y<a.y&&r.bottom>a.y||r.y<a.bottom&&a.bottom<r.bottom||r.y>=a.y&&r.bottom<=a.bottom||r.y<a.y&&r.bottom>a.bottom)){o.splice(0,0,s)}else if(a&&a.bottom<r.y)break;s--,a=e.levels[s]?e.levels[s].rBounds:null}while(s>=0);s=(void 0!==n?n:i)+1,a=e.levels[s]?e.levels[s].rBounds:null;do{if(a&&(r.y<a.y&&r.bottom>a.y||r.y<a.bottom&&a.bottom<r.bottom||r.y>=a.y&&r.bottom<=a.bottom||r.y<a.y&&r.bottom>a.bottom))o.push(s);else if(a&&a.y>r.bottom)break;s++,a=e.levels[s]?e.levels[s].rBounds:null}while(s<=e.levels.length);return o},e.prototype.findLevel=function(e,t,i){var n,r,o;for(n=t,r=0,o=e.levels[r]?e.levels[r].rBounds:null;r<e.levels.length;){if(o&&n.bottom<o.y)return r;r++,o=e.levels[r]?e.levels[r].rBounds:null}return r},e.prototype.getParentNode=function(e,t){return e.nameTable[e.nameTable[t.inEdges[0]].sourceID]},e.prototype.updateEdges=function(e,t,i,n,r){var o,a;if(o=e.graphNodes[t.id],t.outEdges&&t.outEdges.length&&(t.isExpanded||n===pe.Render))for(a=0;a<t.outEdges.length;a++){var s;(s=e.nameTable[e.nameTable[t.outEdges[a]].targetID])&&!s.excludeFromLayout&&(-1===o.tree.children.indexOf(s.id)&&o.tree.children.push(s.id),s.outEdges&&s.outEdges.length&&s.isExpanded&&(o.tree.hasSubTree=!0),this.updateEdges(e,s,i+1,n,r))}o.tree.level=i,o.tree.hasSubTree&&(o.tree.orientation="Horizontal",o.tree.type="Center"),(e.getLayoutInfo||e.layoutInfo)&&"OrganizationalChart"===e.type&&(e.getLayoutInfo?e.getLayoutInfo(t,o.tree):function(e,t,i,n){var r;if(t)for(var o=0,a=Object.keys(t);o<a.length;o++){var s=a[o];if(r=t[s],"getAssistantDetails"===s){if(n.data.Role===t[s].root)for(var l=t[s].assistants,c=0;c<l.length;c++)for(var d=0;d<i.length;d++)i[d].data.Role===l[c]&&(e.assistants.push(i[d].id),e.children.splice(0,1))}else r&&(e[s]=t[s])}!e.hasSubTree&&t.canEnableSubTree&&(e.orientation=n.layoutInfo.orientation,e.type=n.layoutInfo.type,n.layoutInfo.offset!==e.offset&&void 0!==n.layoutInfo.offset&&(e.offset=n.layoutInfo.offset)),n.layoutInfo.hasSubTree=e.hasSubTree}(o.tree,e.layoutInfo,r,t),"Balanced"===o.tree.type&&o.tree.hasSubTree&&(o.tree.type="Center",o.tree.orientation="Horizontal")),e.level&&"Alternate"!==o.tree.type&&i>=e.level&&(o.tree.hasSubTree=!1)},e.prototype.updateAnchor=function(e,t,i){var n,r,o,a=0,s=0,l=0,c=0,d=new _(0,0,i.x,i.y);o=e.bounds?e.bounds:d;var h=e.orientation;if(e.fixedNode){a=(r=e.nameTable[e.fixedNode]).actualSize.width,s=r.actualSize.height,e.anchorX=r.offsetX,e.anchorY=r.offsetY;var p=r.pivot;for(e.anchorX+="RightToLeft"===e.orientation?a*p.x:-a*p.x,e.anchorY+="BottomToTop"===e.orientation?s*p.y:-s*p.y,n=r,l=0;n.inEdges.length;)n=this.getParentNode(e,n),l+=e.graphNodes[n.id].subTreeTranslation||0;-1!==e.orientation.indexOf("Left")?(c=e.graphNodes[r.id].y,"LeftToRight"===h?e.anchorX-=c:e.anchorX+=c,e.anchorY-=e.graphNodes[r.id].x+l):(c=e.graphNodes[r.id].y,e.anchorX-=e.graphNodes[r.id].x+l,"TopToBottom"===h?e.anchorY-=c:e.anchorY+=c)}else if("TopToBottom"===h||"BottomToTop"===h){switch(e.horizontalAlignment){case"Left":e.anchorX=o.x-t.x+e.margin.left;break;case"Right":e.anchorX=o.x+o.width-e.margin.right-t.right;break;case"Auto":case"Center":e.anchorX=o.x+o.width/2-(t.x+t.right)/2}switch(e.verticalAlignment){case"Auto":case"Top":var u;u=o.y+e.margin.top,e.anchorY="TopToBottom"===h?u:t.bottom+u;break;case"Bottom":var f;f=o.y+o.height-e.margin.bottom,e.anchorY="TopToBottom"===h?f-t.bottom:f;break;case"Center":var g=void 0;g=o.y+o.height/2,e.anchorY="TopToBottom"===e.orientation?g-(t.y+t.bottom)/2:g+(t.y+t.bottom)/2}}else{switch(e.horizontalAlignment){case"Auto":case"Left":var m;m=o.x+e.margin.left,e.anchorX="LeftToRight"===h?m:t.bottom+m;break;case"Right":var v;v=o.x+o.width-e.margin.right,e.anchorX="LeftToRight"===h?v-t.bottom:v;break;case"Center":g=void 0;g=o.width/2+o.x,e.anchorX="LeftToRight"===e.orientation?g-(t.y+t.bottom)/2:g+(t.y+t.bottom)/2}switch(e.verticalAlignment){case"Top":e.anchorY=o.y+e.margin.top-t.x;break;case"Auto":case"Center":e.anchorY=o.y+o.height/2-(t.right+t.x)/2;break;case"Bottom":e.anchorY=o.y+o.height-e.margin.bottom-t.right}}},e.prototype.updateConnectors=function(e,t,i){var n,r,o,a;if(r=e.graphNodes[t.id],t.outEdges.length)for(n=0;n<t.outEdges.length;n++)(a=e.nameTable[t.outEdges[n]]).points=[],o=e.nameTable[a.targetID],a.visible&&(a.visited=!0,e.getConnectorSegments?e.getConnectorSegments(a):r&&-1!==r.tree.children.indexOf(a.targetID)&&(a.segments=[],"OrganizationalChart"===e.type&&"Orthogonal"===a.type&&this.updateSegments(e,a,t,o,n)),o&&(o.isExpanded||this.hasChild(e,o))&&this.updateConnectors(e,o,i+1));if(r&&r.tree.assistants.length)for(n=0;n<r.tree.assistants.length;n++)o=e.nameTable[r.tree.assistants[n]],a=e.nameTable[o.inEdges[0]],this.get3Points(e,t,o,a),(o.isExpanded||this.hasChild(e,o))&&this.updateConnectors(e,o,i+1)},e.prototype.updateSegments=function(e,t,i,n,r){var o=e.graphNodes[i.id];o.tree.assistants.length?this.updateSegmentsForHorizontalOrientation(e,i,n,t):"Horizontal"===o.tree.orientation&&"Balanced"===o.tree.type?this.updateSegmentsForBalancedTree(e,t,i,n,r):"Horizontal"===o.tree.orientation?this.updateSegmentsForHorizontalOrientation(e,i,n,t):o.tree.offset<5?this.get5Points(e,i,n,t):this.get3Points(e,i,n,t)},e.prototype.updateSegmentsForBalancedTree=function(e,t,i,n,r){var o,a=e.graphNodes[i.id];if(5===a.tree.children.length&&r>2){o=a.tree.children[1],isNaN(e.graphNodes[o].treeWidth)&&(e.graphNodes[o].treeWidth=e.nameTable[o].actualSize.width);var s=3!==r?1:-1;-1!==e.orientation.indexOf("Left")?e.nameTable[o].offsetY-e.graphNodes[o].treeWidth/2-e.verticalSpacing*s/2:e.nameTable[o].offsetX+e.graphNodes[o].treeWidth/2+e.horizontalSpacing*s/2,this.getSegmentsForMultipleRows(e,i,n,t)}else a.tree.children.length>5?r<4?this.getSegmentsForMultipleRows(e,i,n,t):this.updateSegmentsForHorizontalOrientation(e,i,n,t):4===a.tree.children.length?r<2?this.getSegmentsForMultipleRows(e,i,n,t):this.updateSegmentsForHorizontalOrientation(e,i,n,t):this.getSegmentsForMultipleRows(e,i,n,t)},e.prototype.get3Points=function(e,t,i,n){var r=[],o=this.getBounds(t),a=this.getBounds(i);if(-1!==e.orientation.indexOf("Top")){var s=0===e.orientation.indexOf("Top")?o.bottomCenter:o.topCenter,l=t.offsetX>i.offsetX?a.middleRight:a.middleLeft;r.push(s,{x:o.bottomCenter.x,y:l.y},l)}else{s=0===e.orientation.indexOf("Left")?o.middleRight:o.middleLeft,l=t.offsetY>i.offsetY?a.bottomCenter:a.topCenter;r.push(s,{x:a.bottomCenter.x,y:o.middleRight.y},l)}this.getSegmentsFromPoints(r,n)},e.prototype.get5Points=function(e,t,i,n){var r,o,a,s,l=[],c=this.getBounds(t),d=this.getBounds(i);e.graphNodes[t.id];-1!==e.orientation.indexOf("Top")?(r=t.offsetY<i.offsetY?c.bottomCenter:c.topCenter,s=e.verticalSpacing/4*(t.offsetY<i.offsetY?1:-1),a=e.horizontalSpacing/2*(t.offsetX>i.offsetX?1:-1),o=t.offsetX>i.offsetX?d.middleRight:d.middleLeft,l.push(r,{x:r.x,y:r.y+s},{x:o.x+a,y:r.y+s},{x:o.x+a,y:o.y},o)):(r=t.offsetX>i.offsetX?c.middleLeft:c.middleRight,o=t.offsetY>i.offsetY?d.bottomCenter:d.topCenter,a=e.horizontalSpacing/4*(t.offsetX<i.offsetX?1:-1),s=e.verticalSpacing/2*(t.offsetY>i.offsetY?1:-1),l.push(r,{x:r.x+a,y:r.y},{x:r.x+a,y:r.y+s},{x:o.x,y:r.y+s},o)),this.getSegmentsFromPoints(l,n)},e.prototype.getSegmentsFromPoints=function(e,t){for(var i,n=[],r=0;r<e.length-2;r++)(i=new Er(t,"segments",{type:"Orthogonal"},!0)).direction=E.direction(e[r],e[r+1]),i.length=E.distancePoints(e[r],e[r+1]),n.push(i);t.segments=n},e.prototype.getSegmentsForMultipleRows=function(e,t,i,n){var r,o,a=[],s=this.getBounds(i),l=this.getBounds(t);switch(e.orientation){case"TopToBottom":r={x:l.bottomCenter.x,y:l.bottomCenter.y+e.verticalSpacing/4},(o=new Er(n,"segments",{type:"Orthogonal"},!0)).direction=E.direction(l.bottomCenter,r),o.length=E.distancePoints(l.bottomCenter,r),a.push(o);break;case"BottomToTop":r={x:l.bottomCenter.x,y:l.topCenter.y-e.verticalSpacing/4},(o=new Er(n,"segments",{type:"Orthogonal"},!0)).direction=E.direction(l.topCenter,r),o.length=E.distancePoints(l.topCenter,r),a.push(o);break;case"LeftToRight":if(r={x:l.middleRight.x+e.verticalSpacing/4,y:l.middleRight.y},(o=new Er(n,"segments",{type:"Orthogonal"},!0)).direction=E.direction(l.middleRight,r),o.length=E.distancePoints(l.middleRight,r),a.push(o),s.center.y!==l.center.y){var c={x:l.middleRight.x+e.verticalSpacing/4,y:s.middleLeft.y};(o=new Er(n,"segments",{type:"Orthogonal"},!0)).direction=E.direction(r,c),o.length=E.distancePoints(r,c),a.push(o)}break;case"RightToLeft":if(r={x:l.middleLeft.x-e.verticalSpacing/4,y:l.middleRight.y},(o=new Er(n,"segments",{type:"Orthogonal"},!0)).direction=E.direction(l.middleLeft,r),o.length=E.distancePoints(l.middleLeft,r),a.push(o),s.center.y!==l.center.y){var d={x:l.middleLeft.x-e.verticalSpacing/4,y:s.middleLeft.y};(o=new Er(n,"segments",{type:"Orthogonal"},!0)).direction=E.direction(d,d),o.length=E.distancePoints(d,d),a.push(o)}}n.segments=a},e.prototype.updateSegmentsForHorizontalOrientation=function(e,t,i,n){var r,o,a=[],s=this.getBounds(t),l=this.getBounds(i);switch(e.orientation){case"TopToBottom":r={x:s.bottomCenter.x,y:l.topCenter.y-e.verticalSpacing/2},(o=new Er(n,"segments",{type:"Orthogonal"},!0)).direction=E.direction(s.bottomCenter,r),o.length=E.distancePoints(s.bottomCenter,r),a.push(o);break;case"BottomToTop":r={x:s.topCenter.x,y:l.bottomCenter.y+e.verticalSpacing/2},(o=new Er(n,"segments",{type:"Orthogonal"},!0)).direction=E.direction(s.topCenter,r),o.length=E.distancePoints(s.topCenter,r),a.push(o);break;case"LeftToRight":if(r={x:l.middleLeft.x-e.verticalSpacing/2,y:s.middleRight.y},(o=new Er(n,"segments",{type:"Orthogonal"},!0)).direction=E.direction(s.middleRight,r),o.length=E.distancePoints(s.middleRight,r),a.push(o),l.center.y!==s.center.y){var c={x:l.middleLeft.x-e.verticalSpacing/2,y:l.middleLeft.y};(o=new Er(n,"segments",{type:"Orthogonal"},!0)).direction=E.direction(r,c),o.length=E.distancePoints(r,c),a.push(o)}break;case"RightToLeft":if(r={x:l.middleRight.x+e.verticalSpacing/2,y:s.middleRight.y},(o=new Er(n,"segments",{type:"Orthogonal"},!0)).direction=E.direction(s.middleLeft,r),o.length=E.distancePoints(s.middleLeft,r),a.push(o),l.center.y!==s.center.y){var d={x:l.middleRight.x+e.verticalSpacing/2,y:l.middleLeft.y};(o=new Er(n,"segments",{type:"Orthogonal"},!0)).direction=E.direction(r,d),o.length=E.distancePoints(r,d),a.push(o)}}return n.segments=a,[]},e.prototype.updateNodes=function(e,t,i,n,r,o){var a,s,l,c,d,h;if(t&&!t.excludeFromLayout){l=t.actualSize.width,c=t.actualSize.height,d=e.anchorX,h=e.anchorY,"LeftToRight"===e.orientation?(d+=e.graphNodes[t.id].y+l/2,h+=e.graphNodes[t.id].x+i+c/2):"RightToLeft"===e.orientation?(d-=e.graphNodes[t.id].y+l/2,h+=e.graphNodes[t.id].x+i+c/2):"TopToBottom"===e.orientation?(d+=e.graphNodes[t.id].x+i+l/2,h+=e.graphNodes[t.id].y+c/2):(d+=e.graphNodes[t.id].x+i+l/2,h-=e.graphNodes[t.id].y+c/2),e.graphNodes&&(d+=r=r||0,h+=o=o||0,this.isAnimation||(t.offsetX=d,t.offsetY=h));var p={id:t.id,differenceX:d-t.offsetX,differenceY:h-t.offsetY};e.objects.push(p);var u=void 0;if(u=[],this.hasChild(e,t))for(a=0;a<e.graphNodes[t.id].tree.children.length;a++)s=e.nameTable[e.graphNodes[t.id].tree.children[a]],this.updateNodes(e,s,i+(e.graphNodes[t.id].subTreeTranslation||0),n,r,o),u.push(s);if(e.graphNodes[t.id].tree.assistants.length)for(a=0;a<e.graphNodes[t.id].tree.assistants.length;a++)s=e.nameTable[e.graphNodes[t.id].tree.assistants[a]],this.updateNodes(e,s,i+(e.graphNodes[t.id].subTreeTranslation||0),null,r,o)}},e}()),Lp=function(){function e(){this.isAnimation=!1}return e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"MindMapChart"},e.prototype.updateLayout=function(e,t,i,n,r,o){var a;if(a=this.checkRoot(e,i,r,o,t))i.fixedNode=a;else for(var s=0,l=e;s<l.length;s++){if(!(m=l[s]).excludeFromLayout&&(!m.inEdges||!m.inEdges.length)){i.fixedNode=m.id;break}}var c=t[i.fixedNode],d=this.findFirstLevelNodes(c,i,t),h=[],p=[],u=Pc(i.getBranch);u=u||Pc(this.getBranch);for(var f=0,g=d;f<g.length;f++){var m,v=u(m=g[f],d);"Left"===(v=m&&m.branch?m.branch:v)?h.push(m):p.push(m)}var y=new _(0,0,n.x,n.y);t[i.fixedNode].offsetX=y.x+y.width/2,t[i.fixedNode].offsetY=y.y+y.height/2,h.length&&this.updateMindMapBranch(e,p,t,i,n,r,"Left"),p.length&&this.updateMindMapBranch(e,h,t,i,n,r,"Right")},e.prototype.checkRoot=function(e,t,i,n,r){for(var o=0,a=e;o<a.length;o++){var s=a[o];if(!s.excludeFromLayout){if(s.data&&(s.data[i].toString()===n||s.data[i].toString()===t.root))return s.id;if(!s.data&&s.id===t.root)return s.id}}return""},e.prototype.updateMindMapBranch=function(e,t,i,n,r,o,a){var s;(s={type:"HierarchicalTree",horizontalSpacing:n.verticalSpacing,verticalSpacing:n.horizontalSpacing,verticalAlignment:n.verticalAlignment,horizontalAlignment:n.horizontalAlignment,fixedNode:n.fixedNode,getLayoutInfo:Pc(n.getLayoutInfo),layoutInfo:n.layoutInfo,margin:n.margin,root:n.fixedNode}).orientation="Left"===a?"LeftToRight":"RightToLeft",this.excludeFromLayout(t,i,!0),(new Mp).updateLayout(e,i,s,r,o),this.excludeFromLayout(t,i,!1)},e.prototype.getBranch=function(e,t){return t.indexOf(e)%2===0?"Left":"Right"},e.prototype.excludeFromLayout=function(e,t,i){for(var n=0,r=e;n<r.length;n++){t[r[n].id].excludeFromLayout=i}},e.prototype.findFirstLevelNodes=function(e,t,i){var n=[];if(e&&e.outEdges.length)for(var r=0,o=e.outEdges;r<o.length;r++){var a=o[r];n.push(i[i[a].targetID])}return n},e}(),Rp=(function(){function e(){}e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"RadialTree"},e.prototype.updateLayout=function(e,t,i,n){var r={type:i.type,nameTable:t,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},layoutNodes:[],orientation:i.orientation,horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,verticalAlignment:i.verticalAlignment,horizontalAlignment:i.horizontalAlignment,fixedNode:i.fixedNode,margin:i.margin,bounds:i.bounds,objects:[],root:i.root};this.doLayout(r,e,t,n)},e.prototype.doLayout=function(e,t,i,n){for(var r,o=0;o<t.length;o++)(r=t[o]).excludeFromLayout||(e.graphNodes[r.id]=this.setUpLayoutInfo(e,r),r.inEdges&&r.inEdges.length||e.firstLevelNodes.push(r));e.root&&i[e.root]?e.centerNode=i[e.root]:e.firstLevelNodes.length&&(e.centerNode=e.firstLevelNodes[0],e.root=e.centerNode.id),e.centerNode&&(this.updateEdges(e,e.centerNode,0,i),this.depthFirstAllignment(e,e.centerNode,0,0),this.populateLevels(e),this.transformToCircleLayout(e),this.updateAnchor(e,n),this.updateNodes(e,e.centerNode,i))},e.prototype.updateEdges=function(e,t,i,n){var r=e.graphNodes[t.id];e.layoutNodes.push(r),r.level=i,r.visited=!0,e.maxLevel=Math.max(e.maxLevel,i);for(var o=0;o<t.outEdges.length;o++){var a=n[n[t.outEdges[o]].targetID];a.excludeFromLayout||a.visited||(r.children.push(a),this.updateEdges(e,a,i+1,n))}},e.prototype.depthFirstAllignment=function(e,t,i,n){var r,o=e.graphNodes[t.id];if(o.children.length){n+=300;for(var a=0;a<o.children.length;a++)i=(r=this.depthFirstAllignment(e,o.children[a],i,n)).x,n=r.y;o.children=o.children.sort((function(t,i){return e.graphNodes[t.id].x-e.graphNodes[i.id].x}));var s=e.graphNodes[o.children[0].id].min,l=e.graphNodes[o.children[o.children.length-1].id].max;if(o.x=s+(l-s)/2,i=l+e.horizontalSpacing,o.segmentOffset=l+e.horizontalSpacing,o.x-=o.width/2,o.y-=o.height/2,o.min=s,o.max=l,o.x<s&&o.visited){o.x=s,i=o.x+o.width/2-(l-s)/2,o.visited=!1;for(a=0;a<o.children.length;a++)r=this.depthFirstAllignment(e,o.children[a],i,n);o.visited=!0,i=o.x+o.width+e.horizontalSpacing}i=i<(l=e.graphNodes[o.children[o.children.length-1].id].segmentOffset)?l:i,n-=300,o.y=n}else o.x=i,o.y=n,o.min=i,o.max=i+o.width,i+=o.width+e.horizontalSpacing;return{x:i,y:n}},e.prototype.populateLevels=function(e){var t=[],i=Math.min.apply(Math,e.layoutNodes.map((function(e){return e.x}))),n=Math.max.apply(Math,e.layoutNodes.map((function(t){return t.x+t.width+e.horizontalSpacing})))-i;e.levels=[];for(var r=function(r){var o={};t=(t=e.layoutNodes.filter((function(e){return e.level===r?e:null}))).sort((function(e,t){return e.x-t.x})),o.min=t[0].x,o.max=t[t.length-1].x+t[t.length-1].width+e.horizontalSpacing,o.actualCircumference=0,o.height=0;for(var a=0;a<t.length;a++)t[a].height>o.height&&(o.height=t[a].height),o.actualCircumference+=Math.max(t[a].width,t[a].height),a!==t.length-1&&(o.actualCircumference+=e.horizontalSpacing);o.circumference=o.max-o.min,o.actualCircumference<o.circumference&&(o.circumference=(o.circumference+o.actualCircumference)/2),o.radius=o.circumference/(2*Math.PI)+o.height,o.nodes=[],r>1&&e.levels[r-1].radius+e.levels[r-1].height>=o.radius&&(o.radius=e.levels[r-1].radius+e.levels[r-1].height);for(var s=0;s<t.length;s++)t[s].ratio=Math.abs(t[s].x+t[s].width/2-i)/n,o.nodes.push(t[s]);e.levels.push(o)},o=0;o<=e.maxLevel;o++)r(o)},e.prototype.transformToCircleLayout=function(e){var t=e.graphNodes[e.centerNode.id];t.x=0,t.y=0;for(var i=1;i<e.levels.length;i++)for(var n=0;n<e.levels[i].nodes.length;n++){var r=e.levels[i].nodes[n];r.x=Math.cos(360*r.ratio*Math.PI/180)*(e.levels[i].radius+e.verticalSpacing*i),r.y=Math.sin(360*r.ratio*Math.PI/180)*(e.levels[i].radius+e.verticalSpacing*i),e.anchorX=Math.min(e.anchorX,r.x),e.anchorY=Math.min(e.anchorY,r.y)}},e.prototype.updateAnchor=function(e,t){e.anchorX=e.centerNode.offsetX||t.x/2,e.anchorY=e.centerNode.offsetY||t.y/2},e.prototype.updateNodes=function(e,t,i){var n=e.graphNodes[t.id],r=n.x+e.anchorX,o=n.y+e.anchorY;t.offsetX+=r,t.offsetY+=o;for(var a=0;a<n.children.length;a++){var s=n.children[a];this.updateNodes(e,i[s.id],i)}},e.prototype.setUpLayoutInfo=function(e,t){var i={};return i.name=t.id,i.x=0,i.y=0,i.min=0,i.max=0,i.width=t.actualSize.width,i.height=t.actualSize.height,i.children=[],i.level=0,i.ratio=0,i.visited=!1,i}}(),function(){function e(e){this.velocityX=0,this.velocityY=0,this.nodes=[],this.graphNode=e;var t=Np(this.graphNode);this.location=t.center,this.nodes=[],e.treeInfo.parents||(e.treeInfo.parents=[]),e.treeInfo.children||(e.treeInfo.children=[]),this.nodes=e.treeInfo.parents.concat(e.treeInfo.children)}return e.prototype.applyChanges=function(){this.graphNode.treeInfo.center=this.location},e}()),zp=(function(){function e(){this.cdCOEF=.442,this.cfMAXVELOCITY=50,this.cnMAXITERACTION=1e3,this.cnSPRINGLENGTH=100,this.mszMaxForceVelocity={width:this.cfMAXVELOCITY,height:this.cfMAXVELOCITY},this.springLength=0,this.springFactor=this.cdCOEF,this.maxIteration=this.cnMAXITERACTION,this.springLength=this.cnSPRINGLENGTH}e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"SymmetricalLayout"},e.prototype.doGraphLayout=function(e){var t=this.selectedNode;t.treeInfo.Bounds=e.getModelBounds(e.nodes);var i=t.treeInfo.GraphNodes,n=this.convertGraphNodes(i),r=n.length;r=Math.min(this.maxIteration,r*r*r),this.preLayoutNodes(n,t.treeInfo.Bounds);for(var o=0,a=r;o<a;o++)this.makeSymmetricLayout(n),this.appendForces(n);this.resetGraphPosition(n,t)},e.prototype.preLayoutNodes=function(e,t){for(var i=Math.max(t?t.width:25,t?t.height:25),n=i/2,r=i/2,o=2*Math.PI/e.length,a=o,s=0;s<e.length;s++){var l=e[s];this.getForceNode(l).location={x:n+i*Number(Math.cos(a).toFixed(2)),y:r+i*Number(Math.sin(a).toFixed(2))},a-=o}},e.prototype.doLayout=function(e){this.selectedNode=e.selectedNode,this.doGraphLayout(e)},e.prototype.makeSymmetricLayout=function(e){for(var t,i,n=0;n<e.length;n++){for(var r=e[n],o=(t=this.getForceNode(r)).nodes,a=0;a<o.length;a++){Bp((f=o[a]).id,e)&&this.calcNodesForce(t,this.getForceNode(f))}for(var s=0,l=o.length;s<l&&!(l<2);s++){var c=this.getForceNode(o[s]),d=s+1>=l?this.getForceNode(o[0]):this.getForceNode(o[s+1]),h=360/o.length/2*Math.PI/180,p=2*this.springLength*Math.sin(h);this.calcRelatesForce(c,d,p)}for(var u=0;u<e.length;u++){var f;Bp((f=e[u]).id,o)||f.id===r.id||(i=this.getForceNode(f),this.updateNeigbour(t,i))}}},e.prototype.appendForces=function(e){for(var t=null,i=0;i<e.length;i++){var n=e[i],r=(t=this.getForceNode(n)).location;r.x+=Math.min(t.velocityX,this.mszMaxForceVelocity.width),r.y+=Math.min(t.velocityY,this.mszMaxForceVelocity.height),t.velocityX=0,t.velocityY=0,t.location=r}},e.prototype.resetGraphPosition=function(e,t){for(var i,n={width:Number.MAX_VALUE,height:Number.MAX_VALUE},r=null,o=0;o<e.length;o++){i=e[o];var a={x:(r=this.getForceNode(i)).location.x-i.actualSize.width/2,y:r.location.y-i.actualSize.height/2};n.width=Math.min(n.width,a.x),n.height=Math.min(n.height,a.y)}for(o=0;o<e.length;o++){i=e[o],(a=(r=this.getForceNode(i)).location).x-=n.width-(t.treeInfo.location?t.treeInfo.location.x:0),a.y-=n.height-(t.treeInfo.location?t.treeInfo.location.y:0),r.location=a,r.applyChanges()}},e.prototype.convertGraphNodes=function(e){for(var t=[],i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];if(e[r]){var o=e[r],a=new Rp(o);o.treeInfo.tag=a,t.push(o)}}return t},e.prototype.getForceNode=function(e){return e.treeInfo.tag},e.prototype.updateNeigbour=function(e,t){if(null!=t&&null!=e){var i=this.pointDistance(e.location,t.location),n=this.lineAngle(e.location,t.location),r=.9*this.springLength;i<r&&this.calcForce(i,r,n,t)}},e.prototype.lineAngle=function(e,t){var i=0,n=t.x-e.x,r=t.y-e.y;return 0===n?i=r<=0?3*Math.PI/2:Math.PI/2:0===r?i=n<0?Math.PI:0:(i=Math.atan(r/n),n<0&&r>0||n<0&&r<0?i=Math.PI+i:n>0&&r<0&&(i=2*Math.PI+i)),i},e.prototype.pointDistance=function(e,t){var i=0,n=t.x-e.x,r=t.y-e.y,o=n*n+r*r;return o>0&&(i=Math.sqrt(o)),i},e.prototype.calcRelatesForce=function(e,t,i){var n=this.pointDistance(e.location,t.location),r=this.lineAngle(e.location,t.location);n<i&&this.calcForce(n,i,r,t)},e.prototype.updateLayout=function(e,t,i,n,r,o){(new zp).updateLayout(e,t,i,n,r,o)},e.prototype.calcNodesForce=function(e,t){var i=this.pointDistance(e.location,t.location),n=this.lineAngle(e.location,t.location);(i>this.springLength||i<this.springLength)&&this.calcForce(i,this.springLength,n,t)},e.prototype.calcForce=function(e,t,i,n){var r=n.nodes.length,o=e-t,a=this.springFactor/(r*r)*Math.sqrt(r);if(0!==o){var s=o*a,l=Math.cos(i)*s,c=Math.sin(i)*s;n.velocityX-=l,n.velocityY-=c}}}(),function(){function e(){this.visitedStack=[],this.cycleEdgesCollection=[],this.graphObjects=[],this.passedNodes=[]}return e.prototype.updateLayout=function(e,t,i,n,r,o){this.nameTable=n,this.nodes=e,this.connectors=t;var a=e;a.length>0&&(this.mhelperSelectedNode=uc(a[0]));for(var s=0,l=e;s<l.length;s++){var c=void 0;(c=g=l[s]).treeInfo={},c.treeInfo.graphType="Node",this.graphObjects.push(c)}for(var d=0,h=t;d<h.length;d++){var p=void 0;(p=h[d]).treeInfo={},p.treeInfo.graphType="Connector",this.graphObjects.push(p)}this.updateLayout1(this.graphObjects,i);for(var u=this.getModelBounds(a),f=0;f<a.length;f++){var g=a[f],m=(o.x-u.width)/2,v=r.margin||{};v.left=v.left||0,v.right=v.right||0,v.top=v.top||0,v.bottom=v.bottom||0,r.margin.left&&(v.left=r.margin.left),r.margin.top&&(v.top=r.margin.top);var y=g.treeInfo.tag.location.x-(g.offsetX-g.actualSize.width/2)-u.x+m+v.left,b=g.treeInfo.tag.location.y-(g.offsetY-g.actualSize.height/2)-u.y+v.top;g.offsetX+=y,g.offsetY+=b,delete g.treeInfo}return!0},e.prototype.getModelBounds=function(e){e=e.slice();for(var t,i=null,n=null,r=0;r<e.length;r++){var o=Np(t=e[r]);i=new _(t.treeInfo.tag?t.treeInfo.tag.location.x:o.x,t.treeInfo.tag?t.treeInfo.tag.location.y:o.y,t.actualSize.width,t.actualSize.height),n=n?n.uniteRect(i):i}return n},e.prototype.updateLayout1=function(e,t){this.detectCyclesInGraph(e);var i=e.length;if(i>0){for(var n=[],r=[],o=[],a=0;a<e.length;a++){var s=e[a];void 0===s.treeInfo.isCycleEdge&&(s.treeInfo.isCycleEdge=!1),"Connector"!==s.treeInfo.graphType||s.treeInfo.isCycleEdge?"Connector"===s.treeInfo.graphType?n.push(s):o.push(s):r.push(s)}for(r=r.concat(o),r=n.concat(r);i>this.dictionaryLength(this.passedNodes);)if(this.getNodesToPosition(r),null!=this.selectedNode){t.doLayout(this),this.selectedNode=null,this.visitedStack=[];for(var l=0,c=this.cycleEdgesCollection;l<c.length;l++){c[l].treeInfo.isCycleEdge=!1}}this.passedNodes=null,this.selectedNode=null}return!1},e.prototype.getNodesToPosition=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(!Bp(i.id,this.passedNodes)){i&&this.selectNodes(i);break}}},e.prototype.selectNodes=function(e){var t=e;"Connector"===e.treeInfo.graphType?this.exploreGraphEdge(e):null!=t&&this.addNode(e,"passed")&&(this.addNode(e,"selected"),this.isConnectedToAnotherNode(t)?(this.selectedNode={treeInfo:{}},this.selectedNode.treeInfo.LeftMargin=10,this.selectedNode.treeInfo.TopMargin=10,this.selectConnectedNodes(t)):this.selectedNode=e)},e.prototype.selectConnectedNodes=function(e){var t=this.selectedNode;t.treeInfo.GraphNodes||(t.treeInfo.GraphNodes={});var i=e;if(null!=i&&this.addNode(i,"passed")){var n=i.id;if(this.dictionaryContains(t.treeInfo.GraphNodes,i)){var r=t.treeInfo.GraphNodes[n];r.treeInfo.Added&&(r.treeInfo.Added=!1,this.getConnectedRelatives(r),this.exploreRelatives(e))}else{var o=this.addGraphNode(i);this.getConnectedRelatives(o),this.exploreRelatives(e)}}},e.prototype.exploreRelatives=function(e){this.exploreRelatives1(e,"Parents"),this.exploreRelatives1(e,"Children")},e.prototype.exploreRelatives1=function(e,t){var i=[];"Parents"===t?i=e.inEdges:"Children"===t&&(i=e.outEdges);for(var n=0;n<i.length;n++){var r=this.nameTable[i[n]];if(this.addNode(r,"passed")){var o=this.nameTable[r.sourceID],a=this.nameTable[r.targetID];"Parents"===t&&null!=o&&Bp(o.id,this.nodes)?this.selectConnectedNodes(this.nameTable[r.sourceID]):"Children"===t&&null!=a&&Bp(a.id,this.nodes)&&this.selectConnectedNodes(this.nameTable[r.targetID])}}},e.prototype.getConnectedRelatives=function(e){this.getConnectedParents(e),this.getConnectedChildren(e)},e.prototype.dictionaryContains=function(e,t){for(var i=Object.keys(e),n=0;n<i.length;n++)if(i[n]===t.id)return!0;return!1},e.prototype.dictionaryLength=function(e){return Object.keys(e).length},e.prototype.getConnectedChildren=function(e){for(var t=this.selectedNode,i=e,n=0;n<i.outEdges.length;n++){var r=this.nameTable[i.outEdges[n]];if(!r.treeInfo.isCycleEdge){var o=this.nameTable[r.targetID];if(Bp(o.id,this.nodes)&&null!=o&&o.visible){var a=void 0;this.dictionaryContains(t.treeInfo.GraphNodes,o)?a=t.treeInfo.GraphNodes[o.id]:(a=this.addGraphNode(o)).treeInfo.Added=!0,e.treeInfo.children||(e.treeInfo.children=[]),a.treeInfo.parents||(a.treeInfo.parents=[]),this.setNode(a.treeInfo.parents,e),this.findNode(e.treeInfo.children,a.id)<0&&e.treeInfo.children.push(a)}}}},e.prototype.getConnectedParents=function(e){for(var t=this.selectedNode,i=e,n=0;n<i.inEdges.length;n++){var r=this.nameTable[i.inEdges[n]];if(!r.treeInfo.isCycleEdge){var o=this.nameTable[r.sourceID];if(Bp(o.id,this.nodes)&&null!=o&&o.visible){var a=void 0;this.dictionaryContains(t.treeInfo.GraphNodes,o)?a=t.treeInfo.GraphNodes[o.id]:(a=this.addGraphNode(o)).treeInfo.Added=!0,e.treeInfo.parents||(e.treeInfo.parents=[]),a.treeInfo.children||(a.treeInfo.children=[]),this.setNode(a.treeInfo.children,e),this.findNode(e.treeInfo.parents,a.id)<0&&e.treeInfo.parents.push(a)}}}},e.prototype.setNode=function(e,t){var i=this.findNode(e,t.id);i>=0&&i<e.length?e[i]=t:e.push(t)},e.prototype.findNode=function(e,t){var i=-1;if(null!=e&&""!==t)for(var n=0,r=e.length;n<r;n++){var o=e[n];if("string"===typeof o&&o===t){i=n;break}if(null!=o&&o.id===t){i=n;break}}return i},e.prototype.addGraphNode=function(e){var t=this.selectedNode;t.treeInfo.GraphNodes||(t.treeInfo.GraphNodes={});var i=e;if(null!=t){t.treeInfo.GraphNodes[i.id]=i;var n=this.mhelperSelectedNode;null!=n&&e.id===n.id&&(this.mhelperSelectedNode=i)}return i},e.prototype.isConnectedToAnotherNode=function(e){var t=!1;return e.inEdges.concat(e.outEdges).length>0&&(null!=e.inEdges&&e.inEdges.length>0&&(t=this.searchEdgeCollection(e.inEdges,"FromNode")),!t&&null!=e.outEdges&&e.outEdges.length>0&&(t=this.searchEdgeCollection(e.outEdges,"ToNode"))),t},e.prototype.searchEdgeCollection=function(e,t){for(var i=!1,n=0;n<e.length-1;n++){var r=this.nameTable[e[n]];if(this.addNode(r,"passed")&&(!r.treeInfo.isCycleEdge&&("FromNode"===t&&null!=this.nameTable[r.sourceID]||"ToNode"===t&&null!=this.nameTable[r.targetID]))){i=!0;break}}return i},e.prototype.exploreGraphEdge=function(e){var t=e;if(null!=t&&!t.treeInfo.isCycleEdge&&this.addNode(e,"passed")){this.addNode(e,"selected");var i=this.nameTable[t.sourceID],n=this.nameTable[t.targetID];null!=i?this.selectNodes(i):null!=n?this.selectNodes(n):this.selectedNode=e}},e.prototype.addNode=function(e,t){var i=e;return"passed"!==t&&i.visible||this.dictionaryContains(this.passedNodes,i)||(this.passedNodes[i.id]=i),!!i.visible},e.prototype.detectCyclesInGraph=function(e){for(var t=[],i=[],n=0;n<e.length;n++)"Connector"!==e[n].treeInfo.graphType&&t.push(e[n]);if(t.length>0)for(i.push(t[0]),this.visitedStack.push(t[0]);i.length>0;){var r=i[i.length-1],o=this.getUnVisitedChildNodes(r);if(o.length>0){var a=o[0],s=o[o.length-1];Bp(a.id,this.visitedStack)?(s.treeInfo.isCycleEdge=!0,this.cycleEdgesCollection.push(s)):(i.push(a),this.visitedStack.splice(0,0,a))}else i.pop()}},e.prototype.getUnVisitedChildNodes=function(e){var t=[];if(e.outEdges.length>0){for(var i=0;i<e.outEdges.length;i++){var n=this.nameTable[e.outEdges[i]];if(!Bp(n.id,this.visitedStack)){var r=this.nameTable[n.targetID];return null!=r&&t.push(r),t.push(n),this.visitedStack.splice(0,0,n),t}}return t}return t},e}());function Np(e){var t=e.offsetX-e.actualSize.width*e.pivot.x,i=e.offsetY-e.actualSize.height*e.pivot.y;return new _(t,i,e.actualSize.width,e.actualSize.height)}function Bp(e,t){for(var i=0;i<t.length;i++)if(t[i].id===e)return!0;return!1}!function(){function e(){}e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"ComplexHierarchicalTree"},e.prototype.doLayout=function(e,t,i,n,r){(new _p).doLayout(e,t,i,n,r)},e.prototype.getLayoutNodesCollection=function(e){for(var t,i=[],n=0;n<e.length;n++)(t=e[n]).inEdges.length+t.outEdges.length>0&&!t.parentId&&!t.processId&&i.push(t);return i}}();var _p=function(){function e(){this.nameTable={},this.crossReduction=new Wp}return e.prototype.createVertex=function(e,t,i,n,r,o){return{value:t,geometry:{x:i,y:n,width:r,height:o},name:t,vertex:!0,inEdges:e.inEdges.slice(),outEdges:e.outEdges.slice()}},e.prototype.getEdges=function(e){var t=[];if(e){for(var i=0;e.inEdges.length>0&&i<e.inEdges.length;i++)t.push(this.nameTable[e.inEdges[i]]);for(i=0;e.outEdges.length>0&&i<e.outEdges.length;i++)t.push(this.nameTable[e.outEdges[i]])}return t},e.prototype.findRoots=function(e){for(var t=[],i=null,n=-1e5,r=0,o=Object.keys(e);r<o.length;r++){for(var a=e[o[r]],s=this.getEdges(a),l=0,c=0,d=0;d<s.length;d++){this.getVisibleTerminal(s[d],!0).name===a.name?l++:c++}0===c&&l>0&&t.push(a);var h=l-c;h>n&&(n=h,i=a)}return 0===t.length&&null!=i&&t.push(i),t},e.prototype.getVisibleTerminal=function(e,t){var i=this.nameTable[e.targetID];t&&(i=this.nameTable[e.sourceID]);for(var n=0;n<this.vertices.length;n++)if(this.vertices[n].name===i.id)return this.vertices[n];return null},e.prototype.traverse=function(e,t,i,n,r,o){if(null!=e){var a=e.name;if(null==o||null!=o[a]){null==n[a]&&(n[a]=e),null!=o&&delete o[a];for(var s=this.getEdges(e),l=[],c=0;c<s.length;c++)l[c]=this.getVisibleTerminal(s[c],!0)===e;for(c=0;c<s.length;c++)if(!t||l[c]){for(var d=this.getVisibleTerminal(s[c],!l[c]),h=1,p=0;p<s.length;p++)if(p!==c){var u=l[p];this.getVisibleTerminal(s[p],!u)===d&&(u?h++:h--)}h>=0&&(n=this.traverse(d,t,s[c],n,r,o))}}else if(null==n[a])for(c=0;c<r.length;c++){var f=r[c];if(null!=f[a]){for(var g=0,m=Object.keys(f);g<m.length;g++){var v=m[g];n[v]=f[v]}return r.splice(c,1),n}}}return n},e.prototype.getModelBounds=function(e){e=e.slice();for(var t=null,i=null,n=0;n<e.length;n++)if(t=e[n].geometry,i){var r=Math.max(i.x+i.width,t.x+t.width),o=Math.max(i.y+i.height,t.y+t.height);i.x=Math.min(i.x,t.x),i.y=Math.min(i.y,t.y),i.width=r-i.x,i.height=o-i.y}else i={x:t.x,y:t.y,width:t.width,height:t.height};return i},e.prototype.doLayout=function(e,t,i,n,r){this.nameTable=t;var o={horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,orientation:i.orientation,marginX:i.margin.left,marginY:i.margin.top};r&&(r.edgeMapper=[]);var a=[];this.vertices=[];for(var s={},l=0;l<e.length;l++){var c=this.createVertex(e[l],e[l].id,0,0,e[l].actualSize.width,e[l].actualSize.height);if(this.vertices.push(c),(e[l].inEdges.length>0||e[l].outEdges.length>0)&&a.push(e[l]),s[c.name]=c,r)for(var d=e[l].outEdges.slice(),h=0;h<d.length;h++){var p=t[d[h]];r.setEdgeMapper({key:p,value:[]})}}var u,f=[];u=this.findRoots(s);for(l=0;l<u.length;l++){var g={};f.push(g),this.traverse(u[l],!0,null,g,f,s)}var m={marginX:0,marginY:0},v=[],y=!1;for(l=0;l<f.length;l++){g=f[l];for(var b=0,w=Object.keys(g);b<w.length;b++){var x=w[b];v.push(g[x])}"Linear"===i.arrangement&&l===f.length-1&&(y=!0);var O=new Hp(this,v,u,o);if(this.cycleStage(O),this.layeringStage(O),r&&"DifferentPoint"===i.connectionPointOrigin||y){var S=this.matrixModel({model:O,matrix:[],rowOffset:[]});r.arrangeElements(S,i)}else"Nonlinear"===i.arrangement&&(this.crossingStage(O),m=this.placementStage(O,m.marginX,m.marginY),v=[])}var C=this.getModelBounds(this.vertices);this.updateMargin(i,o,C,n);for(l=0;l<this.vertices.length;l++){var P=this.vertices[l];if(P){var j=this.nameTable[P.name];j.offsetX=0,j.offsetY=0;var I=P.geometry.x-(j.offsetX-j.actualSize.width/2)+o.marginX,E=P.geometry.y-(j.offsetY-j.actualSize.height/2)+o.marginY,T=I,A=E;"BottomToTop"===o.orientation?A=C.height-E:"RightToLeft"===o.orientation&&(T=C.width-I),j.offsetX+=T-j.offsetX,j.offsetY+=A-j.offsetY}}if(!y)for(l=0;l<this.vertices.length;l++)this.isNodeOverLap(this.nameTable[this.vertices[l].name],i);r&&"DifferentPoint"===i.connectionPointOrigin&&r.updateLayout(n,C,i,o,a,t)},e.prototype.matrixModel=function(e){return e.model=e.model,e.matrix=e.matrix||[],e.rowOffset=e.rowOffset||[],e},e.prototype.calculateRectValue=function(e){var t={x:0,y:0,right:0,bottom:0,height:0,width:0};return t.x=e.offsetX-e.actualSize.width/2,t.right=e.offsetX+e.actualSize.width/2,t.y=e.offsetY-e.actualSize.height/2,t.bottom=e.offsetY+e.actualSize.height/2,t},e.prototype.isNodeOverLap=function(e,t){for(var i={x:0,y:0,right:0,bottom:0,height:0,width:0},n=0;n<this.vertices.length;n++){var r,o={x:0,y:0,width:0,height:0};r=this.nameTable[this.vertices[n].value],e.id!==r.id&&0!==r.offsetX&&0!==r.offsetY&&(i=this.calculateRectValue(e),o=this.calculateRectValue(r),this.isIntersect(o,i,t)&&("TopToBottom"===t.orientation||"BottomToTop"===t.orientation?e.offsetX+=t.horizontalSpacing:e.offsetY+=t.verticalSpacing,this.isNodeOverLap(e,t)))}},e.prototype.isIntersect=function(e,t,i){return!(Math.floor(e.right+i.horizontalSpacing)<=Math.floor(t.x)||Math.floor(e.x-i.horizontalSpacing)>=Math.floor(t.right)||Math.floor(e.y-i.verticalSpacing)>=Math.floor(t.bottom)||Math.floor(e.bottom+i.verticalSpacing)<=Math.floor(t.y))},e.prototype.updateMargin=function(e,t,i,n){var r,o={x:0,y:0,width:n.x,height:n.y},a=i.x,s=i.y,l=i.x+i.width,c=i.y+i.height;if(r=e.bounds?e.bounds:o,"TopToBottom"===t.orientation||"BottomToTop"===t.orientation){switch(e.horizontalAlignment){case"Auto":case"Left":t.marginX=r.x-a+e.margin.left;break;case"Right":t.marginX=r.x+r.width-e.margin.right-l;break;case"Center":t.marginX=r.x+r.width/2-(a+l)/2}switch(e.verticalAlignment){case"Top":var d;d=r.y+e.margin.top,t.marginY="TopToBottom"===t.orientation?d:-d;break;case"Bottom":var h;h=r.y+r.height-e.margin.bottom,t.marginY="TopToBottom"===t.orientation?h-c:-(h-c);break;case"Auto":case"Center":var p=void 0;p=r.y+r.height/2,t.marginY="TopToBottom"===t.orientation?p-(s+c)/2:(s+c)/2-p}}else{switch(e.horizontalAlignment){case"Auto":case"Left":var u;u=r.x+e.margin.left,t.marginX="LeftToRight"===t.orientation?u:-u;break;case"Right":var f;f=r.x+r.width-e.margin.right,t.marginX="LeftToRight"===t.orientation?f-l:l-f;break;case"Center":p=void 0;p=r.width/2+r.x,t.marginX="LeftToRight"===t.orientation?p-(s+c)/2:(a+l)/2-p}switch(e.verticalAlignment){case"Top":t.marginY=r.y+e.margin.top-a;break;case"Auto":case"Center":t.marginY=r.y+r.height/2-(s+c)/2;break;case"Bottom":t.marginY=r.y+r.height-e.margin.bottom-c}}},e.prototype.placementStage=function(e,t,i){var n=this.coordinateAssignment(t,i,parent,e);return n.model=e,n.widestRankValue=null,this.placementStageExecute(n),{marginX:n.marginX+e.layout.horizontalSpacing,marginY:n.marginY+e.layout.verticalSpacing}},e.prototype.coordinateAssignment=function(e,t,i,n){var r={};return"TopToBottom"===n.layout.orientation||"BottomToTop"===n.layout.orientation?(r.horizontalSpacing=n.layout.horizontalSpacing,r.verticalSpacing=n.layout.verticalSpacing):(r.horizontalSpacing=n.layout.verticalSpacing,r.verticalSpacing=n.layout.horizontalSpacing),r.orientation="north",r.marginX=r.marginX=e,r.marginY=r.marginY=t,r},e.prototype.calculateWidestRank=function(e,t,i){var n=!1;"LeftToRight"!==e.model.layout.orientation&&"RightToLeft"!==e.model.layout.orientation||(n=!0);var r=-e.verticalSpacing,o=0;e.rankSizes=[],e.rankOffset=[];for(var a=i.maxRank;a>=0;a--){for(var s=0,l=i.ranks[a],c=n?e.marginY:e.marginX,d=0;d<l.length;d++){var h=l[d];if(this.crossReduction.isVertex(h)){var p=h;if(p.cell&&(p.cell.inEdges||p.cell.outEdges)){var u=this.nameTable[p.cell.name];p.width=u.actualSize.width,p.height=u.actualSize.height,s=Math.max(s,n?p.width:p.height)}}else if(h){var f=h,g=1;null!=f.edges&&(g=f.edges.length),h.width=10*(g-1)}n&&(h.height||(h.height=0)),c+=(n?h.height:h.width)/2,this.setXY(h,a,c,!!n),this.setTempVariable(h,a,c),(c+=(n?h.height:h.width)/2+e.horizontalSpacing)>e.widestRankValue&&(e.widestRankValue=c,e.widestRank=a),e.rankSizes[a]=c}e.rankOffset[a]=r;var m=s/2+o/2+e.verticalSpacing;o=s,"north"===e.orientation||"west"===e.orientation?r+=m:r-=m;for(d=0;d<l.length;d++){var v=l[d];this.setXY(v,a,r,!n)}}},e.prototype.setTempVariable=function(e,t,i){this.crossReduction.isVertex(e)?e.temp[0]=i:e.temp[t-e.minRank-1]=i},e.prototype.setXY=function(e,t,i,n){e&&e.cell&&(e.cell.inEdges||e.cell.outEdges?n?e.y[0]=i:e.x[0]=i:n?e.y[t-e.minRank-1]=i:e.x[t-e.minRank-1]=i)},e.prototype.rankCoordinates=function(e,t,i,n){var r=!1;"LeftToRight"!==e.model.layout.orientation&&"RightToLeft"!==e.model.layout.orientation||(r=!0);for(var o=n.ranks[t],a=0,s=(r?e.marginY:e.marginX)+(e.widestRankValue-e.rankSizes[t])/2,l=0;l<o.length;l++){var c=o[l];if(this.crossReduction.isVertex(c)){var d=this.nameTable[c.cell.name];c.width=d.actualSize.width,c.height=d.actualSize.height,a=Math.max(a,c.height)}else{var h=c,p=1;null!=h.edges&&(p=h.edges.length),r?c.height=10*(p-1):c.width=10*(p-1)}var u=(r?c.height:c.width)/2;s+=u,this.setXY(c,t,s,!!r),this.setTempVariable(c,t,s),s+=u+e.horizontalSpacing}},e.prototype.initialCoords=function(e,t,i){this.calculateWidestRank(e,t,i);for(var n=e.widestRank;n>=0;n--)n<i.maxRank&&this.rankCoordinates(e,n,t,i);for(n=e.widestRank+1;n<=i.maxRank;n++)n>0&&this.rankCoordinates(e,n,t,i)},e.prototype.isAncestor=function(e,t){if(null!=t&&null!=e.hashCode&&null!=t.hashCode&&e.hashCode.length<t.hashCode.length){if(e.hashCode===t.hashCode)return!0;if(null==e.hashCode||null==e.hashCode)return!1;for(var i=0;i<e.hashCode.length;i++)if(e.hashCode[i]!==t.hashCode[i])return!1;return!0}return!1},e.prototype.weightedCellSorter=function(e,t){var i={};return i.cell=e||null,i.weightedValue=t||0,i.visited=!1,i.rankIndex=null,i},e.prototype.minNode=function(e,t){for(var i=[],n={map:{}},r=[],o=0;o<=t.maxRank;o++){r[o]=t.ranks[o];for(var a=0;a<r[o].length;a++){var s=r[o][a],l=this.weightedCellSorter(s,o);l.rankIndex=a,l.visited=!0,i.push(l),t.setDictionaryForSorter(n,s,l,!0)}}for(var c=10*i.length,d=0;i.length>0&&d<=c;){var h=i.shift(),p=h.cell,u=h.weightedValue,f=h.rankIndex,g=this.crossReduction.getConnectedCellsOnLayer(p,u),m=this.crossReduction.getConnectedCellsOnLayer(p,u,!0),v=g.length,y=m.length,b=this.medianXValue(e,g,u+1),w=this.medianXValue(e,m,u-1),x=v+y,O=this.crossReduction.getTempVariable(p,u),S=O;x>0&&(S=(b*v+w*y)/x),1===v&&1===y?S=w*y/y:1===v&&(S=b*v/v);var C=!1,P=void 0;if(S<O-1)if(0===f)P=S,C=!0;else{var j=r[u][f-1],I=this.crossReduction.getTempVariable(j,u);(I=I+j.width/2+e.intraCellSpacing+p.width/2)<S?(P=S,C=!0):I<this.crossReduction.getTempVariable(p,u)-1&&(P=I,C=!0)}else if(S>O+1){if(f===r[u].length-1)P=S,C=!0;else{var E=r[u][f+1],T=this.crossReduction.getTempVariable(E,u);(T=T-E.width/2-e.intraCellSpacing-p.width/2)>S?(P=S,C=!0):T>this.crossReduction.getTempVariable(p,u)+1&&(P=T,C=!0)}}C&&(this.setTempVariable(p,u,P),this.updateNodeList(i,n,g,t),this.updateNodeList(i,n,m,t)),this.crossReduction.isVertex(h.cell)&&(h.visited=!1),d++}},e.prototype.updateNodeList=function(e,t,i,n){for(var r=0;r<i.length;r++){var o=i[r],a=n.getDictionaryForSorter(t,o);null!=a&&!1===a.visited&&(a.visited=!0,e.push(a))}},e.prototype.medianXValue=function(e,t,i){if(0===t.length)return 0;for(var n=[],r=0;r<t.length;r++)n[r]=this.crossReduction.getTempVariable(t[r],i);if(n.sort((function(e,t){return e-t})),t.length%2===1)return n[Math.floor(t.length/2)];var o=t.length/2;return(n[o-1]+n[o])/2},e.prototype.placementStageExecute=function(e){var t=!1;"LeftToRight"!==e.model.layout.orientation&&"RightToLeft"!==e.model.layout.orientation||(t=!0),e.jettyPositions={};var i=e.model;t?e.currentYDelta=0:e.currentXDelta=0,this.initialCoords(e,{model:i},i),this.minNode(e,i);var n=1e8;e.maxIterations||(e.maxIterations=8);for(var r=0;r<e.maxIterations;r++){if((t?e.currentYDelta:e.currentXDelta)<n){for(var o=0;o<i.ranks.length;o++)for(var a=i.ranks[o],s=0;s<a.length;s++){var l=a[s];this.setXY(l,o,this.crossReduction.getTempVariable(l,o),!!t)}n=t?e.currentYDelta:e.currentXDelta}t?e.currentYDelta=0:e.currentXDelta=0}this.setCellLocations(e,i)},e.prototype.setCellLocations=function(e,t){for(var i=this.getValues(t.vertexMapper),n=0;n<i.length;n++)this.setVertexLocation(e,i[n])},e.prototype.garphModelsetVertexLocation=function(e,t,i,n){e.model;var r=t.geometry,o=null;return null!=r&&(o={x:i,y:n,width:r.width,height:r.height},r.x===i&&r.y===n||(t.geometry=o)),o},e.prototype.setVertexLocation=function(e,t){var i=!1;"LeftToRight"!==e.model.layout.orientation&&"RightToLeft"!==e.model.layout.orientation||(i=!0);var n=t.cell,r=t.x[0]-t.width/2,o=t.y[0]-t.height/2;this.garphModelsetVertexLocation(e,n,r,o),i?(e.marginY||(e.marginY=0),e.marginY=Math.max(e.marginY,o+t.height)):(e.marginX||(e.marginX=0),e.marginX=Math.max(e.marginX,r+t.width))},e.prototype.getValues=function(e){var t=[];if(e.map)for(var i=0,n=Object.keys(e.map);i<n.length;i++){var r=n[i];t.push(e.map[r])}return t},e.prototype.crossingStage=function(e){this.crossReduction.execute(e)},e.prototype.layeringStage=function(e){this.initialRank(e),this.fixRanks(e)},e.prototype.initialRank=function(e){for(var t=e.startNodes,i=e.getDictionaryValues(e.vertexMapper),n=t.slice();t.length>0;){for(var r=(h=t[0]).connectsAsTarget,o=h.connectsAsSource,a=!0,s=1e8,l=0;l<r.length;l++){if(5270620!==(f=r[l]).temp[0]){a=!1;break}var c=f.source;s=Math.min(s,c.temp[0]-1)}if(a){if(h.temp[0]=s,e.maxRank||(e.maxRank=1e8),e.maxRank=Math.min(e.maxRank,s),null!=o)for(l=0;l<o.length;l++){(f=o[l]).temp[0]=5270620,-1===(c=f.target).temp[0]&&(t.push(c),c.temp[0]=-2)}t.shift()}else{var d=t.shift();if(t.push(h),d===h&&1===t.length)break}}for(l=0;l<i.length;l++)i[l].temp[0]-=e.maxRank;for(l=0;l<n.length;l++)for(var h,p=0,u=(r=(h=n[l]).connectsAsSource,0);u<r.length;u++){var f;c=(f=r[u]).target;h.temp[0]=Math.max(p,c.temp[0]+1),p=h.temp[0]}e.maxRank=1e8-e.maxRank},e.prototype.fixRanks=function(e){e.fixRanks()},e.prototype.cycleStage=function(e){var t={};e.startNodes=[];for(var i=e.getDictionaryValues(e.vertexMapper),n=[],r=0;r<i.length;r++)i[r].temp[0]=-1,n[i[r].id]=i[r];var o=null;if(null!=e.roots){var a=e.roots;o=[];for(r=0;r<a.length;r++)o[r]=e.getDictionary(e.vertexMapper,a[r]),null!=o[r]&&e.startNodes.push(o[r])}e.visit("removeParentConnection",o,!0,null,{seenNodes:t,unseenNodes:n});var s=e.clone(t,null,!0);e.visit("removeNodeConnection",n,!0,s,{seenNodes:t,unseenNodes:n})},e.prototype.remove=function(e,t){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),e},e.prototype.invert=function(e,t){var i=e.source;e.source=e.target,e.target=i,e.isReversed=!e.isReversed},e.prototype.getEdgesBetween=function(e,t,i){i=null!=i&&i;for(var n=this.getEdges(e),r=[],o=0;o<n.length;o++){var a=this.getVisibleTerminal(n[o],!0),s=this.getVisibleTerminal(n[o],!1);(a===e&&s===t||!i&&a===t&&s===e)&&r.push(n[o])}return r},e}(),Hp=function(){function e(e,t,i,n){this.multiObjectIdentityCounter=0,this.dfsCount=0,this.hierarchicalUtil=new _p,this.roots=i,this.vertexMapper={map:{}};var r=[];this.layout=n,this.maxRank=1e8,this.hierarchicalLayout=e,this.createInternalCells(e,t,r);for(var o=0;o<t.length;o++){for(var a=r[o].connectsAsSource,s=0;s<a.length;s++){var l=a[s],c=l.edges;if(null!=c&&c.length>0){var d=c[0],h=e.getVisibleTerminal(d,!1),p=this.getDictionary(this.vertexMapper,h);r[o]===p&&(h=e.getVisibleTerminal(d,!0),p=this.getDictionary(this.vertexMapper,h)),null!=p&&r[o]!==p&&(l.target=p,0===p.connectsAsTarget.length&&(p.connectsAsTarget=[]),p.connectsAsTarget.indexOf(l)<0&&p.connectsAsTarget.push(l))}}r[o].temp[0]=1}}return e.prototype.createInternalCells=function(e,t,i){for(var n=0;n<t.length;n++){i[n]={x:[],y:[],temp:[],cell:t[n],id:t[n].name,connectsAsTarget:[],connectsAsSource:[],type:"internalVertex"},this.setDictionary(this.vertexMapper,t[n],i[n]);var r=e.getEdges(t[n]);i[n].connectsAsSource=[];for(var o=0;o<r.length;o++){var a=e.getVisibleTerminal(r[o],!1);if(a!==t[n]){var s=e.getEdgesBetween(t[n],a,!1),l=e.getEdgesBetween(t[n],a,!0);if(null!=s&&s.length>0&&2*l.length>=s.length){for(var c={x:[],y:[],temp:[],edges:s,ids:[]},d=0;d<s.length;d++)c.ids.push(s[d].id);c.source=i[n],i[n].connectsAsSource||(i[n].connectsAsSource=[]),i[n].connectsAsSource.indexOf(c)<0&&i[n].connectsAsSource.push(c)}}}i[n].temp[0]=0}},e.prototype.fixRanks=function(){var e=[];this.ranks=[];for(var t=0;t<this.maxRank+1;t++)e[t]=[],this.ranks[t]=e[t];var i=null;if(null!=this.roots){var n=this.roots;i=[];for(t=0;t<n.length;t++){var r=n[t],o=this.getDictionary(this.vertexMapper,r);i[t]=o}}this.visit("updateMinMaxRank",i,!1,null,{seenNodes:null,unseenNodes:null,rankList:e})},e.prototype.updateMinMaxRank=function(e,t,i){i.seenNodes,i.unseenNodes;var n=i.parent,r=i.root,o=i.edge,a=i.rankList;if((r.maxRank||0===r.maxRank||(r.maxRank=-1),r.minRank||0===r.minRank||(r.minRank=-1),0===t&&r.maxRank<0&&r.minRank<0&&(a[r.temp[0]].push(r),r.maxRank=r.temp[0],r.minRank=r.temp[0],r.temp[0]=a[r.maxRank].length-1),null!=n&&null!=o)&&n.maxRank-r.maxRank>1){o.maxRank=n.maxRank,o.minRank=r.maxRank,o.temp=[],o.x=[],o.y=[];for(var s=o.minRank+1;s<o.maxRank;s++)a[s].push(o),this.hierarchicalUtil.setTempVariable(o,s,a[s].length-1)}},e.prototype.setDictionary=function(e,t,i){var n=t.name,r=e.map[n];return e.map[n]=i,r},e.prototype.setDictionaryForSorter=function(e,t,i,n){var r=t.id,o=e.map[r];return e.map[r]=i,o},e.prototype.getDictionary=function(e,t){this.multiObjectIdentityCounter||0===this.multiObjectIdentityCounter||(this.multiObjectIdentityCounter=0);var i=t.name;return i?e.map[i]:t.layoutObjectId?e.map[t.layoutObjectId]:(t.layoutObjectId="graphHierarchyNode#"+this.multiObjectIdentityCounter++,t.layoutObjectId)},e.prototype.getDictionaryForSorter=function(e,t){this.multiObjectIdentityCounter||0===this.multiObjectIdentityCounter||(this.multiObjectIdentityCounter=0);var i=t.id;return i?e.map[i]:t.layoutObjectId?e.map[t.layoutObjectId]:(t.layoutObjectId="graphHierarchyNode#"+this.multiObjectIdentityCounter++,t.layoutObjectId)},e.prototype.getDictionaryValues=function(e){for(var t=[],i=0,n=Object.keys(e.map);i<n.length;i++){var r=n[i];t.push(e.map[r])}return t},e.prototype.visit=function(e,t,i,n,r){r.seenNodes,r.unseenNodes,r.rankList;if(null!=t){for(var o=0;o<t.length;o++){var a=t[o];null!=a&&(null==n&&(n=new Object),r.parent=null,r.root=a,r.edge=null,i?(a.hashCode=[],a.hashCode[0]=this.dfsCount,a.hashCode[1]=o,this.extendedDfs(e,n,o,0,r)):this.depthFirstSearch(e,n,0,r))}this.dfsCount++}},e.prototype.depthFirstSearch=function(e,t,i,n){n.seenNodes,n.unseenNodes,n.rankList,n.parent;var r=n.root;n.edge;if(null!=r){var o=r.id;if(null==t[o]){t[o]=r,this.updateConnectionRank(e,i,0,n);for(var a=r.connectsAsSource.slice(),s=0;s<a.length;s++){var l=a[s],c=l.target;n.parent=r,n.root=c,n.edge=l,this.depthFirstSearch(e,t,i+1,n)}}else this.updateConnectionRank(e,i,1,n)}},e.prototype.updateConnectionRank=function(e,t,i,n){var r=n.parent,o=n.root,a=n.edge;if("removeParentConnection"===e||"removeNodeConnection"===e){var s="removeNodeConnection"===e;this.removeConnectionEdge(r,o,a,t,n,s)}"updateMinMaxRank"===e&&this.updateMinMaxRank(t,i,n)},e.prototype.removeConnectionEdge=function(e,t,i,n,r,o){var a=r.seenNodes,s=r.unseenNodes;r.rankList;this.hierarchicalUtil.isAncestor(t,e)&&(this.hierarchicalUtil.invert(i,0),this.hierarchicalUtil.remove(i,e.connectsAsSource),o?(t.connectsAsSource.push(i),e.connectsAsTarget.push(i),this.hierarchicalUtil.remove(i,t.connectsAsTarget)):(e.connectsAsTarget.push(i),this.hierarchicalUtil.remove(i,t.connectsAsTarget),t.connectsAsSource.push(i))),a[t.id]=t,delete s[t.id]},e.prototype.extendedDfs=function(e,t,i,n,r){r.seenNodes,r.unseenNodes,r.rankList;var o=r.parent,a=r.root;r.edge;if(null!=a){if(null!=o&&(null==a.hashCode||a.hashCode[0]!==o.hashCode[0])){var s=o.hashCode.length+1;a.hashCode=o.hashCode.slice(),a.hashCode[s-1]=i}var l=a.id;if(null==t[l]){t[l]=a,this.updateConnectionRank(e,n,0,r);for(var c=a.connectsAsSource.slice(),d=0;d<c.length;d++){var h=c[d],p=h.target;r.parent=a,r.root=p,r.edge=h,this.extendedDfs(e,t,d,n+1,r)}}else this.updateConnectionRank(e,n,1,r)}},e.prototype.clone=function(e,t,i){if(i=null!=i&&i,null!=e&&"function"===typeof e.constructor){for(var n=e.constructor(),r=0,o=Object.keys(e);r<o.length;r++){var a=o[r];"layoutObjectId"!==a&&(null==t||t.indexOf(a)<0)&&(i||"object"!==typeof e[a])&&(n[a]=e[a])}return n}return null},e}(),Wp=function(){function e(){}return e.prototype.calculateCrossings=function(e){for(var t=e.ranks.length,i=0,n=1;n<t;n++)i+=this.calculateRankCrossing(n,e);return i},e.prototype.getTempVariable=function(e,t){return e?this.isVertex(e)?e.temp[0]:e.temp[t-e.minRank-1]:0},e.prototype.calculateRankCrossing=function(e,t){for(var i=0,n=t.ranks[e],r=t.ranks[e-1],o=[],a=0;a<n.length;a++){for(var s=n[a],l=this.getTempVariable(s,e),c=this.getConnectedCellsOnLayer(s,e,!0),d=[],h=0;h<c.length;h++){var p=c[h],u=this.getTempVariable(p,e-1);d.push(u)}d.sort((function(e,t){return e-t})),o[l]=d}var f=[];for(a=0;a<o.length;a++)f=f.concat(o[a]);for(var g=1;g<r.length;)g<<=1;var m=2*g-1;g-=1;var v=[];for(a=0;a<m;++a)v[a]=0;for(a=0;a<f.length;a++){var y=f[a]+g;for(++v[y];y>0;)y%2&&(i+=v[y+1]),++v[y=y-1>>1]}return i},e.prototype.execute=function(e){this.nestedBestRanks=[];for(var t=0;t<e.ranks.length;t++)this.nestedBestRanks[t]=e.ranks[t].slice();var i=0,n=this.calculateCrossings(e);for(t=0;t<24&&i<2;t++){this.weightedMedian(t,e);var r=this.calculateCrossings(e);if(r<n){n=r,i=0;for(var o=0;o<this.nestedBestRanks.length;o++)for(var a=e.ranks[o],s=0;s<a.length;s++){var l=a[s],c=this.nestedBestRanks[o][l.temp[0]],d=!0;l.edges&&c&&!c.edges&&(d=!1),c&&d&&(this.nestedBestRanks[o][l.temp[0]]=l)}}else{i++;for(o=0;o<this.nestedBestRanks.length;o++)for(a=e.ranks[o],s=0;s<a.length;s++){l=a[s];this.setTempVariable(l,o,s)}}if(0===n)break}var h=[],p=[];for(t=0;t<e.maxRank+1;t++)p[t]=[],h[t]=p[t];for(t=0;t<this.nestedBestRanks.length;t++)for(o=0;o<this.nestedBestRanks[t].length;o++)p[t].push(this.nestedBestRanks[t][o]);e.ranks=h},e.prototype.isVertex=function(e){return!(!e||!e.cell||!e.cell.inEdges&&!e.cell.outEdges)},e.prototype.weightedMedian=function(e,t){var i=e%2===0;if(i)for(var n=t.maxRank-1;n>=0;n--)this.medianRank(n,i);else for(n=1;n<t.maxRank;n++)this.medianRank(n,i)},e.prototype.getConnectedCellsOnLayer=function(e,t,i){void 0===i&&(i=!1);var n="nextLayerConnectedCells",r="connectsAsTarget";if(i&&(n="previousLayerConnectedCells",r="connectsAsSource"),e){if(this.isVertex(e)){if(null==e[n]){e[n]=[],e[n][0]=[];for(var o=0;o<e[r].length;o++){var a=e[r][o];void 0===a.maxRank&&(a.maxRank=-1),-1===a.maxRank||(i?a.minRank===t-1:a.maxRank===t+1)?e[n][0].push(i?a.target:a.source):e[n][0].push(a)}}return e[n][0]}if(null==e[n]){e[n]=[];for(o=0;o<e.temp.length;o++)e[n][o]=[],o===(i?0:e.temp.length-1)?e[n][o].push(i?e.target:e.source):e[n][o].push(e)}return e[n][t-e.minRank-1]}return null},e.prototype.medianValue=function(e,t){for(var i=[],n=0,r=0;r<e.length;r++){var o=e[r];i[n++]=this.getTempVariable(o,t)}if(i.sort((function(e,t){return e-t})),n%2===1)return i[Math.floor(n/2)];if(2===n)return(i[0]+i[1])/2;var a=n/2,s=i[a-1]-i[0],l=i[n-1]-i[a];return(i[a-1]*l+i[a]*s)/(s+l)},e.prototype.setTempVariable=function(e,t,i){e&&(e.temp[0]=i)},e.prototype.medianRank=function(e,t){for(var i=this.nestedBestRanks[e].length,n=[],r=[],o=0;o<i;o++){var a=this.nestedBestRanks[e][o],s={medianValue:0};s.cell=a;var l=void 0,c=void 0;c=t?e+1:e-1,null!=(l=t?this.getConnectedCellsOnLayer(a,e):this.getConnectedCellsOnLayer(a,e,!0))&&0!==l.length?(s.medianValue=this.medianValue(l,c),n.push(s)):r[this.getTempVariable(a,e)]=!0}n.sort(this.compare);for(o=0;o<i;o++)if(null==r[o]&&n.length>0){a=n.shift().cell;this.setTempVariable(a,e,o)}},e.prototype.compare=function(e,t){if(null!=e&&null!=t){if(t.medianValue>e.medianValue)return-1;if(t.medianValue<e.medianValue)return 1}return 0},e}(),Fp=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qp=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Up="e-acrdn-root",Vp="e-accordion",Yp="e-acrdn-item",Xp="e-item-focus",Gp="e-hide",Zp="e-acrdn-header",Jp="e-acrdn-header-content",Qp="e-acrdn-panel",$p="e-acrdn-content",Kp="e-toggle-icon",eu="e-expand-icon",tu="e-rtl",iu="e-content-hide",nu="e-select",ru="e-selected",ou="e-active",au="e-overlay",su="e-toggle-animation",lu="e-expand-state",cu="e-accordion-container",du=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fp(t,e),qp([Object(r.q)("SlideDown")],t.prototype,"effect",void 0),qp([Object(r.q)(400)],t.prototype,"duration",void 0),qp([Object(r.q)("linear")],t.prototype,"easing",void 0),t}(r.d),hu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fp(t,e),qp([Object(r.g)({effect:"SlideUp",duration:400,easing:"linear"},du)],t.prototype,"collapse",void 0),qp([Object(r.g)({effect:"SlideDown",duration:400,easing:"linear"},du)],t.prototype,"expand",void 0),t}(r.d),pu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fp(t,e),qp([Object(r.q)(null)],t.prototype,"content",void 0),qp([Object(r.q)(null)],t.prototype,"header",void 0),qp([Object(r.q)(null)],t.prototype,"cssClass",void 0),qp([Object(r.q)(null)],t.prototype,"iconCss",void 0),qp([Object(r.q)(!1)],t.prototype,"expanded",void 0),qp([Object(r.q)(!0)],t.prototype,"visible",void 0),qp([Object(r.q)(!1)],t.prototype,"disabled",void 0),t}(r.d),uu=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"},n}return Fp(t,e),t.prototype.destroy=function(){var t=this;this.isReact&&this.clearTemplate();var i=this.element;if(e.prototype.destroy.call(this),this.unwireEvents(),this.isDestroy=!0,this.restoreContent(null),[].slice.call(i.children).forEach((function(e){e.classList.contains("blazor-template")||i.removeChild(e)})),this.trgtEle)for(;this.ctrlTem.firstElementChild;)i.appendChild(this.ctrlTem.firstElementChild);i.classList.remove(Up),i.removeAttribute("style"),["aria-disabled","aria-multiselectable","role","data-ripple"].forEach((function(e){t.element.removeAttribute(e)})),!this.isNested&&r.L&&this.removeRippleEffect()},t.prototype.preRender=function(){var e=Object(r.y)(this.element,"."+Qp);this.isNested=!1,this.templateEle=[],this.isDestroy||(this.isDestroy=!1),Object(r.J)(e)?this.element.classList.add(Up):(e.classList.add("e-nested"),this.isNested=!0),this.enableRtl&&this.add(this.element,tu)},t.prototype.add=function(e,t){e.classList.add(t)},t.prototype.remove=function(e,t){e.classList.remove(t)},t.prototype.render=function(){this.isServerRendered?this.wireFocusEvents():(this.initializeheaderTemplate(),this.initializeItemTemplate(),this.initialize(),this.renderControl()),this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=Object(r.D)(this.width),t=Object(r.D)(this.height);Object(r.V)(this.element,{width:e,height:t});Object(r.J)(this.initExpand)&&(this.initExpand=[]),this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),Object(r.v)(this.element,{"aria-disabled":"false",role:"presentation","aria-multiselectable":"true"}),"Single"===this.expandMode&&this.element.setAttribute("aria-multiselectable","false")},t.prototype.renderControl=function(){this.trgtEle=this.element.children.length>0&&(!Object(r.I)()||this.isStringTemplate)?Object(r.T)("div",this.element):null,this.renderItems(),this.initItemExpand()},t.prototype.wireFocusEvents=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll("."+Yp));e<t.length;e++){var i=t[e],n=i.querySelector("."+Zp);i.childElementCount>0&&n&&(r.m.clearEvents(n),r.m.add(n,"focus",this.focusIn,this),r.m.add(n,"blur",this.focusOut,this))}},t.prototype.unwireEvents=function(){r.m.remove(this.element,"click",this.clickHandler),Object(r.J)(this.keyModule)||this.keyModule.destroy()},t.prototype.wireEvents=function(){r.m.add(this.element,"click",this.clickHandler,this),this.isNested||this.isDestroy||(this.removeRippleEffect=Object(r.S)(this.element,{selector:"."+Zp})),this.isNested||(this.keyModule=new r.n(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))},t.prototype.templateParser=function(e){if(e)try{if(document.querySelectorAll(e).length)return Object(r.z)(document.querySelector(e).innerHTML.trim())}catch(t){return Object(r.z)(e)}},t.prototype.initializeheaderTemplate=function(){this.headerTemplate&&(this.headerTemplateFn=this.templateParser(this.headerTemplate))},t.prototype.initializeItemTemplate=function(){this.itemTemplate&&(this.itemTemplateFn=this.templateParser(this.itemTemplate))},t.prototype.getheaderTemplate=function(){return this.headerTemplateFn},t.prototype.getItemTemplate=function(){return this.itemTemplateFn},t.prototype.focusIn=function(e){e.target.parentElement.classList.add(Xp)},t.prototype.focusOut=function(e){e.target.parentElement.classList.remove(Xp)},t.prototype.ctrlTemplate=function(){var e;this.ctrlTem=this.element.cloneNode(!0);var t=Object(r.T)("."+cu,this.element);e=t?t.children:this.element.children;var i=[];[].slice.call(e).forEach((function(e){i.push({header:e.childElementCount>0&&e.children[0]?e.children[0]:"",content:e.childElementCount>1&&e.children[1]?e.children[1]:""}),e.parentNode.removeChild(e)})),t&&this.element.removeChild(t),this.setProperties({items:i},!0)},t.prototype.toggleIconGenerate=function(){var e=this.createElement("div",{className:Kp}),t=this.createElement("span",{className:"e-tgl-collapse-icon e-icons"});return e.appendChild(t),e},t.prototype.initItemExpand=function(){var e=this.initExpand.length;if(0!==e){if("Single"===this.expandMode)this.expandItem(!0,this.initExpand[e-1]);else for(var t=0;t<e;t++)this.expandItem(!0,this.initExpand[t]);this.isReact&&this.renderReactTemplates()}},t.prototype.renderItems=function(){var e,t,i=this,n=this.element;if(Object(r.J)(this.trgtEle)||this.ctrlTemplate(),this.dataSource.length>0)this.dataSource.forEach((function(e,o){t=i.renderInnerItem(e,o),n.appendChild(t),t.childElementCount>0&&(r.m.add(t.querySelector("."+Zp),"focus",i.focusIn,i),r.m.add(t.querySelector("."+Zp),"blur",i.focusOut,i))}));else{var o=this.items;n&&o.length>0&&o.forEach((function(t,o){e=i.renderInnerItem(t,o),n.appendChild(e),e.childElementCount>0&&(r.m.add(e.querySelector("."+Zp),"focus",i.focusIn,i),r.m.add(e.querySelector("."+Zp),"blur",i.focusOut,i))}))}this.isReact&&this.renderReactTemplates()},t.prototype.clickHandler=function(e){var t,i,n=this,o=e.target,a=this.getItems(),s={};if(Object(r.y)(o,".e-accordion")===this.element){o.classList.add("e-target");var l,c=Object(r.y)(o,"."+Yp),d=Object(r.y)(o,"."+Zp),h=Object(r.y)(o,"."+Qp);if(c&&(Object(r.J)(d)||Object(r.J)(h))&&(d=c.children[0],h=c.children[1]),d&&(i=Object(r.T)(".e-toggle-icon",d)),d?l=Object(r.y)(d,"."+Yp):h&&(l=Object(r.y)(h,"."+Yp)),t=this.getIndexByItem(c),l&&(s.item=a[this.getIndexByItem(l)]),s.originalEvent=e,!(!Object(r.J)(i)&&c.childElementCount<=1)||!Object(r.J)(h)&&Object(r.J)(Object(r.T)(".e-acrdn-header .e-toggle-icon",l)))this.afterContentRender(o,s,c,d,h,l);else if(this.isServerRendered){var p=c.id;this.items.length>0?this.interopAdaptor.invokeMethodAsync("OnItemClick",t).then((function(){n.isDestroyed||n.afterContentRender(o,s,c,d,h,l)})):this.interopAdaptor.invokeMethodAsync("OnDataClick",p).then((function(){n.isDestroyed||n.afterContentRender(o,s,c,d,h,l)}))}else c.appendChild(this.contentRendering(t)),this.ariaAttrUpdate(c),this.afterContentRender(o,s,c,d,h,l);this.isReact&&this.renderReactTemplates()}},t.prototype.afterContentRender=function(e,t,i,n,o,a){var s=this,l=[];this.trigger("clicked",t);var c=o&&!Object(r.J)(Object(r.T)(".e-target",o)),d=o&&!Object(r.J)(Object(r.T)(".e-accordion",o))&&Object(r.J)(Object(r.y)(e,".e-acrdn-panel .e-accordion")),h=o&&Object(r.J)(Object(r.T)(".e-accordion",o))||!(Object(r.y)(e,".e-accordion")===this.element);if(c=c&&(d||h),e.classList.remove("e-target"),!(e.classList.contains(Qp)||e.classList.contains($p)||c)){var p=this.element.querySelector("."+cu),u=p?p.children:this.element.children;[].slice.call(u).forEach((function(e){e.classList.contains(ou)&&l.push(e)}));var f=[].slice.call(this.element.querySelectorAll(".e-acrdn-item [e-animate]"));if(f.length>0)for(var g=0,m=f;g<m.length;g++){var v=m[g];l.push(v.parentElement)}var y=-1!==l.indexOf(a)&&"true"===o.getAttribute("e-animate"),b=!1;if(!Object(r.J)(i)&&!Object(r.J)(n)){var w=Object(r.T)("."+Qp,i),x=Object(r.y)(i,".e-acrdn-root").querySelector(".e-expand-state");if(Object(r.J)(w))return;b=x===i,!Object(r.M)(w)||y&&!a.classList.contains(ru)?(l.length>0&&"Single"===this.expandMode&&!y&&l.forEach((function(e){s.collapse(Object(r.T)("."+Qp,e)),e.classList.remove(lu)})),this.expand(w)):this.collapse(w),Object(r.J)(x)||b||x.classList.remove(lu)}}},t.prototype.eleMoveFocus=function(e,t,i){var n,o=Object(r.y)(i,"."+Yp);i===t?n=("moveUp"===e?i.lastElementChild:i).querySelector("."+Zp):i.classList.contains(Zp)&&(o="moveUp"===e?o.previousElementSibling:o.nextElementSibling)&&(n=Object(r.T)("."+Zp,o)),n&&n.focus()},t.prototype.keyActionHandler=function(e){var t=e.target,i=Object(r.y)(e.target,Zp);if(!Object(r.J)(i)||t.classList.contains(Vp)||t.classList.contains(Zp)){var n,o=this.element;switch(e.action){case"moveUp":case"moveDown":this.eleMoveFocus(e.action,o,t);break;case"space":case"enter":n=t.nextElementSibling,!Object(r.J)(n)&&n.classList.contains(Qp)?"true"!==n.getAttribute("e-animate")&&t.click():t.click();break;case"home":case"end":("home"===e.action?o.firstElementChild.children[0]:o.lastElementChild.children[0]).focus()}}},t.prototype.headerEleGenerate=function(){var e=this.createElement("div",{className:Zp,id:Object(r.G)("acrdn_header")}),t={tabindex:"0",role:"heading","aria-selected":"false","aria-disabled":"false","aria-level":this.getItems().length.toString()};return Object(r.v)(e,t),e},t.prototype.renderInnerItem=function(e,t){var i;if((i=this.createElement("div",{className:Yp})).id=Object(r.G)("acrdn_item"),Object(r.v)(i,{"aria-expanded":"false"}),this.headerTemplate){var n=this.headerEleGenerate(),o=this.createElement("div",{className:Jp});return n.appendChild(o),Object(r.u)(this.getheaderTemplate()(e,this,"headerTemplate",this.element.id+"_headerTemplate",!1),o),i.appendChild(n),n.appendChild(this.toggleIconGenerate()),this.add(i,nu),i}if(e.header&&this.angularnativeCondiCheck(e,"header")){this.enableHtmlSanitizer&&"string"===typeof e.header&&(e.header=r.r.sanitize(e.header));n=this.headerEleGenerate(),o=this.createElement("div",{className:Jp});n.appendChild(o),n.appendChild(this.fetchElement(o,e.header,t,!0)),i.appendChild(n)}var a=Object(r.T)("."+Zp,i);if(!e.expanded||Object(r.J)(t)||this.enablePersistence||-1===this.initExpand.indexOf(t)&&this.initExpand.push(t),e.cssClass&&Object(r.t)([i],e.cssClass.split(" ")),e.disabled&&Object(r.t)([i],au),!1===e.visible&&Object(r.t)([i],Gp),e.iconCss){var s=this.createElement("div",{className:"e-acrdn-header-icon"}),l=this.createElement("span",{className:e.iconCss+" e-icons"});s.appendChild(l),Object(r.J)(a)?((a=this.headerEleGenerate()).appendChild(s),i.appendChild(a)):a.insertBefore(s,a.childNodes[0])}if(e.content&&this.angularnativeCondiCheck(e,"content")){var c=this.toggleIconGenerate();Object(r.J)(a)&&(a=this.headerEleGenerate(),i.appendChild(a)),a.appendChild(c),this.add(i,nu)}return i},t.prototype.angularnativeCondiCheck=function(e,t){var i="content"===t?e.content:e.header;if(this.isAngular&&!Object(r.J)(i.elementRef)){var n=i.elementRef.nativeElement.data;if(Object(r.J)(n)||""===n||-1===n.indexOf("bindings="))return!0;var o=JSON.parse(i.elementRef.nativeElement.data.replace("bindings=",""));return!(!Object(r.J)(o)&&"false"===o["ng-reflect-ng-if"])}return!0},t.prototype.fetchElement=function(e,t,i,n){var o,a,s;try{if(document.querySelectorAll(t).length&&"Button"!==t){var l=document.querySelector(t);a=l.outerHTML.trim(),e.appendChild(l),l.style.display=""}}catch(h){"string"===typeof t&&Object(r.I)()&&0!==t.indexOf("<div>Blazor")?e.innerHTML=r.r.sanitize(t):!Object(r.J)(this.trgtEle)&&t instanceof HTMLElement?(e.appendChild(t),e.firstElementChild.style.display=""):o=Object(r.z)(t)}if(!Object(r.J)(o)){this.isReact&&this.renderReactTemplates();var c=void 0,d=void 0;e.classList.contains(Jp)?(c=this.element.id+i+"_header",d="header"):e.classList.contains($p)&&(c=this.element.id+i+"_content",d="content"),s=o({},this,d,c,this.isStringTemplate)}return Object(r.J)(s)||!(s.length>0)||Object(r.J)(s[0].tagName)&&1===s.length?0===e.childElementCount&&(e.innerHTML=r.r.sanitize(t)):[].slice.call(s).forEach((function(t){Object(r.J)(t.tagName)||(t.style.display=""),e.appendChild(t)})),Object(r.J)(a)||-1===this.templateEle.indexOf(t)&&this.templateEle.push(t),e},t.prototype.ariaAttrUpdate=function(e){var t=Object(r.T)("."+Zp,e),i=Object(r.T)("."+Qp,e);t.setAttribute("aria-controls",i.id),i.setAttribute("aria-labelledby",t.id),i.setAttribute("role","definition")},t.prototype.contentRendering=function(e){var t=this.createElement("div",{className:Qp+" "+iu,id:Object(r.G)("acrdn_panel")});Object(r.v)(t,{"aria-hidden":"true"});var i=this.createElement("div",{className:$p});return this.dataSource.length>0?(this.isReact&&this.renderReactTemplates(),Object(r.u)(this.getItemTemplate()(this.dataSource[e],this,"itemTemplate",this.element.id+"_itemTemplate",!1),i),t.appendChild(i)):(this.enableHtmlSanitizer&&(this.items[e].content,1)&&(this.items[e].content=r.r.sanitize(this.items[e].content)),t.appendChild(this.fetchElement(i,this.items[e].content,e,!1))),t},t.prototype.expand=function(e){var t,i=this,n=this.getItems(),o=Object(r.y)(e,"."+Yp);if(!(Object(r.J)(e)||Object(r.M)(e)&&"true"!==e.getAttribute("e-animate")||o.classList.contains(au))){var a=Object(r.y)(o,".e-acrdn-root").querySelector(".e-expand-state"),s={name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing},l=Object(r.T)(".e-toggle-icon",o).firstElementChild;t={element:o,item:n[this.getIndexByItem(o)],index:this.getIndexByItem(o),content:o.querySelector("."+Qp),isExpanded:!0},this.trigger("expanding",t,(function(t){t.cancel||(l.classList.add(su),i.expandedItemsPush(o),Object(r.J)(a)||a.classList.remove(lu),o.classList.add(lu),"None"===s.name?(i.expandProgress("begin",l,e,o,t),i.expandProgress("end",l,e,o,t)):i.expandAnimation(s.name,l,e,o,s,t))}))}},t.prototype.expandAnimation=function(e,t,i,n,o,a){var s,l=this;this.lastActiveItemId=n.id,"SlideDown"===e?(o.begin=function(){l.expandProgress("begin",t,i,n,a),i.style.position="absolute",s=n.offsetHeight,i.style.maxHeight=i.offsetHeight+"px",n.style.maxHeight=""},o.progress=function(){n.style.minHeight=s+i.offsetHeight+"px"},o.end=function(){Object(r.V)(i,{position:"",maxHeight:""}),n.style.minHeight="",l.expandProgress("end",t,i,n,a)}):(o.begin=function(){l.expandProgress("begin",t,i,n,a)},o.end=function(){l.expandProgress("end",t,i,n,a)}),new r.b(o).animate(i)},t.prototype.expandProgress=function(e,t,i,n,o){this.remove(i,iu),this.add(n,ru),this.add(t,eu),"end"===e&&(this.add(n,ou),i.setAttribute("aria-hidden","false"),Object(r.v)(n,{"aria-expanded":"true"}),Object(r.v)(i.previousElementSibling,{"aria-selected":"true"}),t.classList.remove(su),this.trigger("expanded",o))},t.prototype.expandedItemsPush=function(e){var t=this.getIndexByItem(e);if(-1===this.expandedIndices.indexOf(t)){var i=[].slice.call(this.expandedIndices);i.push(t),this.setProperties({expandedIndices:i},!0)}},t.prototype.getIndexByItem=function(e){var t=this.getItemElements();return[].slice.call(t).indexOf(e)},t.prototype.getItemElements=function(){var e=[],t=this.element.children;return[].slice.call(t).forEach((function(t){t.classList.contains(Yp)&&e.push(t)})),e},t.prototype.expandedItemsPop=function(e){var t=this.getIndexByItem(e),i=[].slice.call(this.expandedIndices);i.splice(i.indexOf(t),1),this.setProperties({expandedIndices:i},!0)},t.prototype.collapse=function(e){var t,i=this,n=this.getItems(),o=Object(r.y)(e,"."+Yp);if(!Object(r.J)(e)&&Object(r.M)(e)&&!o.classList.contains(au)){var a={name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing},s=Object(r.T)(".e-toggle-icon",o).firstElementChild;t={element:o,item:n[this.getIndexByItem(o)],index:this.getIndexByItem(o),content:o.querySelector("."+Qp),isExpanded:!1},this.trigger("expanding",t,(function(t){t.cancel||(i.expandedItemsPop(o),o.classList.add(lu),s.classList.add(su),"None"===a.name?(i.collapseProgress("begin",s,e,o,t),i.collapseProgress("end",s,e,o,t)):i.collapseAnimation(a.name,e,o,s,a,t))}))}},t.prototype.collapseAnimation=function(e,t,i,n,o,a){var s,l,c,d,h=this;this.lastActiveItemId=i.id,"SlideUp"===e?(o.begin=function(){c=i.offsetHeight,i.style.minHeight=c+"px",t.style.position="absolute",s=i.offsetHeight,l=t.offsetHeight,t.style.maxHeight=l+"px",h.collapseProgress("begin",n,t,i,a)},o.progress=function(){(d=s-(l-t.offsetHeight))<c&&(i.style.minHeight=d+"px")},o.end=function(){t.style.display="none",h.collapseProgress("end",n,t,i,a),i.style.minHeight="",Object(r.V)(t,{position:"",maxHeight:"",display:""})}):(o.begin=function(){h.collapseProgress("begin",n,t,i,a)},o.end=function(){h.collapseProgress("end",n,t,i,a)}),new r.b(o).animate(t)},t.prototype.collapseProgress=function(e,t,i,n,o){this.remove(t,eu),this.remove(n,ru),"end"===e&&(this.add(i,iu),t.classList.remove(su),this.remove(n,ou),i.setAttribute("aria-hidden","true"),Object(r.v)(n,{"aria-expanded":"false"}),Object(r.v)(i.previousElementSibling,{"aria-selected":"false"}),this.trigger("expanded",o))},t.prototype.getModuleName=function(){return"accordion"},t.prototype.itemAttribUpdate=function(){var e=this.getItems(),t=this.getItemElements(),i=e.length;t.forEach((function(e){Object(r.T)("."+Zp,e).setAttribute("aria-level",""+i)}))},t.prototype.getItems=function(){return this.itemTemplate&&this.headerTemplate?this.dataSource:this.items},t.prototype.addItem=function(e,t){var i=this,n=this.element,o=this.getItemElements(),a=this.getItems();(Object(r.J)(t)&&(t=a.length),n.childElementCount>=t)&&(e instanceof Array?e:[e]).forEach((function(e,s){var l=t+s;a.splice(l,0,e);var c=i.renderInnerItem(e,l);n.childElementCount===l?n.appendChild(c):n.insertBefore(c,o[l]),r.m.add(c.querySelector("."+Zp),"focus",i.focusIn,i),r.m.add(c.querySelector("."+Zp),"blur",i.focusOut,i),i.itemAttribUpdate(),i.expandedIndices=[],i.expandedItemRefresh(n),e&&e.expanded&&i.expandItem(!0,l)}));this.isReact&&this.renderReactTemplates()},t.prototype.expandedItemRefresh=function(e){var t=this,i=this.getItemElements();[].slice.call(i).forEach((function(e){e.classList.contains(ru)&&t.expandedItemsPush(e)}))},t.prototype.removeItem=function(e){this.isReact&&this.clearTemplate(["headerTemplate","itemTemplate"],e);var t=this.getItemElements()[e],i=this.getItems();Object(r.J)(t)||(this.restoreContent(e),Object(r.B)(t),i.splice(e,1),this.itemAttribUpdate(),this.expandedIndices=[],this.expandedItemRefresh(this.element))},t.prototype.select=function(e){var t=this.getItemElements()[e];Object(r.J)(t)||Object(r.J)(Object(r.T)("."+Zp,t))||t.children[0].focus()},t.prototype.hideItem=function(e,t){var i=this.getItemElements()[e];Object(r.J)(i)||(Object(r.J)(t)&&(t=!0),t?this.add(i,Gp):this.remove(i,Gp))},t.prototype.enableItem=function(e,t){var i=this.getItemElements()[e];if(!Object(r.J)(i)){var n=i.firstElementChild;t?(this.remove(i,au),Object(r.v)(n,{tabindex:"0","aria-disabled":"false"}),n.focus()):(i.classList.contains(ou)&&(this.expandItem(!1,e),this.eleMoveFocus("movedown",this.element,n)),this.add(i,au),n.setAttribute("aria-disabled","true"),n.removeAttribute("tabindex"))}},t.prototype.refresh=function(){this.isServerRendered||e.prototype.refresh.call(this)},t.prototype.expandItem=function(e,t){var i=this,n=this.getItemElements();if(Object(r.J)(t))if("Single"===this.expandMode&&e){var o=n[n.length-1];this.itemExpand(e,o,this.getIndexByItem(o))}else{var a=Object(r.T)("#"+this.lastActiveItemId,this.element);[].slice.call(n).forEach((function(t){i.itemExpand(e,t,i.getIndexByItem(t)),t.classList.remove(lu)}));var s=Object(r.T)(".e-expand-state",this.element);s&&s.classList.remove(lu),a&&a.classList.add(lu)}else{o=n[t];if(Object(r.J)(o)||!o.classList.contains(nu)||o.classList.contains(ou)&&e)return;"Single"===this.expandMode&&this.expandItem(!1),this.itemExpand(e,o,t)}},t.prototype.itemExpand=function(e,t,i){var n=this,o=t.children[1];if(!t.classList.contains(au)){if(Object(r.J)(o)&&e)if(this.isServerRendered){var a=t.id;this.items.length>0?this.interopAdaptor.invokeMethodAsync("OnItemClick",i).then((function(){n.isDestroyed||(o=t.children[1],n.expand(o))})):this.interopAdaptor.invokeMethodAsync("OnDataClick",a).then((function(){n.isDestroyed||(o=t.children[1],n.expand(o))}))}else o=this.contentRendering(i),t.appendChild(o),this.ariaAttrUpdate(t),this.expand(o);else Object(r.J)(o)||(e?this.expand(o):this.collapse(o));this.isReact&&this.renderReactTemplates()}},t.prototype.destroyItems=function(){this.restoreContent(null),this.isReact&&this.clearTemplate(),[].slice.call(this.element.querySelectorAll("."+Yp)).forEach((function(e){Object(r.B)(e)}))},t.prototype.restoreContent=function(e){var t;t=Object(r.J)(e)?this.element:this.element.querySelectorAll("."+Yp)[e],this.templateEle.forEach((function(e){Object(r.J)(t.querySelector(e))||(document.body.appendChild(t.querySelector(e)).style.display="none")}))},t.prototype.updateItem=function(e,t){if(!Object(r.J)(e)){var i=this.getItems(),n=i[t];i.splice(t,1),this.restoreContent(t),Object(r.B)(e),this.addItem(n,t)}},t.prototype.getPersistData=function(){return this.addOnPersist(["expandedIndices"])},t.prototype.onPropertyChanged=function(e,t){for(var i=this.element,n=!1,o=0,a=Object.keys(e);o<a.length;o++){switch(a[o]){case"items":if(this.isServerRendered){this.wireFocusEvents();break}if(e.items instanceof Array&&t.items instanceof Array)n=!0;else for(var s=Object.keys(e.items),l=0;l<s.length;l++){var c=parseInt(Object.keys(e.items)[l],10),d=Object.keys(e.items[c])[0],h=Object(r.U)("."+Yp,this.element)[c],p=Object(t.items[c])[d],u=Object(e.items[c])[d];("header"===d||"iconCss"===d||"expanded"===d||"content"===d&&""===p)&&this.updateItem(h,c),"cssClass"!==d||Object(r.J)(h)||(h.classList.remove(p),h.classList.add(u)),"visible"!==d||Object(r.J)(h)||(!1===Object(e.items[c])[d]?h.classList.add(Gp):h.classList.remove(Gp)),"disabled"!==d||Object(r.J)(h)||this.enableItem(c,!u),"content"!==d||Object(r.J)(h)||2!==h.children.length||(h.classList.contains(ru)&&this.expandItem(!1,c),Object(r.B)(h.querySelector("."+Qp)))}break;case"dataSource":case"expandedIndices":null===this.expandedIndices&&(this.expandedIndices=[]),n=!0;break;case"headerTemplate":this.initializeheaderTemplate(),n=!0;break;case"itemTemplate":this.initializeItemTemplate(),n=!0;break;case"enableRtl":e.enableRtl?this.add(i,tu):this.remove(i,tu);break;case"height":Object(r.V)(this.element,{height:Object(r.D)(e.height)});break;case"width":Object(r.V)(this.element,{width:Object(r.D)(e.width)});break;case"expandMode":"Single"===e.expandMode?(this.element.setAttribute("aria-multiselectable","false"),this.expandedIndices.length>1&&this.expandItem(!1)):this.element.setAttribute("aria-multiselectable","true")}}n&&!this.isServerRendered&&(this.initExpand=[],this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),this.destroyItems(),this.renderItems(),this.initItemExpand())},qp([Object(r.e)([],pu)],t.prototype,"items",void 0),qp([Object(r.q)([])],t.prototype,"dataSource",void 0),qp([Object(r.q)()],t.prototype,"itemTemplate",void 0),qp([Object(r.q)()],t.prototype,"headerTemplate",void 0),qp([Object(r.q)("100%")],t.prototype,"width",void 0),qp([Object(r.q)("auto")],t.prototype,"height",void 0),qp([Object(r.q)([])],t.prototype,"expandedIndices",void 0),qp([Object(r.q)("Multiple")],t.prototype,"expandMode",void 0),qp([Object(r.q)(!1)],t.prototype,"enableHtmlSanitizer",void 0),qp([Object(r.g)({},hu)],t.prototype,"animation",void 0),qp([Object(r.l)()],t.prototype,"clicked",void 0),qp([Object(r.l)()],t.prototype,"expanding",void 0),qp([Object(r.l)()],t.prototype,"expanded",void 0),qp([Object(r.l)()],t.prototype,"created",void 0),qp([Object(r.l)()],t.prototype,"destroyed",void 0),t=qp([r.p],t)}(r.i),fu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gu=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},mu=function(e){var t=e;return t.sourcePoint||t.targetPoint||t.sourceID||t.targetID||t.sourcePortID||t.targetPortID||t.sourceDecorator||t.targetDecorator?_r:(e.shape&&(e.shape instanceof Qs||e.shape.type),Pl)},vu=function(e){function t(t,i,n,r){return e.call(this,t,i,n,r)||this}return fu(t,e),gu([Object(r.q)("")],t.prototype,"id",void 0),gu([Object(r.q)()],t.prototype,"height",void 0),gu([Object(r.q)(!0)],t.prototype,"expanded",void 0),gu([Object(r.q)("")],t.prototype,"iconCss",void 0),gu([Object(r.q)("")],t.prototype,"title",void 0),gu([Object(r.f)(mu)],t.prototype,"symbols",void 0),t}(r.d),yu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fu(t,e),gu([Object(r.q)()],t.prototype,"width",void 0),gu([Object(r.q)()],t.prototype,"height",void 0),t}(r.d),bu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fu(t,e),gu([Object(r.q)()],t.prototype,"width",void 0),gu([Object(r.q)()],t.prototype,"height",void 0),gu([Object(r.g)({},E)],t.prototype,"offset",void 0),t}(r.d),wu=function(e){function t(t,i){var n,r,o=e.call(this,t,i)||this;o.symbolTable={},o.childTable={},o.info="info",o.oldObject=null,o.laneTable={},o.isExpand=!1,o.isExpandMode=!1,o.isMethod=!1,o.paletteid=88123,o.checkOnRender=!1,o.helper=function(e){var t,i=o.selectedSymbol&&o.selectedSymbol.id||e.sender.target.id.split("_container")[0],n=o.symbolTable[i];if(n&&o.selectedSymbol){o.selectedSymbols=o.selectedSymbol.id===n.id?n:o.selectedSymbol;o.getMousePosition(e.sender);(t=o.getSymbolPreview(o.selectedSymbols,e.sender,o.element)).setAttribute("paletteId",o.element.id)}return t};for(var a=0;o&&o.palettes&&a<o.palettes.length;a++)for(var s=0;s<o.palettes[a].symbols.length;s++)n=o.palettes[a].symbols[s],r=t.palettes[a].symbols[s],n&&"UmlActivity"===n.shape.type&&Ra(r,n),(o.nodeDefaults||o.connectorDefaults)&&_a(n,r,n instanceof Pl?o.nodeDefaults:o.connectorDefaults);return o}return fu(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=!1,n=0,o=Object.keys(e);n<o.length;n++){switch(o[n]){case"width":this.element.style.width=this.width.toString();break;case"height":this.element.style.height=this.height.toString();break;case"symbolPreview":break;case"symbolWidth":case"symbolHeight":case"getSymbolInfo":i=!0;break;case"enableSearch":if(e.enableSearch&&!Object(r.I)())this.createTextbox();else{var a=document.getElementById(this.element.id+"_search");a&&a.parentNode.removeChild(a)}break;case"palettes":for(var s=0,l=Object.keys(e.palettes);s<l.length;s++){var c=l[s],d=Number(c);if(Object(r.I)()||this.accordionElement.items[d]||(this.accordionElement.items[d]={header:e.palettes[d].title||"",expanded:e.palettes[d].expanded,iconCss:e.palettes[d].iconCss||""}),e.palettes[d].height)document.getElementById(this.palettes[d].id+"_content").style.height=e.palettes[d].height+"px";void 0!==e.palettes[d].iconCss&&(Object(r.I)()||(this.accordionElement.items[d].iconCss=e.palettes[d].iconCss||"",i=!0)),void 0===e.palettes[d].expanded||Object(r.I)()||(this.palettes[d].isInteraction?this.palettes[d].isInteraction=!1:(this.accordionElement.items[d].expanded=e.palettes[d].expanded,this.isExpand=!0),this.isExpandMode||this.isMethod||this.isExpand||(this.isExpand=!0)),Object(r.I)()&&null!==e.palettes[d].symbols&&(i=!0),Object(r.I)()&&null===e.palettes[d].symbols&&this.updateBlazorProperties(e)}break;case"enableAnimation":Object(r.I)()||(this.enableAnimation?this.accordionElement.animation={expand:{duration:400},collapse:{duration:400}}:this.accordionElement.animation={expand:{duration:0},collapse:{duration:0}});break;case"expandMode":Object(r.I)()||(this.accordionElement.expandMode=this.expandMode,i=!0,this.isExpandMode=!0);break;case"allowDrag":this.allowDrag=e.allowDrag,this.allowDrag?(this.initDraggable(),this.draggable.helper=this.helper):this.draggable.helper=function(){return null}}}if(i&&this.refreshPalettes(),this.isExpand&&!i){this.refresh(),this.isExpand=!1;for(var h=0;h<this.palettes.length;h++){var p=this.palettes[h].id;window[p]&&window[p].length>1&&(window[p][1].parentNode.removeChild(window[p][1]),window[p][1]=null)}}this.isMethod=!1},t.prototype.updateBlazorProperties=function(e){if(window&&window.Blazor){var t={methodName:"UpdateBlazorProperties",paletteobj:{palette:e.palettes}};window.sfBlazor.updateBlazorProperties(t,this)}},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.preRender=function(){var e=this;if(""===this.element.id){var t=document.getElementsByClassName("e-symbolpalette").length;this.element.id="symbolpalette_"+this.paletteid+"_"+t}if(this.element.style.overflow="auto",this.element.style.height=this.height.toString(),this.element.style.width=this.width.toString(),this.enableSearch&&!Object(r.I)()&&this.createTextbox(),!Object(r.I)()){var i=Zl("div",{id:this.element.id+"_container"});this.accordionElement=new uu({expandMode:this.expandMode}),this.enableAnimation||(this.accordionElement.animation={expand:{duration:0},collapse:{duration:0}}),this.accordionElement.created=function(){e.checkOnRender=!0},this.accordionElement.expanded=function(t){var i=e.accordionElement.items.indexOf(t.item),n=e.allowServerDataBinding;e.allowServerDataBinding=!1,e.palettes[i].expanded=t.isExpanded,e.palettes[i].isInteraction=!0,e.allowServerDataBinding=n},this.accordionElement.expanding=function(t){if(e.checkOnRender){var i={element:t.element,content:t.content,index:t.index,cancel:!1,isExpanded:t.isExpanded,palette:e.palettes[t.index]};e.trigger("paletteExpanding",i),t.cancel=i.cancel}},this.element.appendChild(i)}window.measureElement&&(window.measureElement=null),oc(),this.unWireEvents(),this.wireEvents()},t.prototype.render=function(){this.diagramRenderer=new Ec(this.element.id,new Ic,!1),this.svgRenderer=new Ec(this.element.id,new Ic,!0),this.updatePalettes(),Object(r.I)()||this.accordionElement.appendTo("#"+this.element.id+"_container"),this.renderComplete(),Object(r.I)()&&this.element.classList.remove("e-symbolpalette-hidden")},t.prototype.getModuleName=function(){return"SymbolPalette"},t.prototype.requiredModules=function(){var e=[];return e.push({member:"Bpmn",args:[]}),e},t.prototype.destroy=function(){if(this.allowDrag){this.draggable.destroy(),this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this);var t=document.getElementById(this.element.id+"_container");if(t){this.element.removeChild(t);if(window.measureElement){window.measureElement.usageCount-=1;window.measureElementCount--,0===window.measureElementCount&&(window.measureElement.parentNode.removeChild(window.measureElement),window.measureElement=null)}}(t=document.getElementById(this.element.id+"_search"))&&t.parentNode.removeChild(t),this.element.classList.remove("e-symbolpalette")}},t.prototype.addPalettes=function(e){for(var t,i=0;i<e.length;i++){var n=this.allowServerDataBinding;this.isProtectedOnChange=!0,this.allowServerDataBinding=!1,t=new vu(this,"palettes",e[i],!0),this.palettes.push(t),this.initSymbols(t),this.allowServerDataBinding=n,this.isProtectedOnChange=!1,this.renderPalette(t)}this.bulkChanges={},Object(r.I)()||this.accordionElement.refresh()},t.prototype.removePalette=function(e){for(var t=0;t<this.palettes.length;t++)if(this.palettes[t].id===e){this.palettes.splice(t,1),Object(r.I)()||this.accordionElement.items.splice(t,1);break}},t.prototype.removePalettes=function(e){var t=this.allowServerDataBinding;this.allowServerDataBinding=!1;for(var i=0;i<e.length;i++)this.removePalette(e[i]);Object(r.I)()||this.accordionElement.refresh(),this.allowServerDataBinding=t},t.prototype.initSymbols=function(e){for(var t=[],i=0,n=0,r=0,o=e.symbols;r<o.length;r++){if("SwimLane"===(S=o[r]).shape.type){var a=S,s=S.shape,l="Horizontal"===s.orientation;if(s.isLane){i=l?this.symbolHeight-this.symbolHeight/2:this.symbolHeight-this.symbolHeight/4,n=l?this.symbolWidth-this.symbolWidth/4:this.symbolWidth-this.symbolWidth/2,this.laneTable[S.id]={height:i,width:n};var c=s.lanes[0].header,d=s.lanes[0].style,h=c.style,p={id:"header"+lc(),shape:{type:"Basic",shape:"Rectangle"},width:l?c.width:a.width,height:l?a.height:c.height,style:h,annotations:[{content:c.annotation.content}]};p.offsetX=p.width/2,p.offsetY=p.height/2,this.addPaletteItem(e.id,p);var u={id:"lane"+lc(),shape:{type:"Basic",shape:"Rectangle"},width:l?a.width-c.width:a.width,height:l?a.height:a.height-c.height,style:d};u.offsetX=l?p.width+u.width/2:u.width/2,u.offsetY=l?u.height/2:p.height+u.height/2,this.addPaletteItem(e.id,u),a.children=[p.id,u.id]}else s.isPhase&&(i=a.height?a.height:this.symbolHeight,n=a.width?a.width:this.symbolWidth,S.shape.type="Path",S.shape.data=l?"M0,0 L"+n+",0":"M0,0 L0,"+n)}if(S instanceof Pl){var f=Pc(this.getNodeDefaults);f&&f(S,this)}else if(S instanceof _r){var g=Pc(this.getConnectorDefaults);g&&g(S,this)}this.symbolTable[S.id]=S,S instanceof Pl&&S.children&&t.push(S)}for(var m=0;m<t.length;m++)for(var v=void 0,y=0;y<t[m].children.length;y++)(v=this.symbolTable[t[m].children[y]])&&(this.childTable[v.id]=v,v.parentId=t[m].id);for(var b=0,w=e.symbols;b<w.length;b++){(S=w[b])instanceof Pl&&S.children||this.prepareSymbol(S)}for(var x=0,O=t;x<O.length;x++){var S=O[x];this.prepareSymbol(S)}},t.prototype.renderPalette=function(e){var t=Object(r.I)()?"overflow:auto;":"display:none;overflow:auto;";e.height&&(t+="height:"+e.height+"px");var i,n=document.getElementById(e.id);if(Object(r.I)()&&null!=n?(i=Zl("div",{id:e.id+"_content",style:t,class:"e-remove-palette"}),n.appendChild(i)):(i=Zl("div",{id:e.id,style:t,class:"e-remove-palette"}),this.element.appendChild(i)),!Object(r.I)()){var o={header:e.title,expanded:e.expanded,content:"#"+e.id,iconCss:e.iconCss};this.accordionElement.items.push(o)}this.renderSymbols(e,i)},t.prototype.addPaletteItem=function(e,t,i){t=uc(t);for(var n=0;n<this.palettes.length;n++){var o=this.palettes[n];if(-1!==o.id.indexOf(e)){for(var a=[void 0,o,"symbols",{},!0],s=new(Function.prototype.bind.apply(mu(t),a)),l=0;l<Object.keys(t).length;l++){var c=this.allowServerDataBinding;this.allowServerDataBinding=!1,s[Object.keys(t)[l]]=t[Object.keys(t)[l]],this.allowServerDataBinding=c}_a(s,t,s instanceof Pl?this.nodeDefaults:this.connectorDefaults),o.symbols.push(s);var d=this.allowServerDataBinding;if(this.allowServerDataBinding=!1,this.prepareSymbol(s),this.allowServerDataBinding=d,this.symbolTable[s.id]=s,i)this.childTable[s.id]=s;else{var h=void 0;(h=Object(r.I)()?document.getElementById(o.id+"_content"):document.getElementById(o.id))&&h.appendChild(this.getSymbolContainer(s,h))}break}}},t.prototype.removePaletteItem=function(e,t){for(var i,n=0;n<this.palettes.length;n++){var r=this.palettes[n];if(-1!==r.id.indexOf(e))for(var o=0,a=r.symbols;o<a.length;o++){var s=a[o];if(-1!==s.id.indexOf(t)){var l=r.symbols.indexOf(s);if(r.symbols.splice(l,1),s.children)for(var c=s.children,d=0;d<c.length;d++)delete this.symbolTable[c[d]];delete this.symbolTable[s.id];var h=document.getElementById(s.id+"_container");h.parentNode.removeChild(h),i=!0;break}}if(i)break}},t.prototype.prepareSymbol=function(e){var t,i,n,o,a,s=new Ws,l=e,c=new He,d=e instanceof Pl?e.initContainer():null;d&&!d.children&&(d.children=[]);var h=Pc(this.getSymbolTemplate);if(h&&(a=h(e)),a||(l.children?a=this.getContainer(l,d):(a=e.init(this),e instanceof Pl&&e.parentId&&d.children.push(a))),!e.parentId){var p={width:this.symbolWidth,height:this.symbolHeight},u=Pc(this.getSymbolInfo);if(u?p=u(e):Object(r.I)()&&(p=this.getBlazorSymbolInfo(e,p)),p=p||this.symbolInfo||{},e.shape&&e.shape.isPhase&&(p.width=p.width||this.symbolWidth,p.height=p.height||this.symbolHeight),a.relativeMode="Object",a.horizontalAlignment=a.verticalAlignment="Center",c.style.strokeColor=c.style.fill="none",c.children=[a],a.measure(new P),a.arrange(a.desiredSize),t=p.width=p.width||(void 0!==l.width?a.actualSize.width:void 0)||this.symbolWidth,n=p.height=p.height||(void 0!==l.height?a.actualSize.height:void 0)||this.symbolHeight,void 0!==t&&void 0!==n){var f=t,g=n,m=(e.shape.isLane,!!e.shape.isPhase);void 0!==this.symbolWidth?f=this.symbolWidth-this.symbolMargin.left-this.symbolMargin.right:t+=l.style.strokeWidth,void 0!==this.symbolHeight?g=this.symbolHeight-this.symbolMargin.top-this.symbolMargin.bottom:n+=l.style.strokeWidth,p.description&&""!==p.description.text&&(g-=20),i=f/(!m&&a.width||t),o=g/(!m&&a.height||n),p.fit&&(i=f/p.width,o=g/p.height),t=f,n=g,i=o=Math.min(i,o),c.width=t,c.height=n,a.width=p.width,a.height=p.height,this.scaleSymbol(e,c,i,o,t,n)}else{var v=void 0;e instanceof _r&&(v=Zt(e)),a.width=e.width||v?v.width:a.actualSize.width,a.height=e.height||v?v.height:a.actualSize.height}e.wrapper=s,s.children=[c],a.pivot=s.pivot={x:0,y:0},s.id=a.id+"_symbol",s.style.fill=s.style.strokeColor="transparent",e instanceof Pl?(s.offsetX=e.style.strokeWidth/2,s.offsetY=e.style.strokeWidth/2):(s.offsetX=.5,s.offsetY=.5),this.getSymbolDescription(p,t,s),s.measure(new P),s.arrange(s.desiredSize),p.width=p.width||a.actualSize.width,p.height=p.height||a.actualSize.height,e[this.info]=p}e.parentId&&(d.measure(new P(l.width,l.height)),d.arrange(d.desiredSize))},t.prototype.getBlazorSymbolInfo=function(e,t){var i=e.symbolInfo;return i&&(t.description=i.description||this.symbolInfo.description,t.fit=i.fit||this.symbolInfo.fit,t.height=i.height||this.symbolInfo.height,t.width=i.width||this.symbolInfo.width,t.tooltip=i.tooltip||this.symbolInfo.tooltip,t.template=i.template||this.symbolInfo.template),t},t.prototype.getContainer=function(e,t){var i;t.measureChildren=!1;var n=e.children;t.children=[];for(var r=0;r<n.length;r++)this.symbolTable[n[r]]&&t.children.push(this.symbolTable[n[r]].wrapper);return t.measure(new P(e.width,e.height)),t.arrange(t.desiredSize),0===t.bounds.x&&0===t.bounds.y||(ws(e,(i=t.bounds).x,i.y,this.symbolTable,!1,this),t=this.getContainer(e,t)),t},t.prototype.getSymbolDescription=function(e,t,i){if(e&&e.description&&e.description.text){var n=new Be;e.description.overflow=e.description.overflow||"Ellipsis",e.description.wrap=e.description.wrap||"WrapWithOverflow",n.id=i.id+"_text",n.content=e.description.text,n.width=t,n.height=20,n.style.strokeColor="transparent",n.style.fill="transparent",n.style.strokeWidth=0,n.style.textWrapping=e.description.wrap,n.style.textOverflow=e.description.overflow,n.margin={left:0,right:0,top:0,bottom:5},i.children.push(n)}},t.prototype.renderSymbols=function(e,t){for(var i=0,n=e.symbols;i<n.length;i++){var r=n[i];r.parentId||this.getSymbolContainer(r,t)}},t.prototype.getSymbolPreview=function(e,t,i){var n,r,o;this.allowServerDataBinding=!1;var a=e.wrapper.children[0].desiredSize.width+e.style.strokeWidth,s=e.wrapper.children[0].desiredSize.height+e.style.strokeWidth,l=e.wrapper.children[0].children[0],c=e.previewSize;if(e&&(c.width||c.height)||void 0!==this.symbolPreview.width||void 0!==this.symbolPreview.height){a=(c.width||this.symbolPreview.width||a)-e.style.strokeWidth,s=(c.height||this.symbolPreview.height||s)-e.style.strokeWidth,r=a/l.actualSize.width,o=s/l.actualSize.height,r=o=Math.min(r,o);var d=l.actualSize.width*r,h=l.actualSize.height*o;e.wrapper.children[0].width=a,e.wrapper.children[0].height=s,this.measureAndArrangeSymbol(l,e instanceof Pl),this.scaleSymbol(e,e.wrapper.children[0],r,o,d,h,!0),a=d,s=h}var p={x:l.offsetX,y:l.offsetY};l.offsetX=l.offsetY=e.style.strokeWidth/2,l.pivot={x:0,y:0},this.measureAndArrangeSymbol(l,e instanceof Pl);var u,f=Zl("div",{draggable:"true",class:"e-dragclone",style:"pointer-events:none"});document.body.appendChild(f);var g="margin:5px;";if("Native"===e.shape.type){n=Jl("svg",{id:e.id+"_preview",width:Math.ceil(a)+1,height:Math.ceil(s)+1});var m=Jl("g",{id:e.id+"_g"});n.appendChild(m),f.appendChild(n),this.svgRenderer.renderElement(l,m,void 0,void 0,n)}else if("HTML"===e.shape.type)u=this.getHtmlSymbol(e,n,f,s,a,!0);else if(e.children&&e.children.length>0&&Ba(e,"HTML",this.childTable))u=this.getGroupParent(e,n,f,e.wrapper.actualSize.height,e.wrapper.actualSize.width,!0);else{n=jc.createCanvas(e.id+"_preview",2*(Math.ceil(a)+e.style.strokeWidth+1),2*(Math.ceil(s)+e.style.strokeWidth+1)),f.appendChild(n),"Basic"===e.shape.type||"Flow"===e.shape.type?g+="transform: scale(0.5) translate(-"+n.width/2+"px, -"+n.height/2+"px);":g+="transform:scale(0.5);",n.setAttribute("transform-origin","0 0");var v=2;e instanceof _r&&(v=1.9),n.getContext("2d").setTransform(v,0,0,v,0,0),this.diagramRenderer.renderElement(l,n,void 0)}return nc(u&&("HTML"===e.shape.type||e.children&&e.children.length>0)?u:n,g),l.offsetX=p.x,l.offsetY=p.y,this.allowServerDataBinding=!0,f},t.prototype.measureAndArrangeSymbol=function(e,t){e.children&&!t&&(e.children[0].transform=le.Self),e.measure(new P),e.arrange(e.desiredSize),e.children&&(e.children[0].transform=le.Parent)},t.prototype.updateSymbolSize=function(e,t,i){var n=e.wrapper.children[0].children[0],r=e.style.strokeWidth;n.width=(t||n.width)-(r+1),n.height=(i||n.height)-(r+1),e.wrapper.measure(new P),e.wrapper.arrange(e.wrapper.desiredSize)},t.prototype.getSymbolContainer=function(e,t,i){var n,r,o,a=this.symbolTable[e.id][this.info],s=this.getSymbolSize(e,a),l=s.width+1,c=s.height+1,d=Zl("div",{id:e.id+"_container",style:"width:"+l+"px;height:"+c+"px;float:left;overflow:hidden",title:a.tooltip?a.tooltip:e.id});if(t.appendChild(d),"Native"===e.shape.type)n=Jl("svg",{id:e.id,width:Math.ceil(e.wrapper.actualSize.width)+1,height:Math.ceil(e.wrapper.actualSize.height)+1}),r=Jl("g",{id:e.id+"_g"}),n.appendChild(r),d.appendChild(n),this.updateSymbolSize(e),this.svgRenderer.renderElement(e.wrapper,r,void 0,void 0,n);else if("HTML"===e.shape.type)o=this.getHtmlSymbol(e,n,d,e.wrapper.actualSize.height,e.wrapper.actualSize.width,!1);else if(e.children&&e.children.length>0&&Ba(e,"HTML",this.childTable))o=this.getGroupParent(e,n,d,e.wrapper.actualSize.height,e.wrapper.actualSize.width,!1);else{n=jc.createCanvas(e.id,Math.ceil(2*(e.wrapper.actualSize.width+e.style.strokeWidth))+1,Math.ceil(2*(e.wrapper.actualSize.height+e.style.strokeWidth))+1),d.appendChild(n);var h=2;e instanceof _r&&(h=1.9),n.getContext("2d").setTransform(h,0,0,h,0,0),this.diagramRenderer.renderElement(e.wrapper,r||n,void 0,void 0,void 0,void 0,!0,void 0,!0)}if(!i){var p=e.wrapper.actualSize.width+e.style.strokeWidth,u=e.wrapper.actualSize.height+e.style.strokeWidth,f="pointer-events:none;transform-origin:0 0;overflow:hidden;";return e.shape.isPhase?"Horizontal"===e.shape.orientation?f+="margin-left:"+Math.max(this.symbolMargin.left,(l-p)/2)+"px;margin-top:"+s.height/2+"px;":f+="margin-left:"+s.width/2+"px;margin-top:"+Math.max(this.symbolMargin.top,(c-u)/2)+"px;":f+="margin-left:"+Math.max(this.symbolMargin.left,(l-p)/2)+"px;margin-top:"+Math.max(this.symbolMargin.top,(c-u)/2)+"px;",n instanceof HTMLCanvasElement&&(f+="transform:scale(.5,.5);"),nc(o&&("HTML"===e.shape.type||e.children&&e.children.length>0)?o:n,f),d.classList.add("e-symbol-draggable"),d}return n},t.prototype.getGroupParent=function(e,t,i,n,r,o){var a=Zl("div",{id:e.id+(o?"_html_div_preview":"_html_div")}),s=Zl("div",{id:e.id+(o?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute",class:"e-html-layer"}),l=Zl("div",{id:e.id+(o?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute"});return s.appendChild(l),a.appendChild(s),t=jc.createCanvas(o?e.id+"_preview":e.id,Math.ceil(r)+1,Math.ceil(n)+1),a.appendChild(t),i.appendChild(a),this.diagramRenderer.renderElement(e.wrapper.children[0].children[0],t,s),a},t.prototype.getHtmlSymbol=function(e,t,i,n,r,o){var a=Zl("div",{id:e.id+(o?"_html_div_preview":"_html_div")}),s=Zl("div",{id:e.id+(o?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute",class:"e-html-layer"}),l=Zl("div",{id:e.id+(o?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(r+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute"});return s.appendChild(l),a.appendChild(s),t=jc.createCanvas(e.id,Math.ceil(2*(e.wrapper.actualSize.width+e.style.strokeWidth))+1,Math.ceil(2*(e.wrapper.actualSize.height+e.style.strokeWidth))+1),i.appendChild(t),t.getContext("2d").setTransform(2,0,0,2,0,0),a.appendChild(t),i.appendChild(a),this.diagramRenderer.renderElement(e.wrapper.children[0].children[0],t,s),a},t.prototype.getSymbolSize=function(e,t){var i=e.wrapper.actualSize.width,n=e.wrapper.actualSize.height;return this.symbolWidth||this.symbolHeight?(i=this.symbolWidth,n=Math.max(this.symbolHeight,n)):(i+=this.symbolMargin.left+this.symbolMargin.right+e.style.strokeWidth,n+=this.symbolMargin.top+this.symbolMargin.bottom+e.style.strokeWidth),new P(i,n)},t.prototype.getMousePosition=function(e){var t,i,n;if(-1!==e.type.indexOf("touch")){var r=(n=e).changedTouches[0].clientY,o=n.changedTouches[0].clientX;t=r-this.element.offsetTop,i=o-this.element.offsetLeft}else t=e.clientY-this.element.offsetTop,i=e.clientX-this.element.offsetLeft;return{x:i,y:t}},t.prototype.mouseMove=function(e,t){!this.highlightedSymbol||this.selectedSymbol&&this.selectedSymbol.id+"_container"===this.highlightedSymbol.id||(this.highlightedSymbol.classList.remove("e-symbol-hover"),this.highlightedSymbol.style.backgroundColor="",this.highlightedSymbol=null);var i=e.target.id.split("_container")[0];if(this.symbolTable[i]){var n=document.getElementById(i+"_container");n.classList.add("e-symbol-hover"),this.highlightedSymbol=n}e.preventDefault()},t.prototype.mouseUp=function(e){if(this.isMethod=!0,e&&e.target)if("iconSearch"===e.srcElement.id){var t=document.getElementById("iconSearch");t.classList.contains("e-clear-searchtext")&&(t.className="e-input-group-icon e-search e-icons",document.getElementById("textEnter").value="",Object(r.I)()&&document.getElementById(this.element.id+"_search_content").classList.add("e-symbolpalette-search-hidden"),this.searchPalette(""))}else{var i=e.target.id.split("_container")[0];if(i&&this.selectedSymbol){var n={oldValue:this.oldObject,newValue:i};this.trigger("paletteSelectionChange",n),this.oldObject=i,e.preventDefault()}else""!==this.oldObject&&(this.oldObject="")}},t.prototype.keyUp=function(e){var t=this;if(this.enableSearch){var i=this;document.getElementById("iconSearch").className="e-input-group-icon e-clear-searchtext e-icons",Object(r.I)()&&e.target instanceof HTMLInputElement&&(""===e.target.value?document.getElementById(this.element.id+"_search_content").classList.add("e-symbolpalette-search-hidden"):document.getElementById(this.element.id+"_search_content").classList.remove("e-symbolpalette-search-hidden")),!e||"Enter"!==e.key&&13!==e.keyCode?(this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e.target instanceof HTMLInputElement&&(i.searchPalette(e.target.value),t.timer=null)}),500)):e.target instanceof HTMLInputElement&&this.searchPalette(e.target.value)}},t.prototype.mouseDown=function(e){var t=e.target.id.split("_container")[0];if(this.selectedSymbol){var i,n=document.getElementById(this.selectedSymbol.id+"_container");t!==this.selectedSymbol.id&&n&&n.classList.remove("e-symbol-selected"),(i=document.getElementById(this.selectedSymbol.id+"_container"))&&(i.style.backgroundColor=""),this.selectedSymbol=null}this.symbolTable[t]&&((i=document.getElementById(t+"_container")).classList.add("e-symbol-selected"),this.selectedSymbol=this.symbolTable[t],e.preventDefault())},t.prototype.keyDown=function(e){if(e&&"Escape"===e.key){var t=this.draggable.helperElement;t&&t.parentNode&&(t.parentNode.removeChild(t),this.draggable.intDestroy())}},t.prototype.initDraggable=function(){if(this.allowDrag){this.draggable=new r.j(this.element,{dragTarget:".e-symbol-draggable",helper:this.helper,dragStart:this.dragStart,preventDefault:!1,dragStop:this.dragStop,drag:function(e){var t=Ql(e.target,"e-droppable");if(t&&t.classList.contains("e-diagram")){t.ej2_instances[0].droppable.over(e)}},cursorAt:{left:this.symbolPreview.offset.x,top:this.symbolPreview.offset.y}})}},t.prototype.dragStart=function(e){var t=this.helper[0];t&&t.setAttribute("paletteId",this.element.id),Object(r.I)()&&e.bindEvents(e.dragElement)},t.prototype.dragStop=function(e){Ql(e.target,"e-diagram")||Object(r.P)(e.helper)},t.prototype.scaleSymbol=function(e,t,i,n,r,o,a){if(e instanceof _r){var s=e.wrapper;e.wrapper=t.children[0];for(var l=e.scale(i,n,r,o,t.children[0]),c=r/2-t.children[0].children[0].offsetX+l.x/2,d=o/2-t.children[0].children[0].offsetY+l.y/2,h=0,p=t.children[0].children;h<p.length;h++){var u=p[h];u.offsetX+=c,u.offsetY+=d,u.staticSize=!1}e.wrapper=s}else if("Bpmn"===e.shape.type&&this.bpmnModule){s=e.wrapper;e.wrapper=t,t.children[0].width=r,t.children[0].height=o,this.bpmnModule.updateBPMN({width:r,height:o},e,e,null),e.wrapper=s}else if(e.children){var f,g,m=e.children;if(!a)for(var v=void 0,y=void 0,b=0;b<m.length;b++)(y=t.children[0].children[b])&&(y.children[0].children&&this.measureChild(y),v=this.symbolTable[y.id],y.width=v.width,y.height=v.height,y.measure(new P),y.arrange(y.children[0].desiredSize));if(f=r/t.children[0].desiredSize.width,g=o/t.children[0].desiredSize.height,t.children[0].measure(new P),t.children[0].arrange(t.children[0].desiredSize),!a){var w=void 0;for(b=0;b<m.length;b++)(w=t.children[0].children[b])&&(w.children[0].children&&this.scaleChildren(w,f,g,e),this.scaleGroup(w,f,g,e))}if(a){v=void 0;var x=void 0,O=void 0;for(w=void 0,b=0;b<m.length;b++)v=this.symbolTable[m[b]],x=r/e.wrapper.children[0].desiredSize.width,O=o/e.wrapper.children[0].desiredSize.height,(w=t.children[0].children[b])&&(w.children[0].children&&this.scaleChildren(w,x,O,e,!0),this.scaleGroup(w,x,O,e,!0));e.wrapper.children[0].measure(new P),e.wrapper.children[0].arrange(e.wrapper.children[0].desiredSize)}}else bs(t.children[0],i,n,t)},t.prototype.scaleChildren=function(e,t,i,n,r){for(var o,a=0;a<e.children.length;a++)(o=e.children[a]).children[0].children?this.scaleChildren(o,t,i,n,r):this.scaleGroup(o,t,i,n,r)},t.prototype.measureChild=function(e){for(var t,i,n=0;n<e.children.length;n++)(t=e.children[n]).children[0].children?this.measureChild(t):(i=this.symbolTable[t.id],t.width=i.width,t.height=i.height,t.measure(new P),t.arrange(t.children[0].desiredSize))},t.prototype.scaleGroup=function(e,t,i,n,r){e.width=e.width*t,e.height=e.height*i,e.offsetX=r?e.offsetX*t-n.style.strokeWidth:e.offsetX*t+n.style.strokeWidth/2,e.offsetY=r?e.offsetY*i-n.style.strokeWidth:e.offsetY*i+n.style.strokeWidth/2,e.measure(new P),e.arrange(e.children[0].desiredSize)},t.prototype.refreshPalettes=function(){Object(r.I)()||(this.accordionElement.items=[]),function(e,t){var i;for(i=t?document.getElementById(t).getElementsByClassName(e):document.getElementsByClassName(e);i.length>0;)i[0].parentNode.removeChild(i[0])}("e-remove-palette",this.element.id),this.updatePalettes(),Object(r.I)()||this.accordionElement.dataBind()},t.prototype.updatePalettes=function(){for(var e=0;e<this.palettes.length;e++){var t=this.palettes[e];this.initSymbols(t),this.renderPalette(t)}},t.prototype.createTextbox=function(){var e=Zl("div",{id:this.element.id+"_search"});nc(e,"backgroundColor:white;height:30px"),e.className="e-input-group",this.element.appendChild(e);var t=Zl("input",{});t.placeholder="Search Shapes",t.id="textEnter",nc(t,"width:100%;height:auto"),t.className="e-input",e.appendChild(t);var i=Zl("span",{id:"iconSearch",className:"e-input-group-icon e-search e-icons"});e.appendChild(i)},t.prototype.getFilterSymbol=function(e){for(var t=[],i=0;i<e.length;i++)for(var n=0;n<this.ignoreSymbolsOnSearch.length;n++)this.ignoreSymbolsOnSearch[n]!==e[i].id&&t.push(e[0]);return t},t.prototype.searchPalette=function(e){var t,i=[],n=document.getElementById("SearchPalette");if(n)for(var o=n.children.length-1;o>=0;o--)n.removeChild(n.children[o]);for(var a=0;a<this.palettes.length;a++)for(var s=this.palettes[a],l=0;l<s.symbols.length;l++){var c=s.symbols[l];""!==e&&-1!==c.id.toLowerCase().indexOf(e.toLowerCase())&&i.push(c)}var d=Pc(this.filterSymbols);if(d&&(i=d(i)||[]),this.ignoreSymbolsOnSearch&&this.ignoreSymbolsOnSearch.length>0&&(i=this.getFilterSymbol(i)),n||Object(r.I)()||(n=t=this.createSearchPalette(t)),i.length>0)for(var h=0,p=i;h<p.length;h++){var u=p[h];this.getSymbolContainer(u,n)}else if(""!==e){var f=Zl("div",{id:"EmptyDiv",style:"text-align:center;font-style:italic"});f.innerHTML="No Items To Display",n.appendChild(f)}else{if(document.getElementById("iconSearch").className="e-input-group-icon e-search e-icons",!Object(r.I)()){this.accordionElement.removeItem(0);var g=document.getElementById("SearchPalette");g&&g.remove()}}},t.prototype.createSearchPalette=function(e){e=Zl("div",{id:"SearchPalette",style:"display:none;overflow:auto;"}),this.element.appendChild(e);return this.accordionElement.addItem({header:"Search Results",expanded:!0,content:"#SearchPalette"},0),e},t.prototype.wireEvents=function(){var e=r.c.touchStartEvent,t=r.c.touchEndEvent,i=r.c.touchMoveEvent;r.m.add(this.element,e,this.mouseDown,this),r.m.add(this.element,i,this.mouseMove,this),r.m.add(this.element,t,this.mouseUp,this),r.m.add(this.element,"keyup",this.keyUp,this),r.m.add(document,"keydown",this.keyDown,this),this.initDraggable()},t.prototype.unWireEvents=function(){var e=r.c.touchStartEvent,t=r.c.touchEndEvent,i=r.c.touchMoveEvent;r.c.isPointer;r.m.remove(this.element,e,this.mouseDown),r.m.remove(this.element,i,this.mouseMove),r.m.remove(this.element,t,this.mouseUp),r.m.remove(this.element,"keyup",this.keyUp),r.m.remove(document,"keydown",this.keyDown)},gu([Object(r.q)("S")],t.prototype,"accessKey",void 0),gu([Object(r.q)("100%")],t.prototype,"width",void 0),gu([Object(r.q)("100%")],t.prototype,"height",void 0),gu([Object(r.e)([],vu)],t.prototype,"palettes",void 0),gu([Object(r.q)()],t.prototype,"getSymbolInfo",void 0),gu([Object(r.q)({fit:!0})],t.prototype,"symbolInfo",void 0),gu([Object(r.q)()],t.prototype,"filterSymbols",void 0),gu([Object(r.q)()],t.prototype,"ignoreSymbolsOnSearch",void 0),gu([Object(r.q)()],t.prototype,"getSymbolTemplate",void 0),gu([Object(r.q)()],t.prototype,"symbolWidth",void 0),gu([Object(r.q)()],t.prototype,"symbolHeight",void 0),gu([Object(r.g)({left:10,right:10,top:10,bottom:10},Se)],t.prototype,"symbolMargin",void 0),gu([Object(r.q)(!0)],t.prototype,"allowDrag",void 0),gu([Object(r.g)({},bu)],t.prototype,"symbolPreview",void 0),gu([Object(r.g)({},yu)],t.prototype,"symbolDragSize",void 0),gu([Object(r.q)(!1)],t.prototype,"enableSearch",void 0),gu([Object(r.q)(!0)],t.prototype,"enableAnimation",void 0),gu([Object(r.q)("Multiple")],t.prototype,"expandMode",void 0),gu([Object(r.l)()],t.prototype,"paletteSelectionChange",void 0),gu([Object(r.l)()],t.prototype,"paletteExpanding",void 0),gu([Object(r.q)()],t.prototype,"getNodeDefaults",void 0),gu([Object(r.q)()],t.prototype,"nodeDefaults",void 0),gu([Object(r.q)()],t.prototype,"getConnectorDefaults",void 0),gu([Object(r.q)()],t.prototype,"connectorDefaults",void 0),t}(r.i),xu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ou=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},Su=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.mode="Canvas",n.id="overview",n.actionName="",n.startPoint=null,n.currentPoint=null,n.prevPoint=null,n.scale=null,n.inAction=!1,n.viewPortRatio=1,n.horizontalOffset=0,n.verticalOffset=0,n.model={},n.event=!0,n.overviewid=88123,n.model={width:n.width,height:n.height},n}return xu(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"sourceID":this.setParent(e.sourceID);break;case"width":case"height":this.renderCanvas(),this.setParent(this.sourceID)}}},t.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},t.prototype.preRender=function(){if(""===this.element.id){var e=document.getElementsByClassName("e-overview").length;this.element.id="overview_"+this.overviewid+"_"+e}this.element.style.background="transparent",this.unWireEvents(),this.wireEvents()},t.prototype.render=function(){this.diagramRenderer=new Ec(this.element.id,new Ic,!1),this.renderCanvas(),this.setParent(this.sourceID),this.renderComplete()},t.prototype.getSizeValue=function(e){return e.toString().indexOf("px")>0||e.toString().indexOf("%")>0?e.toString():e.toString()+"px"},t.prototype.renderCanvas=function(e){var t=document.getElementById(this.element.id+"_canvas");t||(t=Zl("div",{}),this.element.appendChild(t)),rc(t,{id:this.element.id+"_canvas",class:"drawing",style:"position:relative; margin-top:6px; height:"+this.getSizeValue(this.model.height)+"; width:"+this.getSizeValue(this.model.width)+";style:-ms-touch-action: none;touch-action: none;"}),this.element.setAttribute("tabindex",String(0)),this.element.style.overflow="hidden",this.element.style.height=String(this.model.height),this.element.style.width=String(this.model.width),this.canvas=t},t.prototype.setParent=function(e){var t=document.getElementById(e);if(this.parent){var i=this.parent;this.parent=null,i.setOverview(null,this.element.id),this.removeDocument(this)}this.parent=this.getDiagram(t,"ej2_instances"),this.parent&&this.parent.setOverview(this)},t.prototype.getDiagram=function(e,t){for(var i,n=e[t].length,r=0;r<n;r++)if($l(e[t][r].element,"e-diagram")){i=e[t][r];break}return i},t.prototype.unWireEvents=function(){var e=r.c.touchStartEvent,t=r.c.touchMoveEvent,i=r.c.isPointer?"pointerleave":"mouseleave",n=r.c.isPointer,o=(r.c.info.name,r.c.touchEndEvent);r.m.remove(this.element,e,this.mouseDown),r.m.remove(this.element,t,this.mouseMove),r.m.remove(this.element,o,this.mouseUp),r.m.remove(this.element,i,this.documentMouseUp),r.m.remove(window,"resize",this.windowResize);var a=document.getElementById(this.sourceID+"content");a&&r.m.remove(a,"scroll",this.scrolled)},t.prototype.wireEvents=function(){var e=r.c.touchStartEvent,t=r.c.touchEndEvent,i=r.c.touchMoveEvent,n=r.c.isPointer?"pointerleave":"mouseleave",o=r.c.isPointer;r.c.info.name;r.m.add(this.element,e,this.mouseDown,this),r.m.add(this.element,i,this.mouseMove,this),r.m.add(this.element,t,this.mouseUp,this),r.m.add(this.element,n,this.documentMouseUp,this),r.m.add(window,"resize",this.windowResize,this);var a=document.getElementById(this.sourceID+"content");a&&r.m.add(a,"scroll",this.scrolled,this)},t.prototype.renderDocument=function(e){e.canvas=this.canvas;var t=document.getElementById(this.canvas.id+"_svg");t&&t.parentNode.removeChild(t);var i=Jl("svg",{id:this.canvas.id+"_svg",version:"1.1",xlink:"http://www.w3.org/1999/xlink",class:"overview_svg"});this.svg=i,e.svg=i,e.canvas.appendChild(i);var n,r=document.getElementById(this.element.id),o=r.clientWidth,a=r.clientHeight,s=r.getBoundingClientRect(),l=window.screenX<0?-1*window.screenX:window.screenX,c=window.screenY<0?-1*window.screenY:window.screenY;if(0===o){var d=Math.floor(window.innerWidth-l-Math.floor(s.left));o=d>0?d:Math.floor(window.innerWidth)}if(0===a){var h=Math.floor(window.innerHeight-c-Math.floor(s.top));a=h>0?h:Math.floor(window.innerHeight)}if(o>0&&(i.setAttribute("width",String(o)),this.model.height=a),a>0&&(i.setAttribute("height",String(a)),this.model.width=o),!e.diagramLayerDiv){e.diagramLayerDiv=Zl("div",{});document.getElementById(this.element.id);e.diagramLayer=jc.createCanvas(this.element.id+"_diagramLayer",this.model.width,this.model.height),e.diagramLayer.setAttribute("style","position:absolute; left:0px;  top:0px "),e.diagramLayerDiv.appendChild(e.diagramLayer),e.canvas.appendChild(e.diagramLayerDiv)}n={id:this.element.id+"_diagramLayer_div",style:"width:"+this.model.width+"px; height:"+this.model.height+"px;position:absolute;top:0px;left:0px"},rc(e.diagramLayerDiv,n),this.renderHtmlLayer(e.canvas),this.renderNativeLayer(e.canvas,e),this.addOverviewRectPanel(e)},t.prototype.removeDocument=function(e){var t=document.getElementById(this.canvas.id+"_svg");this.canvas.removeChild(t);var i=document.getElementById(this.element.id+"_htmlLayer");this.canvas.removeChild(i);var n=document.getElementById(this.element.id+"_diagramLayer_div");this.canvas.removeChild(n),e.diagramLayerDiv=null,e.diagramLayer=null},t.prototype.renderHtmlLayer=function(e){var t=Zl("div",{id:this.element.id+"_htmlLayer",class:"e-html-layer",style:"pointer-events:none;position:absolute;top:0px;left:0px;"}),i=Zl("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;"});return t.appendChild(i),e.appendChild(t),t},t.prototype.renderNativeLayer=function(e,t){if(!document.getElementById(this.element.id+"_nativeLayer_svg")){var i=this.parent.createSvg(this.element.id+"_nativeLayer_svg",this.model.width,this.model.height),n=Jl("g",{id:this.element.id+"_nativeLayer"});i.appendChild(n),t.diagramLayerDiv.appendChild(i),ic(i,{class:"e-native-layer"})}},t.prototype.addOverviewRectPanel=function(e){var t=document.getElementById(this.canvas.id+"_overviewsvg");t&&t.parentNode.removeChild(t),t=Jl("svg",{id:this.canvas.id+"_overviewsvg",class:"overviewsvg",version:"1.1",xlink:"http://www.w3.org/1999/xlink",style:"position:absolute;left:0px;top:0px; aria-label:Specifies overview",width:this.model.width,height:this.model.height}),e.canvas.appendChild(t);var i=Jl("g",{id:this.element.id+"_overviewlayer",style:"pointer-events:none"});t.appendChild(i);var n=Jl("rect",{fill:"transparent",width:"100%",height:"100%",class:"overviewbackrect",id:this.canvas.id+"overviewbackrect"});n.setAttribute("style"," pointer-events: none; "),i.appendChild(n);var r=Jl("g",{id:this.canvas.id+"overviewhandle",style:"pointer-events:all"});i.appendChild(r);var o=Jl("rect",{id:this.canvas.id+"overviewrect",fill:"transparent"});r.appendChild(o),this.renderOverviewCorner("left",r),this.renderOverviewCorner("right",r),this.renderOverviewCorner("top",r),this.renderOverviewCorner("bottom",r),this.renderOverviewCorner("topleft",r),this.renderOverviewCorner("topright",r),this.renderOverviewCorner("bottomleft",r),this.renderOverviewCorner("bottomright",r)},t.prototype.renderOverviewCorner=function(e,t){this.svg;var i,n=Jl(i="top"===e||"bottom"===e||"right"===e||"left"===e?"rect":"circle",{id:this.canvas.id+"visible"+e});t.appendChild(n);var r=Jl(i,{id:this.canvas.id+e,class:"overviewresizer",fill:"transparent"});t.appendChild(r)},t.prototype.updateOverviewRectangle=function(){var e=this.currentPoint.x-this.prevPoint.x,t=this.currentPoint.y-this.prevPoint.y,i=new P;i.width=0,i.height=0;var n=0,r=0;switch(this.resizeDirection){case"left":i.width-=e,i.height-=e/this.viewPortRatio,n=e,r=e/this.viewPortRatio,r/=2;break;case"right":i.width+=e,i.height+=e/this.viewPortRatio,r=e/this.viewPortRatio,r/=-2;break;case"top":i.height-=t,i.width-=t*this.viewPortRatio,r=t,n=t*this.viewPortRatio,n/=2;break;case"bottom":i.height+=t,i.width+=t*this.viewPortRatio,n=t*this.viewPortRatio,n/=-2;break;case"topleft":Math.abs(t)>Math.abs(e)?e=t*this.viewPortRatio:t=e/this.viewPortRatio,i.width-=e,i.height-=t,n=e,r=t;break;case"topright":Math.abs(t)>Math.abs(e)?e=-t*this.viewPortRatio:t=-e/this.viewPortRatio,r=t,i.width+=e,i.height-=t;break;case"bottomleft":Math.abs(t)>Math.abs(e)?e=-t*this.viewPortRatio:t=-e/this.viewPortRatio,n=e,i.width-=e,i.height+=t;break;case"bottomright":Math.abs(t)>Math.abs(e)?e=t*this.viewPortRatio:t=e/this.viewPortRatio,i.width+=e,i.height+=t}this.updateHelper(n,r,i,undefined,undefined)},t.prototype.updateHelper=function(e,t,i,n,r){var o,a,s,l=this.element.getElementsByTagName("svg")[2].getElementById("helper");if(i)o=(s=l.getBBox()).x+e,a=s.y+t,n=s.width+i.width,r=s.height+i.height;else{var c,d;c=this.currentPoint.x>this.startPoint.x?this.currentPoint.x-this.prevPoint.x:this.prevPoint.x-this.currentPoint.x,d=this.currentPoint.y>this.startPoint.y?this.currentPoint.y-this.prevPoint.y:this.prevPoint.y-this.currentPoint.y;Math.abs(d)>Math.abs(c)?(c=this.viewPortRatio*d,!0,!1):(d=c/this.viewPortRatio,!0,!1),s=l.getBBox(),o=this.startPoint.x>this.currentPoint.x?s.x-c:s.x,a=this.startPoint.y>this.currentPoint.y?s.y-d:s.y,n=s.width+c,r=s.height+d}ic(this.helper,{id:this.helper.id,x:o,y:a,width:Math.max(0,n),height:Math.max(0,r)})},t.prototype.updateOverviewrect=function(e,t,i,n){rc(document.getElementById(this.canvas.id+"overviewrect"),{x:e,y:t,width:Math.max(1,i),height:Math.max(1,n)}),this.updateOverviewCorner("top",e+8,t+1,Math.max(0,i-16),2),this.updateOverviewCorner("bottom",e+8,t+n+3,Math.max(0,i-16),2),this.updateOverviewCorner("left",e-2,t+11,2,Math.max(0,n-16)),this.updateOverviewCorner("right",e+i,t+11,2,Math.max(0,n-16)),this.updateOverviewCorner("topleft",e,t+3,5,5),this.updateOverviewCorner("topright",e+i,t+3,5,5),this.updateOverviewCorner("bottomleft",e,t+n+3,5,5),this.updateOverviewCorner("bottomright",e+i,t+n+3,5,5)},t.prototype.updateOverviewCorner=function(e,t,i,n,r){var o,a,s="visible"+e;"top"===e||"bottom"===e||"right"===e||"left"===e?(o={x:t,y:i,width:n,height:r,fill:"#ED1C24"},a={x:t-2,y:i-2,width:2===n?4:n,height:2===r?4:r}):(o={cx:t,cy:i,r:4,fill:"#ED1C24"},a={cx:t,cy:i,r:6,fill:"transparent"}),rc(document.getElementById(this.canvas.id+s),o),rc(document.getElementById(this.canvas.id+e),a)},t.prototype.translateOverviewRectangle=function(){var e=Number(this.model.width),t=Number(this.model.height),i=this.currentPoint.x-this.prevPoint.x,n=this.currentPoint.y-this.prevPoint.y,r=(Math.min(this.parent.scroller.viewPortWidth/e,this.parent.scroller.viewPortHeight/t),this.element.getElementsByClassName("overviewsvg")[0].getElementById(this.canvas.id+"overviewrect").getBBox()),o=r.x+i,a=r.y+n,s=r.width,l=r.height;this.updateOverviewrect(o,a,s,l),this.updateParentView(this.parent.scroller.currentZoom,o,a,s,l,null)},t.prototype.renderOverviewRect=function(e,t,i,n){var r=Number(this.model.width),o=Number(this.model.height),a=i/r*this.contentWidth,s=n/o*this.contentHeight,l=Math.max(this.parent.scroller.viewPortWidth/a,this.parent.scroller.viewPortHeight/s);if(l>=.25&&l<=30){this.updateParentView(l,e,t,i,n,{x:0,y:0});var c=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);if(this.helper){var d=this.element.getElementsByTagName("rect")[10].getBBox();c.x=d.x,c.y=d.y}this.updateOverviewrect(c.x,c.y,c.width,c.height)}},t.prototype.scrollOverviewRect=function(e,t,i,n){if(!this.actionName||n){var r=Number(this.model.width),o=Number(this.model.height),a=Math.min(this.contentWidth/r,this.contentHeight/o),s=new _,l=s.x=e/i/a,c=s.y=t/i/a,d=s.width=this.parent.scroller.viewPortWidth/i/a,h=s.height=this.parent.scroller.viewPortHeight/i/a;this.parent.scroller.viewPortWidth,this.parent.scroller.viewPortHeight;if(n){var p=new _;return p.x=l,p.y=c,p.width=d,p.height=h,p}this.updateOverviewrect(-l,-c,d,h)}return null},t.prototype.updateParentView=function(e,t,i,n,o,a){var s,l,c=Number(this.model.width),d=Number(this.model.height),h=t*(this.contentWidth/c)*e,p=i*(this.contentHeight/d)*e;this.parent.scroller.getPageBounds();1===e&&"pan"!==this.actionName||(s=-h-this.parent.scroller.horizontalOffset,l=-p-this.parent.scroller.verticalOffset),this.parent.setBlazorDiagramProps(!0),this.parent.realActions|=fe.OverViewAction,"scale"===this.actionName||"draw"===this.actionName?this.parent.scroller.zoom(e/this.parent.scroller.currentZoom,s,l,a):Object(r.I)()?this.parent.scroller.zoom(1,s,l,a):this.parent.pan(s,l,a)},t.prototype.updateHtmlLayer=function(e){var t=Gl(e.element.id),i=this.parent.scroller.getPageBounds(!0),n=i.width,r=i.height,o=Math.max(n,this.parent.scroller.viewPortWidth),a=Math.max(r,this.parent.scroller.viewPortHeight),s=Math.min(Number(this.model.width)/o,Number(this.model.height)/a);t.style.transform="scale("+s+") translate("+this.parent.scroller.transform.tx+"px,"+this.parent.scroller.transform.ty+"px)"},t.prototype.updateView=function(e){var t,i,n=this.parent.scroller.getPageBounds(),r=this.parent.scroller.viewPortWidth/this.parent.scroller.currentZoom,o=this.parent.scroller.viewPortHeight/this.parent.scroller.currentZoom,a=0,s=0;this.parent.scroller.currentZoom<1&&r>n.width&&o>n.height&&(a=(r-n.width)/2,s=(o-n.height)/2),t=n.width,i=n.height;var l,c=Number(this.model.width),d=Number(this.model.height),h=Math.max(t,this.parent.scroller.viewPortWidth),p=Math.max(i,this.parent.scroller.viewPortHeight);this.contentWidth=h=Math.max(h,c/d*p),this.contentHeight=p=Math.max(p,d/c*h),l=Math.min(c/h,d/p);var u=document.getElementById(this.element.id+"_htmlLayer");u.style.webkitTransform="scale("+l+") translate("+-n.x+"px,"+-n.y+"px)",u.style.transform="scale("+l+") translate("+(-n.x+a)+"px,"+(-n.y+s)+"px)",document.getElementById(this.element.id+"_overviewlayer").setAttribute("transform","translate("+-n.x*l+","+-n.y*l+")"),this.horizontalOffset=n.x*l,this.verticalOffset=n.y*l;var f=document.getElementById(this.element.id+"_diagramLayer"),g=Xl(this.element.id),m=f.getContext("2d"),v=Number(this.model.width)/this.contentWidth,y=Number(this.model.height)/this.contentHeight;v=Math.min(v,y),g.setAttribute("transform","translate(0,0),scale("+v+")"),m.setTransform(v,0,0,v,0,0),m.fillStyle="red",this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom)},t.prototype.scrolled=function(e){if(this.event){var t=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);this.updateOverviewrect(-t.x,-t.y,t.width,t.height)}},t.prototype.updateCursor=function(e){if($l(e.target,"overviewresizer"))switch(e.target.id){case this.canvas.id+"left":this.canvas.style.cursor="w-resize";break;case this.canvas.id+"right":this.canvas.style.cursor="e-resize";break;case this.canvas.id+"top":this.canvas.style.cursor="n-resize";break;case this.canvas.id+"bottom":this.canvas.style.cursor="s-resize";break;case this.canvas.id+"topleft":this.canvas.style.cursor="nw-resize";break;case this.canvas.id+"topright":this.canvas.style.cursor="ne-resize";break;case this.canvas.id+"bottomleft":this.canvas.style.cursor="sw-resize";break;case this.canvas.id+"bottomright":this.canvas.style.cursor="se-resize"}else this.canvas.style.cursor="default"},t.prototype.mouseMove=function(e){if(this.event=!1,this.updateCursor(e),this.currentPoint=this.mousePosition(e),this.actionName)switch(this.actionName){case"draw":this.inAction||this.startPoint.x===this.currentPoint.x&&this.startPoint.y===this.currentPoint.y||(this.initHelper(),this.inAction=!0),this.inAction&&this.updateHelper();break;case"scale":this.inAction||(this.initHelper(),this.inAction=!0),this.updateOverviewRectangle();break;case"pan":(this.startPoint.x!==this.currentPoint.x||this.startPoint.y===this.currentPoint.y||this.inAction)&&(this.inAction=!0,this.translateOverviewRectangle())}this.prevPoint=this.currentPoint},t.prototype.documentMouseUp=function(e){this.inAction=!1,this.actionName="",this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},t.prototype.windowResize=function(e){var t=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout((function(){var e=document.getElementById(t.element.id).getBoundingClientRect();t.model.width=e.width>0?e.width:t.model.width,t.model.height=e.height>0?e.height:t.model.height,t.renderCanvas(),t.setParent(t.sourceID)}),10),!1},t.prototype.mouseDown=function(e){if(e.target.id===this.canvas.id+"_overviewsvg"&&(this.actionName="draw"),e.target.id===this.canvas.id+"overviewrect"&&(this.actionName="pan"),$l(e.target,"overviewresizer"))switch(this.actionName="scale",e.target.id){case this.canvas.id+"left":this.resizeDirection="left";break;case this.canvas.id+"right":this.resizeDirection="right";break;case this.canvas.id+"top":this.resizeDirection="top";break;case this.canvas.id+"bottom":this.resizeDirection="bottom";break;case this.canvas.id+"topleft":this.resizeDirection="topleft";break;case this.canvas.id+"topright":this.resizeDirection="topright";break;case this.canvas.id+"bottomleft":this.resizeDirection="bottomleft";break;case this.canvas.id+"bottomright":this.resizeDirection="bottomright"}this.startPoint=this.prevPoint=this.mousePosition(e),this.viewPortRatio=this.parent.scroller.viewPortWidth/this.parent.scroller.viewPortHeight,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="none"},t.prototype.mouseUp=function(e){this.currentPoint=this.mousePosition(e);Number(this.model.width),Number(this.model.height);if(this.actionName)if(this.startPoint.x!==this.currentPoint.x||this.startPoint.y!==this.currentPoint.y){if("pan"===this.actionName);else if(this.helper){var t=this.element.getElementsByTagName("rect")[10].getBBox();this.resizeDirection=this.resizeDirection||"";var i=t.x,n=t.y,r=t.width,o=t.height;"topleft"===this.resizeDirection||"topright"===this.resizeDirection||"bottomleft"===this.resizeDirection||this.resizeDirection;this.renderOverviewRect(i,n,r,o)}}else if(e.target.id===this.canvas.id+"_overviewsvg"||"helper"===e.target.id){r=(t=this.element.getElementsByTagName("svg")[2].getElementById(this.canvas.id+"overviewrect").getBBox()).width,o=t.height;this.inAction=!0,this.actionName="pan",this.renderOverviewRect(this.currentPoint.x-r/2,this.currentPoint.y-o/2,r,o),this.inAction=!1}this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.actionName="",this.startPoint=null,this.currentPoint=null,this.prevPoint=null,this.helper=null,this.viewPortRatio=1,this.resizeDirection="",this.inAction=!1,this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},t.prototype.initHelper=function(){var e=this.element.getElementsByTagName("svg")[2],t=(this.parent.scroller.currentZoom,this.startPoint.x),i=this.startPoint.y,n=1,r=1;if("scale"===this.actionName){var o=e.getElementById(this.canvas.id+"overviewrect").getBBox();t=o.x,i=o.y,n=o.width,r=o.height}var a=Jl("rect",{id:"helper",x:t,y:i,width:n,height:r,fill:"transparent",stroke:"gray","stroke-dasharray":"2 2","shape-rendering":"crispEdges"});e.getElementById(this.element.id+"_overviewlayer").appendChild(a),this.helper=a},t.prototype.mousePosition=function(e){var t,i,n;if(-1!==e.type.indexOf("touch")){var r=(t=e).changedTouches[0].clientX,o=t.changedTouches[0].clientY;i=r-this.element.offsetLeft,n=o-this.element.offsetTop}else i=e.clientX,n=e.clientY;var a=this.element.getBoundingClientRect();return i-=a.left,n-=a.top,{x:i+this.horizontalOffset,y:n+this.verticalOffset}},t.prototype.destroy=function(){if(this.unWireEvents(),this.notify("destroy",{}),e.prototype.destroy.call(this),document.getElementById(this.element.id)){this.element.classList.remove("e-overview");var t=document.getElementById(this.element.id+"_canvas");t&&this.element.removeChild(t)}this.parent.views.splice(this.parent.views.indexOf(this.element.id),1),this.diagramLayerDiv=null,this.canvas=null,this.parent=null},t.prototype.getModuleName=function(){return"Overview"},Ou([Object(r.q)("100%")],t.prototype,"width",void 0),Ou([Object(r.q)("100%")],t.prototype,"height",void 0),Ou([Object(r.q)("")],t.prototype,"sourceID",void 0),Ou([Object(r.l)()],t.prototype,"created",void 0),t}(r.i),Cu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pu=function(e){function t(t){var i=e.call(this,t)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.directivekeys={layers:"layer",customCursors:"customCursor",connectors:{connector:{connectorFixedUserHandles:"connectorFixedUserHandle",connectorAnnotations:"connectorAnnotation"}},nodes:{node:{nodeFixedUserHandles:"nodeFixedUserHandle",nodeAnnotations:"nodeAnnotation",ports:"port"}}},i.immediateRender=!1,i.portals=[],i}return Cu(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));e.prototype.render.call(this),this.initRenderCalled=!0},t}(ih);c(Pu,[l,n.Component]);var ju=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Iu=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}ju(t,e),t.moduleName="palette"}(h),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}ju(t,e),t.propertyName="palettes",t.moduleName="palettes"}(h),function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}());c(function(e){function t(t){var i=e.call(this,t)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.directivekeys={palettes:"palette"},i.immediateRender=!0,i.portals=[],i}return Iu(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));e.prototype.render.call(this),this.initRenderCalled=!0},t}(wu),[l,n.Component]);var Eu=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();c(function(e){function t(t){var i=e.call(this,t)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.immediateRender=!0,i.portals=[],i}return Eu(t,e),t.prototype.render=function(){if(!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));e.prototype.render.call(this),this.initRenderCalled=!0},t}(Su),[l,n.Component])},function(e,t,i){e.exports=i(45)()},function(e,t,i){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(32)},function(e,t,i){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(15);function r(e,t){if(e){if("string"===typeof e)return Object(n.a)(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(n.a)(e,t):void 0}}},function(e,t,i){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";function n(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(t,"a",(function(){return n}))},,function(e,t,i){"use strict";var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(r){return!1}}()?Object.assign:function(e,t){for(var i,s,l=a(e),c=1;c<arguments.length;c++){for(var d in i=Object(arguments[c]))r.call(i,d)&&(l[d]=i[d]);if(n){s=n(i);for(var h=0;h<s.length;h++)o.call(i,s[h])&&(l[s[h]]=i[s[h]])}}return l}},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(7);function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){Object(n.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}},function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i(0),r=i(1),o=i(4),a=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s={GroupGuid:"{271bbba0-1ee7}"},l=function(){function e(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=e,this.dataSource=t,this.pvt={}}return e.prototype.processResponse=function(e,t,i,n){return e},e}(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.processQuery=function(e,t){for(var i,n,r,o=e.dataSource.json.slice(0),a=o.length,s=!0,l={},c=0,d=[],h=0;h<t.lazyLoad.length;h++)c++,l[t.lazyLoad[h].key]=t.lazyLoad[h].value;var p={};for(h=0;h<t.queries.length;h++)"onPage"!==(n=t.queries[h]).fn&&"onGroup"!==n.fn||!t.lazyLoad.length?(i=this[n.fn].call(this,o,n.e,t),"onAggregates"===n.fn?p[n.e.field+" - "+n.e.type]=i:o=void 0!==i?i:o,"onPage"!==n.fn&&"onSkip"!==n.fn&&"onTake"!==n.fn&&"onRange"!==n.fn||(s=!1),s&&(a=o.length)):("onGroup"===n.fn&&d.push(n.e),"onPage"===n.fn&&(r=n.e));if(c){var u={query:t,lazyLoad:l,result:o,group:d,page:r},f=this.lazyLoadGroup(u);o=f.result,a=f.count}return t.isCountRequired&&(o={result:o,count:a,aggregates:p}),o},t.prototype.lazyLoadGroup=function(e){var t=0,i=this.getAggregate(e.query),o=e.result;if(Object(n.J)(e.lazyLoad.onDemandGroupInfo)){l=e.group[0].fieldName;t=(o=r.a.group(o,l,i,null,null,e.group[0].comparer,!0)).length;c=o;o=this.onPage(o,e.page,e.query),this.formGroupResult(o,c)}else{for(var a=e.lazyLoad.onDemandGroupInfo,s=a.where.length-1;s>=0;s--)o=this.onWhere(o,a.where[s]);if(e.group.length!==a.level){var l=e.group[a.level].fieldName;o=r.a.group(o,l,i,null,null,e.group[0].comparer,!0)}t=o.length;var c=o;o=(o=o.slice(a.skip)).slice(0,a.take),e.group.length!==a.level&&this.formGroupResult(o,c)}return{result:o,count:t}},t.prototype.formGroupResult=function(e,t){if(e.length&&t.length){var i="GroupGuid";e[i]=t[i],e.childLevels=t.childLevels,e.level=t.level,e.records=t.records}return e},t.prototype.getAggregate=function(e){var t=o.b.filterQueries(e.queries,"onAggregates"),i=[];if(t.length)for(var n=void 0,a=0;a<t.length;a++)n=t[a].e,i.push({type:n.type,field:r.a.getValue(n.field,e)});return i},t.prototype.batchRequest=function(e,t,i){var n,r=t.deletedRecords.length;for(n=0;n<t.addedRecords.length;n++)this.insert(e,t.addedRecords[n]);for(n=0;n<t.changedRecords.length;n++)this.update(e,i.key,t.changedRecords[n]);for(n=0;n<r;n++)this.remove(e,i.key,t.deletedRecords[n]);return t},t.prototype.onWhere=function(e,t){return e&&e.length?e.filter((function(e){if(t)return t.validate(e)})):e},t.prototype.onAggregates=function(e,t){var i=r.a.aggregates[t.type];return e&&i&&0!==e.length?i(e,t.field):null},t.prototype.onSearch=function(e,t){return e&&e.length?(0===t.fieldNames.length&&r.a.getFieldList(e[0],t.fieldNames),e.filter((function(e){for(var i=0;i<t.fieldNames.length;i++)if(t.comparer.call(e,r.a.getObject(t.fieldNames[i],e),t.searchKey,t.ignoreCase,t.ignoreAccent))return!0;return!1}))):e},t.prototype.onSortBy=function(e,t,i){if(!e||!e.length)return e;var n,o=r.a.getValue(t.fieldName,i);if(!o)return e.sort(t.comparer);if(o instanceof Array){for(var a=(o=o.slice(0)).length-1;a>=0;a--)o[a]&&(n=t.comparer,r.a.endsWith(o[a]," desc")&&(n=r.a.fnSort("descending"),o[a]=o[a].replace(" desc","")),e=r.a.sort(e,o[a],n));return e}return r.a.sort(e,o,t.comparer)},t.prototype.onGroup=function(e,t,i){if(!e||!e.length)return e;var n=this.getAggregate(i);return r.a.group(e,r.a.getValue(t.fieldName,i),n,null,null,t.comparer)},t.prototype.onPage=function(e,t,i){var n=r.a.getValue(t.pageSize,i),o=(r.a.getValue(t.pageIndex,i)-1)*n,a=o+n;return e&&e.length?e.slice(o,a):e},t.prototype.onRange=function(e,t){return e&&e.length?e.slice(r.a.getValue(t.start),r.a.getValue(t.end)):e},t.prototype.onTake=function(e,t){return e&&e.length?e.slice(0,r.a.getValue(t.nos)):e},t.prototype.onSkip=function(e,t){return e&&e.length?e.slice(r.a.getValue(t.nos)):e},t.prototype.onSelect=function(e,t){return e&&e.length?r.a.select(e,r.a.getValue(t.fieldNames)):e},t.prototype.insert=function(e,t,i,r,o){return Object(n.J)(o)?e.dataSource.json.push(t):e.dataSource.json.splice(o,0,t)},t.prototype.remove=function(e,t,i,n){var o,a=e.dataSource.json;for("object"!==typeof i||i instanceof Date||(i=r.a.getObject(t,i)),o=0;o<a.length&&r.a.getObject(t,a[o])!==i;o++);return o!==a.length?a.splice(o,1):null},t.prototype.update=function(e,t,i,r){var o,a,s=e.dataSource.json;for(Object(n.J)(t)||(a=Object(n.H)(t,i)),o=0;o<s.length&&(Object(n.J)(t)||Object(n.H)(t,s[o])!==a);o++);return o<s.length?Object(n.N)(s[o],i):null},t}(l),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.processQuery=function(e,t,i){var n,a,s=this.getQueryRequest(t),l=o.b.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),c=t.params,d=e.dataSource.url,h=null,p=this.options,u={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in l?(n=l.onPage,a=((a=r.a.getValue(n.pageIndex,t))-1)*(h=r.a.getValue(n.pageSize,t))):"onRange"in l&&(a=(n=l.onRange).start,h=n.end-n.start);for(var f=0;f<s.sorts.length;f++)n=r.a.getValue(s.sorts[f].e.fieldName,t),u.sorts.push(r.a.callAdaptorFunction(this,"onEachSort",{name:n,direction:s.sorts[f].e.direction},t));i&&(n=this.getFiltersFrom(i,t))&&u.filters.push(r.a.callAdaptorFunction(this,"onEachWhere",n.toJson(),t));for(f=0;f<s.filters.length;f++){u.filters.push(r.a.callAdaptorFunction(this,"onEachWhere",s.filters[f].e.toJson(),t));for(var g=0,m="object"===typeof u.filters[f]?Object.keys(u.filters[f]):[];g<m.length;g++){var v=m[g];r.a.isNull(u[v])&&delete u[v]}}for(f=0;f<s.searches.length;f++)n=s.searches[f].e,u.searches.push(r.a.callAdaptorFunction(this,"onEachSearch",{fields:n.fieldNames,operator:n.operator,key:n.searchKey,ignoreCase:n.ignoreCase},t));for(f=0;f<s.groups.length;f++)u.groups.push(r.a.getValue(s.groups[f].e.fieldName,t));for(f=0;f<s.aggregates.length;f++)n=s.aggregates[f].e,u.aggregates.push({type:n.type,field:r.a.getValue(n.field,t)});var y={};if(this.getRequestQuery(p,t,l,u,y),r.a.callAdaptorFunction(this,"addParams",{dm:e,query:t,params:c,reqParams:y}),t.lazyLoad.length)for(f=0;f<t.lazyLoad.length;f++)y[t.lazyLoad[f].key]=t.lazyLoad[f].value;for(var b=0,w=Object.keys(y);b<w.length;b++){v=w[b];(r.a.isNull(y[v])||""===y[v]||0===y[v].length)&&delete y[v]}p.skip in y&&p.take in y||null===h||(y[p.skip]=r.a.callAdaptorFunction(this,"onSkip",a,t),y[p.take]=r.a.callAdaptorFunction(this,"onTake",h,t));var x=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(y,r.a.parse.jsonDateReplacer),url:d,pvtData:x,type:"POST",contentType:"application/json; charset=utf-8"}:(n=this.convertToQueryString(y,t,e),{type:"GET",url:(n=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+n).length?d.replace(/\/*$/,n):d,pvtData:x})},t.prototype.getRequestQuery=function(e,t,i,n,o){var a=o;a[e.from]=t.fromTable,e.apply&&t.distincts.length&&(a[e.apply]="onDistinct"in this?r.a.callAdaptorFunction(this,"onDistinct",t.distincts):""),!t.distincts.length&&e.expand&&(a[e.expand]="onExpand"in this&&"onSelect"in i?r.a.callAdaptorFunction(this,"onExpand",{selects:r.a.getValue(i.onSelect.fieldNames,t),expands:t.expands},t):t.expands),a[e.select]="onSelect"in i&&!t.distincts.length?r.a.callAdaptorFunction(this,"onSelect",r.a.getValue(i.onSelect.fieldNames,t),t):"",a[e.count]=t.isCountRequired?r.a.callAdaptorFunction(this,"onCount",t.isCountRequired,t):"",a[e.search]=n.searches.length?r.a.callAdaptorFunction(this,"onSearch",n.searches,t):"",a[e.skip]="onSkip"in i?r.a.callAdaptorFunction(this,"onSkip",r.a.getValue(i.onSkip.nos,t),t):"",a[e.take]="onTake"in i?r.a.callAdaptorFunction(this,"onTake",r.a.getValue(i.onTake.nos,t),t):"",a[e.where]=n.filters.length||n.searches.length?r.a.callAdaptorFunction(this,"onWhere",n.filters,t):"",a[e.sortBy]=n.sorts.length?r.a.callAdaptorFunction(this,"onSortBy",n.sorts,t):"",a[e.group]=n.groups.length?r.a.callAdaptorFunction(this,"onGroup",n.groups,t):"",a[e.aggregates]=n.aggregates.length?r.a.callAdaptorFunction(this,"onAggregates",n.aggregates,t):"",a.param=[]},t.prototype.convertToQueryString=function(e,t,i){return""},t.prototype.processResponse=function(e,t,i,o,a,s){if(o&&o.getResponseHeader("Content-Type")&&-1!==o.getResponseHeader("Content-Type").indexOf("application/json")){var l=r.a.timeZoneHandling;t&&!t.timeZoneHandling&&(r.a.timeZoneHandling=!1),e=r.a.parse.parseJson(e),r.a.timeZoneHandling=l}var c=a,d=c.pvtData||{},h=e?e.groupDs:[];if(o&&o.getResponseHeader("Content-Type")&&-1!==o.getResponseHeader("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];var p=JSON.parse(c.data);if(p&&"batch"===p.action&&e&&e.addedRecords)return s.addedRecords=e.addedRecords,s;e&&e.d&&(e=e.d);var u={};e&&"count"in e&&(u.count=e.count),u.result=e&&e.result?e.result:e;var f=!1;if(Array.isArray(e.result)&&e.result.length){if(Object(n.J)(e.result[0].key)||(u.result=this.formRemoteGroupedData(u.result,1,d.groups.length-1)),i&&i.lazyLoad.length&&d.groups.length)for(var g=0;g<i.lazyLoad.length;g++)if("onDemandGroupInfo"===i.lazyLoad[g].key){var m=i.lazyLoad[g].value.level;d.groups.length===m&&(f=!0)}}return f||this.getAggregateResult(d,e,u,h,i),r.a.isNull(u.count)?u.result:{result:u.result,count:u.count,aggregates:u.aggregates}},t.prototype.formRemoteGroupedData=function(e,t,i){for(var r=0;r<e.length;r++)e[r].items.length&&Object.keys(e[r].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(e[r].items,t+1,i-1);var o="GroupGuid";return e[o]=s[o],e.level=t,e.childLevels=i,e.records=e[0].items.length?this.getGroupedRecords(e,!Object(n.J)(e[0].items.records)):[],e},t.prototype.getGroupedRecords=function(e,t){for(var i=[],n=0;n<e.length;n++)if(t)i=i.concat(e[n].items.records);else for(var r=0;r<e[n].items.length;r++)i.push(e[n].items[r]);return i},t.prototype.onGroup=function(e){return this.pvt.groups=e,e},t.prototype.onAggregates=function(e){this.pvt.aggregates=e},t.prototype.batchRequest=function(e,t,i,o,a){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(Object(n.C)({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i[undefined],key:i[undefined]},r.a.getAddParams(this,e,o)))}},t.prototype.beforeSend=function(e,t){},t.prototype.insert=function(e,t,i,o){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(Object(n.C)({},{value:t,table:i,action:"insert"},r.a.getAddParams(this,e,o)))}},t.prototype.remove=function(e,t,i,o,a){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(Object(n.C)({},{key:i,keyColumn:t,table:o,action:"remove"},r.a.getAddParams(this,e,a)))}},t.prototype.update=function(e,t,i,o,a){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(Object(n.C)({},{value:i,action:"update",keyColumn:t,key:r.a.getObject(t,i),table:o},r.a.getAddParams(this,e,a)))}},t.prototype.getFiltersFrom=function(e,t){var i,n=t.fKey,a=n,s=t.key,l=[];"object"!==typeof e[0]&&(a=null);for(var c=0;c<e.length;c++)i="object"===typeof e[0]?r.a.getObject(s||a,e[c]):e[c],l.push(new o.a(n,"equal",i));return o.a.or(l)},t.prototype.getAggregateResult=function(e,t,i,a,s){var l=t;if(t&&t.result&&(l=t.result),e&&e.aggregates&&e.aggregates.length){var c=e.aggregates,d=void 0,h=l,p={};t.aggregate&&(h=t.aggregate);for(var u=0;u<c.length;u++)(d=r.a.aggregates[c[u].type])&&(p[c[u].field+" - "+c[u].type]=d(h,c[u].field));i.aggregates=p}var f=Array.isArray(t.result)&&t.result.length&&!Object(n.J)(t.result[0].key);if(e&&e.groups&&e.groups.length&&!f){var g=e.groups;for(u=0;u<g.length;u++){Object(n.J)(a)||(a=r.a.group(a,g[u]));var m=o.b.filterQueries(s.queries,"onGroup")[u].e;l=r.a.group(l,g[u],e.aggregates,null,a,m.comparer)}i.result=l}return i},t.prototype.getQueryRequest=function(e){var t={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return t.sorts=o.b.filterQueries(e.queries,"onSortBy"),t.groups=o.b.filterQueries(e.queries,"onGroup"),t.filters=o.b.filterQueries(e.queries,"onWhere"),t.searches=o.b.filterQueries(e.queries,"onSearch"),t.aggregates=o.b.filterQueries(e.queries,"onAggregates"),t},t.prototype.addParams=function(e){var t=e.reqParams;e.params.length&&(t.params={});for(var i=0,n=e.params;i<n.length;i++){var r=n[i];if(t[r.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");t[r.key]=r.value,r.fn&&(t[r.key]=r.fn.call(e.query,r.key,e.query,e.dm)),t.params[r.key]=t[r.key]}},t}(l),h=function(e){function t(t){var i=e.call(this)||this;return i.options=Object(n.C)({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),Object(n.C)(i.options,t||{}),i}return a(t,e),t.prototype.getModuleName=function(){return"ODataAdaptor"},t.prototype.onPredicate=function(e,i,o){var a,s,l="",c=e.value,d=typeof c,h=e.field?t.getField(e.field):null;if(c instanceof Date&&(c="datetime'"+r.a.parse.replacer(c)+"'"),"string"===d&&(c="'"+(c=encodeURIComponent(c))+"'",o&&(h="cast("+h+", 'Edm.String')"),r.a.parse.isGuid(c)&&(s="guid"),e.ignoreCase&&(s||(h="tolower("+h+")"),c=c.toLowerCase())),a=r.a.odBiOperator[e.operator])return l+=h,l+=a,s&&(l+=s),l+c;if("substringof"===(a=Object(n.J)(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?r.a.odUniOperator[e.operator]:r.a.odv4UniOperator[e.operator])){var p=c;c=h,h=p}return l+=a+"(",l+=h+",",s&&(l+=s),l+=c+")"},t.prototype.addParams=function(t){e.prototype.addParams.call(this,t),delete t.reqParams.params},t.prototype.onComplexPredicate=function(e,t,i){for(var n=[],r=0;r<e.predicates.length;r++)n.push("("+this.onEachWhere(e.predicates[r],t,i)+")");return n.join(" "+e.condition+" ")},t.prototype.onEachWhere=function(e,t,i){return e.isComplex?this.onComplexPredicate(e,t,i):this.onPredicate(e,t,i)},t.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},t.prototype.onEachSearch=function(e){e.fields&&0===e.fields.length&&r.a.throwError("Query() - Search : oData search requires list of field names to search");for(var t=this.pvt.search||[],i=0;i<e.fields.length;i++)t.push(new o.a(e.fields[i],e.operator,e.key,e.ignoreCase));this.pvt.search=t},t.prototype.onSearch=function(e){return this.pvt.search=o.a.or(this.pvt.search),""},t.prototype.onEachSort=function(e){var i=[];if(e.name instanceof Array)for(var n=0;n<e.name.length;n++)i.push(t.getField(e.name[n])+("descending"===e.direction?" desc":""));else i.push(t.getField(e.name)+("descending"===e.direction?" desc":""));return i.join(",")},t.prototype.onSortBy=function(e){return e.reverse().join(",")},t.prototype.onGroup=function(e){return this.pvt.groups=e,[]},t.prototype.onSelect=function(e){for(var i=0;i<e.length;i++)e[i]=t.getField(e[i]);return e.join(",")},t.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},t.prototype.onCount=function(e){return!0===e?"allpages":""},t.prototype.beforeSend=function(e,t,i){r.a.endsWith(i.url,this.options.batch)&&"post"===i.type.toLowerCase()?(t.setRequestHeader("Accept",this.options.multipartAccept),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")):t.setRequestHeader("Accept",this.options.accept),t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(e,t,i,o,a,s){var l="odata.metadata";if(a&&"GET"===a.type&&!this.rootUrl&&e[l]){var c=e[l].split("/$metadata#");this.rootUrl=c[0],this.resourceTableName=c[1]}if(!Object(n.J)(e.d)){var d=i&&i.isCountRequired?e.d.results:e.d,h="__metadata";if(!Object(n.J)(d))for(var p=0;p<d.length;p++)Object(n.J)(d[p][h])||delete d[p][h]}var u=a&&a.pvtData,f=this.processBatchResponse(e,i,o,a,s);if(f)return f;var g=o&&a.getResponseHeader("DataServiceVersion"),m=null,v=g&&parseInt(g,10)||2;if(i&&i.isCountRequired){(e.__count||e["odata.count"])&&(m=e.__count||e["odata.count"]),e.d&&(e=e.d),(e.__count||e["odata.count"])&&(m=e.__count||e["odata.count"])}3===v&&e.value&&(e=e.value),e.d&&(e=e.d),v<3&&e.results&&(e=e.results);var y={};return y.count=m,y.result=e,this.getAggregateResult(u,e,y,null,i),r.a.isNull(m)?y.result:{result:y.result,count:y.count,aggregates:y.aggregates}},t.prototype.convertToQueryString=function(e,t,i){var n=[],r=e.table||"";delete e.table,i.dataSource.requiresFormat&&(e.$format="json");for(var o=0,a=Object.keys(e);o<a.length;o++){var s=a[o];n.push(s+"="+e[s])}return n=n.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!r?n:n.length?r+"?"+n:r||""},t.prototype.localTimeReplacer=function(e,t){for(var i=0,o=Object(n.J)(t)?[]:Object.keys(t);i<o.length;i++){var a=o[i];t[a]instanceof Date&&(t[a]=r.a.dateParse.toLocalTime(t[a]))}return t},t.prototype.insert=function(e,t,i){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t,this.options.localTime?this.localTimeReplacer:null)}},t.prototype.remove=function(e,t,i,n){var o;return o="string"!==typeof i||r.a.parse.isGuid(i)?"("+i+")":"('"+i+"')",{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:"")+o}},t.prototype.update=function(e,t,i,o,a,s){var l;return"PATCH"!==this.options.updateType||Object(n.J)(s)||(i=this.compareAndRemove(i,s,t)),l="string"!==typeof i[t]||r.a.parse.isGuid(i[t])?"("+i[t]+")":"('"+i[t]+"')",{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,o?"/"+o:"")+l,data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},t.prototype.batchRequest=function(e,t,i,n,o){var a=i.guid=r.a.getGuid(this.options.batchPre),s=this.rootUrl?this.rootUrl+"/"+this.options.batch:e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;var l={url:i.url,key:i.key,cid:1,cSet:r.a.getGuid(this.options.changeSet)},c="--"+a+"\n";return c+="Content-Type: multipart/mixed; boundary="+l.cSet.replace("--","")+"\n",this.pvt.changeSet=0,c+=this.generateInsertRequest(t.addedRecords,l,e),c+=this.generateUpdateRequest(t.changedRecords,l,e,o?o.changedRecords:[]),c+=this.generateDeleteRequest(t.deletedRecords,l,e),c+=l.cSet+"--\n",{type:"POST",url:s,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+a,data:c+="--"+a+"--"}},t.prototype.generateDeleteRequest=function(e,t,i){if(!e)return"";var n={method:"DELETE ",url:function(e,t,i){var n=r.a.getObject(i,e[t]);return"number"===typeof n||r.a.parse.isGuid(n)?"("+n+")":n instanceof Date?"("+e[t][i].toJSON()+")":"('"+n+"')"},data:function(e,t){return""}};return this.generateBodyContent(e,t,n,i)+"\n"},t.prototype.generateInsertRequest=function(e,t,i){if(!e)return"";var n={method:"POST ",url:function(e,t,i){return""},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}};return this.generateBodyContent(e,t,n,i)},t.prototype.generateUpdateRequest=function(e,t,i,n){var o=this;if(!e)return"";e.forEach((function(e){return e=o.compareAndRemove(e,n.filter((function(i){return r.a.getObject(t.key,i)===r.a.getObject(t.key,e)}))[0],t.key)}));var a={method:this.options.updateType+" ",url:function(e,t,i){return"number"===typeof e[t][i]||r.a.parse.isGuid(e[t][i])?"("+e[t][i]+")":e[t][i]instanceof Date?"("+e[t][i].toJSON()+")":"('"+e[t][i]+"')"},data:function(e,t){return JSON.stringify(e[t])+"\n\n"}};return this.generateBodyContent(e,t,a,i)},t.getField=function(e){return e.replace(/\./g,"/")},t.prototype.generateBodyContent=function(e,t,i,r){for(var o="",a=0;a<e.length;a++)o+="\n"+t.cSet+"\n",o+=this.options.changeSetContent+"\n\n",o+=i.method,"POST "===i.method?o+=(r.dataSource.insertUrl||r.dataSource.crudUrl||t.url)+i.url(e,a,t.key)+" HTTP/1.1\n":"PUT "===i.method||"PATCH "===i.method?o+=(r.dataSource.updateUrl||r.dataSource.crudUrl||t.url)+i.url(e,a,t.key)+" HTTP/1.1\n":"DELETE "===i.method&&(o+=(r.dataSource.removeUrl||r.dataSource.crudUrl||t.url)+i.url(e,a,t.key)+" HTTP/1.1\n"),o+="Accept: "+this.options.accept+"\n",o+="Content-Id: "+this.pvt.changeSet+++"\n",o+=this.options.batchChangeSetContentType+"\n",Object(n.J)(e[a]["@odata.etag"])?o+="\n":(o+="If-Match: "+e[a]["@odata.etag"]+"\n\n",delete e[a]["@odata.etag"]),o+=i.data(e,a);return o},t.prototype.processBatchResponse=function(e,t,i,o,a){if(i&&i.getResponseHeader("Content-Type")&&-1!==i.getResponseHeader("Content-Type").indexOf("xml"))return t.isCountRequired?{result:[],count:0}:[];if(o&&this.options.batch&&r.a.endsWith(o.url,this.options.batch)&&"post"===o.type.toLowerCase()){var s=i.getResponseHeader("Content-Type"),l=void 0,c=void 0,d=e+"";if(s=s.substring(s.indexOf("=batchresponse")+1),(d=d.split(s)).length<2)return{};d=d[1];var h=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(d);h&&d.replace(h[0],"");for(var p=h?h[1]:"",u=(d=d.split(p)).length;u>-1;u--)/\bContent-ID:/i.test(d[u])&&/\bHTTP.+201/.test(d[u])&&(l=parseInt(/\bContent-ID: (\d+)/i.exec(d[u])[1],10),a.addedRecords[l]&&(c=r.a.parse.parseJson(/^\{.+\}/m.exec(d[u])[0]),Object(n.C)({},a.addedRecords[l],this.processResponse(c))));return a}return null},t.prototype.compareAndRemove=function(e,t,i){var o=this;return Object(n.J)(t)||Object.keys(e).forEach((function(n){n!==i&&"@odata.etag"!==n&&(r.a.isPlainObject(e[n])?(o.compareAndRemove(e[n],t[n]),0===Object.keys(e[n]).filter((function(e){return"@odata.etag"!==e})).length&&delete e[n]):(e[n]===t[n]||e[n]&&t[n]&&e[n].valueOf()===t[n].valueOf())&&delete e[n])})),e},t}(d),p=(function(e){function t(t){var i=e.call(this,t)||this;return i.options=Object(n.C)({},i.options,{requestType:"get",accept:"application/json, text/javascript, */*; q=0.01",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PATCH",localTime:!1,apply:"$apply"}),Object(n.C)(i.options,t||{}),i}a(t,e),t.prototype.getModuleName=function(){return"ODataV4Adaptor"},t.prototype.onCount=function(e){return!0===e?"true":""},t.prototype.onPredicate=function(t,i,n){var a="",s=t.value,l=s instanceof Date;if(i instanceof o.b)for(var c=this.getQueryRequest(i),d=0;d<c.filters.length;d++)c.filters[d].e.key===t.value&&(n=!0);return a=e.prototype.onPredicate.call(this,t,i,n),l&&(a=a.replace(/datetime'(.*)'$/,"$1")),r.a.parse.isGuid(s)&&(a=a.replace("guid","").replace(/'/g,"")),a},t.prototype.onEachSearch=function(e){var t=this.pvt.searches||[];t.push(e.key),this.pvt.searches=t},t.prototype.onSearch=function(e){return this.pvt.searches.join(" OR ")},t.prototype.onExpand=function(e){var t=this,i={},n={},r=e.expands.slice(),o=[];return e.selects.filter((function(e){return e.indexOf(".")>-1})).forEach((function(e){var t=e.split(".");t[0]in i||(i[t[0]]=[]),i[t[0]].push(t[1])})),Object.keys(i).forEach((function(e){-1===r.indexOf(e)&&r.push(e)})),r.forEach((function(e){n[e]=e in i?e+"("+t.options.select+"="+i[e].join(",")+")":e})),Object.keys(n).forEach((function(e){return o.push(n[e])})),o.join(",")},t.prototype.onDistinct=function(e){return"groupby(("+e.map((function(e){return h.getField(e)})).join(",")+"))"},t.prototype.onSelect=function(t){return e.prototype.onSelect.call(this,t.filter((function(e){return-1===e.indexOf(".")})))},t.prototype.beforeSend=function(e,t,i){"POST"!==i.type&&"PUT"!==i.type&&"PATCH"!==i.type||t.setRequestHeader("Prefer","return=representation"),t.setRequestHeader("Accept",this.options.accept)},t.prototype.processResponse=function(t,i,o,a,s,l){var c="@odata.context";if(s&&"GET"===s.type&&!this.rootUrl&&t[c]){var d=t[c].split("/$metadata#");this.rootUrl=d[0],this.resourceTableName=d[1]}var h=s&&s.pvtData,p=e.prototype.processBatchResponse.call(this,t,o,a,s,l);if(p)return p;var u=null,f="@odata.count";o&&o.isCountRequired&&f in t&&(u=t[f]),t=Object(n.J)(t.value)?t:t.value;var g={};return g.count=u,g.result=t,this.getAggregateResult(h,t,g,null,o),r.a.isNull(u)?g.result:{result:g.result,count:u,aggregates:g.aggregates}}}(h),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}a(t,e),t.prototype.getModuleName=function(){return"WebApiAdaptor"},t.prototype.insert=function(e,t,i){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},t.prototype.remove=function(e,t,i,n){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},t.prototype.update=function(e,t,i,n){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},t.prototype.batchRequest=function(e,t,i){var n=this,o=i.guid=r.a.getGuid(this.options.batchPre),a=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;for(var s=[],l=function(n,r){t.addedRecords.forEach((function(r,a){var l=function(e,t,i){return""};s.push("--"+o),s.push("Content-Type: application/http; msgtype=request",""),s.push("POST /api/"+(e.dataSource.insertUrl||e.dataSource.crudUrl||i.url)+l(t.addedRecords,n,i.key)+" HTTP/1.1"),s.push("Content-Type: application/json; charset=utf-8"),s.push("Host: "+location.host),s.push("",r?JSON.stringify(r):"")}))},c=0,d=t.addedRecords.length;c<d;c++)l(c);var h=function(r,a){t.changedRecords.forEach((function(a,l){n.options.updateType;var c=function(e,t,i){return""};s.push("--"+o),s.push("Content-Type: application/http; msgtype=request",""),s.push("PUT /api/"+(e.dataSource.updateUrl||e.dataSource.crudUrl||i.url)+c(t.changedRecords,r,i.key)+" HTTP/1.1"),s.push("Content-Type: application/json; charset=utf-8"),s.push("Host: "+location.host),s.push("",a?JSON.stringify(a):"")}))};for(c=0,d=t.changedRecords.length;c<d;c++)h(c);var p=function(n,a){t.deletedRecords.forEach((function(a,l){var c=function(e,t,i){var n=r.a.getObject(i,e[t]);return"number"===typeof n||r.a.parse.isGuid(n)?"/"+n:n instanceof Date?"/"+e[t][i].toJSON():"/'"+n+"'"};s.push("--"+o),s.push("Content-Type: application/http; msgtype=request",""),s.push("DELETE /api/"+(e.dataSource.removeUrl||e.dataSource.crudUrl||i.url)+c(t.deletedRecords,n,i.key)+" HTTP/1.1"),s.push("Content-Type: application/json; charset=utf-8"),s.push("Host: "+location.host),s.push("",a?JSON.stringify(a):"")}))};for(c=0,d=t.deletedRecords.length;c<d;c++)p(c);return s.push("--"+o+"--",""),{type:"POST",url:a,contentType:"multipart/mixed; boundary="+o,data:s.join("\r\n")}},t.prototype.beforeSend=function(e,t,i){t.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01")},t.prototype.processResponse=function(e,t,i,n,o,a){var s=o&&o.pvtData,l=null,c={};if(o&&"post"!==o.type.toLowerCase()){var d=n&&o.getResponseHeader("DataServiceVersion"),h=d&&parseInt(d,10)||2;i&&i.isCountRequired&&(r.a.isNull(e.Count)||(l=e.Count)),h<3&&e.Items&&(e=e.Items),c.count=l,c.result=e,this.getAggregateResult(s,e,c,null,i)}return c.result=c.result||e,r.a.isNull(l)?c.result:{result:c.result,count:c.count,aggregates:c.aggregates}}}(h),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}a(t,e),t.prototype.processQuery=function(e,t,i){var n=(new d).processQuery(e,t,i),o=r.a.parse.parseJson(n.data),a={};if(o.param)for(var s=0;s<o.param.length;s++){var l=o.param[s],c=Object.keys(l)[0];a[c]=l[c]}a.value=o;return{data:JSON.stringify(a),url:n.url,pvtData:n.pvtData,type:"POST",contentType:"application/json; charset=utf-8"}}}(d),function(e){function t(){var t=e.call(this)||this;return Object(n.X)("beforeSend",d.prototype.beforeSend,t),t}return a(t,e),t.prototype.insert=function(e,t,i,o,a){return this.pvt.position=a,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(Object(n.C)({},{value:t,table:i,action:"insert"},r.a.getAddParams(this,e,o)))}},t.prototype.remove=function(t,i,o,a,s){return e.prototype.remove.call(this,t,i,o),{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(Object(n.C)({},{key:o,keyColumn:i,table:a,action:"remove"},r.a.getAddParams(this,t,s)))}},t.prototype.update=function(e,t,i,o,a){return this.updateType="update",this.updateKey=t,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(Object(n.C)({},{value:i,action:"update",keyColumn:t,key:i[t],table:o},r.a.getAddParams(this,e,a)))}},t.prototype.processResponse=function(t,i,n,r,o,a,s){var l;if("add"===this.updateType&&e.prototype.insert.call(this,i,t,null,null,this.pvt.position),"update"===this.updateType&&e.prototype.update.call(this,i,this.updateKey,t),this.updateType=void 0,t.added)for(l=0;l<t.added.length;l++)e.prototype.insert.call(this,i,t.added[l]);if(t.changed)for(l=0;l<t.changed.length;l++)e.prototype.update.call(this,i,s.key,t.changed[l]);if(t.deleted)for(l=0;l<t.deleted.length;l++)e.prototype.remove.call(this,i,s.key,t.deleted[l]);return t},t.prototype.batchRequest=function(e,t,i,o,a){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(Object(n.C)({},{changed:t.changedRecords,added:t.addedRecords,deleted:t.deletedRecords,action:"batch",table:i.url,key:i.key},r.a.getAddParams(this,e,o)))}},t.prototype.addParams=function(e){(new d).addParams(e)},t}(c)),u=function(e){function t(t,i,o){var a=e.call(this)||this;a.isCrudAction=!1,a.isInsertAction=!1,Object(n.J)(t)||(a.cacheAdaptor=t),a.pageSize=o,a.guidId=r.a.getGuid("cacheAdaptor");window.localStorage.setItem(a.guidId,JSON.stringify({keys:[],results:[]}));var s=a.guidId;return Object(n.J)(i)||setInterval((function(){var e;e=r.a.parse.parseJson(window.localStorage.getItem(s));for(var t=[],n=0;n<e.results.length;n++){var o=+new Date,a=+new Date(e.results[n].timeStamp);e.results[n].timeStamp=o-a,o-a>i&&t.push(n)}for(n=0;n<t.length;n++)e.results.splice(t[n],1),e.keys.splice(t[n],1);window.localStorage.removeItem(s),window.localStorage.setItem(s,JSON.stringify(e))}),i),a}return a(t,e),t.prototype.generateKey=function(e,t){var i=this.getQueryRequest(t),n=o.b.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),r=e,a="onPage";a in n&&(r+=n[a].pageIndex),i.sorts.forEach((function(e){r+=e.e.direction+e.e.fieldName})),i.groups.forEach((function(e){r+=e.e.fieldName})),i.searches.forEach((function(e){r+=e.e.searchKey}));for(var s=0;s<i.filters.length;s++){var l=i.filters[s];if(l.e.isComplex){var c=t.clone();c.queries=[];for(var d=0;d<l.e.predicates.length;d++)c.queries.push({fn:"onWhere",e:l.e.predicates[d],filter:t.queries.filter});r+=l.e.condition+this.generateKey(e,c)}else r+=l.e.field+l.e.operator+l.e.value}return r},t.prototype.processQuery=function(e,t,i){var n,o=this.generateKey(e.dataSource.url,t),a=(n=r.a.parse.parseJson(window.localStorage.getItem(this.guidId)))?n.results[n.keys.indexOf(o)]:null;return null==a||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):a},t.prototype.processResponse=function(e,t,i,n,o,a){if(this.isInsertAction||o&&this.cacheAdaptor.options.batch&&r.a.endsWith(o.url,this.cacheAdaptor.options.batch)&&"post"===o.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,i,n,o,a);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var s=i?this.generateKey(t.dataSource.url,i):t.dataSource.url,l={},c=(l=r.a.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(s);for(-1!==c&&(l.results.splice(c,1),l.keys.splice(c,1)),l.results[l.keys.push(s)-1]={keys:s,result:e.result,timeStamp:new Date,count:e.count};l.results.length>this.pageSize;)l.results.splice(0,1),l.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(l)),e},t.prototype.beforeSend=function(e,t,i){!Object(n.J)(this.cacheAdaptor.options.batch)&&r.a.endsWith(i.url,this.cacheAdaptor.options.batch)&&"post"===i.type.toLowerCase()&&t.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||t.setRequestHeader("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(e,t,i,n){return this.isCrudAction=!0,this.cacheAdaptor.update(e,t,i,n)},t.prototype.insert=function(e,t,i){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,t,i)},t.prototype.remove=function(e,t,i,n){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,t,i,n)},t.prototype.batchRequest=function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)},t}(d),f=function(){function e(e,t,i){var a,s=this;return this.dateParse=!0,this.timeZoneHandling=!0,this.requests=[],e||this.dataSource||(e=[]),i=i||e.adaptor,e&&!1===e.timeZoneHandling&&(this.timeZoneHandling=e.timeZoneHandling),e instanceof Array?a={json:e,offline:!0}:"object"===typeof e?(e.json||(e.json=[]),a={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,jsonp:e.jsonp,dataType:e.dataType,offline:void 0!==e.offline?e.offline:!(e.adaptor instanceof p)&&!e.url,requiresFormat:e.requiresFormat}):r.a.throwError("DataManager: Invalid arguments"),void 0!==a.requiresFormat||r.a.isCors()||(a.requiresFormat=!!Object(n.J)(a.crossDomain)||a.crossDomain),void 0===a.dataType&&(a.dataType="json"),this.dataSource=a,this.defaultQuery=t,a.url&&a.offline&&!a.json.length?(this.isDataAvailable=!1,this.adaptor=i||new h,this.dataSource.offline=!1,this.ready=this.executeQuery(t||new o.b),this.ready.then((function(e){s.dataSource.offline=!0,s.isDataAvailable=!0,a.json=e.result,s.adaptor=new c}))):this.adaptor=a.offline?new c:new h,!a.jsonp&&this.adaptor instanceof h&&(a.jsonp="callback"),this.adaptor=i||this.adaptor,a.enableCaching&&(this.adaptor=new u(this.adaptor,a.timeTillExpiration,a.cachingPageSize)),this}return e.prototype.setDefaultQuery=function(e){return this.defaultQuery=e,this},e.prototype.executeLocal=function(t){this.defaultQuery||t instanceof o.b||r.a.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||r.a.throwError("DataManager - executeLocal() : Json data is required to execute"),t=t||this.defaultQuery;var i=this.adaptor.processQuery(this,t);if(t.subQuery){var a=t.subQuery.fromTable,s=t.subQuery.lookups,l=t.isCountRequired?i.result:i;s&&s instanceof Array&&r.a.buildHierarchy(t.subQuery.fKey,a,l,s,t.subQuery.key);for(var c=0;c<l.length;c++)l[c][a]instanceof Array&&(l[c]=Object(n.C)({},{},l[c]),l[c][a]=this.adaptor.processResponse(t.subQuery.using(new e(l[c][a].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(i,this,t)},e.prototype.executeQuery=function(t,i,a,s){var l=this;"function"===typeof t&&(s=a,a=i,i=t,t=null),t||(t=this.defaultQuery),t instanceof o.b||r.a.throwError("DataManager - executeQuery() : A query is required to execute");var c=new g,d={query:t};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!Object(n.J)(this.adaptor.makeRequest)){var h=this.adaptor.processQuery(this,t);Object(n.J)(this.adaptor.makeRequest)?Object(n.J)(h.url)?(d=e.getDeferedArgs(t,h,d),c.resolve(d)):this.makeRequest(h,c,d,t):this.adaptor.makeRequest(h,c,d,t)}else e.nextTick((function(){var i=l.executeLocal(t);d=e.getDeferedArgs(t,i,d),c.resolve(d)}));return(i||a)&&c.promise.then(i,a),s&&c.promise.then(s,s),c.promise},e.getDeferedArgs=function(e,t,i){return e.isCountRequired?(i.result=t.result,i.count=t.count,i.aggregates=t.aggregates):i.result=t,i},e.nextTick=function(e){(window.setImmediate||window.setTimeout)(e,0)},e.prototype.extendRequest=function(e,t,i){return Object(n.C)({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:t,onFailure:i},e)},e.prototype.makeRequest=function(e,t,i,o){var a=this,s=!!o.subQuerySelector,l=function(e){i.error=e,t.reject(i)},c=function(e,n,r,o,a,s,l){i.xhr=r,i.count=n?parseInt(n.toString(),10):0,i.result=e,i.request=o,i.aggregates=s,i.actual=a,i.virtualSelectRecords=l,t.resolve(i)},d=function(e,t){var n=new g,d={parent:i};o.subQuery.isChild=!0;var h=a.adaptor.processQuery(a,o.subQuery,e?a.adaptor.processResponse(e):t),p=a.makeRequest(h,n,d,o.subQuery);return s||n.then((function(t){e&&(r.a.buildHierarchy(o.subQuery.fKey,o.subQuery.fromTable,e,t,o.subQuery.key),c(e,t.count,t.xhr))}),l),p},h=this.extendRequest(e,(function(e,t){-1===t.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&a.dateParse&&(e=r.a.parse.parseJson(e));var i=a.adaptor.processResponse(e,a,o,t.httpRequest,t),n=0,l=null,h=e.virtualSelectRecords;o.isCountRequired&&(n=i.count,l=i.aggregates,i=i.result),o.subQuery?s||d(i,t):c(i,n,t.httpRequest,t.type,e,l,h)}),l),p=new n.a(h);if(p.beforeSend=function(){a.beforeSend(p.httpRequest,p)},(h=p.send()).catch((function(e){return!0})),this.requests.push(p),s){var u=o.subQuerySelector.call(this,{query:o.subQuery,parent:o});u&&u.length?Promise.all([h,d(null,u)]).then((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],n=a.adaptor.processResponse(i[0],a,o,a.requests[0].httpRequest,a.requests[0]),l=0;o.isCountRequired&&(l=n.count,n=n.result);var d=a.adaptor.processResponse(i[1],a,o.subQuery,a.requests[1].httpRequest,a.requests[1]);l=0,o.subQuery.isCountRequired&&(l=d.count,d=d.result),r.a.buildHierarchy(o.subQuery.fKey,o.subQuery.fromTable,n,d,o.subQuery.key),s=!1,c(n,l,a.requests[0].httpRequest)})):s=!1}return h},e.prototype.beforeSend=function(e,t){this.adaptor.beforeSend(this,e,t);for(var i,n=this.dataSource.headers,r=0;n&&r<n.length;r++){i=[];for(var o=0,a=Object.keys(n[r]);o<a.length;o++){var s=a[o];i.push(s),e.setRequestHeader(s,n[r][s])}}},e.prototype.saveChanges=function(e,t,i,r,a){var s=this;i instanceof o.b&&(r=i,i=null);var l={url:i,key:t||this.dataSource.key},c=this.adaptor.batchRequest(this,e,l,r||new o.b,a);if(this.dataSource.offline)return c;if(Object(n.J)(this.adaptor.doAjaxRequest)){var d=new g,h=new n.a(c);return h.beforeSend=function(){s.beforeSend(h.httpRequest,h)},h.onSuccess=function(t,i){d.resolve(s.adaptor.processResponse(t,s,null,i.httpRequest,i,e,l))},h.onFailure=function(e){d.reject([{error:e}])},h.send().catch((function(e){return!0})),d.promise}return this.adaptor.doAjaxRequest(c)},e.prototype.insert=function(e,t,i,r){t instanceof o.b&&(i=t,t=null);var a=this.adaptor.insert(this,e,t,i,r);return this.dataSource.offline?a:Object(n.J)(this.adaptor.doAjaxRequest)?this.doAjaxRequest(a):this.adaptor.doAjaxRequest(a)},e.prototype.remove=function(e,t,i,a){"object"===typeof t&&(t=r.a.getObject(e,t)),i instanceof o.b&&(a=i,i=null);var s=this.adaptor.remove(this,e,t,i,a);return this.dataSource.offline?s:Object(n.J)(this.adaptor.doAjaxRequest)?this.doAjaxRequest(s):this.adaptor.doAjaxRequest(s)},e.prototype.update=function(e,t,i,r,a){i instanceof o.b&&(r=i,i=null);var s=this.adaptor.update(this,e,t,i,r,a);return this.dataSource.offline?s:Object(n.J)(this.adaptor.doAjaxRequest)?this.doAjaxRequest(s):this.adaptor.doAjaxRequest(s)},e.prototype.doAjaxRequest=function(e){var t=this,i=new g;e=Object(n.C)({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},e);var o=new n.a(e);return o.beforeSend=function(){t.beforeSend(o.httpRequest,o)},o.onSuccess=function(e,n){try{r.a.parse.parseJson(e)}catch(o){e=[]}e=t.adaptor.processResponse(r.a.parse.parseJson(e),t,null,n.httpRequest,n),i.resolve(e)},o.onFailure=function(e){i.reject([{error:e}])},o.send().catch((function(e){return!0})),i.promise},e}(),g=function(){var e=this;this.promise=new Promise((function(t,i){e.resolve=t,e.reject=i})),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,i=null;return function(){for(var n=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];clearTimeout(i),i=setTimeout((function(){e.apply(n,o)}),t)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SensorTabIndex=t.SensorClassName=t.SensorStyle=t.SizeSensorId=void 0;t.SizeSensorId="size-sensor-id";t.SensorStyle="display:block;position:absolute;top:0;left:0;height:100%;width:auto;overflow:hidden;pointer-events:none;z-index:-1;opacity:0";t.SensorClassName="size-sensor-object";t.SensorTabIndex="-1"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(3),o=c(r),a=c(i(53)),s=i(38),l=i(44);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var p=function(e){function t(){var e,i,n;d(this,t);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return i=n=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.ganttRef=void 0,h(n,i)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){this.renderFrappeGanttDOM()}},{key:"componentDidUpdate",value:function(e,t){this.ganttInst&&(this.ganttInst.refresh(this.props.tasks),this.props.viewMode!==e.viewMode&&this.ganttInst.change_view_mode(this.props.viewMode))}},{key:"componentWillUnmount",value:function(){(0,s.clear)(this.ganttRef)}},{key:"renderFrappeGanttDOM",value:function(){var e=this;if(this.ganttInst)return this.ganttInst;var t=this.props,i=t.onClick,n=t.onDateChange,r=t.onProgressChange,o=t.onViewChange,c=t.customPopupHtml,d=t.tasks,h=t.viewMode;return(0,s.bind)(this.ganttRef,(function(){e.ganttInst&&e.ganttInst.refresh(e.props.tasks)})),this.ganttInst=new a.default(this.ganttRef,d,{on_click:i||l.noop,on_date_change:n||l.noop,on_progress_change:r||l.noop,on_view_change:o||l.noop,custom_popup_html:c||null}),this.ganttInst.change_view_mode(h),this.ganttInst}},{key:"render",value:function(){var e=this;return o.default.createElement("svg",{ref:function(t){e.ganttRef=t}})}}]),t}(r.Component);t.default=p,e.exports=t.default},function(e,t,i){var n,r,o,a=i(48);window,e.exports=(n=i(3),r=i(14),o=i(50),function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=12)}([function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t,i){"use strict";var n=i(2),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return n.isMemo(e)?a:s[e.$$typeof]||r}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=a;var c=Object.defineProperty,d=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,i,n){if("string"!=typeof i){if(f){var r=u(i);r&&r!==f&&e(t,r,n)}var a=d(i);h&&(a=a.concat(h(i)));for(var s=l(t),g=l(i),m=0;m<a.length;++m){var v=a[m];if(!(o[v]||n&&n[v]||g&&g[v]||s&&s[v])){var y=p(i,v);try{c(t,v,y)}catch(e){}}}}return t}},function(e,t,i){"use strict";(function(e,n){var r,o=i(5);r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:n;var a=Object(o.a)(r);t.a=a}).call(this,i(9),i(10)(e))},function(e,t,i){"use strict";function n(e){var t,i=e.Symbol;return"function"==typeof i?i.observable?t=i.observable:(t=i("observable"),i.observable=t):t="@@observable",t}i.d(t,"a",(function(){return n}))},function(e,t,i){e.exports=i(7)()},function(e,t,i){"use strict";var n=i(8);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,i,r,o,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var i={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return i.PropTypes=i,i}},function(e,t,i){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},,function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return Sa})),i.d(t,"moveColumn",(function(){return ra})),i.d(t,"moveCard",(function(){return oa})),i.d(t,"addColumn",(function(){return aa})),i.d(t,"removeColumn",(function(){return sa})),i.d(t,"changeColumn",(function(){return la})),i.d(t,"addCard",(function(){return ca})),i.d(t,"removeCard",(function(){return da}));var n=i(0),r=i.n(n);function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var l=i(4),c=function(){return Math.random().toString(36).substring(7).split("").join(".")},d={INIT:"@@redux/INIT"+c(),REPLACE:"@@redux/REPLACE"+c(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+c()}};function h(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function p(e,t,i){var n;if("function"==typeof t&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===i&&(i=t,t=void 0),void 0!==i){if("function"!=typeof i)throw new Error("Expected the enhancer to be a function.");return i(p)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var r=e,o=t,a=[],s=a,c=!1;function u(){s===a&&(s=a.slice())}function f(){if(c)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function g(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(c)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return u(),s.push(e),function(){if(t){if(c)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,u();var i=s.indexOf(e);s.splice(i,1),a=null}}}function m(e){if(!h(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw new Error("Reducers may not dispatch actions.");try{c=!0,o=r(o,e)}finally{c=!1}for(var t=a=s,i=0;i<t.length;i++)(0,t[i])();return e}function v(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");r=e,m({type:d.REPLACE})}function y(){var e,t=g;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function i(){e.next&&e.next(f())}return i(),{unsubscribe:t(i)}}})[l.a]=function(){return this},e}return m({type:d.INIT}),(n={dispatch:m,subscribe:g,getState:f,replaceReducer:v})[l.a]=y,n}function u(e,t){return function(){return t(e.apply(this,arguments))}}function f(e,t){if("function"==typeof e)return u(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var i={};for(var n in e){var r=e[n];"function"==typeof r&&(i[n]=u(r,t))}return i}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function m(e,t){var i=Object.keys(e);return Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(e)),t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(i,!0).forEach((function(t){g(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(i).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function y(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}i(6);var b=r.a.createContext(null),w=function(e){e()},x={notify:function(){}};function O(){var e=w,t=null,i=null;return{clear:function(){t=null,i=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],i=t;i;)e.push(i),i=i.next;return e},subscribe:function(e){var n=!0,r=i={callback:e,next:null,prev:i};return r.prev?r.prev.next=r:t=r,function(){n&&null!==t&&(n=!1,r.next?r.next.prev=r.prev:i=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}var S=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=x,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=O())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=x)},e}(),C=function(e){var t=e.store,i=e.context,o=e.children,a=Object(n.useMemo)((function(){var e=new S(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),s=Object(n.useMemo)((function(){return t.getState()}),[t]);Object(n.useEffect)((function(){var e=a.subscription;return e.trySubscribe(),s!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,s]);var l=i||b;return r.a.createElement(l.Provider,{value:a},o)};function P(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}var j=i(3),I=i.n(j),E=i(2),T="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?n.useLayoutEffect:n.useEffect,A=[],D=[null,null];function k(e,t){var i=e[1];return[t.payload,i+1]}function M(e,t,i){T((function(){return e.apply(void 0,t)}),i)}function L(e,t,i,n,r,o,a){e.current=n,t.current=r,i.current=!1,o.current&&(o.current=null,a())}function R(e,t,i,n,r,o,a,s,l,c){if(e){var d=!1,h=null,p=function(){if(!d){var e,i,p=t.getState();try{e=n(p,r.current)}catch(e){i=e,h=e}i||(h=null),e===o.current?a.current||l():(o.current=e,s.current=e,a.current=!0,c({type:"STORE_UPDATED",payload:{error:i}}))}};return i.onStateChange=p,i.trySubscribe(),p(),function(){if(d=!0,i.tryUnsubscribe(),i.onStateChange=null,h)throw h}}}var z=function(){return[null,0]};function N(e,t){void 0===t&&(t={});var i=t,o=i.getDisplayName,a=void 0===o?function(e){return"ConnectAdvanced("+e+")"}:o,l=i.methodName,c=void 0===l?"connectAdvanced":l,d=i.renderCountProp,h=void 0===d?void 0:d,p=i.shouldHandleStateChanges,u=void 0===p||p,f=i.storeKey,g=void 0===f?"store":f,m=(i.withRef,i.forwardRef),v=void 0!==m&&m,y=i.context,w=void 0===y?b:y,x=P(i,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),O=w;return function(t){var i=t.displayName||t.name||"Component",o=a(i),l=s({},x,{getDisplayName:a,methodName:c,renderCountProp:h,shouldHandleStateChanges:u,storeKey:g,displayName:o,wrappedComponentName:i,WrappedComponent:t}),d=x.pure,p=d?n.useMemo:function(e){return e()};function f(i){var o=Object(n.useMemo)((function(){var e=i.reactReduxForwardedRef,t=P(i,["reactReduxForwardedRef"]);return[i.context,e,t]}),[i]),a=o[0],c=o[1],d=o[2],h=Object(n.useMemo)((function(){return a&&a.Consumer&&Object(E.isContextConsumer)(r.a.createElement(a.Consumer,null))?a:O}),[a,O]),f=Object(n.useContext)(h),g=Boolean(i.store)&&Boolean(i.store.getState)&&Boolean(i.store.dispatch);Boolean(f)&&Boolean(f.store);var m=g?i.store:f.store,v=Object(n.useMemo)((function(){return function(t){return e(t.dispatch,l)}(m)}),[m]),y=Object(n.useMemo)((function(){if(!u)return D;var e=new S(m,g?null:f.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[m,g,f]),b=y[0],w=y[1],x=Object(n.useMemo)((function(){return g?f:s({},f,{subscription:b})}),[g,f,b]),C=Object(n.useReducer)(k,A,z),j=C[0][0],I=C[1];if(j&&j.error)throw j.error;var T=Object(n.useRef)(),N=Object(n.useRef)(d),B=Object(n.useRef)(),_=Object(n.useRef)(!1),H=p((function(){return B.current&&d===N.current?B.current:v(m.getState(),d)}),[m,j,d]);M(L,[N,T,_,d,H,B,w]),M(R,[u,m,b,v,N,T,_,B,w,I],[m,b,v]);var W=Object(n.useMemo)((function(){return r.a.createElement(t,s({},H,{ref:c}))}),[c,t,H]);return Object(n.useMemo)((function(){return u?r.a.createElement(h.Provider,{value:x},W):W}),[h,W,x])}var m=d?r.a.memo(f):f;if(m.WrappedComponent=t,m.displayName=o,v){var y=r.a.forwardRef((function(e,t){return r.a.createElement(m,s({},e,{reactReduxForwardedRef:t}))}));return y.displayName=o,y.WrappedComponent=t,I()(y,t)}return I()(m,t)}}function B(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function _(e,t){if(B(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(var r=0;r<i.length;r++)if(!Object.prototype.hasOwnProperty.call(t,i[r])||!B(e[i[r]],t[i[r]]))return!1;return!0}function H(e){return function(t,i){var n=e(t,i);function r(){return n}return r.dependsOnOwnProps=!1,r}}function W(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function F(e,t){return function(t,i){i.displayName;var n=function e(t,i){return e.dependsOnOwnProps?e.mapToProps(t,i):e.mapToProps(t)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,i){n.mapToProps=e,n.dependsOnOwnProps=W(e);var r=n(t,i);return"function"==typeof r&&(n.mapToProps=r,n.dependsOnOwnProps=W(r),r=n(t,i)),r},n}}var q=[function(e){return"function"==typeof e?F(e):void 0},function(e){return e?void 0:H((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?H((function(t){return f(e,t)})):void 0}],U=[function(e){return"function"==typeof e?F(e):void 0},function(e){return e?void 0:H((function(){return{}}))}];function V(e,t,i){return s({},i,{},e,{},t)}var Y=[function(e){return"function"==typeof e?function(e){return function(t,i){i.displayName;var n,r=i.pure,o=i.areMergedPropsEqual,a=!1;return function(t,i,s){var l=e(t,i,s);return a?r&&o(l,n)||(n=l):(a=!0,n=l),n}}}(e):void 0},function(e){return e?void 0:function(){return V}}];function X(e,t,i,n){return function(r,o){return i(e(r,o),t(n,o),o)}}function G(e,t,i,n,r){var o,a,s,l,c,d=r.areStatesEqual,h=r.areOwnPropsEqual,p=r.areStatePropsEqual,u=!1;function f(r,u){var f,g,m=!h(u,a),v=!d(r,o);return o=r,a=u,m&&v?(s=e(o,a),t.dependsOnOwnProps&&(l=t(n,a)),c=i(s,l,a)):m?(e.dependsOnOwnProps&&(s=e(o,a)),t.dependsOnOwnProps&&(l=t(n,a)),c=i(s,l,a)):v?(f=e(o,a),g=!p(f,s),s=f,g&&(c=i(s,l,a)),c):c}return function(r,d){return u?f(r,d):(s=e(o=r,a=d),l=t(n,a),c=i(s,l,a),u=!0,c)}}function Z(e,t){var i=t.initMapStateToProps,n=t.initMapDispatchToProps,r=t.initMergeProps,o=P(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=i(e,o),s=n(e,o),l=r(e,o);return(o.pure?G:X)(a,s,l,e,o)}function J(e,t,i){for(var n=t.length-1;n>=0;n--){var r=t[n](e);if(r)return r}return function(t,n){throw new Error("Invalid value of type "+typeof e+" for "+i+" argument when connecting component "+n.wrappedComponentName+".")}}function Q(e,t){return e===t}function $(e){var t=void 0===e?{}:e,i=t.connectHOC,n=void 0===i?N:i,r=t.mapStateToPropsFactories,o=void 0===r?U:r,a=t.mapDispatchToPropsFactories,l=void 0===a?q:a,c=t.mergePropsFactories,d=void 0===c?Y:c,h=t.selectorFactory,p=void 0===h?Z:h;return function(e,t,i,r){void 0===r&&(r={});var a=r,c=a.pure,h=void 0===c||c,u=a.areStatesEqual,f=void 0===u?Q:u,g=a.areOwnPropsEqual,m=void 0===g?_:g,v=a.areStatePropsEqual,y=void 0===v?_:v,b=a.areMergedPropsEqual,w=void 0===b?_:b,x=P(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),O=J(e,o,"mapStateToProps"),S=J(t,l,"mapDispatchToProps"),C=J(i,d,"mergeProps");return n(p,s({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:O,initMapDispatchToProps:S,initMergeProps:C,pure:h,areStatesEqual:f,areOwnPropsEqual:m,areStatePropsEqual:y,areMergedPropsEqual:w},x))}}var K,ee=$(),te=i(1),ie=i.n(te);function ne(e,t){var i=Object(n.useState)((function(){return{inputs:t,result:e()}}))[0],r=Object(n.useRef)(i),o=Boolean(t&&r.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}(t,r.current.inputs))?r.current:{inputs:t,result:e()};return Object(n.useEffect)((function(){r.current=o}),[o]),o.result}K=te.unstable_batchedUpdates,w=K;var re=ne,oe=function(e,t){return ne((function(){return e}),t)},ae=function(e,t){if(!e)throw new Error("Invariant failed")},se=function(e){var t=e.top,i=e.right,n=e.bottom,r=e.left;return{top:t,right:i,bottom:n,left:r,width:i-r,height:n-t,x:r,y:t,center:{x:(i+r)/2,y:(n+t)/2}}},le=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},ce=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},de={top:0,right:0,bottom:0,left:0},he=function(e){var t=e.borderBox,i=e.margin,n=void 0===i?de:i,r=e.border,o=void 0===r?de:r,a=e.padding,s=void 0===a?de:a,l=se(le(t,n)),c=se(ce(t,o)),d=se(ce(c,s));return{marginBox:l,borderBox:se(t),paddingBox:c,contentBox:d,margin:n,border:o,padding:s}},pe=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var i=Number(t);return isNaN(i)&&ae(!1),i},ue=function(e,t){var i,n,r=e.borderBox,o=e.border,a=e.margin,s=e.padding,l=(n=t,{top:(i=r).top+n.y,left:i.left+n.x,bottom:i.bottom+n.y,right:i.right+n.x});return he({borderBox:l,border:o,margin:a,padding:s})},fe=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),ue(e,t)},ge=function(e,t){var i={top:pe(t.marginTop),right:pe(t.marginRight),bottom:pe(t.marginBottom),left:pe(t.marginLeft)},n={top:pe(t.paddingTop),right:pe(t.paddingRight),bottom:pe(t.paddingBottom),left:pe(t.paddingLeft)},r={top:pe(t.borderTopWidth),right:pe(t.borderRightWidth),bottom:pe(t.borderBottomWidth),left:pe(t.borderLeftWidth)};return he({borderBox:e,margin:i,padding:n,border:r})},me=function(e){var t=e.getBoundingClientRect(),i=window.getComputedStyle(e);return ge(t,i)};function ve(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var ye=function(e,t){var i;void 0===t&&(t=ve);var n,r=[],o=!1;return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o&&i===this&&t(a,r)||(n=e.apply(this,a),o=!0,i=this,r=a),n}},be=function(e){var t=[],i=null,n=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];t=r,i||(i=requestAnimationFrame((function(){i=null,e.apply(void 0,t)})))};return n.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},n};function we(e,t){}function xe(){}function Oe(e,t,i){var n=t.map((function(t){var n=s({},i,{},t.options);return e.addEventListener(t.eventName,t.fn,n),function(){e.removeEventListener(t.eventName,t.fn,n)}}));return function(){n.forEach((function(e){e()}))}}function Se(e){this.message=e}function Ce(e,t){if(!e)throw new Se("Invariant failed")}we.bind(null,"warn"),we.bind(null,"error"),Se.prototype.toString=function(){return this.message};var Pe=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).callbacks=null,t.unbind=xe,t.onWindowError=function(e){var i=t.getCallbacks();i.isDragging()&&i.tryAbort(),e.error instanceof Se&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}o(t,e);var i=t.prototype;return i.componentDidMount=function(){this.unbind=Oe(window,[{eventName:"error",fn:this.onWindowError}])},i.componentWillUnmount=function(){this.unbind()},i.componentDidCatch=function(e){if(!(e instanceof Se))throw e;this.setState({})},i.render=function(){return this.props.children(this.setCallbacks)},t}(r.a.Component),je=function(e){return e+1},Ie=function(e,t){var i=e.droppableId===t.droppableId,n=je(e.index),r=je(t.index);return i?"\n      You have moved the item from position "+n+"\n      to position "+r+"\n    ":"\n    You have moved the item from position "+n+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+r+"\n  "},Ee=function(e,t,i){return t.droppableId===i.droppableId?"\n      The item "+e+"\n      has been combined with "+i.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+i.draggableId+"\n      in list "+i.droppableId+"\n    "},Te=function(e){return"\n  The item has returned to its starting position\n  of "+je(e.index)+"\n"},Ae="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",De=function(e){return"\n  You have lifted an item in position "+je(e.source.index)+"\n"},ke=function(e){var t=e.destination;if(t)return Ie(e.source,t);var i=e.combine;return i?Ee(e.draggableId,e.source,i):"You are over an area that cannot be dropped on"},Me=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+Te(e.source)+"\n    ";var t=e.destination,i=e.combine;return t?"\n      You have dropped the item.\n      "+Ie(e.source,t)+"\n    ":i?"\n      You have dropped the item.\n      "+Ee(e.draggableId,e.source,i)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+Te(e.source)+"\n  "},Le={x:0,y:0},Re=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},ze=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},Ne=function(e,t){return e.x===t.x&&e.y===t.y},Be=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},_e=function(e,t,i){var n;return void 0===i&&(i=0),(n={})[e]=t,n["x"===e?"y":"x"]=i,n},He=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},We=function(e,t){return Math.min.apply(Math,t.map((function(t){return He(e,t)})))},Fe=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},qe=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},Ue=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},Ve=function(e,t){return t&&t.shouldClipSubject?function(e,t){var i=se({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return i.width<=0||i.height<=0?null:i}(t.pageMarginBox,e):se(e)},Ye=function(e){var t=e.page,i=e.withPlaceholder,n=e.axis,r=e.frame,o=function(e,t,i){var n;return i&&i.increasedBy?s({},e,((n={})[t.end]=e[t.end]+i.increasedBy[t.line],n)):e}(function(e,t){return t?qe(e,t.scroll.diff.displacement):e}(t.marginBox,r),n,i);return{page:t,withPlaceholder:i,active:Ve(o,r)}},Xe=function(e,t){e.frame||Ce(!1);var i=e.frame,n=ze(t,i.scroll.initial),r=Be(n),o=s({},i,{scroll:{initial:i.scroll.initial,current:t,diff:{value:n,displacement:r},max:i.scroll.max}});return s({},e,{frame:o,subject:Ye({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:o})})};function Ge(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))}function Ze(e,t){if(e.findIndex)return e.findIndex(t);for(var i=0;i<e.length;i++)if(t(e[i]))return i;return-1}function Je(e,t){if(e.find)return e.find(t);var i=Ze(e,t);return-1!==i?e[i]:void 0}function Qe(e){return Array.prototype.slice.call(e)}var $e=ye((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),Ke=ye((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),et=ye((function(e){return Ge(e)})),tt=ye((function(e){return Ge(e)})),it=ye((function(e,t){return tt(t).filter((function(t){return e===t.descriptor.droppableId})).sort((function(e,t){return e.descriptor.index-t.descriptor.index}))}));function nt(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function rt(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var ot=ye((function(e,t){return t.filter((function(t){return t.descriptor.id!==e.descriptor.id}))})),at=function(e,t){return e.descriptor.droppableId===t.descriptor.id},st={point:Le,value:0},lt={invisible:{},visible:{},all:[]},ct={displaced:lt,displacedBy:st,at:null},dt=function(e,t){return function(i){return e<=i&&i<=t}},ht=function(e){var t=dt(e.top,e.bottom),i=dt(e.left,e.right);return function(n){if(t(n.top)&&t(n.bottom)&&i(n.left)&&i(n.right))return!0;var r=t(n.top)||t(n.bottom),o=i(n.left)||i(n.right);if(r&&o)return!0;var a=n.top<e.top&&n.bottom>e.bottom,s=n.left<e.left&&n.right>e.right;return!(!a||!s)||a&&o||s&&r}},pt=function(e){var t=dt(e.top,e.bottom),i=dt(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&i(e.left)&&i(e.right)}},ut={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},ft={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},gt=function(e){var t=e.target,i=e.destination,n=e.viewport,r=e.withDroppableDisplacement,o=e.isVisibleThroughFrameFn,a=r?function(e,t){var i=t.frame?t.frame.scroll.diff.displacement:Le;return qe(e,i)}(t,i):t;return function(e,t,i){return!!t.subject.active&&i(t.subject.active)(e)}(a,i,o)&&function(e,t,i){return i(t)(e)}(a,n,o)},mt=function(e){return gt(s({},e,{isVisibleThroughFrameFn:ht}))},vt=function(e){return gt(s({},e,{isVisibleThroughFrameFn:pt}))};function yt(e){var t=e.afterDragging,i=e.destination,n=e.displacedBy,r=e.viewport,o=e.forceShouldAnimate,a=e.last;return t.reduce((function(e,t){var s=function(e,t){var i=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return se(le(i,n))}(t,n),l=t.descriptor.id;if(e.all.push(l),!mt({target:s,destination:i,viewport:r,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var c={draggableId:l,shouldAnimate:function(e,t,i){if("boolean"==typeof i)return i;if(!t)return!0;var n=t.invisible,r=t.visible;if(n[e])return!1;var o=r[e];return!o||o.shouldAnimate}(l,a,o)};return e.visible[l]=c,e}),{all:[],visible:{},invisible:{}})}function bt(e){var t=e.insideDestination,i=e.inHomeList,n=e.displacedBy,r=e.destination,o=function(e,t){if(!e.length)return 0;var i=e[e.length-1].descriptor.index;return t.inHomeList?i:i+1}(t,{inHomeList:i});return{displaced:lt,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:o}}}}function wt(e){var t=e.draggable,i=e.insideDestination,n=e.destination,r=e.viewport,o=e.displacedBy,a=e.last,s=e.index,l=e.forceShouldAnimate,c=at(t,n);if(null==s)return bt({insideDestination:i,inHomeList:c,displacedBy:o,destination:n});var d=Je(i,(function(e){return e.descriptor.index===s}));if(!d)return bt({insideDestination:i,inHomeList:c,displacedBy:o,destination:n});var h=ot(t,i),p=i.indexOf(d);return{displaced:yt({afterDragging:h.slice(p),destination:n,displacedBy:o,last:a,viewport:r.frame,forceShouldAnimate:l}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function xt(e,t){return Boolean(t.effected[e])}var Ot=function(e){var t=e.isMovingForward,i=e.isInHomeList,n=e.draggable,r=e.draggables,o=e.destination,a=e.insideDestination,s=e.previousImpact,l=e.viewport,c=e.afterCritical,d=s.at;if(d||Ce(!1),"REORDER"===d.type){var h=function(e){var t=e.isMovingForward,i=e.isInHomeList,n=e.insideDestination,r=e.location;if(!n.length)return null;var o=r.index,a=t?o+1:o-1,s=n[0].descriptor.index,l=n[n.length-1].descriptor.index;return a<s||a>(i?l:l+1)?null:a}({isMovingForward:t,isInHomeList:i,location:d.destination,insideDestination:a});return null==h?null:wt({draggable:n,insideDestination:a,destination:o,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:h})}var p=function(e){var t=e.isMovingForward,i=e.destination,n=e.draggables,r=e.combine,o=e.afterCritical;if(!i.isCombineEnabled)return null;var a=r.draggableId,s=n[a].descriptor.index;return xt(a,o)?t?s:s-1:t?s+1:s}({isMovingForward:t,destination:o,displaced:s.displaced,draggables:r,combine:d.combine,afterCritical:c});return null==p?null:wt({draggable:n,insideDestination:a,destination:o,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:p})},St=function(e){var t=e.afterCritical,i=e.impact,n=e.draggables,r=rt(i);r||Ce(!1);var o=r.draggableId,a=n[o].page.borderBox.center,s=function(e){var t=e.displaced,i=e.afterCritical,n=e.combineWith,r=e.displacedBy,o=Boolean(t.visible[n]||t.invisible[n]);return xt(n,i)?o?Le:Be(r.point):o?r.point:Le}({displaced:i.displaced,afterCritical:t,combineWith:o,displacedBy:i.displacedBy});return Re(a,s)},Ct=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},Pt=function(e,t,i){return t[e.crossAxisStart]+i.margin[e.crossAxisStart]+i.borderBox[e.crossAxisSize]/2},jt=function(e){var t=e.axis,i=e.moveRelativeTo,n=e.isMoving;return _e(t.line,i.marginBox[t.end]+Ct(t,n),Pt(t,i.marginBox,n))},It=function(e){var t=e.axis,i=e.moveRelativeTo,n=e.isMoving;return _e(t.line,i.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,n),Pt(t,i.marginBox,n))},Et=function(e){var t=e.impact,i=e.draggable,n=e.draggables,r=e.droppable,o=e.afterCritical,a=it(r.descriptor.id,n),s=i.page,l=r.axis;if(!a.length)return function(e){var t=e.axis,i=e.moveInto,n=e.isMoving;return _e(t.line,i.contentBox[t.start]+Ct(t,n),Pt(t,i.contentBox,n))}({axis:l,moveInto:r.page,isMoving:s});var c=t.displaced,d=t.displacedBy,h=c.all[0];if(h){var p=n[h];if(xt(h,o))return It({axis:l,moveRelativeTo:p.page,isMoving:s});var u=ue(p.page,d.point);return It({axis:l,moveRelativeTo:u,isMoving:s})}var f=a[a.length-1];if(f.descriptor.id===i.descriptor.id)return s.borderBox.center;if(xt(f.descriptor.id,o)){var g=ue(f.page,Be(o.displacedBy.point));return jt({axis:l,moveRelativeTo:g,isMoving:s})}return jt({axis:l,moveRelativeTo:f.page,isMoving:s})},Tt=function(e,t){var i=e.frame;return i?Re(t,i.scroll.diff.displacement):t},At=function(e){var t=function(e){var t=e.impact,i=e.draggable,n=e.droppable,r=e.draggables,o=e.afterCritical,a=i.page.borderBox.center,s=t.at;return n&&s?"REORDER"===s.type?Et({impact:t,draggable:i,draggables:r,droppable:n,afterCritical:o}):St({impact:t,draggables:r,afterCritical:o}):a}(e),i=e.droppable;return i?Tt(i,t):t},Dt=function(e,t){var i=ze(t,e.scroll.initial),n=Be(i);return{frame:se({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:i,displacement:n}}}};function kt(e,t){return e.map((function(e){return t[e]}))}var Mt=function(e){var t=e.pageBorderBoxCenter,i=e.draggable,n=function(e,t){return Re(e.scroll.diff.displacement,t)}(e.viewport,t),r=ze(n,i.page.borderBox.center);return Re(i.client.borderBox.center,r)},Lt=function(e){var t=e.draggable,i=e.destination,n=e.newPageBorderBoxCenter,r=e.viewport,o=e.withDroppableDisplacement,a=e.onlyOnMainAxis,l=void 0!==a&&a,c=ze(n,t.page.borderBox.center),d={target:qe(t.page.borderBox,c),destination:i,withDroppableDisplacement:o,viewport:r};return l?function(e){return gt(s({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var i=dt(e.top,e.bottom),n=dt(e.left,e.right);return function(e){return t===ut?i(e.top)&&i(e.bottom):n(e.left)&&n(e.right)}})}));var t}(d):vt(d)},Rt=function(e){var t=e.isMovingForward,i=e.draggable,n=e.destination,r=e.draggables,o=e.previousImpact,a=e.viewport,l=e.previousPageBorderBoxCenter,c=e.previousClientSelection,d=e.afterCritical;if(!n.isEnabled)return null;var h=it(n.descriptor.id,r),p=at(i,n),u=function(e){var t=e.isMovingForward,i=e.draggable,n=e.destination,r=e.insideDestination,o=e.previousImpact;if(!n.isCombineEnabled)return null;if(!nt(o))return null;function a(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:n.descriptor.id}};return s({},o,{at:t})}var l=o.displaced.all,c=l.length?l[0]:null;if(t)return c?a(c):null;var d=ot(i,r);if(!c)return d.length?a(d[d.length-1].descriptor.id):null;var h=Ze(d,(function(e){return e.descriptor.id===c}));-1===h&&Ce(!1);var p=h-1;return p<0?null:a(d[p].descriptor.id)}({isMovingForward:t,draggable:i,destination:n,insideDestination:h,previousImpact:o})||Ot({isMovingForward:t,isInHomeList:p,draggable:i,draggables:r,destination:n,insideDestination:h,previousImpact:o,viewport:a,afterCritical:d});if(!u)return null;var f=At({impact:u,draggable:i,droppable:n,draggables:r,afterCritical:d});if(Lt({draggable:i,destination:n,newPageBorderBoxCenter:f,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Mt({pageBorderBoxCenter:f,draggable:i,viewport:a}),impact:u,scrollJumpRequest:null};var g=ze(f,l);return{clientSelection:c,impact:function(e){var t=e.impact,i=e.viewport,n=e.destination,r=e.draggables,o=e.maxScrollChange,a=Dt(i,Re(i.scroll.current,o)),l=n.frame?Xe(n,Re(n.frame.scroll.current,o)):n,c=t.displaced,d=yt({afterDragging:kt(c.all,r),destination:n,displacedBy:t.displacedBy,viewport:a.frame,last:c,forceShouldAnimate:!1}),h=yt({afterDragging:kt(c.all,r),destination:l,displacedBy:t.displacedBy,viewport:i.frame,last:c,forceShouldAnimate:!1}),p={},u={},f=[c,d,h];return c.all.forEach((function(e){var t=function(e,t){for(var i=0;i<t.length;i++){var n=t[i].visible[e];if(n)return n}return null}(e,f);t?u[e]=t:p[e]=!0})),s({},t,{displaced:{all:c.all,invisible:p,visible:u}})}({impact:u,viewport:a,destination:n,draggables:r,maxScrollChange:g}),scrollJumpRequest:g}},zt=function(e){var t=e.subject.active;return t||Ce(!1),t},Nt=function(e,t){var i=e.page.borderBox.center;return xt(e.descriptor.id,t)?ze(i,t.displacedBy.point):i},Bt=function(e,t){var i=e.page.borderBox;return xt(e.descriptor.id,t)?qe(i,Be(t.displacedBy.point)):i},_t=ye((function(e,t){var i=t[e.line];return{value:i,point:_e(e.line,i)}})),Ht=function(e,t){return s({},e,{scroll:s({},e.scroll,{max:t})})},Wt=function(e,t,i){var n=e.frame;at(t,e)&&Ce(!1),e.subject.withPlaceholder&&Ce(!1);var r=_t(e.axis,t.displaceBy).point,o=function(e,t,i){var n=e.axis;if("virtual"===e.descriptor.mode)return _e(n.line,t[n.line]);var r=e.subject.page.contentBox[n.size],o=it(e.descriptor.id,i).reduce((function(e,t){return e+t.client.marginBox[n.size]}),0)+t[n.line]-r;return o<=0?null:_e(n.line,o)}(e,r,i),a={placeholderSize:r,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n)return s({},e,{subject:Ye({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame})});var l=o?Re(n.scroll.max,o):n.scroll.max,c=Ht(n,l);return s({},e,{subject:Ye({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:c}),frame:c})},Ft=function(e){var t=e.isMovingForward,i=e.previousPageBorderBoxCenter,n=e.draggable,r=e.isOver,o=e.draggables,a=e.droppables,s=e.viewport,l=e.afterCritical,c=function(e){var t=e.isMovingForward,i=e.pageBorderBoxCenter,n=e.source,r=e.droppables,o=e.viewport,a=n.subject.active;if(!a)return null;var s=n.axis,l=dt(a[s.start],a[s.end]),c=et(r).filter((function(e){return e!==n})).filter((function(e){return e.isEnabled})).filter((function(e){return Boolean(e.subject.active)})).filter((function(e){return ht(o.frame)(zt(e))})).filter((function(e){var i=zt(e);return t?a[s.crossAxisEnd]<i[s.crossAxisEnd]:i[s.crossAxisStart]<a[s.crossAxisStart]})).filter((function(e){var t=zt(e),i=dt(t[s.start],t[s.end]);return l(t[s.start])||l(t[s.end])||i(a[s.start])||i(a[s.end])})).sort((function(e,i){var n=zt(e)[s.crossAxisStart],r=zt(i)[s.crossAxisStart];return t?n-r:r-n})).filter((function(e,t,i){return zt(e)[s.crossAxisStart]===zt(i[0])[s.crossAxisStart]}));if(!c.length)return null;if(1===c.length)return c[0];var d=c.filter((function(e){return dt(zt(e)[s.start],zt(e)[s.end])(i[s.line])}));return 1===d.length?d[0]:d.length>1?d.sort((function(e,t){return zt(e)[s.start]-zt(t)[s.start]}))[0]:c.sort((function(e,t){var n=We(i,Ue(zt(e))),r=We(i,Ue(zt(t)));return n!==r?n-r:zt(e)[s.start]-zt(t)[s.start]}))[0]}({isMovingForward:t,pageBorderBoxCenter:i,source:r,droppables:a,viewport:s});if(!c)return null;var d=it(c.descriptor.id,o),h=function(e){var t=e.previousPageBorderBoxCenter,i=e.moveRelativeTo,n=e.insideDestination,r=e.draggable,o=e.draggables,a=e.destination,s=e.viewport,l=e.afterCritical;if(!i){if(n.length)return null;var c={displaced:lt,displacedBy:st,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},d=At({impact:c,draggable:r,droppable:a,draggables:o,afterCritical:l}),h=at(r,a)?a:Wt(a,r,o);return Lt({draggable:r,destination:h,newPageBorderBoxCenter:d,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var p,u=Boolean(t[a.axis.line]<=i.page.borderBox.center[a.axis.line]),f=(p=i.descriptor.index,i.descriptor.id===r.descriptor.id||u?p:p+1);return wt({draggable:r,insideDestination:n,destination:a,viewport:s,displacedBy:_t(a.axis,r.displaceBy),last:lt,index:f})}({previousPageBorderBoxCenter:i,destination:c,draggable:n,draggables:o,moveRelativeTo:function(e){var t=e.pageBorderBoxCenter,i=e.viewport,n=e.destination,r=e.insideDestination,o=e.afterCritical;return r.filter((function(e){return vt({target:Bt(e,o),destination:n,viewport:i.frame,withDroppableDisplacement:!0})})).sort((function(e,i){var r=He(t,Tt(n,Nt(e,o))),a=He(t,Tt(n,Nt(i,o)));return r<a?-1:a<r?1:e.descriptor.index-i.descriptor.index}))[0]||null}({pageBorderBoxCenter:i,viewport:s,destination:c,insideDestination:d,afterCritical:l}),insideDestination:d,viewport:s,afterCritical:l});if(!h)return null;var p=At({impact:h,draggable:n,droppable:c,draggables:o,afterCritical:l});return{clientSelection:Mt({pageBorderBoxCenter:p,draggable:n,viewport:s}),impact:h,scrollJumpRequest:null}},qt=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},Ut=function(e){var t=e.state,i=e.type,n=function(e,t){var i=qt(e);return i?t[i]:null}(t.impact,t.dimensions.droppables),r=Boolean(n),o=t.dimensions.droppables[t.critical.droppable.id],a=n||o,s=a.axis.direction,l="vertical"===s&&("MOVE_UP"===i||"MOVE_DOWN"===i)||"horizontal"===s&&("MOVE_LEFT"===i||"MOVE_RIGHT"===i);if(l&&!r)return null;var c="MOVE_DOWN"===i||"MOVE_RIGHT"===i,d=t.dimensions.draggables[t.critical.draggable.id],h=t.current.page.borderBoxCenter,p=t.dimensions,u=p.draggables,f=p.droppables;return l?Rt({isMovingForward:c,previousPageBorderBoxCenter:h,draggable:d,destination:a,draggables:u,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Ft({isMovingForward:c,previousPageBorderBoxCenter:h,draggable:d,isOver:a,draggables:u,droppables:f,viewport:t.viewport,afterCritical:t.afterCritical})};function Vt(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function Yt(e){var t=dt(e.top,e.bottom),i=dt(e.left,e.right);return function(e){return t(e.y)&&i(e.x)}}function Xt(e){var t=e.pageBorderBox,i=e.draggable,n=e.droppables,r=et(n).filter((function(e){if(!e.isEnabled)return!1;var i,n,r=e.subject.active;if(!r)return!1;if(n=r,!((i=t).left<n.right&&i.right>n.left&&i.top<n.bottom&&i.bottom>n.top))return!1;if(Yt(r)(t.center))return!0;var o=e.axis,a=r.center[o.crossAxisLine],s=t[o.crossAxisStart],l=t[o.crossAxisEnd],c=dt(r[o.crossAxisStart],r[o.crossAxisEnd]),d=c(s),h=c(l);return!d&&!h||(d?s<a:l>a)}));return r.length?1===r.length?r[0].descriptor.id:function(e){var t=e.pageBorderBox,i=e.draggable,n=e.candidates,r=i.page.borderBox.center,o=n.map((function(e){var i=e.axis,n=_e(e.axis.line,t.center[i.line],e.page.borderBox.center[i.crossAxisLine]);return{id:e.descriptor.id,distance:He(r,n)}})).sort((function(e,t){return t.distance-e.distance}));return o[0]?o[0].id:null}({pageBorderBox:t,draggable:i,candidates:r}):null}var Gt=function(e,t){return se(qe(e,t))};function Zt(e){var t=e.displaced,i=e.id;return Boolean(t.visible[i]||t.invisible[i])}var Jt=function(e){var t=e.pageOffset,i=e.draggable,n=e.draggables,r=e.droppables,o=e.previousImpact,a=e.viewport,s=e.afterCritical,l=Gt(i.page.borderBox,t),c=Xt({pageBorderBox:l,draggable:i,droppables:r});if(!c)return ct;var d,h,p=r[c],u=it(p.descriptor.id,n),f=(d=l,(h=p.frame)?Gt(d,h.scroll.diff.value):d);return function(e){var t=e.draggable,i=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,r=e.destination,o=e.insideDestination,a=e.afterCritical;if(!r.isCombineEnabled)return null;var s=r.axis,l=_t(r.axis,t.displaceBy),c=l.value,d=i[s.start],h=i[s.end],p=Je(ot(t,o),(function(e){var t=e.descriptor.id,i=e.page.borderBox,r=i[s.size]/4,o=xt(t,a),l=Zt({displaced:n.displaced,id:t});return o?l?h>i[s.start]+r&&h<i[s.end]-r:d>i[s.start]-c+r&&d<i[s.end]-c-r:l?h>i[s.start]+c+r&&h<i[s.end]+c-r:d>i[s.start]+r&&d<i[s.end]-r}));return p?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:r.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:f,draggable:i,previousImpact:o,destination:p,insideDestination:u,afterCritical:s})||function(e){var t=e.pageBorderBoxWithDroppableScroll,i=e.draggable,n=e.destination,r=e.insideDestination,o=e.last,a=e.viewport,s=e.afterCritical,l=n.axis,c=_t(n.axis,i.displaceBy),d=c.value,h=t[l.start],p=t[l.end],u=function(e){var t=e.draggable,i=e.closest,n=e.inHomeList;return i?n&&i.descriptor.index>t.descriptor.index?i.descriptor.index-1:i.descriptor.index:null}({draggable:i,closest:Je(ot(i,r),(function(e){var t=e.descriptor.id,i=e.page.borderBox.center[l.line],n=xt(t,s),r=Zt({displaced:o,id:t});return n?r?p<=i:h<i-d:r?p<=i+d:h<i})),inHomeList:at(i,n)});return wt({draggable:i,insideDestination:r,destination:n,viewport:a,last:o,displacedBy:c,index:u})}({pageBorderBoxWithDroppableScroll:f,draggable:i,destination:p,insideDestination:u,last:o.displaced,viewport:a,afterCritical:s})},Qt=function(e,t){var i;return s({},e,((i={})[t.descriptor.id]=t,i))},$t=function(e){var t=e.previousImpact,i=e.impact,n=e.droppables,r=qt(t),o=qt(i);if(!r)return n;if(r===o)return n;var a=n[r];if(!a.subject.withPlaceholder)return n;var l=function(e){var t=e.subject.withPlaceholder;t||Ce(!1);var i=e.frame;if(!i)return s({},e,{subject:Ye({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var n=t.oldFrameMaxScroll;n||Ce(!1);var r=Ht(i,n);return s({},e,{subject:Ye({page:e.subject.page,axis:e.axis,frame:r,withPlaceholder:null}),frame:r})}(a);return Qt(n,l)},Kt=function(e){var t=e.state,i=e.clientSelection,n=e.dimensions,r=e.viewport,o=e.impact,a=e.scrollJumpRequest,l=r||t.viewport,c=n||t.dimensions,d=i||t.current.client.selection,h=ze(d,t.initial.client.selection),p={offset:h,selection:d,borderBoxCenter:Re(t.initial.client.borderBoxCenter,h)},u={selection:Re(p.selection,l.scroll.current),borderBoxCenter:Re(p.borderBoxCenter,l.scroll.current),offset:Re(p.offset,l.scroll.diff.value)},f={client:p,page:u};if("COLLECTING"===t.phase)return s({phase:"COLLECTING"},t,{dimensions:c,viewport:l,current:f});var g=c.draggables[t.critical.draggable.id],m=o||Jt({pageOffset:u.offset,draggable:g,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),v=function(e){var t=e.draggable,i=e.draggables,n=e.droppables,r=e.previousImpact,o=e.impact,a=$t({previousImpact:r,impact:o,droppables:n}),s=qt(o);if(!s)return a;var l=n[s];if(at(t,l))return a;if(l.subject.withPlaceholder)return a;var c=Wt(l,t,i);return Qt(a,c)}({draggable:g,impact:m,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables});return s({},t,{current:f,dimensions:{draggables:c.draggables,droppables:v},impact:m,viewport:l,scrollJumpRequest:a||null,forceShouldAnimate:!a&&null})},ei=function(e){var t=e.impact,i=e.viewport,n=e.draggables,r=e.destination,o=e.forceShouldAnimate,a=t.displaced;return s({},t,{displaced:yt({afterDragging:function(e,t){return e.map((function(e){return t[e]}))}(a.all,n),destination:r,displacedBy:t.displacedBy,viewport:i.frame,forceShouldAnimate:o,last:a})})},ti=function(e){var t=e.impact,i=e.draggable,n=e.droppable,r=e.draggables,o=e.viewport,a=e.afterCritical,s=At({impact:t,draggable:i,draggables:r,droppable:n,afterCritical:a});return Mt({pageBorderBoxCenter:s,draggable:i,viewport:o})},ii=function(e){var t=e.state,i=e.dimensions,n=e.viewport;"SNAP"!==t.movementMode&&Ce(!1);var r=t.impact,o=n||t.viewport,a=i||t.dimensions,s=a.draggables,l=a.droppables,c=s[t.critical.draggable.id],d=qt(r);d||Ce(!1);var h=l[d],p=ei({impact:r,viewport:o,destination:h,draggables:s}),u=ti({impact:p,draggable:c,droppable:h,draggables:s,viewport:o,afterCritical:t.afterCritical});return Kt({impact:p,clientSelection:u,state:t,dimensions:a,viewport:o})},ni=function(e){var t=e.draggable,i=e.home,n=e.draggables,r=e.viewport,o=_t(i.axis,t.displaceBy),a=it(i.descriptor.id,n),s=a.indexOf(t);-1===s&&Ce(!1);var l,c=a.slice(s+1),d=c.reduce((function(e,t){return e[t.descriptor.id]=!0,e}),{}),h={inVirtualList:"virtual"===i.descriptor.mode,displacedBy:o,effected:d};return{impact:{displaced:yt({afterDragging:c,destination:i,displacedBy:o,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:(l=t.descriptor,{index:l.index,droppableId:l.droppableId})}},afterCritical:h}},ri=function(e){},oi=function(e){},ai=function(e){var t=e.additions,i=e.updatedDroppables,n=e.viewport,r=n.scroll.diff.value;return t.map((function(e){var t=e.descriptor.droppableId,o=function(e){var t=e.frame;return t||Ce(!1),t}(i[t]).scroll.diff.value;return function(e){var t=e.draggable,i=e.offset,n=e.initialWindowScroll,r=ue(t.client,i),o=fe(r,n);return s({},t,{placeholder:s({},t.placeholder,{client:r}),client:r,page:o})}({draggable:e,offset:Re(r,o),initialWindowScroll:n.scroll.initial})}))},si=function(e){return"SNAP"===e.movementMode},li=function(e,t,i){var n=function(e,t){return{draggables:e.draggables,droppables:Qt(e.droppables,t)}}(e.dimensions,t);return!si(e)||i?Kt({state:e,dimensions:n}):ii({state:e,dimensions:n})};function ci(e){return e.isDragging&&"SNAP"===e.movementMode?s({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var di={phase:"IDLE",completed:null,shouldFlush:!1},hi=function(e,t){if(void 0===e&&(e=di),"FLUSH"===t.type)return s({},di,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&Ce(!1);var i=t.payload,n=i.critical,r=i.clientSelection,o=i.viewport,a=i.dimensions,l=i.movementMode,c=a.draggables[n.draggable.id],d=a.droppables[n.droppable.id],h={selection:r,borderBoxCenter:c.client.borderBox.center,offset:Le},p={client:h,page:{selection:Re(h.selection,o.scroll.initial),borderBoxCenter:Re(h.selection,o.scroll.initial),offset:Re(h.selection,o.scroll.diff.value)}},u=et(a.droppables).every((function(e){return!e.isFixedOnPage})),f=ni({draggable:c,home:d,draggables:a.draggables,viewport:o}),g=f.impact;return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:l,dimensions:a,initial:p,current:p,isWindowScrollAllowed:u,impact:g,afterCritical:f.afterCritical,onLiftImpact:g,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&Ce(!1),s({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&Ce(!1),function(e){var t=e.state,i=e.published;ri();var n=i.modified.map((function(e){var i=t.dimensions.droppables[e.droppableId];return Xe(i,e.scroll)})),r=s({},t.dimensions.droppables,{},$e(n)),o=Ke(ai({additions:i.additions,updatedDroppables:r,viewport:t.viewport})),a=s({},t.dimensions.draggables,{},o);i.removals.forEach((function(e){delete a[e]}));var l={droppables:r,draggables:a},c=qt(t.impact),d=c?l.droppables[c]:null,h=l.draggables[t.critical.draggable.id],p=l.droppables[t.critical.droppable.id],u=ni({draggable:h,home:p,draggables:a,viewport:t.viewport}),f=u.impact,g=u.afterCritical,m=d&&d.isCombineEnabled?t.impact:f,v=Jt({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:m,viewport:t.viewport,afterCritical:g});oi();var y=s({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:v,onLiftImpact:f,dimensions:l,afterCritical:g,forceShouldAnimate:!1});return"COLLECTING"===t.phase?y:s({phase:"DROP_PENDING"},y,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;Vt(e)||Ce(!1);var m=t.payload.client;return Ne(m,e.current.client.selection)?e:Kt({state:e,clientSelection:m,impact:si(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return ci(e);if("COLLECTING"===e.phase)return ci(e);Vt(e)||Ce(!1);var v=t.payload,y=v.id,b=v.newScroll,w=e.dimensions.droppables[y];if(!w)return e;var x=Xe(w,b);return li(e,x,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;Vt(e)||Ce(!1);var O=t.payload,S=O.id,C=O.isEnabled,P=e.dimensions.droppables[S];P||Ce(!1),P.isEnabled===C&&Ce(!1);var j=s({},P,{isEnabled:C});return li(e,j,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;Vt(e)||Ce(!1);var I=t.payload,E=I.id,T=I.isCombineEnabled,A=e.dimensions.droppables[E];A||Ce(!1),A.isCombineEnabled===T&&Ce(!1);var D=s({},A,{isCombineEnabled:T});return li(e,D,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;Vt(e)||Ce(!1),e.isWindowScrollAllowed||Ce(!1);var k=t.payload.newScroll;if(Ne(e.viewport.scroll.current,k))return ci(e);var M=Dt(e.viewport,k);return si(e)?ii({state:e,viewport:M}):Kt({state:e,viewport:M})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!Vt(e))return e;var L=t.payload.maxScroll;if(Ne(L,e.viewport.scroll.max))return e;var R=s({},e.viewport,{scroll:s({},e.viewport.scroll,{max:L})});return s({phase:"DRAGGING"},e,{viewport:R})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&Ce(!1);var z=Ut({state:e,type:t.type});return z?Kt({state:e,impact:z.impact,clientSelection:z.clientSelection,scrollJumpRequest:z.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var N=t.payload.reason;return"COLLECTING"!==e.phase&&Ce(!1),s({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:N})}if("DROP_ANIMATE"===t.type){var B=t.payload,_=B.completed,H=B.dropDuration,W=B.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&Ce(!1),{phase:"DROP_ANIMATING",completed:_,dropDuration:H,newHomeClientOffset:W,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},pi=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},ui=function(){return{type:"COLLECTION_STARTING",payload:null}},fi=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},gi=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},mi=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},vi=function(e){return{type:"MOVE",payload:e}},yi=function(){return{type:"MOVE_UP",payload:null}},bi=function(){return{type:"MOVE_DOWN",payload:null}},wi=function(){return{type:"MOVE_RIGHT",payload:null}},xi=function(){return{type:"MOVE_LEFT",payload:null}},Oi=function(e){return{type:"DROP_COMPLETE",payload:e}},Si=function(e){return{type:"DROP",payload:e}},Ci=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},Pi="cubic-bezier(.2,1,.1,1)",ji={drop:0,combining:.7},Ii={drop:.75},Ei="0.2s cubic-bezier(0.2, 0, 0, 1)",Ti={fluid:"opacity "+Ei,snap:"transform "+Ei+", opacity "+Ei,drop:function(e){var t=e+"s "+Pi;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+Ei,placeholder:"height "+Ei+", width "+Ei+", margin "+Ei},Ai=function(e){return Ne(e,Le)?null:"translate("+e.x+"px, "+e.y+"px)"},Di=Ai,ki=function(e,t){var i=Ai(e);return i?t?i+" scale("+Ii.drop+")":i:null},Mi=.33,Li=.55,Ri=Li-Mi,zi=function(e){var t=e.getState,i=e.dispatch;return function(e){return function(n){if("DROP"===n.type){var r=t(),o=n.payload.reason;if("COLLECTING"!==r.phase){if("IDLE"!==r.phase){"DROP_PENDING"===r.phase&&r.isWaiting&&Ce(!1),"DRAGGING"!==r.phase&&"DROP_PENDING"!==r.phase&&Ce(!1);var a=r.critical,l=r.dimensions,c=l.draggables[r.critical.draggable.id],d=function(e){var t=e.draggables,i=e.reason,n=e.lastImpact,r=e.home,o=e.viewport,a=e.onLiftImpact;return n.at&&"DROP"===i?"REORDER"===n.at.type?{impact:n,didDropInsideDroppable:!0}:{impact:s({},n,{displaced:lt}),didDropInsideDroppable:!0}:{impact:ei({draggables:t,impact:a,destination:r,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:o,lastImpact:r.impact,afterCritical:r.afterCritical,onLiftImpact:r.onLiftImpact,home:r.dimensions.droppables[r.critical.droppable.id],viewport:r.viewport,draggables:r.dimensions.draggables}),h=d.impact,p=d.didDropInsideDroppable,u=p?nt(h):null,f=p?rt(h):null,g={index:a.draggable.index,droppableId:a.droppable.id},m={draggableId:c.descriptor.id,type:c.descriptor.type,source:g,reason:o,mode:r.movementMode,destination:u,combine:f},v=function(e){var t=e.impact,i=e.draggable,n=e.dimensions,r=e.viewport,o=e.afterCritical,a=n.draggables,s=n.droppables,l=qt(t),c=l?s[l]:null,d=s[i.descriptor.droppableId],h=ti({impact:t,draggable:i,draggables:a,afterCritical:o,droppable:c||d,viewport:r});return ze(h,i.client.borderBox.center)}({impact:h,draggable:c,dimensions:l,viewport:r.viewport,afterCritical:r.afterCritical}),y={critical:r.critical,afterCritical:r.afterCritical,result:m,impact:h};if(!Ne(r.current.client.offset,v)||Boolean(m.combine)){var b=function(e){var t=e.current,i=e.destination,n=e.reason,r=He(t,i);if(r<=0)return Mi;if(r>=1500)return Li;var o=Mi+Ri*(r/1500);return Number(("CANCEL"===n?.6*o:o).toFixed(2))}({current:r.current.client.offset,destination:v,reason:o});i(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:v,dropDuration:b,completed:y}))}else i(Oi({completed:y}))}}else i(function(e){return{type:"DROP_PENDING",payload:e}}({reason:o}))}else e(n)}}},Ni=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Bi(e){var t,i=e.onWindowScroll,n=be((function(){i(Ni())})),r=(t=n,{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(e){e.target!==window&&e.target!==window.document||t()}}),o=xe;function a(){return o!==xe}return{start:function(){a()&&Ce(!1),o=Oe(window,[r])},stop:function(){a()||Ce(!1),n.cancel(),o(),o=xe},isActive:a}}var _i=function(e){var t=Bi({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(i){t.isActive()||"INITIAL_PUBLISH"!==i.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(i)&&t.stop(),e(i)}}},Hi=function(){var e=[];return{add:function(t){var i=setTimeout((function(){return function(t){var i=Ze(e,(function(e){return e.timerId===t}));-1===i&&Ce(!1),e.splice(i,1)[0].callback()}(i)})),n={timerId:i,callback:t};e.push(n)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach((function(e){clearTimeout(e.timerId),e.callback()}))}}}},Wi=function(e,t){ri(),t(),oi()},Fi=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},qi=function(e,t,i,n){if(e){var r=function(e){var t=!1,i=!1,n=setTimeout((function(){i=!0})),r=function(r){t||i||(t=!0,e(r),clearTimeout(n))};return r.wasCalled=function(){return t},r}(i);e(t,{announce:r}),r.wasCalled()||i(n(t))}else i(n(t))},Ui=function(e,t){var i=function(e,t){var i=Hi(),n=null,r=function(i){n||Ce(!1),n=null,Wi(0,(function(){return qi(e().onDragEnd,i,t,Me)}))};return{beforeCapture:function(t,i){n&&Ce(!1),Wi(0,(function(){var n=e().onBeforeCapture;n&&n({draggableId:t,mode:i})}))},beforeStart:function(t,i){n&&Ce(!1),Wi(0,(function(){var n=e().onBeforeDragStart;n&&n(Fi(t,i))}))},start:function(r,o){n&&Ce(!1);var a=Fi(r,o);n={mode:o,lastCritical:r,lastLocation:a.source,lastCombine:null},i.add((function(){Wi(0,(function(){return qi(e().onDragStart,a,t,De)}))}))},update:function(r,o){var a=nt(o),l=rt(o);n||Ce(!1);var c=!function(e,t){if(e===t)return!0;var i=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return i&&n}(r,n.lastCritical);c&&(n.lastCritical=r);var d,h,p=(h=a,!(null==(d=n.lastLocation)&&null==h||null!=d&&null!=h&&d.droppableId===h.droppableId&&d.index===h.index));p&&(n.lastLocation=a);var u=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(n.lastCombine,l);if(u&&(n.lastCombine=l),c||p||u){var f=s({},Fi(r,n.mode),{combine:l,destination:a});i.add((function(){Wi(0,(function(){return qi(e().onDragUpdate,f,t,ke)}))}))}},flush:function(){n||Ce(!1),i.flush()},drop:r,abort:function(){if(n){var e=s({},Fi(n.lastCritical,n.mode),{combine:null,destination:null,reason:"CANCEL"});r(e)}}}}(e,t);return function(e){return function(t){return function(n){if("BEFORE_INITIAL_CAPTURE"!==n.type){if("INITIAL_PUBLISH"===n.type){var r=n.payload.critical;return i.beforeStart(r,n.payload.movementMode),t(n),void i.start(r,n.payload.movementMode)}if("DROP_COMPLETE"===n.type){var o=n.payload.completed.result;return i.flush(),t(n),void i.drop(o)}if(t(n),"FLUSH"!==n.type){var a=e.getState();"DRAGGING"===a.phase&&i.update(a.critical,a.impact)}else i.abort()}else i.beforeCapture(n.payload.draggableId,n.payload.movementMode)}}}},Vi=function(e){return function(t){return function(i){if("DROP_ANIMATION_FINISHED"===i.type){var n=e.getState();"DROP_ANIMATING"!==n.phase&&Ce(!1),e.dispatch(Oi({completed:n.completed}))}else t(i)}}},Yi=function(e){var t=null,i=null;return function(n){return function(r){if("FLUSH"!==r.type&&"DROP_COMPLETE"!==r.type&&"DROP_ANIMATION_FINISHED"!==r.type||(i&&(cancelAnimationFrame(i),i=null),t&&(t(),t=null)),n(r),"DROP_ANIMATE"===r.type){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};i=requestAnimationFrame((function(){i=null,t=Oe(window,[o])}))}}}},Xi=function(e){return function(t){return function(i){if(t(i),"PUBLISH_WHILE_DRAGGING"===i.type){var n=e.getState();"DROP_PENDING"===n.phase&&(n.isWaiting||e.dispatch(Si({reason:n.reason})))}}}},Gi=y,Zi=function(e){var t,i=e.dimensionMarshal,n=e.focusMarshal,r=e.styleMarshal,o=e.getResponders,a=e.announce,s=e.autoScroller;return p(hi,Gi(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return function(){var i=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},r={getState:i.getState,dispatch:function(){return n.apply(void 0,arguments)}},o=t.map((function(e){return e(r)}));return v({},i,{dispatch:n=y.apply(void 0,o)(i.dispatch)})}}}((t=r,function(){return function(e){return function(i){"INITIAL_PUBLISH"===i.type&&t.dragging(),"DROP_ANIMATE"===i.type&&t.dropping(i.payload.completed.result.reason),"FLUSH"!==i.type&&"DROP_COMPLETE"!==i.type||t.resting(),e(i)}}}),function(e){return function(){return function(t){return function(i){"DROP_COMPLETE"!==i.type&&"FLUSH"!==i.type&&"DROP_ANIMATE"!==i.type||e.stopPublishing(),t(i)}}}}(i),function(e){return function(t){var i=t.getState,n=t.dispatch;return function(t){return function(r){if("LIFT"===r.type){var o=r.payload,a=o.id,s=o.clientSelection,l=o.movementMode,c=i();"DROP_ANIMATING"===c.phase&&n(Oi({completed:c.completed})),"IDLE"!==i().phase&&Ce(!1),n({type:"FLUSH",payload:null}),n({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:a,movementMode:l}});var d={draggableId:a,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},h=e.startPublishing(d),p=h.critical,u=h.dimensions,f=h.viewport;n(function(e){return{type:"INITIAL_PUBLISH",payload:e}}({critical:p,dimensions:u,clientSelection:s,movementMode:l,viewport:f}))}else t(r)}}}}(i),zi,Vi,Yi,Xi,function(e){return function(t){return function(i){return function(n){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n))return e.stop(),void i(n);if("INITIAL_PUBLISH"===n.type){i(n);var r=t.getState();return"DRAGGING"!==r.phase&&Ce(!1),void e.start(r)}i(n),e.scroll(t.getState())}}}}(s),_i,function(e){var t=!1;return function(){return function(i){return function(n){if("INITIAL_PUBLISH"===n.type)return t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),i(n),void e.tryRestoreFocusRecorded();if(i(n),t){if("FLUSH"===n.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===n.type){t=!1;var r=n.payload.completed.result;r.combine&&e.tryShiftRecord(r.draggableId,r.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(n),Ui(o,a))))},Ji=function(e){var t=e.scrollHeight,i=e.scrollWidth,n=e.height,r=e.width,o=ze({x:i,y:t},{x:r,y:n});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},Qi=function(){var e=document.documentElement;return e||Ce(!1),e},$i=function(){var e=Qi();return Ji({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Ki=function(e){var t=e.critical,i=e.scrollOptions,n=e.registry;ri();var r,o,a,s,l,c,d,h=(r=Ni(),o=$i(),a=r.y,s=r.x,c=(l=Qi()).clientWidth,d=l.clientHeight,{frame:se({top:a,left:s,right:s+c,bottom:a+d}),scroll:{initial:r,current:r,max:o,diff:{value:Le,displacement:Le}}}),p=h.scroll.current,u=t.droppable,f=n.droppable.getAllByType(u.type).map((function(e){return e.callbacks.getDimensionAndWatchScroll(p,i)})),g=n.draggable.getAllByType(t.draggable.type).map((function(e){return e.getDimension(p)})),m={draggables:Ke(g),droppables:$e(f)};return oi(),{dimensions:m,critical:t,viewport:h}};function en(e,t,i){return i.descriptor.id!==t.id&&i.descriptor.type===t.type&&"virtual"===e.droppable.getById(i.descriptor.droppableId).descriptor.mode}var tn,nn,rn=function(e,t){var i=null,n=function(e){var t=e.registry,i=e.callbacks,n={additions:{},removals:{},modified:{}},r=null,o=function(){r||(i.collectionStarting(),r=requestAnimationFrame((function(){r=null,ri();var e=n,o=e.additions,a=e.removals,s=e.modified,l=Object.keys(o).map((function(e){return t.draggable.getById(e).getDimension(Le)})).sort((function(e,t){return e.descriptor.index-t.descriptor.index})),c=Object.keys(s).map((function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}})),d={additions:l,removals:Object.keys(a),modified:c};n={additions:{},removals:{},modified:{}},oi(),i.publish(d)})))};return{add:function(e){var t=e.descriptor.id;n.additions[t]=e,n.modified[e.descriptor.droppableId]=!0,n.removals[t]&&delete n.removals[t],o()},remove:function(e){var t=e.descriptor;n.removals[t.id]=!0,n.modified[t.droppableId]=!0,n.additions[t.id]&&delete n.additions[t.id],o()},stop:function(){r&&(cancelAnimationFrame(r),r=null,n={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),r=function(t){i||Ce(!1);var r=i.critical.draggable;"ADDITION"===t.type&&en(e,r,t.value)&&n.add(t.value),"REMOVAL"===t.type&&en(e,r,t.value)&&n.remove(t.value)};return{updateDroppableIsEnabled:function(n,r){e.droppable.exists(n)||Ce(!1),i&&t.updateDroppableIsEnabled({id:n,isEnabled:r})},updateDroppableIsCombineEnabled:function(n,r){i&&(e.droppable.exists(n)||Ce(!1),t.updateDroppableIsCombineEnabled({id:n,isCombineEnabled:r}))},scrollDroppable:function(t,n){i&&e.droppable.getById(t).callbacks.scroll(n)},updateDroppableScroll:function(n,r){i&&(e.droppable.exists(n)||Ce(!1),t.updateDroppableScroll({id:n,newScroll:r}))},startPublishing:function(t){i&&Ce(!1);var n=e.draggable.getById(t.draggableId),o=e.droppable.getById(n.descriptor.droppableId),a={draggable:n.descriptor,droppable:o.descriptor},s=e.subscribe(r);return i={critical:a,unsubscribe:s},Ki({critical:a,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(i){n.stop();var t=i.critical.droppable;e.droppable.getAllByType(t.type).forEach((function(e){return e.callbacks.dragStopped()})),i.unsubscribe(),i=null}}}},on=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason},an=function(e){window.scrollBy(e.x,e.y)},sn=ye((function(e){return et(e).filter((function(e){return!!e.isEnabled&&!!e.frame}))})),ln=function(e){var t=e.center,i=e.destination,n=e.droppables;if(i){var r=n[i];return r.frame?r:null}return function(e,t){return Je(sn(t),(function(t){return t.frame||Ce(!1),Yt(t.frame.pageMarginBox)(e)}))}(t,n)},cn=.25,dn=.05,hn=28,pn=function(e){return Math.pow(e,2)},un={stopDampeningAt:1200,accelerateAt:360},fn=function(e){var t=e.startOfRange,i=e.endOfRange,n=e.current,r=i-t;return 0===r?0:(n-t)/r},gn=un.accelerateAt,mn=un.stopDampeningAt,vn=function(e){var t=e.distanceToEdge,i=e.thresholds,n=e.dragStartTime,r=e.shouldUseTimeDampening,o=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return hn;if(e===t.startScrollingFrom)return 1;var i=fn({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=hn*pn(1-i);return Math.ceil(n)}(t,i);return 0===o?0:r?Math.max(function(e,t){var i=t,n=mn,r=Date.now()-i;if(r>=mn)return e;if(r<gn)return 1;var o=fn({startOfRange:gn,endOfRange:n,current:r}),a=e*pn(o);return Math.ceil(a)}(o,n),1):o},yn=function(e){var t=e.container,i=e.distanceToEdges,n=e.dragStartTime,r=e.axis,o=e.shouldUseTimeDampening,a=function(e,t){return{startScrollingFrom:e[t.size]*cn,maxScrollValueAt:e[t.size]*dn}}(t,r);return i[r.end]<i[r.start]?vn({distanceToEdge:i[r.end],thresholds:a,dragStartTime:n,shouldUseTimeDampening:o}):-1*vn({distanceToEdge:i[r.start],thresholds:a,dragStartTime:n,shouldUseTimeDampening:o})},bn=Fe((function(e){return 0===e?0:e})),wn=function(e){var t=e.dragStartTime,i=e.container,n=e.subject,r=e.center,o=e.shouldUseTimeDampening,a={top:r.y-i.top,right:i.right-r.x,bottom:i.bottom-r.y,left:r.x-i.left},s=yn({container:i,distanceToEdges:a,dragStartTime:t,axis:ut,shouldUseTimeDampening:o}),l=yn({container:i,distanceToEdges:a,dragStartTime:t,axis:ft,shouldUseTimeDampening:o}),c=bn({x:l,y:s});if(Ne(c,Le))return null;var d=function(e){var t=e.container,i=e.subject,n=e.proposedScroll,r=i.height>t.height,o=i.width>t.width;return o||r?o&&r?null:{x:o?0:n.x,y:r?0:n.y}:n}({container:i,subject:n,proposedScroll:c});return d?Ne(d,Le)?null:d:null},xn=Fe((function(e){return 0===e?0:e>0?1:-1})),On=(tn=function(e,t){return e<0?e:e>t?e-t:0},function(e){var t=e.current,i=e.max,n=e.change,r=Re(t,n),o={x:tn(r.x,i.x),y:tn(r.y,i.y)};return Ne(o,Le)?null:o}),Sn=function(e){var t=e.max,i=e.current,n=e.change,r={x:Math.max(i.x,t.x),y:Math.max(i.y,t.y)},o=xn(n),a=On({max:r,current:i,change:o});return!a||0!==o.x&&0===a.x||0!==o.y&&0===a.y},Cn=function(e,t){return Sn({current:e.scroll.current,max:e.scroll.max,change:t})},Pn=function(e,t){var i=e.frame;return!!i&&Sn({current:i.scroll.current,max:i.scroll.max,change:t})},jn=function(e){var t=e.state,i=e.dragStartTime,n=e.shouldUseTimeDampening,r=e.scrollWindow,o=e.scrollDroppable,a=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var l=function(e){var t=e.viewport,i=e.subject,n=e.center,r=e.dragStartTime,o=e.shouldUseTimeDampening,a=wn({dragStartTime:r,container:t.frame,subject:i,center:n,shouldUseTimeDampening:o});return a&&Cn(t,a)?a:null}({dragStartTime:i,viewport:t.viewport,subject:s,center:a,shouldUseTimeDampening:n});if(l)return void r(l)}var c=ln({center:a,destination:qt(t.impact),droppables:t.dimensions.droppables});if(c){var d=function(e){var t=e.droppable,i=e.subject,n=e.center,r=e.dragStartTime,o=e.shouldUseTimeDampening,a=t.frame;if(!a)return null;var s=wn({dragStartTime:r,container:a.pageMarginBox,subject:i,center:n,shouldUseTimeDampening:o});return s&&Pn(t,s)?s:null}({dragStartTime:i,droppable:c,subject:s,center:a,shouldUseTimeDampening:n});d&&o(c.descriptor.id,d)}},In=function(e){var t=e.move,i=e.scrollDroppable,n=e.scrollWindow,r=function(e,t){if(!Pn(e,t))return t;var n=function(e,t){var i=e.frame;return i&&Pn(e,t)?On({current:i.scroll.current,max:i.scroll.max,change:t}):null}(e,t);if(!n)return i(e.descriptor.id,t),null;var r=ze(t,n);return i(e.descriptor.id,r),ze(t,r)},o=function(e,t,i){if(!e)return i;if(!Cn(t,i))return i;var r=function(e,t){if(!Cn(e,t))return null;var i=e.scroll.max,n=e.scroll.current;return On({current:n,max:i,change:t})}(t,i);if(!r)return n(i),null;var o=ze(i,r);return n(o),ze(i,o)};return function(e){var i=e.scrollJumpRequest;if(i){var n=qt(e.impact);n||Ce(!1);var a=r(e.dimensions.droppables[n],i);if(a){var s=e.viewport,l=o(e.isWindowScrollAllowed,s,a);l&&function(e,i){var n=Re(e.current.client.selection,i);t({client:n})}(e,l)}}}},En=function(e){var t=e.scrollDroppable,i=e.scrollWindow,n=e.move,r=function(e){var t=e.scrollWindow,i=e.scrollDroppable,n=be(t),r=be(i),o=null,a=function(e){o||Ce(!1);var t=o,i=t.shouldUseTimeDampening,a=t.dragStartTime;jn({state:e,scrollWindow:n,scrollDroppable:r,dragStartTime:a,shouldUseTimeDampening:i})};return{start:function(e){ri(),o&&Ce(!1);var t=Date.now(),i=!1,n=function(){i=!0};jn({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:n,scrollDroppable:n}),o={dragStartTime:t,shouldUseTimeDampening:i},oi(),i&&a(e)},stop:function(){o&&(n.cancel(),r.cancel(),o=null)},scroll:a}}({scrollWindow:i,scrollDroppable:t}),o=In({move:n,scrollWindow:i,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&o(e):r.scroll(e))},start:r.start,stop:r.stop}},Tn={base:nn="data-rbd-drag-handle",draggableId:nn+"-draggable-id",contextId:nn+"-context-id"},An=function(){var e="data-rbd-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Dn=function(){var e="data-rbd-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),kn={contextId:"data-rbd-scroll-container-context-id"},Mn=function(e,t){return e.map((function(e){var i=e.styles[t];return i?e.selector+" { "+i+" }":""})).join(" ")},Ln="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?n.useLayoutEffect:n.useEffect,Rn=function(){var e=document.querySelector("head");return e||Ce(!1),e},zn=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Nn(e,t){var i=re((function(){return function(e){var t,i,n,r=(t=e,function(e){return"["+e+'="'+t+'"]'}),o=(i="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:r(Tn.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:i,dragging:"pointer-events: none;",dropAnimating:i}}),a=[(n="\n      transition: "+Ti.outOfTheWay+";\n    ",{selector:r(An.contextId),styles:{dragging:n,dropAnimating:n,userCancel:n}}),o,{selector:r(Dn.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:Mn(a,"always"),resting:Mn(a,"resting"),dragging:Mn(a,"dragging"),dropAnimating:Mn(a,"dropAnimating"),userCancel:Mn(a,"userCancel")}}(e)}),[e]),r=Object(n.useRef)(null),o=Object(n.useRef)(null),a=oe(ye((function(e){var t=o.current;t||Ce(!1),t.textContent=e})),[]),s=oe((function(e){var t=r.current;t||Ce(!1),t.textContent=e}),[]);Ln((function(){(r.current||o.current)&&Ce(!1);var n=zn(t),l=zn(t);return r.current=n,o.current=l,n.setAttribute("data-rbd-always",e),l.setAttribute("data-rbd-dynamic",e),Rn().appendChild(n),Rn().appendChild(l),s(i.always),a(i.resting),function(){var e=function(e){var t=e.current;t||Ce(!1),Rn().removeChild(t),e.current=null};e(r),e(o)}}),[t,s,a,i.always,i.resting,e]);var l=oe((function(){return a(i.dragging)}),[a,i.dragging]),c=oe((function(e){a("DROP"!==e?i.userCancel:i.dropAnimating)}),[a,i.dropAnimating,i.userCancel]),d=oe((function(){o.current&&a(i.resting)}),[a,i.resting]);return re((function(){return{dragging:l,dropping:c,resting:d}}),[l,c,d])}var Bn=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function _n(e){return e instanceof Bn(e).HTMLElement}function Hn(e,t){var i="["+Tn.contextId+'="'+e+'"]',n=Qe(document.querySelectorAll(i));if(!n.length)return null;var r=Je(n,(function(e){return e.getAttribute(Tn.draggableId)===t}));return r&&_n(r)?r:null}function Wn(){var e={draggables:{},droppables:{}},t=[];function i(e){t.length&&t.forEach((function(t){return t(e)}))}function n(t){return e.draggables[t]||null}function r(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,i({type:"ADDITION",value:t})},update:function(t,i){var n=e.draggables[i.descriptor.id];n&&n.uniqueId===t.uniqueId&&(delete e.draggables[i.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var r=t.descriptor.id,o=n(r);o&&t.uniqueId===o.uniqueId&&(delete e.draggables[r],i({type:"REMOVAL",value:t}))},getById:function(e){var t=n(e);return t||Ce(!1),t},findById:n,exists:function(e){return Boolean(n(e))},getAllByType:function(t){return Ge(e.draggables).filter((function(e){return e.descriptor.type===t}))}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var i=r(t.descriptor.id);i&&t.uniqueId===i.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=r(e);return t||Ce(!1),t},findById:r,exists:function(e){return Boolean(r(e))},getAllByType:function(t){return Ge(e.droppables).filter((function(e){return e.descriptor.type===t}))}},subscribe:function(e){return t.push(e),function(){var i=t.indexOf(e);-1!==i&&t.splice(i,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var Fn=r.a.createContext(null),qn=function(){var e=document.body;return e||Ce(!1),e},Un={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Vn=0,Yn={separator:"::"};function Xn(e,t){return void 0===t&&(t=Yn),re((function(){return""+e+t.separator+Vn++}),[t.separator,e])}var Gn=r.a.createContext(null);function Zn(e){}function Jn(e,t){Zn()}function Qn(){Jn()}function $n(e){var t=Object(n.useRef)(e);return Object(n.useEffect)((function(){t.current=e})),t}var Kn,er,tr=((Kn={})[13]=!0,Kn[9]=!0,Kn),ir=function(e){tr[e.keyCode]&&e.preventDefault()},nr=function(){var e="visibilitychange";return"undefined"==typeof document?e:Je([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],(function(e){return"on"+e in document}))||e}(),rr={type:"IDLE"};function or(e){var t=e.cancel,i=e.completed,n=e.getPhase,r=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,i=e.clientX,o=e.clientY;if(0===t){var a={x:i,y:o},s=n();if("DRAGGING"===s.type)return e.preventDefault(),void s.actions.move(a);if("PENDING"!==s.type&&Ce(!1),l=s.point,c=a,Math.abs(c.x-l.x)>=5||Math.abs(c.y-l.y)>=5){var l,c;e.preventDefault();var d=s.actions.fluidLift(a);r({type:"DRAGGING",actions:d})}}}},{eventName:"mouseup",fn:function(e){var r=n();"DRAGGING"===r.type?(e.preventDefault(),r.actions.drop({shouldBlockNextClick:!0}),i()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===n().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==n().type)return 27===e.keyCode?(e.preventDefault(),void t()):void ir(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===n().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var i=n();"IDLE"===i.type&&Ce(!1),i.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:nr,fn:t}]}function ar(){}var sr=((er={})[34]=!0,er[33]=!0,er[36]=!0,er[35]=!0,er);function lr(e,t){function i(){t(),e.cancel()}return[{eventName:"keydown",fn:function(n){return 27===n.keyCode?(n.preventDefault(),void i()):32===n.keyCode?(n.preventDefault(),t(),void e.drop()):40===n.keyCode?(n.preventDefault(),void e.moveDown()):38===n.keyCode?(n.preventDefault(),void e.moveUp()):39===n.keyCode?(n.preventDefault(),void e.moveRight()):37===n.keyCode?(n.preventDefault(),void e.moveLeft()):void(sr[n.keyCode]?n.preventDefault():ir(n))}},{eventName:"mousedown",fn:i},{eventName:"mouseup",fn:i},{eventName:"click",fn:i},{eventName:"touchstart",fn:i},{eventName:"resize",fn:i},{eventName:"wheel",fn:i,options:{passive:!0}},{eventName:nr,fn:i}]}var cr={type:"IDLE"},dr={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function hr(e,t){var i=t.target;return!!_n(i)&&function e(t,i){if(null==i)return!1;if(Boolean(dr[i.tagName.toLowerCase()]))return!0;var n=i.getAttribute("contenteditable");return"true"===n||""===n||i!==t&&e(t,i.parentElement)}(e,i)}var pr=function(e){return se(e.getBoundingClientRect()).center},ur="undefined"==typeof document?"matches":Je(["matches","msMatchesSelector","webkitMatchesSelector"],(function(e){return e in Element.prototype}))||"matches";function fr(e,t){return e.closest?e.closest(t):function e(t,i){return null==t?null:t[ur](i)?t:e(t.parentElement,i)}(e,t)}function gr(e,t){var i,n=t.target;if(!((i=n)instanceof Bn(i).Element))return null;var r=fr(n,function(e){return"["+Tn.contextId+'="'+e+'"]'}(e));return r&&_n(r)?r:null}function mr(e){e.preventDefault()}function vr(e){var t=e.expected,i=e.phase,n=e.isLockActive;return e.shouldWarn,!!n()&&t===i}function yr(e){var t=e.lockAPI,i=e.store,n=e.registry,r=e.draggableId;if(t.isClaimed())return!1;var o=n.draggable.findById(r);return!!o&&!!o.options.isEnabled&&!!on(i.getState(),r)}function br(e){var t=e.lockAPI,i=e.contextId,n=e.store,r=e.registry,o=e.draggableId,a=e.forceSensorStop,l=e.sourceEvent;if(!yr({lockAPI:t,store:n,registry:r,draggableId:o}))return null;var c=r.draggable.getById(o),d=function(e,t){var i="["+An.contextId+'="'+e+'"]',n=Je(Qe(document.querySelectorAll(i)),(function(e){return e.getAttribute(An.id)===t}));return n&&_n(n)?n:null}(i,c.descriptor.id);if(!d)return null;if(l&&!c.options.canDragInteractiveElements&&hr(d,l))return null;var h=t.claim(a||xe),p="PRE_DRAG";function u(){return c.options.shouldRespectForcePress}function f(){return t.isActive(h)}var g=function(e,t){vr({expected:e,phase:p,isLockActive:f,shouldWarn:!0})&&n.dispatch(t())}.bind(null,"DRAGGING");function m(e){function i(){t.release(),p="COMPLETED"}function r(t,r){if(void 0===r&&(r={shouldBlockNextClick:!1}),e.cleanup(),r.shouldBlockNextClick){var o=Oe(window,[{eventName:"click",fn:mr,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(o)}i(),n.dispatch(Si({reason:t}))}return"PRE_DRAG"!==p&&(i(),"PRE_DRAG"!==p&&Ce(!1)),n.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),p="DRAGGING",s({isActive:function(){return vr({expected:"DRAGGING",phase:p,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:u,drop:function(e){return r("DROP",e)},cancel:function(e){return r("CANCEL",e)}},e.actions)}return{isActive:function(){return vr({expected:"PRE_DRAG",phase:p,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:u,fluidLift:function(e){var t=be((function(e){g((function(){return vi({client:e})}))}));return s({},m({liftActionArgs:{id:o,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return g(yi)},moveRight:function(){return g(wi)},moveDown:function(){return g(bi)},moveLeft:function(){return g(xi)}};return m({liftActionArgs:{id:o,clientSelection:pr(d),movementMode:"SNAP"},cleanup:xe,actions:e})},abort:function(){vr({expected:"PRE_DRAG",phase:p,isLockActive:f,shouldWarn:!0})&&t.release()}}}var wr=[function(e){var t=Object(n.useRef)(rr),i=Object(n.useRef)(xe),r=re((function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var n=e.findClosestDraggableId(t);if(n){var r=e.tryGetLock(n,s,{sourceEvent:t});if(r){t.preventDefault();var o={x:t.clientX,y:t.clientY};i.current(),d(r,o)}}}}}}),[e]),o=re((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var i=e.findClosestDraggableId(t);if(i){var n=e.findOptionsForDraggable(i);n&&(n.shouldRespectForcePress||e.canGetLock(i)&&t.preventDefault())}}}}}),[e]),a=oe((function(){i.current=Oe(window,[o,r],{passive:!1,capture:!0})}),[o,r]),s=oe((function(){"IDLE"!==t.current.type&&(t.current=rr,i.current(),a())}),[a]),l=oe((function(){var e=t.current;s(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[s]),c=oe((function(){var e=or({cancel:l,completed:s,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});i.current=Oe(window,e,{capture:!0,passive:!1})}),[l,s]),d=oe((function(e,i){"IDLE"!==t.current.type&&Ce(!1),t.current={type:"PENDING",point:i,actions:e},c()}),[c]);Ln((function(){return a(),function(){i.current()}}),[a])},function(e){var t=Object(n.useRef)(ar),i=re((function(){return{eventName:"keydown",fn:function(i){if(!i.defaultPrevented&&32===i.keyCode){var n=e.findClosestDraggableId(i);if(n){var o=e.tryGetLock(n,l,{sourceEvent:i});if(o){i.preventDefault();var a=!0,s=o.snapLift();t.current(),t.current=Oe(window,lr(s,l),{capture:!0,passive:!1})}}}function l(){a||Ce(!1),a=!1,t.current(),r()}}}}),[e]),r=oe((function(){t.current=Oe(window,[i],{passive:!1,capture:!0})}),[i]);Ln((function(){return r(),function(){t.current()}}),[r])},function(e){var t=Object(n.useRef)(cr),i=Object(n.useRef)(xe),r=oe((function(){return t.current}),[]),o=oe((function(e){t.current=e}),[]),a=re((function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var r=e.tryGetLock(n,l,{sourceEvent:t});if(r){var o=t.touches[0],a={x:o.clientX,y:o.clientY};i.current(),p(r,a)}}}}}}),[e]),s=oe((function(){i.current=Oe(window,[a],{capture:!0,passive:!1})}),[a]),l=oe((function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),o(cr),i.current(),s())}),[s,o]),c=oe((function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[l]),d=oe((function(){var e={capture:!0,passive:!1},t={cancel:c,completed:l,getPhase:r},n=Oe(window,function(e){var t=e.cancel,i=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var i=n();if("DRAGGING"===i.type){i.hasMoved=!0;var r=e.touches[0],o={x:r.clientX,y:r.clientY};e.preventDefault(),i.actions.move(o)}else t()}},{eventName:"touchend",fn:function(e){var r=n();"DRAGGING"===r.type?(e.preventDefault(),r.actions.drop({shouldBlockNextClick:!0}),i()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===n().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var i=n();"IDLE"===i.type&&Ce(!1);var r=e.touches[0];if(r&&r.force>=.15){var o=i.actions.shouldRespectForcePress();if("PENDING"!==i.type)return o?i.hasMoved?void e.preventDefault():void t():void e.preventDefault();o&&t()}}},{eventName:nr,fn:t}]}(t),e),o=Oe(window,function(e){var t=e.cancel,i=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===i().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:nr,fn:t}]}(t),e);i.current=function(){n(),o()}}),[c,r,l]),h=oe((function(){var e=r();"PENDING"!==e.type&&Ce(!1);var t=e.actions.fluidLift(e.point);o({type:"DRAGGING",actions:t,hasMoved:!1})}),[r,o]),p=oe((function(e,t){"IDLE"!==r().type&&Ce(!1);var i=setTimeout(h,120);o({type:"PENDING",point:t,actions:e,longPressTimerId:i}),d()}),[d,r,o,h]);Ln((function(){return s(),function(){i.current();var e=r();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),o(cr))}}),[r,s,o]),Ln((function(){return Oe(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}];function xr(e){var t=e.contextId,i=e.store,r=e.registry,o=e.customSensors,a=e.enableDefaultSensors,s=[].concat(a?wr:[],o||[]),l=Object(n.useState)((function(){return function(){var e=null;function t(){e||Ce(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&Ce(!1);var i={abandon:t};return e=i,i},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()}))[0],c=oe((function(e,t){e.isDragging&&!t.isDragging&&l.tryAbandon()}),[l]);Ln((function(){var e=i.getState();return i.subscribe((function(){var t=i.getState();c(e,t),e=t}))}),[l,i,c]),Ln((function(){return l.tryAbandon}),[l.tryAbandon]);var d=oe((function(e){return yr({lockAPI:l,registry:r,store:i,draggableId:e})}),[l,r,i]),h=oe((function(e,n,o){return br({lockAPI:l,registry:r,contextId:t,store:i,draggableId:e,forceSensorStop:n,sourceEvent:o&&o.sourceEvent?o.sourceEvent:null})}),[t,l,r,i]),p=oe((function(e){return function(e,t){var i=gr(e,t);return i?i.getAttribute(Tn.draggableId):null}(t,e)}),[t]),u=oe((function(e){var t=r.draggable.findById(e);return t?t.options:null}),[r.draggable]),f=oe((function(){l.isClaimed()&&(l.tryAbandon(),"IDLE"!==i.getState().phase&&i.dispatch({type:"FLUSH",payload:null}))}),[l,i]),g=oe(l.isClaimed,[l]),m=re((function(){return{canGetLock:d,tryGetLock:h,findClosestDraggableId:p,findOptionsForDraggable:u,tryReleaseLock:f,isLockClaimed:g}}),[d,h,p,u,f,g]);Zn();for(var v=0;v<s.length;v++)s[v](m)}function Or(e){return e.current||Ce(!1),e.current}function Sr(e){var t=e.contextId,i=e.setCallbacks,o=e.sensors,a=e.nonce,l=e.dragHandleUsageInstructions,c=Object(n.useRef)(null);Qn();var d=$n(e),h=oe((function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(d.current)}),[d]),p=function(e){var t=re((function(){return function(e){return"rbd-announcement-"+e}(e)}),[e]),i=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=document.createElement("div");return i.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),s(e.style,Un),qn().appendChild(e),function(){setTimeout((function(){var t=qn();t.contains(e)&&t.removeChild(e),e===i.current&&(i.current=null)}))}}),[t]),oe((function(e){var t=i.current;t&&(t.textContent=e)}),[])}(t),u=function(e){var t=e.contextId,i=e.text,r=Xn("hidden-text",{separator:"-"}),o=re((function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:r}).contextId+"-"+e.uniqueId;var e}),[r,t]);return Object(n.useEffect)((function(){var e=document.createElement("div");return e.id=o,e.textContent=i,e.style.display="none",qn().appendChild(e),function(){var t=qn();t.contains(e)&&t.removeChild(e)}}),[o,i]),o}({contextId:t,text:l}),g=Nn(t,a),m=oe((function(e){Or(c).dispatch(e)}),[]),v=re((function(){return f({publishWhileDragging:pi,updateDroppableScroll:fi,updateDroppableIsEnabled:gi,updateDroppableIsCombineEnabled:mi,collectionStarting:ui},m)}),[m]),y=function(){var e=re(Wn,[]);return Object(n.useEffect)((function(){return function(){requestAnimationFrame(e.clean)}}),[e]),e}(),b=re((function(){return rn(y,v)}),[y,v]),w=re((function(){return En(s({scrollWindow:an,scrollDroppable:b.scrollDroppable},f({move:vi},m)))}),[b.scrollDroppable,m]),x=function(e){var t=Object(n.useRef)({}),i=Object(n.useRef)(null),r=Object(n.useRef)(null),o=Object(n.useRef)(!1),a=oe((function(e,i){var n={id:e,focus:i};return t.current[e]=n,function(){var i=t.current;i[e]!==n&&delete i[e]}}),[]),s=oe((function(t){var i=Hn(e,t);i&&i!==document.activeElement&&i.focus()}),[e]),l=oe((function(e,t){i.current===e&&(i.current=t)}),[]),c=oe((function(){r.current||o.current&&(r.current=requestAnimationFrame((function(){r.current=null;var e=i.current;e&&s(e)})))}),[s]),d=oe((function(e){i.current=null;var t=document.activeElement;t&&t.getAttribute(Tn.draggableId)===e&&(i.current=e)}),[]);return Ln((function(){return o.current=!0,function(){o.current=!1;var e=r.current;e&&cancelAnimationFrame(e)}}),[]),re((function(){return{register:a,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}}),[a,d,c,l])}(t),O=re((function(){return Zi({announce:p,autoScroller:w,dimensionMarshal:b,focusMarshal:x,getResponders:h,styleMarshal:g})}),[p,w,b,x,h,g]);c.current=O;var S=oe((function(){var e=Or(c);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})}),[]),P=oe((function(){var e=Or(c).getState();return e.isDragging||"DROP_ANIMATING"===e.phase}),[]);i(re((function(){return{isDragging:P,tryAbort:S}}),[P,S]));var j=oe((function(e){return on(Or(c).getState(),e)}),[]),I=oe((function(){return Vt(Or(c).getState())}),[]),E=re((function(){return{marshal:b,focus:x,contextId:t,canLift:j,isMovementAllowed:I,dragHandleUsageInstructionsId:u,registry:y}}),[t,b,u,x,j,I,y]);return xr({contextId:t,store:O,registry:y,customSensors:o,enableDefaultSensors:!1!==e.enableDefaultSensors}),Object(n.useEffect)((function(){return S}),[S]),r.a.createElement(Gn.Provider,{value:E},r.a.createElement(C,{context:Fn,store:O},e.children))}var Cr=0;function Pr(e){var t=re((function(){return""+Cr++}),[]),i=e.dragHandleUsageInstructions||Ae;return r.a.createElement(Pe,null,(function(n){return r.a.createElement(Sr,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:i,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)}))}var jr=function(e){return function(t){return e===t}},Ir=jr("scroll"),Er=jr("auto"),Tr=(jr("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),Ar=function(e){var t=window.getComputedStyle(e),i={overflowX:t.overflowX,overflowY:t.overflowY};return Tr(i,Ir)||Tr(i,Er)},Dr=function e(t){return null==t||t===document.body||t===document.documentElement?null:Ar(t)?t:e(t.parentElement)},kr=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Mr=function(e){return{closestScrollable:Dr(e),isFixedOnPage:function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))}(e)}},Lr=function(e){var t=e.ref,i=e.descriptor,n=e.env,r=e.windowScroll,o=e.direction,a=e.isDropDisabled,s=e.isCombineEnabled,l=e.shouldClipSubject,c=n.closestScrollable,d=function(e,t){var i=me(e);if(!t)return i;if(e!==t)return i;var n=i.paddingBox.top-t.scrollTop,r=i.paddingBox.left-t.scrollLeft,o=n+t.scrollHeight,a=r+t.scrollWidth,s=le({top:n,right:a,bottom:o,left:r},i.border);return he({borderBox:s,margin:i.margin,border:i.border,padding:i.padding})}(t,c),h=fe(d,r),p=function(){if(!c)return null;var e=me(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:fe(e,r),scroll:kr(c),scrollSize:t,shouldClipSubject:l}}();return function(e){var t=e.descriptor,i=e.isEnabled,n=e.isCombineEnabled,r=e.isFixedOnPage,o=e.direction,a=e.client,s=e.page,l=e.closest,c=function(){if(!l)return null;var e=l.scrollSize,t=l.client,i=Ji({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:i,diff:{value:Le,displacement:Le}}}}(),d="vertical"===o?ut:ft;return{descriptor:t,isCombineEnabled:n,isFixedOnPage:r,axis:d,isEnabled:i,client:a,page:s,frame:c,subject:Ye({page:s,withPlaceholder:null,axis:d,frame:c})}}({descriptor:i,isEnabled:!a,isCombineEnabled:s,isFixedOnPage:n.isFixedOnPage,direction:o,client:d,page:h,closest:p})},Rr={passive:!1},zr={passive:!0},Nr=function(e){return e.shouldPublishImmediately?Rr:zr};function Br(e){var t=Object(n.useContext)(e);return t||Ce(!1),t}var _r=function(e){return e&&e.env.closestScrollable||null};function Hr(){}var Wr={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},Fr=function(e){var t=e.isAnimatingOpenOnMount,i=e.placeholder,n=e.animate,r=function(e){var t=e.isAnimatingOpenOnMount,i=e.placeholder,n=e.animate;return t||"close"===n?Wr:{height:i.client.borderBox.height,width:i.client.borderBox.width,margin:i.client.margin}}({isAnimatingOpenOnMount:t,placeholder:i,animate:n});return{display:i.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==n?Ti.placeholder:null}},qr=r.a.memo((function(e){var t=Object(n.useRef)(null),i=oe((function(){t.current&&(clearTimeout(t.current),t.current=null)}),[]),o=e.animate,a=e.onTransitionEnd,s=e.onClose,l=e.contextId,c=Object(n.useState)("open"===e.animate),d=c[0],h=c[1];Object(n.useEffect)((function(){return d?"open"!==o?(i(),h(!1),Hr):t.current?Hr:(t.current=setTimeout((function(){t.current=null,h(!1)})),i):Hr}),[o,d,i]);var p=oe((function(e){"height"===e.propertyName&&(a(),"close"===o&&s())}),[o,s,a]),u=Fr({isAnimatingOpenOnMount:d,animate:e.animate,placeholder:e.placeholder});return r.a.createElement(e.placeholder.tagName,{style:u,"data-rbd-placeholder-context-id":l,onTransitionEnd:p,ref:e.innerRef})})),Ur=r.a.createContext(null),Vr=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return o(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(r.a.PureComponent),Yr=5e3,Xr=4500,Gr=function(e,t){return t?Ti.drop(t.duration):e?Ti.snap:Ti.fluid},Zr=function(e,t){return e?t?ji.drop:ji.combining:null};function Jr(e){return"DRAGGING"===e.type?(n=(i=e).dimension.client,r=i.offset,o=i.combineWith,a=i.dropping,s=Boolean(o),l=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(i),d=(c=Boolean(a))?ki(r,s):Di(r),{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:Gr(l,a),transform:d,opacity:Zr(s,c),zIndex:c?Xr:Yr,pointerEvents:"none"}):{transform:Di((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t,i,n,r,o,a,s,l,c,d}function Qr(e){var t=Xn("draggable"),i=e.descriptor,r=e.registry,o=e.getDraggableRef,a=e.canDragInteractiveElements,s=e.shouldRespectForcePress,l=e.isEnabled,c=re((function(){return{canDragInteractiveElements:a,shouldRespectForcePress:s,isEnabled:l}}),[a,l,s]),d=oe((function(e){var t=o();return t||Ce(!1),function(e,t,i){void 0===i&&(i=Le);var n=window.getComputedStyle(t),r=t.getBoundingClientRect(),o=ge(r,n),a=fe(o,i);return{descriptor:e,placeholder:{client:o,tagName:t.tagName.toLowerCase(),display:n.display},displaceBy:{x:o.marginBox.width,y:o.marginBox.height},client:o,page:a}}(i,t,e)}),[i,o]),h=re((function(){return{uniqueId:t,descriptor:i,options:c,getDimension:d}}),[i,d,c,t]),p=Object(n.useRef)(h),u=Object(n.useRef)(!0);Ln((function(){return r.draggable.register(p.current),function(){return r.draggable.unregister(p.current)}}),[r.draggable]),Ln((function(){if(u.current)u.current=!1;else{var e=p.current;p.current=h,r.draggable.update(h,e)}}),[h,r.draggable])}function $r(e,t,i){Jn()}function Kr(e){e.preventDefault()}var eo=function(e,t){return e===t},to=function(e){var t=e.combine,i=e.destination;return i?i.droppableId:t?t.droppableId:null};function io(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var no={mapped:{type:"SECONDARY",offset:Le,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:io(null)}},ro=ee((function(){var e,t,i,n=(e=ye((function(e,t){return{x:e,y:t}})),t=ye((function(e,t,i,n,r){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(r),dropAnimation:r,mode:e,draggingOver:i,combineWith:n,combineTargetFor:null}})),i=ye((function(e,i,n,r,o,a,s){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:o,combineWith:a,mode:i,offset:e,dimension:n,forceShouldAnimate:s,snapshot:t(i,r,o,a,null)}}})),function(n,r){if(n.isDragging){if(n.critical.draggable.id!==r.draggableId)return null;var o=n.current.client.offset,a=n.dimensions.draggables[r.draggableId],s=qt(n.impact),l=(d=n.impact).at&&"COMBINE"===d.at.type?d.at.combine.draggableId:null,c=n.forceShouldAnimate;return i(e(o.x,o.y),n.movementMode,a,r.isClone,s,l,c)}var d;if("DROP_ANIMATING"===n.phase){var h=n.completed;if(h.result.draggableId!==r.draggableId)return null;var p=r.isClone,u=n.dimensions.draggables[r.draggableId],f=h.result,g=f.mode,m=to(f),v=function(e){return e.combine?e.combine.draggableId:null}(f),y={duration:n.dropDuration,curve:Pi,moveTo:n.newHomeClientOffset,opacity:v?ji.drop:null,scale:v?Ii.drop:null};return{mapped:{type:"DRAGGING",offset:n.newHomeClientOffset,dimension:u,dropping:y,draggingOver:m,combineWith:v,mode:g,forceShouldAnimate:null,snapshot:t(g,p,m,v,y)}}}return null}),r=function(){var e=ye((function(e,t){return{x:e,y:t}})),t=ye(io),i=ye((function(e,i,n){return void 0===i&&(i=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:i,shouldAnimateDisplacement:n,snapshot:t(i)}}})),n=function(e){return e?i(Le,e,!0):null},r=function(t,r,o,a){var s=o.displaced.visible[t],l=Boolean(a.inVirtualList&&a.effected[t]),c=rt(o),d=c&&c.draggableId===t?r:null;if(!s){if(!l)return n(d);if(o.displaced.invisible[t])return null;var h=Be(a.displacedBy.point),p=e(h.x,h.y);return i(p,d,!0)}if(l)return n(d);var u=o.displacedBy.point,f=e(u.x,u.y);return i(f,d,s.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:r(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var i=e.completed;return i.result.draggableId===t.draggableId?null:r(t.draggableId,i.result.draggableId,i.impact,i.afterCritical)}return null}}();return function(e,t){return n(e,t)||r(e,t)||no}}),{dropAnimationFinished:Ci},null,{context:Fn,pure:!0,areStatePropsEqual:eo})((function(e){var t=Object(n.useRef)(null),i=oe((function(e){t.current=e}),[]),r=oe((function(){return t.current}),[]),o=Br(Gn),a=o.contextId,s=o.dragHandleUsageInstructionsId,l=o.registry,c=Br(Ur),d=c.type,h=c.droppableId,p=re((function(){return{id:e.draggableId,index:e.index,type:d,droppableId:h}}),[e.draggableId,e.index,d,h]),u=e.children,f=e.draggableId,g=e.isEnabled,m=e.shouldRespectForcePress,v=e.canDragInteractiveElements,y=e.isClone,b=e.mapped,w=e.dropAnimationFinished;$r(),Zn(),y||Qr(re((function(){return{descriptor:p,registry:l,getDraggableRef:r,canDragInteractiveElements:v,shouldRespectForcePress:m,isEnabled:g}}),[p,l,r,v,m,g]));var x=re((function(){return g?{tabIndex:0,role:"button","aria-describedby":s,"data-rbd-drag-handle-draggable-id":f,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:Kr}:null}),[a,s,f,g]),O=oe((function(e){"DRAGGING"===b.type&&b.dropping&&"transform"===e.propertyName&&w()}),[w,b]),S=re((function(){var e=Jr(b),t="DRAGGING"===b.type&&b.dropping?O:null;return{innerRef:i,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":f,style:e,onTransitionEnd:t},dragHandleProps:x}}),[a,x,f,b,O,i]),C=re((function(){return{draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}}),[p.droppableId,p.id,p.index,p.type]);return u(S,b.snapshot,C)}));function oo(e){return Br(Ur).isUsingCloneFor!==e.draggableId||e.isClone?r.a.createElement(ro,e):null}function ao(e){var t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,i=Boolean(e.disableInteractiveElementBlocking),n=Boolean(e.shouldRespectForcePress);return r.a.createElement(oo,s({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:i,shouldRespectForcePress:n}))}var so=function(e,t){return e===t.droppable.type},lo=function(e,t){return t.draggables[e.draggable.id]},co={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||Ce(!1),document.body}},ho=ee((function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=s({},e,{shouldAnimatePlaceholder:!1}),i=ye((function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}})),n=ye((function(n,r,o,a,s,l){var c=s.descriptor.id;if(s.descriptor.droppableId===n){var d=l?{render:l,dragging:i(s.descriptor)}:null,h={isDraggingOver:o,draggingOverWith:o?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!1,snapshot:h,useClone:d}}if(!r)return t;if(!a)return e;var p={isDraggingOver:o,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}}));return function(i,r){var o=r.droppableId,a=r.type,s=!r.isDropDisabled,l=r.renderClone;if(i.isDragging){var c=i.critical;if(!so(a,c))return t;var d=lo(c,i.dimensions),h=qt(i.impact)===o;return n(o,s,h,h,d,l)}if("DROP_ANIMATING"===i.phase){var p=i.completed;if(!so(a,p.critical))return t;var u=lo(p.critical,i.dimensions);return n(o,s,to(p.result)===o,qt(p.impact)===o,u,l)}if("IDLE"===i.phase&&i.completed&&!i.shouldFlush){var f=i.completed;if(!so(a,f.critical))return t;var g=qt(f.impact)===o,m=Boolean(f.impact.at&&"COMBINE"===f.impact.at.type),v=f.critical.droppable.id===o;return g?m?e:t:v?e:t}return t}}),{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:Fn,pure:!0,areStatePropsEqual:eo})((function(e){var t=Object(n.useContext)(Gn);t||Ce(!1);var i=t.contextId,o=t.isMovementAllowed,a=Object(n.useRef)(null),s=Object(n.useRef)(null),l=e.children,c=e.droppableId,d=e.type,h=e.mode,p=e.direction,u=e.ignoreContainerClipping,f=e.isDropDisabled,g=e.isCombineEnabled,m=e.snapshot,v=e.useClone,y=e.updateViewportMaxScroll,b=e.getContainerForClone,w=oe((function(){return a.current}),[]),x=oe((function(e){a.current=e}),[]),O=(oe((function(){return s.current}),[]),oe((function(e){s.current=e}),[]));Jn();var S=oe((function(){o()&&y({maxScroll:$i()})}),[o,y]);!function(e){var t=Object(n.useRef)(null),i=Br(Gn),r=Xn("droppable"),o=i.registry,a=i.marshal,s=$n(e),l=re((function(){return{id:e.droppableId,type:e.type,mode:e.mode}}),[e.droppableId,e.mode,e.type]),c=Object(n.useRef)(l),d=re((function(){return ye((function(e,i){t.current||Ce(!1);var n={x:e,y:i};a.updateDroppableScroll(l.id,n)}))}),[l.id,a]),h=oe((function(){var e=t.current;return e&&e.env.closestScrollable?kr(e.env.closestScrollable):Le}),[]),p=oe((function(){var e=h();d(e.x,e.y)}),[h,d]),u=re((function(){return be(p)}),[p]),f=oe((function(){var e=t.current,i=_r(e);e&&i||Ce(!1),e.scrollOptions.shouldPublishImmediately?p():u()}),[u,p]),g=oe((function(e,n){t.current&&Ce(!1);var r=s.current,o=r.getDroppableRef();o||Ce(!1);var a=Mr(o),c={ref:o,descriptor:l,env:a,scrollOptions:n};t.current=c;var d=Lr({ref:o,descriptor:l,env:a,windowScroll:e,direction:r.direction,isDropDisabled:r.isDropDisabled,isCombineEnabled:r.isCombineEnabled,shouldClipSubject:!r.ignoreContainerClipping}),h=a.closestScrollable;return h&&(h.setAttribute(kn.contextId,i.contextId),h.addEventListener("scroll",f,Nr(c.scrollOptions))),d}),[i.contextId,l,f,s]),m=oe((function(){var e=t.current,i=_r(e);return e&&i||Ce(!1),kr(i)}),[]),v=oe((function(){var e=t.current;e||Ce(!1);var i=_r(e);t.current=null,i&&(u.cancel(),i.removeAttribute(kn.contextId),i.removeEventListener("scroll",f,Nr(e.scrollOptions)))}),[f,u]),y=oe((function(e){var i=t.current;i||Ce(!1);var n=_r(i);n||Ce(!1),n.scrollTop+=e.y,n.scrollLeft+=e.x}),[]),b=re((function(){return{getDimensionAndWatchScroll:g,getScrollWhileDragging:m,dragStopped:v,scroll:y}}),[v,g,m,y]),w=re((function(){return{uniqueId:r,descriptor:l,callbacks:b}}),[b,l,r]);Ln((function(){return c.current=w.descriptor,o.droppable.register(w),function(){t.current&&v(),o.droppable.unregister(w)}}),[b,l,v,w,a,o.droppable]),Ln((function(){t.current&&a.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)}),[e.isDropDisabled,a]),Ln((function(){t.current&&a.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,a])}({droppableId:c,type:d,mode:h,direction:p,isDropDisabled:f,isCombineEnabled:g,ignoreContainerClipping:u,getDroppableRef:w});var C=r.a.createElement(Vr,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(function(e){var t=e.onClose,n=e.data,o=e.animate;return r.a.createElement(qr,{placeholder:n,onClose:t,innerRef:O,animate:o,contextId:i,onTransitionEnd:S})})),P=re((function(){return{innerRef:x,placeholder:C,droppableProps:{"data-rbd-droppable-id":c,"data-rbd-droppable-context-id":i}}}),[i,c,C,x]),j=v?v.dragging.draggableId:null,I=re((function(){return{droppableId:c,type:d,isUsingCloneFor:j}}),[c,j,d]);return r.a.createElement(Ur.Provider,{value:I},l(P,m),function(){if(!v)return null;var e=v.dragging,t=v.render,i=r.a.createElement(oo,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(i,n){return t(i,n,e)}));return ie.a.createPortal(i,b())}())}));function po(){return(po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}ho.defaultProps=co;var uo=function(e){var t=e.children,i=e.index,n=e.renderCard,o=e.disableCardDrag;return r.a.createElement(ao,{draggableId:String(t.id),index:i,isDragDisabled:o},(function(e,t){var i=t.isDragging;return r.a.createElement("div",po({ref:e.innerRef},e.draggableProps,e.dragHandleProps),r.a.createElement("div",{style:{display:"inline-block",whiteSpace:"normal"}},n(i)))}))};function fo(){return(fo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function go(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var mo=function(e){return function(t){var i=t.children,n=go(t,["children"]);return r.a.createElement(ho,n,(function(t){return r.a.createElement(e,fo({ref:t.innerRef},t.droppableProps),i,t.placeholder)}))}};function vo(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function yo(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(i),!0).forEach((function(t){bo(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vo(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function bo(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function wo(e){return function(e){if(Array.isArray(e))return xo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return xo(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?xo(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xo(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Oo(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(void 0,n.concat(i))}}function So(e,t,i){var n=wo(e);return n.splice(i,0,t),n}function Co(e,t){return e.reduce((function(e,i,n){return n===t?e:[].concat(wo(e),[i])}),[])}function Po(e,t,i){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return t.reduce((function(e,t){return t(e)}),e)}}(Oo(Co,t),Oo(So,e[t],i))(e)}function jo(e){return e}function Io(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jo;return function(i){if(t(e))return i(e)}}function Eo(e){return function(t){return e.map((function(e){return t.when(e)?t.for(e):e}))}}var To=function(e){var t=e.onConfirm,i=e.onCancel,o=Object(n.useRef)(),a=Object(n.useRef)();return r.a.createElement("div",{className:"react-kanban-card-adder-form"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),Io(o.current.value)((function(e){t({title:e,description:a.current.value})}))}},r.a.createElement("input",{className:"react-kanban-card-adder-form__title",name:"title",autoFocus:!0,defaultValue:"Title",ref:o}),r.a.createElement("input",{className:"react-kanban-card-adder-form__description",name:"description",defaultValue:"Description",ref:a}),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"5px"}},r.a.createElement("button",{className:"react-kanban-card-adder-form__button",type:"submit"},"Add"),r.a.createElement("button",{className:"react-kanban-card-adder-form__button",type:"button",onClick:i},"Cancel"))))};function Ao(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Do(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Do(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Do(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function ko(e){var t=e.column,i=e.onConfirm,o=Ao(Object(n.useState)(!1),2),a=o[0],s=o[1];return r.a.createElement(r.a.Fragment,null,a?r.a.createElement(To,{onConfirm:function(e){i(t,e),s(!1)},onCancel:function(){return s(!1)}}):r.a.createElement("button",{className:"react-kanban-card-adder-button",onClick:function(){return s(!a)}},"+"))}function Mo(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Lo(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Mo(Object(i),!0).forEach((function(t){Ro(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Mo(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Ro(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function zo(){return(zo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var No=mo(r.a.forwardRef((function(e,t){return r.a.createElement("div",zo({ref:t,style:{minHeight:"inherit",height:"inherit"}},e))}))),Bo=function(e){var t=e.children,i=e.index,n=e.renderCard,o=e.renderColumnHeader,a=e.disableColumnDrag,s=e.disableCardDrag,l=e.onCardNew,c=e.allowAddCard;return r.a.createElement(ao,{draggableId:"column-draggable-".concat(t.id),index:i,isDragDisabled:a},(function(e){var i,a,d=(i=e.draggableProps,a="style",Object.keys(i).reduce((function(e,t){return t===a?e:yo(yo({},e),{},bo({},t,i[t]))}),{}));return r.a.createElement("div",zo({ref:e.innerRef},d,{style:Lo({height:"100%",minHeight:"28px",display:"inline-block",verticalAlign:"top"},e.draggableProps.style),className:"react-kanban-column"}),r.a.createElement("div",e.dragHandleProps,o(t)),c&&r.a.createElement(ko,{column:t,onConfirm:l}),r.a.createElement(No,{droppableId:String(t.id)},t.cards.length?t.cards.map((function(e,i){return r.a.createElement(uo,{key:e.id,index:i,renderCard:function(i){return n(t,e,i)},disableCardDrag:s},e)})):r.a.createElement("div",{className:"react-kanban-card-skeleton"})))}))},_o=function(e){var t=e.onConfirm,i=e.onCancel,n=r.a.createRef();return r.a.createElement("div",{className:"react-kanban-column",style:{minWidth:"230px"}},r.a.createElement("form",{style:{display:"flex",justifyContent:"space-between"},onSubmit:function(e){e.preventDefault(),Io(n.current.value)(t)}},r.a.createElement("input",{type:"text",ref:n,autoFocus:!0}),r.a.createElement("button",{type:"submit"},"Add"),r.a.createElement("button",{type:"button",onClick:i},"Cancel")))};function Ho(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wo(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Wo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var Fo=function(e){var t=e.onConfirm,i=Ho(Object(n.useState)(!1),2),o=i[0],a=i[1];return o?r.a.createElement(_o,{onConfirm:function(e){t(e),a(!1)},onCancel:function(){return a(!1)}}):r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:"230px"},className:"react-kanban-column-adder-button",onClick:function(){return a(!0)},role:"button"},"\u2795")};function qo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Uo(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Uo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Vo(e){var t=e.allowRenameColumn,i=e.onClick,n=e.children;return t?r.a.createElement("span",{style:{cursor:"pointer"},onClick:i},n):r.a.createElement("span",null,n)}var Yo=function(e){var t=e.children,i=e.allowRemoveColumn,o=e.onColumnRemove,a=e.allowRenameColumn,s=e.onColumnRename,l=function(e){var t=qo(Object(n.useState)(e),2),i=t[0],r=t[1];return[i,function(){r(!i)}]}(!1),c=qo(l,2),d=c[0],h=c[1],p=qo(Object(n.useState)(""),2),u=p[0],f=p[1];function g(){f(t.title),h()}return r.a.createElement("div",{className:"react-kanban-column-header"},d?r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s(t,u),h()}},r.a.createElement("span",null,r.a.createElement("input",{type:"text",value:u,onChange:function(e){var t=e.target.value;return f(t)},autoFocus:!0})),r.a.createElement("span",null,r.a.createElement("button",{className:"react-kanban-column-header__button",type:"submit"},"Rename"),r.a.createElement("button",{className:"react-kanban-column-header__button",type:"button",onClick:g},"Cancel"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Vo,{allowRenameColumn:a,onClick:g},t.title),i&&r.a.createElement("span",{onClick:function(){return o(t)}},"\xd7")))},Xo=function(e){var t=e.children,i=e.dragging,n=e.allowRemoveCard,o=e.onCardRemove;return r.a.createElement("div",{className:"react-kanban-card ".concat(i?"react-kanban-card--dragging":"")},r.a.createElement("span",null,r.a.createElement("div",{className:"react-kanban-card__title"},r.a.createElement("span",null,t.title),n&&r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return o(t)}},"\xd7"))),r.a.createElement("div",{className:"react-kanban-card__description"},t.description))};function Go(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Zo(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(i),!0).forEach((function(t){Jo(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Go(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Jo(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Qo(e){return"BOARD"===e}function $o(e,t){return e.columns.find((function(e){return e.id===t.fromColumnId})).cards[t.fromPosition]}function Ko(e,t){return e.columns.find((function(e){var i=e.id;return String(i)===t}))}function ea(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ta(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(i),!0).forEach((function(t){ia(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ea(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ia(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function na(e,t){return ta(ta({},e),{},{cards:t(e.cards)})}function ra(e,t,i){var n=t.fromPosition,r=i.toPosition;return ta(ta({},e),{},{columns:Po(e.columns,n,r)})}function oa(e,t,i){var n=t.fromPosition,r=t.fromColumnId,o=i.toPosition,a=i.toColumnId,s=e.columns.find((function(e){return e.id===r})),l=e.columns.find((function(e){return e.id===a})),c=function(t){return ta(ta({},e),{},{columns:e.columns.map(t)})},d=na.bind(null,s),h=na.bind(null,l);if(s.id===l.id){var p=d((function(e){return Po(e,n,o)}));return c((function(e){return e.id===s.id?p:e}))}var u=d((function(e){return Co(e,n)})),f=h((function(e){return So(e,s.cards[n],o)}));return c((function(e){return e.id===s.id?u:e.id===l.id?f:e}))}function aa(e,t){return ta(ta({},e),{},{columns:So(e.columns,t,e.columns.length)})}function sa(e,t){return ta(ta({},e),{},{columns:e.columns.filter((function(e){return e.id!==t.id}))})}function la(e,t,i){var n=Eo(e.columns)({when:function(e){return e.id===t.id},for:function(e){return ta(ta({},e),i)}});return ta(ta({},e),{},{columns:n})}function ca(e,t,i){var n=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).on,r=e.columns.find((function(e){return e.id===t.id})),o=So(r.cards,i,"top"===n?0:r.cards.length),a=Eo(e.columns)({when:function(e){var i=e.id;return t.id===i},for:function(e){return ta(ta({},e),{},{cards:o})}});return ta(ta({},e),{},{columns:a})}function da(e,t,i){var n=e.columns.find((function(e){return e.id===t.id})),r=n.cards.filter((function(e){var t=e.id;return i.id!==t})),o=ta(ta({},n),{},{cards:r}),a=e.columns.map((function(e){return t.id===e.id?o:e}));return ta(ta({},e),{},{columns:a})}function ha(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function pa(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ha(Object(i),!0).forEach((function(t){ua(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ha(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ua(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function fa(e,t,i,n,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function ga(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var o=e.apply(t,i);function a(e){fa(o,n,r,a,s,"next",e)}function s(e){fa(o,n,r,a,s,"throw",e)}a(void 0)}))}}function ma(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return va(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?va(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function va(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function ya(){return(ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var ba=mo(r.a.forwardRef((function(e,t){return r.a.createElement("div",ya({ref:t,style:{whiteSpace:"nowrap"}},e))})));function wa(e){var t=e.initialBoard,i=e.onCardDragEnd,o=e.onColumnDragEnd,s=e.allowAddColumn,l=e.renderColumnAdder,c=e.onNewColumnConfirm,d=e.onColumnRemove,h=e.renderColumnHeader,p=e.allowRemoveColumn,u=e.allowRenameColumn,f=e.onColumnRename,g=e.onCardNew,m=e.renderCard,v=e.allowRemoveCard,y=e.onCardRemove,b=e.onColumnNew,w=e.disableCardDrag,x=e.disableColumnDrag,O=e.allowAddCard,S=e.onNewCardConfirm,C=ma(Object(n.useState)(t),2),P=C[0],j=C[1],I=Oo(T,{moveCallback:oa,notifyCallback:i}),E=Oo(T,{moveCallback:ra,notifyCallback:o});function T(e,t){var i=e.source,n=e.destination,r=e.subject,o=t.moveCallback,a=t.notifyCallback,s=o(P,i,n);Io(a)((function(e){return e(s,r,i,n)})),j(s)}function A(e){return D.apply(this,arguments)}function D(){return(D=ga(a.mark((function e(t){var i,n;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=4;break}e.t0=t,e.next=7;break;case 4:return e.next=6,c(t);case 6:e.t0=e.sent;case 7:i=e.t0,n=aa(P,i),b(n,i),j(n);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){var t=sa(P,e);d(t,e),j(t)}function M(e,t){var i=la(P,e,{title:t});f(i,pa(pa({},e),{},{title:t})),j(i)}function L(e,t){var i=ca(P,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});g(i,i.columns.find((function(t){return t.id===e.id})),t),j(i)}function R(){return(R=ga(a.mark((function e(t,i){var n,r,o=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=3,S(i);case 3:r=e.sent,L(t,r,n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t){var i=da(P,e,t);y(i,i.columns.find((function(t){return t.id===e.id})),t),j(i)}return r.a.createElement(Oa,ya({onCardDragEnd:I,onColumnDragEnd:E,renderColumnAdder:function(){return s?l?l({addColumn:A}):c?r.a.createElement(Fo,{onConfirm:function(e){return A({title:e,cards:[]})}}):null:null}},h&&{renderColumnHeader:function(e){return h(e,{removeColumn:k.bind(null,e),renameColumn:M.bind(null,e),addCard:L.bind(null,e)})}},{renderCard:function(e,t,i){return m?m(t,{removeCard:z.bind(null,e,t),dragging:i}):r.a.createElement(Xo,{dragging:i,allowRemoveCard:v,onCardRemove:function(t){return z(e,t)}},t)},allowRemoveColumn:p,onColumnRemove:k,allowRenameColumn:u,onColumnRename:M,disableColumnDrag:x,disableCardDrag:w,onCardNew:function(e,t){return function(e,t){return R.apply(this,arguments)}(e,t,O)},allowAddCard:O&&S}),P)}function xa(e){var t=e.children,i=e.onCardDragEnd,n=e.onColumnDragEnd,o=e.allowAddColumn,a=e.renderColumnAdder,s=e.onNewColumnConfirm,l=e.onColumnRemove,c=e.renderColumnHeader,d=e.allowRemoveColumn,h=e.allowRenameColumn,p=e.onColumnRename,u=e.renderCard,f=e.allowRemoveCard,g=e.onCardRemove,m=e.disableCardDrag,v=e.disableColumnDrag,y=Oo(w,{notifyCallback:i}),b=Oo(w,{notifyCallback:n});function w(e,t){var i=e.source,n=e.destination,r=e.subject;Io(t.notifyCallback)((function(e){return e(r,i,n)}))}return r.a.createElement(Oa,ya({onCardDragEnd:y,onColumnDragEnd:b,renderColumnAdder:function(){return o?a?a():s?r.a.createElement(Fo,{onConfirm:function(e){return s({title:e,cards:[]})}}):null:null}},c&&{renderColumnHeader:c},{renderCard:function(e,t,i){return u?u(t,{dragging:i}):r.a.createElement(Xo,{dragging:i,allowRemoveCard:f,onCardRemove:g},t)},allowRemoveColumn:d,onColumnRemove:l,allowRenameColumn:h,onColumnRename:p,disableColumnDrag:v,disableCardDrag:m}),t)}function Oa(e){var t=e.children,i=e.renderCard,n=e.disableColumnDrag,o=e.disableCardDrag,a=e.renderColumnHeader,s=e.renderColumnAdder,l=e.allowRemoveColumn,c=e.onColumnRemove,d=e.allowRenameColumn,h=e.onColumnRename,p=e.onColumnDragEnd,u=e.onCardDragEnd,f=e.onCardNew,g=e.allowAddCard;return r.a.createElement(Pr,{onDragEnd:function(e){var i=function(e,t){if(null===e.destination)return{};var i={fromPosition:e.source.index},n={toPosition:e.destination.index};return Qo(e.type)?{source:i,destination:n}:{source:Zo(Zo({},i),{},{fromColumnId:Ko(t,e.source.droppableId).id}),destination:Zo(Zo({},n),{},{toColumnId:Ko(t,e.destination.droppableId).id})}}(e,t);i.source&&(Qo(e.type)?function(e){return e.source.fromPosition!==e.destination.toPosition}(i)&&p(pa(pa({},i),{},{subject:t.columns[i.source.fromPosition]})):function(e){return!(e.source.fromPosition===e.destination.toPosition&&e.source.fromColumnId===e.destination.toColumnId)}(i)&&u(pa(pa({},i),{},{subject:$o(t,i.source)})))}},r.a.createElement("div",{style:{overflowY:"hidden",display:"flex",alignItems:"flex-start"},className:"react-kanban-board"},r.a.createElement(ba,{droppableId:"board-droppable",direction:"horizontal",type:"BOARD"},t.columns.map((function(e,t){return r.a.createElement(Bo,{key:e.id,index:t,renderCard:i,renderColumnHeader:function(e){return a?a(e):r.a.createElement(Yo,{allowRemoveColumn:l,onColumnRemove:c,allowRenameColumn:d,onColumnRename:h},e)},disableColumnDrag:n,disableCardDrag:o,onCardNew:f,allowAddCard:g},e)}))),s()))}var Sa=function(e){return e.initialBoard?r.a.createElement(wa,e):r.a.createElement(xa,e)}}]))},,function(e,t,i){"use strict";i(21);var n=i(3),r=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;r=o("react.element"),t.Fragment=o("react.fragment")}var a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,i){var n,o={},c=null,d=null;for(n in void 0!==i&&(c=""+i),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,n)&&!l.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:r,type:e,key:c,ref:d,props:o,_owner:a.current}}t.jsx=c,t.jsxs=c},function(e,t,i){"use strict";var n=i(21),r=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,l=60112;t.Suspense=60113;var c=60115,d=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;r=h("react.element"),o=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),l=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),d=h("react.lazy")}var p="function"===typeof Symbol&&Symbol.iterator;function u(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function m(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||f}function v(){}function y(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||f}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(u(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=m.prototype;var b=y.prototype=new v;b.constructor=y,n(b,m.prototype),b.isPureReactComponent=!0;var w={current:null},x=Object.prototype.hasOwnProperty,O={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,i){var n,o={},a=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,n)&&!O.hasOwnProperty(n)&&(o[n]=t[n]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];o.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===o[n]&&(o[n]=l[n]);return{$$typeof:r,type:e,key:a,ref:s,props:o,_owner:w.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var P=/\/+/g;function j(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,n,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case o:l=!0}}if(l)return a=a(l=e),e=""===n?"."+j(l,0):n,Array.isArray(a)?(i="",null!=e&&(i=e.replace(P,"$&/")+"/"),I(a,t,i,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(P,"$&/")+"/")+e)),t.push(a)),1;if(l=0,n=""===n?".":n+":",Array.isArray(e))for(var c=0;c<e.length;c++){var d=n+j(s=e[c],c);l+=I(s,t,i,d,a)}else if("function"===typeof(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e)))for(e=d.call(e),c=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,d=n+j(s,c++),a);else if("object"===s)throw t=""+e,Error(u(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function E(e,t,i){if(null==e)return e;var n=[],r=0;return I(e,n,"","",(function(e){return t.call(i,e,r++)})),n}function T(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function D(){var e=A.current;if(null===e)throw Error(u(321));return e}var k={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:E,forEach:function(e,t,i){E(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return E(e,(function(){t++})),t},toArray:function(e){return E(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error(u(143));return e}},t.Component=m,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error(u(267,e));var o=n({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=w.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)x.call(t,d)&&!O.hasOwnProperty(d)&&(o[d]=void 0===t[d]&&void 0!==c?c[d]:t[d])}var d=arguments.length-2;if(1===d)o.children=i;else if(1<d){c=Array(d);for(var h=0;h<d;h++)c[h]=arguments[h+2];o.children=c}return{$$typeof:r,type:e.type,key:a,ref:s,props:o,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,i){return D().useImperativeHandle(e,t,i)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,i){return D().useReducer(e,t,i)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="17.0.1"},function(e,t,i){"use strict";var n=i(3),r=i(21),o=i(33);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n)throw Error(a(227));var s=new Set,l={};function c(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(l[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u=Object.prototype.hasOwnProperty,f={},g={};function m(e,t,i,n,r,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function w(e,t,i,n){var r=v.hasOwnProperty(t)?v[t]:null;(null!==r?0===r.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,i,n){if(null===t||"undefined"===typeof t||function(e,t,i,n){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,r,n)&&(i=null),n||null===r?function(e){return!!u.call(g,e)||!u.call(f,e)&&(p.test(e)?g[e]=!0:(f[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):r.mustUseProperty?e[r.propertyName]=null===i?3!==r.type&&"":i:(t=r.attributeName,n=r.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(r=r.type)||4===r&&!0===i?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=60103,S=60106,C=60107,P=60108,j=60114,I=60109,E=60110,T=60112,A=60113,D=60120,k=60115,M=60116,L=60121,R=60128,z=60129,N=60130,B=60131;if("function"===typeof Symbol&&Symbol.for){var _=Symbol.for;O=_("react.element"),S=_("react.portal"),C=_("react.fragment"),P=_("react.strict_mode"),j=_("react.profiler"),I=_("react.provider"),E=_("react.context"),T=_("react.forward_ref"),A=_("react.suspense"),D=_("react.suspense_list"),k=_("react.memo"),M=_("react.lazy"),L=_("react.block"),_("react.scope"),R=_("react.opaque.id"),z=_("react.debug_trace_mode"),N=_("react.offscreen"),B=_("react.legacy_hidden")}var H,W="function"===typeof Symbol&&Symbol.iterator;function F(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=W&&e[W]||e["@@iterator"])?e:null}function q(e){if(void 0===H)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);H=t&&t[1]||""}return"\n"+H+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var n=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){n=l}e.call(t.prototype)}else{try{throw Error()}catch(l){n=l}e()}}catch(l){if(l&&n&&"string"===typeof l.stack){for(var r=l.stack.split("\n"),o=n.stack.split("\n"),a=r.length-1,s=o.length-1;1<=a&&0<=s&&r[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||r[a]!==o[s])return"\n"+r[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?q(e):""}function Y(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 22:return e=V(e.type._render,!1);case 1:return e=V(e.type,!0);default:return""}}function X(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case S:return"Portal";case j:return"Profiler";case P:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case k:return X(e.type);case L:return X(e._render);case M:t=e._payload,e=e._init;try{return X(e(t))}catch(i){}}return null}function G(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=Z(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var r=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=Z(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var i=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function ee(e,t){var i=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;i=G(null!=t.value?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ie(e,t){te(e,t);var i=G(t.value),n=t.type;if(null!=i)"number"===n?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?re(e,t.type,i):t.hasOwnProperty("defaultValue")&&re(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ne(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function re(e,t,i){"number"===t&&$(e.ownerDocument)===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}function oe(e,t){return e=r({children:void 0},t),(t=function(e){var t="";return n.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=""+G(i),t=null,r=0;r<e.length;r++){if(e[r].value===i)return e[r].selected=!0,void(n&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(a(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(a(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:G(i)}}function ce(e,t){var i=G(t.value),n=G(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=n&&(e.defaultValue=""+n)}function de(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",pe="http://www.w3.org/2000/svg";function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ge,me,ve=(me=function(e,t){if(e.namespaceURI!==pe||"innerHTML"in e)e.innerHTML=t;else{for((ge=ge||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ge.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,i,n){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ye(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function xe(e,t,i){return null==t||"boolean"===typeof t||""===t?"":i||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function Oe(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var n=0===i.indexOf("--"),r=xe(i,t[i],n);"float"===i&&(i="cssFloat"),n?e.setProperty(i,r):e[i]=r}}Object.keys(be).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var Se=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ce(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function Pe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,Ee=null,Te=null;function Ae(e){if(e=er(e)){if("function"!==typeof Ie)throw Error(a(280));var t=e.stateNode;t&&(t=ir(t),Ie(e.stateNode,e.type,t))}}function De(e){Ee?Te?Te.push(e):Te=[e]:Ee=e}function ke(){if(Ee){var e=Ee,t=Te;if(Te=Ee=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Me(e,t){return e(t)}function Le(e,t,i,n,r){return e(t,i,n,r)}function Re(){}var ze=Me,Ne=!1,Be=!1;function _e(){null===Ee&&null===Te||(Re(),ke())}function He(e,t){var i=e.stateNode;if(null===i)return null;var n=ir(i);if(null===n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(a(231,t,typeof i));return i}var We=!1;if(h)try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){We=!0}}),window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,Fe)}catch(me){We=!1}function qe(e,t,i,n,r,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(d){this.onError(d)}}var Ue=!1,Ve=null,Ye=!1,Xe=null,Ge={onError:function(e){Ue=!0,Ve=e}};function Ze(e,t,i,n,r,o,a,s,l){Ue=!1,Ve=null,qe.apply(Ge,arguments)}function Je(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Je(e)!==e)throw Error(a(188))}function Ke(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(a(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(n=r.return)){i=n;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===i)return $e(r),e;if(o===n)return $e(r),t;o=o.sibling}throw Error(a(188))}if(i.return!==n.return)i=r,n=o;else{for(var s=!1,l=r.child;l;){if(l===i){s=!0,i=r,n=o;break}if(l===n){s=!0,n=r,i=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===i){s=!0,i=o,n=r;break}if(l===n){s=!0,n=o,i=r;break}l=l.sibling}if(!s)throw Error(a(189))}}if(i.alternate!==n)throw Error(a(190))}if(3!==i.tag)throw Error(a(188));return i.stateNode.current===i?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var i=e.alternate;null!==t;){if(t===e||t===i)return!0;t=t.return}return!1}var tt,it,nt,rt,ot=!1,at=[],st=null,lt=null,ct=null,dt=new Map,ht=new Map,pt=[],ut="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,i,n,r){return{blockedOn:e,domEventName:t,eventSystemFlags:16|i,nativeEvent:r,targetContainers:[n]}}function gt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function mt(e,t,i,n,r,o){return null===e||e.nativeEvent!==o?(e=ft(t,i,n,r,o),null!==t&&(null!==(t=er(t))&&it(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function vt(e){var t=Kn(e.target);if(null!==t){var i=Je(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=Qe(i)))return e.blockedOn=t,void rt(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){nt(i)}))}))}else if(3===t&&i.stateNode.hydrate)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i)return null!==(t=er(i))&&it(t),e.blockedOn=i,!1;t.shift()}return!0}function bt(e,t,i){yt(e)&&i.delete(t)}function wt(){for(ot=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=er(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var i=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i){e.blockedOn=i;break}t.shift()}null===e.blockedOn&&at.shift()}null!==st&&yt(st)&&(st=null),null!==lt&&yt(lt)&&(lt=null),null!==ct&&yt(ct)&&(ct=null),dt.forEach(bt),ht.forEach(bt)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,wt)))}function Ot(e){function t(t){return xt(t,e)}if(0<at.length){xt(at[0],e);for(var i=1;i<at.length;i++){var n=at[i];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==st&&xt(st,e),null!==lt&&xt(lt,e),null!==ct&&xt(ct,e),dt.forEach(t),ht.forEach(t),i=0;i<pt.length;i++)(n=pt[i]).blockedOn===e&&(n.blockedOn=null);for(;0<pt.length&&null===(i=pt[0]).blockedOn;)vt(i),null===i.blockedOn&&pt.shift()}function St(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Ct={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},Pt={},jt={};function It(e){if(Pt[e])return Pt[e];if(!Ct[e])return e;var t,i=Ct[e];for(t in i)if(i.hasOwnProperty(t)&&t in jt)return Pt[e]=i[t];return e}h&&(jt=document.createElement("div").style,"AnimationEvent"in window||(delete Ct.animationend.animation,delete Ct.animationiteration.animation,delete Ct.animationstart.animation),"TransitionEvent"in window||delete Ct.transitionend.transition);var Et=It("animationend"),Tt=It("animationiteration"),At=It("animationstart"),Dt=It("transitionend"),kt=new Map,Mt=new Map,Lt=["abort","abort",Et,"animationEnd",Tt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Dt,"transitionEnd","waiting","waiting"];function Rt(e,t){for(var i=0;i<e.length;i+=2){var n=e[i],r=e[i+1];r="on"+(r[0].toUpperCase()+r.slice(1)),Mt.set(n,t),kt.set(n,r),c(r,[n])}}(0,o.unstable_now)();var zt=8;function Nt(e){if(0!==(1&e))return zt=15,1;if(0!==(2&e))return zt=14,2;if(0!==(4&e))return zt=13,4;var t=24&e;return 0!==t?(zt=12,t):0!==(32&e)?(zt=11,32):0!==(t=192&e)?(zt=10,t):0!==(256&e)?(zt=9,256):0!==(t=3584&e)?(zt=8,t):0!==(4096&e)?(zt=7,4096):0!==(t=4186112&e)?(zt=6,t):0!==(t=62914560&e)?(zt=5,t):67108864&e?(zt=4,67108864):0!==(134217728&e)?(zt=3,134217728):0!==(t=805306368&e)?(zt=2,t):0!==(1073741824&e)?(zt=1,1073741824):(zt=8,e)}function Bt(e,t){var i=e.pendingLanes;if(0===i)return zt=0;var n=0,r=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)n=o,r=zt=15;else if(0!==(o=134217727&i)){var l=o&~a;0!==l?(n=Nt(l),r=zt):0!==(s&=o)&&(n=Nt(s),r=zt)}else 0!==(o=i&~a)?(n=Nt(o),r=zt):0!==s&&(n=Nt(s),r=zt);if(0===n)return 0;if(n=i&((0>(n=31-Ut(n))?0:1<<n)<<1)-1,0!==t&&t!==n&&0===(t&a)){if(Nt(t),r<=zt)return t;zt=r}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)r=1<<(i=31-Ut(t)),n|=e[i],t&=~r;return n}function _t(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ht(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Wt(24&~t))?Ht(10,t):e;case 10:return 0===(e=Wt(192&~t))?Ht(8,t):e;case 8:return 0===(e=Wt(3584&~t))&&(0===(e=Wt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Wt(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function Wt(e){return e&-e}function Ft(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function qt(e,t,i){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,(e=e.eventTimes)[t=31-Ut(t)]=i}var Ut=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Vt(e)/Yt|0)|0},Vt=Math.log,Yt=Math.LN2;var Xt=o.unstable_UserBlockingPriority,Gt=o.unstable_runWithPriority,Zt=!0;function Jt(e,t,i,n){Ne||Re();var r=$t,o=Ne;Ne=!0;try{Le(r,e,t,i,n)}finally{(Ne=o)||_e()}}function Qt(e,t,i,n){Gt(Xt,$t.bind(null,e,t,i,n))}function $t(e,t,i,n){var r;if(Zt)if((r=0===(4&t))&&0<at.length&&-1<ut.indexOf(e))e=ft(null,e,t,i,n),at.push(e);else{var o=Kt(e,t,i,n);if(null===o)r&&gt(e,n);else{if(r){if(-1<ut.indexOf(e))return e=ft(o,e,t,i,n),void at.push(e);if(function(e,t,i,n,r){switch(t){case"focusin":return st=mt(st,e,t,i,n,r),!0;case"dragenter":return lt=mt(lt,e,t,i,n,r),!0;case"mouseover":return ct=mt(ct,e,t,i,n,r),!0;case"pointerover":var o=r.pointerId;return dt.set(o,mt(dt.get(o)||null,e,t,i,n,r)),!0;case"gotpointercapture":return o=r.pointerId,ht.set(o,mt(ht.get(o)||null,e,t,i,n,r)),!0}return!1}(o,e,t,i,n))return;gt(e,n)}kn(e,t,n,null,i)}}}function Kt(e,t,i,n){var r=je(n);if(null!==(r=Kn(r))){var o=Je(r);if(null===o)r=null;else{var a=o.tag;if(13===a){if(null!==(r=Qe(o)))return r;r=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return kn(e,t,n,r,i),null}var ei=null,ti=null,ii=null;function ni(){if(ii)return ii;var e,t,i=ti,n=i.length,r="value"in ei?ei.value:ei.textContent,o=r.length;for(e=0;e<n&&i[e]===r[e];e++);var a=n-e;for(t=1;t<=a&&i[n-t]===r[o-t];t++);return ii=r.slice(e,1<t?1-t:void 0)}function ri(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function oi(){return!0}function ai(){return!1}function si(e){function t(t,i,n,r,o){for(var a in this._reactName=t,this._targetInst=n,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?oi:ai,this.isPropagationStopped=ai,this}return r(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=oi)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=oi)},persist:function(){},isPersistent:oi}),t}var li,ci,di,hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pi=si(hi),ui=r({},hi,{view:0,detail:0}),fi=si(ui),gi=r({},ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ji,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==di&&(di&&"mousemove"===e.type?(li=e.screenX-di.screenX,ci=e.screenY-di.screenY):ci=li=0,di=e),li)},movementY:function(e){return"movementY"in e?e.movementY:ci}}),mi=si(gi),vi=si(r({},gi,{dataTransfer:0})),yi=si(r({},ui,{relatedTarget:0})),bi=si(r({},hi,{animationName:0,elapsedTime:0,pseudoElement:0})),wi=si(r({},hi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),xi=si(r({},hi,{data:0})),Oi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Si={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ci={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ci[e])&&!!t[e]}function ji(){return Pi}var Ii=si(r({},ui,{key:function(e){if(e.key){var t=Oi[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ri(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Si[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ji,charCode:function(e){return"keypress"===e.type?ri(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ri(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Ei=si(r({},gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ti=si(r({},ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ji})),Ai=si(r({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0})),Di=si(r({},gi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),ki=[9,13,27,32],Mi=h&&"CompositionEvent"in window,Li=null;h&&"documentMode"in document&&(Li=document.documentMode);var Ri=h&&"TextEvent"in window&&!Li,zi=h&&(!Mi||Li&&8<Li&&11>=Li),Ni=String.fromCharCode(32),Bi=!1;function _i(e,t){switch(e){case"keyup":return-1!==ki.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hi(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wi=!1;var Fi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Fi[e.type]:"textarea"===t}function Ui(e,t,i,n){De(n),0<(t=Ln(t,"onChange")).length&&(i=new pi("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Vi=null,Yi=null;function Xi(e){jn(e,0)}function Gi(e){if(Q(tr(e)))return e}function Zi(e,t){if("change"===e)return t}var Ji=!1;if(h){var Qi;if(h){var $i="oninput"in document;if(!$i){var Ki=document.createElement("div");Ki.setAttribute("oninput","return;"),$i="function"===typeof Ki.oninput}Qi=$i}else Qi=!1;Ji=Qi&&(!document.documentMode||9<document.documentMode)}function en(){Vi&&(Vi.detachEvent("onpropertychange",tn),Yi=Vi=null)}function tn(e){if("value"===e.propertyName&&Gi(Yi)){var t=[];if(Ui(t,Yi,e,je(e)),e=Xi,Ne)e(t);else{Ne=!0;try{Me(e,t)}finally{Ne=!1,_e()}}}}function nn(e,t,i){"focusin"===e?(en(),Yi=i,(Vi=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function rn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gi(Yi)}function on(e,t){if("click"===e)return Gi(t)}function an(e,t){if("input"===e||"change"===e)return Gi(t)}var sn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ln=Object.prototype.hasOwnProperty;function cn(e,t){if(sn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++)if(!ln.call(t,i[n])||!sn(e[i[n]],t[i[n]]))return!1;return!0}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hn(e,t){var i,n=dn(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dn(n)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function un(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(n){i=!1}if(!i)break;t=$((e=t.contentWindow).document)}return t}function fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gn=h&&"documentMode"in document&&11>=document.documentMode,mn=null,vn=null,yn=null,bn=!1;function wn(e,t,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;bn||null==mn||mn!==$(n)||("selectionStart"in(n=mn)&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},yn&&cn(yn,n)||(yn=n,0<(n=Ln(vn,"onSelect")).length&&(t=new pi("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=mn)))}Rt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rt(Lt,2);for(var xn="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),On=0;On<xn.length;On++)Mt.set(xn[On],0);d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sn));function Pn(e,t,i){var n=e.type||"unknown-event";e.currentTarget=i,function(e,t,i,n,r,o,s,l,c){if(Ze.apply(this,arguments),Ue){if(!Ue)throw Error(a(198));var d=Ve;Ue=!1,Ve=null,Ye||(Ye=!0,Xe=d)}}(n,t,void 0,e),e.currentTarget=null}function jn(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var n=e[i],r=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&r.isPropagationStopped())break e;Pn(r,s,c),o=l}else for(a=0;a<n.length;a++){if(l=(s=n[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&r.isPropagationStopped())break e;Pn(r,s,c),o=l}}}if(Ye)throw e=Xe,Ye=!1,Xe=null,e}function In(e,t){var i=nr(t),n=e+"__bubble";i.has(n)||(Dn(t,e,2,!1),i.add(n))}var En="_reactListening"+Math.random().toString(36).slice(2);function Tn(e){e[En]||(e[En]=!0,s.forEach((function(t){Cn.has(t)||An(t,!1,e,null),An(t,!0,e,null)})))}function An(e,t,i,n){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=i;if("selectionchange"===e&&9!==i.nodeType&&(o=i.ownerDocument),null!==n&&!t&&Cn.has(e)){if("scroll"!==e)return;r|=2,o=n}var a=nr(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(r|=4),Dn(o,e,r,t),a.add(s))}function Dn(e,t,i,n){var r=Mt.get(t);switch(void 0===r?2:r){case 0:r=Jt;break;case 1:r=Qt;break;default:r=$t}i=r.bind(null,t,i,e),r=void 0,!We||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),n?void 0!==r?e.addEventListener(t,i,{capture:!0,passive:r}):e.addEventListener(t,i,!0):void 0!==r?e.addEventListener(t,i,{passive:r}):e.addEventListener(t,i,!1)}function kn(e,t,i,n,r){var o=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var s=n.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==s;){if(null===(a=Kn(s)))return;if(5===(l=a.tag)||6===l){n=o=a;continue e}s=s.parentNode}}n=n.return}!function(e,t,i){if(Be)return e(t,i);Be=!0;try{ze(e,t,i)}finally{Be=!1,_e()}}((function(){var n=o,r=je(i),a=[];e:{var s=kt.get(e);if(void 0!==s){var l=pi,c=e;switch(e){case"keypress":if(0===ri(i))break e;case"keydown":case"keyup":l=Ii;break;case"focusin":c="focus",l=yi;break;case"focusout":c="blur",l=yi;break;case"beforeblur":case"afterblur":l=yi;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ti;break;case Et:case Tt:case At:l=bi;break;case Dt:l=Ai;break;case"scroll":l=fi;break;case"wheel":l=Di;break;case"copy":case"cut":case"paste":l=wi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ei}var d=0!==(4&t),h=!d&&"scroll"===e,p=d?null!==s?s+"Capture":null:s;d=[];for(var u,f=n;null!==f;){var g=(u=f).stateNode;if(5===u.tag&&null!==g&&(u=g,null!==p&&(null!=(g=He(f,p))&&d.push(Mn(f,g,u)))),h)break;f=f.return}0<d.length&&(s=new l(s,c,null,i,r),a.push({event:s,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=i.relatedTarget||i.fromElement)||!Kn(c)&&!c[Qn])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(c=(c=i.relatedTarget||i.toElement)?Kn(c):null)&&(c!==(h=Je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(d=mi,g="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=Ei,g="onPointerLeave",p="onPointerEnter",f="pointer"),h=null==l?s:tr(l),u=null==c?s:tr(c),(s=new d(g,f+"leave",l,i,r)).target=h,s.relatedTarget=u,g=null,Kn(r)===n&&((d=new d(p,f+"enter",c,i,r)).target=u,d.relatedTarget=h,g=d),h=g,l&&c)e:{for(p=c,f=0,u=d=l;u;u=Rn(u))f++;for(u=0,g=p;g;g=Rn(g))u++;for(;0<f-u;)d=Rn(d),f--;for(;0<u-f;)p=Rn(p),u--;for(;f--;){if(d===p||null!==p&&d===p.alternate)break e;d=Rn(d),p=Rn(p)}d=null}else d=null;null!==l&&zn(a,s,l,d,!1),null!==c&&null!==h&&zn(a,h,c,d,!0)}if("select"===(l=(s=n?tr(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Zi;else if(qi(s))if(Ji)m=an;else{m=rn;var v=nn}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=on);switch(m&&(m=m(e,n))?Ui(a,m,i,r):(v&&v(e,s,n),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&re(s,"number",s.value)),v=n?tr(n):window,e){case"focusin":(qi(v)||"true"===v.contentEditable)&&(mn=v,vn=n,yn=null);break;case"focusout":yn=vn=mn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,wn(a,i,r);break;case"selectionchange":if(gn)break;case"keydown":case"keyup":wn(a,i,r)}var y;if(Mi)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wi?_i(e,i)&&(b="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(b="onCompositionStart");b&&(zi&&"ko"!==i.locale&&(Wi||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wi&&(y=ni()):(ti="value"in(ei=r)?ei.value:ei.textContent,Wi=!0)),0<(v=Ln(n,b)).length&&(b=new xi(b,e,null,i,r),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Hi(i))&&(b.data=y))),(y=Ri?function(e,t){switch(e){case"compositionend":return Hi(t);case"keypress":return 32!==t.which?null:(Bi=!0,Ni);case"textInput":return(e=t.data)===Ni&&Bi?null:e;default:return null}}(e,i):function(e,t){if(Wi)return"compositionend"===e||!Mi&&_i(e,t)?(e=ni(),ii=ti=ei=null,Wi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zi&&"ko"!==t.locale?null:t.data;default:return null}}(e,i))&&(0<(n=Ln(n,"onBeforeInput")).length&&(r=new xi("onBeforeInput","beforeinput",null,i,r),a.push({event:r,listeners:n}),r.data=y))}jn(a,t)}))}function Mn(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Ln(e,t){for(var i=t+"Capture",n=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=He(e,i))&&n.unshift(Mn(e,o,r)),null!=(o=He(e,t))&&n.push(Mn(e,o,r))),e=e.return}return n}function Rn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function zn(e,t,i,n,r){for(var o=t._reactName,a=[];null!==i&&i!==n;){var s=i,l=s.alternate,c=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==c&&(s=c,r?null!=(l=He(i,o))&&a.unshift(Mn(i,l,s)):r||null!=(l=He(i,o))&&a.push(Mn(i,l,s))),i=i.return}0!==a.length&&e.push({event:t,listeners:a})}function Nn(){}var Bn=null,_n=null;function Hn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Wn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Fn="function"===typeof setTimeout?setTimeout:void 0,qn="function"===typeof clearTimeout?clearTimeout:void 0;function Un(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Vn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}var Xn=0;var Gn=Math.random().toString(36).slice(2),Zn="__reactFiber$"+Gn,Jn="__reactProps$"+Gn,Qn="__reactContainer$"+Gn,$n="__reactEvents$"+Gn;function Kn(e){var t=e[Zn];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Qn]||i[Zn]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=Yn(e);null!==e;){if(i=e[Zn])return i;e=Yn(e)}return t}i=(e=i).parentNode}return null}function er(e){return!(e=e[Zn]||e[Qn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function tr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ir(e){return e[Jn]||null}function nr(e){var t=e[$n];return void 0===t&&(t=e[$n]=new Set),t}var rr=[],or=-1;function ar(e){return{current:e}}function sr(e){0>or||(e.current=rr[or],rr[or]=null,or--)}function lr(e,t){or++,rr[or]=e.current,e.current=t}var cr={},dr=ar(cr),hr=ar(!1),pr=cr;function ur(e,t){var i=e.type.contextTypes;if(!i)return cr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in i)o[r]=t[r];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function fr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gr(){sr(hr),sr(dr)}function mr(e,t,i){if(dr.current!==cr)throw Error(a(168));lr(dr,t),lr(hr,i)}function vr(e,t,i){var n=e.stateNode;if(e=t.childContextTypes,"function"!==typeof n.getChildContext)return i;for(var o in n=n.getChildContext())if(!(o in e))throw Error(a(108,X(t)||"Unknown",o));return r({},i,n)}function yr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cr,pr=dr.current,lr(dr,e),lr(hr,hr.current),!0}function br(e,t,i){var n=e.stateNode;if(!n)throw Error(a(169));i?(e=vr(e,t,pr),n.__reactInternalMemoizedMergedChildContext=e,sr(hr),sr(dr),lr(dr,e)):sr(hr),lr(hr,i)}var wr=null,xr=null,Or=o.unstable_runWithPriority,Sr=o.unstable_scheduleCallback,Cr=o.unstable_cancelCallback,Pr=o.unstable_shouldYield,jr=o.unstable_requestPaint,Ir=o.unstable_now,Er=o.unstable_getCurrentPriorityLevel,Tr=o.unstable_ImmediatePriority,Ar=o.unstable_UserBlockingPriority,Dr=o.unstable_NormalPriority,kr=o.unstable_LowPriority,Mr=o.unstable_IdlePriority,Lr={},Rr=void 0!==jr?jr:function(){},zr=null,Nr=null,Br=!1,_r=Ir(),Hr=1e4>_r?Ir:function(){return Ir()-_r};function Wr(){switch(Er()){case Tr:return 99;case Ar:return 98;case Dr:return 97;case kr:return 96;case Mr:return 95;default:throw Error(a(332))}}function Fr(e){switch(e){case 99:return Tr;case 98:return Ar;case 97:return Dr;case 96:return kr;case 95:return Mr;default:throw Error(a(332))}}function qr(e,t){return e=Fr(e),Or(e,t)}function Ur(e,t,i){return e=Fr(e),Sr(e,t,i)}function Vr(){if(null!==Nr){var e=Nr;Nr=null,Cr(e)}Yr()}function Yr(){if(!Br&&null!==zr){Br=!0;var e=0;try{var t=zr;qr(99,(function(){for(;e<t.length;e++){var i=t[e];do{i=i(!0)}while(null!==i)}})),zr=null}catch(i){throw null!==zr&&(zr=zr.slice(e+1)),Sr(Tr,Vr),i}finally{Br=!1}}}var Xr=x.ReactCurrentBatchConfig;function Gr(e,t){if(e&&e.defaultProps){for(var i in t=r({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}var Zr=ar(null),Jr=null,Qr=null,$r=null;function Kr(){$r=Qr=Jr=null}function eo(e){var t=Zr.current;sr(Zr),e.type._context._currentValue=t}function to(e,t){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)===t){if(null===i||(i.childLanes&t)===t)break;i.childLanes|=t}else e.childLanes|=t,null!==i&&(i.childLanes|=t);e=e.return}}function io(e,t){Jr=e,$r=Qr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(La=!0),e.firstContext=null)}function no(e,t){if($r!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||($r=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Qr){if(null===Jr)throw Error(a(308));Qr=t,Jr.dependencies={lanes:0,firstContext:t,responders:null}}else Qr=Qr.next=t;return e._currentValue}var ro=!1;function oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ao(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function so(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function lo(e,t){if(null!==(e=e.updateQueue)){var i=(e=e.shared).pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}}function co(e,t){var i=e.updateQueue,n=e.alternate;if(null!==n&&i===(n=n.updateQueue)){var r=null,o=null;if(null!==(i=i.firstBaseUpdate)){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===o?r=o=a:o=o.next=a,i=i.next}while(null!==i);null===o?r=o=t:o=o.next=t}else r=o=t;return i={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function ho(e,t,i,n){var o=e.updateQueue;ro=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var c=l,d=c.next;c.next=null,null===s?a=d:s.next=d,s=c;var h=e.alternate;if(null!==h){var p=(h=h.updateQueue).lastBaseUpdate;p!==s&&(null===p?h.firstBaseUpdate=d:p.next=d,h.lastBaseUpdate=c)}}if(null!==a){for(p=o.baseState,s=0,h=d=c=null;;){l=a.lane;var u=a.eventTime;if((n&l)===l){null!==h&&(h=h.next={eventTime:u,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,g=a;switch(l=t,u=i,g.tag){case 1:if("function"===typeof(f=g.payload)){p=f.call(u,p,l);break e}p=f;break e;case 3:f.flags=-4097&f.flags|64;case 0:if(null===(l="function"===typeof(f=g.payload)?f.call(u,p,l):f)||void 0===l)break e;p=r({},p,l);break e;case 2:ro=!0}}null!==a.callback&&(e.flags|=32,null===(l=o.effects)?o.effects=[a]:l.push(a))}else u={eventTime:u,lane:l,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(d=h=u,c=p):h=h.next=u,s|=l;if(null===(a=a.next)){if(null===(l=o.shared.pending))break;a=l.next,l.next=null,o.lastBaseUpdate=l,o.shared.pending=null}}null===h&&(c=p),o.baseState=c,o.firstBaseUpdate=d,o.lastBaseUpdate=h,Bs|=s,e.lanes=s,e.memoizedState=p}}function po(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(null!==r){if(n.callback=null,n=i,"function"!==typeof r)throw Error(a(191,r));r.call(n)}}}var uo=(new n.Component).refs;function fo(e,t,i,n){i=null===(i=i(n,t=e.memoizedState))||void 0===i?t:r({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var go={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var n=cl(),r=dl(e),o=so(n,r);o.payload=t,void 0!==i&&null!==i&&(o.callback=i),lo(e,o),hl(e,r,n)},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=cl(),r=dl(e),o=so(n,r);o.tag=1,o.payload=t,void 0!==i&&null!==i&&(o.callback=i),lo(e,o),hl(e,r,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=cl(),n=dl(e),r=so(i,n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),lo(e,r),hl(e,n,i)}};function mo(e,t,i,n,r,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!cn(i,n)||!cn(r,o))}function vo(e,t,i){var n=!1,r=cr,o=t.contextType;return"object"===typeof o&&null!==o?o=no(o):(r=fr(t)?pr:dr.current,o=(n=null!==(n=t.contextTypes)&&void 0!==n)?ur(e,r):cr),t=new t(i,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=go,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function yo(e,t,i,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&go.enqueueReplaceState(t,t.state,null)}function bo(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs=uo,oo(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=no(o):(o=fr(t)?pr:dr.current,r.context=ur(e,o)),ho(e,i,r,n),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(fo(e,t,o,i),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&go.enqueueReplaceState(r,r.state,null),ho(e,i,r,n),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4)}var wo=Array.isArray;function xo(e,t,i){if(null!==(e=i.ref)&&"function"!==typeof e&&"object"!==typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(a(309));var n=i.stateNode}if(!n)throw Error(a(147,e));var r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:((t=function(e){var t=n.refs;t===uo&&(t=n.refs={}),null===e?delete t[r]:t[r]=e})._stringRef=r,t)}if("string"!==typeof e)throw Error(a(284));if(!i._owner)throw Error(a(290,e))}return e}function Oo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function So(e){function t(t,i){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=i,t.lastEffect=i):t.firstEffect=t.lastEffect=i,i.nextEffect=null,i.flags=8}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=ql(e,t)).index=0,e.sibling=null,e}function o(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.flags=2,i):n:(t.flags=2,i):i}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=Xl(i,e.mode,n)).return=e,t):((t=r(t,i)).return=e,t)}function c(e,t,i,n){return null!==t&&t.elementType===i.type?((n=r(t,i.props)).ref=xo(e,t,i),n.return=e,n):((n=Ul(i.type,i.key,i.props,null,e.mode,n)).ref=xo(e,t,i),n.return=e,n)}function d(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Gl(i,e.mode,n)).return=e,t):((t=r(t,i.children||[])).return=e,t)}function h(e,t,i,n,o){return null===t||7!==t.tag?((t=Vl(i,e.mode,n,o)).return=e,t):((t=r(t,i)).return=e,t)}function p(e,t,i){if("string"===typeof t||"number"===typeof t)return(t=Xl(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case O:return(i=Ul(t.type,t.key,t.props,null,e.mode,i)).ref=xo(e,null,t),i.return=e,i;case S:return(t=Gl(t,e.mode,i)).return=e,t}if(wo(t)||F(t))return(t=Vl(t,e.mode,i,null)).return=e,t;Oo(e,t)}return null}function u(e,t,i,n){var r=null!==t?t.key:null;if("string"===typeof i||"number"===typeof i)return null!==r?null:l(e,t,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case O:return i.key===r?i.type===C?h(e,t,i.props.children,n,r):c(e,t,i,n):null;case S:return i.key===r?d(e,t,i,n):null}if(wo(i)||F(i))return null!==r?null:h(e,t,i,n,null);Oo(e,i)}return null}function f(e,t,i,n,r){if("string"===typeof n||"number"===typeof n)return l(t,e=e.get(i)||null,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case O:return e=e.get(null===n.key?i:n.key)||null,n.type===C?h(t,e,n.props.children,r,n.key):c(t,e,n,r);case S:return d(t,e=e.get(null===n.key?i:n.key)||null,n,r)}if(wo(n)||F(n))return h(t,e=e.get(i)||null,n,r,null);Oo(t,n)}return null}function g(r,a,s,l){for(var c=null,d=null,h=a,g=a=0,m=null;null!==h&&g<s.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=u(r,h,s[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(r,h),a=o(v,a,g),null===d?c=v:d.sibling=v,d=v,h=m}if(g===s.length)return i(r,h),c;if(null===h){for(;g<s.length;g++)null!==(h=p(r,s[g],l))&&(a=o(h,a,g),null===d?c=h:d.sibling=h,d=h);return c}for(h=n(r,h);g<s.length;g++)null!==(m=f(h,r,g,s[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),a=o(m,a,g),null===d?c=m:d.sibling=m,d=m);return e&&h.forEach((function(e){return t(r,e)})),c}function m(r,s,l,c){var d=F(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var h=d=null,g=s,m=s=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=u(r,g,y.value,c);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(r,g),s=o(b,s,m),null===h?d=b:h.sibling=b,h=b,g=v}if(y.done)return i(r,g),d;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=p(r,y.value,c))&&(s=o(y,s,m),null===h?d=y:h.sibling=y,h=y);return d}for(g=n(r,g);!y.done;m++,y=l.next())null!==(y=f(g,r,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),s=o(y,s,m),null===h?d=y:h.sibling=y,h=y);return e&&g.forEach((function(e){return t(r,e)})),d}return function(e,n,o,l){var c="object"===typeof o&&null!==o&&o.type===C&&null===o.key;c&&(o=o.props.children);var d="object"===typeof o&&null!==o;if(d)switch(o.$$typeof){case O:e:{for(d=o.key,c=n;null!==c;){if(c.key===d){switch(c.tag){case 7:if(o.type===C){i(e,c.sibling),(n=r(c,o.props.children)).return=e,e=n;break e}break;default:if(c.elementType===o.type){i(e,c.sibling),(n=r(c,o.props)).ref=xo(e,c,o),n.return=e,e=n;break e}}i(e,c);break}t(e,c),c=c.sibling}o.type===C?((n=Vl(o.props.children,e.mode,l,o.key)).return=e,e=n):((l=Ul(o.type,o.key,o.props,null,e.mode,l)).ref=xo(e,n,o),l.return=e,e=l)}return s(e);case S:e:{for(c=o.key;null!==n;){if(n.key===c){if(4===n.tag&&n.stateNode.containerInfo===o.containerInfo&&n.stateNode.implementation===o.implementation){i(e,n.sibling),(n=r(n,o.children||[])).return=e,e=n;break e}i(e,n);break}t(e,n),n=n.sibling}(n=Gl(o,e.mode,l)).return=e,e=n}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==n&&6===n.tag?(i(e,n.sibling),(n=r(n,o)).return=e,e=n):(i(e,n),(n=Xl(o,e.mode,l)).return=e,e=n),s(e);if(wo(o))return g(e,n,o,l);if(F(o))return m(e,n,o,l);if(d&&Oo(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,X(e.type)||"Component"))}return i(e,n)}}var Co=So(!0),Po=So(!1),jo={},Io=ar(jo),Eo=ar(jo),To=ar(jo);function Ao(e){if(e===jo)throw Error(a(174));return e}function Do(e,t){switch(lr(To,t),lr(Eo,e),lr(Io,jo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}sr(Io),lr(Io,t)}function ko(){sr(Io),sr(Eo),sr(To)}function Mo(e){Ao(To.current);var t=Ao(Io.current),i=fe(t,e.type);t!==i&&(lr(Eo,e),lr(Io,i))}function Lo(e){Eo.current===e&&(sr(Io),sr(Eo))}var Ro=ar(0);function zo(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var No=null,Bo=null,_o=!1;function Ho(e,t){var i=Wl(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=t,i.return=e,i.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i}function Wo(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Fo(e){if(_o){var t=Bo;if(t){var i=t;if(!Wo(e,t)){if(!(t=Vn(i.nextSibling))||!Wo(e,t))return e.flags=-1025&e.flags|2,_o=!1,void(No=e);Ho(No,i)}No=e,Bo=Vn(t.firstChild)}else e.flags=-1025&e.flags|2,_o=!1,No=e}}function qo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;No=e}function Uo(e){if(e!==No)return!1;if(!_o)return qo(e),_o=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Wn(t,e.memoizedProps))for(t=Bo;t;)Ho(e,t),t=Vn(t.nextSibling);if(qo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){Bo=Vn(e.nextSibling);break e}t--}else"$"!==i&&"$!"!==i&&"$?"!==i||t++}e=e.nextSibling}Bo=null}}else Bo=No?Vn(e.stateNode.nextSibling):null;return!0}function Vo(){Bo=No=null,_o=!1}var Yo=[];function Xo(){for(var e=0;e<Yo.length;e++)Yo[e]._workInProgressVersionPrimary=null;Yo.length=0}var Go=x.ReactCurrentDispatcher,Zo=x.ReactCurrentBatchConfig,Jo=0,Qo=null,$o=null,Ko=null,ea=!1,ta=!1;function ia(){throw Error(a(321))}function na(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!sn(e[i],t[i]))return!1;return!0}function ra(e,t,i,n,r,o){if(Jo=o,Qo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Go.current=null===e||null===e.memoizedState?Aa:Da,e=i(n,r),ta){o=0;do{if(ta=!1,!(25>o))throw Error(a(301));o+=1,Ko=$o=null,t.updateQueue=null,Go.current=ka,e=i(n,r)}while(ta)}if(Go.current=Ta,t=null!==$o&&null!==$o.next,Jo=0,Ko=$o=Qo=null,ea=!1,t)throw Error(a(300));return e}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ko?Qo.memoizedState=Ko=e:Ko=Ko.next=e,Ko}function aa(){if(null===$o){var e=Qo.alternate;e=null!==e?e.memoizedState:null}else e=$o.next;var t=null===Ko?Qo.memoizedState:Ko.next;if(null!==t)Ko=t,$o=e;else{if(null===e)throw Error(a(310));e={memoizedState:($o=e).memoizedState,baseState:$o.baseState,baseQueue:$o.baseQueue,queue:$o.queue,next:null},null===Ko?Qo.memoizedState=Ko=e:Ko=Ko.next=e}return Ko}function sa(e,t){return"function"===typeof t?t(e):t}function la(e){var t=aa(),i=t.queue;if(null===i)throw Error(a(311));i.lastRenderedReducer=e;var n=$o,r=n.baseQueue,o=i.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}n.baseQueue=r=o,i.pending=null}if(null!==r){r=r.next,n=n.baseState;var l=s=o=null,c=r;do{var d=c.lane;if((Jo&d)===d)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),n=c.eagerReducer===e?c.eagerState:e(n,c.action);else{var h={lane:d,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(s=l=h,o=n):l=l.next=h,Qo.lanes|=d,Bs|=d}c=c.next}while(null!==c&&c!==r);null===l?o=n:l.next=s,sn(n,t.memoizedState)||(La=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,i.lastRenderedState=n}return[t.memoizedState,i.dispatch]}function ca(e){var t=aa(),i=t.queue;if(null===i)throw Error(a(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,o=t.memoizedState;if(null!==r){i.pending=null;var s=r=r.next;do{o=e(o,s.action),s=s.next}while(s!==r);sn(o,t.memoizedState)||(La=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),i.lastRenderedState=o}return[o,n]}function da(e,t,i){var n=t._getVersion;n=n(t._source);var r=t._workInProgressVersionPrimary;if(null!==r?e=r===n:(e=e.mutableReadLanes,(e=(Jo&e)===e)&&(t._workInProgressVersionPrimary=n,Yo.push(t))),e)return i(t._source);throw Yo.push(t),Error(a(350))}function ha(e,t,i,n){var r=As;if(null===r)throw Error(a(349));var o=t._getVersion,s=o(t._source),l=Go.current,c=l.useState((function(){return da(r,t,i)})),d=c[1],h=c[0];c=Ko;var p=e.memoizedState,u=p.refs,f=u.getSnapshot,g=p.source;p=p.subscribe;var m=Qo;return e.memoizedState={refs:u,source:t,subscribe:n},l.useEffect((function(){u.getSnapshot=i,u.setSnapshot=d;var e=o(t._source);if(!sn(s,e)){e=i(t._source),sn(h,e)||(d(e),e=dl(m),r.mutableReadLanes|=e&r.pendingLanes),e=r.mutableReadLanes,r.entangledLanes|=e;for(var n=r.entanglements,a=e;0<a;){var l=31-Ut(a),c=1<<l;n[l]|=e,a&=~c}}}),[i,t,n]),l.useEffect((function(){return n(t._source,(function(){var e=u.getSnapshot,i=u.setSnapshot;try{i(e(t._source));var n=dl(m);r.mutableReadLanes|=n&r.pendingLanes}catch(o){i((function(){throw o}))}}))}),[t,n]),sn(f,i)&&sn(g,t)&&sn(p,n)||((e={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:h}).dispatch=d=Ea.bind(null,Qo,e),c.queue=e,c.baseQueue=null,h=da(r,t,i),c.memoizedState=c.baseState=h),h}function pa(e,t,i){return ha(aa(),e,t,i)}function ua(e){var t=oa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:e}).dispatch=Ea.bind(null,Qo,e),[t.memoizedState,e]}function fa(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},null===(t=Qo.updateQueue)?(t={lastEffect:null},Qo.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function ga(e){return e={current:e},oa().memoizedState=e}function ma(){return aa().memoizedState}function va(e,t,i,n){var r=oa();Qo.flags|=e,r.memoizedState=fa(1|t,i,void 0,void 0===n?null:n)}function ya(e,t,i,n){var r=aa();n=void 0===n?null:n;var o=void 0;if(null!==$o){var a=$o.memoizedState;if(o=a.destroy,null!==n&&na(n,a.deps))return void fa(t,i,o,n)}Qo.flags|=e,r.memoizedState=fa(1|t,i,o,n)}function ba(e,t){return va(516,4,e,t)}function wa(e,t){return ya(516,4,e,t)}function xa(e,t){return ya(4,2,e,t)}function Oa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Sa(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,ya(4,2,Oa.bind(null,t,e),i)}function Ca(){}function Pa(e,t){var i=aa();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&na(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function ja(e,t){var i=aa();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&na(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function Ia(e,t){var i=Wr();qr(98>i?98:i,(function(){e(!0)})),qr(97<i?97:i,(function(){var i=Zo.transition;Zo.transition=1;try{e(!1),t()}finally{Zo.transition=i}}))}function Ea(e,t,i){var n=cl(),r=dl(e),o={lane:r,action:i,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===Qo||null!==a&&a===Qo)ta=ea=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=a(s,i);if(o.eagerReducer=a,o.eagerState=l,sn(l,s))return}catch(c){}hl(e,r,n)}}var Ta={readContext:no,useCallback:ia,useContext:ia,useEffect:ia,useImperativeHandle:ia,useLayoutEffect:ia,useMemo:ia,useReducer:ia,useRef:ia,useState:ia,useDebugValue:ia,useDeferredValue:ia,useTransition:ia,useMutableSource:ia,useOpaqueIdentifier:ia,unstable_isNewReconciler:!1},Aa={readContext:no,useCallback:function(e,t){return oa().memoizedState=[e,void 0===t?null:t],e},useContext:no,useEffect:ba,useImperativeHandle:function(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,va(4,2,Oa.bind(null,t,e),i)},useLayoutEffect:function(e,t){return va(4,2,e,t)},useMemo:function(e,t){var i=oa();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=oa();return t=void 0!==i?i(t):t,n.memoizedState=n.baseState=t,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ea.bind(null,Qo,e),[n.memoizedState,e]},useRef:ga,useState:ua,useDebugValue:Ca,useDeferredValue:function(e){var t=ua(e),i=t[0],n=t[1];return ba((function(){var t=Zo.transition;Zo.transition=1;try{n(e)}finally{Zo.transition=t}}),[e]),i},useTransition:function(){var e=ua(!1),t=e[0];return ga(e=Ia.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,i){var n=oa();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:i},ha(n,e,t,i)},useOpaqueIdentifier:function(){if(_o){var e=!1,t=function(e){return{$$typeof:R,toString:e,valueOf:e}}((function(){throw e||(e=!0,i("r:"+(Xn++).toString(36))),Error(a(355))})),i=ua(t)[1];return 0===(2&Qo.mode)&&(Qo.flags|=516,fa(5,(function(){i("r:"+(Xn++).toString(36))}),void 0,null)),t}return ua(t="r:"+(Xn++).toString(36)),t},unstable_isNewReconciler:!1},Da={readContext:no,useCallback:Pa,useContext:no,useEffect:wa,useImperativeHandle:Sa,useLayoutEffect:xa,useMemo:ja,useReducer:la,useRef:ma,useState:function(){return la(sa)},useDebugValue:Ca,useDeferredValue:function(e){var t=la(sa),i=t[0],n=t[1];return wa((function(){var t=Zo.transition;Zo.transition=1;try{n(e)}finally{Zo.transition=t}}),[e]),i},useTransition:function(){var e=la(sa)[0];return[ma().current,e]},useMutableSource:pa,useOpaqueIdentifier:function(){return la(sa)[0]},unstable_isNewReconciler:!1},ka={readContext:no,useCallback:Pa,useContext:no,useEffect:wa,useImperativeHandle:Sa,useLayoutEffect:xa,useMemo:ja,useReducer:ca,useRef:ma,useState:function(){return ca(sa)},useDebugValue:Ca,useDeferredValue:function(e){var t=ca(sa),i=t[0],n=t[1];return wa((function(){var t=Zo.transition;Zo.transition=1;try{n(e)}finally{Zo.transition=t}}),[e]),i},useTransition:function(){var e=ca(sa)[0];return[ma().current,e]},useMutableSource:pa,useOpaqueIdentifier:function(){return ca(sa)[0]},unstable_isNewReconciler:!1},Ma=x.ReactCurrentOwner,La=!1;function Ra(e,t,i,n){t.child=null===e?Po(t,null,i,n):Co(t,e.child,i,n)}function za(e,t,i,n,r){i=i.render;var o=t.ref;return io(t,r),n=ra(e,t,i,n,o,r),null===e||La?(t.flags|=1,Ra(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~r,is(e,t,r))}function Na(e,t,i,n,r,o){if(null===e){var a=i.type;return"function"!==typeof a||Fl(a)||void 0!==a.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Ul(i.type,null,n,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ba(e,t,a,n,r,o))}return a=e.child,0===(r&o)&&(r=a.memoizedProps,(i=null!==(i=i.compare)?i:cn)(r,n)&&e.ref===t.ref)?is(e,t,o):(t.flags|=1,(e=ql(a,n)).ref=t.ref,e.return=t,t.child=e)}function Ba(e,t,i,n,r,o){if(null!==e&&cn(e.memoizedProps,n)&&e.ref===t.ref){if(La=!1,0===(o&r))return t.lanes=e.lanes,is(e,t,o);0!==(16384&e.flags)&&(La=!0)}return Wa(e,t,i,n,o)}function _a(e,t,i){var n=t.pendingProps,r=n.children,o=null!==e?e.memoizedState:null;if("hidden"===n.mode||"unstable-defer-without-hiding"===n.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},bl(t,i);else{if(0===(1073741824&i))return e=null!==o?o.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},bl(t,e),null;t.memoizedState={baseLanes:0},bl(t,null!==o?o.baseLanes:i)}else null!==o?(n=o.baseLanes|i,t.memoizedState=null):n=i,bl(t,n);return Ra(e,t,r,i),t.child}function Ha(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.flags|=128)}function Wa(e,t,i,n,r){var o=fr(i)?pr:dr.current;return o=ur(t,o),io(t,r),i=ra(e,t,i,n,o,r),null===e||La?(t.flags|=1,Ra(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~r,is(e,t,r))}function Fa(e,t,i,n,r){if(fr(i)){var o=!0;yr(t)}else o=!1;if(io(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),vo(t,i,n),bo(t,i,n,r),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=i.contextType;"object"===typeof c&&null!==c?c=no(c):c=ur(t,c=fr(i)?pr:dr.current);var d=i.getDerivedStateFromProps,h="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||l!==c)&&yo(t,a,n,c),ro=!1;var p=t.memoizedState;a.state=p,ho(t,n,a,r),l=t.memoizedState,s!==n||p!==l||hr.current||ro?("function"===typeof d&&(fo(t,i,d,n),l=t.memoizedState),(s=ro||mo(t,i,s,n,p,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=s):("function"===typeof a.componentDidMount&&(t.flags|=4),n=!1)}else{a=t.stateNode,ao(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Gr(t.type,s),a.props=c,h=t.pendingProps,p=a.context,"object"===typeof(l=i.contextType)&&null!==l?l=no(l):l=ur(t,l=fr(i)?pr:dr.current);var u=i.getDerivedStateFromProps;(d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||p!==l)&&yo(t,a,n,l),ro=!1,p=t.memoizedState,a.state=p,ho(t,n,a,r);var f=t.memoizedState;s!==h||p!==f||hr.current||ro?("function"===typeof u&&(fo(t,i,u,n),f=t.memoizedState),(c=ro||mo(t,i,c,n,p,f,l))?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=f),a.props=n,a.state=f,a.context=l,n=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),n=!1)}return qa(e,t,i,n,o,r)}function qa(e,t,i,n,r,o){Ha(e,t);var a=0!==(64&t.flags);if(!n&&!a)return r&&br(t,i,!1),is(e,t,o);n=t.stateNode,Ma.current=t;var s=a&&"function"!==typeof i.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=Co(t,e.child,null,o),t.child=Co(t,null,s,o)):Ra(e,t,s,o),t.memoizedState=n.state,r&&br(t,i,!0),t.child}function Ua(e){var t=e.stateNode;t.pendingContext?mr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mr(0,t.context,!1),Do(e,t.containerInfo)}var Va,Ya,Xa,Ga={dehydrated:null,retryLane:0};function Za(e,t,i){var n,r=t.pendingProps,o=Ro.current,a=!1;return(n=0!==(64&t.flags))||(n=(null===e||null!==e.memoizedState)&&0!==(2&o)),n?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===r.fallback||!0===r.unstable_avoidThisFallback||(o|=1),lr(Ro,1&o),null===e?(void 0!==r.fallback&&Fo(t),e=r.children,o=r.fallback,a?(e=Ja(t,e,o,i),t.child.memoizedState={baseLanes:i},t.memoizedState=Ga,e):"number"===typeof r.unstable_expectedLoadTime?(e=Ja(t,e,o,i),t.child.memoizedState={baseLanes:i},t.memoizedState=Ga,t.lanes=33554432,e):((i=Yl({mode:"visible",children:e},t.mode,i,null)).return=t,t.child=i)):(e.memoizedState,a?(r=$a(e,t,r.children,r.fallback,i),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:i}:{baseLanes:o.baseLanes|i},a.childLanes=e.childLanes&~i,t.memoizedState=Ga,r):(i=Qa(e,t,r.children,i),t.memoizedState=null,i))}function Ja(e,t,i,n){var r=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&r)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Yl(t,r,0,null),i=Vl(i,r,n,null),o.return=e,i.return=e,o.sibling=i,e.child=o,i}function Qa(e,t,i,n){var r=e.child;return e=r.sibling,i=ql(r,{mode:"visible",children:i}),0===(2&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=i}function $a(e,t,i,n,r){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:i};return 0===(2&o)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=s,null!==(a=i.lastEffect)?(t.firstEffect=i.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):i=ql(a,s),null!==e?n=ql(e,n):(n=Vl(n,o,r,null)).flags|=2,n.return=t,i.return=t,i.sibling=n,t.child=i,n}function Ka(e,t){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),to(e.return,t)}function es(e,t,i,n,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:r,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=i,a.tailMode=r,a.lastEffect=o)}function ts(e,t,i){var n=t.pendingProps,r=n.revealOrder,o=n.tail;if(Ra(e,t,n.children,i),0!==(2&(n=Ro.current)))n=1&n|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ka(e,i);else if(19===e.tag)Ka(e,i);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(lr(Ro,n),0===(2&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(i=t.child,r=null;null!==i;)null!==(e=i.alternate)&&null===zo(e)&&(r=i),i=i.sibling;null===(i=r)?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),es(t,!1,r,i,o,t.lastEffect);break;case"backwards":for(i=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===zo(e)){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}es(t,!0,i,null,o,t.lastEffect);break;case"together":es(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function is(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),Bs|=t.lanes,0!==(i&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(i=ql(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=ql(e,e.pendingProps)).return=t;i.sibling=null}return t.child}return null}function ns(e,t){if(!_o)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function rs(e,t,i){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return fr(t.type)&&gr(),null;case 3:return ko(),sr(hr),sr(dr),Xo(),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(Uo(t)?t.flags|=4:n.hydrate||(t.flags|=256)),null;case 5:Lo(t);var o=Ao(To.current);if(i=t.type,null!==e&&null!=t.stateNode)Ya(e,t,i,n),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(null===t.stateNode)throw Error(a(166));return null}if(e=Ao(Io.current),Uo(t)){n=t.stateNode,i=t.type;var s=t.memoizedProps;switch(n[Zn]=t,n[Jn]=s,i){case"dialog":In("cancel",n),In("close",n);break;case"iframe":case"object":case"embed":In("load",n);break;case"video":case"audio":for(e=0;e<Sn.length;e++)In(Sn[e],n);break;case"source":In("error",n);break;case"img":case"image":case"link":In("error",n),In("load",n);break;case"details":In("toggle",n);break;case"input":ee(n,s),In("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},In("invalid",n);break;case"textarea":le(n,s),In("invalid",n)}for(var c in Ce(i,s),e=null,s)s.hasOwnProperty(c)&&(o=s[c],"children"===c?"string"===typeof o?n.textContent!==o&&(e=["children",o]):"number"===typeof o&&n.textContent!==""+o&&(e=["children",""+o]):l.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&In("scroll",n));switch(i){case"input":J(n),ne(n,s,!0);break;case"textarea":J(n),de(n);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(n.onclick=Nn)}n=e,t.updateQueue=n,null!==n&&(t.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,e===he&&(e=ue(i)),e===he?"script"===i?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=c.createElement(i,{is:n.is}):(e=c.createElement(i),"select"===i&&(c=e,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):e=c.createElementNS(e,i),e[Zn]=t,e[Jn]=n,Va(e,t),t.stateNode=e,c=Pe(i,n),i){case"dialog":In("cancel",e),In("close",e),o=n;break;case"iframe":case"object":case"embed":In("load",e),o=n;break;case"video":case"audio":for(o=0;o<Sn.length;o++)In(Sn[o],e);o=n;break;case"source":In("error",e),o=n;break;case"img":case"image":case"link":In("error",e),In("load",e),o=n;break;case"details":In("toggle",e),o=n;break;case"input":ee(e,n),o=K(e,n),In("invalid",e);break;case"option":o=oe(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=r({},n,{value:void 0}),In("invalid",e);break;case"textarea":le(e,n),o=se(e,n),In("invalid",e);break;default:o=n}Ce(i,o);var d=o;for(s in d)if(d.hasOwnProperty(s)){var h=d[s];"style"===s?Oe(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ve(e,h):"children"===s?"string"===typeof h?("textarea"!==i||""!==h)&&ye(e,h):"number"===typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(l.hasOwnProperty(s)?null!=h&&"onScroll"===s&&In("scroll",e):null!=h&&w(e,s,h,c))}switch(i){case"input":J(e),ne(e,n,!1);break;case"textarea":J(e),de(e);break;case"option":null!=n.value&&e.setAttribute("value",""+G(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?ae(e,!!n.multiple,s,!1):null!=n.defaultValue&&ae(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Nn)}Hn(i,n)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xa(0,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(a(166));i=Ao(To.current),Ao(Io.current),Uo(t)?(n=t.stateNode,i=t.memoizedProps,n[Zn]=t,n.nodeValue!==i&&(t.flags|=4)):((n=(9===i.nodeType?i:i.ownerDocument).createTextNode(n))[Zn]=t,t.stateNode=n)}return null;case 13:return sr(Ro),n=t.memoizedState,0!==(64&t.flags)?(t.lanes=i,t):(n=null!==n,i=!1,null===e?void 0!==t.memoizedProps.fallback&&Uo(t):i=null!==e.memoizedState,n&&!i&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ro.current)?0===Rs&&(Rs=3):(0!==Rs&&3!==Rs||(Rs=4),null===As||0===(134217727&Bs)&&0===(134217727&_s)||gl(As,ks))),(n||i)&&(t.flags|=4),null);case 4:return ko(),null===e&&Tn(t.stateNode.containerInfo),null;case 10:return eo(t),null;case 17:return fr(t.type)&&gr(),null;case 19:if(sr(Ro),null===(n=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=n.rendering))if(s)ns(n,!1);else{if(0!==Rs||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=zo(e))){for(t.flags|=64,ns(n,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===n.lastEffect&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=i,i=t.child;null!==i;)e=n,(s=i).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return lr(Ro,1&Ro.current|2),t.child}e=e.sibling}null!==n.tail&&Hr()>qs&&(t.flags|=64,s=!0,ns(n,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=zo(c))){if(t.flags|=64,s=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.flags|=4),ns(n,!0),null===n.tail&&"hidden"===n.tailMode&&!c.alternate&&!_o)return null!==(t=t.lastEffect=n.lastEffect)&&(t.nextEffect=null),null}else 2*Hr()-n.renderingStartTime>qs&&1073741824!==i&&(t.flags|=64,s=!0,ns(n,!1),t.lanes=33554432);n.isBackwards?(c.sibling=t.child,t.child=c):(null!==(i=n.last)?i.sibling=c:t.child=c,n.last=c)}return null!==n.tail?(i=n.tail,n.rendering=i,n.tail=i.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Hr(),i.sibling=null,t=Ro.current,lr(Ro,s?1&t|2:1&t),i):null;case 23:case 24:return wl(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==n.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function os(e){switch(e.tag){case 1:fr(e.type)&&gr();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(ko(),sr(hr),sr(dr),Xo(),0!==(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return Lo(e),null;case 13:return sr(Ro),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return sr(Ro),null;case 4:return ko(),null;case 10:return eo(e),null;case 23:case 24:return wl(),null;default:return null}}function as(e,t){try{var i="",n=t;do{i+=Y(n),n=n.return}while(n);var r=i}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r}}function ss(e,t){try{console.error(t.value)}catch(i){setTimeout((function(){throw i}))}}Va=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Ya=function(e,t,i,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,Ao(Io.current);var a,s=null;switch(i){case"input":o=K(e,o),n=K(e,n),s=[];break;case"option":o=oe(e,o),n=oe(e,n),s=[];break;case"select":o=r({},o,{value:void 0}),n=r({},n,{value:void 0}),s=[];break;case"textarea":o=se(e,o),n=se(e,n),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof n.onClick&&(e.onclick=Nn)}for(h in Ce(i,n),i=null,o)if(!n.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var c=o[h];for(a in c)c.hasOwnProperty(a)&&(i||(i={}),i[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in n){var d=n[h];if(c=null!=o?o[h]:void 0,n.hasOwnProperty(h)&&d!==c&&(null!=d||null!=c))if("style"===h)if(c){for(a in c)!c.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(i||(i={}),i[a]="");for(a in d)d.hasOwnProperty(a)&&c[a]!==d[a]&&(i||(i={}),i[a]=d[a])}else i||(s||(s=[]),s.push(h,i)),i=d;else"dangerouslySetInnerHTML"===h?(d=d?d.__html:void 0,c=c?c.__html:void 0,null!=d&&c!==d&&(s=s||[]).push(h,d)):"children"===h?"string"!==typeof d&&"number"!==typeof d||(s=s||[]).push(h,""+d):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=d&&"onScroll"===h&&In("scroll",e),s||c===d||(s=[])):"object"===typeof d&&null!==d&&d.$$typeof===R?d.toString():(s=s||[]).push(h,d))}i&&(s=s||[]).push("style",i);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Xa=function(e,t,i,n){i!==n&&(t.flags|=4)};var ls="function"===typeof WeakMap?WeakMap:Map;function cs(e,t,i){(i=so(-1,i)).tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){Xs||(Xs=!0,Gs=n),ss(0,t)},i}function ds(e,t,i){(i=so(-1,i)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var r=t.value;i.payload=function(){return ss(0,t),n(r)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(i.callback=function(){"function"!==typeof n&&(null===Zs?Zs=new Set([this]):Zs.add(this),ss(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),i}var hs="function"===typeof WeakSet?WeakSet:Set;function ps(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(i){Nl(e,i)}else t.current=null}function us(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var i=e.memoizedProps,n=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?i:Gr(t.type,i),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Un(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function fs(e,t,i){switch(i.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=i.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=i.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var r=e;n=r.next,0!==(4&(r=r.tag))&&0!==(1&r)&&(Ll(i,e),Ml(i,e)),e=n}while(e!==t)}return;case 1:return e=i.stateNode,4&i.flags&&(null===t?e.componentDidMount():(n=i.elementType===i.type?t.memoizedProps:Gr(i.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=i.updateQueue)&&po(i,t,e));case 3:if(null!==(t=i.updateQueue)){if(e=null,null!==i.child)switch(i.child.tag){case 5:e=i.child.stateNode;break;case 1:e=i.child.stateNode}po(i,t,e)}return;case 5:return e=i.stateNode,void(null===t&&4&i.flags&&Hn(i.type,i.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===i.memoizedState&&(i=i.alternate,null!==i&&(i=i.memoizedState,null!==i&&(i=i.dehydrated,null!==i&&Ot(i)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function gs(e,t){for(var i=e;;){if(5===i.tag){var n=i.stateNode;if(t)"function"===typeof(n=n.style).setProperty?n.setProperty("display","none","important"):n.display="none";else{n=i.stateNode;var r=i.memoizedProps.style;r=void 0!==r&&null!==r&&r.hasOwnProperty("display")?r.display:null,n.style.display=xe("display",r)}}else if(6===i.tag)i.stateNode.nodeValue=t?"":i.memoizedProps;else if((23!==i.tag&&24!==i.tag||null===i.memoizedState||i===e)&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ms(e,t){if(xr&&"function"===typeof xr.onCommitFiberUnmount)try{xr.onCommitFiberUnmount(wr,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e=e.next;do{var n=i,r=n.destroy;if(n=n.tag,void 0!==r)if(0!==(4&n))Ll(t,i);else{n=t;try{r()}catch(o){Nl(n,o)}}i=i.next}while(i!==e)}break;case 1:if(ps(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Nl(t,o)}break;case 5:ps(t);break;case 4:Os(e,t)}}function vs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ys(e){return 5===e.tag||3===e.tag||4===e.tag}function bs(e){e:{for(var t=e.return;null!==t;){if(ys(t))break e;t=t.return}throw Error(a(160))}var i=t;switch(t=i.stateNode,i.tag){case 5:var n=!1;break;case 3:case 4:t=t.containerInfo,n=!0;break;default:throw Error(a(161))}16&i.flags&&(ye(t,""),i.flags&=-17);e:t:for(i=e;;){for(;null===i.sibling;){if(null===i.return||ys(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;5!==i.tag&&6!==i.tag&&18!==i.tag;){if(2&i.flags)continue t;if(null===i.child||4===i.tag)continue t;i.child.return=i,i=i.child}if(!(2&i.flags)){i=i.stateNode;break e}}n?ws(e,i,t):xs(e,i,t)}function ws(e,t,i){var n=e.tag,r=5===n||6===n;if(r)e=r?e.stateNode:e.stateNode.instance,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=Nn));else if(4!==n&&null!==(e=e.child))for(ws(e,t,i),e=e.sibling;null!==e;)ws(e,t,i),e=e.sibling}function xs(e,t,i){var n=e.tag,r=5===n||6===n;if(r)e=r?e.stateNode:e.stateNode.instance,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==n&&null!==(e=e.child))for(xs(e,t,i),e=e.sibling;null!==e;)xs(e,t,i),e=e.sibling}function Os(e,t){for(var i,n,r=t,o=!1;;){if(!o){o=r.return;e:for(;;){if(null===o)throw Error(a(160));switch(i=o.stateNode,o.tag){case 5:n=!1;break e;case 3:case 4:i=i.containerInfo,n=!0;break e}o=o.return}o=!0}if(5===r.tag||6===r.tag){e:for(var s=e,l=r,c=l;;)if(ms(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break e;for(;null===c.sibling;){if(null===c.return||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}n?(s=i,l=r.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):i.removeChild(r.stateNode)}else if(4===r.tag){if(null!==r.child){i=r.stateNode.containerInfo,n=!0,r.child.return=r,r=r.child;continue}}else if(ms(e,r),null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;4===(r=r.return).tag&&(o=!1)}r.sibling.return=r.return,r=r.sibling}}function Ss(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var n=i=i.next;do{3===(3&n.tag)&&(e=n.destroy,n.destroy=void 0,void 0!==e&&e()),n=n.next}while(n!==i)}return;case 1:return;case 5:if(null!=(i=t.stateNode)){n=t.memoizedProps;var r=null!==e?e.memoizedProps:n;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(i[Jn]=n,"input"===e&&"radio"===n.type&&null!=n.name&&te(i,n),Pe(e,r),t=Pe(e,n),r=0;r<o.length;r+=2){var s=o[r],l=o[r+1];"style"===s?Oe(i,l):"dangerouslySetInnerHTML"===s?ve(i,l):"children"===s?ye(i,l):w(i,s,l,t)}switch(e){case"input":ie(i,n);break;case"textarea":ce(i,n);break;case"select":e=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!n.multiple,null!=(o=n.value)?ae(i,!!n.multiple,o,!1):e!==!!n.multiple&&(null!=n.defaultValue?ae(i,!!n.multiple,n.defaultValue,!0):ae(i,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((i=t.stateNode).hydrate&&(i.hydrate=!1,Ot(i.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Fs=Hr(),gs(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 17:return;case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(a(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new hs),t.forEach((function(t){var n=_l.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))}))}}function Ps(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var js=Math.ceil,Is=x.ReactCurrentDispatcher,Es=x.ReactCurrentOwner,Ts=0,As=null,Ds=null,ks=0,Ms=0,Ls=ar(0),Rs=0,zs=null,Ns=0,Bs=0,_s=0,Hs=0,Ws=null,Fs=0,qs=1/0;function Us(){qs=Hr()+500}var Vs,Ys=null,Xs=!1,Gs=null,Zs=null,Js=!1,Qs=null,$s=90,Ks=[],el=[],tl=null,il=0,nl=null,rl=-1,ol=0,al=0,sl=null,ll=!1;function cl(){return 0!==(48&Ts)?Hr():-1!==rl?rl:rl=Hr()}function dl(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Wr()?1:2;if(0===ol&&(ol=Ns),0!==Xr.transition){0!==al&&(al=null!==Ws?Ws.pendingLanes:0),e=ol;var t=4186112&~al;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Wr(),0!==(4&Ts)&&98===e?e=Ht(12,ol):e=Ht(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ol),e}function hl(e,t,i){if(50<il)throw il=0,nl=null,Error(a(185));if(null===(e=pl(e,t)))return null;qt(e,t,i),e===As&&(_s|=t,4===Rs&&gl(e,ks));var n=Wr();1===t?0!==(8&Ts)&&0===(48&Ts)?ml(e):(ul(e,i),0===Ts&&(Us(),Vr())):(0===(4&Ts)||98!==n&&99!==n||(null===tl?tl=new Set([e]):tl.add(e)),ul(e,i)),Ws=e}function pl(e,t){e.lanes|=t;var i=e.alternate;for(null!==i&&(i.lanes|=t),i=e,e=e.return;null!==e;)e.childLanes|=t,null!==(i=e.alternate)&&(i.childLanes|=t),i=e,e=e.return;return 3===i.tag?i.stateNode:null}function ul(e,t){for(var i=e.callbackNode,n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-Ut(s),c=1<<l,d=o[l];if(-1===d){if(0===(c&n)||0!==(c&r)){d=t,Nt(c);var h=zt;o[l]=10<=h?d+250:6<=h?d+5e3:-1}}else d<=t&&(e.expiredLanes|=c);s&=~c}if(n=Bt(e,e===As?ks:0),t=zt,0===n)null!==i&&(i!==Lr&&Cr(i),e.callbackNode=null,e.callbackPriority=0);else{if(null!==i){if(e.callbackPriority===t)return;i!==Lr&&Cr(i)}15===t?(i=ml.bind(null,e),null===zr?(zr=[i],Nr=Sr(Tr,Yr)):zr.push(i),i=Lr):14===t?i=Ur(99,ml.bind(null,e)):i=Ur(i=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),fl.bind(null,e)),e.callbackPriority=t,e.callbackNode=i}}function fl(e){if(rl=-1,al=ol=0,0!==(48&Ts))throw Error(a(327));var t=e.callbackNode;if(kl()&&e.callbackNode!==t)return null;var i=Bt(e,e===As?ks:0);if(0===i)return null;var n=i,r=Ts;Ts|=16;var o=Sl();for(As===e&&ks===n||(Us(),xl(e,n));;)try{jl();break}catch(l){Ol(e,l)}if(Kr(),Is.current=o,Ts=r,null!==Ds?n=0:(As=null,ks=0,n=Rs),0!==(Ns&_s))xl(e,0);else if(0!==n){if(2===n&&(Ts|=64,e.hydrate&&(e.hydrate=!1,Un(e.containerInfo)),0!==(i=_t(e))&&(n=Cl(e,i))),1===n)throw t=zs,xl(e,0),gl(e,i),ul(e,Hr()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=i,n){case 0:case 1:throw Error(a(345));case 2:Tl(e);break;case 3:if(gl(e,i),(62914560&i)===i&&10<(n=Fs+500-Hr())){if(0!==Bt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){cl(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Fn(Tl.bind(null,e),n);break}Tl(e);break;case 4:if(gl(e,i),(4186112&i)===i)break;for(n=e.eventTimes,r=-1;0<i;){var s=31-Ut(i);o=1<<s,(s=n[s])>r&&(r=s),i&=~o}if(i=r,10<(i=(120>(i=Hr()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*js(i/1960))-i)){e.timeoutHandle=Fn(Tl.bind(null,e),i);break}Tl(e);break;case 5:Tl(e);break;default:throw Error(a(329))}}return ul(e,Hr()),e.callbackNode===t?fl.bind(null,e):null}function gl(e,t){for(t&=~Hs,t&=~_s,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Ut(t),n=1<<i;e[i]=-1,t&=~n}}function ml(e){if(0!==(48&Ts))throw Error(a(327));if(kl(),e===As&&0!==(e.expiredLanes&ks)){var t=ks,i=Cl(e,t);0!==(Ns&_s)&&(i=Cl(e,t=Bt(e,t)))}else i=Cl(e,t=Bt(e,0));if(0!==e.tag&&2===i&&(Ts|=64,e.hydrate&&(e.hydrate=!1,Un(e.containerInfo)),0!==(t=_t(e))&&(i=Cl(e,t))),1===i)throw i=zs,xl(e,0),gl(e,t),ul(e,Hr()),i;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tl(e),ul(e,Hr()),null}function vl(e,t){var i=Ts;Ts|=1;try{return e(t)}finally{0===(Ts=i)&&(Us(),Vr())}}function yl(e,t){var i=Ts;Ts&=-2,Ts|=8;try{return e(t)}finally{0===(Ts=i)&&(Us(),Vr())}}function bl(e,t){lr(Ls,Ms),Ms|=t,Ns|=t}function wl(){Ms=Ls.current,sr(Ls)}function xl(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,qn(i)),null!==Ds)for(i=Ds.return;null!==i;){var n=i;switch(n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&gr();break;case 3:ko(),sr(hr),sr(dr),Xo();break;case 5:Lo(n);break;case 4:ko();break;case 13:case 19:sr(Ro);break;case 10:eo(n);break;case 23:case 24:wl()}i=i.return}As=e,Ds=ql(e.current,null),ks=Ms=Ns=t,Rs=0,zs=null,Hs=_s=Bs=0}function Ol(e,t){for(;;){var i=Ds;try{if(Kr(),Go.current=Ta,ea){for(var n=Qo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}ea=!1}if(Jo=0,Ko=$o=Qo=null,ta=!1,Es.current=null,null===i||null===i.return){Rs=1,zs=t,Ds=null;break}e:{var o=e,a=i.return,s=i,l=t;if(t=ks,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l;if(0===(2&s.mode)){var d=s.alternate;d?(s.updateQueue=d.updateQueue,s.memoizedState=d.memoizedState,s.lanes=d.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Ro.current),p=a;do{var u;if(u=13===p.tag){var f=p.memoizedState;if(null!==f)u=null!==f.dehydrated;else{var g=p.memoizedProps;u=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!h)}}if(u){var m=p.updateQueue;if(null===m){var v=new Set;v.add(c),p.updateQueue=v}else m.add(c);if(0===(2&p.mode)){if(p.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=so(-1,1);y.tag=2,lo(s,y)}s.lanes|=1;break e}l=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new ls,l=new Set,b.set(c,l)):void 0===(l=b.get(c))&&(l=new Set,b.set(c,l)),!l.has(s)){l.add(s);var w=Bl.bind(null,o,c,s);c.then(w,w)}p.flags|=4096,p.lanes=t;break e}p=p.return}while(null!==p);l=Error((X(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Rs&&(Rs=2),l=as(l,s),p=a;do{switch(p.tag){case 3:o=l,p.flags|=4096,t&=-t,p.lanes|=t,co(p,cs(0,o,t));break e;case 1:o=l;var x=p.type,O=p.stateNode;if(0===(64&p.flags)&&("function"===typeof x.getDerivedStateFromError||null!==O&&"function"===typeof O.componentDidCatch&&(null===Zs||!Zs.has(O)))){p.flags|=4096,t&=-t,p.lanes|=t,co(p,ds(p,o,t));break e}}p=p.return}while(null!==p)}El(i)}catch(S){t=S,Ds===i&&null!==i&&(Ds=i=i.return);continue}break}}function Sl(){var e=Is.current;return Is.current=Ta,null===e?Ta:e}function Cl(e,t){var i=Ts;Ts|=16;var n=Sl();for(As===e&&ks===t||xl(e,t);;)try{Pl();break}catch(r){Ol(e,r)}if(Kr(),Ts=i,Is.current=n,null!==Ds)throw Error(a(261));return As=null,ks=0,Rs}function Pl(){for(;null!==Ds;)Il(Ds)}function jl(){for(;null!==Ds&&!Pr();)Il(Ds)}function Il(e){var t=Vs(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?El(e):Ds=t,Es.current=null}function El(e){var t=e;do{var i=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(i=rs(i,t,Ms)))return void(Ds=i);if(24!==(i=t).tag&&23!==i.tag||null===i.memoizedState||0!==(1073741824&Ms)||0===(4&i.mode)){for(var n=0,r=i.child;null!==r;)n|=r.lanes|r.childLanes,r=r.sibling;i.childLanes=n}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(i=os(t)))return i.flags&=2047,void(Ds=i);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Rs&&(Rs=5)}function Tl(e){var t=Wr();return qr(99,Al.bind(null,e,t)),null}function Al(e,t){do{kl()}while(null!==Qs);if(0!==(48&Ts))throw Error(a(327));var i=e.finishedWork;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(a(177));e.callbackNode=null;var n=i.lanes|i.childLanes,r=n,o=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;for(var s=e.eventTimes,l=e.expirationTimes;0<o;){var c=31-Ut(o),d=1<<c;r[c]=0,s[c]=-1,l[c]=-1,o&=~d}if(null!==tl&&0===(24&n)&&tl.has(e)&&tl.delete(e),e===As&&(Ds=As=null,ks=0),1<i.flags?null!==i.lastEffect?(i.lastEffect.nextEffect=i,n=i.firstEffect):n=i:n=i.firstEffect,null!==n){if(r=Ts,Ts|=32,Es.current=null,Bn=Zt,fn(s=un())){if("selectionStart"in s)l={start:s.selectionStart,end:s.selectionEnd};else e:if(l=(l=s.ownerDocument)&&l.defaultView||window,(d=l.getSelection&&l.getSelection())&&0!==d.rangeCount){l=d.anchorNode,o=d.anchorOffset,c=d.focusNode,d=d.focusOffset;try{l.nodeType,c.nodeType}catch(j){l=null;break e}var h=0,p=-1,u=-1,f=0,g=0,m=s,v=null;t:for(;;){for(var y;m!==l||0!==o&&3!==m.nodeType||(p=h+o),m!==c||0!==d&&3!==m.nodeType||(u=h+d),3===m.nodeType&&(h+=m.nodeValue.length),null!==(y=m.firstChild);)v=m,m=y;for(;;){if(m===s)break t;if(v===l&&++f===o&&(p=h),v===c&&++g===d&&(u=h),null!==(y=m.nextSibling))break;v=(m=v).parentNode}m=y}l=-1===p||-1===u?null:{start:p,end:u}}else l=null;l=l||{start:0,end:0}}else l=null;_n={focusedElem:s,selectionRange:l},Zt=!1,sl=null,ll=!1,Ys=n;do{try{Dl()}catch(j){if(null===Ys)throw Error(a(330));Nl(Ys,j),Ys=Ys.nextEffect}}while(null!==Ys);sl=null,Ys=n;do{try{for(s=e;null!==Ys;){var b=Ys.flags;if(16&b&&ye(Ys.stateNode,""),128&b){var w=Ys.alternate;if(null!==w){var x=w.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&b){case 2:bs(Ys),Ys.flags&=-3;break;case 6:bs(Ys),Ys.flags&=-3,Ss(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,Ss(Ys.alternate,Ys);break;case 4:Ss(Ys.alternate,Ys);break;case 8:Os(s,l=Ys);var O=l.alternate;vs(l),null!==O&&vs(O)}Ys=Ys.nextEffect}}catch(j){if(null===Ys)throw Error(a(330));Nl(Ys,j),Ys=Ys.nextEffect}}while(null!==Ys);if(x=_n,w=un(),b=x.focusedElem,s=x.selectionRange,w!==b&&b&&b.ownerDocument&&pn(b.ownerDocument.documentElement,b)){null!==s&&fn(b)&&(w=s.start,void 0===(x=s.end)&&(x=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(x,b.value.length)):(x=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(x=x.getSelection(),l=b.textContent.length,O=Math.min(s.start,l),s=void 0===s.end?O:Math.min(s.end,l),!x.extend&&O>s&&(l=s,s=O,O=l),l=hn(b,O),o=hn(b,s),l&&o&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&((w=w.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),O>s?(x.addRange(w),x.extend(o.node,o.offset)):(w.setEnd(o.node,o.offset),x.addRange(w))))),w=[];for(x=b;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<w.length;b++)(x=w[b]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Zt=!!Bn,_n=Bn=null,e.current=i,Ys=n;do{try{for(b=e;null!==Ys;){var S=Ys.flags;if(36&S&&fs(b,Ys.alternate,Ys),128&S){w=void 0;var C=Ys.ref;if(null!==C){var P=Ys.stateNode;switch(Ys.tag){case 5:w=P;break;default:w=P}"function"===typeof C?C(w):C.current=w}}Ys=Ys.nextEffect}}catch(j){if(null===Ys)throw Error(a(330));Nl(Ys,j),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,Rr(),Ts=r}else e.current=i;if(Js)Js=!1,Qs=e,$s=t;else for(Ys=n;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((S=Ys).sibling=null,S.stateNode=null),Ys=t;if(0===(n=e.pendingLanes)&&(Zs=null),1===n?e===nl?il++:(il=0,nl=e):il=0,i=i.stateNode,xr&&"function"===typeof xr.onCommitFiberRoot)try{xr.onCommitFiberRoot(wr,i,void 0,64===(64&i.current.flags))}catch(j){}if(ul(e,Hr()),Xs)throw Xs=!1,e=Gs,Gs=null,e;return 0!==(8&Ts)||Vr(),null}function Dl(){for(;null!==Ys;){var e=Ys.alternate;ll||null===sl||(0!==(8&Ys.flags)?et(Ys,sl)&&(ll=!0):13===Ys.tag&&Ps(e,Ys)&&et(Ys,sl)&&(ll=!0));var t=Ys.flags;0!==(256&t)&&us(e,Ys),0===(512&t)||Js||(Js=!0,Ur(97,(function(){return kl(),null}))),Ys=Ys.nextEffect}}function kl(){if(90!==$s){var e=97<$s?97:$s;return $s=90,qr(e,Rl)}return!1}function Ml(e,t){Ks.push(t,e),Js||(Js=!0,Ur(97,(function(){return kl(),null})))}function Ll(e,t){el.push(t,e),Js||(Js=!0,Ur(97,(function(){return kl(),null})))}function Rl(){if(null===Qs)return!1;var e=Qs;if(Qs=null,0!==(48&Ts))throw Error(a(331));var t=Ts;Ts|=32;var i=el;el=[];for(var n=0;n<i.length;n+=2){var r=i[n],o=i[n+1],s=r.destroy;if(r.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===o)throw Error(a(330));Nl(o,c)}}for(i=Ks,Ks=[],n=0;n<i.length;n+=2){r=i[n],o=i[n+1];try{var l=r.create;r.destroy=l()}catch(c){if(null===o)throw Error(a(330));Nl(o,c)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Ts=t,Vr(),!0}function zl(e,t,i){lo(e,t=cs(0,t=as(i,t),1)),t=cl(),null!==(e=pl(e,1))&&(qt(e,1,t),ul(e,t))}function Nl(e,t){if(3===e.tag)zl(e,e,t);else for(var i=e.return;null!==i;){if(3===i.tag){zl(i,e,t);break}if(1===i.tag){var n=i.stateNode;if("function"===typeof i.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Zs||!Zs.has(n))){var r=ds(i,e=as(t,e),1);if(lo(i,r),r=cl(),null!==(i=pl(i,1)))qt(i,1,r),ul(i,r);else if("function"===typeof n.componentDidCatch&&(null===Zs||!Zs.has(n)))try{n.componentDidCatch(t,e)}catch(o){}break}}i=i.return}}function Bl(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),t=cl(),e.pingedLanes|=e.suspendedLanes&i,As===e&&(ks&i)===i&&(4===Rs||3===Rs&&(62914560&ks)===ks&&500>Hr()-Fs?xl(e,0):Hs|=i),ul(e,t)}function _l(e,t){var i=e.stateNode;null!==i&&i.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Wr()?1:2:(0===ol&&(ol=Ns),0===(t=Wt(62914560&~ol))&&(t=4194304))),i=cl(),null!==(e=pl(e,t))&&(qt(e,t,i),ul(e,i))}function Hl(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Wl(e,t,i,n){return new Hl(e,t,i,n)}function Fl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ql(e,t){var i=e.alternate;return null===i?((i=Wl(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Ul(e,t,i,n,r,o){var s=2;if(n=e,"function"===typeof e)Fl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case C:return Vl(i.children,r,o,t);case z:s=8,r|=16;break;case P:s=8,r|=1;break;case j:return(e=Wl(12,i,t,8|r)).elementType=j,e.type=j,e.lanes=o,e;case A:return(e=Wl(13,i,t,r)).type=A,e.elementType=A,e.lanes=o,e;case D:return(e=Wl(19,i,t,r)).elementType=D,e.lanes=o,e;case N:return Yl(i,r,o,t);case B:return(e=Wl(24,i,t,r)).elementType=B,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case E:s=9;break e;case T:s=11;break e;case k:s=14;break e;case M:s=16,n=null;break e;case L:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Wl(s,i,t,r)).elementType=e,t.type=n,t.lanes=o,t}function Vl(e,t,i,n){return(e=Wl(7,e,n,t)).lanes=i,e}function Yl(e,t,i,n){return(e=Wl(23,e,n,t)).elementType=N,e.lanes=i,e}function Xl(e,t,i){return(e=Wl(6,e,null,t)).lanes=i,e}function Gl(e,t,i){return(t=Wl(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zl(e,t,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ft(0),this.expirationTimes=Ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ft(0),this.mutableSourceEagerHydrationData=null}function Jl(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}function Ql(e,t,i,n){var r=t.current,o=cl(),s=dl(r);e:if(i){t:{if(Je(i=i._reactInternals)!==i||1!==i.tag)throw Error(a(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(fr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===i.tag){var c=i.type;if(fr(c)){i=vr(i,c,l);break e}}i=l}else i=cr;return null===t.context?t.context=i:t.pendingContext=i,(t=so(o,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),lo(r,t),hl(r,s,o),s}function $l(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Kl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function ec(e,t){Kl(e,t),(e=e.alternate)&&Kl(e,t)}function tc(e,t,i){var n=null!=i&&null!=i.hydrationOptions&&i.hydrationOptions.mutableSources||null;if(i=new Zl(e,t,null!=i&&!0===i.hydrate),t=Wl(3,null,null,2===t?7:1===t?3:0),i.current=t,t.stateNode=i,oo(t),e[Qn]=i.current,Tn(8===e.nodeType?e.parentNode:e),n)for(e=0;e<n.length;e++){var r=(t=n[e])._getVersion;r=r(t._source),null==i.mutableSourceEagerHydrationData?i.mutableSourceEagerHydrationData=[t,r]:i.mutableSourceEagerHydrationData.push(t,r)}this._internalRoot=i}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function nc(e,t,i,n,r){var o=i._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof r){var s=r;r=function(){var e=$l(a);s.call(e)}}Ql(t,a,e,r)}else{if(o=i._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var i;i=e.lastChild;)e.removeChild(i);return new tc(e,0,t?{hydrate:!0}:void 0)}(i,n),a=o._internalRoot,"function"===typeof r){var l=r;r=function(){var e=$l(a);l.call(e)}}yl((function(){Ql(t,a,e,r)}))}return $l(a)}function rc(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(a(200));return Jl(e,t,null,i)}Vs=function(e,t,i){var n=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||hr.current)La=!0;else{if(0===(i&n)){switch(La=!1,t.tag){case 3:Ua(t),Vo();break;case 5:Mo(t);break;case 1:fr(t.type)&&yr(t);break;case 4:Do(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var r=t.type._context;lr(Zr,r._currentValue),r._currentValue=n;break;case 13:if(null!==t.memoizedState)return 0!==(i&t.child.childLanes)?Za(e,t,i):(lr(Ro,1&Ro.current),null!==(t=is(e,t,i))?t.sibling:null);lr(Ro,1&Ro.current);break;case 19:if(n=0!==(i&t.childLanes),0!==(64&e.flags)){if(n)return ts(e,t,i);t.flags|=64}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),lr(Ro,Ro.current),n)break;return null;case 23:case 24:return t.lanes=0,_a(e,t,i)}return is(e,t,i)}La=0!==(16384&e.flags)}else La=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=ur(t,dr.current),io(t,i),r=ra(null,t,n,e,r,i),t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,fr(n)){var o=!0;yr(t)}else o=!1;t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,oo(t);var s=n.getDerivedStateFromProps;"function"===typeof s&&fo(t,n,s,e),r.updater=go,t.stateNode=r,r._reactInternals=t,bo(t,n,e,i),t=qa(null,t,n,!0,o,i)}else t.tag=0,Ra(null,t,r,i),t=t.child;return t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Fl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===k)return 14}return 2}(r),e=Gr(r,e),o){case 0:t=Wa(null,t,r,e,i);break e;case 1:t=Fa(null,t,r,e,i);break e;case 11:t=za(null,t,r,e,i);break e;case 14:t=Na(null,t,r,Gr(r.type,e),n,i);break e}throw Error(a(306,r,""))}return t;case 0:return n=t.type,r=t.pendingProps,Wa(e,t,n,r=t.elementType===n?r:Gr(n,r),i);case 1:return n=t.type,r=t.pendingProps,Fa(e,t,n,r=t.elementType===n?r:Gr(n,r),i);case 3:if(Ua(t),n=t.updateQueue,null===e||null===n)throw Error(a(282));if(n=t.pendingProps,r=null!==(r=t.memoizedState)?r.element:null,ao(e,t),ho(t,n,null,i),(n=t.memoizedState.element)===r)Vo(),t=is(e,t,i);else{if((o=(r=t.stateNode).hydrate)&&(Bo=Vn(t.stateNode.containerInfo.firstChild),No=t,o=_o=!0),o){if(null!=(e=r.mutableSourceEagerHydrationData))for(r=0;r<e.length;r+=2)(o=e[r])._workInProgressVersionPrimary=e[r+1],Yo.push(o);for(i=Po(t,null,n,i),t.child=i;i;)i.flags=-3&i.flags|1024,i=i.sibling}else Ra(e,t,n,i),Vo();t=t.child}return t;case 5:return Mo(t),null===e&&Fo(t),n=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,s=r.children,Wn(n,r)?s=null:null!==o&&Wn(n,o)&&(t.flags|=16),Ha(e,t),Ra(e,t,s,i),t.child;case 6:return null===e&&Fo(t),null;case 13:return Za(e,t,i);case 4:return Do(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Co(t,null,n,i):Ra(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,za(e,t,n,r=t.elementType===n?r:Gr(n,r),i);case 7:return Ra(e,t,t.pendingProps,i),t.child;case 8:case 12:return Ra(e,t,t.pendingProps.children,i),t.child;case 10:e:{n=t.type._context,r=t.pendingProps,s=t.memoizedProps,o=r.value;var l=t.type._context;if(lr(Zr,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,0===(o=sn(l,o)?0:0|("function"===typeof n._calculateChangedBits?n._calculateChangedBits(l,o):1073741823))){if(s.children===r.children&&!hr.current){t=is(e,t,i);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){s=l.child;for(var d=c.firstContext;null!==d;){if(d.context===n&&0!==(d.observedBits&o)){1===l.tag&&((d=so(-1,i&-i)).tag=2,lo(l,d)),l.lanes|=i,null!==(d=l.alternate)&&(d.lanes|=i),to(l.return,i),c.lanes|=i;break}d=d.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}Ra(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,n=(o=t.pendingProps).children,io(t,i),n=n(r=no(r,o.unstable_observedBits)),t.flags|=1,Ra(e,t,n,i),t.child;case 14:return o=Gr(r=t.type,t.pendingProps),Na(e,t,r,o=Gr(r.type,o),n,i);case 15:return Ba(e,t,t.type,t.pendingProps,n,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:Gr(n,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,fr(n)?(e=!0,yr(t)):e=!1,io(t,i),vo(t,n,r),bo(t,n,r,i),qa(null,t,n,!0,e,i);case 19:return ts(e,t,i);case 23:case 24:return _a(e,t,i)}throw Error(a(156,t.tag))},tc.prototype.render=function(e){Ql(e,this._internalRoot,null,null)},tc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ql(null,e,null,(function(){t[Qn]=null}))},tt=function(e){13===e.tag&&(hl(e,4,cl()),ec(e,4))},it=function(e){13===e.tag&&(hl(e,67108864,cl()),ec(e,67108864))},nt=function(e){if(13===e.tag){var t=cl(),i=dl(e);hl(e,i,t),ec(e,i)}},rt=function(e,t){return t()},Ie=function(e,t,i){switch(t){case"input":if(ie(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=ir(n);if(!r)throw Error(a(90));Q(n),ie(n,r)}}}break;case"textarea":ce(e,i);break;case"select":null!=(t=i.value)&&ae(e,!!i.multiple,t,!1)}},Me=vl,Le=function(e,t,i,n,r){var o=Ts;Ts|=4;try{return qr(98,e.bind(null,t,i,n,r))}finally{0===(Ts=o)&&(Us(),Vr())}},Re=function(){0===(49&Ts)&&(function(){if(null!==tl){var e=tl;tl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ul(e,Hr())}))}Vr()}(),kl())},ze=function(e,t){var i=Ts;Ts|=2;try{return e(t)}finally{0===(Ts=i)&&(Us(),Vr())}};var oc={Events:[er,tr,ir,De,ke,kl,{current:!1}]},ac={findFiberByHostInstance:Kn,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},sc={bundleType:ac.bundleType,version:ac.version,rendererPackageName:ac.rendererPackageName,rendererConfig:ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:ac.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{wr=lc.inject(sc),xr=lc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oc,t.createPortal=rc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e,t){var i=Ts;if(0!==(48&i))return e(t);Ts|=1;try{if(e)return qr(99,e.bind(null,t))}finally{Ts=i,Vr()}},t.hydrate=function(e,t,i){if(!ic(t))throw Error(a(200));return nc(null,e,t,!0,i)},t.render=function(e,t,i){if(!ic(t))throw Error(a(200));return nc(null,e,t,!1,i)},t.unmountComponentAtNode=function(e){if(!ic(e))throw Error(a(40));return!!e._reactRootContainer&&(yl((function(){nc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Qn]=null}))})),!0)},t.unstable_batchedUpdates=vl,t.unstable_createPortal=function(e,t){return rc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,i,n){if(!ic(i))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return nc(e,t,i,!1,n)},t.version="17.0.1"},function(e,t,i){"use strict";e.exports=i(34)},function(e,t,i){"use strict";var n,r,o,a;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var d=null,h=null,p=function e(){if(null!==d)try{var i=t.unstable_now();d(!0,i),d=null}catch(n){throw setTimeout(e,0),n}};n=function(e){null!==d?setTimeout(n,0,e):(d=e,setTimeout(p,0))},r=function(e,t){h=setTimeout(e,t)},o=function(){clearTimeout(h)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var u=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var g=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,v=null,y=-1,b=5,w=0;t.unstable_shouldYield=function(){return t.unstable_now()>=w},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,O=x.port2;x.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();w=e+b;try{v(!0,e)?O.postMessage(null):(m=!1,v=null)}catch(i){throw O.postMessage(null),i}}else m=!1},n=function(e){v=e,m||(m=!0,O.postMessage(null))},r=function(e,i){y=u((function(){e(t.unstable_now())}),i)},o=function(){f(y),y=-1}}function S(e,t){var i=e.length;e.push(t);e:for(;;){var n=i-1>>>1,r=e[n];if(!(void 0!==r&&0<j(r,t)))break e;e[n]=t,e[i]=r,i=n}}function C(e){return void 0===(e=e[0])?null:e}function P(e){var t=e[0];if(void 0!==t){var i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,r=e.length;n<r;){var o=2*(n+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>j(a,i))void 0!==l&&0>j(l,a)?(e[n]=l,e[s]=i,n=s):(e[n]=a,e[o]=i,n=o);else{if(!(void 0!==l&&0>j(l,i)))break e;e[n]=l,e[s]=i,n=s}}}return t}return null}function j(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}var I=[],E=[],T=1,A=null,D=3,k=!1,M=!1,L=!1;function R(e){for(var t=C(E);null!==t;){if(null===t.callback)P(E);else{if(!(t.startTime<=e))break;P(E),t.sortIndex=t.expirationTime,S(I,t)}t=C(E)}}function z(e){if(L=!1,R(e),!M)if(null!==C(I))M=!0,n(N);else{var t=C(E);null!==t&&r(z,t.startTime-e)}}function N(e,i){M=!1,L&&(L=!1,o()),k=!0;var n=D;try{for(R(i),A=C(I);null!==A&&(!(A.expirationTime>i)||e&&!t.unstable_shouldYield());){var a=A.callback;if("function"===typeof a){A.callback=null,D=A.priorityLevel;var s=a(A.expirationTime<=i);i=t.unstable_now(),"function"===typeof s?A.callback=s:A===C(I)&&P(I),R(i)}else P(I);A=C(I)}if(null!==A)var l=!0;else{var c=C(E);null!==c&&r(z,c.startTime-i),l=!1}return l}finally{A=null,D=n,k=!1}}var B=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){M||k||(M=!0,n(N))},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_getFirstCallbackNode=function(){return C(I)},t.unstable_next=function(e){switch(D){case 1:case 2:case 3:var t=3;break;default:t=D}var i=D;D=t;try{return e()}finally{D=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=B,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=D;D=e;try{return t()}finally{D=i}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:T++,callback:i,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>s?(e.sortIndex=a,S(E,e),null===C(I)&&e===C(E)&&(L?o():L=!0,r(z,a-s))):(e.sortIndex=l,S(I,e),M||k||(M=!0,n(N))),e},t.unstable_wrapCallback=function(e){var t=D;return function(){var i=D;D=t;try{return e.apply(this,arguments)}finally{D=i}}}},,,function(e,t,i){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ver=t.clear=t.bind=void 0;var n=i(39);t.bind=function(e,t){var i=(0,n.getSensor)(e);return i.bind(t),function(){i.unbind(t)}};t.clear=function(e){var t=(0,n.getSensor)(e);(0,n.removeSensor)(t)};t.ver="0.2.7"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeSensor=t.getSensor=void 0;var n,r=(n=i(40))&&n.__esModule?n:{default:n},o=i(41),a=i(26);var s={};t.getSensor=function(e){var t=e.getAttribute(a.SizeSensorId);if(t&&s[t])return s[t];var i=(0,r.default)();e.setAttribute(a.SizeSensorId,i);var n=(0,o.createSensor)(e);return s[i]=n,n};t.removeSensor=function(e){var t=e.element.getAttribute(a.SizeSensorId);e.element.removeAttribute(a.SizeSensorId),e.destroy(),t&&s[t]&&delete s[t]}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=1;t.default=function(){return"".concat(n++)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSensor=void 0;var n=i(42),r=i(43),o="undefined"!==typeof ResizeObserver?r.createSensor:n.createSensor;t.createSensor=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSensor=void 0;var n,r=(n=i(25))&&n.__esModule?n:{default:n},o=i(26);t.createSensor=function(e){var t=void 0,i=[],n=(0,r.default)((function(){i.forEach((function(t){t(e)}))})),a=function(){t&&t.parentNode&&(t.contentDocument&&t.contentDocument.defaultView.removeEventListener("resize",n),t.parentNode.removeChild(t),t=void 0,i=[])};return{element:e,bind:function(r){t||(t=function(){"static"===getComputedStyle(e).position&&(e.style.position="relative");var t=document.createElement("object");return t.onload=function(){t.contentDocument.defaultView.addEventListener("resize",n),n()},t.setAttribute("style",o.SensorStyle),t.setAttribute("class",o.SensorClassName),t.setAttribute("tabindex",o.SensorTabIndex),t.type="text/html",e.appendChild(t),t.data="about:blank",t}()),-1===i.indexOf(r)&&i.push(r)},destroy:a,unbind:function(e){var n=i.indexOf(e);-1!==n&&i.splice(n,1),0===i.length&&t&&a()}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSensor=void 0;var n,r=(n=i(25))&&n.__esModule?n:{default:n};t.createSensor=function(e){var t=void 0,i=[],n=(0,r.default)((function(){i.forEach((function(t){t(e)}))})),o=function(){t.disconnect(),i=[],t=void 0};return{element:e,bind:function(r){t||(t=function(){var t=new ResizeObserver(n);return t.observe(e),n(),t}()),-1===i.indexOf(r)&&i.push(r)},destroy:o,unbind:function(e){var n=i.indexOf(e);-1!==n&&i.splice(n,1),0===i.length&&t&&o()}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.noop=function(){}},function(e,t,i){"use strict";var n=i(46);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,i,r,o,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var i={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return i.PropTypes=i,i}},function(e,t,i){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,i){},function(e,t,i){e.exports=i(49)},function(e,t,i){var n=function(e){"use strict";var t,i=Object.prototype,n=i.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(D){l=function(e,t,i){return e[t]=i}}function c(e,t,i,n){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),a=new E(n||[]);return o._invoke=function(e,t,i){var n=h;return function(r,o){if(n===u)throw new Error("Generator is already running");if(n===f){if("throw"===r)throw o;return A()}for(i.method=r,i.arg=o;;){var a=i.delegate;if(a){var s=P(a,i);if(s){if(s===g)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===h)throw n=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=u;var l=d(e,t,i);if("normal"===l.type){if(n=i.done?f:p,l.arg===g)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=f,i.method="throw",i.arg=l.arg)}}}(e,i,a),o}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(D){return{type:"throw",arg:D}}}e.wrap=c;var h="suspendedStart",p="suspendedYield",u="executing",f="completed",g={};function m(){}function v(){}function y(){}var b={};b[o]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(T([])));x&&x!==i&&n.call(x,o)&&(b=x);var O=y.prototype=m.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function i(r,o,a,s){var l=d(e[r],e,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"===typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return i("throw",e,a,s)}))}s(l.arg)}var r;this._invoke=function(e,n){function o(){return new t((function(t,r){i(e,n,t,r)}))}return r=r?r.then(o,o):o()}}function P(e,i){var n=e.iterator[i.method];if(n===t){if(i.delegate=null,"throw"===i.method){if(e.iterator.return&&(i.method="return",i.arg=t,P(e,i),"throw"===i.method))return g;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=d(n,e.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,g;var o=r.arg;return o?o.done?(i[e.resultName]=o.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,g):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var i=e[o];if(i)return i.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function i(){for(;++r<e.length;)if(n.call(e,r))return i.value=e[r],i.done=!1,i;return i.value=t,i.done=!0,i};return a.next=a}}return{next:A}}function A(){return{value:t,done:!0}}return v.prototype=O.constructor=y,y.constructor=v,v.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},S(C.prototype),C.prototype[a]=function(){return this},e.AsyncIterator=C,e.async=function(t,i,n,r,o){void 0===o&&(o=Promise);var a=new C(c(t,i,n,r),o);return e.isGeneratorFunction(i)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),l(O,s,"Generator"),O[o]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},e.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function r(n,r){return s.type="throw",s.arg=e,i.next=n,r&&(i.method="next",i.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),I(i),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;I(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,i,n){return this.delegate={iterator:T(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=n}catch(r){Function("r","regeneratorRuntime = r")(n)}},function(e,t,i){"use strict";e.exports=i(51)},function(e,t,i){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,d=n?Symbol.for("react.context"):60110,h=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,u=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,g=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function O(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case h:case p:case a:case l:case s:case f:return e;default:switch(e=e&&e.$$typeof){case d:case u:case v:case m:case c:return e;default:return t}}case o:return t}}}function S(e){return O(e)===p}t.AsyncMode=h,t.ConcurrentMode=p,t.ContextConsumer=d,t.ContextProvider=c,t.Element=r,t.ForwardRef=u,t.Fragment=a,t.Lazy=v,t.Memo=m,t.Portal=o,t.Profiler=l,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return S(e)||O(e)===h},t.isConcurrentMode=S,t.isContextConsumer=function(e){return O(e)===d},t.isContextProvider=function(e){return O(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return O(e)===u},t.isFragment=function(e){return O(e)===a},t.isLazy=function(e){return O(e)===v},t.isMemo=function(e){return O(e)===m},t.isPortal=function(e){return O(e)===o},t.isProfiler=function(e){return O(e)===l},t.isStrictMode=function(e){return O(e)===s},t.isSuspense=function(e){return O(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===p||e===l||e===s||e===f||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===c||e.$$typeof===d||e.$$typeof===u||e.$$typeof===b||e.$$typeof===w||e.$$typeof===x||e.$$typeof===y)},t.typeOf=O},function(e,t,i){},function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return T}));var n=i(8),r=i(16);function o(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=Object(r.a)(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw a}}}}var a=i(5),s=i(6),l=i(7),c=i(17),d=i(18);function h(e,t,i){return(h=Object(d.a)()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&Object(c.a)(r,i.prototype),r}).apply(null,arguments)}var p="year",u="month",f="day",g="hour",m="minute",v="second",y="millisecond",b=["January","February","March","April","May","June","July","August","September","October","November","December"],w={parse:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:":";if(e instanceof Date)return e;if("string"===typeof e){var r,o,a=e.split(" ");r=a[0].split(t).map((function(e){return parseInt(e,10)})),o=a[1]&&a[1].split(i),r[1]=r[1]-1;var s=r;return o&&o.length&&(s=s.concat(o)),h(Date,Object(n.a)(s))}},to_string:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(e instanceof Date))throw new TypeError("Invalid argument type");var i=this.get_date_values(e).map((function(e,t){return 1===t&&(e+=1),x(e+"",2,"0")})),n="".concat(i[0],"-").concat(i[1],"-").concat(i[2]),r="".concat(i[3],":").concat(i[4],":").concat(i[5]);return n+(t?" "+r:"")},format:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss",i=this.get_date_values(e).map((function(e){return x(e,2,0)})),n={YYYY:i[0],MM:x(+i[1]+1,2,0),DD:i[2],HH:i[3],mm:i[4],ss:i[5],D:i[2],MMMM:b[+i[1]],MMM:b[+i[1]]},r=t,o=[];return Object.keys(n).sort((function(e,t){return t.length-e.length})).forEach((function(e){r.includes(e)&&(r=r.replace(e,"$".concat(o.length)),o.push(n[e]))})),o.forEach((function(e,t){r=r.replace("$".concat(t),e)})),r},diff:function(e,t){var i,n,r,o,a,s,l,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return l=(s=(a=(r=(o=(n=(i=e-t)/1e3)/60)/60)/24)/30)/12,c.endsWith("s")||(c+="s"),Math.floor({milliseconds:i,seconds:n,minutes:o,hours:r,days:a,months:s,years:l}[c])},today:function(){var e=this.get_date_values(new Date).slice(0,3);return h(Date,Object(n.a)(e))},now:function(){return new Date},add:function(e,t,i){t=parseInt(t,10);var n=[e.getFullYear()+(i===p?t:0),e.getMonth()+(i===u?t:0),e.getDate()+(i===f?t:0),e.getHours()+(i===g?t:0),e.getMinutes()+(i===m?t:0),e.getSeconds()+(i===v?t:0),e.getMilliseconds()+(i===y?t:0)];return h(Date,n)},start_of:function(e,t){var i,n=(i={},Object(l.a)(i,p,6),Object(l.a)(i,u,5),Object(l.a)(i,f,4),Object(l.a)(i,g,3),Object(l.a)(i,m,2),Object(l.a)(i,v,1),Object(l.a)(i,y,0),i);function r(e){return n[e]<=n[t]}var o=[e.getFullYear(),r(p)?0:e.getMonth(),r(u)?1:e.getDate(),r(f)?0:e.getHours(),r(g)?0:e.getMinutes(),r(m)?0:e.getSeconds(),r(v)?0:e.getMilliseconds()];return h(Date,o)},clone:function(e){return h(Date,Object(n.a)(this.get_date_values(e)))},get_date_values:function(e){return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]},get_days_in_month:function(e){var t=e.getMonth();if(1!==t)return[31,28,31,30,31,30,31,31,30,31,30,31][t];var i=e.getFullYear();return i%4==0&&i%100!=0||i%400==0?29:28}};function x(e,t,i){return e+="",t>>=0,i=String("undefined"!==typeof i?i:" "),e.length>t?String(e):((t-=e.length)>i.length&&(i+=i.repeat(t/i.length)),i.slice(0,t)+String(e))}function O(e,t){return"string"===typeof e?(t||document).querySelector(e):e||null}function S(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg",e);for(var n in t){if("append_to"===n)t.append_to.appendChild(i);else"innerHTML"===n?i.innerHTML=t.innerHTML:i.setAttribute(n,t[n])}return i}function C(e,t,i,n){var r=function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"0.4s",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"0.1s",a=e.querySelector("animate");if(a)return O.attr(a,{attributeName:t,from:i,to:n,dur:r,begin:"click + "+o}),e;var s=S("animate",{attributeName:t,from:i,to:n,dur:r,begin:o,calcMode:"spline",values:i+";"+n,keyTimes:"0; 1",keySplines:P("ease-out")});return e.appendChild(s),e}(e,t,i,n);if(r===e){var o=document.createEvent("HTMLEvents");o.initEvent("click",!0,!0),o.eventName="click",r.dispatchEvent(o)}}function P(e){return{ease:".25 .1 .25 1",linear:"0 0 1 1","ease-in":".42 0 1 1","ease-out":"0 0 .58 1","ease-in-out":".42 0 .58 1"}[e]}O.on=function(e,t,i,n){n?O.delegate(e,t,i,n):(n=i,O.bind(e,t,n))},O.off=function(e,t,i){e.removeEventListener(t,i)},O.bind=function(e,t,i){t.split(/\s+/).forEach((function(t){e.addEventListener(t,i)}))},O.delegate=function(e,t,i,n){e.addEventListener(t,(function(e){var t=e.target.closest(i);t&&(e.delegatedTarget=t,n.call(this,e,t))}))},O.closest=function(e,t){return t?t.matches(e)?t:O.closest(e,t.parentNode):null},O.attr=function(e,t,i){if(!i&&"string"===typeof t)return e.getAttribute(t);if("object"!==typeof t)e.setAttribute(t,i);else for(var n in t)O.attr(e,n,t[n])};var j=function(){function e(t,i){Object(a.a)(this,e),this.set_defaults(t,i),this.prepare(),this.draw(),this.bind()}return Object(s.a)(e,[{key:"set_defaults",value:function(e,t){this.action_completed=!1,this.gantt=e,this.task=t}},{key:"prepare",value:function(){this.prepare_values(),this.prepare_helpers()}},{key:"prepare_values",value:function(){this.invalid=this.task.invalid,this.height=this.gantt.options.bar_height,this.x=this.compute_x(),this.y=this.compute_y(),this.corner_radius=this.gantt.options.bar_corner_radius,this.duration=w.diff(this.task._end,this.task._start,"hour")/this.gantt.options.step,this.width=this.gantt.options.column_width*this.duration,this.progress_width=this.gantt.options.column_width*this.duration*(this.task.progress/100)||0,this.group=S("g",{class:"bar-wrapper "+(this.task.custom_class||""),"data-id":this.task.id}),this.bar_group=S("g",{class:"bar-group",append_to:this.group}),this.handle_group=S("g",{class:"handle-group",append_to:this.group})}},{key:"prepare_helpers",value:function(){SVGElement.prototype.getX=function(){return+this.getAttribute("x")},SVGElement.prototype.getY=function(){return+this.getAttribute("y")},SVGElement.prototype.getWidth=function(){return+this.getAttribute("width")},SVGElement.prototype.getHeight=function(){return+this.getAttribute("height")},SVGElement.prototype.getEndX=function(){return this.getX()+this.getWidth()}}},{key:"draw",value:function(){this.draw_bar(),this.draw_progress_bar(),this.draw_label(),this.draw_resize_handles()}},{key:"draw_bar",value:function(){this.$bar=S("rect",{x:this.x,y:this.y,width:this.width,height:this.height,rx:this.corner_radius,ry:this.corner_radius,class:"bar",append_to:this.bar_group}),C(this.$bar,"width",0,this.width),this.invalid&&this.$bar.classList.add("bar-invalid")}},{key:"draw_progress_bar",value:function(){this.invalid||(this.$bar_progress=S("rect",{x:this.x,y:this.y,width:this.progress_width,height:this.height,rx:this.corner_radius,ry:this.corner_radius,class:"bar-progress",append_to:this.bar_group}),C(this.$bar_progress,"width",0,this.progress_width))}},{key:"draw_label",value:function(){var e=this;S("text",{x:this.x+this.width/2,y:this.y+this.height/2,innerHTML:this.task.name,class:"bar-label",append_to:this.bar_group}),requestAnimationFrame((function(){return e.update_label_position()}))}},{key:"draw_resize_handles",value:function(){if(!this.invalid){var e=this.$bar;S("rect",{x:e.getX()+e.getWidth()-9,y:e.getY()+1,width:8,height:this.height-2,rx:this.corner_radius,ry:this.corner_radius,class:"handle right",append_to:this.handle_group}),S("rect",{x:e.getX()+1,y:e.getY()+1,width:8,height:this.height-2,rx:this.corner_radius,ry:this.corner_radius,class:"handle left",append_to:this.handle_group}),this.task.progress&&this.task.progress<100&&(this.$handle_progress=S("polygon",{points:this.get_progress_polygon_points().join(","),class:"handle progress",append_to:this.handle_group}))}}},{key:"get_progress_polygon_points",value:function(){var e=this.$bar_progress;return[e.getEndX()-5,e.getY()+e.getHeight(),e.getEndX()+5,e.getY()+e.getHeight(),e.getEndX(),e.getY()+e.getHeight()-8.66]}},{key:"bind",value:function(){this.invalid||this.setup_click_event()}},{key:"setup_click_event",value:function(){var e=this;O.on(this.group,"focus "+this.gantt.options.popup_trigger,(function(t){e.action_completed||("click"===t.type&&e.gantt.trigger_event("click",[e.task]),e.gantt.unselect_all(),e.group.classList.toggle("active"),e.show_popup())}))}},{key:"show_popup",value:function(){if(!this.gantt.bar_being_dragged){var e=w.format(this.task._start,"MMM D")+" - "+w.format(w.add(this.task._end,-1,"second"),"MMM D");this.gantt.show_popup({target_element:this.$bar,title:this.task.name,subtitle:e,task:this.task})}}},{key:"update_bar_position",value:function(e){var t=this,i=e.x,n=void 0===i?null:i,r=e.width,o=void 0===r?null:r,a=this.$bar;if(n){if(!this.task.dependencies.map((function(e){return t.gantt.get_bar(e).$bar.getX()})).reduce((function(e,t){return n>=t}),n))return void(o=null);this.update_attr(a,"x",n)}o&&o>=this.gantt.options.column_width&&this.update_attr(a,"width",o),this.update_label_position(),this.update_handle_position(),this.update_progressbar_position(),this.update_arrow_position()}},{key:"date_changed",value:function(){var e=!1,t=this.compute_start_end_date(),i=t.new_start_date,n=t.new_end_date;Number(this.task._start)!==Number(i)&&(e=!0,this.task._start=i),Number(this.task._end)!==Number(n)&&(e=!0,this.task._end=n),e&&this.gantt.trigger_event("date_change",[this.task,i,w.add(n,-1,"second")])}},{key:"progress_changed",value:function(){var e=this.compute_progress();this.task.progress=e,this.gantt.trigger_event("progress_change",[this.task,e])}},{key:"set_action_completed",value:function(){var e=this;this.action_completed=!0,setTimeout((function(){return e.action_completed=!1}),1e3)}},{key:"compute_start_end_date",value:function(){var e=this.$bar,t=e.getX()/this.gantt.options.column_width,i=w.add(this.gantt.gantt_start,t*this.gantt.options.step,"hour"),n=e.getWidth()/this.gantt.options.column_width;return{new_start_date:i,new_end_date:w.add(i,n*this.gantt.options.step,"hour")}}},{key:"compute_progress",value:function(){var e=this.$bar_progress.getWidth()/this.$bar.getWidth()*100;return parseInt(e,10)}},{key:"compute_x",value:function(){var e=this.gantt.options,t=e.step,i=e.column_width,n=this.task._start,r=this.gantt.gantt_start,o=w.diff(n,r,"hour")/t*i;this.gantt.view_is("Month")&&(o=w.diff(n,r,"day")*i/30);return o}},{key:"compute_y",value:function(){return this.gantt.options.header_height+this.gantt.options.padding+this.task._index*(this.height+this.gantt.options.padding)}},{key:"get_snap_position",value:function(e){var t,i=e;return this.gantt.view_is("Week")?i-(t=e%(this.gantt.options.column_width/7))+(t<this.gantt.options.column_width/14?0:this.gantt.options.column_width/7):this.gantt.view_is("Month")?i-(t=e%(this.gantt.options.column_width/30))+(t<this.gantt.options.column_width/60?0:this.gantt.options.column_width/30):i-(t=e%this.gantt.options.column_width)+(t<this.gantt.options.column_width/2?0:this.gantt.options.column_width)}},{key:"update_attr",value:function(e,t,i){return i=+i,isNaN(i)||e.setAttribute(t,i),e}},{key:"update_progressbar_position",value:function(){this.$bar_progress.setAttribute("x",this.$bar.getX()),this.$bar_progress.setAttribute("width",this.$bar.getWidth()*(this.task.progress/100))}},{key:"update_label_position",value:function(){var e=this.$bar,t=this.group.querySelector(".bar-label");t.getBBox().width>e.getWidth()?(t.classList.add("big"),t.setAttribute("x",e.getX()+e.getWidth()+5)):(t.classList.remove("big"),t.setAttribute("x",e.getX()+e.getWidth()/2))}},{key:"update_handle_position",value:function(){var e=this.$bar;this.handle_group.querySelector(".handle.left").setAttribute("x",e.getX()+1),this.handle_group.querySelector(".handle.right").setAttribute("x",e.getEndX()-9);var t=this.group.querySelector(".handle.progress");t&&t.setAttribute("points",this.get_progress_polygon_points())}},{key:"update_arrow_position",value:function(){this.arrows=this.arrows||[];var e,t=o(this.arrows);try{for(t.s();!(e=t.n()).done;){e.value.update()}}catch(i){t.e(i)}finally{t.f()}}}]),e}();var I=function(){function e(t,i,n){Object(a.a)(this,e),this.gantt=t,this.from_task=i,this.to_task=n,this.calculate_path(),this.draw()}return Object(s.a)(e,[{key:"calculate_path",value:function(){for(var e=this,t=this.from_task.$bar.getX()+this.from_task.$bar.getWidth()/2;e.to_task.$bar.getX()<t+e.gantt.options.padding&&t>e.from_task.$bar.getX()+e.gantt.options.padding;)t-=10;var i=this.gantt.options.header_height+this.gantt.options.bar_height+(this.gantt.options.padding+this.gantt.options.bar_height)*this.from_task.task._index+this.gantt.options.padding,n=this.to_task.$bar.getX()-this.gantt.options.padding/2,r=this.gantt.options.header_height+this.gantt.options.bar_height/2+(this.gantt.options.padding+this.gantt.options.bar_height)*this.to_task.task._index+this.gantt.options.padding,o=this.from_task.task._index>this.to_task.task._index,a=this.gantt.options.arrow_curve,s=o?1:0,l=o?-a:a,c=o?r+this.gantt.options.arrow_curve:r-this.gantt.options.arrow_curve;if(this.path="\n            M ".concat(t," ").concat(i,"\n            V ").concat(c,"\n            a ").concat(a," ").concat(a," 0 0 ").concat(s," ").concat(a," ").concat(l,"\n            L ").concat(n," ").concat(r,"\n            m -5 -5\n            l 5 5\n            l -5 5"),this.to_task.$bar.getX()<this.from_task.$bar.getX()+this.gantt.options.padding){var d=this.gantt.options.padding/2-a,h=this.to_task.$bar.getY()+this.to_task.$bar.getHeight()/2-l,p=this.to_task.$bar.getX()-this.gantt.options.padding;this.path="\n                M ".concat(t," ").concat(i,"\n                v ").concat(d,"\n                a ").concat(a," ").concat(a," 0 0 1 -").concat(a," ").concat(a,"\n                H ").concat(p,"\n                a ").concat(a," ").concat(a," 0 0 ").concat(s," -").concat(a," ").concat(l,"\n                V ").concat(h,"\n                a ").concat(a," ").concat(a," 0 0 ").concat(s," ").concat(a," ").concat(l,"\n                L ").concat(n," ").concat(r,"\n                m -5 -5\n                l 5 5\n                l -5 5")}}},{key:"draw",value:function(){this.element=S("path",{d:this.path,"data-from":this.from_task.task.id,"data-to":this.to_task.task.id})}},{key:"update",value:function(){this.calculate_path(),this.element.setAttribute("d",this.path)}}]),e}(),E=function(){function e(t,i){Object(a.a)(this,e),this.parent=t,this.custom_html=i,this.make()}return Object(s.a)(e,[{key:"make",value:function(){this.parent.innerHTML='\n            <div class="title"></div>\n            <div class="subtitle"></div>\n            <div class="pointer"></div>\n        ',this.hide(),this.title=this.parent.querySelector(".title"),this.subtitle=this.parent.querySelector(".subtitle"),this.pointer=this.parent.querySelector(".pointer")}},{key:"show",value:function(e){if(!e.target_element)throw new Error("target_element is required to show popup");e.position||(e.position="left");var t,i=e.target_element;if(this.custom_html){var n=this.custom_html(e.task);n+='<div class="pointer"></div>',this.parent.innerHTML=n,this.pointer=this.parent.querySelector(".pointer")}else this.title.innerHTML=e.title,this.subtitle.innerHTML=e.subtitle,this.parent.style.width=this.parent.clientWidth+"px";i instanceof HTMLElement?t=i.getBoundingClientRect():i instanceof SVGElement&&(t=e.target_element.getBBox()),"left"===e.position&&(this.parent.style.left=t.x+(t.width+10)+"px",this.parent.style.top=t.y+"px",this.pointer.style.transform="rotateZ(90deg)",this.pointer.style.left="-7px",this.pointer.style.top="2px"),this.parent.style.opacity=1}},{key:"hide",value:function(){this.parent.style.opacity=0}}]),e}(),T=(i(37),function(){function e(t,i,n){Object(a.a)(this,e),this.setup_wrapper(t),this.setup_options(n),this.setup_tasks(i),this.change_view_mode(),this.bind_events()}return Object(s.a)(e,[{key:"setup_wrapper",value:function(e){var t,i;if("string"===typeof e&&(e=document.querySelector(e)),e instanceof HTMLElement)i=e,t=e.querySelector("svg");else{if(!(e instanceof SVGElement))throw new TypeError("Frapp\xe9 Gantt only supports usage of a string CSS selector, HTML DOM element or SVG DOM element for the 'element' parameter");t=e}t?(this.$svg=t,this.$svg.classList.add("gantt")):this.$svg=S("svg",{append_to:i,class:"gantt"}),this.$container=document.createElement("div"),this.$container.classList.add("gantt-container"),this.$svg.parentElement.appendChild(this.$container),this.$container.appendChild(this.$svg),this.popup_wrapper=document.createElement("div"),this.popup_wrapper.classList.add("popup-wrapper"),this.$container.appendChild(this.popup_wrapper)}},{key:"setup_options",value:function(e){this.options=Object.assign({},{header_height:50,column_width:30,step:24,view_modes:["Quarter Day","Half Day","Day","Week","Month"],bar_height:20,bar_corner_radius:3,arrow_curve:5,padding:18,view_mode:"Day",date_format:"YYYY-MM-DD",popup_trigger:"click",custom_popup_html:null},e)}},{key:"setup_tasks",value:function(e){this.tasks=e.map((function(e,t){if(e._start=w.parse(e.start),e._end=w.parse(e.end),w.diff(e._end,e._start,"year")>10&&(e.end=null),e._index=t,!e.start&&!e.end){var i=w.today();e._start=i,e._end=w.add(i,2,"day")}if(!e.start&&e.end&&(e._start=w.add(e._end,-2,"day")),e.start&&!e.end&&(e._end=w.add(e._start,2,"day")),w.get_date_values(e._end).slice(3).every((function(e){return 0===e}))&&(e._end=w.add(e._end,24,"hour")),e.start&&e.end||(e.invalid=!0),"string"===typeof e.dependencies||!e.dependencies){var n=[];e.dependencies&&(n=e.dependencies.split(",").map((function(e){return e.trim()})).filter((function(e){return e}))),e.dependencies=n}return e.id||(e.id=function(e){return e.name+"_"+Math.random().toString(36).slice(2,12)}(e)),e})),this.setup_dependencies()}},{key:"setup_dependencies",value:function(){this.dependency_map={};var e,t=o(this.tasks);try{for(t.s();!(e=t.n()).done;){var i,n=e.value,r=o(n.dependencies);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.dependency_map[a]=this.dependency_map[a]||[],this.dependency_map[a].push(n.id)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}}},{key:"refresh",value:function(e){this.setup_tasks(e),this.change_view_mode()}},{key:"change_view_mode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.view_mode;this.update_view_scale(e),this.setup_dates(),this.render(),this.trigger_event("view_change",[e])}},{key:"update_view_scale",value:function(e){this.options.view_mode=e,"Day"===e?(this.options.step=24,this.options.column_width=38):"Half Day"===e?(this.options.step=12,this.options.column_width=38):"Quarter Day"===e?(this.options.step=6,this.options.column_width=38):"Week"===e?(this.options.step=168,this.options.column_width=140):"Month"===e&&(this.options.step=720,this.options.column_width=120)}},{key:"setup_dates",value:function(){this.setup_gantt_dates(),this.setup_date_values()}},{key:"setup_gantt_dates",value:function(){this.gantt_start=this.gantt_end=null;var e,t=o(this.tasks);try{for(t.s();!(e=t.n()).done;){var i=e.value;(!this.gantt_start||i._start<this.gantt_start)&&(this.gantt_start=i._start),(!this.gantt_end||i._end>this.gantt_end)&&(this.gantt_end=i._end)}}catch(n){t.e(n)}finally{t.f()}this.gantt_start=w.start_of(this.gantt_start,"day"),this.gantt_end=w.start_of(this.gantt_end,"day"),this.view_is(["Quarter Day","Half Day"])?(this.gantt_start=w.add(this.gantt_start,-7,"day"),this.gantt_end=w.add(this.gantt_end,7,"day")):this.view_is("Month")?(this.gantt_start=w.start_of(this.gantt_start,"year"),this.gantt_end=w.add(this.gantt_end,1,"year")):(this.gantt_start=w.add(this.gantt_start,-1,"month"),this.gantt_end=w.add(this.gantt_end,1,"month"))}},{key:"setup_date_values",value:function(){this.dates=[];for(var e=null;null===e||e<this.gantt_end;)e=e?this.view_is("Month")?w.add(e,1,"month"):w.add(e,this.options.step,"hour"):w.clone(this.gantt_start),this.dates.push(e)}},{key:"bind_events",value:function(){this.bind_grid_click(),this.bind_bar_events()}},{key:"render",value:function(){this.clear(),this.setup_layers(),this.make_grid(),this.make_dates(),this.make_bars(),this.make_arrows(),this.map_arrows_on_bars(),this.set_width(),this.set_scroll_position()}},{key:"setup_layers",value:function(){this.layers={};for(var e=0,t=["grid","date","arrow","progress","bar","details"];e<t.length;e++){var i=t[e];this.layers[i]=S("g",{class:i,append_to:this.$svg})}}},{key:"make_grid",value:function(){this.make_grid_background(),this.make_grid_rows(),this.make_grid_header(),this.make_grid_ticks(),this.make_grid_highlights()}},{key:"make_grid_background",value:function(){var e=this.dates.length*this.options.column_width,t=this.options.header_height+this.options.padding+(this.options.bar_height+this.options.padding)*this.tasks.length;S("rect",{x:0,y:0,width:e,height:t,class:"grid-background",append_to:this.layers.grid}),O.attr(this.$svg,{height:t+this.options.padding+100,width:"100%"})}},{key:"make_grid_rows",value:function(){var e,t=S("g",{append_to:this.layers.grid}),i=S("g",{append_to:this.layers.grid}),n=this.dates.length*this.options.column_width,r=this.options.bar_height+this.options.padding,a=this.options.header_height+this.options.padding/2,s=o(this.tasks);try{for(s.s();!(e=s.n()).done;){e.value;S("rect",{x:0,y:a,width:n,height:r,class:"grid-row",append_to:t}),S("line",{x1:0,y1:a+r,x2:n,y2:a+r,class:"row-line",append_to:i}),a+=this.options.bar_height+this.options.padding}}catch(l){s.e(l)}finally{s.f()}}},{key:"make_grid_header",value:function(){S("rect",{x:0,y:0,width:this.dates.length*this.options.column_width,height:this.options.header_height+10,class:"grid-header",append_to:this.layers.grid})}},{key:"make_grid_ticks",value:function(){var e,t=0,i=this.options.header_height+this.options.padding/2,n=(this.options.bar_height+this.options.padding)*this.tasks.length,r=o(this.dates);try{for(r.s();!(e=r.n()).done;){var a=e.value,s="tick";this.view_is("Day")&&1===a.getDate()&&(s+=" thick"),this.view_is("Week")&&a.getDate()>=1&&a.getDate()<8&&(s+=" thick"),this.view_is("Month")&&(a.getMonth()+1)%3===0&&(s+=" thick"),S("path",{d:"M ".concat(t," ").concat(i," v ").concat(n),class:s,append_to:this.layers.grid}),this.view_is("Month")?t+=w.get_days_in_month(a)*this.options.column_width/30:t+=this.options.column_width}}catch(l){r.e(l)}finally{r.f()}}},{key:"make_grid_highlights",value:function(){if(this.view_is("Day")){S("rect",{x:w.diff(w.today(),this.gantt_start,"hour")/this.options.step*this.options.column_width,y:0,width:this.options.column_width,height:(this.options.bar_height+this.options.padding)*this.tasks.length+this.options.header_height+this.options.padding/2,class:"today-highlight",append_to:this.layers.grid})}}},{key:"make_dates",value:function(){var e,t=o(this.get_dates_to_draw());try{for(t.s();!(e=t.n()).done;){var i=e.value;if(S("text",{x:i.lower_x,y:i.lower_y,innerHTML:i.lower_text,class:"lower-text",append_to:this.layers.date}),i.upper_text){var n=S("text",{x:i.upper_x,y:i.upper_y,innerHTML:i.upper_text,class:"upper-text",append_to:this.layers.date});n.getBBox().x2>this.layers.grid.getBBox().width&&n.remove()}}}catch(r){t.e(r)}finally{t.f()}}},{key:"get_dates_to_draw",value:function(){var e=this,t=null;return this.dates.map((function(i,n){var r=e.get_date_info(i,t,n);return t=i,r}))}},{key:"get_date_info",value:function(e,t,i){t||(t=w.add(e,1,"year"));var n={"Quarter Day_lower":w.format(e,"HH"),"Half Day_lower":w.format(e,"HH"),Day_lower:e.getDate()!==t.getDate()?w.format(e,"D"):"",Week_lower:e.getMonth()!==t.getMonth()?w.format(e,"D MMM"):w.format(e,"D"),Month_lower:w.format(e,"MMMM"),"Quarter Day_upper":e.getDate()!==t.getDate()?w.format(e,"D MMM"):"","Half Day_upper":e.getDate()!==t.getDate()?e.getMonth()!==t.getMonth()?w.format(e,"D MMM"):w.format(e,"D"):"",Day_upper:e.getMonth()!==t.getMonth()?w.format(e,"MMMM"):"",Week_upper:e.getMonth()!==t.getMonth()?w.format(e,"MMMM"):"",Month_upper:e.getFullYear()!==t.getFullYear()?w.format(e,"YYYY"):""},r={x:i*this.options.column_width,lower_y:this.options.header_height,upper_y:this.options.header_height-25},o={"Quarter Day_lower":4*this.options.column_width/2,"Quarter Day_upper":0,"Half Day_lower":2*this.options.column_width/2,"Half Day_upper":0,Day_lower:this.options.column_width/2,Day_upper:30*this.options.column_width/2,Week_lower:0,Week_upper:4*this.options.column_width/2,Month_lower:this.options.column_width/2,Month_upper:12*this.options.column_width/2};return{upper_text:n["".concat(this.options.view_mode,"_upper")],lower_text:n["".concat(this.options.view_mode,"_lower")],upper_x:r.x+o["".concat(this.options.view_mode,"_upper")],upper_y:r.upper_y,lower_x:r.x+o["".concat(this.options.view_mode,"_lower")],lower_y:r.lower_y}}},{key:"make_bars",value:function(){var e=this;this.bars=this.tasks.map((function(t){var i=new j(e,t);return e.layers.bar.appendChild(i.group),i}))}},{key:"make_arrows",value:function(){var e=this;this.arrows=[];var t,i=o(this.tasks);try{var n=function(){var i,n=t.value;i=n.dependencies.map((function(t){var i=e.get_task(t);if(i){var r=new I(e,e.bars[i._index],e.bars[n._index]);return e.layers.arrow.appendChild(r.element),r}})).filter(Boolean),e.arrows=e.arrows.concat(i)};for(i.s();!(t=i.n()).done;)n()}catch(r){i.e(r)}finally{i.f()}}},{key:"map_arrows_on_bars",value:function(){var e,t=this,i=o(this.bars);try{var n=function(){var i=e.value;i.arrows=t.arrows.filter((function(e){return e.from_task.task.id===i.task.id||e.to_task.task.id===i.task.id}))};for(i.s();!(e=i.n()).done;)n()}catch(r){i.e(r)}finally{i.f()}}},{key:"set_width",value:function(){var e=this.$svg.getBoundingClientRect().width,t=this.$svg.querySelector(".grid .grid-row").getAttribute("width");e<t&&this.$svg.setAttribute("width",t)}},{key:"set_scroll_position",value:function(){var e=this.$svg.parentElement;if(e){var t=w.diff(this.get_oldest_starting_date(),this.gantt_start,"hour")/this.options.step*this.options.column_width-this.options.column_width;e.scrollLeft=t}}},{key:"bind_grid_click",value:function(){var e=this;O.on(this.$svg,this.options.popup_trigger,".grid-row, .grid-header",(function(){e.unselect_all(),e.hide_popup()}))}},{key:"bind_bar_events",value:function(){var e=this,t=!1,i=0,r=!1,o=!1,a=null,s=[];this.bar_being_dragged=null,O.on(this.$svg,"mousedown",".bar-wrapper, .handle",(function(l,c){var d=O.closest(".bar-wrapper",c);c.classList.contains("left")?r=!0:c.classList.contains("right")?o=!0:c.classList.contains("bar-wrapper")&&(t=!0),d.classList.add("active"),i=l.offsetX,l.offsetY;var h=[a=d.getAttribute("data-id")].concat(Object(n.a)(e.get_all_dependent_tasks(a)));s=h.map((function(t){return e.get_bar(t)})),e.bar_being_dragged=a,s.forEach((function(e){var t=e.$bar;t.ox=t.getX(),t.oy=t.getY(),t.owidth=t.getWidth(),t.finaldx=0}))})),O.on(this.$svg,"mousemove",(function(n){if(t||r||o){var l=n.offsetX-i;n.offsetY;s.forEach((function(i){var n=i.$bar;n.finaldx=e.get_snap_position(l),r?a===i.task.id?i.update_bar_position({x:n.ox+n.finaldx,width:n.owidth-n.finaldx}):i.update_bar_position({x:n.ox+n.finaldx}):o?a===i.task.id&&i.update_bar_position({width:n.owidth+n.finaldx}):t&&i.update_bar_position({x:n.ox+n.finaldx})}))}})),document.addEventListener("mouseup",(function(e){(t||r||o)&&s.forEach((function(e){return e.group.classList.remove("active")})),t=!1,r=!1,o=!1})),O.on(this.$svg,"mouseup",(function(t){e.bar_being_dragged=null,s.forEach((function(e){e.$bar.finaldx&&(e.date_changed(),e.set_action_completed())}))})),this.bind_bar_progress()}},{key:"bind_bar_progress",value:function(){var e=this,t=0,i=null,n=null,r=null,o=null;O.on(this.$svg,"mousedown",".handle.progress",(function(a,s){i=!0,t=a.offsetX,a.offsetY;var l=O.closest(".bar-wrapper",s).getAttribute("data-id");n=e.get_bar(l),r=n.$bar_progress,o=n.$bar,r.finaldx=0,r.owidth=r.getWidth(),r.min_dx=-r.getWidth(),r.max_dx=o.getWidth()-r.getWidth()})),O.on(this.$svg,"mousemove",(function(e){if(i){var o=e.offsetX-t;e.offsetY;o>r.max_dx&&(o=r.max_dx),o<r.min_dx&&(o=r.min_dx);var a=n.$handle_progress;O.attr(r,"width",r.owidth+o),O.attr(a,"points",n.get_progress_polygon_points()),r.finaldx=o}})),O.on(this.$svg,"mouseup",(function(){i=!1,r&&r.finaldx&&(n.progress_changed(),n.set_action_completed())}))}},{key:"get_all_dependent_tasks",value:function(e){for(var t=this,i=[],n=[e];n.length;){var r=n.reduce((function(e,i){return e=e.concat(t.dependency_map[i])}),[]);i=i.concat(r),n=r.filter((function(e){return!n.includes(e)}))}return i.filter(Boolean)}},{key:"get_snap_position",value:function(e){var t,i=e;return this.view_is("Week")?i-(t=e%(this.options.column_width/7))+(t<this.options.column_width/14?0:this.options.column_width/7):this.view_is("Month")?i-(t=e%(this.options.column_width/30))+(t<this.options.column_width/60?0:this.options.column_width/30):i-(t=e%this.options.column_width)+(t<this.options.column_width/2?0:this.options.column_width)}},{key:"unselect_all",value:function(){Object(n.a)(this.$svg.querySelectorAll(".bar-wrapper")).forEach((function(e){e.classList.remove("active")}))}},{key:"view_is",value:function(e){var t=this;return"string"===typeof e?this.options.view_mode===e:!!Array.isArray(e)&&e.some((function(e){return t.options.view_mode===e}))}},{key:"get_task",value:function(e){return this.tasks.find((function(t){return t.id===e}))}},{key:"get_bar",value:function(e){return this.bars.find((function(t){return t.task.id===e}))}},{key:"show_popup",value:function(e){this.popup||(this.popup=new E(this.popup_wrapper,this.options.custom_popup_html)),this.popup.show(e)}},{key:"hide_popup",value:function(){this.popup&&this.popup.hide()}},{key:"trigger_event",value:function(e,t){this.options["on_"+e]&&this.options["on_"+e].apply(null,t)}},{key:"get_oldest_starting_date",value:function(){return this.tasks.map((function(e){return e._start})).reduce((function(e,t){return t<=e?t:e}))}},{key:"clear",value:function(){this.$svg.innerHTML=""}}]),e}())}]]);
//# sourceMappingURL=2.26bd1b33.chunk.js.map